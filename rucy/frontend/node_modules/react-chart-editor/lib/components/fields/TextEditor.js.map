{"version":3,"sources":["../../../src/components/fields/TextEditor.js"],"names":["UnconnectedTextEditor","props","attr","container","htmlOnly","latexOnly","multiValued","richTextOnly","updatePlot","_","context","localize","fullValue","placeholder","editor","propTypes","any","bool","func","modifyPlotProps","plotProps","isVisible"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA,qB;;;;;;;;;;;6BACK;AAAA,mBASH,KAAKC,KATF;AAAA,UAELC,IAFK,UAELA,IAFK;AAAA,UAGLC,SAHK,UAGLA,SAHK;AAAA,UAILC,QAJK,UAILA,QAJK;AAAA,UAKLC,SALK,UAKLA,SALK;AAAA,UAMLC,WANK,UAMLA,WANK;AAAA,UAOLC,YAPK,UAOLA,YAPK;AAAA,UAQLC,UARK,UAQLA,UARK;AAAA,UAWUC,CAXV,GAWe,KAAKC,OAXpB,CAWAC,QAXA;;;AAaP,UAAIC,YAAY,KAAKX,KAAL,CAAWW,SAA3B;;AAEA,UAAIC,oBAAJ;AACA,UAAIP,eAAgBM,cAAc,CAACT,SAAD,IAAc,CAACA,UAAUD,IAAV,CAA7B,CAApB,EAAoE;AAClEW,sBAAcD,SAAd;AACAA,oBAAY,EAAZ;AACD;;AAED,UAAIE,eAAJ;;AAEA,UAAIT,SAAJ,EAAe;AACbQ,sBAAcJ,EAAE,4BAAF,CAAd;AACAK,iBACE;AACE,iBAAOF,SADT;AAEE,uBAAaC,WAFf;AAGE,oBAAUL;AAHZ,UADF;AAOD,OATD,MASO,IAAID,YAAJ,EAAkB;AACvBO,iBACE;AACE,iBAAOF,SADT;AAEE,uBAAaC,WAFf;AAGE,oBAAUL;AAHZ,UADF;AAOD,OARM,MAQA,IAAIJ,QAAJ,EAAc;AACnBS,sBAAcJ,EAAE,2BAAF,CAAd;AACAK,iBACE;AACE,iBAAOF,SADT;AAEE,uBAAaC,WAFf;AAGE,oBAAUL;AAHZ,UADF;AAOD,OATM,MASA;AACLM,iBACE;AACE,iBAAOF,SADT;AAEE,uBAAaC,WAFf;AAGE,oBAAUL;AAHZ,UADF;AAOD;;AAED,aACE;AAAA;AAAW,aAAKP,KAAhB;AACE;AAAA;AAAA,YAAK,WAAU,aAAf;AAA8Ba;AAA9B;AADF,OADF;AAKD;;;;;;AAGHd,sBAAsBe,SAAtB,gBACK,gBAAMA,SADX;AAEEH,aAAW,oBAAUI,GAFvB;AAGEZ,YAAU,oBAAUa,IAHtB;AAIEZ,aAAW,oBAAUY,IAJvB;AAKEV,gBAAc,oBAAUU,IAL1B;AAMET,cAAY,oBAAUU;AANxB;;kBASe,6BAAmBlB,qBAAnB,EAA0C;AACvDmB,mBAAiB,yBAAClB,KAAD,EAAQS,OAAR,EAAiBU,SAAjB,EAA+B;AAC9C,QAAIA,UAAUC,SAAV,IAAuBD,UAAUd,WAArC,EAAkD;AAChDc,gBAAUC,SAAV,GAAsB,KAAtB;AACD;AACF;AALsD,CAA1C,C","file":"TextEditor.js","sourcesContent":["import Field from './Field';\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connectToContainer} from 'lib';\nimport LaTeX from '../widgets/text_editors/LaTeX';\nimport RichText from '../widgets/text_editors/RichText';\nimport MultiFormat from '../widgets/text_editors/MultiFormat';\nimport HTML from '../widgets/text_editors/HTML';\n\nclass UnconnectedTextEditor extends Component {\n  render() {\n    const {\n      attr,\n      container,\n      htmlOnly,\n      latexOnly,\n      multiValued,\n      richTextOnly,\n      updatePlot,\n    } = this.props;\n\n    const {localize: _} = this.context;\n\n    let fullValue = this.props.fullValue;\n\n    let placeholder;\n    if (multiValued || (fullValue && (!container || !container[attr]))) {\n      placeholder = fullValue;\n      fullValue = '';\n    }\n\n    let editor;\n\n    if (latexOnly) {\n      placeholder = _('Enter LaTeX formatted text');\n      editor = (\n        <LaTeX\n          value={fullValue}\n          placeholder={placeholder}\n          onChange={updatePlot}\n        />\n      );\n    } else if (richTextOnly) {\n      editor = (\n        <RichText\n          value={fullValue}\n          placeholder={placeholder}\n          onChange={updatePlot}\n        />\n      );\n    } else if (htmlOnly) {\n      placeholder = _('Enter html formatted text');\n      editor = (\n        <HTML\n          value={fullValue}\n          placeholder={placeholder}\n          onChange={updatePlot}\n        />\n      );\n    } else {\n      editor = (\n        <MultiFormat\n          value={fullValue}\n          placeholder={placeholder}\n          onChange={updatePlot}\n        />\n      );\n    }\n\n    return (\n      <Field {...this.props}>\n        <div className=\"text-editor\">{editor}</div>\n      </Field>\n    );\n  }\n}\n\nUnconnectedTextEditor.propTypes = {\n  ...Field.propTypes,\n  fullValue: PropTypes.any,\n  htmlOnly: PropTypes.bool,\n  latexOnly: PropTypes.bool,\n  richTextOnly: PropTypes.bool,\n  updatePlot: PropTypes.func,\n};\n\nexport default connectToContainer(UnconnectedTextEditor, {\n  modifyPlotProps: (props, context, plotProps) => {\n    if (plotProps.isVisible && plotProps.multiValued) {\n      plotProps.isVisible = false;\n    }\n  },\n});\n"]}