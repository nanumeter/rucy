{"version":3,"sources":["../../../src/components/containers/PlotlySection.js"],"names":["Section","sectionVisible","props","name","children","plotly_editor_traits","no_visibility_forcing","propTypes","node","string","attr","PlotlySection","context","determineVisibility","nextProps","nextContext","isVisible","Boolean","Children","forEach","child","plotProps","type","modifyPlotProps","contextTypes"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;IAEaA,O,WAAAA,O;;;AACX,qBAAc;AAAA;;AAAA;;AAEZ,UAAKC,cAAL,GAAsB,IAAtB;AAFY;AAGb;;;;6BAEQ;AACP,UAAI,CAAC,KAAKA,cAAV,EAA0B;AACxB,eAAO,IAAP;AACD;;AAED,aACE;AAAA;AAAA,UAAK,WAAU,SAAf;AACG,aAAKC,KAAL,CAAWC,IAAX,GACC;AAAA;AAAA,YAAK,WAAU,kBAAf;AACE;AAAA;AAAA,cAAK,WAAU,wBAAf;AAAyC,iBAAKD,KAAL,CAAWC;AAApD;AADF,SADD,GAIG,IALN;AAMG,aAAKD,KAAL,CAAWE;AANd,OADF;AAUD;;;;;;AAGHJ,QAAQK,oBAAR,GAA+B,EAACC,uBAAuB,KAAxB,EAA/B;AACAN,QAAQO,SAAR,GAAoB;AAClBH,YAAU,oBAAUI,IADF;AAElBL,QAAM,oBAAUM,MAFE;AAGlBC,QAAM,oBAAUD;AAHE,CAApB;;IAMqBE,a;;;AACnB,yBAAYT,KAAZ,EAAmBU,OAAnB,EAA4B;AAAA;;AAAA,+HACpBV,KADoB,EACbU,OADa;;AAE1B,WAAKC,mBAAL,CAAyBX,KAAzB,EAAgCU,OAAhC;AAF0B;AAG3B;;;;8CAEyBE,S,EAAWC,W,EAAa;AAChD,WAAKF,mBAAL,CAAyBC,SAAzB,EAAoCC,WAApC;AACD;;;wCAEmBD,S,EAAWC,W,EAAa;AAAA;;AAAA,6BACtB,0BAAgBD,SAAhB,EAA2BC,WAA3B,CADsB;AAAA,UACnCC,SADmC,oBACnCA,SADmC;;AAE1C,WAAKf,cAAL,GAAsBgB,QAAQD,SAAR,CAAtB;;AAEA,sBAAME,QAAN,CAAeC,OAAf,CAAuBL,UAAUV,QAAjC,EAA2C,iBAAS;AAClD,YAAI,CAACgB,KAAD,IAAU,OAAKnB,cAAnB,EAAmC;AACjC;AACD;;AAED,YAAImB,MAAMlB,KAAN,CAAYQ,IAAhB,EAAsB;AACpB,cAAMW,YAAY,0BAAgBD,MAAMlB,KAAtB,EAA6Ba,WAA7B,CAAlB;AACA,cAAIK,MAAME,IAAN,CAAWC,eAAf,EAAgC;AAC9BH,kBAAME,IAAN,CAAWC,eAAX,CAA2BH,MAAMlB,KAAjC,EAAwCa,WAAxC,EAAqDM,SAArD;AACD;AACD,iBAAKpB,cAAL,GAAsB,OAAKA,cAAL,IAAuBoB,UAAUL,SAAvD;AACA;AACD;;AAED,YAAI,CAAC,CAACI,MAAME,IAAN,CAAWjB,oBAAX,IAAmC,EAApC,EAAwCC,qBAA7C,EAAoE;AAClE;AACA,iBAAKL,cAAL,GAAsB,IAAtB;AACA;AACD;AACF,OAnBD;AAoBD;;;;EAlCwCD,O;;kBAAtBW,a;;;AAqCrBA,cAAcN,oBAAd,GAAqC,EAACC,uBAAuB,IAAxB,EAArC;AACAK,cAAca,YAAd","file":"PlotlySection.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {containerConnectedContextTypes, unpackPlotProps} from '../../lib';\n\nexport class Section extends Component {\n  constructor() {\n    super();\n    this.sectionVisible = true;\n  }\n\n  render() {\n    if (!this.sectionVisible) {\n      return null;\n    }\n\n    return (\n      <div className=\"section\">\n        {this.props.name ? (\n          <div className=\"section__heading\">\n            <div className=\"section__heading__text\">{this.props.name}</div>\n          </div>\n        ) : null}\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nSection.plotly_editor_traits = {no_visibility_forcing: false};\nSection.propTypes = {\n  children: PropTypes.node,\n  name: PropTypes.string,\n  attr: PropTypes.string,\n};\n\nexport default class PlotlySection extends Section {\n  constructor(props, context) {\n    super(props, context);\n    this.determineVisibility(props, context);\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    this.determineVisibility(nextProps, nextContext);\n  }\n\n  determineVisibility(nextProps, nextContext) {\n    const {isVisible} = unpackPlotProps(nextProps, nextContext);\n    this.sectionVisible = Boolean(isVisible);\n\n    React.Children.forEach(nextProps.children, child => {\n      if (!child || this.sectionVisible) {\n        return;\n      }\n\n      if (child.props.attr) {\n        const plotProps = unpackPlotProps(child.props, nextContext);\n        if (child.type.modifyPlotProps) {\n          child.type.modifyPlotProps(child.props, nextContext, plotProps);\n        }\n        this.sectionVisible = this.sectionVisible || plotProps.isVisible;\n        return;\n      }\n\n      if (!(child.type.plotly_editor_traits || {}).no_visibility_forcing) {\n        // non-attr components force visibility (unless they don't via traits)\n        this.sectionVisible = true;\n        return;\n      }\n    });\n  }\n}\n\nPlotlySection.plotly_editor_traits = {no_visibility_forcing: true};\nPlotlySection.contextTypes = containerConnectedContextTypes;\n"]}