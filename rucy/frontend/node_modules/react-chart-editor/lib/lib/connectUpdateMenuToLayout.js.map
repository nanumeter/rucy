{"version":3,"sources":["../../src/lib/connectUpdateMenuToLayout.js"],"names":["connectUpdateMenuToLayout","WrappedComponent","UpdateMenuConnectedComponent","props","context","updateUpdateMenu","bind","setLocals","nextProps","nextContext","updateMenuIndex","container","fullContainer","updatemenus","fullUpdateMenus","getValObject","attr","updateContainer","update","newUpdate","key","newkey","displayName","propTypes","number","isRequired","contextTypes","object","onUpdate","func","childContextTypes","plotly_editor_traits"],"mappings":";;;;;;;;kBAIwBA,yB;;AAJxB;;;;AACA;;;;AACA;;;;;;;;;;AAEe,SAASA,yBAAT,CAAmCC,gBAAnC,EAAqD;AAAA,MAC5DC,4BAD4D;AAAA;;AAEhE,0CAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,8JACpBD,KADoB,EACbC,OADa;;AAE1B,YAAKC,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBC,IAAtB,OAAxB;AACA,YAAKC,SAAL,CAAeJ,KAAf,EAAsBC,OAAtB;AAH0B;AAI3B;;AAN+D;AAAA;AAAA,gDAQtCI,SARsC,EAQ3BC,WAR2B,EAQd;AAChD,aAAKF,SAAL,CAAeC,SAAf,EAA0BC,WAA1B;AACD;AAV+D;AAAA;AAAA,gCAYtDN,KAZsD,EAY/CC,OAZ+C,EAYtC;AAAA,YACjBM,eADiB,GACEP,KADF,CACjBO,eADiB;AAAA,YAEjBC,SAFiB,GAEWP,OAFX,CAEjBO,SAFiB;AAAA,YAENC,aAFM,GAEWR,OAFX,CAENQ,aAFM;;;AAIxB,YAAMC,cAAcF,UAAUE,WAAV,IAAyB,EAA7C;AACA,YAAMC,kBAAkBF,cAAcC,WAAd,IAA6B,EAArD;AACA,aAAKF,SAAL,GAAiBE,YAAYH,eAAZ,CAAjB;AACA,aAAKE,aAAL,GAAqBE,gBAAgBJ,eAAhB,CAArB;AACD;AApB+D;AAAA;AAAA,wCAsB9C;AAAA;;AAChB,eAAO;AACLK,wBAAc;AAAA,mBACZ,CAAC,OAAKX,OAAL,CAAaW,YAAd,GACI,IADJ,GAEI,OAAKX,OAAL,CAAaW,YAAb,oBAA2CC,IAA3C,CAHQ;AAAA,WADT;AAKLC,2BAAiB,KAAKZ,gBALjB;AAMLM,qBAAW,KAAKA,SANX;AAOLC,yBAAe,KAAKA;AAPf,SAAP;AASD;AAhC+D;AAAA;AAAA,uCAkC/CM,MAlC+C,EAkCvC;AACvB,YAAMC,YAAY,EAAlB;AADuB,YAEhBT,eAFgB,GAEG,KAAKP,KAFR,CAEhBO,eAFgB;;AAGvB,aAAK,IAAMU,GAAX,IAAkBF,MAAlB,EAA0B;AACxB,cAAMG,0BAAwBX,eAAxB,UAA4CU,GAAlD;AACAD,oBAAUE,MAAV,IAAoBH,OAAOE,GAAP,CAApB;AACD;AACD,aAAKhB,OAAL,CAAaa,eAAb,CAA6BE,SAA7B;AACD;AA1C+D;AAAA;AAAA,+BA4CvD;AACP,eAAO,8BAAC,gBAAD,EAAsB,KAAKhB,KAA3B,CAAP;AACD;AA9C+D;;AAAA;AAAA;;AAiDlED,+BAA6BoB,WAA7B,2BAAiE,yBAC/DrB,gBAD+D,CAAjE;;AAIAC,+BAA6BqB,SAA7B,GAAyC;AACvCb,qBAAiB,oBAAUc,MAAV,CAAiBC;AADK,GAAzC;;AAIAvB,+BAA6BwB,YAA7B,GAA4C;AAC1Cf,eAAW,oBAAUgB,MADqB;AAE1Cf,mBAAe,oBAAUe,MAFiB;AAG1CC,cAAU,oBAAUC,IAHsB;AAI1CZ,qBAAiB,oBAAUY,IAJe;AAK1Cd,kBAAc,oBAAUc;AALkB,GAA5C;;AAQA3B,+BAA6B4B,iBAA7B,GAAiD;AAC/Cb,qBAAiB,oBAAUY,IADoB;AAE/ClB,eAAW,oBAAUgB,MAF0B;AAG/Cf,mBAAe,oBAAUe,MAHsB;AAI/CZ,kBAAc,oBAAUc;AAJuB,GAAjD;;AAjEkE,MAwE3DE,oBAxE2D,GAwEnC9B,gBAxEmC,CAwE3D8B,oBAxE2D;;AAyElE7B,+BAA6B6B,oBAA7B,GAAoDA,oBAApD;;AAEA,SAAO7B,4BAAP;AACD","file":"connectUpdateMenuToLayout.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\n\nexport default function connectUpdateMenuToLayout(WrappedComponent) {\n  class UpdateMenuConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n      this.updateUpdateMenu = this.updateUpdateMenu.bind(this);\n      this.setLocals(props, context);\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {updateMenuIndex} = props;\n      const {container, fullContainer} = context;\n\n      const updatemenus = container.updatemenus || [];\n      const fullUpdateMenus = fullContainer.updatemenus || [];\n      this.container = updatemenus[updateMenuIndex];\n      this.fullContainer = fullUpdateMenus[updateMenuIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: attr =>\n          !this.context.getValObject\n            ? null\n            : this.context.getValObject(`updatemenus[].${attr}`),\n        updateContainer: this.updateUpdateMenu,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateUpdateMenu(update) {\n      const newUpdate = {};\n      const {updateMenuIndex} = this.props;\n      for (const key in update) {\n        const newkey = `updatemenus[${updateMenuIndex}].${key}`;\n        newUpdate[newkey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  UpdateMenuConnectedComponent.displayName = `UpdateMenuConnected${getDisplayName(\n    WrappedComponent\n  )}`;\n\n  UpdateMenuConnectedComponent.propTypes = {\n    updateMenuIndex: PropTypes.number.isRequired,\n  };\n\n  UpdateMenuConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  UpdateMenuConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  UpdateMenuConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return UpdateMenuConnectedComponent;\n}\n"]}