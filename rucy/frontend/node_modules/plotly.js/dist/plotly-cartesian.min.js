/**
* plotly.js (cartesian - minified) v1.39.1
* Copyright 2012-2018, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var e,t,r;return function(){function e(t,r,a){function n(o,l){if(!r[o]){if(!t[o]){var s=typeof require=="function"&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return n(r?r:e)},c,c.exports,e,t,r,a)}return r[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<a.length;o++)n(a[o]);return n}return e}()({1:[function(e,t,r){"use strict";var a=e("../src/lib");var n={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in n){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");a.addStyleRule(o,n[i])}},{"../src/lib":169}],2:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:1e3,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:1e3,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"}}},{}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/bar")},{"../src/traces/bar":275}],4:[function(e,t,r){"use strict";t.exports=e("../src/traces/box")},{"../src/traces/box":288}],5:[function(e,t,r){"use strict";t.exports=e("../src/traces/contour")},{"../src/traces/contour":309}],6:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":154}],7:[function(e,t,r){"use strict";t.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":325}],8:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram")},{"../src/traces/histogram":343}],9:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":349}],10:[function(e,t,r){"use strict";t.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":353}],11:[function(e,t,r){"use strict";var a=e("./core");a.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./pie"),e("./contour"),e("./scatterternary"),e("./violin")]);t.exports=a},{"./bar":3,"./box":4,"./contour":5,"./core":6,"./heatmap":7,"./histogram":8,"./histogram2d":9,"./histogram2dcontour":10,"./pie":12,"./scatterternary":13,"./violin":14}],12:[function(e,t,r){"use strict";t.exports=e("../src/traces/pie")},{"../src/traces/pie":360}],13:[function(e,t,r){"use strict";t.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":397}],14:[function(e,t,r){"use strict";t.exports=e("../src/traces/violin")},{"../src/traces/violin":404}],15:[function(t,r,a){!function(){var t={version:"3.5.17"};var a=[].slice,n=function(e){return a.call(e)};var i=this.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function l(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i){try{n(i.documentElement.childNodes)[0].nodeType}catch(e){n=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(i){try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,u=s.setAttribute,c=s.setAttributeNS,f=this.CSSStyleDeclaration.prototype,d=f.setProperty;s.setAttribute=function(e,t){u.call(this,e,t+"")};s.setAttributeNS=function(e,t,r){c.call(this,e,t,r+"")};f.setProperty=function(e,t,r){d.call(this,e,t+"",r)}}}t.ascending=v;function v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};t.min=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&n>i)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&n>i)n=i}return n};t.max=function(e,t){var r=-1,a=e.length,n,i;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=i;break}while(++r<a)if((i=e[r])!=null&&i>n)n=i}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>n)n=i}return n};t.extent=function(e,t){var r=-1,a=e.length,n,i,o;if(arguments.length===1){while(++r<a)if((i=e[r])!=null&&i>=i){n=o=i;break}while(++r<a)if((i=e[r])!=null){if(n>i)n=i;if(o<i)o=i}}else{while(++r<a)if((i=t.call(e,e[r],r))!=null&&i>=i){n=o=i;break}while(++r<a)if((i=t.call(e,e[r],r))!=null){if(n>i)n=i;if(o<i)o=i}}return[n,o]};function p(e){return e===null?NaN:+e}function h(e){return!isNaN(e)}t.sum=function(e,t){var r=0,a=e.length,n,i=-1;if(arguments.length===1){while(++i<a)if(h(n=+e[i]))r+=n}else{while(++i<a)if(h(n=+t.call(e,e[i],i)))r+=n}return r};t.mean=function(e,t){var r=0,a=e.length,n,i=-1,o=a;if(arguments.length===1){while(++i<a)if(h(n=p(e[i])))r+=n;else--o}else{while(++i<a)if(h(n=p(t.call(e,e[i],i))))r+=n;else--o}if(o)return r/o};t.quantile=function(e,t){var r=(e.length-1)*t+1,a=Math.floor(r),n=+e[a-1],i=r-a;return i?n+i*(e[a]-n):n};t.median=function(e,r){var a=[],n=e.length,i,o=-1;if(arguments.length===1){while(++o<n)if(h(i=p(e[o])))a.push(i)}else{while(++o<n)if(h(i=p(r.call(e,e[o],o))))a.push(i)}if(a.length)return t.quantile(a.sort(v),.5)};t.variance=function(e,t){var r=e.length,a=0,n,i,o=0,l=-1,s=0;if(arguments.length===1){while(++l<r){if(h(n=p(e[l]))){i=n-a;a+=i/++s;o+=i*(n-a)}}}else{while(++l<r){if(h(n=p(t.call(e,e[l],l)))){i=n-a;a+=i/++s;o+=i*(n-a)}}}if(s>1)return o/(s-1)};t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};function g(e){return{left:function(t,r,a,n){if(arguments.length<3)a=0;if(arguments.length<4)n=t.length;while(a<n){var i=a+n>>>1;if(e(t[i],r)<0)a=i+1;else n=i}return a},right:function(t,r,a,n){if(arguments.length<3)a=0;if(arguments.length<4)n=t.length;while(a<n){var i=a+n>>>1;if(e(t[i],r)>0)n=i;else a=i+1}return a}}}var y=g(v);t.bisectLeft=y.left;t.bisect=t.bisectRight=y.right;t.bisector=function(e){return g(e.length===1?function(t,r){return v(e(t),r)}:e)};t.shuffle=function(e,t,r){if((a=arguments.length)<3){r=e.length;if(a<2)t=0}var a=r-t,n,i;while(a){i=Math.random()*a--|0;n=e[a+t],e[a+t]=e[i+t],e[i+t]=n}return e};t.permute=function(e,t){var r=t.length,a=new Array(r);while(r--)a[r]=e[t[r]];return a};t.pairs=function(e){var t=0,r=e.length-1,a,n=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[a=n,n=e[++t]];return i};t.transpose=function(e){if(!(o=e.length))return[];for(var r=-1,a=t.min(e,m),n=new Array(a);++r<a;){for(var i=-1,o,l=n[r]=new Array(o);++i<o;){l[i]=e[i][r]}}return n};function m(e){return e.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(e){var t=[];for(var r in e)t.push(r);return t};t.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};t.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};t.merge=function(e){var t=e.length,r,a=-1,n=0,i,o;while(++a<t)n+=e[a].length;i=new Array(n);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--n]=o[r]}}return i};var x=Math.abs;t.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var a=[],n=b(x(r)),i=-1,o;e*=n,t*=n,r*=n;if(r<0)while((o=e+r*++i)>t)a.push(o/n);else while((o=e+r*++i)<t)a.push(o/n);return a};function b(e){var t=1;while(e*t%1)t*=10;return t}function _(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}t.map=function(e,t){var r=new w;if(e instanceof w){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var a=-1,n=e.length,i;if(arguments.length===1)while(++a<n)r.set(a,e[a]);else while(++a<n)r.set(t.call(e,i=e[a],a),i)}else{for(var o in e)r.set(o,e[o])}return r};function w(){this._=Object.create(null)}var k="__proto__",M="\0";_(w,{has:L,get:function(e){return this._[T(e)]},set:function(e,t){return this._[T(e)]=t},remove:S,keys:C,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:A(t),value:this._[t]});return e},size:O,empty:z,forEach:function(e){for(var t in this._)e.call(this,A(t),this._[t])}});function T(e){return(e+="")===k||e[0]===M?M+e:e}function A(e){return(e+="")[0]===M?e.slice(1):e}function L(e){return T(e)in this._}function S(e){return(e=T(e))in this._&&delete this._[e]}function C(){var e=[];for(var t in this._)e.push(A(t));return e}function O(){var e=0;for(var t in this._)++e;return e}function z(){for(var e in this._)return false;return true}t.nest=function(){var e={},r=[],a=[],n,i;function o(t,a,l){if(l>=r.length)return i?i.call(e,a):n?a.sort(n):a;var s=-1,u=a.length,c=r[l++],f,d,v,p=new w,h;while(++s<u){if(h=p.get(f=c(d=a[s]))){h.push(d)}else{p.set(f,[d])}}if(t){d=t();v=function(e,r){d.set(e,o(t,r,l))}}else{d={};v=function(e,r){d[e]=o(t,r,l)}}p.forEach(v);return d}function l(e,t){if(t>=r.length)return e;var n=[],i=a[t++];e.forEach(function(e,r){n.push({key:e,values:l(r,t)})});return i?n.sort(function(e,t){return i(e.key,t.key)}):n}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return l(o(t.map,e,0),0)};e.key=function(t){r.push(t);return e};e.sortKeys=function(t){a[r.length-1]=t;return e};e.sortValues=function(t){n=t;return e};e.rollup=function(t){i=t;return e};return e};t.set=function(e){var t=new P;if(e)for(var r=0,a=e.length;r<a;++r)t.add(e[r]);return t};function P(){this._=Object.create(null)}_(P,{has:L,add:function(e){this._[T(e+="")]=true;return e},remove:S,values:C,size:O,empty:z,forEach:function(e){for(var t in this._)e.call(this,A(t))}});t.behavior={};function D(e){return e}t.rebind=function(e,t){var r=1,a=arguments.length,n;while(++r<a)e[n=arguments[r]]=I(e,t,t[n]);return e};function I(e,t,r){return function(){var a=r.apply(t,arguments);return a===t?e:a}}function E(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,a=N.length;r<a;++r){var n=N[r]+t;if(n in e)return n}}var N=["webkit","ms","moz","Moz","o","O"];function R(){}t.dispatch=function(){var e=new F,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=B(e);return e};function F(){}F.prototype.on=function(e,t){var r=e.indexOf("."),a="";if(r>=0){a=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(a):this[e].on(a,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(a,null)}return this}};function B(e){var t=[],r=new w;function a(){var r=t,a=-1,n=r.length,i;while(++a<n)if(i=r[a].on)i.apply(this,arguments);return e}a.on=function(a,n){var i=r.get(a),o;if(arguments.length<2)return i&&i.on;if(i){i.on=null;t=t.slice(0,o=t.indexOf(i)).concat(t.slice(o+1));r.remove(a)}if(n)t.push(r.set(a,{on:n}));return e};return a}t.event=null;function j(){t.event.preventDefault()}function q(){var e=t.event,r;while(r=e.sourceEvent)e=r;return e}function H(e){var r=new F,a=0,n=arguments.length;while(++a<n)r[arguments[a]]=B(r);r.of=function(a,n){return function(i){try{var o=i.sourceEvent=t.event;i.target=e;t.event=i;r[i.type].apply(a,n)}finally{t.event=o}}};return r}t.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var U={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function G(e){U(e,W);return e}var Z=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},X=function(e,t){var r=e.matches||e[E(e,"matchesSelector")];X=function(e,t){return r.call(e,t)};return X(e,t)};if(typeof Sizzle==="function"){Z=function(e,t){return Sizzle(e,t)[0]||null};Y=Sizzle;X=Sizzle.matchesSelector}t.selection=function(){return t.select(i.documentElement)};var W=t.selection.prototype=[];W.select=function(e){var t=[],r,a,n,i;e=Q(e);for(var o=-1,l=this.length;++o<l;){t.push(r=[]);r.parentNode=(n=this[o]).parentNode;for(var s=-1,u=n.length;++s<u;){if(i=n[s]){r.push(a=e.call(i,i.__data__,s,o));if(a&&"__data__"in i)a.__data__=i.__data__}else{r.push(null)}}}return G(t)};function Q(e){return typeof e==="function"?e:function(){return Z(e,this)}}W.selectAll=function(e){var t=[],r,a;e=J(e);for(var i=-1,o=this.length;++i<o;){for(var l=this[i],s=-1,u=l.length;++s<u;){if(a=l[s]){t.push(r=n(e.call(a,a.__data__,s,i)));r.parentNode=a}}}return G(t)};function J(e){return typeof e==="function"?e:function(){return Y(e,this)}}var $="http://www.w3.org/1999/xhtml";var K={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return K.hasOwnProperty(r)?{space:K[r],local:e}:e}};W.attr=function(e,r){if(arguments.length<2){if(typeof e==="string"){var a=this.node();e=t.ns.qualify(e);return e.local?a.getAttributeNS(e.space,e.local):a.getAttribute(e)}for(r in e)this.each(ee(r,e[r]));return this}return this.each(ee(e,r))};function ee(e,r){e=t.ns.qualify(e);function a(){this.removeAttribute(e)}function n(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,r)}function o(){this.setAttributeNS(e.space,e.local,r)}function l(){var t=r.apply(this,arguments);if(t==null)this.removeAttribute(e);else this.setAttribute(e,t)}function s(){var t=r.apply(this,arguments);if(t==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,t)}return r==null?e.local?n:a:typeof r==="function"?e.local?s:l:e.local?o:i}function te(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),a=(e=ae(e)).length,n=-1;if(t=r.classList){while(++n<a)if(!t.contains(e[n]))return false}else{t=r.getAttribute("class");while(++n<a)if(!re(e[n]).test(t))return false}return true}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))};function re(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ae(e){return(e+"").trim().split(/^|\s+/)}function ne(e,t){e=ae(e).map(ie);var r=e.length;function a(){var a=-1;while(++a<r)e[a](this,t)}function n(){var a=-1,n=t.apply(this,arguments);while(++a<r)e[a](this,n)}return typeof t==="function"?n:a}function ie(e){var t=re(e);return function(r,a){if(n=r.classList)return a?n.add(e):n.remove(e);var n=r.getAttribute("class")||"";if(a){t.lastIndex=0;if(!t.test(n))r.setAttribute("class",te(n+" "+e))}else{r.setAttribute("class",te(n.replace(t," ")))}}}W.style=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t="";for(r in e)this.each(oe(r,e[r],t));return this}if(a<2){var n=this.node();return l(n).getComputedStyle(n,null).getPropertyValue(e)}r=""}return this.each(oe(e,t,r))};function oe(e,t,r){function a(){this.style.removeProperty(e)}function n(){this.style.setProperty(e,t,r)}function i(){var a=t.apply(this,arguments);if(a==null)this.style.removeProperty(e);else this.style.setProperty(e,a,r)}return t==null?a:typeof t==="function"?i:n}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(le(t,e[t]));return this}return this.each(le(e,t))};function le(e,t){function r(){delete this[e]}function a(){this[e]=t}function n(){var r=t.apply(this,arguments);if(r==null)delete this[e];else this[e]=r}return t==null?r:typeof t==="function"?n:a}W.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};W.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};W.append=function(e){e=se(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function se(e){function r(){var t=this.ownerDocument,r=this.namespaceURI;return r===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(r,e)}function a(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=t.ns.qualify(e)).local?a:r}W.insert=function(e,t){e=se(e);t=Q(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(ue)};function ue(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,t){var r=-1,a=this.length,n,i;if(!arguments.length){e=new Array(a=(n=this[0]).length);while(++r<a){if(i=n[r]){e[r]=i.__data__}}return e}function o(e,r){var a,n=e.length,i=r.length,o=Math.min(n,i),c=new Array(i),f=new Array(i),d=new Array(n),v,p;if(t){var h=new w,g=new Array(n),y;for(a=-1;++a<n;){if(v=e[a]){if(h.has(y=t.call(v,v.__data__,a))){d[a]=v}else{h.set(y,v)}g[a]=y}}for(a=-1;++a<i;){if(!(v=h.get(y=t.call(r,p=r[a],a)))){f[a]=ce(p)}else if(v!==true){c[a]=v;v.__data__=p}h.set(y,true)}for(a=-1;++a<n;){if(a in g&&h.get(g[a])!==true){d[a]=e[a]}}}else{for(a=-1;++a<o;){v=e[a];p=r[a];if(v){v.__data__=p;c[a]=v}else{f[a]=ce(p)}}for(;a<i;++a){f[a]=ce(r[a])}for(;a<n;++a){d[a]=e[a]}}f.update=c;f.parentNode=c.parentNode=d.parentNode=e.parentNode;l.push(f);s.push(c);u.push(d)}var l=pe([]),s=G([]),u=G([]);if(typeof e==="function"){while(++r<a){o(n=this[r],e.call(n,n.parentNode.__data__,r))}}else{while(++r<a){o(n=this[r],e)}}s.enter=function(){return l};s.exit=function(){return u};return s};function ce(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=fe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(a=this[i]).parentNode;for(var l=0,s=a.length;l<s;l++){if((n=a[l])&&e.call(n,n.__data__,l,i)){r.push(n)}}}return G(t)};function fe(e){return function(){return X(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],a=r.length-1,n=r[a],i;--a>=0;){if(i=r[a]){if(n&&n!==i.nextSibling)n.parentNode.insertBefore(i,n);n=i}}}return this};W.sort=function(e){e=de.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function de(e){if(!arguments.length)e=v;return function(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}}W.each=function(e){return ve(this,function(t,r,a){e.call(t,t.__data__,r,a)})};function ve(e,t){for(var r=0,a=e.length;r<a;r++){for(var n=e[r],i=0,o=n.length,l;i<o;i++){if(l=n[i])t(l,i,r)}}return e}W.call=function(e){var t=n(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],a=0,n=r.length;a<n;a++){var i=r[a];if(i)return i}}return null};W.size=function(){var e=0;ve(this,function(){++e});return e};function pe(e){U(e,he);return e}var he=[];t.selection.enter=pe;t.selection.enter.prototype=he;he.append=W.append;he.empty=W.empty;he.node=W.node;he.call=W.call;he.size=W.size;he.select=function(e){var t=[],r,a,n,i,o;for(var l=-1,s=this.length;++l<s;){n=(i=this[l]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;){if(o=i[u]){r.push(n[u]=a=e.call(i.parentNode,o.__data__,u,l));a.__data__=o.__data__}else{r.push(null)}}}return G(t)};he.insert=function(e,t){if(arguments.length<2)t=ge(this);return W.insert.call(this,e,t)};function ge(e){var t,r;return function(a,n,i){var o=e[i].update,l=o.length,s;if(i!=r)r=i,t=0;if(n>=t)t=n+1;while(!(s=o[t])&&++t<l);return s}}t.select=function(e){var t;if(typeof e==="string"){t=[Z(e,i)];t.parentNode=i.documentElement}else{t=[e];t.parentNode=o(e)}return G([t])};t.selectAll=function(e){var t;if(typeof e==="string"){t=n(Y(e,i));t.parentNode=i.documentElement}else{t=n(e);t.parentNode=null}return G([t])};W.on=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t=false;for(r in e)this.each(ye(r,e[r],t));return this}if(a<2)return(a=this.node()["__on"+e])&&a._;r=false}return this.each(ye(e,t,r))};function ye(e,r,a){var i="__on"+e,o=e.indexOf("."),l=xe;if(o>0)e=e.slice(0,o);var s=me.get(e);if(s)e=s,l=be;function u(){var t=this[i];if(t){this.removeEventListener(e,t,t.$);delete this[i]}}function c(){var t=l(r,n(arguments));u.call(this);this.addEventListener(e,this[i]=t,t.$=a);t._=r}function f(){var r=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),a;for(var n in this){if(a=n.match(r)){var i=this[n];this.removeEventListener(a[1],i,i.$);delete this[n]}}}return o?r?c:u:r?R:f}var me=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(i){me.forEach(function(e){if("on"+e in i)me.remove(e)})}function xe(e,r){return function(a){var n=t.event;t.event=a;r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=n}}}function be(e,t){var r=xe(e,t);return function(e){var t=this,a=e.relatedTarget;if(!a||a!==t&&!(a.compareDocumentPosition(t)&8)){r.call(t,e)}}}var _e,we=0;function ke(e){var r=".dragsuppress-"+ ++we,a="click"+r,n=t.select(l(e)).on("touchmove"+r,j).on("dragstart"+r,j).on("selectstart"+r,j);if(_e==null){_e="onselectstart"in e?false:E(e.style,"userSelect")}if(_e){var i=o(e).style,s=i[_e];i[_e]="none"}return function(e){n.on(r,null);if(_e)i[_e]=s;if(e){var t=function(){n.on(a,null)};n.on(a,function(){j();t()},true);setTimeout(t,0)}}}t.mouse=function(e){return Te(e,q())};var Me=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,r){if(r.changedTouches)r=r.changedTouches[0];var a=e.ownerSVGElement||e;if(a.createSVGPoint){var n=a.createSVGPoint();if(Me<0){var i=l(e);if(i.scrollX||i.scrollY){a=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=a[0][0].getScreenCTM();Me=!(o.f||o.e);a.remove()}}if(Me)n.x=r.pageX,n.y=r.pageY;else n.x=r.clientX,n.y=r.clientY;n=n.matrixTransform(e.getScreenCTM().inverse());return[n.x,n.y]}var s=e.getBoundingClientRect();return[r.clientX-s.left-e.clientLeft,r.clientY-s.top-e.clientTop]}t.touch=function(e,t,r){if(arguments.length<3)r=t,t=q().changedTouches;if(t)for(var a=0,n=t.length,i;a<n;++a){if((i=t[a]).identifier===r){return Te(e,i)}}};t.behavior.drag=function(){var e=H(i,"drag","dragstart","dragend"),r=null,a=o(R,t.mouse,l,"mousemove","mouseup"),n=o(Ae,t.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",a).on("touchstart.drag",n)}function o(a,n,i,o,l){return function(){var s=this,u=t.event.target.correspondingElement||t.event.target,c=s.parentNode,f=e.of(s,arguments),d=0,v=a(),p=".drag"+(v==null?"":"-"+v),h,g=t.select(i(u)).on(o+p,x).on(l+p,b),y=ke(u),m=n(c,v);if(r){h=r.apply(s,arguments);h=[h.x-m[0],h.y-m[1]]}else{h=[0,0]}f({type:"dragstart"});function x(){var e=n(c,v),t,r;if(!e)return;t=e[0]-m[0];r=e[1]-m[1];d|=t|r;m=e;f({type:"drag",x:e[0]+h[0],y:e[1]+h[1],dx:t,dy:r})}function b(){if(!n(c,v))return;g.on(o+p,null).on(l+p,null);y(d);f({type:"dragend"})}}}i.origin=function(e){if(!arguments.length)return r;r=e;return i};return t.rebind(i,e,"on")};function Ae(){return t.event.changedTouches[0].identifier}t.touches=function(e,t){if(arguments.length<2)t=q().touches;return t?n(t).map(function(t){var r=Te(e,t);r.identifier=t.identifier;return r}):[]};var Le=1e-6,Se=Le*Le,Ce=Math.PI,Oe=2*Ce,ze=Oe-Le,Pe=Ce/2,De=Ce/180,Ie=180/Ce;function Ee(e){return e>0?1:e<0?-1:0}function Ne(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Re(e){return e>1?0:e<-1?Ce:Math.acos(e)}function Fe(e){return e>1?Pe:e<-1?-Pe:Math.asin(e)}function Be(e){return((e=Math.exp(e))-1/e)/2}function je(e){return((e=Math.exp(e))+1/e)/2}function qe(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Ve=Math.SQRT2,Ue=2,Ge=4;t.interpolateZoom=function(e,t){var r=e[0],a=e[1],n=e[2],i=t[0],o=t[1],l=t[2],s=i-r,u=o-a,c=s*s+u*u,f,d;if(c<Se){d=Math.log(l/n)/Ve;f=function(e){return[r+e*s,a+e*u,n*Math.exp(Ve*e*d)]}}else{var v=Math.sqrt(c),p=(l*l-n*n+Ge*c)/(2*n*Ue*v),h=(l*l-n*n-Ge*c)/(2*l*Ue*v),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(h*h+1)-h);d=(y-g)/Ve;f=function(e){var t=e*d,i=je(g),o=n/(Ue*v)*(i*qe(Ve*t+g)-Be(g));return[r+o*s,a+o*u,n*i/je(Ve*t+g)]}}f.duration=d*1e3;return f};t.behavior.zoom=function(){var e={x:0,y:0,k:1},r,a,n,o=[960,500],s=Ze,u=250,c=0,f="mousedown.zoom",d="mousemove.zoom",v="mouseup.zoom",p,h="touchstart.zoom",g,y=H(w,"zoomstart","zoom","zoomend"),m,x,b,_;if(!Xe){Xe="onwheel"in i?(Ye=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ye=function(){return t.event.wheelDelta},"mousewheel"):(Ye=function(){return-t.event.detail},"MozMousePixelScroll")}function w(e){e.on(f,P).on(Xe+".zoom",I).on("dblclick.zoom",E).on(h,D)}w.event=function(r){r.each(function(){var r=y.of(this,arguments),n=e;if(Ps){t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};C(r)}).tween("zoom:zoom",function(){var i=o[0],l=o[1],s=a?a[0]:i/2,u=a?a[1]:l/2,c=t.interpolateZoom([(s-e.x)/e.k,(u-e.y)/e.k,i/e.k],[(s-n.x)/n.k,(u-n.y)/n.k,i/n.k]);return function(t){var a=c(t),n=i/a[2];this.__chart__=e={x:s-a[0]*n,y:u-a[1]*n,k:n};O(r)}}).each("interrupt.zoom",function(){z(r)}).each("end.zoom",function(){z(r)})}else{this.__chart__=e;C(r);O(r);z(r)}})};w.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};S();return w};w.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};T(+t);S();return w};w.scaleExtent=function(e){if(!arguments.length)return s;s=e==null?Ze:[+e[0],+e[1]];return w};w.center=function(e){if(!arguments.length)return n;n=e&&[+e[0],+e[1]];return w};w.size=function(e){if(!arguments.length)return o;o=e&&[+e[0],+e[1]];return w};w.duration=function(e){if(!arguments.length)return u;u=+e;return w};w.x=function(t){if(!arguments.length)return x;x=t;m=t.copy();e={x:0,y:0,k:1};return w};w.y=function(t){if(!arguments.length)return _;_=t;b=t.copy();e={x:0,y:0,k:1};return w};function k(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function M(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function T(t){e.k=Math.max(s[0],Math.min(s[1],t))}function A(t,r){r=M(r);e.x+=t[0]-r[0];e.y+=t[1]-r[1]}function L(r,n,i,o){r.__chart__={x:e.x,y:e.y,k:e.k};T(Math.pow(2,o));A(a=n,i);r=t.select(r);if(u>0)r=r.transition().duration(u);r.call(w.event)}function S(){if(x)x.domain(m.range().map(function(t){return(t-e.x)/e.k}).map(m.invert));if(_)_.domain(b.range().map(function(t){return(t-e.y)/e.k}).map(b.invert))}function C(e){if(!c++)e({type:"zoomstart"})}function O(t){S();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function z(e){if(!--c)e({type:"zoomend"}),a=null}function P(){var e=this,r=y.of(e,arguments),a=0,n=t.select(l(e)).on(d,s).on(v,u),i=k(t.mouse(e)),o=ke(e);Ls.call(e);C(r);function s(){a=1;A(t.mouse(e),i);O(r)}function u(){n.on(d,null).on(v,null);o(a);z(r)}}function D(){var r=this,a=y.of(r,arguments),n={},i=0,o,l=".zoom-"+t.event.changedTouches[0].identifier,s="touchmove"+l,u="touchend"+l,c=[],d=t.select(r),v=ke(r);m();C(a);d.on(f,null).on(h,m);function p(){var a=t.touches(r);o=e.k;a.forEach(function(e){if(e.identifier in n)n[e.identifier]=k(e)});return a}function m(){var a=t.event.target;t.select(a).on(s,x).on(u,b);c.push(a);var o=t.event.changedTouches;for(var l=0,f=o.length;l<f;++l){n[o[l].identifier]=null}var d=p(),v=Date.now();if(d.length===1){if(v-g<500){var h=d[0];L(r,h,n[h.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);j()}g=v}else if(d.length>1){var h=d[0],y=d[1],m=h[0]-y[0],_=h[1]-y[1];i=m*m+_*_}}function x(){var e=t.touches(r),l,s,u,c;Ls.call(r);for(var f=0,d=e.length;f<d;++f,c=null){u=e[f];if(c=n[u.identifier]){if(s)break;l=u,s=c}}if(c){var v=(v=u[0]-l[0])*v+(v=u[1]-l[1])*v,p=i&&Math.sqrt(v/i);l=[(l[0]+u[0])/2,(l[1]+u[1])/2];s=[(s[0]+c[0])/2,(s[1]+c[1])/2];T(p*o)}g=null;A(l,s);O(a)}function b(){if(t.event.touches.length){var e=t.event.changedTouches;for(var r=0,i=e.length;r<i;++r){delete n[e[r].identifier]}for(var o in n){return void p()}}t.selectAll(c).on(l,null);d.on(f,P).on(h,D);v();z(a)}}function I(){var i=y.of(this,arguments);if(p)clearTimeout(p);else Ls.call(this),r=k(a=n||t.mouse(this)),C(i);p=setTimeout(function(){p=null;z(i)},50);j();T(Math.pow(2,Ye()*.002)*e.k);A(a,r);O(i)}function E(){var r=t.mouse(this),a=Math.log(e.k)/Math.LN2;L(this,r,k(r),t.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}return t.rebind(w,y,"on")};var Ze=[0,Infinity],Ye,Xe;t.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};t.hsl=Qe;function Qe(e,t,r){return this instanceof Qe?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Qe?new Qe(e.h,e.s,e.l):mt(""+e,xt,Qe):new Qe(e,t,r)}var Je=Qe.prototype=new We;Je.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Qe(this.h,this.s,this.l/e)};Je.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Qe(this.h,this.s,e*this.l)};Je.rgb=function(){return $e(this.h,this.s,this.l)};function $e(e,t,r){var a,n;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;n=r<=.5?r*(1+t):r+t-r*t;a=2*r-n;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return a+(n-a)*e/60;if(e<180)return n;if(e<240)return a+(n-a)*(240-e)/60;return a}function o(e){return Math.round(i(e)*255)}return new vt(o(e+120),o(e),o(e-120))}t.hcl=Ke;function Ke(e,r,a){return this instanceof Ke?void(this.h=+e,this.c=+r,this.l=+a):arguments.length<2?e instanceof Ke?new Ke(e.h,e.c,e.l):e instanceof rt?ut(e.l,e.a,e.b):ut((e=bt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ke(e,r,a)}var et=Ke.prototype=new We;et.brighter=function(e){return new Ke(this.h,this.c,Math.min(100,this.l+at*(arguments.length?e:1)))};et.darker=function(e){return new Ke(this.h,this.c,Math.max(0,this.l-at*(arguments.length?e:1)))};et.rgb=function(){return tt(this.h,this.c,this.l).rgb()};function tt(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new rt(r,Math.cos(e*=De)*t,Math.sin(e)*t)}t.lab=rt;function rt(e,t,r){return this instanceof rt?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof rt?new rt(e.l,e.a,e.b):e instanceof Ke?tt(e.h,e.c,e.l):bt((e=vt(e)).r,e.g,e.b):new rt(e,t,r)}var at=18;var nt=.95047,it=1,ot=1.08883;var lt=rt.prototype=new We;lt.brighter=function(e){return new rt(Math.min(100,this.l+at*(arguments.length?e:1)),this.a,this.b)};lt.darker=function(e){return new rt(Math.max(0,this.l-at*(arguments.length?e:1)),this.a,this.b)};lt.rgb=function(){return st(this.l,this.a,this.b)};function st(e,t,r){var a=(e+16)/116,n=a+t/500,i=a-r/200;n=ct(n)*nt;a=ct(a)*it;i=ct(i)*ot;return new vt(dt(3.2404542*n-1.5371385*a-.4985314*i),dt(-.969266*n+1.8760108*a+.041556*i),dt(.0556434*n-.2040259*a+1.0572252*i))}function ut(e,t,r){return e>0?new Ke(Math.atan2(r,t)*Ie,Math.sqrt(t*t+r*r),e):new Ke(NaN,NaN,e)}function ct(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ft(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function dt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}t.rgb=vt;function vt(e,t,r){return this instanceof vt?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof vt?new vt(e.r,e.g,e.b):mt(""+e,vt,$e):new vt(e,t,r)}function pt(e){return new vt(e>>16,e>>8&255,e&255)}function ht(e){return pt(e)+""}var gt=vt.prototype=new We;gt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,a=this.b,n=30;if(!t&&!r&&!a)return new vt(n,n,n);if(t&&t<n)t=n;if(r&&r<n)r=n;if(a&&a<n)a=n;return new vt(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,a/e))};gt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new vt(e*this.r,e*this.g,e*this.b)};gt.hsl=function(){return xt(this.r,this.g,this.b)};gt.toString=function(){return"#"+yt(this.r)+yt(this.g)+yt(this.b)};function yt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function mt(e,t,r){var a=0,n=0,i=0,o,l,s;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){l=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100)}case"rgb":{return t(wt(l[0]),wt(l[1]),wt(l[2]))}}}if(s=kt.get(e)){return t(s.r,s.g,s.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(s=parseInt(e.slice(1),16))){if(e.length===4){a=(s&3840)>>4;a=a>>4|a;n=s&240;n=n>>4|n;i=s&15;i=i<<4|i}else if(e.length===7){a=(s&16711680)>>16;n=(s&65280)>>8;i=s&255}}return t(a,n,i)}function xt(e,t,r){var a=Math.min(e/=255,t/=255,r/=255),n=Math.max(e,t,r),i=n-a,o,l,s=(n+a)/2;if(i){l=s<.5?i/(n+a):i/(2-n-a);if(e==n)o=(t-r)/i+(t<r?6:0);else if(t==n)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;l=s>0&&s<1?0:o}return new Qe(o,l,s)}function bt(e,t,r){e=_t(e);t=_t(t);r=_t(r);var a=ft((.4124564*e+.3575761*t+.1804375*r)/nt),n=ft((.2126729*e+.7151522*t+.072175*r)/it),i=ft((.0193339*e+.119192*t+.9503041*r)/ot);return rt(116*n-16,500*(a-n),200*(n-i))}function _t(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var kt=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});kt.forEach(function(e,t){kt.set(e,pt(t))});function Mt(e){return typeof e==="function"?e:function(){return e}}t.functor=Mt;t.xhr=Tt(D);function Tt(e){return function(t,r,a){if(arguments.length===2&&typeof r==="function")a=r,r=null;return At(t,r,e,a)}}function At(e,r,a,i){var o={},l=t.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(e))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()};function f(){var e=u.status,t;if(!e&&St(u)||e>=200&&e<300||e===304){try{t=a.call(o,u)}catch(e){l.error.call(o,e);return}l.load.call(o,t)}else{l.error.call(o,u)}}u.onprogress=function(e){var r=t.event;t.event=e;try{l.progress.call(o,u)}finally{t.event=r}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return s[e];if(t==null)delete s[e];else s[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return r;r=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return c;c=e;return o};o.response=function(e){a=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(n(arguments)))}});o.send=function(t,a,n){if(arguments.length===2&&typeof a==="function")n=a,a=null;u.open(t,e,true);if(r!=null&&!("accept"in s))s["accept"]=r+",*/*";if(u.setRequestHeader)for(var i in s)u.setRequestHeader(i,s[i]);if(r!=null&&u.overrideMimeType)u.overrideMimeType(r);if(c!=null)u.responseType=c;if(n!=null)o.on("error",n).on("load",function(e){n(null,e)});l.beforesend.call(o,u);u.send(a==null?null:a);return o};o.abort=function(){u.abort();return o};t.rebind(o,l,"on");return i==null?o:o.get(Lt(i))}function Lt(e){return e.length===1?function(t,r){e(t==null?r:null)}:e}function St(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}t.dsv=function(e,t){var r=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);function n(e,r,a){if(arguments.length<3)a=r,r=null;var n=At(e,t,r==null?i:o(r),a);n.row=function(e){return arguments.length?n.response((r=e)==null?i:o(e)):r};return n}function i(e){return n.parse(e.responseText)}function o(e){return function(t){return n.parse(t.responseText,e)}}n.parse=function(e,t){var r;return n.parseRows(e,function(e,a){if(r)return r(e,a-1);var n=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,r){return t(n(e),r)}:n})};n.parseRows=function(e,t){var r={},n={},i=[],o=e.length,l=0,s=0,u,c;function f(){if(l>=o)return n;if(c)return c=false,r;var t=l;if(e.charCodeAt(t)===34){var i=t;while(i++<o){if(e.charCodeAt(i)===34){if(e.charCodeAt(i+1)!==34)break;++i}}l=i+2;var s=e.charCodeAt(i+1);if(s===13){c=true;if(e.charCodeAt(i+2)===10)++l}else if(s===10){c=true}return e.slice(t+1,i).replace(/""/g,'"')}while(l<o){var s=e.charCodeAt(l++),u=1;if(s===10)c=true;else if(s===13){c=true;if(e.charCodeAt(l)===10)++l,++u}else if(s!==a)continue;return e.slice(t,l-u)}return e.slice(t)}while((u=f())!==n){var d=[];while(u!==r&&u!==n){d.push(u);u=f()}if(t&&(d=t(d,s++))==null)continue;i.push(d)}return i};n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new P,a=[];t.forEach(function(e){for(var t in e){if(!r.has(t)){a.push(r.add(t))}}});return[a.map(s).join(e)].concat(t.map(function(t){return a.map(function(e){return s(t[e])}).join(e)})).join("\n")};n.formatRows=function(e){return e.map(l).join("\n")};function l(t){return t.map(s).join(e)}function s(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return n};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Ct,Ot,zt,Pt,Dt=this[E(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){It.apply(this,arguments)};function It(e,t,r){var a=arguments.length;if(a<2)t=0;if(a<3)r=Date.now();var n=r+t,i={c:e,t:n,n:null};if(Ot)Ot.n=i;else Ct=i;Ot=i;if(!zt){Pt=clearTimeout(Pt);zt=1;Dt(Et)}return i}function Et(){var e=Nt(),t=Rt()-e;if(t>24){if(isFinite(t)){clearTimeout(Pt);Pt=setTimeout(Et,t)}zt=0}else{zt=1;Dt(Et)}}t.timer.flush=function(){Nt();Rt()};function Nt(){var e=Date.now(),t=Ct;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Rt(){var e,t=Ct,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:Ct=t.n}}Ot=e;return r}function Ft(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Bt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(jt);t.formatPrefix=function(e,r){var a=0;if(e=+e){if(e<0)e*=-1;if(r)e=t.round(e,Ft(e,r));a=1+Math.floor(1e-12+Math.log(e)/Math.LN10);a=Math.max(-24,Math.min(24,Math.floor((a-1)/3)*3))}return Bt[8+a/3]};function jt(e,t){var r=Math.pow(10,x(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function qt(e){var r=e.decimal,a=e.thousands,n=e.grouping,i=e.currency,o=n&&a?function(e,t){var r=e.length,i=[],o=0,l=n[0],s=0;while(r>0&&l>0){if(s+l+1>t)l=Math.max(1,t-s);i.push(e.substring(r-=l,r+l));if((s+=l+1)>t)break;l=n[o=(o+1)%n.length]}return i.reverse().join(a)}:D;return function(e){var a=Ht.exec(e),n=a[1]||" ",l=a[2]||">",s=a[3]||"-",u=a[4]||"",c=a[5],f=+a[6],d=a[7],v=a[8],p=a[9],h=1,g="",y="",m=false,x=true;if(v)v=+v.substring(1);if(c||n==="0"&&l==="="){c=n="0";l="="}switch(p){case"n":d=true;p="g";break;case"%":h=100;y="%";p="f";break;case"p":h=100;y="%";p="r";break;case"b":case"o":case"x":case"X":if(u==="#")g="0"+p.toLowerCase();case"c":x=false;case"d":m=true;v=0;break;case"s":h=-1;p="r";break}if(u==="$")g=i[0],y=i[1];if(p=="r"&&!v)p="g";if(v!=null){if(p=="g")v=Math.max(1,Math.min(21,v));else if(p=="e"||p=="f")v=Math.max(0,Math.min(20,v))}p=Vt.get(p)||Ut;var b=c&&d;return function(e){var a=y;if(m&&e%1)return"";var i=e<0||e===0&&1/e<0?(e=-e,"-"):s==="-"?"":s;if(h<0){var u=t.formatPrefix(e,v);e=u.scale(e);a=u.symbol+y}else{e*=h}e=p(e,v);var _=e.lastIndexOf("."),w,k;if(_<0){var M=x?e.lastIndexOf("e"):-1;if(M<0)w=e,k="";else w=e.substring(0,M),k=e.substring(M)}else{w=e.substring(0,_);k=r+e.substring(_+1)}if(!c&&d)w=o(w,Infinity);var T=g.length+w.length+k.length+(b?0:i.length),A=T<f?new Array(T=f-T+1).join(n):"";if(b)w=o(A+w,A.length?f-k.length:Infinity);i+=g;e=w+k;return(l==="<"?i+e+A:l===">"?A+i+e:l==="^"?A.substring(0,T>>=1)+i+e+A.substring(T):i+(b?e:A+e))+a}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Vt=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,r){return(e=t.round(e,Ft(e,r))).toFixed(Math.max(0,Math.min(20,Ft(e*(1+1e-15),r))))}});function Ut(e){return e+""}var Gt=t.time={},Zt=Date;function Yt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Yt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xt.setUTCDate.apply(this._,arguments)},setDay:function(){Xt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xt.setTime.apply(this._,arguments)}};var Xt=Date.prototype;function Wt(e,t,r){function a(t){var r=e(t),a=i(r,1);return t-r<a-t?r:a}function n(r){t(r=e(new Zt(r-1)),1);return r}function i(e,r){t(e=new Zt(+e),r);return e}function o(e,a,i){var o=n(e),l=[];if(i>1){while(o<a){if(!(r(o)%i))l.push(new Date(+o));t(o,1)}}else{while(o<a)l.push(new Date(+o)),t(o,1)}return l}function l(e,t,r){try{Zt=Yt;var a=new Yt;a._=e;return o(a,t,r)}finally{Zt=Date}}e.floor=e;e.round=a;e.ceil=n;e.offset=i;e.range=o;var s=e.utc=Qt(e);s.floor=s;s.round=Qt(a);s.ceil=Qt(n);s.offset=Qt(i);s.range=l;return e}function Qt(e){return function(t,r){try{Zt=Yt;var a=new Yt;a._=t;return e(a,r)._}finally{Zt=Date}}}Gt.year=Wt(function(e){e=Gt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Gt.years=Gt.year.range;Gt.years.utc=Gt.year.utc.range;Gt.day=Wt(function(e){var t=new Zt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Gt.days=Gt.day.range;Gt.days.utc=Gt.day.utc.range;Gt.dayOfYear=function(e){var t=Gt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var r=Gt[e]=Wt(function(e){(e=Gt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)-(r!==t)});Gt[e+"s"]=r.range;Gt[e+"s"].utc=r.utc.range;Gt[e+"OfYear"]=function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)}});Gt.week=Gt.sunday;Gt.weeks=Gt.sunday.range;Gt.weeks.utc=Gt.sunday.utc.range;Gt.weekOfYear=Gt.sundayOfYear;function Jt(e){var r=e.dateTime,a=e.date,n=e.time,i=e.periods,o=e.days,l=e.shortDays,s=e.months,u=e.shortMonths;function c(e){var t=e.length;function r(r){var a=[],n=-1,i=0,o,l,s;while(++n<t){if(e.charCodeAt(n)===37){a.push(e.slice(i,n));if((l=$t[o=e.charAt(++n)])!=null)o=e.charAt(++n);if(s=_[o])o=s(r,l==null?o==="e"?" ":"0":l);a.push(o);i=n+1}}a.push(e.slice(i,n));return a.join("")}r.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},a=f(r,e,t,0);if(a!=t.length)return null;if("p"in r)r.H=r.H%12+r.p*12;var n=r.Z!=null&&Zt!==Yt,i=new(n?Yt:Zt);if("j"in r)i.setFullYear(r.y,0,r.j);else if("W"in r||"U"in r){if(!("w"in r))r.w="W"in r?1:0;i.setFullYear(r.y,0,1);i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+r.W*7-(i.getDay()+5)%7:r.w+r.U*7-(i.getDay()+6)%7)}else i.setFullYear(r.y,r.m,r.d);i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L);return n?i._:i};r.toString=function(){return e};return r}function f(e,t,r,a){var n,i,o,l=0,s=t.length,u=r.length;while(l<s){if(a>=u)return-1;n=t.charCodeAt(l++);if(n===37){o=t.charAt(l++);i=w[o in $t?t.charAt(l++):o];if(!i||(a=i(e,r,a))<0)return-1}else if(n!=r.charCodeAt(a++)){return-1}}return a}c.utc=function(e){var t=c(e);function r(e){try{Zt=Yt;var r=new Zt;r._=e;return t(r)}finally{Zt=Date}}r.parse=function(e){try{Zt=Yt;var r=t.parse(e);return r&&r._}finally{Zt=Date}};r.toString=t.toString;return r};c.multi=c.utc.multi=br;var d=t.map(),v=rr(o),p=ar(o),h=rr(l),g=ar(l),y=rr(s),m=ar(s),x=rr(u),b=ar(u);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var _={a:function(e){return l[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(r),d:function(e,t){return tr(e.getDate(),t,2)},e:function(e,t){return tr(e.getDate(),t,2)},H:function(e,t){return tr(e.getHours(),t,2)},I:function(e,t){return tr(e.getHours()%12||12,t,2)},j:function(e,t){return tr(1+Gt.dayOfYear(e),t,3)},L:function(e,t){return tr(e.getMilliseconds(),t,3)},m:function(e,t){return tr(e.getMonth()+1,t,2)},M:function(e,t){return tr(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return tr(e.getSeconds(),t,2)},U:function(e,t){return tr(Gt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return tr(Gt.mondayOfYear(e),t,2)},x:c(a),X:c(n),y:function(e,t){return tr(e.getFullYear()%100,t,2)},Y:function(e,t){return tr(e.getFullYear()%1e4,t,4)},Z:mr,"%":function(){return"%"}};var w={a:k,A:M,b:T,B:A,c:L,d:dr,e:dr,H:pr,I:pr,j:vr,L:yr,m:fr,M:hr,p:O,S:gr,U:ir,w:nr,W:or,x:S,X:C,y:sr,Y:lr,Z:ur,"%":xr};function k(e,t,r){h.lastIndex=0;var a=h.exec(t.slice(r));return a?(e.w=g.get(a[0].toLowerCase()),r+a[0].length):-1}function M(e,t,r){v.lastIndex=0;var a=v.exec(t.slice(r));return a?(e.w=p.get(a[0].toLowerCase()),r+a[0].length):-1}function T(e,t,r){x.lastIndex=0;var a=x.exec(t.slice(r));return a?(e.m=b.get(a[0].toLowerCase()),r+a[0].length):-1}function A(e,t,r){y.lastIndex=0;var a=y.exec(t.slice(r));return a?(e.m=m.get(a[0].toLowerCase()),r+a[0].length):-1}function L(e,t,r){return f(e,_.c.toString(),t,r)}function S(e,t,r){return f(e,_.x.toString(),t,r)}function C(e,t,r){return f(e,_.X.toString(),t,r)}function O(e,t,r){var a=d.get(t.slice(r,r+=2).toLowerCase());return a==null?-1:(e.p=a,r)}return c}var $t={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,er=/^%/;function tr(e,t,r){var a=e<0?"-":"",n=(a?-e:e)+"",i=n.length;return a+(i<r?new Array(r-i+1).join(t)+n:n)}function rr(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function ar(e){var t=new w,r=-1,a=e.length;while(++r<a)t.set(e[r].toLowerCase(),r);return t}function nr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function ir(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r));return a?(e.U=+a[0],r+a[0].length):-1}function or(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r));return a?(e.W=+a[0],r+a[0].length):-1}function lr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function sr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.y=cr(+a[0]),r+a[0].length):-1}function ur(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function cr(e){return e+(e>68?1900:2e3)}function fr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function dr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function vr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+3));return a?(e.j=+a[0],r+a[0].length):-1}function pr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function hr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function gr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function yr(e,t,r){Kt.lastIndex=0;var a=Kt.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function mr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",a=x(t)/60|0,n=x(t)%60;return r+tr(a,"0",2)+tr(n,"0",2)}function xr(e,t,r){er.lastIndex=0;var a=er.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function br(e){var t=e.length,r=-1;while(++r<t)e[r][0]=this(e[r][0]);return function(t){var r=0,a=e[r];while(!a[1](t))a=e[++r];return a[0](t)}}t.locale=function(e){return{numberFormat:qt(e),timeFormat:Jt(e)}};var _r=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=_r.numberFormat;t.geo={};function wr(){}wr.prototype={s:0,t:0,add:function(e){Mr(e,this.t,kr);Mr(kr.s,this.s,this);if(this.s)this.t+=kr.t;else this.s=kr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var kr=new wr;function Mr(e,t,r){var a=r.s=e+t,n=a-e,i=a-n;r.t=e-i+(t-n)}t.geo.stream=function(e,t){if(e&&Ar.hasOwnProperty(e.type)){Ar[e.type](e,t)}else{Tr(e,t)}};function Tr(e,t){if(e&&Lr.hasOwnProperty(e.type)){Lr[e.type](e,t)}}var Ar={Feature:function(e,t){Tr(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,a=-1,n=r.length;while(++a<n)Tr(r[a].geometry,t)}};var Lr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)e=r[a],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sr(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Sr(r[a],t,0)},Polygon:function(e,t){Cr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,a=-1,n=r.length;while(++a<n)Cr(r[a],t)},GeometryCollection:function(e,t){var r=e.geometries,a=-1,n=r.length;while(++a<n)Tr(r[a],t)}};function Sr(e,t,r){var a=-1,n=e.length-r,i;t.lineStart();while(++a<n)i=e[a],t.point(i[0],i[1],i[2]);t.lineEnd()}function Cr(e,t){var r=-1,a=e.length;t.polygonStart();while(++r<a)Sr(e[r],t,1);t.polygonEnd()}t.geo.area=function(e){Or=0;t.geo.stream(e,Pr);return Or};var Or,zr=new wr;var Pr={sphere:function(){Or+=4*Ce},point:R,lineStart:R,lineEnd:R,polygonStart:function(){zr.reset();Pr.lineStart=Dr},polygonEnd:function(){var e=2*zr;Or+=e<0?4*Ce+e:e;Pr.lineStart=Pr.lineEnd=Pr.point=R}};function Dr(){var e,t,r,a,n;Pr.point=function(o,l){Pr.point=i;r=(e=o)*De,a=Math.cos(l=(t=l)*De/2+Ce/4),n=Math.sin(l)};function i(e,t){e*=De;t=t*De/2+Ce/4;var i=e-r,o=i>=0?1:-1,l=o*i,s=Math.cos(t),u=Math.sin(t),c=n*u,f=a*s+c*Math.cos(l),d=c*o*Math.sin(l);zr.add(Math.atan2(d,f));r=e,a=s,n=u}Pr.lineEnd=function(){i(e,t)}}function Ir(e){var t=e[0],r=e[1],a=Math.cos(r);return[a*Math.cos(t),a*Math.sin(t),Math.sin(r)]}function Er(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Nr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Rr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Fr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Br(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function jr(e){return[Math.atan2(e[1],e[0]),Fe(e[2])]}function qr(e,t){return x(e[0]-t[0])<Le&&x(e[1]-t[1])<Le}t.geo.bounds=function(){var e,r,a,n,i,o,l,s,u,c,f;var d={point:v,lineStart:h,lineEnd:g,polygonStart:function(){d.point=y;d.lineStart=m;d.lineEnd=b;u=0;Pr.polygonStart()},polygonEnd:function(){Pr.polygonEnd();d.point=v;d.lineStart=h;d.lineEnd=g;if(zr<0)e=-(a=180),r=-(n=90);else if(u>Le)n=90;else if(u<-Le)r=-90;f[0]=e,f[1]=a}};function v(t,i){c.push(f=[e=t,a=t]);if(i<r)r=i;if(i>n)n=i}function p(t,o){var l=Ir([t*De,o*De]);if(s){var u=Nr(s,l),c=[u[1],-u[0],0],f=Nr(c,u);Br(f);f=jr(f);var d=t-i,p=d>0?1:-1,h=f[0]*Ie*p,g=x(d)>180;if(g^(p*i<h&&h<p*t)){var y=f[1]*Ie;if(y>n)n=y}else if(h=(h+360)%360-180,g^(p*i<h&&h<p*t)){var y=-f[1]*Ie;if(y<r)r=y}else{if(o<r)r=o;if(o>n)n=o}if(g){if(t<i){if(_(e,t)>_(e,a))a=t}else{if(_(t,a)>_(e,a))e=t}}else{if(a>=e){if(t<e)e=t;if(t>a)a=t}else{if(t>i){if(_(e,t)>_(e,a))a=t}else{if(_(t,a)>_(e,a))e=t}}}}else{v(t,o)}s=l,i=t}function h(){d.point=p}function g(){f[0]=e,f[1]=a;d.point=v;s=null}function y(e,t){if(s){var r=e-i;u+=x(r)>180?r+(r>0?360:-360):r}else o=e,l=t;Pr.point(e,t);p(e,t)}function m(){Pr.lineStart()}function b(){y(o,l);Pr.lineEnd();if(x(u)>Le)e=-(a=180);f[0]=e,f[1]=a;s=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){n=a=-(e=r=Infinity);c=[];t.geo.stream(i,d);var o=c.length;if(o){c.sort(w);for(var l=1,s=c[0],u,v=[s];l<o;++l){u=c[l];if(k(u[0],s)||k(u[1],s)){if(_(s[0],u[1])>_(s[0],s[1]))s[1]=u[1];if(_(u[0],s[1])>_(s[0],s[1]))s[0]=u[0]}else{v.push(s=u)}}var p=-Infinity,h;for(var o=v.length-1,l=0,s=v[o],u;l<=o;s=u,++l){u=v[l];if((h=_(s[1],u[0]))>p)p=h,e=u[0],a=s[1]}}c=f=null;return e===Infinity||r===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,r],[a,n]]}}();t.geo.centroid=function(e){Hr=Vr=Ur=Gr=Zr=Yr=Xr=Wr=Qr=Jr=$r=0;t.geo.stream(e,Kr);var r=Qr,a=Jr,n=$r,i=r*r+a*a+n*n;if(i<Se){r=Yr,a=Xr,n=Wr;if(Vr<Le)r=Ur,a=Gr,n=Zr;i=r*r+a*a+n*n;if(i<Se)return[NaN,NaN]}return[Math.atan2(a,r)*Ie,Fe(n/Math.sqrt(i))*Ie]};var Hr,Vr,Ur,Gr,Zr,Yr,Xr,Wr,Qr,Jr,$r;var Kr={sphere:R,point:ea,lineStart:ra,lineEnd:aa,polygonStart:function(){Kr.lineStart=na},polygonEnd:function(){Kr.lineStart=ra}};function ea(e,t){e*=De;var r=Math.cos(t*=De);ta(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function ta(e,t,r){++Hr;Ur+=(e-Ur)/Hr;Gr+=(t-Gr)/Hr;Zr+=(r-Zr)/Hr}function ra(){var e,t,r;Kr.point=function(n,i){n*=De;var o=Math.cos(i*=De);e=o*Math.cos(n);t=o*Math.sin(n);r=Math.sin(i);Kr.point=a;ta(e,t,r)};function a(a,n){a*=De;var i=Math.cos(n*=De),o=i*Math.cos(a),l=i*Math.sin(a),s=Math.sin(n),u=Math.atan2(Math.sqrt((u=t*s-r*l)*u+(u=r*o-e*s)*u+(u=e*l-t*o)*u),e*o+t*l+r*s);Vr+=u;Yr+=u*(e+(e=o));Xr+=u*(t+(t=l));Wr+=u*(r+(r=s));ta(e,t,r)}}function aa(){Kr.point=ea}function na(){var e,t,r,a,n;Kr.point=function(o,l){e=o,t=l;Kr.point=i;o*=De;var s=Math.cos(l*=De);r=s*Math.cos(o);a=s*Math.sin(o);n=Math.sin(l);ta(r,a,n)};Kr.lineEnd=function(){i(e,t);Kr.lineEnd=aa;Kr.point=ea};function i(e,t){e*=De;var i=Math.cos(t*=De),o=i*Math.cos(e),l=i*Math.sin(e),s=Math.sin(t),u=a*s-n*l,c=n*o-r*s,f=r*l-a*o,d=Math.sqrt(u*u+c*c+f*f),v=r*o+a*l+n*s,p=d&&-Re(v)/d,h=Math.atan2(d,v);Qr+=p*u;Jr+=p*c;$r+=p*f;Vr+=h;Yr+=h*(r+(r=o));Xr+=h*(a+(a=l));Wr+=h*(n+(n=s));ta(r,a,n)}}function ia(e,t){function r(r,a){return r=e(r,a),t(r[0],r[1])}if(e.invert&&t.invert)r.invert=function(r,a){return r=t.invert(r,a),r&&e.invert(r[0],r[1])};return r}function oa(){return true}function la(e,t,r,a,n){var i=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],a=e[t];if(qr(r,a)){n.lineStart();for(var l=0;l<t;++l)n.point((r=e[l])[0],r[1]);n.lineEnd();return}var s=new ua(r,e,null,true),u=new ua(r,null,s,false);s.o=u;i.push(s);o.push(u);s=new ua(a,e,null,false);u=new ua(a,null,s,true);s.o=u;i.push(s);o.push(u)});o.sort(t);sa(i);sa(o);if(!i.length)return;for(var l=0,s=r,u=o.length;l<u;++l){o[l].e=s=!s}var c=i[0],f,d;while(1){var v=c,p=true;while(v.v)if((v=v.n)===c)return;f=v.z;n.lineStart();do{v.v=v.o.v=true;if(v.e){if(p){for(var l=0,u=f.length;l<u;++l)n.point((d=f[l])[0],d[1])}else{a(v.x,v.n.x,1,n)}v=v.n}else{if(p){f=v.p.z;for(var l=f.length-1;l>=0;--l)n.point((d=f[l])[0],d[1])}else{a(v.x,v.p.x,-1,n)}v=v.p}v=v.o;f=v.z;p=!p}while(!v.v);n.lineEnd()}}function sa(e){if(!(t=e.length))return;var t,r=0,a=e[0],n;while(++r<t){a.n=n=e[r];n.p=a;a=n}a.n=n=e[0];n.p=a}function ua(e,t,r,a){this.x=e;this.z=t;this.o=r;this.e=a;this.v=false;this.n=this.p=null}function ca(e,r,a,n){return function(i,o){var l=r(o),s=i.invert(n[0],n[1]);var u={point:c,lineStart:d,lineEnd:v,polygonStart:function(){u.point=b;u.lineStart=_;u.lineEnd=w;p=[];m=[]},polygonEnd:function(){u.point=c;u.lineStart=d;u.lineEnd=v;p=t.merge(p);var e=ma(s,m);if(p.length){if(!y)o.polygonStart(),y=true;la(p,va,e,a,o)}else if(e){if(!y)o.polygonStart(),y=true;o.lineStart();a(null,null,1,o);o.lineEnd()}if(y)o.polygonEnd(),y=false;p=m=null},sphere:function(){o.polygonStart();o.lineStart();a(null,null,1,o);o.lineEnd();o.polygonEnd()}};function c(t,r){var a=i(t,r);if(e(t=a[0],r=a[1]))o.point(t,r)}function f(e,t){var r=i(e,t);l.point(r[0],r[1])}function d(){u.point=f;l.lineStart()}function v(){u.point=c;l.lineEnd()}var p;var h=da(),g=r(h),y=false,m,x;function b(e,t){x.push([e,t]);var r=i(e,t);g.point(r[0],r[1])}function _(){g.lineStart();x=[]}function w(){b(x[0][0],x[0][1]);g.lineEnd();var e=g.clean(),t=h.buffer(),r,a=t.length;x.pop();m.push(x);x=null;if(!a)return;if(e&1){r=t[0];var a=r.length-1,n=-1,i;if(a>0){if(!y)o.polygonStart(),y=true;o.lineStart();while(++n<a)o.point((i=r[n])[0],i[1]);o.lineEnd()}return}if(a>1&&e&2)t.push(t.pop().concat(t.shift()));p.push(t.filter(fa))}return u}}function fa(e){return e.length>1}function da(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:R,buffer:function(){var r=e;e=[];t=null;return r},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function va(e,t){return((e=e.x)[0]<0?e[1]-Pe-Le:Pe-e[1])-((t=t.x)[0]<0?t[1]-Pe-Le:Pe-t[1])}var pa=ca(oa,ha,ya,[-Ce,-Ce/2]);function ha(e){var t=NaN,r=NaN,a=NaN,n;return{lineStart:function(){e.lineStart();n=1},point:function(i,o){var l=i>0?Ce:-Ce,s=x(i-t);if(x(s-Ce)<Le){e.point(t,r=(r+o)/2>0?Pe:-Pe);e.point(a,r);e.lineEnd();e.lineStart();e.point(l,r);e.point(i,r);n=0}else if(a!==l&&s>=Ce){if(x(t-a)<Le)t-=a*Le;if(x(i-l)<Le)i-=l*Le;r=ga(t,r,i,o);e.point(a,r);e.lineEnd();e.lineStart();e.point(l,r);n=0}e.point(t=i,r=o);a=l},lineEnd:function(){e.lineEnd();t=r=NaN},clean:function(){return 2-n}}}function ga(e,t,r,a){var n,i,o=Math.sin(e-r);return x(o)>Le?Math.atan((Math.sin(t)*(i=Math.cos(a))*Math.sin(r)-Math.sin(a)*(n=Math.cos(t))*Math.sin(e))/(n*i*o)):(t+a)/2}function ya(e,t,r,a){var n;if(e==null){n=r*Pe;a.point(-Ce,n);a.point(0,n);a.point(Ce,n);a.point(Ce,0);a.point(Ce,-n);a.point(0,-n);a.point(-Ce,-n);a.point(-Ce,0);a.point(-Ce,n)}else if(x(e[0]-t[0])>Le){var i=e[0]<t[0]?Ce:-Ce;n=r*i/2;a.point(-i,n);a.point(0,n);a.point(i,n)}else{a.point(t[0],t[1])}}function ma(e,t){var r=e[0],a=e[1],n=[Math.sin(r),-Math.cos(r),0],i=0,o=0;zr.reset();for(var l=0,s=t.length;l<s;++l){var u=t[l],c=u.length;if(!c)continue;var f=u[0],d=f[0],v=f[1]/2+Ce/4,p=Math.sin(v),h=Math.cos(v),g=1;while(true){if(g===c)g=0;e=u[g];var y=e[0],m=e[1]/2+Ce/4,x=Math.sin(m),b=Math.cos(m),_=y-d,w=_>=0?1:-1,k=w*_,M=k>Ce,T=p*x;zr.add(Math.atan2(T*w*Math.sin(k),h*b+T*Math.cos(k)));i+=M?_+w*Oe:_;if(M^d>=r^y>=r){var A=Nr(Ir(f),Ir(e));Br(A);var L=Nr(n,A);Br(L);var S=(M^_>=0?-1:1)*Fe(L[2]);if(a>S||a===S&&(A[0]||A[1])){o+=M^_>=0?1:-1}}if(!g++)break;d=y,p=x,h=b,f=e}}return(i<-Le||i<Le&&zr<-Le)^o&1}function xa(e){var t=Math.cos(e),r=t>0,a=x(t)>Le,n=rn(e,6*De);return ca(i,o,n,r?[0,-e]:[-Ce,e-Ce]);function i(e,r){return Math.cos(e)*Math.cos(r)>t}function o(e){var t,n,o,u,c;return{lineStart:function(){u=o=false;c=1},point:function(f,d){var v=[f,d],p,h=i(f,d),g=r?h?0:s(f,d):h?s(f+(f<0?Ce:-Ce),d):0;if(!t&&(u=o=h))e.lineStart();if(h!==o){p=l(t,v);if(qr(t,p)||qr(v,p)){v[0]+=Le;v[1]+=Le;h=i(v[0],v[1])}}if(h!==o){c=0;if(h){e.lineStart();p=l(v,t);e.point(p[0],p[1])}else{p=l(t,v);e.point(p[0],p[1]);e.lineEnd()}t=p}else if(a&&t&&r^h){var y;if(!(g&n)&&(y=l(v,t,true))){c=0;if(r){e.lineStart();e.point(y[0][0],y[0][1]);e.point(y[1][0],y[1][1]);e.lineEnd()}else{e.point(y[1][0],y[1][1]);e.lineEnd();e.lineStart();e.point(y[0][0],y[0][1])}}}if(h&&(!t||!qr(t,v))){e.point(v[0],v[1])}t=v,o=h,n=g},lineEnd:function(){if(o)e.lineEnd();t=null},clean:function(){return c|(u&&o)<<1}}}function l(e,r,a){var n=Ir(e),i=Ir(r);var o=[1,0,0],l=Nr(n,i),s=Er(l,l),u=l[0],c=s-u*u;if(!c)return!a&&e;var f=t*s/c,d=-t*u/c,v=Nr(o,l),p=Fr(o,f),h=Fr(l,d);Rr(p,h);var g=v,y=Er(p,g),m=Er(g,g),b=y*y-m*(Er(p,p)-1);if(b<0)return;var _=Math.sqrt(b),w=Fr(g,(-y-_)/m);Rr(w,p);w=jr(w);if(!a)return w;var k=e[0],M=r[0],T=e[1],A=r[1],L;if(M<k)L=k,k=M,M=L;var S=M-k,C=x(S-Ce)<Le,O=C||S<Le;if(!C&&A<T)L=T,T=A,A=L;if(O?C?T+A>0^w[1]<(x(w[0]-k)<Le?T:A):T<=w[1]&&w[1]<=A:S>Ce^(k<=w[0]&&w[0]<=M)){var z=Fr(g,(-y+_)/m);Rr(z,p);return[w,jr(z)]}}function s(t,a){var n=r?e:Ce-e,i=0;if(t<-n)i|=1;else if(t>n)i|=2;if(a<-n)i|=4;else if(a>n)i|=8;return i}}function ba(e,t,r,a){return function(n){var i=n.a,o=n.b,l=i.x,s=i.y,u=o.x,c=o.y,f=0,d=1,v=u-l,p=c-s,h;h=e-l;if(!v&&h>0)return;h/=v;if(v<0){if(h<f)return;if(h<d)d=h}else if(v>0){if(h>d)return;if(h>f)f=h}h=r-l;if(!v&&h<0)return;h/=v;if(v<0){if(h>d)return;if(h>f)f=h}else if(v>0){if(h<f)return;if(h<d)d=h}h=t-s;if(!p&&h>0)return;h/=p;if(p<0){if(h<f)return;if(h<d)d=h}else if(p>0){if(h>d)return;if(h>f)f=h}h=a-s;if(!p&&h<0)return;h/=p;if(p<0){if(h>d)return;if(h>f)f=h}else if(p>0){if(h<f)return;if(h<d)d=h}if(f>0)n.a={x:l+f*v,y:s+f*p};if(d<1)n.b={x:l+d*v,y:s+d*p};return n}}var _a=1e9;t.geo.clipExtent=function(){var e,t,r,a,n,i,o={stream:function(e){if(n)n.valid=false;n=i(e);n.valid=true;return n},extent:function(l){if(!arguments.length)return[[e,t],[r,a]];i=wa(e=+l[0][0],t=+l[0][1],r=+l[1][0],a=+l[1][1]);if(n)n.valid=false,n=null;return o}};return o.extent([[0,0],[960,500]])};function wa(e,r,a,n){return function(s){var u=s,c=da(),f=ba(e,r,a,n),d,v,p;var h={point:x,lineStart:S,lineEnd:C,polygonStart:function(){s=c;d=[];v=[];L=true},polygonEnd:function(){s=u;d=t.merge(d);var r=g([e,n]),a=L&&r,i=d.length;if(a||i){s.polygonStart();if(a){s.lineStart();y(null,null,1,s);s.lineEnd()}if(i){la(d,o,r,y,s)}s.polygonEnd()}d=v=p=null}};function g(e){var t=0,r=v.length,a=e[1];for(var n=0;n<r;++n){for(var i=1,o=v[n],l=o.length,s=o[0],u;i<l;++i){u=o[i];if(s[1]<=a){if(u[1]>a&&Ne(s,u,e)>0)++t}else{if(u[1]<=a&&Ne(s,u,e)<0)--t}s=u}}return t!==0}function y(t,o,s,u){var c=0,f=0;if(t==null||(c=i(t,s))!==(f=i(o,s))||l(t,o)<0^s>0){do{u.point(c===0||c===3?e:a,c>1?n:r)}while((c=(c+s+4)%4)!==f)}else{u.point(o[0],o[1])}}function m(t,i){return e<=t&&t<=a&&r<=i&&i<=n}function x(e,t){if(m(e,t))s.point(e,t)}var b,_,w,k,M,T,A,L;function S(){h.point=O;if(v)v.push(p=[]);A=true;T=false;k=M=NaN}function C(){if(d){O(b,_);if(w&&T)c.rejoin();d.push(c.buffer())}h.point=x;if(T)s.lineEnd()}function O(e,t){e=Math.max(-_a,Math.min(_a,e));t=Math.max(-_a,Math.min(_a,t));var r=m(e,t);if(v)p.push([e,t]);if(A){b=e,_=t,w=r;A=false;if(r){s.lineStart();s.point(e,t)}}else{if(r&&T)s.point(e,t);else{var a={a:{x:k,y:M},b:{x:e,y:t}};if(f(a)){if(!T){s.lineStart();s.point(a.a.x,a.a.y)}s.point(a.b.x,a.b.y);if(!r)s.lineEnd();L=false}else if(r){s.lineStart();s.point(e,t);L=false}}}k=e,M=t,T=r}return h};function i(t,n){return x(t[0]-e)<Le?n>0?0:3:x(t[0]-a)<Le?n>0?2:1:x(t[1]-r)<Le?n>0?1:0:n>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var r=i(e,1),a=i(t,1);return r!==a?r-a:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function ka(e){var t=0,r=Ce/3,a=Xa(e),n=a(t,r);n.parallels=function(e){if(!arguments.length)return[t/Ce*180,r/Ce*180];return a(t=e[0]*Ce/180,r=e[1]*Ce/180)};return n}function Ma(e,t){var r=Math.sin(e),a=(r+Math.sin(t))/2,n=1+r*(2*a-r),i=Math.sqrt(n)/a;function o(e,t){var r=Math.sqrt(n-2*a*Math.sin(t))/a;return[r*Math.sin(e*=a),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/a,Fe((n-(e*e+r*r)*a*a)/(2*a))]};return o}(t.geo.conicEqualArea=function(){return ka(Ma)}).raw=Ma;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var e=t.geo.albers();var r=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var a=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var n,i={point:function(e,t){n=[e,t]}},o,l,s;function u(e){var t=e[0],r=e[1];n=null;(o(t,r),n)||(l(t,r),n)||s(t,r);return n}u.invert=function(t){var n=e.scale(),i=e.translate(),o=(t[0]-i[0])/n,l=(t[1]-i[1])/n;return(l>=.12&&l<.234&&o>=-.425&&o<-.214?r:l>=.166&&l<.234&&o>=-.214&&o<-.115?a:e).invert(t)};u.stream=function(t){var n=e.stream(t),i=r.stream(t),o=a.stream(t);return{point:function(e,t){n.point(e,t);i.point(e,t);o.point(e,t)},sphere:function(){n.sphere();i.sphere();o.sphere()},lineStart:function(){n.lineStart();i.lineStart();o.lineStart()},lineEnd:function(){n.lineEnd();i.lineEnd();o.lineEnd()},polygonStart:function(){n.polygonStart();i.polygonStart();o.polygonStart()},polygonEnd:function(){n.polygonEnd();i.polygonEnd();o.polygonEnd()}}};u.precision=function(t){if(!arguments.length)return e.precision();e.precision(t);r.precision(t);a.precision(t);return u};u.scale=function(t){if(!arguments.length)return e.scale();e.scale(t);r.scale(t*.35);a.scale(t);return u.translate(e.translate())};u.translate=function(t){if(!arguments.length)return e.translate();var n=e.scale(),c=+t[0],f=+t[1];o=e.translate(t).clipExtent([[c-.455*n,f-.238*n],[c+.455*n,f+.238*n]]).stream(i).point;l=r.translate([c-.307*n,f+.201*n]).clipExtent([[c-.425*n+Le,f+.12*n+Le],[c-.214*n-Le,f+.234*n-Le]]).stream(i).point;s=a.translate([c-.205*n,f+.212*n]).clipExtent([[c-.214*n+Le,f+.166*n+Le],[c-.115*n-Le,f+.234*n-Le]]).stream(i).point;return u};return u.scale(1070)};var Ta,Aa,La={point:R,lineStart:R,lineEnd:R,polygonStart:function(){Aa=0;La.lineStart=Sa},polygonEnd:function(){La.lineStart=La.lineEnd=La.point=R;Ta+=x(Aa/2)}};function Sa(){var e,t,r,a;La.point=function(i,o){La.point=n;e=r=i,t=a=o};function n(e,t){Aa+=a*e-r*t;r=e,a=t}La.lineEnd=function(){n(e,t)}}var Ca,Oa,za,Pa;var Da={point:Ia,lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R};function Ia(e,t){if(e<Ca)Ca=e;if(e>za)za=e;if(t<Oa)Oa=t;if(t>Pa)Pa=t}function Ea(){var e=Na(4.5),t=[];var r={point:a,lineStart:function(){r.point=n},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o;r.point=a},pointRadius:function(t){e=Na(t);return r},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function a(r,a){t.push("M",r,",",a,e)}function n(e,a){t.push("M",e,",",a);r.point=i}function i(e,r){t.push("L",e,",",r)}function o(){r.point=a}function l(){t.push("Z")}return r}function Na(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Ra={point:Fa,lineStart:Ba,lineEnd:ja,polygonStart:function(){Ra.lineStart=qa},polygonEnd:function(){Ra.point=Fa;Ra.lineStart=Ba;Ra.lineEnd=ja}};function Fa(e,t){Ur+=e;Gr+=t;++Zr}function Ba(){var e,t;Ra.point=function(a,n){Ra.point=r;Fa(e=a,t=n)};function r(r,a){var n=r-e,i=a-t,o=Math.sqrt(n*n+i*i);Yr+=o*(e+r)/2;Xr+=o*(t+a)/2;Wr+=o;Fa(e=r,t=a)}}function ja(){Ra.point=Fa}function qa(){var e,t,r,a;Ra.point=function(i,o){Ra.point=n;Fa(e=r=i,t=a=o)};function n(e,t){var n=e-r,i=t-a,o=Math.sqrt(n*n+i*i);Yr+=o*(r+e)/2;Xr+=o*(a+t)/2;Wr+=o;o=a*e-r*t;Qr+=o*(r+e);Jr+=o*(a+t);$r+=o*3;Fa(r=e,a=t)}Ra.lineEnd=function(){n(e,t)}}function Ha(e){var t=4.5;var r={point:a,lineStart:function(){r.point=n},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o;r.point=a},pointRadius:function(e){t=e;return r},result:R};function a(r,a){e.moveTo(r+t,a);e.arc(r,a,t,0,Oe)}function n(t,a){e.moveTo(t,a);r.point=i}function i(t,r){e.lineTo(t,r)}function o(){r.point=a}function l(){e.closePath()}return r}function Va(e){var t=.5,r=Math.cos(30*De),a=16;function n(e){return(a?o:i)(e)}function i(t){return Za(t,function(r,a){r=e(r,a);t.point(r[0],r[1])})}function o(t){var r,n,i,o,s,u,c,f,d,v,p,h,g;var y={point:m,lineStart:x,lineEnd:_,polygonStart:function(){t.polygonStart();y.lineStart=w},polygonEnd:function(){t.polygonEnd();y.lineStart=x}};function m(r,a){r=e(r,a);t.point(r[0],r[1])}function x(){d=NaN;y.point=b;t.lineStart()}function b(r,n){var i=Ir([r,n]),o=e(r,n);l(d,v,f,p,h,g,d=o[0],v=o[1],f=r,p=i[0],h=i[1],g=i[2],a,t);t.point(d,v)}function _(){y.point=m;t.lineEnd()}function w(){x();y.point=k;y.lineEnd=M}function k(e,t){b(r=e,n=t),i=d,o=v,s=p,u=h,c=g;y.point=b}function M(){l(d,v,f,p,h,g,i,o,r,s,u,c,a,t);y.lineEnd=_;_()}return y}function l(a,n,i,o,s,u,c,f,d,v,p,h,g,y){var m=c-a,b=f-n,_=m*m+b*b;if(_>4*t&&g--){var w=o+v,k=s+p,M=u+h,T=Math.sqrt(w*w+k*k+M*M),A=Math.asin(M/=T),L=x(x(M)-1)<Le||x(i-d)<Le?(i+d)/2:Math.atan2(k,w),S=e(L,A),C=S[0],O=S[1],z=C-a,P=O-n,D=b*z-m*P;if(D*D/_>t||x((m*z+b*P)/_-.5)>.3||o*v+s*p+u*h<r){l(a,n,i,o,s,u,C,O,L,w/=T,k/=T,M,g,y);y.point(C,O);l(C,O,L,w,k,M,c,f,d,v,p,h,g,y)}}}n.precision=function(e){if(!arguments.length)return Math.sqrt(t);a=(t=e*e)>0&&16;return n};return n}t.geo.path=function(){var e=4.5,r,a,n,i,o;function l(r){if(r){if(typeof e==="function")i.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=n(i);t.geo.stream(r,o)}return i.result()}l.area=function(e){Ta=0;t.geo.stream(e,n(La));return Ta};l.centroid=function(e){Ur=Gr=Zr=Yr=Xr=Wr=Qr=Jr=$r=0;t.geo.stream(e,n(Ra));return $r?[Qr/$r,Jr/$r]:Wr?[Yr/Wr,Xr/Wr]:Zr?[Ur/Zr,Gr/Zr]:[NaN,NaN]};l.bounds=function(e){za=Pa=-(Ca=Oa=Infinity);t.geo.stream(e,n(Da));return[[Ca,Oa],[za,Pa]]};l.projection=function(e){if(!arguments.length)return r;n=(r=e)?e.stream||Ua(e):D;return s()};l.context=function(t){if(!arguments.length)return a;i=(a=t)==null?new Ea:new Ha(t);if(typeof e!=="function")i.pointRadius(e);return s()};l.pointRadius=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:(i.pointRadius(+t),+t);return l};function s(){o=null;return l}return l.projection(t.geo.albersUsa()).context(null)};function Ua(e){var t=Va(function(t,r){return e([t*Ie,r*Ie])});return function(e){return Wa(t(e))}}t.geo.transform=function(e){return{stream:function(t){var r=new Ga(t);for(var a in e)r[a]=e[a];return r}}};function Ga(e){this.stream=e}Ga.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Za(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}t.geo.projection=Ya;t.geo.projectionMutator=Xa;function Ya(e){return Xa(function(){return e})()}function Xa(e){var r,a,n,i=Va(function(e,t){e=r(e,t);return[e[0]*o+p,h-e[1]*o]}),o=150,l=480,s=250,u=0,c=0,f=0,d=0,v=0,p,h,g=pa,y=D,m=null,x=null,b;function _(e){e=n(e[0]*De,e[1]*De);return[e[0]*o+p,h-e[1]*o]}function w(e){e=n.invert((e[0]-p)/o,(h-e[1])/o);return e&&[e[0]*Ie,e[1]*Ie]}_.stream=function(e){if(b)b.valid=false;b=Wa(g(a,i(y(e))));b.valid=true;return b};_.clipAngle=function(e){if(!arguments.length)return m;g=e==null?(m=e,pa):xa((m=+e)*De);return M()};_.clipExtent=function(e){if(!arguments.length)return x;x=e;y=e?wa(e[0][0],e[0][1],e[1][0],e[1][1]):D;return M()};_.scale=function(e){if(!arguments.length)return o;o=+e;return k()};_.translate=function(e){if(!arguments.length)return[l,s];l=+e[0];s=+e[1];return k()};_.center=function(e){if(!arguments.length)return[u*Ie,c*Ie];u=e[0]%360*De;c=e[1]%360*De;return k()};_.rotate=function(e){if(!arguments.length)return[f*Ie,d*Ie,v*Ie];f=e[0]%360*De;d=e[1]%360*De;v=e.length>2?e[2]%360*De:0;return k()};t.rebind(_,i,"precision");function k(){n=ia(a=$a(f,d,v),r);var e=r(u,c);p=l-e[0]*o;h=s+e[1]*o;return M()}function M(){if(b)b.valid=false,b=null;return _}return function(){r=e.apply(this,arguments);_.invert=r.invert&&w;return k()}}function Wa(e){return Za(e,function(t,r){e.point(t*De,r*De)})}function Qa(e,t){return[e,t]}(t.geo.equirectangular=function(){return Ya(Qa)}).raw=Qa.invert=Qa;t.geo.rotation=function(e){e=$a(e[0]%360*De,e[1]*De,e.length>2?e[2]*De:0);function t(t){t=e(t[0]*De,t[1]*De);return t[0]*=Ie,t[1]*=Ie,t}t.invert=function(t){t=e.invert(t[0]*De,t[1]*De);return t[0]*=Ie,t[1]*=Ie,t};return t};function Ja(e,t){return[e>Ce?e-Oe:e<-Ce?e+Oe:e,t]}Ja.invert=Qa;function $a(e,t,r){return e?t||r?ia(en(e),tn(t,r)):en(e):t||r?tn(t,r):Ja}function Ka(e){return function(t,r){return t+=e,[t>Ce?t-Oe:t<-Ce?t+Oe:t,r]}}function en(e){var t=Ka(e);t.invert=Ka(-e);return t}function tn(e,t){var r=Math.cos(e),a=Math.sin(e),n=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,u=Math.sin(t),c=u*r+l*a;return[Math.atan2(s*n-c*i,l*r-u*a),Fe(c*n+s*i)]}o.invert=function(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,u=Math.sin(t),c=u*n-s*i;return[Math.atan2(s*n+u*i,l*r+c*a),Fe(c*r-l*a)]};return o}t.geo.circle=function(){var e=[0,0],t,r=6,a;function n(){var t=typeof e==="function"?e.apply(this,arguments):e,r=$a(-t[0]*De,-t[1]*De,0).invert,n=[];a(null,null,1,{point:function(e,t){n.push(e=r(e,t));e[0]*=Ie,e[1]*=Ie}});return{type:"Polygon",coordinates:[n]}}n.origin=function(t){if(!arguments.length)return e;e=t;return n};n.angle=function(e){if(!arguments.length)return t;a=rn((t=+e)*De,r*De);return n};n.precision=function(e){if(!arguments.length)return r;a=rn(t*De,(r=+e)*De);return n};return n.angle(90)};function rn(e,t){var r=Math.cos(e),a=Math.sin(e);return function(n,i,o,l){var s=o*t;if(n!=null){n=an(r,n);i=an(r,i);if(o>0?n<i:n>i)n+=o*Oe}else{n=e+o*Oe;i=e-.5*s}for(var u,c=n;o>0?c>i:c<i;c-=s){l.point((u=jr([r,-a*Math.cos(c),-a*Math.sin(c)]))[0],u[1])}}}function an(e,t){var r=Ir(t);r[0]-=e;Br(r);var a=Re(-r[1]);return((-r[2]<0?-a:a)+2*Math.PI-Le)%(2*Math.PI)}t.geo.distance=function(e,t){var r=(t[0]-e[0])*De,a=e[1]*De,n=t[1]*De,i=Math.sin(r),o=Math.cos(r),l=Math.sin(a),s=Math.cos(a),u=Math.sin(n),c=Math.cos(n),f;return Math.atan2(Math.sqrt((f=c*i)*f+(f=s*u-l*c*o)*f),l*u+s*c*o)};t.geo.graticule=function(){var e,r,a,n,i,o,l,s,u=10,c=u,f=90,d=360,v,p,h,g,y=2.5;function m(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(n/f)*f,a,f).map(h).concat(t.range(Math.ceil(s/d)*d,l,d).map(g)).concat(t.range(Math.ceil(r/u)*u,e,u).filter(function(e){return x(e%f)>Le}).map(v)).concat(t.range(Math.ceil(o/c)*c,i,c).filter(function(e){return x(e%d)>Le}).map(p))}m.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})};m.outline=function(){return{type:"Polygon",coordinates:[h(n).concat(g(l).slice(1),h(a).reverse().slice(1),g(s).reverse().slice(1))]}};m.extent=function(e){if(!arguments.length)return m.minorExtent();return m.majorExtent(e).minorExtent(e)};m.majorExtent=function(e){if(!arguments.length)return[[n,s],[a,l]];n=+e[0][0],a=+e[1][0];s=+e[0][1],l=+e[1][1];if(n>a)e=n,n=a,a=e;if(s>l)e=s,s=l,l=e;return m.precision(y)};m.minorExtent=function(t){if(!arguments.length)return[[r,o],[e,i]];r=+t[0][0],e=+t[1][0];o=+t[0][1],i=+t[1][1];if(r>e)t=r,r=e,e=t;if(o>i)t=o,o=i,i=t;return m.precision(y)};m.step=function(e){if(!arguments.length)return m.minorStep();return m.majorStep(e).minorStep(e)};m.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return m};m.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return m};m.precision=function(t){if(!arguments.length)return y;y=+t;v=nn(o,i,90);p=on(r,e,y);h=nn(s,l,90);g=on(n,a,y);return m};return m.majorExtent([[-180,-90+Le],[180,90-Le]]).minorExtent([[-180,-80-Le],[180,80+Le]])};function nn(e,r,a){var n=t.range(e,r-Le,a).concat(r);return function(e){return n.map(function(t){return[e,t]})}}function on(e,r,a){var n=t.range(e,r-Le,a).concat(r);return function(e){return n.map(function(t){return[t,e]})}}function ln(e){return e.source}function sn(e){return e.target}t.geo.greatArc=function(){var e=ln,r,a=sn,n;function i(){return{type:"LineString",coordinates:[r||e.apply(this,arguments),n||a.apply(this,arguments)]}}i.distance=function(){return t.geo.distance(r||e.apply(this,arguments),n||a.apply(this,arguments))};i.source=function(t){if(!arguments.length)return e;e=t,r=typeof t==="function"?null:t;return i};i.target=function(e){if(!arguments.length)return a;a=e,n=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};t.geo.interpolate=function(e,t){return un(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function un(e,t,r,a){var n=Math.cos(t),i=Math.sin(t),o=Math.cos(a),l=Math.sin(a),s=n*Math.cos(e),u=n*Math.sin(e),c=o*Math.cos(r),f=o*Math.sin(r),d=2*Math.asin(Math.sqrt(He(a-t)+n*o*He(r-e))),v=1/Math.sin(d);var p=d?function(e){var t=Math.sin(e*=d)*v,r=Math.sin(d-e)*v,a=r*s+t*c,n=r*u+t*f,o=r*i+t*l;return[Math.atan2(n,a)*Ie,Math.atan2(o,Math.sqrt(a*a+n*n))*Ie]}:function(){return[e*Ie,t*Ie]};p.distance=d;return p}t.geo.length=function(e){cn=0;t.geo.stream(e,fn);return cn};var cn;var fn={sphere:R,point:R,lineStart:dn,lineEnd:R,polygonStart:R,polygonEnd:R};function dn(){var e,t,r;fn.point=function(n,i){e=n*De,t=Math.sin(i*=De),r=Math.cos(i);fn.point=a};fn.lineEnd=function(){fn.point=fn.lineEnd=R};function a(a,n){var i=Math.sin(n*=De),o=Math.cos(n),l=x((a*=De)-e),s=Math.cos(l);cn+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=r*i-t*o*s)*l),t*i+r*o*s);e=a,t=i,r=o}}function vn(e,t){function r(t,r){var a=Math.cos(t),n=Math.cos(r),i=e(a*n);return[i*n*Math.sin(t),i*Math.sin(r)]}r.invert=function(e,r){var a=Math.sqrt(e*e+r*r),n=t(a),i=Math.sin(n),o=Math.cos(n);return[Math.atan2(e*i,a*o),Math.asin(a&&r*i/a)]};return r}var pn=vn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Ya(pn)}).raw=pn;var hn=vn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},D);(t.geo.azimuthalEquidistant=function(){return Ya(hn)}).raw=hn;function gn(e,t){var r=Math.cos(e),a=function(e){return Math.tan(Ce/4+e/2)},n=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(a(t)/a(e)),i=r*Math.pow(a(e),n)/n;if(!n)return xn;function o(e,t){if(i>0){if(t<-Pe+Le)t=-Pe+Le}else{if(t>Pe-Le)t=Pe-Le}var r=i/Math.pow(a(t),n);return[r*Math.sin(n*e),i-r*Math.cos(n*e)]}o.invert=function(e,t){var r=i-t,a=Ee(n)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/n,2*Math.atan(Math.pow(i/a,1/n))-Pe]};return o}(t.geo.conicConformal=function(){return ka(gn)}).raw=gn;function yn(e,t){var r=Math.cos(e),a=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),n=r/a+e;if(x(a)<Le)return Qa;function i(e,t){var r=n-t;return[r*Math.sin(a*e),n-r*Math.cos(a*e)]}i.invert=function(e,t){var r=n-t;return[Math.atan2(e,r)/a,n-Ee(a)*Math.sqrt(e*e+r*r)]};return i}(t.geo.conicEquidistant=function(){return ka(yn)}).raw=yn;var mn=vn(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Ya(mn)}).raw=mn;function xn(e,t){return[e,Math.log(Math.tan(Ce/4+t/2))]}xn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Pe]};function bn(e){var t=Ya(e),r=t.scale,a=t.translate,n=t.clipExtent,i;t.scale=function(){var e=r.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.translate=function(){var e=a.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=n.apply(t,arguments);if(o===t){if(i=e==null){var l=Ce*r(),s=a();n([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else if(i){o=null}return o};return t.clipExtent(null)}(t.geo.mercator=function(){return bn(xn)}).raw=xn;var _n=vn(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Ya(_n)}).raw=_n;var wn=vn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Ya(wn)}).raw=wn;function kn(e,t){return[Math.log(Math.tan(Ce/4+t/2)),-e]}kn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Pe]};(t.geo.transverseMercator=function(){var e=bn(kn),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=kn;t.geom={};function Mn(e){return e[0]}function Tn(e){return e[1]}t.geom.hull=function(e){var t=Mn,r=Tn;if(arguments.length)return a(e);function a(e){if(e.length<3)return[];var a=Mt(t),n=Mt(r),i,o=e.length,l=[],s=[];for(i=0;i<o;i++){l.push([+a.call(this,e[i],i),+n.call(this,e[i],i),i])}l.sort(Ln);for(i=0;i<o;i++)s.push([l[i][0],-l[i][1]]);var u=An(l),c=An(s);var f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],v=[];for(i=u.length-1;i>=0;--i)v.push(e[l[u[i]][2]]);for(i=+f;i<c.length-d;++i)v.push(e[l[c[i]][2]]);return v}a.x=function(e){return arguments.length?(t=e,a):t};a.y=function(e){return arguments.length?(r=e,a):r};return a};function An(e){var t=e.length,r=[0,1],a=2;for(var n=2;n<t;n++){while(a>1&&Ne(e[r[a-2]],e[r[a-1]],e[n])<=0)--a;r[a++]=n}return r.slice(0,a)}function Ln(e,t){return e[0]-t[0]||e[1]-t[1]}t.geom.polygon=function(e){U(e,Sn);return e};var Sn=t.geom.polygon.prototype=[];Sn.area=function(){var e=-1,t=this.length,r,a=this[t-1],n=0;while(++e<t){r=a;a=this[e];n+=r[1]*a[0]-r[0]*a[1]}return n*.5};Sn.centroid=function(e){var t=-1,r=this.length,a=0,n=0,i,o=this[r-1],l;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];l=i[0]*o[1]-o[0]*i[1];a+=(i[0]+o[0])*l;n+=(i[1]+o[1])*l}return[a*e,n*e]};Sn.clip=function(e){var t,r=zn(e),a=-1,n=this.length-zn(this),i,o,l=this[n-1],s,u,c;while(++a<n){t=e.slice();e.length=0;s=this[a];u=t[(o=t.length-r)-1];i=-1;while(++i<o){c=t[i];if(Cn(c,l,s)){if(!Cn(u,l,s)){e.push(On(u,c,l,s))}e.push(c)}else if(Cn(u,l,s)){e.push(On(u,c,l,s))}u=c}if(r)e.push(e[0]);l=s}return e};function Cn(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function On(e,t,r,a){var n=e[0],i=r[0],o=t[0]-n,l=a[0]-i,s=e[1],u=r[1],c=t[1]-s,f=a[1]-u,d=(l*(s-u)-f*(n-i))/(f*o-l*c);return[n+d*o,s+d*c]}function zn(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Pn,Dn,In,En=[],Nn,Rn,Fn=[];function Bn(){oi(this);this.edge=this.site=this.circle=null}function jn(e){var t=En.pop()||new Bn;t.site=e;return t}function qn(e){Jn(e);In.remove(e);En.push(e);oi(e)}function Hn(e){var t=e.circle,r=t.x,a=t.cy,n={x:r,y:a},i=e.P,o=e.N,l=[e];qn(e);var s=i;while(s.circle&&x(r-s.circle.x)<Le&&x(a-s.circle.cy)<Le){i=s.P;l.unshift(s);qn(s);s=i}l.unshift(s);Jn(s);var u=o;while(u.circle&&x(r-u.circle.x)<Le&&x(a-u.circle.cy)<Le){o=u.N;l.push(u);qn(u);u=o}l.push(u);Jn(u);var c=l.length,f;for(f=1;f<c;++f){u=l[f];s=l[f-1];ai(u.edge,s.site,u.site,n)}s=l[0];u=l[c-1];u.edge=ti(s.site,u.site,null,n);Qn(s);Qn(u)}function Vn(e){var t=e.x,r=e.y,a,n,i,o,l=In._;while(l){i=Un(l,r)-t;if(i>Le)l=l.L;else{o=t-Gn(l,r);if(o>Le){if(!l.R){a=l;break}l=l.R}else{if(i>-Le){a=l.P;n=l}else if(o>-Le){a=l;n=l.N}else{a=n=l}break}}}var s=jn(e);In.insert(a,s);if(!a&&!n)return;if(a===n){Jn(a);n=jn(a.site);In.insert(s,n);s.edge=n.edge=ti(a.site,s.site);Qn(a);Qn(n);return}if(!n){s.edge=ti(a.site,s.site);return}Jn(a);Jn(n);var u=a.site,c=u.x,f=u.y,d=e.x-c,v=e.y-f,p=n.site,h=p.x-c,g=p.y-f,y=2*(d*g-v*h),m=d*d+v*v,x=h*h+g*g,b={x:(g*m-v*x)/y+c,y:(d*x-h*m)/y+f};ai(n.edge,u,p,b);s.edge=ti(u,e,null,b);n.edge=ti(e,p,null,b);Qn(a);Qn(n)}function Un(e,t){var r=e.site,a=r.x,n=r.y,i=n-t;if(!i)return a;var o=e.P;if(!o)return-Infinity;r=o.site;var l=r.x,s=r.y,u=s-t;if(!u)return l;var c=l-a,f=1/i-1/u,d=c/u;if(f)return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-s+u/2+n-i/2)))/f+a;return(a+l)/2}function Gn(e,t){var r=e.N;if(r)return Un(r,t);var a=e.site;return a.y===t?a.x:Infinity}function Zn(e){this.site=e;this.edges=[]}Zn.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Xn);return e.length};function Yn(e){var t=e[0][0],r=e[1][0],a=e[0][1],n=e[1][1],i,o,l,s,u=Dn,c=u.length,f,d,v,p,h,g;while(c--){f=u[c];if(!f||!f.prepare())continue;v=f.edges;p=v.length;d=0;while(d<p){g=v[d].end(),l=g.x,s=g.y;h=v[++d%p].start(),i=h.x,o=h.y;if(x(l-i)>Le||x(s-o)>Le){v.splice(d,0,new ni(ri(f.site,g,x(l-t)<Le&&n-s>Le?{x:t,y:x(i-t)<Le?o:n}:x(s-n)<Le&&r-l>Le?{x:x(o-n)<Le?i:r,y:n}:x(l-r)<Le&&s-a>Le?{x:r,y:x(i-r)<Le?o:a}:x(s-a)<Le&&l-t>Le?{x:x(o-a)<Le?i:t,y:a}:null),f.site,null));++p}}}}function Xn(e,t){return t.angle-e.angle}function Wn(){oi(this);this.x=this.y=this.arc=this.site=this.cy=null}function Qn(e){var t=e.P,r=e.N;if(!t||!r)return;var a=t.site,n=e.site,i=r.site;if(a===i)return;var o=n.x,l=n.y,s=a.x-o,u=a.y-l,c=i.x-o,f=i.y-l;var d=2*(s*f-u*c);if(d>=-Se)return;var v=s*s+u*u,p=c*c+f*f,h=(f*v-u*p)/d,g=(s*p-c*v)/d,f=g+l;var y=Fn.pop()||new Wn;y.arc=e;y.site=n;y.x=h+o;y.y=f+Math.sqrt(h*h+g*g);y.cy=f;e.circle=y;var m=null,x=Rn._;while(x){if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{m=x.P;break}}else{if(x.R)x=x.R;else{m=x;break}}}Rn.insert(m,y);if(!m)Nn=y}function Jn(e){var t=e.circle;if(t){if(!t.P)Nn=t.N;Rn.remove(t);Fn.push(t);oi(t);e.circle=null}}function $n(e){var t=Pn,r=ba(e[0][0],e[0][1],e[1][0],e[1][1]),a=t.length,n;while(a--){n=t[a];if(!Kn(n,e)||!r(n)||x(n.a.x-n.b.x)<Le&&x(n.a.y-n.b.y)<Le){n.a=n.b=null;t.splice(a,1)}}}function Kn(e,t){var r=e.b;if(r)return true;var a=e.a,n=t[0][0],i=t[1][0],o=t[0][1],l=t[1][1],s=e.l,u=e.r,c=s.x,f=s.y,d=u.x,v=u.y,p=(c+d)/2,h=(f+v)/2,g,y;if(v===f){if(p<n||p>=i)return;if(c>d){if(!a)a={x:p,y:o};else if(a.y>=l)return;r={x:p,y:l}}else{if(!a)a={x:p,y:l};else if(a.y<o)return;r={x:p,y:o}}}else{g=(c-d)/(v-f);y=h-g*p;if(g<-1||g>1){if(c>d){if(!a)a={x:(o-y)/g,y:o};else if(a.y>=l)return;r={x:(l-y)/g,y:l}}else{if(!a)a={x:(l-y)/g,y:l};else if(a.y<o)return;r={x:(o-y)/g,y:o}}}else{if(f<v){if(!a)a={x:n,y:g*n+y};else if(a.x>=i)return;r={x:i,y:g*i+y}}else{if(!a)a={x:i,y:g*i+y};else if(a.x<n)return;r={x:n,y:g*n+y}}}}e.a=a;e.b=r;return true}function ei(e,t){this.l=e;this.r=t;this.a=this.b=null}function ti(e,t,r,a){var n=new ei(e,t);Pn.push(n);if(r)ai(n,e,t,r);if(a)ai(n,t,e,a);Dn[e.i].edges.push(new ni(n,e,t));Dn[t.i].edges.push(new ni(n,t,e));return n}function ri(e,t,r){var a=new ei(e,null);a.a=t;a.b=r;Pn.push(a);return a}function ai(e,t,r,a){if(!e.a&&!e.b){e.a=a;e.l=t;e.r=r}else if(e.l===r){e.b=a}else{e.a=a}}function ni(e,t,r){var a=e.a,n=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(n.x-a.x,a.y-n.y):Math.atan2(a.x-n.x,n.y-a.y)}ni.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ii(){this._=null}function oi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ii.prototype={insert:function(e,t){var r,a,n;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=ui(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){a=r.U;if(r===a.L){n=a.R;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.R){li(this,r);e=r;r=e.U}r.C=false;a.C=true;si(this,a)}}else{n=a.L;if(n&&n.C){r.C=n.C=false;a.C=true;e=a}else{if(e===r.L){si(this,r);e=r;r=e.U}r.C=false;a.C=true;li(this,a)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,a=e.L,n=e.R,i,o;if(!a)i=n;else if(!n)i=a;else i=ui(n);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(a&&n){o=i.C;i.C=e.C;i.L=a;a.U=i;if(i!==n){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=n;n.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;li(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;si(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;li(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;si(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;li(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;si(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function li(e,t){var r=t,a=t.R,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.R=a.L;if(r.R)r.R.U=r;a.L=r}function si(e,t){var r=t,a=t.L,n=r.U;if(n){if(n.L===r)n.L=a;else n.R=a}else{e._=a}a.U=n;r.U=a;r.L=a.R;if(r.L)r.L.U=r;a.R=r}function ui(e){while(e.L)e=e.L;return e}function ci(e,t){var r=e.sort(fi).pop(),a,n,i;Pn=[];Dn=new Array(e.length);In=new ii;Rn=new ii;while(true){i=Nn;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==a||r.y!==n){Dn[r.i]=new Zn(r);Vn(r);a=r.x,n=r.y}r=e.pop()}else if(i){Hn(i.arc)}else{break}}if(t)$n(t),Yn(t);var o={cells:Dn,edges:Pn};In=Rn=Pn=Dn=null;return o}function fi(e,t){return t.y-e.y||t.x-e.x}t.geom.voronoi=function(e){var t=Mn,r=Tn,a=t,n=r,i=di;if(e)return o(e);function o(e){var t=new Array(e.length),r=i[0][0],a=i[0][1],n=i[1][0],o=i[1][1];ci(l(e),i).cells.forEach(function(i,l){var s=i.edges,u=i.site,c=t[l]=s.length?s.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=n&&u.y>=a&&u.y<=o?[[r,o],[n,o],[n,a],[r,a]]:[];c.point=e[l]});return t}function l(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Le)*Le,y:Math.round(n(e,t)/Le)*Le,i:t}})}o.links=function(e){return ci(l(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];ci(l(e)).cells.forEach(function(r,a){var n=r.site,i=r.edges.sort(Xn),o=-1,l=i.length,s,u,c=i[l-1].edge,f=c.l===n?c.r:c.l;while(++o<l){s=c;u=f;c=i[o].edge;f=c.l===n?c.r:c.l;if(a<u.i&&a<f.i&&vi(n,u,f)<0){t.push([e[a],e[u.i],e[f.i]])}}});return t};o.x=function(e){return arguments.length?(a=Mt(t=e),o):t};o.y=function(e){return arguments.length?(n=Mt(r=e),o):r};o.clipExtent=function(e){if(!arguments.length)return i===di?null:i;i=e==null?di:e;return o};o.size=function(e){if(!arguments.length)return i===di?null:i&&i[1];return o.clipExtent(e&&[[0,0],e])};return o};var di=[[-1e6,-1e6],[1e6,1e6]];function vi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)};t.geom.quadtree=function(e,t,r,a,n){var i=Mn,o=Tn,l;if(l=arguments.length){i=pi;o=hi;if(l===3){n=r;a=t;r=t=0}return s(e)}function s(e){var s,u=Mt(i),c=Mt(o),f,d,v,p,h,g,y,m;if(t!=null){h=t,g=r,y=a,m=n}else{y=m=-(h=g=Infinity);f=[],d=[];p=e.length;if(l)for(v=0;v<p;++v){s=e[v];if(s.x<h)h=s.x;if(s.y<g)g=s.y;if(s.x>y)y=s.x;if(s.y>m)m=s.y;f.push(s.x);d.push(s.y)}else for(v=0;v<p;++v){var b=+u(s=e[v],v),_=+c(s,v);if(b<h)h=b;if(_<g)g=_;if(b>y)y=b;if(_>m)m=_;f.push(b);d.push(_)}}var w=y-h,k=m-g;if(w>k)m=g+w;else y=h+k;function M(e,t,r,a,n,i,o,l){if(isNaN(r)||isNaN(a))return;if(e.leaf){var s=e.x,u=e.y;if(s!=null){if(x(s-r)+x(u-a)<.01){T(e,t,r,a,n,i,o,l)}else{var c=e.point;e.x=e.y=e.point=null;T(e,c,s,u,n,i,o,l);T(e,t,r,a,n,i,o,l)}}else{e.x=r,e.y=a,e.point=t}}else{T(e,t,r,a,n,i,o,l)}}function T(e,t,r,a,n,i,o,l){var s=(n+o)*.5,u=(i+l)*.5,c=r>=s,f=a>=u,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=gi());if(c)n=s;else o=s;if(f)i=u;else l=u;M(e,t,r,a,n,i,o,l)}var A=gi();A.add=function(e){M(A,e,+u(e,++v),+c(e,v),h,g,y,m)};A.visit=function(e){yi(e,A,h,g,y,m)};A.find=function(e){return mi(A,e[0],e[1],h,g,y,m)};v=-1;if(t==null){while(++v<p){M(A,e[v],f[v],d[v],h,g,y,m)}--v}else e.forEach(A.add);f=d=e=s=null;return A}s.x=function(e){return arguments.length?(i=e,s):i};s.y=function(e){return arguments.length?(o=e,s):o};s.extent=function(e){if(!arguments.length)return t==null?null:[[t,r],[a,n]];if(e==null)t=r=a=n=null;else t=+e[0][0],r=+e[0][1],a=+e[1][0],n=+e[1][1];return s};s.size=function(e){if(!arguments.length)return t==null?null:[a-t,n-r];if(e==null)t=r=a=n=null;else t=r=0,a=+e[0],n=+e[1];return s};return s};function pi(e){return e.x}function hi(e){return e.y}function gi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function yi(e,t,r,a,n,i){if(!e(t,r,a,n,i)){var o=(r+n)*.5,l=(a+i)*.5,s=t.nodes;if(s[0])yi(e,s[0],r,a,o,l);if(s[1])yi(e,s[1],o,a,n,l);if(s[2])yi(e,s[2],r,l,o,i);if(s[3])yi(e,s[3],o,l,n,i)}}function mi(e,t,r,a,n,i,o){var l=Infinity,s;(function e(u,c,f,d,v){if(c>i||f>o||d<a||v<n)return;if(p=u.point){var p,h=t-u.x,g=r-u.y,y=h*h+g*g;if(y<l){var m=Math.sqrt(l=y);a=t-m,n=r-m;i=t+m,o=r+m;s=p}}var x=u.nodes,b=(c+d)*.5,_=(f+v)*.5,w=t>=b,k=r>=_;for(var M=k<<1|w,T=M+4;M<T;++M){if(u=x[M&3])switch(M&3){case 0:e(u,c,f,b,_);break;case 1:e(u,b,f,d,_);break;case 2:e(u,c,_,b,v);break;case 3:e(u,b,_,d,v);break}}})(e,a,n,i,o);return s}t.interpolateRgb=xi;function xi(e,r){e=t.rgb(e);r=t.rgb(r);var a=e.r,n=e.g,i=e.b,o=r.r-a,l=r.g-n,s=r.b-i;return function(e){return"#"+yt(Math.round(a+o*e))+yt(Math.round(n+l*e))+yt(Math.round(i+s*e))}}t.interpolateObject=bi;function bi(e,t){var r={},a={},n;for(n in e){if(n in t){r[n]=Ti(e[n],t[n])}else{a[n]=e[n]}}for(n in t){if(!(n in e)){a[n]=t[n]}}return function(e){for(n in r)a[n]=r[n](e);return a}}t.interpolateNumber=_i;function _i(e,t){e=+e,t=+t;return function(r){return e*(1-r)+t*r}}t.interpolateString=wi;function wi(e,t){var r=ki.lastIndex=Mi.lastIndex=0,a,n,i,o=-1,l=[],s=[];e=e+"",t=t+"";while((a=ki.exec(e))&&(n=Mi.exec(t))){if((i=n.index)>r){i=t.slice(r,i);if(l[o])l[o]+=i;else l[++o]=i}if((a=a[0])===(n=n[0])){if(l[o])l[o]+=n;else l[++o]=n}else{l[++o]=null;s.push({i:o,x:_i(a,n)})}r=Mi.lastIndex}if(r<t.length){i=t.slice(r);if(l[o])l[o]+=i;else l[++o]=i}return l.length<2?s[0]?(t=s[0].x,function(e){return t(e)+""}):function(){return t}:(t=s.length,function(e){for(var r=0,a;r<t;++r)l[(a=s[r]).i]=a.x(e);return l.join("")})}var ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mi=new RegExp(ki.source,"g");t.interpolate=Ti;function Ti(e,r){var a=t.interpolators.length,n;while(--a>=0&&!(n=t.interpolators[a](e,r)));return n}t.interpolators=[function(e,t){var r=typeof t;return(r==="string"?kt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?xi:wi:t instanceof We?xi:Array.isArray(t)?Ai:r==="object"&&isNaN(t)?bi:_i)(e,t)}];t.interpolateArray=Ai;function Ai(e,t){var r=[],a=[],n=e.length,i=t.length,o=Math.min(e.length,t.length),l;for(l=0;l<o;++l)r.push(Ti(e[l],t[l]));for(;l<n;++l)a[l]=e[l];for(;l<i;++l)a[l]=t[l];return function(e){for(l=0;l<o;++l)a[l]=r[l](e);return a}}var Li=function(){return D};var Si=t.map({linear:Li,poly:Ni,quad:function(){return Di},cubic:function(){return Ii},sin:function(){return Ri},exp:function(){return Fi},circle:function(){return Bi},elastic:ji,back:qi,bounce:function(){return Hi}});var Ci=t.map({in:D,out:zi,"in-out":Pi,"out-in":function(e){return Pi(zi(e))}});t.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,n=t>=0?e.slice(t+1):"in";r=Si.get(r)||Li;n=Ci.get(n)||D;return Oi(n(r.apply(null,a.call(arguments,1))))};function Oi(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function zi(e){return function(t){return 1-e(1-t)}}function Pi(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Di(e){return e*e}function Ii(e){return e*e*e}function Ei(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Ni(e){return function(t){return Math.pow(t,e)}}function Ri(e){return 1-Math.cos(e*Pe)}function Fi(e){return Math.pow(2,10*(e-1))}function Bi(e){return 1-Math.sqrt(1-e*e)}function ji(e,t){var r;if(arguments.length<2)t=.45;if(arguments.length)r=t/Oe*Math.asin(1/e);else e=1,r=t/4;return function(a){return 1+e*Math.pow(2,-10*a)*Math.sin((a-r)*Oe/t)}}function qi(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Hi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}t.interpolateHcl=Vi;function Vi(e,r){e=t.hcl(e);r=t.hcl(r);var a=e.h,n=e.c,i=e.l,o=r.h-a,l=r.c-n,s=r.l-i;if(isNaN(l))l=0,n=isNaN(n)?r.c:n;if(isNaN(o))o=0,a=isNaN(a)?r.h:a;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(a+o*e,n+l*e,i+s*e)+""}}t.interpolateHsl=Ui;function Ui(e,r){e=t.hsl(e);r=t.hsl(r);var a=e.h,n=e.s,i=e.l,o=r.h-a,l=r.s-n,s=r.l-i;if(isNaN(l))l=0,n=isNaN(n)?r.s:n;if(isNaN(o))o=0,a=isNaN(a)?r.h:a;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return $e(a+o*e,n+l*e,i+s*e)+""}}t.interpolateLab=Gi;function Gi(e,r){e=t.lab(e);r=t.lab(r);var a=e.l,n=e.a,i=e.b,o=r.l-a,l=r.a-n,s=r.b-i;return function(e){return st(a+o*e,n+l*e,i+s*e)+""}}t.interpolateRound=Zi;function Zi(e,t){t-=e;return function(r){return Math.round(e+t*r)}}t.transform=function(e){var r=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Yi(t?t.matrix:Ji)})(e)};function Yi(e){var t=[e.a,e.b],r=[e.c,e.d],a=Wi(t),n=Xi(t,r),i=Wi(Qi(r,t,-n))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;a*=-1;n*=-1}this.rotate=(a?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Ie;this.translate=[e.e,e.f];this.scale=[a,i];this.skew=i?Math.atan2(n,i)*Ie:0}Yi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Xi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Xi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Qi(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Ji={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=ao;function $i(e){return e.length?e.pop()+",":""}function Ki(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push("translate(",null,",",null,")");a.push({i:n-4,x:_i(e[0],t[0])},{i:n-2,x:_i(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function eo(e,t,r,a){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;a.push({i:r.push($i(r)+"rotate(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"rotate("+t+")")}}function to(e,t,r,a){if(e!==t){a.push({i:r.push($i(r)+"skewX(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"skewX("+t+")")}}function ro(e,t,r,a){if(e[0]!==t[0]||e[1]!==t[1]){var n=r.push($i(r)+"scale(",null,",",null,")");a.push({i:n-4,x:_i(e[0],t[0])},{i:n-2,x:_i(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push($i(r)+"scale("+t+")")}}function ao(e,r){var a=[],n=[];e=t.transform(e),r=t.transform(r);Ki(e.translate,r.translate,a,n);eo(e.rotate,r.rotate,a,n);to(e.skew,r.skew,a,n);ro(e.scale,r.scale,a,n);e=r=null;return function(e){var t=-1,r=n.length,i;while(++t<r)a[(i=n[t]).i]=i.x(e);return a.join("")}}function no(e,t){t=(t-=e=+e)||1/t;return function(r){return(r-e)/t}}function io(e,t){t=(t-=e=+e)||1/t;return function(r){return Math.max(0,Math.min(1,(r-e)/t))}}t.layout={};t.layout.bundle=function(){return function(e){var t=[],r=-1,a=e.length;while(++r<a)t.push(oo(e[r]));return t}};function oo(e){var t=e.source,r=e.target,a=so(t,r),n=[t];while(t!==a){t=t.parent;n.push(t)}var i=n.length;while(r!==a){n.splice(i,0,r);r=r.parent}return n}function lo(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function so(e,t){if(e===t)return e;var r=lo(e),a=lo(t),n=r.pop(),i=a.pop(),o=null;while(n===i){o=n;n=r.pop();i=a.pop()}return o}t.layout.chord=function(){var e={},r,a,n,i,o=0,l,s,u;function c(){var e={},c=[],d=t.range(i),v=[],p,h,g,y,m;r=[];a=[];p=0,y=-1;while(++y<i){h=0,m=-1;while(++m<i){h+=n[y][m]}c.push(h);v.push(t.range(i));p+=h}if(l){d.sort(function(e,t){return l(c[e],c[t])})}if(s){v.forEach(function(e,t){e.sort(function(e,r){return s(n[t][e],n[t][r])})})}p=(Oe-o*i)/p;h=0,y=-1;while(++y<i){g=h,m=-1;while(++m<i){var x=d[y],b=v[x][m],_=n[x][b],w=h,k=h+=_*p;e[x+"-"+b]={index:x,subindex:b,startAngle:w,endAngle:k,value:_}}a[x]={index:x,startAngle:g,endAngle:h,value:c[x]};h+=o}y=-1;while(++y<i){m=y-1;while(++m<i){var M=e[y+"-"+m],T=e[m+"-"+y];if(M.value||T.value){r.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}}}if(u)f()}function f(){r.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(t){if(!arguments.length)return n;i=(n=t)&&n.length;r=a=null;return e};e.padding=function(t){if(!arguments.length)return o;o=t;r=a=null;return e};e.sortGroups=function(t){if(!arguments.length)return l;l=t;r=a=null;return e};e.sortSubgroups=function(t){if(!arguments.length)return s;s=t;r=null;return e};e.sortChords=function(t){if(!arguments.length)return u;u=t;if(r)f();return e};e.chords=function(){if(!r)c();return r};e.groups=function(){if(!a)c();return a};return e};t.layout.force=function(){var e={},r=t.dispatch("start","tick","end"),a,n=[1,1],i,o,l=.9,s=ho,u=go,c=-30,f=yo,d=.1,v=.64,p=[],h=[],g,y,m;function x(e){return function(t,r,a,n){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,l=n-r,s=i*i+o*o;if(l*l/v<s){if(s<f){var u=t.charge/s;e.px-=i*u;e.py-=o*u}return true}if(t.point&&s&&s<f){var u=t.pointCharge/s;e.px-=i*u;e.py-=o*u}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){a=null;r.end({type:"end",alpha:o=0});return true}var e=p.length,i=h.length,s,u,f,v,b,_,w,k,M;for(u=0;u<i;++u){f=h[u];v=f.source;b=f.target;k=b.x-v.x;M=b.y-v.y;if(_=k*k+M*M){_=o*y[u]*((_=Math.sqrt(_))-g[u])/_;k*=_;M*=_;b.x-=k*(w=v.weight+b.weight?v.weight/(v.weight+b.weight):.5);b.y-=M*w;v.x+=k*(w=1-w);v.y+=M*w}}if(w=o*d){k=n[0]/2;M=n[1]/2;u=-1;if(w)while(++u<e){f=p[u];f.x+=(k-f.x)*w;f.y+=(M-f.y)*w}}if(c){po(s=t.geom.quadtree(p),o,m);u=-1;while(++u<e){if(!(f=p[u]).fixed){s.visit(x(f))}}}u=-1;while(++u<e){f=p[u];if(f.fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*l;f.y-=(f.py-(f.py=f.y))*l}}r.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return p;p=t;return e};e.links=function(t){if(!arguments.length)return h;h=t;return e};e.size=function(t){if(!arguments.length)return n;n=t;return e};e.linkDistance=function(t){if(!arguments.length)return s;s=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return l;l=+t;return e};e.charge=function(t){if(!arguments.length)return c;c=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(f);f=t*t;return e};e.gravity=function(t){if(!arguments.length)return d;d=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(v);v=t*t;return e};e.alpha=function(t){if(!arguments.length)return o;t=+t;if(o){if(t>0){o=t}else{a.c=null,a.t=NaN,a=null;r.end({type:"end",alpha:o=0})}}else if(t>0){r.start({type:"start",alpha:o=t});a=It(e.tick)}return e};e.start=function(){var t,r=p.length,a=h.length,i=n[0],o=n[1],l,f;for(t=0;t<r;++t){(f=p[t]).index=t;f.weight=0}for(t=0;t<a;++t){f=h[t];if(typeof f.source=="number")f.source=p[f.source];if(typeof f.target=="number")f.target=p[f.target];++f.source.weight;++f.target.weight}for(t=0;t<r;++t){f=p[t];if(isNaN(f.x))f.x=d("x",i);if(isNaN(f.y))f.y=d("y",o);if(isNaN(f.px))f.px=f.x;if(isNaN(f.py))f.py=f.y}g=[];if(typeof s==="function")for(t=0;t<a;++t)g[t]=+s.call(this,h[t],t);else for(t=0;t<a;++t)g[t]=s;y=[];if(typeof u==="function")for(t=0;t<a;++t)y[t]=+u.call(this,h[t],t);else for(t=0;t<a;++t)y[t]=u;m=[];if(typeof c==="function")for(t=0;t<r;++t)m[t]=+c.call(this,p[t],t);else for(t=0;t<r;++t)m[t]=c;function d(e,n){if(!l){l=new Array(r);for(s=0;s<r;++s){l[s]=[]}for(s=0;s<a;++s){var i=h[s];l[i.source.index].push(i.target);l[i.target.index].push(i.source)}}var o=l[t],s=-1,u=o.length,c;while(++s<u)if(!isNaN(c=o[s][e]))return c;return Math.random()*n}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!i)i=t.behavior.drag().origin(D).on("dragstart.force",uo).on("drag.force",b).on("dragend.force",co);if(!arguments.length)return i;this.on("mouseover.force",fo).on("mouseout.force",vo).call(i)};function b(r){r.px=t.event.x,r.py=t.event.y;e.resume()}return t.rebind(e,r,"on")};function uo(e){e.fixed|=2}function co(e){e.fixed&=~6}function fo(e){e.fixed|=4;e.px=e.x,e.py=e.y}function vo(e){e.fixed&=~4}function po(e,t,r){var a=0,n=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,l=-1,s;while(++l<o){s=i[l];if(s==null)continue;po(s,t,r);e.charge+=s.charge;a+=s.charge*s.cx;n+=s.charge*s.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;a+=u*e.point.x;n+=u*e.point.y}e.cx=a/e.charge;e.cy=n/e.charge}var ho=20,go=1,yo=Infinity;t.layout.hierarchy=function(){var e=ko,t=_o,r=wo;function a(n){var i=[n],o=[],l;n.depth=0;while((l=i.pop())!=null){o.push(l);if((u=t.call(a,l,l.depth))&&(s=u.length)){var s,u,c;while(--s>=0){i.push(c=u[s]);c.parent=l;c.depth=l.depth+1}if(r)l.value=0;l.children=u}else{if(r)l.value=+r.call(a,l,l.depth)||0;delete l.children}}bo(n,function(t){var a,n;if(e&&(a=t.children))a.sort(e);if(r&&(n=t.parent))n.value+=t.value});return o}a.sort=function(t){if(!arguments.length)return e;e=t;return a};a.children=function(e){if(!arguments.length)return t;t=e;return a};a.value=function(e){if(!arguments.length)return r;r=e;return a};a.revalue=function(e){if(r){xo(e,function(e){if(e.children)e.value=0});bo(e,function(e){var t;if(!e.children)e.value=+r.call(a,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return a};function mo(e,r){t.rebind(e,r,"sort","children","value");e.nodes=e;e.links=Mo;return e}function xo(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((n=e.children)&&(a=n.length)){var a,n;while(--a>=0)r.push(n[a])}}}function bo(e,t){var r=[e],a=[];while((e=r.pop())!=null){a.push(e);if((o=e.children)&&(i=o.length)){var n=-1,i,o;while(++n<i)r.push(o[n])}}while((e=a.pop())!=null){t(e)}}function _o(e){return e.children}function wo(e){return e.value}function ko(e,t){return t.value-e.value}function Mo(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function a(e,t,r,n){var i=e.children;e.x=t;e.y=e.depth*n;e.dx=r;e.dy=n;if(i&&(l=i.length)){var o=-1,l,s,u;r=e.value?r/e.value:0;while(++o<l){a(s=i[o],t,u=s.value*r,n);t+=u}}}function n(e){var t=e.children,r=0;if(t&&(i=t.length)){var a=-1,i;while(++a<i)r=Math.max(r,n(t[a]))}return 1+r}function i(t,i){var o=e.call(this,t,i);a(o[0],0,r[0],r[1]/n(o[0]));return o}i.size=function(e){if(!arguments.length)return r;r=e;return i};return mo(i,e)};t.layout.pie=function(){var e=Number,r=To,a=0,n=Oe,i=0;function o(l){var s=l.length,u=l.map(function(t,r){return+e.call(o,t,r)}),c=+(typeof a==="function"?a.apply(this,arguments):a),f=(typeof n==="function"?n.apply(this,arguments):n)-c,d=Math.min(Math.abs(f)/s,+(typeof i==="function"?i.apply(this,arguments):i)),v=d*(f<0?-1:1),p=t.sum(u),h=p?(f-s*v)/p:0,g=t.range(s),y=[],m;if(r!=null)g.sort(r===To?function(e,t){return u[t]-u[e]}:function(e,t){return r(l[e],l[t])});g.forEach(function(e){y[e]={data:l[e],value:m=u[e],startAngle:c,endAngle:c+=m*h+v,padAngle:d}});return y}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return r;r=e;return o};o.startAngle=function(e){if(!arguments.length)return a;a=e;return o};o.endAngle=function(e){if(!arguments.length)return n;n=e;return o};o.padAngle=function(e){if(!arguments.length)return i;i=e;return o};return o};var To={};t.layout.stack=function(){var e=D,r=zo,a=Po,n=So,i=Ao,o=Lo;function l(s,u){if(!(h=s.length))return s;var c=s.map(function(t,r){return e.call(l,t,r)});var f=c.map(function(e){return e.map(function(e,t){return[i.call(l,e,t),o.call(l,e,t)]})});var d=r.call(l,f,u);c=t.permute(c,d);f=t.permute(f,d);var v=a.call(l,f,u);var p=c[0].length,h,g,y,m;for(y=0;y<p;++y){n.call(l,c[0][y],m=v[y],f[0][y][1]);for(g=1;g<h;++g){n.call(l,c[g][y],m+=f[g-1][y][1],f[g][y][1])}}return s}l.values=function(t){if(!arguments.length)return e;e=t;return l};l.order=function(e){if(!arguments.length)return r;r=typeof e==="function"?e:Co.get(e)||zo;return l};l.offset=function(e){if(!arguments.length)return a;a=typeof e==="function"?e:Oo.get(e)||Po;return l};l.x=function(e){if(!arguments.length)return i;i=e;return l};l.y=function(e){if(!arguments.length)return o;o=e;return l};l.out=function(e){if(!arguments.length)return n;n=e;return l};return l};function Ao(e){return e.x}function Lo(e){return e.y}function So(e,t,r){e.y0=t;e.y=r}var Co=t.map({"inside-out":function(e){var r=e.length,a,n,i=e.map(Do),o=e.map(Io),l=t.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,c=[],f=[];for(a=0;a<r;++a){n=l[a];if(s<u){s+=o[n];c.push(n)}else{u+=o[n];f.push(n)}}return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:zo});var Oo=t.map({silhouette:function(e){var t=e.length,r=e[0].length,a=[],n=0,i,o,l,s=[];for(o=0;o<r;++o){for(i=0,l=0;i<t;i++)l+=e[i][o][1];if(l>n)n=l;a.push(l)}for(o=0;o<r;++o){s[o]=(n-a[o])/2}return s},wiggle:function(e){var t=e.length,r=e[0],a=r.length,n,i,o,l,s,u,c,f,d,v=[];v[0]=f=d=0;for(i=1;i<a;++i){for(n=0,l=0;n<t;++n)l+=e[n][i][1];for(n=0,s=0,c=r[i][0]-r[i-1][0];n<t;++n){for(o=0,u=(e[n][i][1]-e[n][i-1][1])/(2*c);o<n;++o){u+=(e[o][i][1]-e[o][i-1][1])/c}s+=u*e[n][i][1]}v[i]=f-=l?s/l*c:0;if(f<d)d=f}for(i=0;i<a;++i)v[i]-=d;return v},expand:function(e){var t=e.length,r=e[0].length,a=1/t,n,i,o,l=[];for(i=0;i<r;++i){for(n=0,o=0;n<t;n++)o+=e[n][i][1];if(o)for(n=0;n<t;n++)e[n][i][1]/=o;else for(n=0;n<t;n++)e[n][i][1]=a}for(i=0;i<r;++i)l[i]=0;return l},zero:Po});function zo(e){return t.range(e.length)}function Po(e){var t=-1,r=e[0].length,a=[];while(++t<r)a[t]=0;return a}function Do(e){var t=1,r=0,a=e[0][1],n,i=e.length;for(;t<i;++t){if((n=e[t][1])>a){r=t;a=n}}return r}function Io(e){return e.reduce(Eo,0)}function Eo(e,t){return e+t[1]}t.layout.histogram=function(){var e=true,r=Number,a=Fo,n=No;function i(i,o){var l=[],s=i.map(r,this),u=a.call(this,s,o),c=n.call(this,u,s,o),f,o=-1,d=s.length,v=c.length-1,p=e?1:1/d,h;while(++o<v){f=l[o]=[];f.dx=c[o+1]-(f.x=c[o]);f.y=0}if(v>0){o=-1;while(++o<d){h=s[o];if(h>=u[0]&&h<=u[1]){f=l[t.bisect(c,h,1,v)-1];f.y+=p;f.push(i[o])}}}return l}i.value=function(e){if(!arguments.length)return r;r=e;return i};i.range=function(e){if(!arguments.length)return a;a=Mt(e);return i};i.bins=function(e){if(!arguments.length)return n;n=typeof e==="number"?function(t){return Ro(t,e)}:Mt(e);return i};i.frequency=function(t){if(!arguments.length)return e;e=!!t;return i};return i};function No(e,t){return Ro(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Ro(e,t){var r=-1,a=+e[0],n=(e[1]-a)/t,i=[];while(++r<=t)i[r]=n*r+a;return i}function Fo(e){return[t.min(e),t.max(e)]}t.layout.pack=function(){var e=t.layout.hierarchy().sort(Bo),r=0,a=[1,1],n;function i(t,i){var o=e.call(this,t,i),l=o[0],s=a[0],u=a[1],c=n==null?Math.sqrt:typeof n==="function"?n:function(){return n};l.x=l.y=0;bo(l,function(e){e.r=+c(e.value)});bo(l,Vo);if(r){var f=r*(n?1:Math.max(2*l.r/s,2*l.r/u))/2;bo(l,function(e){e.r+=f});bo(l,Vo);bo(l,function(e){e.r-=f})}Zo(l,s/2,u/2,n?1:1/Math.max(2*l.r/s,2*l.r/u));return o}i.size=function(e){if(!arguments.length)return a;a=e;return i};i.radius=function(e){if(!arguments.length)return n;n=e==null||typeof e==="function"?e:+e;return i};i.padding=function(e){if(!arguments.length)return r;r=+e;return i};return mo(i,e)};function Bo(e,t){return e.value-t.value}function jo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function qo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var r=t.x-e.x,a=t.y-e.y,n=e.r+t.r;return.999*n*n>r*r+a*a}function Vo(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,a=-Infinity,n=Infinity,i=-Infinity,o,l,s,u,c,f,d;function v(e){r=Math.min(e.x-e.r,r);a=Math.max(e.x+e.r,a);n=Math.min(e.y-e.r,n);i=Math.max(e.y+e.r,i)}t.forEach(Uo);o=t[0];o.x=-o.r;o.y=0;v(o);if(d>1){l=t[1];l.x=l.r;l.y=0;v(l);if(d>2){s=t[2];Yo(o,l,s);v(s);jo(o,s);o._pack_prev=s;jo(s,l);l=o._pack_next;for(u=3;u<d;u++){Yo(o,l,s=t[u]);var p=0,h=1,g=1;for(c=l._pack_next;c!==l;c=c._pack_next,h++){if(Ho(c,s)){p=1;break}}if(p==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,g++){if(Ho(f,s)){break}}}if(p){if(h<g||h==g&&l.r<o.r)qo(o,l=c);else qo(o=f,l);u--}else{jo(o,s);l=s;v(s)}}}}var y=(r+a)/2,m=(n+i)/2,x=0;for(u=0;u<d;u++){s=t[u];s.x-=y;s.y-=m;x=Math.max(x,s.r+Math.sqrt(s.x*s.x+s.y*s.y))}e.r=x;t.forEach(Go)}function Uo(e){e._pack_next=e._pack_prev=e}function Go(e){delete e._pack_next;delete e._pack_prev}function Zo(e,t,r,a){var n=e.children;e.x=t+=a*e.x;e.y=r+=a*e.y;e.r*=a;if(n){var i=-1,o=n.length;while(++i<o)Zo(n[i],t,r,a)}}function Yo(e,t,r){var a=e.r+r.r,n=t.x-e.x,i=t.y-e.y;if(a&&(n||i)){var o=t.r+r.r,l=n*n+i*i;o*=o;a*=a;var s=.5+(a-o)/(2*l),u=Math.sqrt(Math.max(0,2*o*(a+l)-(a-=l)*a-o*o))/(2*l);r.x=e.x+s*n+u*i;r.y=e.y+s*i-u*n}else{r.x=e.x+a;r.y=e.y}}t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Xo,a=[1,1],n=null;function i(t,i){var u=e.call(this,t,i),f=u[0],d=o(f);bo(d,l),d.parent.m=-d.z;xo(d,s);if(n)xo(f,c);else{var v=f,p=f,h=f;xo(f,function(e){if(e.x<v.x)v=e;if(e.x>p.x)p=e;if(e.depth>h.depth)h=e});var g=r(v,p)/2-v.x,y=a[0]/(p.x+r(p,v)/2+g),m=a[1]/(h.depth||1);xo(f,function(e){e.x=(e.x+g)*y;e.y=e.depth*m})}return u}function o(e){var t={A:null,children:[e]},r=[t],a;while((a=r.pop())!=null){for(var n=a.children,i,o=0,l=n.length;o<l;++o){r.push((n[o]=i={_:n[o],parent:a,children:(i=n[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function l(e){var t=e.children,a=e.parent.children,n=e.i?a[e.i-1]:null;if(t.length){$o(e);var i=(t[0].z+t[t.length-1].z)/2;if(n){e.z=n.z+r(e._,n._);e.m=e.z-i}else{e.z=i}}else if(n){e.z=n.z+r(e._,n._)}e.parent.A=u(e,n,e.parent.A||a[0])}function s(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function u(e,t,a){if(t){var n=e,i=e,o=t,l=n.parent.children[0],s=n.m,u=i.m,c=o.m,f=l.m,d;while(o=Qo(o),n=Wo(n),o&&n){l=Wo(l);i=Qo(i);i.a=e;d=o.z+c-n.z-s+r(o._,n._);if(d>0){Jo(Ko(o,e,a),e,d);s+=d;u+=d}c+=o.m;s+=n.m;f+=l.m;u+=i.m}if(o&&!Qo(i)){i.t=o;i.m+=c-u}if(n&&!Wo(l)){l.t=n;l.m+=s-f;a=e}}return a}function c(e){e.x*=a[0];e.y=e.depth*a[1]}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return n?null:a;n=(a=e)==null?c:null;return i};i.nodeSize=function(e){if(!arguments.length)return n?a:null;n=(a=e)==null?null:c;return i};return mo(i,e)};function Xo(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function Qo(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Jo(e,t,r){var a=r/(t.i-e.i);t.c-=a;t.s+=r;e.c+=a;t.z+=r;t.m+=r}function $o(e){var t=0,r=0,a=e.children,n=a.length,i;while(--n>=0){i=a[n];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function Ko(e,t,r){return e.a.parent===t.parent?e.a:r}t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Xo,a=[1,1],n=false;function i(t,i){var o=e.call(this,t,i),l=o[0],s,u=0;bo(l,function(e){var t=e.children;if(t&&t.length){e.x=tl(t);e.y=el(t)}else{e.x=s?u+=r(e,s):0;e.y=0;s=e}});var c=rl(l),f=al(l),d=c.x-r(c,f)/2,v=f.x+r(f,c)/2;bo(l,n?function(e){e.x=(e.x-l.x)*a[0];e.y=(l.y-e.y)*a[1]}:function(e){e.x=(e.x-d)/(v-d)*a[0];e.y=(1-(l.y?e.y/l.y:1))*a[1]});return o}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return n?null:a;n=(a=e)==null;return i};i.nodeSize=function(e){if(!arguments.length)return n?a:null;n=(a=e)!=null;return i};return mo(i,e)};function el(e){return 1+t.max(e,function(e){return e.y})}function tl(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function rl(e){var t=e.children;return t&&t.length?rl(t[0]):e}function al(e){var t=e.children,r;return t&&(r=t.length)?al(t[r-1]):e}t.layout.treemap=function(){var e=t.layout.hierarchy(),r=Math.round,a=[1,1],n=null,i=nl,o=false,l,s="squarify",u=.5*(1+Math.sqrt(5));function c(e,t){var r=-1,a=e.length,n,i;while(++r<a){i=(n=e[r]).value*(t<0?0:t);n.area=isNaN(i)||i<=0?0:i}}function f(e){var t=e.children;if(t&&t.length){var r=i(e),a=[],n=t.slice(),o,l=Infinity,u,d=s==="slice"?r.dx:s==="dice"?r.dy:s==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),h;c(n,r.dx*r.dy/e.value);a.area=0;while((h=n.length)>0){a.push(o=n[h-1]);a.area+=o.area;if(s!=="squarify"||(u=v(a,d))<=l){n.pop();l=u}else{a.area-=a.pop().area;p(a,d,r,false);d=Math.min(r.dx,r.dy);a.length=a.area=0;l=Infinity}}if(a.length){p(a,d,r,true);a.length=a.area=0}t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var r=i(e),a=t.slice(),n,o=[];c(a,r.dx*r.dy/e.value);o.area=0;while(n=a.pop()){o.push(n);o.area+=n.area;if(n.z!=null){p(o,n.z?r.dx:r.dy,r,!a.length);o.length=o.area=0}}t.forEach(d)}}function v(e,t){var r=e.area,a,n=0,i=Infinity,o=-1,l=e.length;while(++o<l){if(!(a=e[o].area))continue;if(a<i)i=a;if(a>n)n=a}r*=r;t*=t;return r?Math.max(t*n*u/r,r/(t*i*u)):Infinity}function p(e,t,a,n){var i=-1,o=e.length,l=a.x,s=a.y,u=t?r(e.area/t):0,c;if(t==a.dx){if(n||u>a.dy)u=a.dy;while(++i<o){c=e[i];c.x=l;c.y=s;c.dy=u;l+=c.dx=Math.min(a.x+a.dx-l,u?r(c.area/u):0)}c.z=true;c.dx+=a.x+a.dx-l;a.y+=u;a.dy-=u}else{if(n||u>a.dx)u=a.dx;while(++i<o){c=e[i];c.x=l;c.y=s;c.dx=u;s+=c.dy=Math.min(a.y+a.dy-s,u?r(c.area/u):0)}c.z=false;c.dy+=a.y+a.dy-s;a.x+=u;a.dx-=u}}function h(t){var r=l||e(t),n=r[0];n.x=n.y=0;if(n.value)n.dx=a[0],n.dy=a[1];else n.dx=n.dy=0;if(l)e.revalue(n);c([n],n.dx*n.dy/n.value);(l?d:f)(n);if(o)l=r;return r}h.size=function(e){if(!arguments.length)return a;a=e;return h};h.padding=function(e){if(!arguments.length)return n;function t(t){var r=e.call(h,t,t.depth);return r==null?nl(t):il(t,typeof r==="number"?[r,r,r,r]:r)}function r(t){return il(t,e)}var a;i=(n=e)==null?nl:(a=typeof e)==="function"?t:a==="number"?(e=[e,e,e,e],r):r;return h};h.round=function(e){if(!arguments.length)return r!=Number;r=e?Math.round:Number;return h};h.sticky=function(e){if(!arguments.length)return o;o=e;l=null;return h};h.ratio=function(e){if(!arguments.length)return u;u=e;return h};h.mode=function(e){if(!arguments.length)return s;s=e+"";return h};return mo(h,e)};function nl(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function il(e,t){var r=e.x+t[3],a=e.y+t[0],n=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(n<0){r+=n/2;n=0}if(i<0){a+=i/2;i=0}return{x:r,y:a,dx:n,dy:i}}t.random={normal:function(e,t){var r=arguments.length;if(r<2)t=1;if(r<1)e=0;return function(){var r,a,n;do{r=Math.random()*2-1;a=Math.random()*2-1;n=r*r+a*a}while(!n||n>1);return e+t*r*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(e){return function(){for(var t=0,r=0;r<e;r++)t+=Math.random();return t}}};t.scale={};function ol(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function ll(e){return e.rangeExtent?e.rangeExtent():ol(e.range())}function sl(e,t,r,a){var n=r(e[0],e[1]),i=a(t[0],t[1]);return function(e){return i(n(e))}}function ul(e,t){var r=0,a=e.length-1,n=e[r],i=e[a],o;if(i<n){o=r,r=a,a=o;o=n,n=i,i=o}e[r]=t.floor(n);e[a]=t.ceil(i);return e}function cl(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:fl}var fl={floor:D,ceil:D};function dl(e,r,a,n){var i=[],o=[],l=0,s=Math.min(e.length,r.length)-1;if(e[s]<e[0]){e=e.slice().reverse();r=r.slice().reverse()}while(++l<=s){i.push(a(e[l-1],e[l]));o.push(n(r[l-1],r[l]))}return function(r){var a=t.bisect(e,r,1,s)-1;return o[a](i[a](r))}}t.scale.linear=function(){return vl([0,1],[0,1],Ti,false)};function vl(e,t,r,a){var n,i;function o(){var o=Math.min(e.length,t.length)>2?dl:sl,s=a?io:no;n=o(e,t,s,r);i=o(t,e,s,Ti);return l}function l(e){return n(e)}l.invert=function(e){return i(e)};l.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};l.range=function(e){if(!arguments.length)return t;t=e;return o()};l.rangeRound=function(e){return l.range(e).interpolate(Zi)};l.clamp=function(e){if(!arguments.length)return a;a=e;return o()};l.interpolate=function(e){if(!arguments.length)return r;r=e;return o()};l.ticks=function(t){return yl(e,t)};l.tickFormat=function(t,r){return ml(e,t,r)};l.nice=function(t){hl(e,t);return o()};l.copy=function(){return vl(e,t,r,a)};return o()}function pl(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function hl(e,t){ul(e,cl(gl(e,t)[2]));ul(e,cl(gl(e,t)[2]));return e}function gl(e,t){if(t==null)t=10;var r=ol(e),a=r[1]-r[0],n=Math.pow(10,Math.floor(Math.log(a/t)/Math.LN10)),i=t/a*n;if(i<=.15)n*=10;else if(i<=.35)n*=5;else if(i<=.75)n*=2;r[0]=Math.ceil(r[0]/n)*n;r[1]=Math.floor(r[1]/n)*n+n*.5;r[2]=n;return r}function yl(e,r){return t.range.apply(t,gl(e,r))}function ml(e,r,a){var n=gl(e,r);if(a){var i=Ht.exec(a);i.shift();if(i[8]==="s"){var o=t.formatPrefix(Math.max(x(n[0]),x(n[1])));if(!i[7])i[7]="."+bl(o.scale(n[2]));i[8]="f";a=t.format(i.join(""));return function(e){return a(o.scale(e))+o.symbol}}if(!i[7])i[7]="."+_l(i[8],n);a=i.join("")}else{a=",."+bl(n[2])+"f"}return t.format(a)}var xl={s:1,g:1,p:1,r:1,e:1};function bl(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function _l(e,t){var r=bl(t[2]);return e in xl?Math.abs(r-bl(Math.max(x(t[0]),x(t[1]))))+ +(e!=="e"):r-(e==="%")*2}t.scale.log=function(){return wl(t.scale.linear().domain([0,1]),10,true,[1,10])};function wl(e,r,a,n){function i(e){return(a?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(r)}function o(e){return a?Math.pow(r,e):-Math.pow(r,-e)}function l(t){return e(i(t))}l.invert=function(t){return o(e.invert(t))};l.domain=function(t){if(!arguments.length)return n;a=t[0]>=0;e.domain((n=t.map(Number)).map(i));return l};l.base=function(t){if(!arguments.length)return r;r=+t;e.domain(n.map(i));return l};l.nice=function(){var t=ul(n.map(i),a?Math:Ml);e.domain(t);n=t.map(o);return l};l.ticks=function(){var e=ol(n),t=[],l=e[0],s=e[1],u=Math.floor(i(l)),c=Math.ceil(i(s)),f=r%1?2:r;if(isFinite(c-u)){if(a){for(;u<c;u++)for(var d=1;d<f;d++)t.push(o(u)*d);t.push(o(u))}else{t.push(o(u));for(;u++<c;)for(var d=f-1;d>0;d--)t.push(o(u)*d)}for(u=0;t[u]<l;u++){}for(c=t.length;t[c-1]>s;c--){}t=t.slice(u,c)}return t};l.tickFormat=function(e,a){if(!arguments.length)return kl;if(arguments.length<2)a=kl;else if(typeof a!=="function")a=t.format(a);var n=Math.max(1,r*e/l.ticks().length);return function(e){var t=e/o(Math.round(i(e)));if(t*r<r-.5)t*=r;return t<=n?a(e):""}};l.copy=function(){return wl(e.copy(),r,a,n)};return pl(l,e)}var kl=t.format(".0e"),Ml={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return Tl(t.scale.linear(),1,[0,1])};function Tl(e,t,r){var a=Al(t),n=Al(1/t);function i(t){return e(a(t))}i.invert=function(t){return n(e.invert(t))};i.domain=function(t){if(!arguments.length)return r;e.domain((r=t.map(Number)).map(a));return i};i.ticks=function(e){return yl(r,e)};i.tickFormat=function(e,t){return ml(r,e,t)};i.nice=function(e){return i.domain(hl(r,e))};i.exponent=function(o){if(!arguments.length)return t;a=Al(t=o);n=Al(1/t);e.domain(r.map(a));return i};i.copy=function(){return Tl(e.copy(),t,r)};return pl(i,e)}function Al(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ll([],{t:"range",a:[[]]})};function Ll(e,r){var a,n,i;function o(t){return n[((a.get(t)||(r.t==="range"?a.set(t,e.push(t)):NaN))-1)%n.length]}function l(r,a){return t.range(e.length).map(function(e){return r+a*e})}o.domain=function(t){if(!arguments.length)return e;e=[];a=new w;var n=-1,i=t.length,l;while(++n<i)if(!a.has(l=t[n]))a.set(l,e.push(l));return o[r.t].apply(o,r.a)};o.range=function(e){if(!arguments.length)return n;n=e;i=0;r={t:"range",a:arguments};return o};o.rangePoints=function(t,a){if(arguments.length<2)a=0;var s=t[0],u=t[1],c=e.length<2?(s=(s+u)/2,0):(u-s)/(e.length-1+a);n=l(s+c*a/2,c);i=0;r={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(t,a){if(arguments.length<2)a=0;var s=t[0],u=t[1],c=e.length<2?(s=u=Math.round((s+u)/2),0):(u-s)/(e.length-1+a)|0;n=l(s+Math.round(c*a/2+(u-s-(e.length-1+a)*c)/2),c);i=0;r={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(t,a,s){if(arguments.length<2)a=0;if(arguments.length<3)s=a;var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=(f-c)/(e.length-a+2*s);n=l(c+d*s,d);if(u)n.reverse();i=d*(1-a);r={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(t,a,s){if(arguments.length<2)a=0;if(arguments.length<3)s=a;var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=Math.floor((f-c)/(e.length-a+2*s));n=l(c+Math.round((f-c-(e.length-a)*d)/2),d);if(u)n.reverse();i=Math.round(d*(1-a));r={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return ol(r.a[0])};o.copy=function(){return Ll(e,r)};return o.domain(e)}t.scale.category10=function(){return t.scale.ordinal().range(Sl)};t.scale.category20=function(){return t.scale.ordinal().range(Cl)};t.scale.category20b=function(){return t.scale.ordinal().range(Ol)};t.scale.category20c=function(){return t.scale.ordinal().range(zl)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ht);var Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ht);var Ol=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ht);var zl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ht);t.scale.quantile=function(){return Pl([],[])};function Pl(e,r){var a;function n(){var n=0,o=r.length;a=[];while(++n<o)a[n-1]=t.quantile(e,n/o);return i}function i(e){if(!isNaN(e=+e))return r[t.bisect(a,e)]}i.domain=function(t){if(!arguments.length)return e;e=t.map(p).filter(h).sort(v);return n()};i.range=function(e){if(!arguments.length)return r;r=e;return n()};i.quantiles=function(){return a};i.invertExtent=function(t){t=r.indexOf(t);return t<0?[NaN,NaN]:[t>0?a[t-1]:e[0],t<a.length?a[t]:e[e.length-1]]};i.copy=function(){return Pl(e,r)};return n()}t.scale.quantize=function(){return Dl(0,1,[0,1])};function Dl(e,t,r){var a,n;function i(t){return r[Math.max(0,Math.min(n,Math.floor(a*(t-e))))]}function o(){a=r.length/(t-e);n=r.length-1;return i}i.domain=function(r){if(!arguments.length)return[e,t];e=+r[0];t=+r[r.length-1];return o()};i.range=function(e){if(!arguments.length)return r;r=e;return o()};i.invertExtent=function(t){t=r.indexOf(t);t=t<0?NaN:t/a+e;return[t,t+1/a]};i.copy=function(){return Dl(e,t,r)};return o()}t.scale.threshold=function(){return Il([.5],[0,1])};function Il(e,r){function a(a){if(a<=a)return r[t.bisect(e,a)]}a.domain=function(t){if(!arguments.length)return e;e=t;return a};a.range=function(e){if(!arguments.length)return r;r=e;return a};a.invertExtent=function(t){t=r.indexOf(t);return[e[t-1],e[t]]};a.copy=function(){return Il(e,r)};return a}t.scale.identity=function(){return El([0,1])};function El(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(r){if(!arguments.length)return e;e=r.map(t);return t};t.ticks=function(t){return yl(e,t)};t.tickFormat=function(t,r){return ml(e,t,r)};t.copy=function(){return El(e)};return t}t.svg={};function Nl(){return 0}t.svg.arc=function(){var e=Fl,t=Bl,r=Nl,a=Rl,n=jl,i=ql,o=Hl;function l(){var l=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),c=n.apply(this,arguments)-Pe,f=i.apply(this,arguments)-Pe,d=Math.abs(f-c),v=c>f?0:1;if(u<l)p=u,u=l,l=p;if(d>=ze)return s(u,v)+(l?s(l,1-v):"")+"Z";var p,h,g,y,m=0,x=0,b,_,w,k,M,T,A,L,S=[];if(y=(+o.apply(this,arguments)||0)/2){g=a===Rl?Math.sqrt(l*l+u*u):+a.apply(this,arguments);if(!v)x*=-1;if(u)x=Fe(g/u*Math.sin(y));if(l)m=Fe(g/l*Math.sin(y))}if(u){b=u*Math.cos(c+x);_=u*Math.sin(c+x);w=u*Math.cos(f-x);k=u*Math.sin(f-x);var C=Math.abs(f-c-2*x)<=Ce?0:1;if(x&&Vl(b,_,w,k)===v^C){var O=(c+f)/2;b=u*Math.cos(O);_=u*Math.sin(O);w=k=null}}else{b=_=0}if(l){M=l*Math.cos(f-m);T=l*Math.sin(f-m);A=l*Math.cos(c+m);L=l*Math.sin(c+m);var z=Math.abs(c-f+2*m)<=Ce?0:1;if(m&&Vl(M,T,A,L)===1-v^z){var P=(c+f)/2;M=l*Math.cos(P);T=l*Math.sin(P);A=L=null}}else{M=T=0}if(d>Le&&(p=Math.min(Math.abs(u-l)/2,+r.apply(this,arguments)))>.001){h=l<u^v?0:1;var D=p,I=p;if(d<Ce){var E=A==null?[M,T]:w==null?[b,_]:On([b,_],[A,L],[w,k],[M,T]),N=b-E[0],R=_-E[1],F=w-E[0],B=k-E[1],j=1/Math.sin(Math.acos((N*F+R*B)/(Math.sqrt(N*N+R*R)*Math.sqrt(F*F+B*B)))/2),q=Math.sqrt(E[0]*E[0]+E[1]*E[1]);I=Math.min(p,(l-q)/(j-1));D=Math.min(p,(u-q)/(j+1))}if(w!=null){var H=Ul(A==null?[M,T]:[A,L],[b,_],u,D,v),V=Ul([w,k],[M,T],u,D,v);if(p===D){S.push("M",H[0],"A",D,",",D," 0 0,",h," ",H[1],"A",u,",",u," 0 ",1-v^Vl(H[1][0],H[1][1],V[1][0],V[1][1]),",",v," ",V[1],"A",D,",",D," 0 0,",h," ",V[0])}else{S.push("M",H[0],"A",D,",",D," 0 1,",h," ",V[0])}}else{S.push("M",b,",",_)}if(A!=null){var U=Ul([b,_],[A,L],l,-I,v),G=Ul([M,T],w==null?[b,_]:[w,k],l,-I,v);if(p===I){S.push("L",G[0],"A",I,",",I," 0 0,",h," ",G[1],"A",l,",",l," 0 ",v^Vl(G[1][0],G[1][1],U[1][0],U[1][1]),",",1-v," ",U[1],"A",I,",",I," 0 0,",h," ",U[0])}else{S.push("L",G[0],"A",I,",",I," 0 0,",h," ",U[0])}}else{S.push("L",M,",",T)}}else{S.push("M",b,",",_);if(w!=null)S.push("A",u,",",u," 0 ",C,",",v," ",w,",",k);S.push("L",M,",",T);if(A!=null)S.push("A",l,",",l," 0 ",z,",",1-v," ",A,",",L)}S.push("Z");return S.join("")}function s(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}l.innerRadius=function(t){if(!arguments.length)return e;e=Mt(t);return l};l.outerRadius=function(e){if(!arguments.length)return t;t=Mt(e);return l};l.cornerRadius=function(e){if(!arguments.length)return r;r=Mt(e);return l};l.padRadius=function(e){if(!arguments.length)return a;a=e==Rl?Rl:Mt(e);return l};l.startAngle=function(e){if(!arguments.length)return n;n=Mt(e);return l};l.endAngle=function(e){if(!arguments.length)return i;i=Mt(e);return l};l.padAngle=function(e){if(!arguments.length)return o;o=Mt(e);return l};l.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,a=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2-Pe;return[Math.cos(a)*r,Math.sin(a)*r]};return l};var Rl="auto";function Fl(e){return e.innerRadius}function Bl(e){return e.outerRadius}function jl(e){return e.startAngle}function ql(e){return e.endAngle}function Hl(e){return e&&e.padAngle}function Vl(e,t,r,a){return(e-r)*t-(t-a)*e>0?0:1}function Ul(e,t,r,a,n){var i=e[0]-t[0],o=e[1]-t[1],l=(n?a:-a)/Math.sqrt(i*i+o*o),s=l*o,u=-l*i,c=e[0]+s,f=e[1]+u,d=t[0]+s,v=t[1]+u,p=(c+d)/2,h=(f+v)/2,g=d-c,y=v-f,m=g*g+y*y,x=r-a,b=c*v-d*f,_=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),w=(b*y-g*_)/m,k=(-b*g-y*_)/m,M=(b*y+g*_)/m,T=(-b*g+y*_)/m,A=w-p,L=k-h,S=M-p,C=T-h;if(A*A+L*L>S*S+C*C)w=M,k=T;return[[w-s,k-u],[w*r/x,k*r/x]]}function Gl(e){var t=Mn,r=Tn,a=oa,n=Yl,i=n.key,o=.7;function l(i){var l=[],s=[],u=-1,c=i.length,f,d=Mt(t),v=Mt(r);function p(){l.push("M",n(e(s),o))}while(++u<c){if(a.call(this,f=i[u],u)){s.push([+d.call(this,f,u),+v.call(this,f,u)])}else if(s.length){p();s=[]}}if(s.length)p();return l.length?l.join(""):null}l.x=function(e){if(!arguments.length)return t;t=e;return l};l.y=function(e){if(!arguments.length)return r;r=e;return l};l.defined=function(e){if(!arguments.length)return a;a=e;return l};l.interpolate=function(e){if(!arguments.length)return i;if(typeof e==="function")i=n=e;else i=(n=Zl.get(e)||Yl).key;return l};l.tension=function(e){if(!arguments.length)return o;o=e;return l};return l}t.svg.line=function(){return Gl(D)};var Zl=t.map({linear:Yl,"linear-closed":Xl,step:Wl,"step-before":Ql,"step-after":Jl,basis:as,"basis-open":ns,"basis-closed":is,bundle:os,cardinal:es,"cardinal-open":$l,"cardinal-closed":Kl,monotone:hs});Zl.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Yl(e){return e.length>1?e.join("L"):e+"Z"}function Xl(e){return e.join("L")+"Z"}function Wl(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a[0]+(a=e[t])[0])/2,"V",a[1]);if(r>1)n.push("H",a[0]);return n.join("")}function Ql(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("V",(a=e[t])[1],"H",a[0]);return n.join("")}function Jl(e){var t=0,r=e.length,a=e[0],n=[a[0],",",a[1]];while(++t<r)n.push("H",(a=e[t])[0],"V",a[1]);return n.join("")}function $l(e,t){return e.length<4?Yl(e):e[1]+ts(e.slice(1,-1),rs(e,t))}function Kl(e,t){return e.length<3?Xl(e):e[0]+ts((e.push(e[0]),e),rs([e[e.length-2]].concat(e,[e[1]]),t))}function es(e,t){return e.length<3?Yl(e):e[0]+ts(e,rs(e,t))}function ts(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Yl(e)}var r=e.length!=t.length,a="",n=e[0],i=e[1],o=t[0],l=o,s=1;if(r){a+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];n=e[1];s=2}if(t.length>1){l=t[1];i=e[s];s++;a+="C"+(n[0]+o[0])+","+(n[1]+o[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,s++){i=e[s];l=t[u];a+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}}if(r){var c=e[s];a+="Q"+(i[0]+l[0]*2/3)+","+(i[1]+l[1]*2/3)+","+c[0]+","+c[1]}return a}function rs(e,t){var r=[],a=(1-t)/2,n,i=e[0],o=e[1],l=1,s=e.length;while(++l<s){n=i;i=o;o=e[l];r.push([a*(o[0]-n[0]),a*(o[1]-n[1])])}return r}function as(e){if(e.length<3)return Yl(e);var t=1,r=e.length,a=e[0],n=a[0],i=a[1],o=[n,n,n,(a=e[1])[0]],l=[i,i,i,a[1]],s=[n,",",i,"L",ls(cs,o),",",ls(cs,l)];e.push(e[r-1]);while(++t<=r){a=e[t];o.shift();o.push(a[0]);l.shift();l.push(a[1]);fs(s,o,l)}e.pop();s.push("L",a);return s.join("")}function ns(e){if(e.length<4)return Yl(e);var t=[],r=-1,a=e.length,n,i=[0],o=[0];while(++r<3){n=e[r];i.push(n[0]);o.push(n[1])}t.push(ls(cs,i)+","+ls(cs,o));--r;while(++r<a){n=e[r];i.shift();i.push(n[0]);o.shift();o.push(n[1]);fs(t,i,o)}return t.join("")}function is(e){var t,r=-1,a=e.length,n=a+4,i,o=[],l=[];while(++r<4){i=e[r%a];o.push(i[0]);l.push(i[1])}t=[ls(cs,o),",",ls(cs,l)];--r;while(++r<n){i=e[r%a];o.shift();o.push(i[0]);l.shift();l.push(i[1]);fs(t,o,l)}return t.join("")}function os(e,t){var r=e.length-1;if(r){var a=e[0][0],n=e[0][1],i=e[r][0]-a,o=e[r][1]-n,l=-1,s,u;while(++l<=r){s=e[l];u=l/r;s[0]=t*s[0]+(1-t)*(a+u*i);s[1]=t*s[1]+(1-t)*(n+u*o)}}return as(e)}function ls(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ss=[0,2/3,1/3,0],us=[0,1/3,2/3,0],cs=[0,1/6,2/3,1/6];function fs(e,t,r){e.push("C",ls(ss,t),",",ls(ss,r),",",ls(us,t),",",ls(us,r),",",ls(cs,t),",",ls(cs,r))}function ds(e,t){return(t[1]-e[1])/(t[0]-e[0])}function vs(e){var t=0,r=e.length-1,a=[],n=e[0],i=e[1],o=a[0]=ds(n,i);while(++t<r){a[t]=(o+(o=ds(n=i,i=e[t+1])))/2}a[t]=o;return a}function ps(e){var t=[],r,a,n,i,o=vs(e),l=-1,s=e.length-1;while(++l<s){r=ds(e[l],e[l+1]);if(x(r)<Le){o[l]=o[l+1]=0}else{a=o[l]/r;n=o[l+1]/r;i=a*a+n*n;if(i>9){i=r*3/Math.sqrt(i);o[l]=i*a;o[l+1]=i*n}}}l=-1;while(++l<=s){i=(e[Math.min(s,l+1)][0]-e[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l]));t.push([i||0,o[l]*i||0])}return t}function hs(e){return e.length<3?Yl(e):e[0]+ts(e,ps(e))}t.svg.line.radial=function(){var e=Gl(gs);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function gs(e){var t,r=-1,a=e.length,n,i;while(++r<a){t=e[r];n=t[0];i=t[1]-Pe;t[0]=n*Math.cos(i);t[1]=n*Math.sin(i)}return e}function ys(e){var t=Mn,r=Mn,a=0,n=Tn,i=oa,o=Yl,l=o.key,s=o,u="L",c=.7;function f(l){var f=[],d=[],v=[],p=-1,h=l.length,g,y=Mt(t),m=Mt(a),x=t===r?function(){return _}:Mt(r),b=a===n?function(){return w}:Mt(n),_,w;function k(){f.push("M",o(e(v),c),u,s(e(d.reverse()),c),"Z")}while(++p<h){if(i.call(this,g=l[p],p)){d.push([_=+y.call(this,g,p),w=+m.call(this,g,p)]);v.push([+x.call(this,g,p),+b.call(this,g,p)])}else if(d.length){k();d=[];v=[]}}if(d.length)k();return f.length?f.join(""):null}f.x=function(e){if(!arguments.length)return r;t=r=e;return f};f.x0=function(e){if(!arguments.length)return t;t=e;return f};f.x1=function(e){if(!arguments.length)return r;r=e;return f};f.y=function(e){if(!arguments.length)return n;a=n=e;return f};f.y0=function(e){if(!arguments.length)return a;a=e;return f};f.y1=function(e){if(!arguments.length)return n;n=e;return f};f.defined=function(e){if(!arguments.length)return i;i=e;return f};f.interpolate=function(e){if(!arguments.length)return l;if(typeof e==="function")l=o=e;else l=(o=Zl.get(e)||Yl).key;s=o.reverse||o;u=o.closed?"M":"L";return f};f.tension=function(e){if(!arguments.length)return c;c=e;return f};return f}Ql.reverse=Jl;Jl.reverse=Ql;t.svg.area=function(){return ys(D)};t.svg.area.radial=function(){var e=ys(gs);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};t.svg.chord=function(){var e=ln,t=sn,r=ms,a=jl,n=ql;function i(r,a){var n=o(this,e,r,a),i=o(this,t,r,a);return"M"+n.p0+s(n.r,n.p1,n.a1-n.a0)+(l(n,i)?u(n.r,n.p1,n.r,n.p0):u(n.r,n.p1,i.r,i.p0)+s(i.r,i.p1,i.a1-i.a0)+u(i.r,i.p1,n.r,n.p0))+"Z"}function o(e,t,i,o){var l=t.call(e,i,o),s=r.call(e,l,o),u=a.call(e,l,o)-Pe,c=n.call(e,l,o)-Pe;return{r:s,a0:u,a1:c,p0:[s*Math.cos(u),s*Math.sin(u)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function l(e,t){return e.a0==t.a0&&e.a1==t.a1}function s(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Ce)+",1 "+t}function u(e,t,r,a){return"Q 0,0 "+a}i.radius=function(e){if(!arguments.length)return r;r=Mt(e);return i};i.source=function(t){if(!arguments.length)return e;e=Mt(t);return i};i.target=function(e){if(!arguments.length)return t;t=Mt(e);return i};i.startAngle=function(e){if(!arguments.length)return a;a=Mt(e);return i};i.endAngle=function(e){if(!arguments.length)return n;n=Mt(e);return i};return i};function ms(e){return e.radius}t.svg.diagonal=function(){var e=ln,t=sn,r=xs;function a(a,n){var i=e.call(this,a,n),o=t.call(this,a,n),l=(i.y+o.y)/2,s=[i,{x:i.x,y:l},{x:o.x,y:l},o];s=s.map(r);return"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}a.source=function(t){if(!arguments.length)return e;e=Mt(t);return a};a.target=function(e){if(!arguments.length)return t;t=Mt(e);return a};a.projection=function(e){if(!arguments.length)return r;r=e;return a};return a};function xs(e){return[e.x,e.y]}t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=xs,a=e.projection;e.projection=function(e){return arguments.length?a(bs(r=e)):r};return e};function bs(e){return function(){var t=e.apply(this,arguments),r=t[0],a=t[1]-Pe;return[r*Math.cos(a),r*Math.sin(a)]}}t.svg.symbol=function(){var e=ws,t=_s;function r(r,a){return(Ms.get(e.call(this,r,a))||ks)(t.call(this,r,a))}r.type=function(t){if(!arguments.length)return e;e=Mt(t);return r};r.size=function(e){if(!arguments.length)return t;t=Mt(e);return r};return r};function _s(){return 64}function ws(){return"circle"}function ks(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Ms=t.map({circle:ks,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*As)),r=t*As;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),r=t*Ts/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),r=t*Ts/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});t.svg.symbolTypes=Ms.keys();var Ts=Math.sqrt(3),As=Math.tan(30*De);W.transition=function(e){var t=Ps||++zs,r=Ns(e),a=[],n,i,o=Ds||{time:Date.now(),ease:Ei,delay:0,duration:250};for(var l=-1,s=this.length;++l<s;){a.push(n=[]);for(var u=this[l],c=-1,f=u.length;++c<f;){if(i=u[c])Rs(i,c,r,t,o);n.push(i)}}return Cs(a,r,t)};W.interrupt=function(e){return this.each(e==null?Ls:Ss(Ns(e)))};var Ls=Ss(Ns());function Ss(e){return function(){var t,r,a;if((t=this[e])&&(a=t[r=t.active])){a.timer.c=null;a.timer.t=NaN;if(--t.count)delete t[r];else delete this[e];t.active+=.5;a.event&&a.event.interrupt.call(this,this.__data__,a.index)}}}function Cs(e,t,r){U(e,Os);e.namespace=t;e.id=r;return e}var Os=[],zs=0,Ps,Ds;Os.call=W.call;Os.empty=W.empty;Os.node=W.node;Os.size=W.size;t.transition=function(e,r){return e&&e.transition?Ps?e.transition(r):e:t.selection().transition(e)};t.transition.prototype=Os;Os.select=function(e){var t=this.id,r=this.namespace,a=[],n,i,o;e=Q(e);for(var l=-1,s=this.length;++l<s;){a.push(n=[]);for(var u=this[l],c=-1,f=u.length;++c<f;){if((o=u[c])&&(i=e.call(o,o.__data__,c,l))){if("__data__"in o)i.__data__=o.__data__;Rs(i,c,r,t,o[r][t]);n.push(i)}else{n.push(null)}}}return Cs(a,r,t)};Os.selectAll=function(e){var t=this.id,r=this.namespace,a=[],n,i,o,l,s;e=J(e);for(var u=-1,c=this.length;++u<c;){for(var f=this[u],d=-1,v=f.length;++d<v;){if(o=f[d]){s=o[r][t];i=e.call(o,o.__data__,d,u);a.push(n=[]);for(var p=-1,h=i.length;++p<h;){if(l=i[p])Rs(l,p,r,t,s);n.push(l)}}}}return Cs(a,r,t)};Os.filter=function(e){var t=[],r,a,n;if(typeof e!=="function")e=fe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var a=this[i],l=0,s=a.length;l<s;l++){if((n=a[l])&&e.call(n,n.__data__,l,i)){r.push(n)}}}return Cs(t,this.namespace,this.id)};Os.tween=function(e,t){var r=this.id,a=this.namespace;if(arguments.length<2)return this.node()[a][r].tween.get(e);return ve(this,t==null?function(t){t[a][r].tween.remove(e)}:function(n){n[a][r].tween.set(e,t)})};function Is(e,t,r,a){var n=e.id,i=e.namespace;return ve(e,typeof r==="function"?function(e,o,l){e[i][n].tween.set(t,a(r.call(e,e.__data__,o,l)))}:(r=a(r),function(e){e[i][n].tween.set(t,r)}))}Os.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var a=e=="transform"?ao:Ti,n=t.ns.qualify(e);function i(){this.removeAttribute(n)}function o(){this.removeAttributeNS(n.space,n.local)}function l(e){return e==null?i:(e+="",function(){var t=this.getAttribute(n),r;return t!==e&&(r=a(t,e),function(e){this.setAttribute(n,r(e))})})}function s(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(n.space,n.local),r;return t!==e&&(r=a(t,e),function(e){this.setAttributeNS(n.space,n.local,r(e))})})}return Is(this,"attr."+e,r,n.local?s:l)};Os.attrTween=function(e,r){var a=t.ns.qualify(e);function n(e,t){var n=r.call(this,e,t,this.getAttribute(a));return n&&function(e){this.setAttribute(a,n(e))}}function i(e,t){var n=r.call(this,e,t,this.getAttributeNS(a.space,a.local));return n&&function(e){this.setAttributeNS(a.space,a.local,n(e))}}return this.tween("attr."+e,a.local?i:n)};Os.style=function(e,t,r){var a=arguments.length;if(a<3){if(typeof e!=="string"){if(a<2)t="";for(r in e)this.style(r,e[r],t);return this}r=""}function n(){this.style.removeProperty(e)}function i(t){return t==null?n:(t+="",function(){var a=l(this).getComputedStyle(this,null).getPropertyValue(e),n;return a!==t&&(n=Ti(a,t),function(t){this.style.setProperty(e,n(t),r)})})}return Is(this,"style."+e,t,i)};Os.styleTween=function(e,t,r){if(arguments.length<3)r="";function a(a,n){var i=t.call(this,a,n,l(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),r)}}return this.tween("style."+e,a)};Os.text=function(e){return Is(this,"text",e,Es)};function Es(e){if(e==null)e="";return function(){this.textContent=e}}Os.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})};Os.ease=function(e){var r=this.id,a=this.namespace;if(arguments.length<1)return this.node()[a][r].ease;if(typeof e!=="function")e=t.ease.apply(t,arguments);return ve(this,function(t){t[a][r].ease=e})};Os.delay=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].delay;return ve(this,typeof e==="function"?function(a,n,i){a[r][t].delay=+e.call(a,a.__data__,n,i)}:(e=+e,function(a){a[r][t].delay=e}))};Os.duration=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].duration;return ve(this,typeof e==="function"?function(a,n,i){a[r][t].duration=Math.max(1,e.call(a,a.__data__,n,i))}:(e=Math.max(1,e),function(a){a[r][t].duration=e}))};Os.each=function(e,r){var a=this.id,n=this.namespace;if(arguments.length<2){var i=Ds,o=Ps;try{Ps=a;ve(this,function(t,r,i){Ds=t[n][a];e.call(t,t.__data__,r,i)})}finally{Ds=i;Ps=o}}else{ve(this,function(i){var o=i[n][a];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,r)})}return this};Os.transition=function(){var e=this.id,t=++zs,r=this.namespace,a=[],n,i,o,l;for(var s=0,u=this.length;s<u;s++){a.push(n=[]);for(var i=this[s],c=0,f=i.length;c<f;c++){if(o=i[c]){l=o[r][e];Rs(o,c,r,t,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration})}n.push(o)}}return Cs(a,r,t)};function Ns(e){return e==null?"__transition__":"__transition_"+e+"__"}function Rs(e,t,r,a,n){var i=e[r]||(e[r]={active:0,count:0}),o=i[a],l,s,u,c,f;function d(e){var t=o.delay;s.t=t+l;if(t<=e)return v(e-t);s.c=v}function v(r){var n=i.active,d=i[n];if(d){d.timer.c=null;d.timer.t=NaN;--i.count;delete i[n];d.event&&d.event.interrupt.call(e,e.__data__,d.index)}for(var v in i){if(+v<a){var h=i[v];h.timer.c=null;h.timer.t=NaN;--i.count;delete i[v]}}s.c=p;It(function(){if(s.c&&p(r||1)){s.c=null;s.t=NaN}return 1},0,l);i.active=a;o.event&&o.event.start.call(e,e.__data__,t);f=[];o.tween.forEach(function(r,a){if(a=a.call(e,e.__data__,t)){f.push(a)}});c=o.ease;u=o.duration}function p(n){var l=n/u,s=c(l),d=f.length;while(d>0){f[--d].call(e,s)}if(l>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--i.count)delete i[a];else delete e[r];return 1}}if(!o){l=n.time;s=It(d,0,l);o=i[a]={tween:new w,time:l,timer:s,delay:n.delay,duration:n.duration,ease:n.ease,index:t};n=null;++i.count}}t.svg.axis=function(){var e=t.scale.linear(),r=Fs,a=6,i=6,o=3,l=[10],s=null,u;function c(n){n.each(function(){var n=t.select(this);var c=this.__chart__||e,f=this.__chart__=e.copy();var d=s==null?f.ticks?f.ticks.apply(f,l):f.domain():s,v=u==null?f.tickFormat?f.tickFormat.apply(f,l):D:u,p=n.selectAll(".tick").data(d,f),h=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Le),g=t.transition(p.exit()).style("opacity",Le).remove(),y=t.transition(p.order()).style("opacity",1),m=Math.max(a,0)+o,x;var b=ll(f),_=n.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),t.transition(_));h.append("line");h.append("text");var k=h.select("line"),M=y.select("line"),T=p.select("text").text(v),A=h.select("text"),L=y.select("text"),S=r==="top"||r==="left"?-1:1,C,O,z,P;if(r==="bottom"||r==="top"){x=js,C="x",z="y",O="x2",P="y2";T.attr("dy",S<0?"0em":".71em").style("text-anchor","middle");w.attr("d","M"+b[0]+","+S*i+"V0H"+b[1]+"V"+S*i)}else{x=qs,C="y",z="x",O="y2",P="x2";T.attr("dy",".32em").style("text-anchor",S<0?"end":"start");w.attr("d","M"+S*i+","+b[0]+"H0V"+b[1]+"H"+S*i)}k.attr(P,S*a);A.attr(z,S*m);M.attr(O,0).attr(P,S*a);L.attr(C,0).attr(z,S*m);if(f.rangeBand){var I=f,E=I.rangeBand()/2;c=f=function(e){return I(e)+E}}else if(c.rangeBand){c=f}else{g.call(x,f,c)}h.call(x,c,f);y.call(x,f,f)})}c.scale=function(t){if(!arguments.length)return e;e=t;return c};c.orient=function(e){if(!arguments.length)return r;r=e in Bs?e+"":Fs;return c};c.ticks=function(){if(!arguments.length)return l;l=n(arguments);return c};c.tickValues=function(e){if(!arguments.length)return s;s=e;return c};c.tickFormat=function(e){if(!arguments.length)return u;u=e;return c};c.tickSize=function(e){var t=arguments.length;if(!t)return a;a=+e;i=+arguments[t-1];return c};c.innerTickSize=function(e){if(!arguments.length)return a;a=+e;return c};c.outerTickSize=function(e){if(!arguments.length)return i;i=+e;return c};c.tickPadding=function(e){if(!arguments.length)return o;o=+e;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Fs="bottom",Bs={top:1,right:1,bottom:1,left:1};function js(e,t,r){e.attr("transform",function(e){var a=t(e);return"translate("+(isFinite(a)?a:r(e))+",0)"})}function qs(e,t,r){e.attr("transform",function(e){var a=t(e);return"translate(0,"+(isFinite(a)?a:r(e))+")"})}t.svg.brush=function(){var e=H(d,"brushstart","brush","brushend"),r=null,a=null,n=[0,0],i=[0,0],o,s,u=true,c=true,f=Vs[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g);var n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(f,D);i.exit().remove();i.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",d.empty()?"none":null);var o=t.transition(e),l=t.transition(n),s;if(r){s=ll(r);l.attr("x",s[0]).attr("width",s[1]-s[0]);p(o)}if(a){s=ll(a);l.attr("y",s[0]).attr("height",s[1]-s[0]);h(o)}v(o)})}d.event=function(r){r.each(function(){var r=e.of(this,arguments),a={x:n,y:i,i:o,j:s},l=this.__chart__||a;this.__chart__=a;if(Ps){t.select(this).transition().each("start.brush",function(){o=l.i;s=l.j;n=l.x;i=l.y;r({type:"brushstart"})}).tween("brush:brush",function(){var e=Ai(n,a.x),t=Ai(i,a.y);o=s=null;return function(o){n=a.x=e(o);i=a.y=t(o);r({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=a.i;s=a.j;r({type:"brush",mode:"resize"});r({type:"brushend"})})}else{r({type:"brushstart"});r({type:"brush",mode:"resize"});r({type:"brushend"})}})};function v(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+n[+/e$/.test(e)]+","+i[+/^s/.test(e)]+")"})}function p(e){e.select(".extent").attr("x",n[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",n[1]-n[0])}function h(e){e.select(".extent").attr("y",i[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function g(){var f=this,g=t.select(t.event.target),y=e.of(f,arguments),m=t.select(f),x=g.datum(),b=!/^(n|s)$/.test(x)&&r,_=!/^(e|w)$/.test(x)&&a,w=g.classed("extent"),k=ke(f),M,T=t.mouse(f),A;var L=t.select(l(f)).on("keydown.brush",O).on("keyup.brush",z);if(t.event.changedTouches){L.on("touchmove.brush",P).on("touchend.brush",I)}else{L.on("mousemove.brush",P).on("mouseup.brush",I)}m.interrupt().selectAll("*").interrupt();if(w){T[0]=n[0]-T[0];T[1]=i[0]-T[1]}else if(x){var S=+/w$/.test(x),C=+/^n/.test(x);A=[n[1-S]-T[0],i[1-C]-T[1]];T[0]=n[S];T[1]=i[C]}else if(t.event.altKey)M=T.slice();m.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",g.style("cursor"));y({type:"brushstart"});P();function O(){if(t.event.keyCode==32){if(!w){M=null;T[0]-=n[1];T[1]-=i[1];w=2}j()}}function z(){if(t.event.keyCode==32&&w==2){T[0]+=n[1];T[1]+=i[1];w=0;j()}}function P(){var e=t.mouse(f),o=false;if(A){e[0]+=A[0];e[1]+=A[1]}if(!w){if(t.event.altKey){if(!M)M=[(n[0]+n[1])/2,(i[0]+i[1])/2];T[0]=n[+(e[0]<M[0])];T[1]=i[+(e[1]<M[1])]}else M=null}if(b&&D(e,r,0)){p(m);o=true}if(_&&D(e,a,1)){h(m);o=true}if(o){v(m);y({type:"brush",mode:w?"move":"resize"})}}function D(e,t,r){var a=ll(t),l=a[0],f=a[1],d=T[r],v=r?i:n,p=v[1]-v[0],h,g;if(w){l-=d;f-=p+d}h=(r?c:u)?Math.max(l,Math.min(f,e[r])):e[r];if(w){g=(h+=d)+p}else{if(M)d=Math.max(l,Math.min(f,2*M[r]-h));if(d<h){g=h;h=d}else{g=d}}if(v[0]!=h||v[1]!=g){if(r)s=null;else o=null;v[0]=h;v[1]=g;return true}}function I(){P();m.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);t.select("body").style("cursor",null);L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);k();y({type:"brushend"})}}d.x=function(e){if(!arguments.length)return r;r=e;f=Vs[!r<<1|!a];return d};d.y=function(e){if(!arguments.length)return a;a=e;f=Vs[!r<<1|!a];return d};d.clamp=function(e){if(!arguments.length)return r&&a?[u,c]:r?u:a?c:null;if(r&&a)u=!!e[0],c=!!e[1];else if(r)u=!!e;else if(a)c=!!e;return d};d.extent=function(e){var t,l,u,c,f;if(!arguments.length){if(r){if(o){t=o[0],l=o[1]}else{t=n[0],l=n[1];if(r.invert)t=r.invert(t),l=r.invert(l);if(l<t)f=t,t=l,l=f}}if(a){if(s){u=s[0],c=s[1]}else{u=i[0],c=i[1];if(a.invert)u=a.invert(u),c=a.invert(c);if(c<u)f=u,u=c,c=f}}return r&&a?[[t,u],[l,c]]:r?[t,l]:a&&[u,c]}if(r){t=e[0],l=e[1];if(a)t=t[0],l=l[0];o=[t,l];if(r.invert)t=r(t),l=r(l);if(l<t)f=t,t=l,l=f;if(t!=n[0]||l!=n[1])n=[t,l]}if(a){u=e[0],c=e[1];if(r)u=u[1],c=c[1];s=[u,c];if(a.invert)u=a(u),c=a(c);if(c<u)f=u,u=c,c=f;if(u!=i[0]||c!=i[1])i=[u,c]}return d};d.clear=function(){if(!d.empty()){n=[0,0],i=[0,0];o=s=null}return d};d.empty=function(){return!!r&&n[0]==n[1]||!!a&&i[0]==i[1]};return t.rebind(d,e,"on")};var Hs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Vs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Us=Gt.format=_r.timeFormat;var Gs=Us.utc;var Zs=Gs("%Y-%m-%dT%H:%M:%S.%LZ");Us.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ys:Zs;function Ys(e){return e.toISOString()}Ys.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Ys.toString=Zs.toString;Gt.second=Wt(function(e){return new Zt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Gt.seconds=Gt.second.range;Gt.seconds.utc=Gt.second.utc.range;Gt.minute=Wt(function(e){return new Zt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Gt.minutes=Gt.minute.range;Gt.minutes.utc=Gt.minute.utc.range;Gt.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new Zt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Gt.hours=Gt.hour.range;Gt.hours.utc=Gt.hour.utc.range;Gt.month=Wt(function(e){e=Gt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Gt.months=Gt.month.range;Gt.months.utc=Gt.month.utc.range;function Xs(e,r,a){function n(t){return e(t)}n.invert=function(t){return Ws(e.invert(t))};n.domain=function(t){if(!arguments.length)return e.domain().map(Ws);e.domain(t);return n};function i(e,a){var n=e[1]-e[0],i=n/a,o=t.bisect(Qs,i);return o==Qs.length?[r.year,gl(e.map(function(e){return e/31536e6}),a)[2]]:!o?[Ks,gl(e,a)[2]]:r[i/Qs[o-1]<Qs[o]/i?o-1:o]}n.nice=function(e,t){var r=n.domain(),a=ol(r),o=e==null?i(a,10):typeof e==="number"&&i(a,e);if(o)e=o[0],t=o[1];function l(r){return!isNaN(r)&&!e.range(r,Ws(+r+1),t).length}return n.domain(ul(r,t>1?{floor:function(t){while(l(t=e.floor(t)))t=Ws(t-1);return t},ceil:function(t){while(l(t=e.ceil(t)))t=Ws(+t+1);return t}}:e))};n.ticks=function(e,t){var r=ol(n.domain()),a=e==null?i(r,10):typeof e==="number"?i(r,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(r[0],Ws(+r[1]+1),t<1?1:t)};n.tickFormat=function(){return a};n.copy=function(){return Xs(e.copy(),r,a)};return pl(n,e)}function Ws(e){return new Date(e)}var Qs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Js=[[Gt.second,1],[Gt.second,5],[Gt.second,15],[Gt.second,30],[Gt.minute,1],[Gt.minute,5],[Gt.minute,15],[Gt.minute,30],[Gt.hour,1],[Gt.hour,3],[Gt.hour,6],[Gt.hour,12],[Gt.day,1],[Gt.day,2],[Gt.week,1],[Gt.month,1],[Gt.month,3],[Gt.year,1]];var $s=Us.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",oa]]);var Ks={range:function(e,r,a){return t.range(Math.ceil(e/a)*a,+r,a).map(Ws)},floor:D,ceil:D};Js.year=Gt.year;Gt.scale=function(){return Xs(t.scale.linear(),Js,$s)};var eu=Js.map(function(e){return[e[0].utc,e[1]]});var tu=Gs.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",oa]]);eu.year=Gt.year.utc;Gt.scale.utc=function(){return Xs(t.scale.linear(),eu,tu)};t.text=Tt(function(e){return e.responseText});t.json=function(e,t){return At(e,"application/json",ru,t)};function ru(e){return JSON.parse(e.responseText)}t.html=function(e,t){return At(e,"text/html",au,t)};function au(e){var t=i.createRange();t.selectNode(i.body);return t.createContextualFragment(e.responseText)}t.xml=Tt(function(e){return e.responseXML});if(typeof e==="function"&&e.amd)this.d3=t,e(t);else if(typeof r==="object"&&r.exports)r.exports=t;else this.d3=t}()},{}],16:[function(t,r,a){(function(n,i){(function(t,n){typeof a==="object"&&typeof r!=="undefined"?r.exports=n():typeof e==="function"&&e.amd?e(n):t.ES6Promise=n()})(this,function(){"use strict";function e(e){return typeof e==="function"||typeof e==="object"&&e!==null}function r(e){return typeof e==="function"}var a=undefined;if(!Array.isArray){a=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{a=Array.isArray}var o=a;var l=0;var s=undefined;var u=undefined;var c=function e(t,r){k[l]=t;k[l+1]=r;l+=2;if(l===2){if(u){u(M)}else{A()}}};function f(e){u=e}function d(e){c=e}var v=typeof window!=="undefined"?window:undefined;var p=v||{};var h=p.MutationObserver||p.WebKitMutationObserver;var g=typeof self==="undefined"&&typeof n!=="undefined"&&{}.toString.call(n)==="[object process]";var y=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return n.nextTick(M)}}function x(){return function(){s(M)}}function b(){var e=0;var t=new h(M);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function _(){var e=new MessageChannel;e.port1.onmessage=M;return function(){return e.port2.postMessage(0)}}function w(){var e=setTimeout;return function(){return e(M,1)}}var k=new Array(1e3);function M(){for(var e=0;e<l;e+=2){var t=k[e];var r=k[e+1];t(r);k[e]=undefined;k[e+1]=undefined}l=0}function T(){try{var e=t;var r=e("vertx");s=r.runOnLoop||r.runOnContext;return x()}catch(e){return w()}}var A=undefined;if(g){A=m()}else if(h){A=b()}else if(y){A=_()}else if(v===undefined&&typeof t==="function"){A=T()}else{A=w()}function L(e,t){var r=arguments;var a=this;var n=new this.constructor(O);if(n[C]===undefined){te(n)}var i=a._state;if(i){(function(){var e=r[i-1];c(function(){return J(i,n,e,a._result)})})()}else{Z(a,n,e,t)}return n}function S(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(O);H(r,e);return r}var C=Math.random().toString(36).substring(16);function O(){}var z=void 0;var P=1;var D=2;var I=new X;function E(){return new TypeError("You cannot resolve a promise with itself")}function N(){return new TypeError("A promises callback cannot return that same promise.")}function R(e){try{return e.then}catch(e){I.error=e;return I}}function F(e,t,r,a){try{e.call(t,r,a)}catch(e){return e}}function B(e,t,r){c(function(e){var a=false;var n=F(r,t,function(r){if(a){return}a=true;if(t!==r){H(e,r)}else{U(e,r)}},function(t){if(a){return}a=true;G(e,t)},"Settle: "+(e._label||" unknown promise"));if(!a&&n){a=true;G(e,n)}},e)}function j(e,t){if(t._state===P){U(e,t._result)}else if(t._state===D){G(e,t._result)}else{Z(t,undefined,function(t){return H(e,t)},function(t){return G(e,t)})}}function q(e,t,a){if(t.constructor===e.constructor&&a===L&&t.constructor.resolve===S){j(e,t)}else{if(a===I){G(e,I.error)}else if(a===undefined){U(e,t)}else if(r(a)){B(e,t,a)}else{U(e,t)}}}function H(t,r){if(t===r){G(t,E())}else if(e(r)){q(t,r,R(r))}else{U(t,r)}}function V(e){if(e._onerror){e._onerror(e._result)}Y(e)}function U(e,t){if(e._state!==z){return}e._result=t;e._state=P;if(e._subscribers.length!==0){c(Y,e)}}function G(e,t){if(e._state!==z){return}e._state=D;e._result=t;c(V,e)}function Z(e,t,r,a){var n=e._subscribers;var i=n.length;e._onerror=null;n[i]=t;n[i+P]=r;n[i+D]=a;if(i===0&&e._state){c(Y,e)}}function Y(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var a=undefined,n=undefined,i=e._result;for(var o=0;o<t.length;o+=3){a=t[o];n=t[o+r];if(a){J(r,a,n,i)}else{n(i)}}e._subscribers.length=0}function X(){this.error=null}var W=new X;function Q(e,t){try{return e(t)}catch(e){W.error=e;return W}}function J(e,t,a,n){var i=r(a),o=undefined,l=undefined,s=undefined,u=undefined;if(i){o=Q(a,n);if(o===W){u=true;l=o.error;o=null}else{s=true}if(t===o){G(t,N());return}}else{o=n;s=true}if(t._state!==z){}else if(i&&s){H(t,o)}else if(u){G(t,l)}else if(e===P){U(t,o)}else if(e===D){G(t,o)}}function $(e,t){try{t(function t(r){H(e,r)},function t(r){G(e,r)})}catch(t){G(e,t)}}var K=0;function ee(){return K++}function te(e){e[C]=K++;e._state=undefined;e._result=undefined;e._subscribers=[]}function re(e,t){this._instanceConstructor=e;this.promise=new e(O);if(!this.promise[C]){te(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){U(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){U(this.promise,this._result)}}}else{G(this.promise,ae())}}function ae(){return new Error("Array Methods must be provided an Array")}re.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===z&&r<e;r++){this._eachEntry(t[r],r)}};re.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var a=r.resolve;if(a===S){var n=R(e);if(n===L&&e._state!==z){this._settledAt(e._state,t,e._result)}else if(typeof n!=="function"){this._remaining--;this._result[t]=e}else if(r===ue){var i=new r(O);q(i,e,n);this._willSettleAt(i,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(a(e),t)}};re.prototype._settledAt=function(e,t,r){var a=this.promise;if(a._state===z){this._remaining--;if(e===D){G(a,r)}else{this._result[t]=r}}if(this._remaining===0){U(a,this._result)}};re.prototype._willSettleAt=function(e,t){var r=this;Z(e,undefined,function(e){return r._settledAt(P,t,e)},function(e){return r._settledAt(D,t,e)})};function ne(e){return new re(this,e).promise}function ie(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,a){var n=e.length;for(var i=0;i<n;i++){t.resolve(e[i]).then(r,a)}})}}function oe(e){var t=this;var r=new t(O);G(r,e);return r}function le(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function se(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ue(e){this[C]=ee();this._result=this._state=undefined;this._subscribers=[];if(O!==e){typeof e!=="function"&&le();this instanceof ue?$(this,e):se()}}ue.all=ne;ue.race=ie;ue.resolve=S;ue.reject=oe;ue._setScheduler=f;ue._setAsap=d;ue._asap=c;ue.prototype={constructor:ue,then:L,catch:function e(t){return this.then(null,t)}};function ce(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ue}ce();ue.polyfill=ce;ue.Promise=ue;return ue})}).call(this,t("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:32}],17:[function(e,t,r){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=a;a.EventEmitter=a;a.prototype._events=undefined;a.prototype._maxListeners=undefined;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};a.prototype.emit=function(e){var t,r,a,i,s,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c}}}r=this._events[e];if(l(r))return false;if(n(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1);r.apply(this,i)}}else if(o(r)){i=Array.prototype.slice.call(arguments,1);u=r.slice();a=u.length;for(s=0;s<a;s++)u[s].apply(this,i)}return true};a.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,n(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!l(this._maxListeners)){r=this._maxListeners}else{r=a.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=false;function a(){this.removeListener(e,a);if(!r){r=true;t.apply(this,arguments)}}a.listener=t;this.on(e,a);return this};a.prototype.removeListener=function(e,t){var r,a,i,l;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];i=r.length;a=-1;if(r===t||n(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(r)){for(l=i;l-- >0;){if(r[l]===t||r[l].listener&&r[l].listener===t){a=l;break}}if(a<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(a,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};a.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(n(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};a.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(n(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;else if(t)return t.length}return 0};a.listenerCount=function(e,t){return e.listenerCount(t)};function n(e){return typeof e==="function"}function i(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function l(e){return e===void 0}},{}],18:[function(e,t,r){"use strict";function a(e){var t=e.length,r;for(var a=0;a<t;a++){r=e.charCodeAt(a);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&a(r))return false}else if(t!=="number")return false;return e-e<1}},{}],19:[function(e,t,r){t.exports=a;function a(e,t){var r=t[0],a=t[1],n=t[2],i=t[3],o=r+r,l=a+a,s=n+n,u=r*o,c=a*o,f=a*l,d=n*o,v=n*l,p=n*s,h=i*o,g=i*l,y=i*s;e[0]=1-f-p;e[1]=c+y;e[2]=d-g;e[3]=0;e[4]=c-y;e[5]=1-u-p;e[6]=v+h;e[7]=0;e[8]=d+g;e[9]=v-h;e[10]=1-u-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],20:[function(e,t,r){(function(r){"use strict";var a=e("is-browser");var n;if(typeof r.matchMedia==="function"){n=!r.matchMedia("(hover: none)").matches}else{n=a}t.exports=n}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":22}],21:[function(e,t,r){"use strict";var a=e("is-browser");function n(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t);window.removeEventListener("test",null,t)}catch(t){e=false}return e}t.exports=a&&n()},{"is-browser":22}],22:[function(e,t,r){t.exports=true},{}],23:[function(e,t,r){var a={left:0,top:0};t.exports=n;function n(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var a=e.clientX||0;var n=e.clientY||0;var o=i(t);r[0]=a-o.left;r[1]=n-o.top;return r}function i(e){if(e===window||e===document||e===document.body){return a}else{return e.getBoundingClientRect()}}},{}],24:[function(e,t,r){var a=e("./lib/build-log");var n=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var l=e("./lib/segment-selector");var s=e("./lib/geojson");var u=false;var c=n();var f;f={buildLog:function(e){if(e===true)u=a();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return c.epsilon(e)},segments:function(e){var t=i(true,c,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,c,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,c,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return s.toPolygon(f,e)},polygonToGeoJSON:function(e){return s.fromPolygon(f,c,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var a=f.segments(e);var n=f.segments(t);var i=f.combine(a,n);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":25,"./lib/epsilon":26,"./lib/geojson":27,"./lib/intersecter":28,"./lib/segment-chainer":30,"./lib/segment-selector":31}],25:[function(e,t,r){function a(){var e;var t=0;var r=false;function a(t,r){e.list.push({type:t,data:r?JSON.parse(JSON.stringify(r)):void 0});return e}e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return a("check",{seg1:e,seg2:t})},segmentChop:function(e,t){a("div_seg",{seg:e,pt:t});return a("chop",{seg:e,pt:t})},statusRemove:function(e){return a("pop_seg",{seg:e})},segmentUpdate:function(e){return a("seg_update",{seg:e})},segmentNew:function(e,t){return a("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return a("rem_seg",{seg:e})},tempStatus:function(e,t,r){return a("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return a("rewind",{seg:e})},status:function(e,t,r){return a("status",{seg:e,above:t,below:r})},vert:function(t){if(t===r)return e;r=t;return a("vert",{x:t})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return a("log",{txt:e})},reset:function(){return a("reset")},selected:function(e){return a("selected",{segs:e})},chainStart:function(e){return a("chain_start",{seg:e})},chainRemoveHead:function(e,t){return a("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return a("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return a("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return a("chain_match",{index:e})},chainClose:function(e){return a("chain_close",{index:e})},chainAddHead:function(e,t){return a("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return a("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return a("chain_con",{index1:e,index2:t})},chainReverse:function(e){return a("chain_rev",{index:e})},chainJoin:function(e,t){return a("chain_join",{index1:e,index2:t})},done:function(){return a("done")}};return e}t.exports=a},{}],26:[function(e,t,r){function a(e){if(typeof e!=="number")e=1e-10;var t={epsilon:function(t){if(typeof t==="number")e=t;return e},pointAboveOrOnLine:function(t,r,a){var n=r[0];var i=r[1];var o=a[0];var l=a[1];var s=t[0];var u=t[1];return(o-n)*(u-i)-(l-i)*(s-n)>=-e},pointBetween:function(t,r,a){var n=t[1]-r[1];var i=a[0]-r[0];var o=t[0]-r[0];var l=a[1]-r[1];var s=o*i+n*l;if(s<e)return false;var u=i*i+l*l;if(s-u>-e)return false;return true},pointsSameX:function(t,r){return Math.abs(t[0]-r[0])<e},pointsSameY:function(t,r){return Math.abs(t[1]-r[1])<e},pointsSame:function(e,r){return t.pointsSameX(e,r)&&t.pointsSameY(e,r)},pointsCompare:function(e,r){if(t.pointsSameX(e,r))return t.pointsSameY(e,r)?0:e[1]<r[1]?-1:1;return e[0]<r[0]?-1:1},pointsCollinear:function(t,r,a){var n=t[0]-r[0];var i=t[1]-r[1];var o=r[0]-a[0];var l=r[1]-a[1];return Math.abs(n*l-o*i)<e},linesIntersect:function(t,r,a,n){var i=r[0]-t[0];var o=r[1]-t[1];var l=n[0]-a[0];var s=n[1]-a[1];var u=i*s-o*l;if(Math.abs(u)<e)return false;var c=t[0]-a[0];var f=t[1]-a[1];var d=(l*f-s*c)/u;var v=(i*f-o*c)/u;var p={alongA:0,alongB:0,pt:[t[0]+d*i,t[1]+d*o]};if(d<=-e)p.alongA=-2;else if(d<e)p.alongA=-1;else if(d-1<=-e)p.alongA=0;else if(d-1<e)p.alongA=1;else p.alongA=2;if(v<=-e)p.alongB=-2;else if(v<e)p.alongB=-1;else if(v-1<=-e)p.alongB=0;else if(v-1<e)p.alongB=1;else p.alongB=2;return p},pointInsideRegion:function(t,r){var a=t[0];var n=t[1];var i=r[r.length-1][0];var o=r[r.length-1][1];var l=false;for(var s=0;s<r.length;s++){var u=r[s][0];var c=r[s][1];if(c-n>e!=o-n>e&&(i-u)*(n-c)/(o-c)+u-a>e)l=!l;i=u;o=c}return l}};return t}t.exports=a},{}],27:[function(e,t,r){var a={toPolygon:function(e,t){function r(t){if(t.length<=0)return e.segments({inverted:false,regions:[]});function r(t){var r=t.slice(0,t.length-1);return e.segments({inverted:false,regions:[r]})}var a=r(t[0]);for(var n=1;n<t.length;n++)a=e.selectDifference(e.combine(a,r(t[n])));return a}if(t.type==="Polygon"){return e.polygon(r(t.coordinates))}else if(t.type==="MultiPolygon"){var a=e.segments({inverted:false,regions:[]});for(var n=0;n<t.coordinates.length;n++)a=e.selectUnion(e.combine(a,r(t.coordinates[n])));return e.polygon(a)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function a(e,r){return t.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],r)}function n(e){return{region:e,children:[]}}var i=n(null);function o(e,t){for(var r=0;r<e.children.length;r++){var i=e.children[r];if(a(t,i.region)){o(i,t);return}}var l=n(t);for(var r=0;r<e.children.length;r++){var i=e.children[r];if(a(i.region,t)){l.children.push(i);e.children.splice(r,1);r--}}e.children.push(l)}for(var l=0;l<r.regions.length;l++){var s=r.regions[l];if(s.length<3)continue;o(i,s)}function u(e,t){var r=0;var a=e[e.length-1][0];var n=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var l=e[o][0];var s=e[o][1];i.push([l,s]);r+=s*a-l*n;a=l;n=s}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var c=[];function f(e){var t=[u(e.region,false)];c.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return u(e.region,true)}for(var l=0;l<i.children.length;l++)f(i.children[l]);if(c.length<=0)return{type:"Polygon",coordinates:[]};if(c.length==1)return{type:"Polygon",coordinates:c[0]};return{type:"MultiPolygon",coordinates:c}}};t.exports=a},{}],28:[function(e,t,r){var a=e("./linked-list");function n(e,t,r){function n(e,t){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,a){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var o=a.create();function l(e,r,a,n,i,o){var l=t.pointsCompare(r,i);if(l!==0)return l;if(t.pointsSame(a,o))return 0;if(e!==n)return e?1:-1;return t.pointAboveOrOnLine(a,n?i:o,n?o:i)?1:-1}function s(e,t){o.insertBefore(e,function(r){var a=l(e.isStart,e.pt,t,r.isStart,r.pt,r.other.pt);return a<0})}function u(e,t){var r=a.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function c(e,t,r){var n=a.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=n;s(n,e.pt)}function f(e,t){var r=u(e,t);c(r,e,t);return r}function d(e,t){if(r)r.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function v(e,t){var r=i(t,e.seg.end,e.seg);d(e,t);return f(r,e.primary)}function p(n,i){var l=a.create();function s(e,r){var a=e.seg.start;var n=e.seg.end;var i=r.seg.start;var o=r.seg.end;if(t.pointsCollinear(a,i,o)){if(t.pointsCollinear(n,i,o))return 1;return t.pointAboveOrOnLine(n,i,o)?1:-1}return t.pointAboveOrOnLine(a,i,o)?1:-1}function u(e){return l.findTransition(function(t){var r=s(e,t.ev);return r>0})}function c(e,a){var n=e.seg;var i=a.seg;var o=n.start;var l=n.end;var s=i.start;var u=i.end;if(r)r.checkIntersection(n,i);var c=t.linesIntersect(o,l,s,u);if(c===false){if(!t.pointsCollinear(o,l,s))return false;if(t.pointsSame(o,u)||t.pointsSame(l,s))return false;var f=t.pointsSame(o,s);var d=t.pointsSame(l,u);if(f&&d)return a;var p=!f&&t.pointBetween(o,s,u);var h=!d&&t.pointBetween(l,s,u);if(f){if(h){v(a,l)}else{v(e,u)}return a}else if(p){if(!d){if(h){v(a,l)}else{v(e,u)}}v(a,o)}}else{if(c.alongA===0){if(c.alongB===-1)v(e,s);else if(c.alongB===0)v(e,c.pt);else if(c.alongB===1)v(e,u)}if(c.alongB===0){if(c.alongA===-1)v(a,o);else if(c.alongA===0)v(a,c.pt);else if(c.alongA===1)v(a,l)}}return false}var f=[];while(!o.isEmpty()){var d=o.getHead();if(r)r.vert(d.pt[0]);if(d.isStart){if(r)r.segmentNew(d.seg,d.primary);var p=u(d);var h=p.before?p.before.ev:null;var g=p.after?p.after.ev:null;if(r){r.tempStatus(d.seg,h?h.seg:false,g?g.seg:false)}function y(){if(h){var e=c(d,h);if(e)return e}if(g)return c(d,g);return false}var m=y();if(m){if(e){var x;if(d.seg.myFill.below===null)x=true;else x=d.seg.myFill.above!==d.seg.myFill.below;if(x)m.seg.myFill.above=!m.seg.myFill.above}else{m.seg.otherFill=d.seg.myFill}if(r)r.segmentUpdate(m.seg);d.other.remove();d.remove()}if(o.getHead()!==d){if(r)r.rewind(d.seg);continue}if(e){var x;if(d.seg.myFill.below===null)x=true;else x=d.seg.myFill.above!==d.seg.myFill.below;if(!g){d.seg.myFill.below=n}else{d.seg.myFill.below=g.seg.myFill.above}if(x)d.seg.myFill.above=!d.seg.myFill.below;else d.seg.myFill.above=d.seg.myFill.below}else{if(d.seg.otherFill===null){var b;if(!g){b=d.primary?i:n}else{if(d.primary===g.primary)b=g.seg.otherFill.above;else b=g.seg.myFill.above}d.seg.otherFill={above:b,below:b}}}if(r){r.status(d.seg,h?h.seg:false,g?g.seg:false)}d.other.status=p.insert(a.node({ev:d}))}else{var _=d.status;if(_===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(l.exists(_.prev)&&l.exists(_.next))c(_.prev.ev,_.next.ev);if(r)r.statusRemove(_.ev.seg);_.remove();if(!d.primary){var w=d.seg.myFill;d.seg.myFill=d.seg.otherFill;d.seg.otherFill=w}f.push(d.seg)}o.getHead().remove()}if(r)r.done();return f}if(!e){return{calculate:function(e,t,r,a){e.forEach(function(e){f(i(e.start,e.end,e),true)});r.forEach(function(e){f(i(e.start,e.end,e),false)});return p(t,a)}}}return{addRegion:function(e){var r;var a=e[e.length-1];for(var i=0;i<e.length;i++){r=a;a=e[i];var o=t.pointsCompare(r,a);if(o===0)continue;f(n(o<0?r:a,o<0?a:r),true)}},calculate:function(e){return p(e,false)}}}t.exports=n},{"./linked-list":29}],29:[function(e,t,r){var a={create:function(){var e={root:{root:true,next:null},exists:function(t){if(t===null||t===e.root)return false;return true},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){var a=e.root;var n=e.root.next;while(n!==null){if(r(n)){t.prev=n.prev;t.next=n;n.prev.next=t;n.prev=t;return}a=n;n=n.next}a.next=t;t.prev=a;t.next=null},findTransition:function(t){var r=e.root;var a=e.root.next;while(a!==null){if(t(a))break;r=a;a=a.next}return{before:r===e.root?null:r,after:a,insert:function(e){e.prev=r;e.next=a;r.next=e;if(a!==null)a.prev=e;return e}}}};return e},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=a},{}],30:[function(e,t,r){function a(e,t,r){var a=[];var n=[];e.forEach(function(e){var i=e.start;var o=e.end;if(t.pointsSame(i,o)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(r)r.chainStart(e);var l={index:0,matches_head:false,matches_pt1:false};var s={index:0,matches_head:false,matches_pt1:false};var u=l;function c(e,t,r){u.index=e;u.matches_head=t;u.matches_pt1=r;if(u===l){u=s;return false}u=null;return true}for(var f=0;f<a.length;f++){var d=a[f];var v=d[0];var p=d[1];var h=d[d.length-1];var g=d[d.length-2];if(t.pointsSame(v,i)){if(c(f,true,true))break}else if(t.pointsSame(v,o)){if(c(f,true,false))break}else if(t.pointsSame(h,i)){if(c(f,false,true))break}else if(t.pointsSame(h,o)){if(c(f,false,false))break}}if(u===l){a.push([i,o]);if(r)r.chainNew(i,o);return}if(u===s){if(r)r.chainMatch(l.index);var y=l.index;var m=l.matches_pt1?o:i;var x=l.matches_head;var d=a[y];var b=x?d[0]:d[d.length-1];var _=x?d[1]:d[d.length-2];var w=x?d[d.length-1]:d[0];var k=x?d[d.length-2]:d[1];if(t.pointsCollinear(_,b,m)){if(x){if(r)r.chainRemoveHead(l.index,m);d.shift()}else{if(r)r.chainRemoveTail(l.index,m);d.pop()}b=_}if(t.pointsSame(w,m)){a.splice(y,1);if(t.pointsCollinear(k,w,b)){if(x){if(r)r.chainRemoveTail(l.index,b);d.pop()}else{if(r)r.chainRemoveHead(l.index,b);d.shift()}}if(r)r.chainClose(l.index);n.push(d);return}if(x){if(r)r.chainAddHead(l.index,m);d.unshift(m)}else{if(r)r.chainAddTail(l.index,m);d.push(m)}return}function M(e){if(r)r.chainReverse(e);a[e].reverse()}function T(e,n){var i=a[e];var o=a[n];var l=i[i.length-1];var s=i[i.length-2];var u=o[0];var c=o[1];if(t.pointsCollinear(s,l,u)){if(r)r.chainRemoveTail(e,l);i.pop();l=s}if(t.pointsCollinear(l,u,c)){if(r)r.chainRemoveHead(n,u);o.shift()}if(r)r.chainJoin(e,n);a[e]=i.concat(o);a.splice(n,1)}var A=l.index;var L=s.index;if(r)r.chainConnect(A,L);var S=a[A].length<a[L].length;if(l.matches_head){if(s.matches_head){if(S){M(A);T(A,L)}else{M(L);T(L,A)}}else{T(L,A)}}else{if(s.matches_head){T(A,L)}else{if(S){M(A);T(L,A)}else{M(L);T(A,L)}}}});return n}t.exports=a},{}],31:[function(e,t,r){function a(e,t,r){var a=[];e.forEach(function(e){var n=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(t[n]!==0){a.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:t[n]===1,below:t[n]===2},otherFill:null})}});if(r)r.selected(a);return a}var n={union:function(e,t){return a(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return a(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return a(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return a(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return a(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=n},{}],32:[function(e,t,r){var a=t.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=l}}catch(e){i=l}})();function s(e){if(n===setTimeout){return setTimeout(e,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function u(e){if(i===clearTimeout){return clearTimeout(e)}if((i===l||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var c=[];var f=false;var d;var v=-1;function p(){if(!f||!d){return}f=false;if(d.length){c=d.concat(c)}else{v=-1}if(c.length){h()}}function h(){if(f){return}var e=s(p);f=true;var t=c.length;while(t){d=c;c=[];while(++v<t){if(d){d[v].run()}}v=-1;t=c.length}d=null;f=false;u(e)}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new g(e,t));if(c.length===1&&!f){s(h)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=true;a.env={};a.argv=[];a.version="";a.versions={};function y(){}a.on=y;a.addListener=y;a.once=y;a.off=y;a.removeListener=y;a.removeAllListeners=y;a.emit=y;a.prependListener=y;a.prependOnceListener=y;a.listeners=function(e){return[]};a.binding=function(e){throw new Error("process.binding is not supported")};a.cwd=function(){return"/"};a.chdir=function(e){throw new Error("process.chdir is not supported")};a.umask=function(){return 0}},{}],33:[function(t,r,a){(function(t){var a=/^\s+/,n=/\s+$/,i=0,o=t.round,l=t.min,s=t.max,u=t.random;function c(e,t){e=e?e:"";t=t||{};if(e instanceof c){return e}if(!(this instanceof c)){return new c(e,t)}var r=f(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var r,a,n,i,o,l;r=e.r/255;a=e.g/255;n=e.b/255;if(r<=.03928){i=r/12.92}else{i=t.pow((r+.055)/1.055,2.4)}if(a<=.03928){o=a/12.92}else{o=t.pow((a+.055)/1.055,2.4)}if(n<=.03928){l=n/12.92}else{l=t.pow((n+.055)/1.055,2.4)}return.2126*i+.7152*o+.0722*l},setAlpha:function(e){this._a=N(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+a+"%)":"hsva("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=v(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=v(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),a=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+a+"%)":"hsla("+t+", "+r+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return y(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return m(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(R(this._r,255)*100)+"%",g:o(R(this._g,255)*100)+"%",b:o(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%)":"rgba("+o(R(this._r,255)*100)+"%, "+o(R(this._g,255)*100)+"%, "+o(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return I[y(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+x(this._r,this._g,this._b,this._a);var r=t;var a=this._gradientType?"GradientType = 1, ":"";if(e){var n=c(e);r="#"+x(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var a=this._a<1&&this._a>=0;var n=!t&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(n){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(A,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(O,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}};c.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var a in e){if(e.hasOwnProperty(a)){if(a==="a"){r[a]=e[a]}else{r[a]=V(e[a])}}}e=r}return c(e,t)};function f(e){var t={r:0,g:0,b:0};var r=1;var a=null;var n=null;var i=null;var o=false;var u=false;if(typeof e=="string"){e=X(e)}if(typeof e=="object"){if(Y(e.r)&&Y(e.g)&&Y(e.b)){t=d(e.r,e.g,e.b);o=true;u=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(Y(e.h)&&Y(e.s)&&Y(e.v)){a=V(e.s);n=V(e.v);t=g(e.h,a,n);o=true;u="hsv"}else if(Y(e.h)&&Y(e.s)&&Y(e.l)){a=V(e.s);i=V(e.l);t=p(e.h,a,i);o=true;u="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=N(r);return{ok:o,format:e.format||u,r:l(255,s(t.r,0)),g:l(255,s(t.g,0)),b:l(255,s(t.b,0)),a:r}}function d(e,t,r){return{r:R(e,255)*255,g:R(t,255)*255,b:R(r,255)*255}}function v(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=s(e,t,r),n=l(e,t,r);var i,o,u=(a+n)/2;if(a==n){i=o=0}else{var c=a-n;o=u>.5?c/(2-a-n):c/(a+n);switch(a){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:o,l:u}}function p(e,t,r){var a,n,i;e=R(e,360);t=R(t,100);r=R(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){a=n=i=r}else{var l=r<.5?r*(1+t):r+t-r*t;var s=2*r-l;a=o(s,l,e+1/3);n=o(s,l,e);i=o(s,l,e-1/3)}return{r:a*255,g:n*255,b:i*255}}function h(e,t,r){e=R(e,255);t=R(t,255);r=R(r,255);var a=s(e,t,r),n=l(e,t,r);var i,o,u=a;var c=a-n;o=a===0?0:c/a;if(a==n){i=0}else{switch(a){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:o,v:u}}function g(e,r,a){e=R(e,360)*6;r=R(r,100);a=R(a,100);var n=t.floor(e),i=e-n,o=a*(1-r),l=a*(1-i*r),s=a*(1-(1-i)*r),u=n%6,c=[a,l,o,o,s,a][u],f=[s,a,a,l,o,o][u],d=[o,o,s,a,a,l][u];return{r:c*255,g:f*255,b:d*255}}function y(e,t,r,a){var n=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];if(a&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)){return n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)}return n.join("")}function m(e,t,r,a,n){var i=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16)),H(U(a))];if(n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function x(e,t,r,a){var n=[H(U(a)),H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];return n.join("")}c.equals=function(e,t){if(!e||!t){return false}return c(e).toRgbString()==c(t).toRgbString()};c.random=function(){return c.fromRatio({r:u(),g:u(),b:u()})};function b(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s-=t/100;r.s=F(r.s);return c(r)}function _(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s+=t/100;r.s=F(r.s);return c(r)}function w(e){return c(e).desaturate(100)}function k(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l+=t/100;r.l=F(r.l);return c(r)}function M(e,t){t=t===0?0:t||10;var r=c(e).toRgb();r.r=s(0,l(255,r.r-o(255*-(t/100))));r.g=s(0,l(255,r.g-o(255*-(t/100))));r.b=s(0,l(255,r.b-o(255*-(t/100))));return c(r)}function T(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l-=t/100;r.l=F(r.l);return c(r)}function A(e,t){var r=c(e).toHsl();var a=(r.h+t)%360;r.h=a<0?360+a:a;return c(r)}function L(e){var t=c(e).toHsl();t.h=(t.h+180)%360;return c(t)}function S(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+120)%360,s:t.s,l:t.l}),c({h:(r+240)%360,s:t.s,l:t.l})]}function C(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+90)%360,s:t.s,l:t.l}),c({h:(r+180)%360,s:t.s,l:t.l}),c({h:(r+270)%360,s:t.s,l:t.l})]}function O(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+72)%360,s:t.s,l:t.l}),c({h:(r+216)%360,s:t.s,l:t.l})]}function z(e,t,r){t=t||6;r=r||30;var a=c(e).toHsl();var n=360/r;var i=[c(e)];for(a.h=(a.h-(n*t>>1)+720)%360;--t;){a.h=(a.h+n)%360;i.push(c(a))}return i}function P(e,t){t=t||6;var r=c(e).toHsv();var a=r.h,n=r.s,i=r.v;var o=[];var l=1/t;while(t--){o.push(c({h:a,s:n,v:i}));i=(i+l)%1}return o}c.mix=function(e,t,r){r=r===0?0:r||50;var a=c(e).toRgb();var n=c(t).toRgb();var i=r/100;var o={r:(n.r-a.r)*i+a.r,g:(n.g-a.g)*i+a.g,b:(n.b-a.b)*i+a.b,a:(n.a-a.a)*i+a.a};return c(o)};c.readability=function(e,r){var a=c(e);var n=c(r);return(t.max(a.getLuminance(),n.getLuminance())+.05)/(t.min(a.getLuminance(),n.getLuminance())+.05)};c.isReadable=function(e,t,r){var a=c.readability(e,t);var n,i;i=false;n=W(r);switch(n.level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7;break}return i};c.mostReadable=function(e,t,r){var a=null;var n=0;var i;var o,l,s;r=r||{};o=r.includeFallbackColors;l=r.level;s=r.size;for(var u=0;u<t.length;u++){i=c.readability(e,t[u]);if(i>n){n=i;a=c(t[u])}}if(c.isReadable(e,a,{level:l,size:s})||!o){return a}else{r.includeFallbackColors=false;return c.mostReadable(e,["#fff","#000"],r)}};var D=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var I=c.hexNames=E(D);function E(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function N(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function R(e,r){if(j(e)){e="100%"}var a=q(e);e=l(r,s(0,parseFloat(e)));if(a){e=parseInt(e*r,10)/100}if(t.abs(e-r)<1e-6){return 1}return e%r/parseFloat(r)}function F(e){return l(1,s(0,e))}function B(e){return parseInt(e,16)}function j(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function q(e){return typeof e==="string"&&e.indexOf("%")!=-1}function H(e){return e.length==1?"0"+e:""+e}function V(e){if(e<=1){e=e*100+"%"}return e}function U(e){return t.round(parseFloat(e)*255).toString(16)}function G(e){return B(e)/255}var Z=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+a),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+a),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+a),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(e){return!!Z.CSS_UNIT.exec(e)}function X(e){e=e.replace(a,"").replace(n,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=Z.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=Z.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=Z.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=Z.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=Z.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=Z.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=Z.hex8.exec(e)){return{r:B(r[1]),g:B(r[2]),b:B(r[3]),a:G(r[4]),format:t?"name":"hex8"}}if(r=Z.hex6.exec(e)){return{r:B(r[1]),g:B(r[2]),b:B(r[3]),format:t?"name":"hex"}}if(r=Z.hex4.exec(e)){return{r:B(r[1]+""+r[1]),g:B(r[2]+""+r[2]),b:B(r[3]+""+r[3]),a:G(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=Z.hex3.exec(e)){return{r:B(r[1]+""+r[1]),g:B(r[2]+""+r[2]),b:B(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof r!=="undefined"&&r.exports){r.exports=c}else if(typeof e==="function"&&e.amd){e(function(){return c})}else{window.tinycolor=c}})(Math)},{}],34:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],35:[function(e,t,r){"use strict";var a=e("./arrow_paths");var n=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:n({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:a.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":203,"../../plots/cartesian/constants":218,"../../plots/font_attributes":239,"./arrow_paths":34}],36:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout,l=a.filterVisible(r.annotations);if(!l.length||!t._fullData.length)return;var s={};l.forEach(function(e){s[e.xref]=1;s[e.yref]=1});for(var u in s){var c=n.getFromId(t,u);if(c&&c.autorange){return a.syncOrAsync([i,o],t)}}};function o(e){var t=e._fullLayout;a.filterVisible(t.annotations).forEach(function(t){var r=n.getFromId(e,t.xref),a=n.getFromId(e,t.yref),i=3*t.arrowsize*t.arrowwidth||0,o=3*t.startarrowsize*t.arrowwidth||0;var l,s,u,c;if(r&&r.autorange){l=i+t.xshift;s=i-t.xshift;u=o+t.xshift;c=o-t.xshift;if(t.axref===t.xref){n.expand(r,[r.r2c(t.x)],{ppadplus:l,ppadminus:s});n.expand(r,[r.r2c(t.ax)],{ppadplus:Math.max(t._xpadplus,u),ppadminus:Math.max(t._xpadminus,c)})}else{u=t.ax?u+t.ax:u;c=t.ax?c-t.ax:c;n.expand(r,[r.r2c(t.x)],{ppadplus:Math.max(t._xpadplus,l,u),ppadminus:Math.max(t._xpadminus,s,c)})}}if(a&&a.autorange){l=i-t.yshift;s=i+t.yshift;u=o-t.yshift;c=o+t.yshift;if(t.ayref===t.yref){n.expand(a,[a.r2c(t.y)],{ppadplus:l,ppadminus:s});n.expand(a,[a.r2c(t.ay)],{ppadplus:Math.max(t._ypadplus,u),ppadminus:Math.max(t._ypadminus,c)})}else{u=t.ay?u+t.ay:u;c=t.ay?c-t.ay:c;n.expand(a,[a.r2c(t.y)],{ppadplus:Math.max(t._ypadplus,l,u),ppadminus:Math.max(t._ypadminus,s,c)})}}})}},{"../../lib":169,"../../plots/cartesian/axes":213,"./draw":41}],37:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../registry");var i=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:o,onClick:l};function o(e,t){var r=s(e,t);return r.on.length>0||r.explicitOff.length>0}function l(e,t){var r=s(e,t);var o=r.on;var l=r.off.concat(r.explicitOff);var u={};var c=e._fullLayout.annotations;var f,d;if(!(o.length||l.length))return;for(f=0;f<o.length;f++){d=i(e.layout,"annotations",c[o[f]]);d.modifyItem("visible",true);a.extendFlat(u,d.getUpdateObj())}for(f=0;f<l.length;f++){d=i(e.layout,"annotations",c[l[f]]);d.modifyItem("visible",false);a.extendFlat(u,d.getUpdateObj())}return n.call("update",e,{},u)}function s(e,t){var r=e._fullLayout.annotations,a=[],n=[],i=[],o=(t||[]).length;var l,s,c,f,d,v,p,h;for(l=0;l<r.length;l++){c=r[l];f=c.clicktoshow;if(f){for(s=0;s<o;s++){d=t[s];v=d.xaxis;p=d.yaxis;if(v._id===c.xref&&p._id===c.yref&&v.d2r(d.x)===u(c._xclick,v)&&p.d2r(d.y)===u(c._yclick,p)){if(c.visible){if(f==="onout")h=n;else h=i}else{h=a}h.push(l);break}}if(s===o){if(c.visible&&f==="onout")n.push(l)}}}return{on:a,off:n,explicitOff:i}}function u(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":169,"../../plot_api/plot_template":203,"../../registry":261}],38:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../color");t.exports=function e(t,r,i,o){o("opacity");var l=o("bgcolor");var s=o("bordercolor");var u=n.opacity(s);o("borderpad");var c=o("borderwidth");var f=o("showarrow");o("text",f?" ":i._dfltTitle.annotation);o("textangle");a.coerceFont(o,"font",i.font);o("width");o("align");var d=o("height");if(d)o("valign");if(f){var v=o("arrowside");var p;var h;if(v.indexOf("end")!==-1){p=o("arrowhead");h=o("arrowsize")}if(v.indexOf("start")!==-1){o("startarrowhead",p);o("startarrowsize",h)}o("arrowcolor",u?r.bordercolor:n.defaultLine);o("arrowwidth",(u&&c||1)*2);o("standoff");o("startstandoff")}var g=o("hovertext");var y=i.hoverlabel||{};if(g){var m=o("hoverlabel.bgcolor",y.bgcolor||(n.opacity(l)?n.rgb(l):n.defaultLine));var x=o("hoverlabel.bordercolor",y.bordercolor||n.contrast(m));a.coerceFont(o,"hoverlabel.font",{family:y.font.family,size:y.font.size,color:y.font.color||x})}o("captureevents",!!g)}},{"../../lib":169,"../color":50}],39:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var l=i==="log"&&r.type==="linear",s=i==="linear"&&r.type==="log";if(!(l||s))return;var u=t._fullLayout.annotations,c=r._id.charAt(0),f,d;function v(e){var t=f[e],i=null;if(l)i=n(t,r.range);else i=Math.pow(10,t);if(!a(i))i=null;o(d+e,i)}for(var p=0;p<u.length;p++){f=u[p];d="annotations["+p+"].";if(f[c+"ref"]===r._id)v(c);if(f["a"+c+"ref"]===r._id)v("a"+c)}}},{"../../lib/to_log_range":192,"fast-isnumeric":18}],40:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./common_defaults");var l=e("./attributes");t.exports=function e(t,r){i(t,r,{name:"annotations",handleItemDefaults:s})};function s(e,t,r){function i(r,n){return a.coerce(e,t,l,r,n)}var s=i("visible");var u=i("clicktoshow");if(!(s||u))return;o(e,t,r,i);var c=t.showarrow;var f=["x","y"],d=[-10,-30],v={_fullLayout:r};for(var p=0;p<2;p++){var h=f[p];var g=n.coerceRef(e,t,v,h,"","paper");n.coercePosition(t,v,i,g,h,.5);if(c){var y="a"+h,m=n.coerceRef(e,t,v,y,"pixel");if(m!=="pixel"&&m!==g){m=t[y]="pixel"}var x=m==="pixel"?d[p]:.4;n.coercePosition(t,v,i,m,y,x)}i(h+"anchor");i(h+"shift")}a.noneOrAll(e,t,["x","y"]);if(c){a.noneOrAll(e,t,["ax","ay"])}if(u){var b=i("xclick");var _=i("yclick");t._xclick=b===undefined?t.x:n.cleanPosition(b,v,t.xref);t._yclick=_===undefined?t.y:n.cleanPosition(_,v,t.yref)}}},{"../../lib":169,"../../plots/array_container_defaults":209,"../../plots/cartesian/axes":213,"./attributes":35,"./common_defaults":38}],41:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var l=e("../../plots/cartesian/axes");var s=e("../color");var u=e("../drawing");var c=e("../fx");var f=e("../../lib/svg_text_utils");var d=e("../../lib/setcursor");var v=e("../dragelement");var p=e("../../plot_api/plot_template").arrayEditor;var h=e("./draw_arrow_head");t.exports={draw:g,drawOne:y,drawRaw:m};function g(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){y(e,r)}}return i.previousPromises(e)}function y(e,t){var r=e._fullLayout;var a=r.annotations[t]||{};var n=l.getFromId(e,a.xref);var i=l.getFromId(e,a.yref);m(e,a,t,false,n,i)}function m(e,t,r,i,l,g){var y=e._fullLayout;var m=e._fullLayout._size;var x=e._context.edits;var b,_;if(i){b="annotation-"+i;_=i+".annotations"}else{b="annotation";_="annotations"}var w=p(e.layout,_,t);var k=w.modifyBase;var M=w.modifyItem;var T=w.getUpdateObj;y._infolayer.selectAll("."+b+'[data-index="'+r+'"]').remove();var A="clip"+y._uid+"_ann"+r;if(!t._input||t.visible===false){a.selectAll("#"+A).remove();return}var L={x:{},y:{}},S=+t.textangle||0;var C=y._infolayer.append("g").classed(b,true).attr("data-index",String(r)).style("opacity",t.opacity);var O=C.append("g").classed("annotation-text-g",true);var z=x[t.showarrow?"annotationTail":"annotationPosition"];var P=t.captureevents||x.annotationText||z;var D=O.append("g").style("pointer-events",P?"all":null).call(d,"pointer").on("click",function(){e._dragging=false;var n={index:r,annotation:t._input,fullAnnotation:t,event:a.event};if(i){n.subplotId=i}e.emit("plotly_clickannotation",n)});if(t.hovertext){D.on("mouseover",function(){var r=t.hoverlabel;var a=r.font;var n=this.getBoundingClientRect();var i=e.getBoundingClientRect();c.loneHover({x0:n.left-i.left,x1:n.right-i.left,y:(n.top+n.bottom)/2-i.top,text:t.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:a.family,fontSize:a.size,fontColor:a.color},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:e})}).on("mouseout",function(){c.loneUnhover(y._hoverlayer.node())})}var I=t.borderwidth,E=t.borderpad,N=I+E;var R=D.append("rect").attr("class","bg").style("stroke-width",I+"px").call(s.stroke,t.bordercolor).call(s.fill,t.bgcolor);var F=t.width||t.height;var B=y._topclips.selectAll("#"+A).data(F?[0]:[]);B.enter().append("clipPath").classed("annclip",true).attr("id",A).append("rect");B.exit().remove();var j=t.font;var q=D.append("text").classed("annotation-text",true).text(t.text);function H(r){r.call(u.font,j).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"});f.convertToTspans(r,e,V);return r}function V(){var r=q.selectAll("a");if(r.size()===1&&r.text()===q.text()){var a=D.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"});a.node().appendChild(R.node())}var c=D.select(".annotation-text-math-group");var p=!c.empty();var b=u.bBox((p?c:q).node());var _=b.width;var w=b.height;var P=t.width||_;var E=t.height||w;var j=Math.round(P+2*N);var H=Math.round(E+2*N);t._w=P;t._h=E;function V(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var U=false;var G=["x","y"];for(var Z=0;Z<G.length;Z++){var Y=G[Z],X=t[Y+"ref"]||Y,W=t["a"+Y+"ref"],Q={x:l,y:g}[Y],J=(S+(Y==="x"?0:-90))*Math.PI/180,$=j*Math.cos(J),K=H*Math.sin(J),ee=Math.abs($)+Math.abs(K),te=t[Y+"anchor"],re=t[Y+"shift"]*(Y==="x"?1:-1),ae=L[Y],ne,ie,oe,le,se;if(Q){var ue=Q.r2fraction(t[Y]);if((e._dragging||!Q.autorange)&&(ue<0||ue>1)){if(W===X){ue=Q.r2fraction(t["a"+Y]);if(ue<0||ue>1){U=true}}else{U=true}if(U)continue}ne=Q._offset+Q.r2p(t[Y]);le=.5}else{if(Y==="x"){oe=t[Y];ne=m.l+m.w*oe}else{oe=1-t[Y];ne=m.t+m.h*oe}le=t.showarrow?.5:oe}if(t.showarrow){ae.head=ne;var ce=t["a"+Y];se=$*V(.5,t.xanchor)-K*V(.5,t.yanchor);if(W===X){ae.tail=Q._offset+Q.r2p(ce);ie=se}else{ae.tail=ne+ce;ie=se+ce}ae.text=ae.tail+se;var fe=y[Y==="x"?"width":"height"];if(X==="paper"){ae.head=o.constrain(ae.head,1,fe-1)}if(W==="pixel"){var de=-Math.max(ae.tail-3,ae.text),ve=Math.min(ae.tail+3,ae.text)-fe;if(de>0){ae.tail+=de;ae.text+=de}else if(ve>0){ae.tail-=ve;ae.text-=ve}}ae.tail+=re;ae.head+=re}else{se=ee*V(le,te);ie=se;ae.text=ne+se}ae.text+=re;se+=re;ie+=re;t["_"+Y+"padplus"]=ee/2+ie;t["_"+Y+"padminus"]=ee/2-ie;t["_"+Y+"size"]=ee;t["_"+Y+"shift"]=se}if(U){D.remove();return}var pe=0;var he=0;if(t.align!=="left"){pe=(P-_)*(t.align==="center"?.5:1)}if(t.valign!=="top"){he=(E-w)*(t.valign==="middle"?.5:1)}if(p){c.select("svg").attr({x:N+pe-1,y:N+he}).call(u.setClipUrl,F?A:null)}else{var ge=N+he-b.top;var ye=N+pe-b.left;q.call(f.positionText,ye,ge).call(u.setClipUrl,F?A:null)}B.select("rect").call(u.setRect,N,N,P,E);R.call(u.setRect,I/2,I/2,j-I,H-I);D.call(u.setTranslate,Math.round(L.x.text-j/2),Math.round(L.y.text-H/2));O.attr({transform:"rotate("+S+","+L.x.text+","+L.y.text+")"});var me=function(r,a){C.selectAll(".annotation-arrow-g").remove();var c=L.x.head,f=L.y.head,d=L.x.tail+r,p=L.y.tail+a,y=L.x.text+r,b=L.y.text+a,_=o.rotationXYMatrix(S,y,b),w=o.apply2DTransform(_),A=o.apply2DTransform2(_),z=+R.attr("width"),P=+R.attr("height"),I=y-.5*z,E=I+z,N=b-.5*P,F=N+P,B=[[I,N,I,F],[I,F,E,F],[E,F,E,N],[E,N,I,N]].map(A);if(B.reduce(function(e,t){return e^!!o.segmentsIntersect(c,f,c+1e6,f+1e6,t[0],t[1],t[2],t[3])},false)){return}B.forEach(function(e){var t=o.segmentsIntersect(d,p,c,f,e[0],e[1],e[2],e[3]);if(t){d=t.x;p=t.y}});var j=t.arrowwidth,q=t.arrowcolor,H=t.arrowside;var V=C.append("g").style({opacity:s.opacity(q)}).classed("annotation-arrow-g",true);var U=V.append("path").attr("d","M"+d+","+p+"L"+c+","+f).style("stroke-width",j+"px").call(s.stroke,s.rgb(q));h(U,H,t);if(x.annotationPosition&&U.node().parentNode&&!i){var G=c;var Z=f;if(t.standoff){var Y=Math.sqrt(Math.pow(c-d,2)+Math.pow(f-p,2));G+=t.standoff*(d-c)/Y;Z+=t.standoff*(p-f)/Y}var X=V.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-G)+","+(p-Z),transform:"translate("+G+","+Z+")"}).style("stroke-width",j+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");var W,Q;v.init({element:X.node(),gd:e,prepFn:function(){var e=u.getTranslate(D);W=e.x;Q=e.y;if(l&&l.autorange){k(l._name+".autorange",true)}if(g&&g.autorange){k(g._name+".autorange",true)}},moveFn:function(e,r){var a=w(W,Q),n=a[0]+e,i=a[1]+r;D.call(u.setTranslate,n,i);M("x",l?l.p2r(l.r2p(t.x)+e):t.x+e/m.w);M("y",g?g.p2r(g.r2p(t.y)+r):t.y-r/m.h);if(t.axref===t.xref){M("ax",l.p2r(l.r2p(t.ax)+e))}if(t.ayref===t.yref){M("ay",g.p2r(g.r2p(t.ay)+r))}V.attr("transform","translate("+e+","+r+")");O.attr({transform:"rotate("+S+","+n+","+i+")"})},doneFn:function(){n.call("relayout",e,T());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}};if(t.showarrow)me(0,0);if(z){var xe;v.init({element:D.node(),gd:e,prepFn:function(){xe=O.attr("transform")},moveFn:function(e,r){var a="pointer";if(t.showarrow){if(t.axref===t.xref){M("ax",l.p2r(l.r2p(t.ax)+e))}else{M("ax",t.ax+e)}if(t.ayref===t.yref){M("ay",g.p2r(g.r2p(t.ay)+r))}else{M("ay",t.ay+r)}me(e,r)}else if(!i){var n,o;if(l){n=l.p2r(l.r2p(t.x)+e)}else{var s=t._xsize/m.w,u=t.x+(t._xshift-t.xshift)/m.w-s/2;n=v.align(u+e/m.w,s,0,1,t.xanchor)}if(g){o=g.p2r(g.r2p(t.y)+r)}else{var c=t._ysize/m.h,f=t.y-(t._yshift+t.yshift)/m.h-c/2;o=v.align(f-r/m.h,c,0,1,t.yanchor)}M("x",n);M("y",o);if(!l||!g){a=v.getCursor(l?.5:n,g?.5:o,t.xanchor,t.yanchor)}}else return;O.attr({transform:"translate("+e+","+r+")"+xe});d(D,a)},doneFn:function(){d(D);n.call("relayout",e,T());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}}if(x.annotationText){q.call(f.makeEditable,{delegate:D,gd:e}).call(H).on("edit",function(r){t.text=r;this.call(H);M("text",r);if(l&&l.autorange){k(l._name+".autorange",true)}if(g&&g.autorange){k(g._name+".autorange",true)}n.call("relayout",e,T())})}else q.call(H)}},{"../../lib":169,"../../lib/setcursor":188,"../../lib/svg_text_utils":190,"../../plot_api/plot_template":203,"../../plots/cartesian/axes":213,"../../plots/plots":245,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"../fx":92,"./draw_arrow_head":42,d3:15}],42:[function(e,t,r){"use strict";var a=e("d3");var n=e("../color");var i=e("./arrow_paths");t.exports=function e(t,r,o){var l=t.node();var s=i[o.arrowhead||0];var u=i[o.startarrowhead||0];var c=(o.arrowwidth||1)*(o.arrowsize||1);var f=(o.arrowwidth||1)*(o.startarrowsize||1);var d=r.indexOf("start")>=0;var v=r.indexOf("end")>=0;var p=s.backoff*c+o.standoff;var h=u.backoff*f+o.startstandoff;var g,y,m,x;if(l.nodeName==="line"){g={x:+t.attr("x1"),y:+t.attr("y1")};y={x:+t.attr("x2"),y:+t.attr("y2")};var b=g.x-y.x;var _=g.y-y.y;m=Math.atan2(_,b);x=m+Math.PI;if(p&&h){if(p+h>Math.sqrt(b*b+_*_)){D();return}}if(p){if(p*p>b*b+_*_){D();return}var w=p*Math.cos(m),k=p*Math.sin(m);y.x+=w;y.y+=k;t.attr({x2:y.x,y2:y.y})}if(h){if(h*h>b*b+_*_){D();return}var M=h*Math.cos(m),T=h*Math.sin(m);g.x-=M;g.y-=T;t.attr({x1:g.x,y1:g.y})}}else if(l.nodeName==="path"){var A=l.getTotalLength(),L="";if(A<p+h){D();return}var S=l.getPointAtLength(0);var C=l.getPointAtLength(.1);m=Math.atan2(S.y-C.y,S.x-C.x);g=l.getPointAtLength(Math.min(h,A));L="0px,"+h+"px,";var O=l.getPointAtLength(A);var z=l.getPointAtLength(A-.1);x=Math.atan2(O.y-z.y,O.x-z.x);y=l.getPointAtLength(Math.max(0,A-p));var P=L?h+p:p;L+=A-P+"px,"+A+"px";t.style("stroke-dasharray",L)}function D(){t.style("stroke-dasharray","0px,100px")}function I(e,r,i,s){if(!e.path)return;if(e.noRotate)i=0;a.select(l.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+r.x+","+r.y+")"+(i?"rotate("+i*180/Math.PI+")":"")+"scale("+s+")"}).style({fill:n.rgb(o.arrowcolor),"stroke-width":0})}if(d)I(u,g,m,f);if(v)I(s,y,x,c)}},{"../color":50,"./arrow_paths":34,d3:15}],43:[function(e,t,r){"use strict";var a=e("./draw");var n=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne,drawRaw:a.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":223,"./attributes":35,"./calc_autorange":36,"./click":37,"./convert_coords":39,"./defaults":40,"./draw":41}],44:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=n(i("annotation",{visible:a.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:a.xanchor,xshift:a.xshift,yanchor:a.yanchor,yshift:a.yshift,text:a.text,textangle:a.textangle,font:a.font,width:a.width,height:a.height,opacity:a.opacity,align:a.align,valign:a.valign,bgcolor:a.bgcolor,bordercolor:a.bordercolor,borderpad:a.borderpad,borderwidth:a.borderwidth,showarrow:a.showarrow,arrowcolor:a.arrowcolor,arrowhead:a.arrowhead,startarrowhead:a.startarrowhead,arrowside:a.arrowside,arrowsize:a.arrowsize,startarrowsize:a.startarrowsize,arrowwidth:a.arrowwidth,standoff:a.standoff,startstandoff:a.startstandoff,hovertext:a.hovertext,hoverlabel:a.hoverlabel,captureevents:a.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":196,"../../plot_api/plot_template":203,"../annotations/attributes":35}],45:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var a=r.annotations;for(var n=0;n<a.length;n++){i(a[n],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var i=r.domain;var o=t.fullLayout._size;var l={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};a.extendFlat(e._xa,l);n.setConvert(e._xa);e._xa._offset=o.l+i.x[0]*o.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(i.x[1]-i.x[0])};e._ya={};a.extendFlat(e._ya,l);n.setConvert(e._ya);e._ya._offset=o.t+(1-i.y[1])*o.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(i.y[1]-i.y[0])}}},{"../../lib":169,"../../plots/cartesian/axes":213}],46:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("../annotations/common_defaults");var l=e("./attributes");t.exports=function e(t,r,a){i(t,r,{name:"annotations",handleItemDefaults:s,fullLayout:a.fullLayout})};function s(e,t,r,i){function s(r,n){return a.coerce(e,t,l,r,n)}function u(e){var a=e+"axis";var i={_fullLayout:{}};i._fullLayout[a]=r[a];return n.coercePosition(t,i,s,e,e,.5)}var c=s("visible");if(!c)return;o(e,t,i.fullLayout,s);u("x");u("y");u("z");a.noneOrAll(e,t,["x","y","z"]);t.xref="x";t.yref="y";t.zref="z";s("xanchor");s("yanchor");s("xshift");s("yshift");if(t.showarrow){t.axref="pixel";t.ayref="pixel";s("ax",-10);s("ay",-30);a.noneOrAll(e,t,["ax","ay"])}}},{"../../lib":169,"../../plots/array_container_defaults":209,"../../plots/cartesian/axes":213,"../annotations/common_defaults":38,"./attributes":44}],47:[function(e,t,r){"use strict";var a=e("../annotations/draw").drawRaw;var n=e("../../plots/gl3d/project");var i=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var o=t.dataScale;var l=r.annotations;for(var s=0;s<l.length;s++){var u=l[s];var c=false;for(var f=0;f<3;f++){var d=i[f];var v=u[d];var p=r[d+"axis"];var h=p.r2fraction(v);if(h<0||h>1){c=true;break}}if(c){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove()}else{u._pdata=n(t.glplot.cameraParams,[r.xaxis.r2l(u.x)*o[0],r.yaxis.r2l(u.y)*o[1],r.zaxis.r2l(u.z)*o[2]]);a(t.graphDiv,u,s,t.id,u._xa,u._ya)}}}},{"../../plots/gl3d/project":242,"../annotations/draw":41}],48:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:i,convert:e("./convert"),draw:e("./draw")};function i(e,t){var r=a.subplotsRegistry.gl3d;if(!r)return;var i=r.attrRegex;var o=Object.keys(e);for(var l=0;l<o.length;l++){var s=o[l];if(i.test(s)&&(e[s].annotations||[]).length){n.pushUnique(t._basePlotModules,r);n.pushUnique(t._subplots.gl3d,s)}}}},{"../../lib":169,"../../registry":261,"./attributes":44,"./convert":45,"./defaults":46,"./draw":47}],49:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],50:[function(e,t,r){"use strict";var a=e("tinycolor2");var n=e("fast-isnumeric");var i=t.exports={};var o=e("./attributes");i.defaults=o.defaults;var l=i.defaultLine=o.defaultLine;i.lightLine=o.lightLine;var s=i.background=o.background;i.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};i.rgb=function(e){return i.tinyRGB(a(e))};i.opacity=function(e){return e?a(e).getAlpha():0};i.addOpacity=function(e,t){var r=a(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};i.combine=function(e,t){var r=a(e).toRgb();if(r.a===1)return a(e).toRgbString();var n=a(t||s).toRgb(),i=n.a===1?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},o={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return a(o).toRgbString()};i.contrast=function(e,t,r){var n=a(e);if(n.getAlpha()!==1)n=a(i.combine(e,s));var o=n.isDark()?t?n.lighten(t):s:r?n.darken(r):l;return o.toString()};i.stroke=function(e,t){var r=a(t);e.style({stroke:i.tinyRGB(r),"stroke-opacity":r.getAlpha()})};i.fill=function(e,t){var r=a(t);e.style({fill:i.tinyRGB(r),"fill-opacity":r.getAlpha()})};i.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e),r,a,n,o;for(r=0;r<t.length;r++){n=t[r];o=e[n];if(n.substr(n.length-5)==="color"){if(Array.isArray(o)){for(a=0;a<o.length;a++)o[a]=u(o[a])}else e[n]=u(o)}else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(o)){for(a=0;a<o.length;a++){if(Array.isArray(o[a]))o[a][1]=u(o[a][1])}}else if(Array.isArray(o)){var l=o[0];if(!Array.isArray(l)&&l&&typeof l==="object"){for(a=0;a<o.length;a++)i.clean(o[a])}}else if(o&&typeof o==="object")i.clean(o)}};function u(e){if(n(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var a=r[1].trim().split(/\s*[\s,]\s*/),i=t.charAt(3)==="a"&&a.length===4;if(!i&&a.length!==3)return e;for(var o=0;o<a.length;o++){if(!a[o].length)return e;a[o]=Number(a[o]);if(!(a[o]>=0))return e;if(o===3){if(a[o]>1)a[o]=1}else if(a[o]>=1)return e}var l=Math.round(a[0]*255)+", "+Math.round(a[1]*255)+", "+Math.round(a[2]*255);if(i)return"rgba("+l+", "+a[3]+")";return"rgb("+l+")"}},{"./attributes":49,"fast-isnumeric":18,tinycolor2:33}],51:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/layout_attributes");var n=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:a.linecolor,outlinewidth:a.linewidth,bordercolor:a.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:i({},a.ticks,{dflt:""}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:n({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,showexponent:a.showexponent,title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":163,"../../plot_api/edit_types":196,"../../plots/cartesian/layout_attributes":225,"../../plots/font_attributes":239}],52:[function(e,t,r){"use strict";var a=e("../colorscale");var n=e("./draw");t.exports=function e(t,r,i){if(typeof i==="function")return i(t,r);var o=r[0].trace;var l="cb"+o.uid;var s=i.container;var u=s?o[s]:o;t._fullLayout._infolayer.selectAll("."+l).remove();if(!u||!u.showscale)return;var c=u[i.min];var f=u[i.max];var d=r[0].t.cb=n(t,l);var v=a.makeColorScaleFunc(a.extractScale(u.colorscale,c,f),{noNumericCheck:true});d.fillcolor(v).filllevels({start:c,end:f,size:(f-c)/254}).options(u.colorbar)()}},{"../colorscale":65,"./draw":55}],53:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],54:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/tick_value_defaults");var o=e("../../plots/cartesian/tick_mark_defaults");var l=e("../../plots/cartesian/tick_label_defaults");var s=e("./attributes");t.exports=function e(t,r,u){var c=n.newContainer(r,"colorbar"),f=t.colorbar||{};function d(e,t){return a.coerce(f,c,s,e,t)}var v=d("thicknessmode");d("thickness",v==="fraction"?30/(u.width-u.margin.l-u.margin.r):30);var p=d("lenmode");d("len",p==="fraction"?1:u.height-u.margin.t-u.margin.b);d("x");d("xanchor");d("xpad");d("y");d("yanchor");d("ypad");a.noneOrAll(f,c,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");i(f,c,d,"linear");var h={outerTicks:false,font:u.font};l(f,c,d,"linear",h);o(f,c,d,"linear",h);d("title",u._dfltTitle.colorbar);a.coerceFont(d,"titlefont",u.font);d("titleside")}},{"../../lib":169,"../../plot_api/plot_template":203,"../../plots/cartesian/tick_label_defaults":232,"../../plots/cartesian/tick_mark_defaults":233,"../../plots/cartesian/tick_value_defaults":234,"./attributes":51}],55:[function(e,t,r){"use strict";var a=e("d3");var n=e("tinycolor2");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../plots/cartesian/axes");var s=e("../dragelement");var u=e("../../lib");var c=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var d=e("../drawing");var v=e("../color");var p=e("../titles");var h=e("../../lib/svg_text_utils");var g=e("../../constants/alignment");var y=g.LINE_SPACING;var m=g.FROM_TL;var x=g.FROM_BR;var b=e("../../plots/cartesian/axis_defaults");var _=e("../../plots/cartesian/position_defaults");var w=e("../../plots/cartesian/layout_attributes");var k=e("./attributes");var M=e("./constants").cn;t.exports=function e(t,r){var g={};Object.keys(k).forEach(function(e){g[e]=null});g.fillcolor=null;g.line={color:null,width:null,dash:null};g.levels={start:null,end:null,size:null};g.filllevels=null;function T(){var e=t._fullLayout,k=e._size;if(typeof g.fillcolor!=="function"&&typeof g.line.color!=="function"){e._infolayer.selectAll("g."+r).remove();return}var L=a.extent((typeof g.fillcolor==="function"?g.fillcolor:g.line.color).domain());var S=[];var C=[];var O=typeof g.line.color==="function"?g.line.color:function(){return g.line.color};var z=typeof g.fillcolor==="function"?g.fillcolor:function(){return g.fillcolor};var P;var D;var I=g.levels.end+g.levels.size/100,E=g.levels.size,N=1.001*L[0]-.001*L[1],R=1.001*L[1]-.001*L[0];for(D=0;D<1e5;D++){P=g.levels.start+D*E;if(E>0?P>=I:P<=I)break;if(P>N&&P<R)S.push(P)}if(typeof g.fillcolor==="function"){if(g.filllevels){I=g.filllevels.end+g.filllevels.size/100;E=g.filllevels.size;for(D=0;D<1e5;D++){P=g.filllevels.start+D*E;if(E>0?P>=I:P<=I)break;if(P>L[0]&&P<L[1])C.push(P)}}else{C=S.map(function(e){return e-g.levels.size/2});C.push(C[C.length-1]+g.levels.size)}}else if(g.fillcolor&&typeof g.fillcolor==="string"){C=[0]}if(g.levels.size<0){S.reverse();C.reverse()}var F=k.h,B=k.w,j=Math.round(g.thickness*(g.thicknessmode==="fraction"?B:1)),q=j/k.w,H=Math.round(g.len*(g.lenmode==="fraction"?F:1)),V=H/k.h,U=g.xpad/k.w,G=(g.borderwidth+g.outlinewidth)/2,Z=g.ypad/k.h,Y=Math.round(g.x*k.w+g.xpad),X=g.x-q*({middle:.5,right:1}[g.xanchor]||0),W=g.y+V*(({top:-.5,bottom:.5}[g.yanchor]||0)-.5),Q=Math.round(k.h*(1-W)),J=Q-H,$,K={type:"linear",range:L,tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,exponentformat:g.exponentformat,separatethousands:g.separatethousands,showexponent:g.showexponent,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,title:g.title,titlefont:g.titlefont,showline:true,anchor:"free",position:1},ee={type:"linear",_id:"y"+r},te={letter:"y",font:e.font,noHover:true,calendar:e.calendar};function re(e,t){return u.coerce(K,ee,w,e,t)}b(K,ee,re,te,e);_(K,ee,re,te);ee.position=g.x+U+q;T.axis=ee;if(["top","bottom"].indexOf(g.titleside)!==-1){ee.titleside=g.titleside;ee.titlex=g.x+U;ee.titley=W+(g.titleside==="top"?V-Z:Z)}if(g.line.color&&g.tickmode==="auto"){ee.tickmode="linear";ee.tick0=g.levels.start;var ae=g.levels.size;var ne=u.constrain((Q-J)/50,4,15)+1,ie=(L[1]-L[0])/((g.nticks||ne)*ae);if(ie>1){var oe=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));ae*=oe*u.roundUp(ie/oe,[2,5,10]);if((Math.abs(g.levels.start)/g.levels.size+1e-6)%1<2e-6){ee.tick0=0}}ee.dtick=ae}ee.domain=[W+Z,W+V-Z];ee.setScale();var le=u.ensureSingle(e._infolayer,"g",r,function(e){e.classed(M.colorbar,true).each(function(){var e=a.select(this);e.append("rect").classed(M.cbbg,true);e.append("g").classed(M.cbfills,true);e.append("g").classed(M.cblines,true);e.append("g").classed(M.cbaxis,true).classed(M.crisp,true);e.append("g").classed(M.cbtitleunshift,true).append("g").classed(M.cbtitle,true);e.append("rect").classed(M.cboutline,true);e.select(".cbtitle").datum(0)})});le.attr("transform","translate("+Math.round(k.l)+","+Math.round(k.t)+")");var se=le.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(k.l)+",-"+Math.round(k.t)+")");ee._axislayer=le.select(".cbaxis");var ue=0;if(["top","bottom"].indexOf(g.titleside)!==-1){var ce=k.l+(g.x+U)*k.w,fe=ee.titlefont.size,de;if(g.titleside==="top"){de=(1-(W+V-Z))*k.h+k.t+3+fe*.75}else{de=(1-(W+Z))*k.h+k.t-3-fe*.25}pe(ee._id+"title",{attributes:{x:ce,y:de,"text-anchor":"start"}})}function ve(){if(["top","bottom"].indexOf(g.titleside)!==-1){var r=le.select(".cbtitle"),i=r.select("text"),o=[-g.outlinewidth/2,g.outlinewidth/2],s=r.select(".h"+ee._id+"title-math-group").node(),c=15.6;if(i.node()){c=parseInt(i.node().style.fontSize,10)*y}if(s){ue=d.bBox(s).height;if(ue>c){o[1]-=(ue-c)/2}}else if(i.node()&&!i.classed(M.jsPlaceholder)){ue=d.bBox(i.node()).height}if(ue){ue+=5;if(g.titleside==="top"){ee.domain[1]-=ue/k.h;o[1]*=-1}else{ee.domain[0]+=ue/k.h;var f=h.lineCount(i);o[1]+=(1-f)*c}r.attr("transform","translate("+o+")");ee.setScale()}}le.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(k.h*(1-ee.domain[1]))+")");ee._axislayer.attr("transform","translate(0,"+Math.round(-k.t)+")");var v=le.select(".cbfills").selectAll("rect.cbfill").data(C);v.enter().append("rect").classed(M.cbfill,true).style("stroke","none");v.exit().remove();v.each(function(e,t){var r=[t===0?L[0]:(C[t]+C[t-1])/2,t===C.length-1?L[1]:(C[t]+C[t+1])/2].map(ee.c2p).map(Math.round);if(t!==C.length-1){r[1]+=r[1]>r[0]?1:-1}var i=z(e).replace("e-",""),o=n(i).toHexString();a.select(this).attr({x:Y,width:Math.max(j,2),y:a.min(r),height:Math.max(a.max(r)-a.min(r),2),fill:o})});var p=le.select(".cblines").selectAll("path.cbline").data(g.line.color&&g.line.width?S:[]);p.enter().append("path").classed(M.cbline,true);p.exit().remove();p.each(function(e){a.select(this).attr("d","M"+Y+","+(Math.round(ee.c2p(e))+g.line.width/2%1)+"h"+j).call(d.lineGroupStyle,g.line.width,O(e),g.line.dash)});ee._axislayer.selectAll("g."+ee._id+"tick,path").remove();ee._pos=Y+j+(g.outlinewidth||0)/2-(g.ticks==="outside"?1:0);ee.side="right";return u.syncOrAsync([function(){return l.doTicksSingle(t,ee,true)},function(){if(["top","bottom"].indexOf(g.titleside)===-1){var r=ee.titlefont.size,n=ee._offset+ee._length/2,i=k.l+(ee.position||0)*k.w+(ee.side==="right"?10+r*(ee.showticklabels?1:.5):-10-r*(ee.showticklabels?.5:0));pe("h"+ee._id+"title",{avoid:{selection:a.select(t).selectAll("g."+ee._id+"tick"),side:g.titleside,offsetLeft:k.l,offsetTop:0,maxShift:e.width},attributes:{x:i,y:n,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function pe(r,a){var n=A();var i="colorbar.title";var o=n._module.colorbar.container;if(o)i=o+"."+i;var l={propContainer:ee,propName:i,traceIndex:n.index,placeholder:e._dfltTitle.colorbar,containerGroup:le.select(".cbtitle")};var s=r.charAt(0)==="h"?r.substr(1):"h"+r;le.selectAll("."+s+",."+s+"-math-group").remove();p.draw(t,r,c(l,a||{}))}function he(){var e=j+g.outlinewidth/2+d.bBox(ee._axislayer.node()).width;$=se.select("text");if($.node()&&!$.classed(M.jsPlaceholder)){var a=se.select(".h"+ee._id+"title-math-group").node(),n;if(a&&["top","bottom"].indexOf(g.titleside)!==-1){n=d.bBox(a).width}else{n=d.bBox(se.node()).right-Y-k.l}e=Math.max(e,n)}var o=2*g.xpad+e+g.borderwidth+g.outlinewidth/2,l=Q-J;le.select(".cbbg").attr({x:Y-g.xpad-(g.borderwidth+g.outlinewidth)/2,y:J-G,width:Math.max(o,2),height:Math.max(l+2*G,2)}).call(v.fill,g.bgcolor).call(v.stroke,g.bordercolor).style({"stroke-width":g.borderwidth});le.selectAll(".cboutline").attr({x:Y,y:J+g.ypad+(g.titleside==="top"?ue:0),width:Math.max(j,2),height:Math.max(l-2*g.ypad-ue,2)}).call(v.stroke,g.outlinecolor).style({fill:"None","stroke-width":g.outlinewidth});var s=({center:.5,right:1}[g.xanchor]||0)*o;le.attr("transform","translate("+(k.l-s)+","+k.t+")");var u={};var c=m[g.yanchor];var f=x[g.yanchor];if(g.lenmode==="pixels"){u.y=g.y;u.t=l*c;u.b=l*f}else{u.t=u.b=0;u.yt=g.y+g.len*c;u.yb=g.y-g.len*f}var p=m[g.xanchor];var h=x[g.xanchor];if(g.thicknessmode==="pixels"){u.x=g.x;u.l=o*p;u.r=o*h}else{var y=o-j;u.l=y*p;u.r=y*h;u.xl=g.x-g.thickness*p;u.xr=g.x+g.thickness*h}i.autoMargin(t,r,u)}var ge=u.syncOrAsync([i.previousPromises,ve,i.previousPromises,he],t);if(ge&&ge.then)(t._promises||[]).push(ge);if(t._context.edits.colorbarPosition){var ye,me,xe;s.init({element:le.node(),gd:t,prepFn:function(){ye=le.attr("transform");f(le)},moveFn:function(e,t){le.attr("transform",ye+" "+"translate("+e+","+t+")");me=s.align(X+e/k.w,q,0,1,g.xanchor);xe=s.align(W-t/k.h,V,0,1,g.yanchor);var r=s.getCursor(me,xe,g.xanchor,g.yanchor);f(le,r)},doneFn:function(){f(le);if(me!==undefined&&xe!==undefined){o.call("restyle",t,{"colorbar.x":me,"colorbar.y":xe},A().index)}}})}return ge}function A(){var e=r.substr(2),a,n;for(a=0;a<t._fullData.length;a++){n=t._fullData[a];if(n.uid===e)return n}}Object.keys(g).forEach(function(e){T[e]=function(t){if(!arguments.length)return g[e];g[e]=u.isPlainObject(g[e])?u.extendFlat(g[e],t):t;return T}});T.options=function(e){Object.keys(e).forEach(function(t){if(typeof T[t]==="function"){T[t](e[t])}});return T};T._opts=g;return T}},{"../../constants/alignment":148,"../../lib":169,"../../lib/extend":163,"../../lib/setcursor":188,"../../lib/svg_text_utils":190,"../../plots/cartesian/axes":213,"../../plots/cartesian/axis_defaults":215,"../../plots/cartesian/layout_attributes":225,"../../plots/cartesian/position_defaults":228,"../../plots/plots":245,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"../titles":141,"./attributes":51,"./constants":53,d3:15,tinycolor2:33}],56:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t){return a.isPlainObject(t.colorbar)}},{"../../lib":169}],57:[function(e,t,r){"use strict";var a=e("./scales.js");var n=Object.keys(a);function i(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var n=r.cLetter||"c";var o="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var l="noScale"in r?r.noScale:t==="marker.line";var s="showScaleDflt"in r?r.showScaleDflt:n==="z";var u=typeof r.colorscaleDflt==="string"?a[r.colorscaleDflt]:null;var c=r.editTypeOverride||"";var f=t?t+".":"";var d,v;if("colorAttr"in r){d=r.colorAttr;v=r.colorAttr}else{d={z:"z",c:"color"}[n];v="in "+i(f+d)}var p=o?" Has an effect only if "+v+"is set to a numerical array.":"";var h=n+"auto";var g=n+"min";var y=n+"max";var m=i(f+g);var x=i(f+y);var b=m+" and "+x;var _={};_[g]=_[y]=undefined;var w={};w[h]=false;var k={};if(d==="color"){k.color={valType:"color",arrayOk:true,editType:c||"style"}}k[h]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:_};k[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:w};k[y]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:w};k.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:false}};k.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};k.reversescale={valType:"boolean",dflt:false,editType:"calc"};if(!l){k.showscale={valType:"boolean",dflt:s,editType:"calc"}}return k}},{"./scales.js":69}],58:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./scales");var i=e("./flip_scale");t.exports=function e(t,r,o,l){var s=t;var u=t._input;var c=t._fullInput;var f=t.updateStyle;function d(e,r,a){if(a===undefined)a=r;if(f){f(t._input,o?o+"."+e:e,r)}else{u[e]=r}s[e]=a;if(c&&t!==t._fullInput){if(f){f(t._fullInput,o?o+"."+e:e,a)}else{c[e]=a}}}if(o){s=a.nestedProperty(s,o).get();u=a.nestedProperty(u,o).get();c=a.nestedProperty(c,o).get()||{}}var v=l+"auto";var p=l+"min";var h=l+"max";var g=s[v];var y=s[p];var m=s[h];var x=s.colorscale;if(g!==false||y===undefined){y=a.aggNums(Math.min,null,r)}if(g!==false||m===undefined){m=a.aggNums(Math.max,null,r)}if(y===m){y-=.5;m+=.5}d(p,y);d(h,m);d(v,g!==false||y===undefined&&m===undefined);if(s.autocolorscale){if(y*m<0)x=n.RdBu;else if(y>=0)x=n.Reds;else x=n.Blues;d("colorscale",x,s.reversescale?i(x):x);if(!u.autocolorscale){d("autocolorscale",false)}}}},{"../../lib":169,"./flip_scale":62,"./scales":69}],59:[function(e,t,r){"use strict";var a=e("./scales");t.exports=a.RdBu},{"./scales":69}],60:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../colorbar/has_colorbar");var o=e("../colorbar/defaults");var l=e("./is_valid_scale");var s=e("./flip_scale");t.exports=function e(t,r,u,c,f){var d=f.prefix,v=f.cLetter,p=d.slice(0,d.length-1),h=d?n.nestedProperty(t,p).get()||{}:t,g=d?n.nestedProperty(r,p).get()||{}:r,y=h[v+"min"],m=h[v+"max"],x=h.colorscale;var b=a(y)&&a(m)&&y<m;c(d+v+"auto",!b);c(d+v+"min");c(d+v+"max");var _;if(x!==undefined)_=!l(x);c(d+"autocolorscale",_);var w=c(d+"colorscale");var k=c(d+"reversescale");if(k)g.colorscale=s(w);if(d==="marker.line.")return;var M;if(d)M=i(h);var T=c(d+"showscale",M);if(T)o(h,g,u)}},{"../../lib":169,"../colorbar/defaults":54,"../colorbar/has_colorbar":56,"./flip_scale":62,"./is_valid_scale":66,"fast-isnumeric":18}],61:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=t.length,i=new Array(n),o=new Array(n);for(var l=0;l<n;l++){var s=t[l];i[l]=r+s[0]*(a-r);o[l]=s[1]}return{domain:i,range:o}}},{}],62:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.length,a=new Array(r),n;for(var i=r-1,o=0;i>=0;i--,o++){n=t[i];a[o]=[1-n[0],n[1]]}return a}},{}],63:[function(e,t,r){"use strict";var a=e("./scales");var n=e("./default_scale");var i=e("./is_valid_scale_array");t.exports=function e(t,r){if(!r)r=n;if(!t)return r;function o(){try{t=a[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){o();if(typeof t==="string")o()}if(!i(t))return r;return t}},{"./default_scale":59,"./is_valid_scale_array":67,"./scales":69}],64:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("./is_valid_scale");t.exports=function e(t,r){var o=r?n.nestedProperty(t,r).get()||{}:t;var l=o.color;var s=false;if(n.isArrayOrTypedArray(l)){for(var u=0;u<l.length;u++){if(a(l[u])){s=true;break}}}return n.isPlainObject(o)&&(s||o.showscale===true||a(o.cmin)&&a(o.cmax)||i(o.colorscale)||n.isPlainObject(o.colorbar))}},{"../../lib":169,"./is_valid_scale":66,"fast-isnumeric":18}],65:[function(e,t,r){"use strict";r.scales=e("./scales");r.defaultScale=e("./default_scale");r.attributes=e("./attributes");r.handleDefaults=e("./defaults");r.calc=e("./calc");r.hasColorscale=e("./has_colorscale");r.isValidScale=e("./is_valid_scale");r.getScale=e("./get_scale");r.flipScale=e("./flip_scale");r.extractScale=e("./extract_scale");r.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":57,"./calc":58,"./default_scale":59,"./defaults":60,"./extract_scale":61,"./flip_scale":62,"./get_scale":63,"./has_colorscale":64,"./is_valid_scale":66,"./make_color_scale_func":68,"./scales":69}],66:[function(e,t,r){"use strict";var a=e("./scales");var n=e("./is_valid_scale_array");t.exports=function e(t){if(a[t]!==undefined)return true;else return n(t)}},{"./is_valid_scale_array":67,"./scales":69}],67:[function(e,t,r){"use strict";var a=e("tinycolor2");t.exports=function e(t){var r=0;if(!Array.isArray(t)||t.length<2)return false;if(!t[0]||!t[t.length-1])return false;if(+t[0][0]!==0||+t[t.length-1][0]!==1)return false;for(var n=0;n<t.length;n++){var i=t[n];if(i.length!==2||+i[0]<r||!a(i[1]).isValid()){return false}r=+i[0]}return true}},{tinycolor2:33}],68:[function(e,t,r){"use strict";var a=e("d3");var n=e("tinycolor2");var i=e("fast-isnumeric");var o=e("../color");t.exports=function e(t,r){r=r||{};var s=t.domain,u=t.range,c=u.length,f=new Array(c);for(var d=0;d<c;d++){var v=n(u[d]).toRgb();f[d]=[v.r,v.g,v.b,v.a]}var p=a.scale.linear().domain(s).range(f).clamp(true);var h=r.noNumericCheck,g=r.returnArray,y;if(h&&g){y=p}else if(h){y=function(e){return l(p(e))}}else if(g){y=function(e){if(i(e))return p(e);else if(n(e).isValid())return e;else return o.defaultLine}}else{y=function(e){if(i(e))return l(p(e));else if(n(e).isValid())return e;else return o.defaultLine}}y.domain=p.domain;y.range=function(){return u};return y};function l(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return n(t).toRgbString()}},{"../color":50,d3:15,"fast-isnumeric":18,tinycolor2:33}],69:[function(e,t,r){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],70:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){var o=(t-a)/(n-a),l=o+r/(n-a),s=(o+l)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return s;if(i==="right"||i==="top")return l;if(o<2/3-s)return o;if(l>4/3-s)return l;return s}},{}],71:[function(e,t,r){"use strict";var a=e("../../lib");var n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,i,o){if(i==="left")t=0;else if(i==="center")t=1;else if(i==="right")t=2;else t=a.constrain(Math.floor(t*3),0,2);if(o==="bottom")r=0;else if(o==="middle")r=1;else if(o==="top")r=2;else r=a.constrain(Math.floor(r*3),0,2);return n[r][t]}},{"../../lib":169}],72:[function(e,t,r){"use strict";var a=e("mouse-event-offset");var n=e("has-hover");var i=e("has-passive-events");var o=e("../../registry");var l=e("../../lib");var s=e("../../plots/cartesian/constants");var u=e("../../constants/interactions");var c=t.exports={};c.align=e("./align");c.getCursor=e("./cursor");var f=e("./unhover");c.unhover=f.wrapped;c.unhoverRaw=f.raw;c.init=function e(t){var r=t.gd;var a=1;var o=u.DBLCLICKDELAY;var f=t.element;var h,g,y,m,x,b,_,w;if(!r._mouseDownTime)r._mouseDownTime=0;f.style.pointerEvents="all";f.onmousedown=T;if(!i){f.ontouchstart=T}else{if(f._ontouchstart){f.removeEventListener("touchstart",f._ontouchstart)}f._ontouchstart=T;f.addEventListener("touchstart",T,{passive:false})}function k(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var M=t.clampFn||k;function T(e){e.preventDefault();r._dragged=false;r._dragging=true;var i=p(e);h=i[0];g=i[1];_=e.target;b=e;w=e.buttons===2||e.ctrlKey;y=(new Date).getTime();if(y-r._mouseDownTime<o){a+=1}else{a=1;r._mouseDownTime=y}if(t.prepFn)t.prepFn(e,h,g);if(n&&!w){x=d();x.style.cursor=window.getComputedStyle(f).cursor}else if(!n){x=document;m=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(f).cursor}document.addEventListener("mousemove",A);document.addEventListener("mouseup",L);document.addEventListener("touchmove",A);document.addEventListener("touchend",L);return}function A(e){e.preventDefault();var a=p(e);var n=t.minDrag||s.MINDRAG;var i=M(a[0]-h,a[1]-g,n);var o=i[0];var l=i[1];if(o||l){r._dragged=true;c.unhover(r)}if(r._dragged&&t.moveFn&&!w)t.moveFn(o,l);return}function L(e){document.removeEventListener("mousemove",A);document.removeEventListener("mouseup",L);document.removeEventListener("touchmove",A);document.removeEventListener("touchend",L);e.preventDefault();if(n){l.removeElement(x)}else if(m){x.documentElement.style.cursor=m;m=null}if(!r._dragging){r._dragged=false;return}r._dragging=false;if((new Date).getTime()-r._mouseDownTime>o){a=Math.max(a-1,1)}if(r._dragged){if(t.doneFn)t.doneFn()}else{if(t.clickFn)t.clickFn(a,b);if(!w){var i;try{i=new MouseEvent("click",e)}catch(t){var s=p(e);i=document.createEvent("MouseEvents");i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,s[0],s[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}_.dispatchEvent(i)}}v(r);r._dragged=false;return}};function d(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}c.coverSlip=d;function v(e){e._dragging=false;if(e._replotPending)o.call("plot",e)}function p(e){return a(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../constants/interactions":150,"../../lib":169,"../../plots/cartesian/constants":218,"../../registry":261,"./align":70,"./cursor":71,"./unhover":73,"has-hover":20,"has-passive-events":21,"mouse-event-offset":23}],73:[function(e,t,r){"use strict";var a=e("../../lib/events");var n=e("../../lib/throttle");var i=e("../../lib/get_graph_div");var o=e("../fx/constants");var l=t.exports={};l.wrapped=function(e,t,r){e=i(e);if(e._fullLayout){n.clear(e._fullLayout._uid+o.HOVERID)}l.raw(e,t,r)};l.raw=function e(t,r){var n=t._fullLayout;var i=t._hoverdata;if(!r)r={};if(r.target&&a.triggerHandler(t,"plotly_beforehover",r)===false){return}n._hoverlayer.selectAll("g").remove();n._hoverlayer.selectAll("line").remove();n._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&i){t.emit("plotly_unhover",{event:r,points:i})}}},{"../../lib/events":162,"../../lib/get_graph_div":167,"../../lib/throttle":191,"../fx/constants":87}],74:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],75:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../registry");var l=e("../color");var s=e("../colorscale");var u=e("../../lib");var c=e("../../lib/svg_text_utils");var f=e("../../constants/xmlns_namespaces");var d=e("../../constants/alignment");var v=d.LINE_SPACING;var p=e("../../constants/interactions").DESELECTDIM;var h=e("../../traces/scatter/subtypes");var g=e("../../traces/scatter/make_bubble_size_func");var y=t.exports={};y.font=function(e,t,r,a){if(u.isPlainObject(t)){a=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(a)e.call(l.fill,a)};y.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};y.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};y.setRect=function(e,t,r,a,n){e.call(y.setPosition,t,r).call(y.setSize,a,n)};y.translatePoint=function(e,t,r,a){var i=r.c2p(e.x);var o=a.c2p(e.y);if(n(i)&&n(o)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",i).attr("y",o)}else{t.attr("transform","translate("+i+","+o+")")}}else{return false}return true};y.translatePoints=function(e,t,r){e.each(function(e){var n=a.select(this);y.translatePoint(e,n,t,r)})};y.hideOutsideRangePoint=function(e,t,r,a,n,i){t.attr("display",r.isPtWithinRange(e,n)&&a.isPtWithinRange(e,i)?null:"none")};y.hideOutsideRangePoints=function(e,t){if(!t._hasClipOnAxisFalse)return;var r=t.xaxis;var n=t.yaxis;e.each(function(t){var i=t[0].trace;var o=i.xcalendar;var l=i.ycalendar;var s=i.type==="bar"?".bartext":".point,.textpoint";e.selectAll(s).each(function(e){y.hideOutsideRangePoint(e,a.select(this),r,n,o,l)})})};y.crispRound=function(e,t,r){if(!t||!n(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};y.singleLineStyle=function(e,t,r,a,n){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,s=n||i.dash||"";l.stroke(t,a||i.color);y.dashLine(t,s,o)};y.lineGroupStyle=function(e,t,r,n){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=t||i.width||0,s=n||i.dash||"";a.select(this).call(l.stroke,r||i.color).call(y.dashLine,s,o)})};y.dashLine=function(e,t,r){r=+r||0;t=y.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};y.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};y.singleFillStyle=function(e){var t=a.select(e.node());var r=t.data();var n=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(n){e.call(l.fill,n)}};y.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var r=a.select(this);try{r.call(l.fill,t[0].trace.fillcolor)}catch(t){u.error(t,e);r.remove()}})};var m=e("./symbol_defs");y.symbolNames=[];y.symbolFuncs=[];y.symbolNeedLines={};y.symbolNoDot={};y.symbolNoFill={};y.symbolList=[];Object.keys(m).forEach(function(e){var t=m[e];y.symbolList=y.symbolList.concat([t.n,e,t.n+100,e+"-open"]);y.symbolNames[t.n]=e;y.symbolFuncs[t.n]=t.f;if(t.needLine){y.symbolNeedLines[t.n]=true}if(t.noDot){y.symbolNoDot[t.n]=true}else{y.symbolList=y.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])}if(t.noFill){y.symbolNoFill[t.n]=true}});var x=y.symbolNames.length,b="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";y.symbolNumber=function(e){if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=y.symbolNames.indexOf(e);if(e>=0){e+=t}}if(e%100>=x||e>=400){return 0}return Math.floor(Math.max(e,0))};function _(e,t){var r=e%100;return y.symbolFuncs[r](t)+(e>=200?b:"")}var w={x1:1,x2:0,y1:0,y2:0};var k={x1:0,x2:0,y1:1,y2:0};y.gradient=function(e,t,r,n,o,s){var c=t._fullLayout._defs.select(".gradients").selectAll("#"+r).data([n+o+s],u.identity);c.exit().remove();c.enter().append(n==="radial"?"radialGradient":"linearGradient").each(function(){var e=a.select(this);if(n==="horizontal")e.attr(w);else if(n==="vertical")e.attr(k);e.attr("id",r);var t=i(o);var u=i(s);e.append("stop").attr({offset:"0%","stop-color":l.tinyRGB(u),"stop-opacity":u.getAlpha()});e.append("stop").attr({offset:"100%","stop-color":l.tinyRGB(t),"stop-opacity":t.getAlpha()})});e.style({fill:"url(#"+r+")","fill-opacity":null})};y.initGradients=function(e){var t=u.ensureSingle(e._fullLayout._defs,"g","gradients");t.selectAll("linearGradient,radialGradient").remove()};y.pointStyle=function(e,t,r){if(!e.size())return;var n=y.makePointStyleFns(t);e.each(function(e){y.singlePointStyle(e,a.select(this),t,n,r)})};y.singlePointStyle=function(e,t,r,a,n){var i=r.marker;var o=i.line;t.style("opacity",a.selectedOpacityFn?a.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(a.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=a.ms2mrc(e.ms)}e.mrc=s;if(a.selectedSizeFn){s=e.mrc=a.selectedSizeFn(e)}var c=y.symbolNumber(e.mx||i.symbol)||0;e.om=c%200>=100;t.attr("d",_(c,s))}var f=false;var d,v,p;if(e.so){p=o.outlierwidth;v=o.outliercolor;d=i.outliercolor}else{var h=(o||{}).width;p=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)v=e.mlcc=a.lineScale(e.mlc);else if(u.isArrayOrTypedArray(o.color))v=l.defaultLine;else v=o.color;if(u.isArrayOrTypedArray(i.color)){d=l.defaultLine;f=true}if("mc"in e){d=e.mcc=a.markerScale(e.mc)}else{d=i.color||"rgba(0,0,0,0)"}if(a.selectedColorFn){d=a.selectedColorFn(e)}}if(e.om){t.call(l.stroke,d).style({"stroke-width":(p||1)+"px",fill:"none"})}else{t.style("stroke-width",p+"px");var g=i.gradient;var m=e.mgt;if(m)f=true;else m=g&&g.type;if(m&&m!=="none"){var x=e.mgc;if(x)f=true;else x=g.color;var b="g"+n._fullLayout._uid+"-"+r.uid;if(f)b+="-"+e.i;t.call(y.gradient,n,b,m,d,x)}else{t.call(l.fill,d)}if(p){t.call(l.stroke,v)}}};y.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=y.tryColorscale(r,"");t.lineScale=y.tryColorscale(r,"line");if(o.traceIs(e,"symbols")){t.ms2mrc=h.isBubble(e)?g(e):function(){return(r.size||6)/2}}if(e.selectedpoints){u.extendFlat(t,y.makeSelectedPointStyleFns(e))}return t};y.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.marker||{};var i=r.marker||{};var l=a.marker||{};var s=n.opacity;var c=i.opacity;var f=l.opacity;var d=c!==undefined;var v=f!==undefined;if(u.isArrayOrTypedArray(s)||d||v){t.selectedOpacityFn=function(e){var t=e.mo===undefined?n.opacity:e.mo;if(e.selected){return d?c:t}else{return v?f:p*t}}}var h=n.color;var g=i.color;var y=l.color;if(g||y){t.selectedColorFn=function(e){var t=e.mcc||h;if(e.selected){return g||t}else{return y||t}}}var m=n.size;var x=i.size;var b=l.size;var _=x!==undefined;var w=b!==undefined;if(o.traceIs(e,"symbols")&&(_||w)){t.selectedSizeFn=function(e){var t=e.mrc||m/2;if(e.selected){return _?x/2:t}else{return w?b/2:t}}}return t};y.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var a=e.unselected||{};var n=e.textfont||{};var i=r.textfont||{};var o=a.textfont||{};var s=n.color;var u=i.color;var c=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return u||t}else{if(c)return c;else return u?t:l.addOpacity(t,p)}};return t};y.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=y.makeSelectedPointStyleFns(t);var n=t.marker||{};var i=[];if(r.selectedOpacityFn){i.push(function(e,t){e.style("opacity",r.selectedOpacityFn(t))})}if(r.selectedColorFn){i.push(function(e,t){l.fill(e,r.selectedColorFn(t))})}if(r.selectedSizeFn){i.push(function(e,t){var a=t.mx||n.symbol||0;var i=r.selectedSizeFn(t);e.attr("d",_(y.symbolNumber(a),i));t.mrc2=i})}if(i.length){e.each(function(e){var t=a.select(this);for(var r=0;r<i.length;r++){i[r](t,e)}})}};y.tryColorscale=function(e,t){var r=t?u.nestedProperty(e,t).get():e;if(r){var a=r.colorscale;var n=r.color;if(a&&u.isArrayOrTypedArray(n)){return s.makeColorScaleFunc(s.extractScale(a,r.cmin,r.cmax))}}return u.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function T(e,t,r,n){var i=a.select(e.node().parentNode);var o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var l=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=n?n/.8+1:0;var u=(c.lineCount(e)-1)*v+1;var f=M[l]*s;var d=r*.75+M[o]*s+(M[o]-1)*u*r/2;e.attr("text-anchor",l);i.attr("transform","translate("+f+","+d+")")}function A(e,t){var r=e.ts||t.textfont.size;return n(r)&&r>0?r:0}y.textPointStyle=function(e,t,r){if(!e.size())return;var n;if(t.selectedpoints){var i=y.makeSelectedTextStyleFns(t);n=i.selectedTextColorFn}e.each(function(e){var i=a.select(this);var o=u.extractOption(e,t,"tx","text");if(!o&&o!==0){i.remove();return}var l=e.tp||t.textposition;var s=A(e,t);var f=n?n(e):e.tc||t.textfont.color;i.call(y.font,e.tf||t.textfont.family,s,f).text(o).call(c.convertToTspans,r).call(T,l,s,e.mrc)})};y.selectedTextStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=y.makeSelectedTextStyleFns(t);e.each(function(e){var n=a.select(this);var i=r.selectedTextColorFn(e);var o=e.tp||t.textposition;var s=A(e,t);l.fill(n,i);T(n,o,s,e.mrc2||e.mrc)})};var L=.5;y.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0],a=[],n;for(n=1;n<e.length-1;n++){a.push(S(e[n-1],e[n],e[n+1],t))}r+="Q"+a[0][0]+" "+e[1];for(n=2;n<e.length-1;n++){r+="C"+a[n-2][1]+" "+a[n-1][0]+" "+e[n]}r+="Q"+a[e.length-3][1]+" "+e[e.length-1];return r};y.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0],a=e.length-1,n=[S(e[a],e[0],e[1],t)],i;for(i=1;i<a;i++){n.push(S(e[i-1],e[i],e[i+1],t))}n.push(S(e[a-1],e[a],e[0],t));for(i=1;i<=a;i++){r+="C"+n[i-1][1]+" "+n[i][0]+" "+e[i]}r+="C"+n[a][1]+" "+n[0][0]+" "+e[0]+"Z";return r};function S(e,t,r,n){var i=e[0]-t[0],o=e[1]-t[1],l=r[0]-t[0],s=r[1]-t[1],u=Math.pow(i*i+o*o,L/2),c=Math.pow(l*l+s*s,L/2),f=(c*c*i-u*u*l)*n,d=(c*c*o-u*u*s)*n,v=3*c*(u+c),p=3*u*(u+c);return[[a.round(t[0]+(v&&f/v),2),a.round(t[1]+(v&&d/v),2)],[a.round(t[0]-(p&&f/p),2),a.round(t[1]-(p&&d/p),2)]]}var C={hv:function(e,t){return"H"+a.round(t[0],2)+"V"+a.round(t[1],2)},vh:function(e,t){return"V"+a.round(t[1],2)+"H"+a.round(t[0],2)},hvh:function(e,t){return"H"+a.round((e[0]+t[0])/2,2)+"V"+a.round(t[1],2)+"H"+a.round(t[0],2)},vhv:function(e,t){return"V"+a.round((e[1]+t[1])/2,2)+"H"+a.round(t[0],2)+"V"+a.round(t[1],2)}};var O=function(e,t){return"L"+a.round(t[0],2)+","+a.round(t[1],2)};y.steps=function(e){var t=C[e]||O;return function(e){var r="M"+a.round(e[0][0],2)+","+a.round(e[0][1],2);for(var n=1;n<e.length;n++){r+=t(e[n-1],e[n])}return r}};y.makeTester=function(){var e=u.ensureSingleById(a.select("body"),"svg","js-plotly-tester",function(e){e.attr(f.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=u.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=e;y.testref=t};y.savedBBoxes={};var z=0;var P=1e4;y.bBox=function(e,t,r){if(!r)r=D(e);var n;if(r){n=y.savedBBoxes[r];if(n)return u.extendFlat({},n)}else if(e.childNodes.length===1){var i=e.childNodes[0];r=D(i);if(r){var o=+i.getAttribute("x")||0;var l=+i.getAttribute("y")||0;var s=i.getAttribute("transform");if(!s){var f=y.bBox(i,false,r);if(o){f.left+=o;f.right+=o}if(l){f.top+=l;f.bottom+=l}return f}r+="~"+o+"~"+l+"~"+s;n=y.savedBBoxes[r];if(n)return u.extendFlat({},n)}}var d,v;if(t){d=e}else{v=y.tester.node();d=e.cloneNode(true);v.appendChild(d)}a.select(d).attr("transform",null).call(c.positionText,0,0);var p=d.getBoundingClientRect();var h=y.testref.node().getBoundingClientRect();if(!t)v.removeChild(d);var g={height:p.height,width:p.width,left:p.left-h.left,top:p.top-h.top,right:p.right-h.left,bottom:p.bottom-h.top};if(z>=P){y.savedBBoxes={};z=0}if(r)y.savedBBoxes[r]=g;z++;return u.extendFlat({},g)};function D(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}y.setClipUrl=function(e,t){if(!t){e.attr("clip-path",null);return}if(y.baseUrl===undefined){var r=a.select("base");if(r.size()&&r.attr("href")){y.baseUrl=window.location.href.split("#")[0]}else{y.baseUrl=""}}e.attr("clip-path","url("+y.baseUrl+"#"+t+")")};y.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};y.setTranslate=function(e,t,r){var a=/(\btranslate\(.*?\);?)/,n=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";t=t||0;r=r||0;o=o.replace(a,"").trim();o+=" translate("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};y.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",a=e[r]("transform")||"";var n=a.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};y.setScale=function(e,t,r){var a=/(\bscale\(.*?\);?)/,n=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";t=t||1;r=r||1;o=o.replace(a,"").trim();o+=" scale("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};var I=/\s*sc.*/;y.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var a=t===1&&r===1?"":" scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(I,"");e+=a;e=e.trim();this.setAttribute("transform",e)})};var E=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(e,t,r){if(!e)return;e.each(function(){var e;var n=a.select(this);var i=n.select("text");if(!i.node())return;var o=parseFloat(i.attr("x")||0);var l=parseFloat(i.attr("y")||0);var s=(n.attr("transform")||"").match(E);if(t===1&&r===1){e=[]}else{e=["translate("+o+","+l+")","scale("+t+","+r+")","translate("+-o+","+-l+")"]}if(s){e.push(s)}n.attr("transform",e.join(" "))})}},{"../../constants/alignment":148,"../../constants/interactions":150,"../../constants/xmlns_namespaces":153,"../../lib":169,"../../lib/svg_text_utils":190,"../../registry":261,"../../traces/scatter/make_bubble_size_func":383,"../../traces/scatter/subtypes":389,"../color":50,"../colorscale":65,"./symbol_defs":76,d3:15,"fast-isnumeric":18,tinycolor2:33}],76:[function(e,t,r){"use strict";var a=e("d3");t.exports={circle:{n:0,f:function(e){var t=a.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=a.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=a.round(e*.4,2),r=a.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=a.round(e*.8/Math.sqrt(2),2),r="l"+t+","+t,n="l"+t+",-"+t,i="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+r+n+i+n+i+o+i+o+r+o+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=a.round(e*2/Math.sqrt(3),2),r=a.round(e/2,2),n=a.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(e){var t=a.round(e*2/Math.sqrt(3),2),r=a.round(e/2,2),n=a.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(e){var t=a.round(e*2/Math.sqrt(3),2),r=a.round(e/2,2),n=a.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(e){var t=a.round(e*2/Math.sqrt(3),2),r=a.round(e/2,2),n=a.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=a.round(e*.6,2),r=a.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=a.round(e*.6,2),r=a.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=a.round(e*.6,2),r=a.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=a.round(e*.6,2),r=a.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=a.round(e*.951,2),r=a.round(e*.588,2),n=a.round(-e,2),i=a.round(e*-.309,2),o=a.round(e*.809,2);return"M"+t+","+i+"L"+r+","+o+"H-"+r+"L-"+t+","+i+"L0,"+n+"Z"}},hexagon:{n:14,f:function(e){var t=a.round(e,2),r=a.round(e/2,2),n=a.round(e*Math.sqrt(3)/2,2);return"M"+n+",-"+r+"V"+r+"L0,"+t+"L-"+n+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=a.round(e,2),r=a.round(e/2,2),n=a.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+n+"H"+r+"L"+t+",0L"+r+",-"+n+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=a.round(e*.924,2),r=a.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4,r=a.round(t*.225,2),n=a.round(t*.951,2),i=a.round(t*.363,2),o=a.round(t*.588,2),l=a.round(-t,2),s=a.round(t*-.309,2),u=a.round(t*.118,2),c=a.round(t*.809,2),f=a.round(t*.382,2);return"M"+r+","+s+"H"+n+"L"+i+","+u+"L"+o+","+c+"L0,"+f+"L-"+o+","+c+"L-"+i+","+u+"L-"+n+","+s+"H-"+r+"L0,"+l+"Z"}},hexagram:{n:18,f:function(e){var t=a.round(e*.66,2),r=a.round(e*.38,2),n=a.round(e*.76,2);return"M-"+n+",0l-"+r+",-"+t+"h"+n+"l"+r+",-"+t+"l"+r+","+t+"h"+n+"l-"+r+","+t+"l"+r+","+t+"h-"+n+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=a.round(e*Math.sqrt(3)*.8,2),r=a.round(e*.8,2),n=a.round(e*1.6,2),i=a.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+t+","+r+o+t+","+r+o+"0,-"+n+o+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=a.round(e*Math.sqrt(3)*.8,2),r=a.round(e*.8,2),n=a.round(e*1.6,2),i=a.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M"+t+",-"+r+o+"-"+t+",-"+r+o+"0,"+n+o+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=a.round(e*1.1,2),r=a.round(e*2,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+n+"-"+t+","+t+n+t+","+t+n+t+",-"+t+n+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=a.round(e*1.4,2),r=a.round(e*1.9,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+n+"0,"+t+n+t+",0"+n+"0,-"+t+n+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=a.round(e*.7,2),r=a.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=a.round(e*1.4,2),r=a.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=a.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=a.round(e,2),r=a.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=a.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=a.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=a.round(e*1.3,2),r=a.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=a.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=a.round(e*1.2,2);var r=a.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=a.round(e/2,2),r=a.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=a.round(e*1.2,2),r=a.round(e*1.6,2),n=a.round(e*.8,2);return"M-"+t+","+n+"L0,0M"+t+","+n+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=a.round(e*1.2,2),r=a.round(e*1.6,2),n=a.round(e*.8,2);return"M-"+t+",-"+n+"L0,0M"+t+",-"+n+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=a.round(e*1.2,2),r=a.round(e*1.6,2),n=a.round(e*.8,2);return"M"+n+","+t+"L0,0M"+n+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=a.round(e*1.2,2),r=a.round(e*1.6,2),n=a.round(e*.8,2);return"M-"+n+","+t+"L0,0M-"+n+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=a.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=a.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=a.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=a.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true}}},{d3:15}],77:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],78:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../registry");var i=e("../../plots/cartesian/axes");var o=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var a=0;a<r.length;a++){var o=r[a],s=o[0].trace;if(!n.traceIs(s,"errorBarsOK"))continue;var u=i.getFromId(t,s.xaxis),c=i.getFromId(t,s.yaxis);l(o,s,u,"x");l(o,s,c,"y")}};function l(e,t,r,n){var l=t["error_"+n]||{},s=l.visible&&["linear","log"].indexOf(r.type)!==-1,u=[];if(!s)return;var c=o(l);for(var f=0;f<e.length;f++){var d=e[f],v=d[n];if(!a(r.c2l(v)))continue;var p=c(v,f);if(a(p[0])&&a(p[1])){var h=d[n+"s"]=v-p[0],g=d[n+"h"]=v+p[1];u.push(h,g)}}i.expand(r,u,{padded:true})}},{"../../plots/cartesian/axes":213,"../../registry":261,"./compute_error":79,"fast-isnumeric":18}],79:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type,n=t.symmetric;if(r==="data"){var i=t.array||[];if(n){return function e(t,r){var a=+i[r];return[a,a]}}else{var o=t.arrayminus||[];return function e(t,r){var a=+i[r];var n=+o[r];if(!isNaN(a)||!isNaN(n)){return[n||0,a||0]}return[NaN,NaN]}}}else{var l=a(r,t.value),s=a(r,t.valueminus);if(n||t.valueminus===undefined){return function e(t){var r=l(t);return[r,r]}}else{return function e(t){return[s(t),l(t)]}}}};function a(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],80:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../registry");var i=e("../../lib");var o=e("../../plot_api/plot_template");var l=e("./attributes");t.exports=function(e,t,r,s){var u="error_"+s.axis;var c=o.newContainer(t,u);var f=e[u]||{};function d(e,t){return i.coerce(f,c,l,e,t)}var v=f.array!==undefined||f.value!==undefined||f.type==="sqrt";var p=d("visible",v);if(p===false)return;var h=d("type","array"in f?"data":"percent"),g=true;if(h!=="sqrt"){g=d("symmetric",!((h==="data"?"arrayminus":"valueminus")in f))}if(h==="data"){d("array");d("traceref");if(!g){d("arrayminus");d("tracerefminus")}}else if(h==="percent"||h==="constant"){d("value");if(!g)d("valueminus")}var y="copy_"+s.inherit+"style";if(s.inherit){var m=t["error_"+s.inherit];if((m||{}).visible){d(y,!(f.color||a(f.thickness)||a(f.width)))}}if(!s.inherit||!c[y]){d("color",r);d("thickness");d("width",n.traceIs(t,"gl3d")?0:4)}}},{"../../lib":169,"../../plot_api/plot_template":203,"../../registry":261,"./attributes":77,"fast-isnumeric":18}],81:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var l={error_x:a.extendFlat({},i),error_y:a.extendFlat({},i),error_z:a.extendFlat({},i)};delete l.error_x.copy_ystyle;delete l.error_y.copy_ystyle;delete l.error_z.copy_ystyle;delete l.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:n(l,"calc","nested"),scattergl:n(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:s};function s(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":169,"../../plot_api/edit_types":196,"./attributes":77,"./calc":78,"./compute_error":79,"./defaults":80,"./plot":82,"./style":83}],82:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../drawing");var o=e("../../traces/scatter/subtypes");t.exports=function e(t,r,s){var u;var c=r.xaxis;var f=r.yaxis;var d=s&&s.duration>0;t.each(function(e){var t=e[0].trace,v=t.error_x||{},p=t.error_y||{};var h;if(t.ids){h=function(e){return e.id}}var g=o.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!p.visible&&!v.visible)e=[];var y=a.select(this).selectAll("g.errorbar").data(e,h);y.exit().remove();if(!e.length)return;if(!v.visible)y.selectAll("path.xerror").remove();if(!p.visible)y.selectAll("path.yerror").remove();y.style("opacity",1);var m=y.enter().append("g").classed("errorbar",true);if(d){m.style("opacity",0).transition().duration(s.duration).style("opacity",1)}i.setClipUrl(y,r.layerClipId);y.each(function(e){var t=a.select(this);var r=l(e,c,f);if(g&&!e.vis)return;var i;var o=t.select("path.yerror");if(p.visible&&n(r.x)&&n(r.yh)&&n(r.ys)){var h=p.width;i="M"+(r.x-h)+","+r.yh+"h"+2*h+"m-"+h+",0V"+r.ys;if(!r.noYS)i+="m-"+h+",0h"+2*h;u=!o.size();if(u){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(d){o=o.transition().duration(s.duration).ease(s.easing)}o.attr("d",i)}else o.remove();var y=t.select("path.xerror");if(v.visible&&n(r.y)&&n(r.xh)&&n(r.xs)){var m=(v.copy_ystyle?p:v).width;i="M"+r.xh+","+(r.y-m)+"v"+2*m+"m0,-"+m+"H"+r.xs;if(!r.noXS)i+="m0,-"+m+"v"+2*m;u=!y.size();if(u){y=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(d){y=y.transition().duration(s.duration).ease(s.easing)}y.attr("d",i)}else y.remove()})})};function l(e,t,r){var a={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){a.yh=r.c2p(e.yh);a.ys=r.c2p(e.ys);if(!n(a.ys)){a.noYS=true;a.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){a.xh=t.c2p(e.xh);a.xs=t.c2p(e.xs);if(!n(a.xs)){a.noXS=true;a.xs=t.c2p(e.xs,true)}}return a}},{"../../traces/scatter/subtypes":389,"../drawing":75,d3:15,"fast-isnumeric":18}],83:[function(e,t,r){"use strict";var a=e("d3");var n=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace,r=t.error_y||{},i=t.error_x||{};var o=a.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(n.stroke,r.color);if(i.copy_ystyle)i=r;o.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(n.stroke,i.color)})}},{"../color":50,d3:15}],84:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:true,editType:"none"},bordercolor:{valType:"color",arrayOk:true,editType:"none"},font:a({arrayOk:true,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:true,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":239}],85:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../registry");t.exports=function e(t){var r=t.calcdata;var o=t._fullLayout;function l(e){return function(t){return a.coerceHoverinfo({hoverinfo:t},{_module:e._module},o)}}for(var s=0;s<r.length;s++){var u=r[s];var c=u[0].trace;if(n.traceIs(c,"pie"))continue;var f=n.traceIs(c,"2dMap")?i:a.fillArray;f(c.hoverinfo,u,"hi",l(c));if(!c.hoverlabel)continue;f(c.hoverlabel.bgcolor,u,"hbg");f(c.hoverlabel.bordercolor,u,"hbc");f(c.hoverlabel.font.size,u,"hts");f(c.hoverlabel.font.color,u,"htc");f(c.hoverlabel.font.family,u,"htf");f(c.hoverlabel.namelength,u,"hnl")}};function i(e,t,r,n){n=n||a.identity;if(Array.isArray(e)){t[0][r]=n(e)}}},{"../../lib":169,"../../registry":261}],86:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("./hover").hover;t.exports=function e(t,r,i){var o=a.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(i!==undefined){n(t,r,i,true)}function l(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(o&&o.then){o.then(l)}else l();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":261,"./hover":90}],87:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],88:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./attributes");var i=e("./hoverlabel_defaults");t.exports=function e(t,r,o,l){function s(e,i){return a.coerce(t,r,n,e,i)}i(t,r,s,l.hoverlabel)}},{"../../lib":169,"./attributes":84,"./hoverlabel_defaults":91}],89:[function(e,t,r){"use strict";var a=e("../../lib");r.getSubplot=function e(t){return t.subplot||t.xaxis+t.yaxis||t.geo};r.isTraceInSubplots=function e(t,a){if(t.type==="splom"){var n=t.xaxes||[];var i=t.yaxes||[];for(var o=0;o<n.length;o++){for(var l=0;l<i.length;l++){if(a.indexOf(n[o]+i[l])!==-1){return true}}}return false}return a.indexOf(r.getSubplot(t))!==-1};r.flat=function e(t,r){var a=new Array(t.length);for(var n=0;n<t.length;n++){a[n]=r}return a};r.p2c=function e(t,r){var a=new Array(t.length);for(var n=0;n<t.length;n++){a[n]=t[n].p2c(r)}return a};r.getDistanceFunction=function e(t,a,n,i){if(t==="closest")return i||r.quadrature(a,n);return t==="x"?a:n};r.getClosest=function e(t,r,a){if(a.index!==false){if(a.index>=0&&a.index<t.length){a.distance=0}else a.index=false}else{for(var n=0;n<t.length;n++){var i=r(t[n]);if(i<=a.distance){a.index=n;a.distance=i}}}return a};r.inbox=function e(t,r,a){return t*r<0||t===0?a:Infinity};r.quadrature=function e(t,r){return function(e){var a=t(e),n=r(e);return Math.sqrt(a*a+n*n)}};r.makeEventData=function e(t,a,n){var i="index"in t?t.index:t.pointNumber;var o={data:a._input,fullData:a,curveNumber:a.index,pointNumber:i};if(a._indexToPoints){var l=a._indexToPoints[i];if(l.length===1){o.pointIndex=l[0]}else{o.pointIndices=l}}else{o.pointIndex=i}if(a._module.eventData){o=a._module.eventData(o,t,a,n,i)}else{if("xVal"in t)o.x=t.xVal;else if("x"in t)o.x=t.x;if("yVal"in t)o.y=t.yVal;else if("y"in t)o.y=t.y;if(t.xa)o.xaxis=t.xa;if(t.ya)o.yaxis=t.ya;if(t.zLabelVal!==undefined)o.z=t.zLabelVal}r.appendArrayPointValue(o,a,i);return o};r.appendArrayPointValue=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var l=0;l<n.length;l++){var s=n[l];var u=i(s);if(e[u]===undefined){var c=a.nestedProperty(t,s).get();var f=o(c,r);if(f!==undefined)e[u]=f}}};r.appendArrayMultiPointValues=function(e,t,r){var n=t._arrayAttrs;if(!n){return}for(var l=0;l<n.length;l++){var s=n[l];var u=i(s);if(e[u]===undefined){var c=a.nestedProperty(t,s).get();var f=new Array(r.length);for(var d=0;d<r.length;d++){f[d]=o(c,r[d])}e[u]=f}}};var n={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function i(e){return n[e]||e}function o(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}},{"../../lib":169}],90:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../lib");var l=e("../../lib/events");var s=e("../../lib/svg_text_utils");var u=e("../../lib/override_cursor");var c=e("../drawing");var f=e("../color");var d=e("../dragelement");var v=e("../../plots/cartesian/axes");var p=e("../../registry");var h=e("./helpers");var g=e("./constants");var y=g.YANGLE;var m=Math.PI*y/180;var x=1/Math.sin(m);var b=Math.cos(m);var _=Math.sin(m);var w=g.HOVERARROWSIZE;var k=g.HOVERTEXTPAD;r.hover=function e(t,r,a,n){t=o.getGraphDiv(t);o.throttle(t._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){M(t,r,a,n)})};r.loneHover=function e(t,r){var n={color:t.color||f.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0};var i=a.select(r.container),o=r.outerContainer?a.select(r.outerContainer):i;var l={hovermode:"closest",rotateLabels:false,bgColor:r.bgColor||f.background,container:i,outerContainer:o};var s=T([n],l,r.gd);L(s,l.rotateLabels);return s.node()};function M(e,t,r,i){if(!r)r="xy";var s=Array.isArray(r)?r:[r];var c=e._fullLayout;var g=c._plots||[];var y=g[r];var m=c._has("cartesian");if(y){var x=y.overlays.map(function(e){return e.id});s=s.concat(x)}var b=s.length;var _=new Array(b);var w=new Array(b);var k=false;for(var M=0;M<b;M++){var P=s[M];var D=g[P];if(D){k=true;_[M]=v.getFromId(e,D.xaxis._id);w[M]=v.getFromId(e,D.yaxis._id);continue}var I=c[P]._subplot;_[M]=I.xaxis;w[M]=I.yaxis}var E=t.hovermode||c.hovermode;if(E&&!k)E="closest";if(["x","y","closest"].indexOf(E)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return d.unhoverRaw(e,t)}var N=c.hoverdistance===-1?Infinity:c.hoverdistance;var R=c.spikedistance===-1?Infinity:c.spikedistance;var F=[],B=[],j,q,H,V,U,G,Z,Y,X,W,Q,J,$,K={hLinePoint:null,vLinePoint:null};if(Array.isArray(t)){E="array";for(H=0;H<t.length;H++){U=e.calcdata[t[H].curveNumber||0];if(U[0].trace.hoverinfo!=="skip"){B.push(U)}}}else{for(V=0;V<e.calcdata.length;V++){U=e.calcdata[V];G=U[0].trace;if(G.hoverinfo!=="skip"&&h.isTraceInSubplots(G,s)){B.push(U)}}var ee=!t.target,te,re;if(ee){if("xpx"in t)te=t.xpx;else te=_[0]._length/2;if("ypx"in t)re=t.ypx;else re=w[0]._length/2}else{if(l.triggerHandler(e,"plotly_beforehover",t)===false){return}var ae=t.target.getBoundingClientRect();te=t.clientX-ae.left;re=t.clientY-ae.top;if(te<0||te>_[0]._length||re<0||re>w[0]._length){return d.unhoverRaw(e,t)}}t.pointerX=te+_[0]._offset;t.pointerY=re+w[0]._offset;if("xval"in t)j=h.flat(s,t.xval);else j=h.p2c(_,te);if("yval"in t)q=h.flat(s,t.yval);else q=h.p2c(w,re);if(!n(j[0])||!n(q[0])){o.warn("Fx.hover failed",t,e);return d.unhoverRaw(e,t)}}var ne=Infinity;for(V=0;V<B.length;V++){U=B[V];if(!U||!U[0]||!U[0].trace||U[0].trace.visible!==true)continue;G=U[0].trace;if(["carpet","contourcarpet"].indexOf(G._module.name)!==-1)continue;if(G.type==="splom"){Y=0;Z=s[Y]}else{Z=h.getSubplot(G);Y=s.indexOf(Z)}X=E;J={cd:U,trace:G,xa:_[Y],ya:w[Y],maxHoverDistance:N,maxSpikeDistance:R,index:false,distance:Math.min(ne,N),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:f.defaultLine,name:G.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(c[Z]){J.subplot=c[Z]._subplot}$=F.length;if(X==="array"){var ie=t[V];if("pointNumber"in ie){J.index=ie.pointNumber;X="closest"}else{X="";if("xval"in ie){W=ie.xval;X="x"}if("yval"in ie){Q=ie.yval;X=X?"closest":"y"}}}else{W=j[Y];Q=q[Y]}if(N!==0){if(G._module&&G._module.hoverPoints){var oe=G._module.hoverPoints(J,W,Q,X,c._hoverlayer);if(oe){var le;for(var se=0;se<oe.length;se++){le=oe[se];if(n(le.x0)&&n(le.y0)){F.push(S(le,E))}}}}else{o.log("Unrecognized trace type in hover:",G)}}if(E==="closest"&&F.length>$){F.splice(0,$);ne=F[0].distance}if(m&&R!==0){if(F.length===0){J.distance=R;J.index=false;var ue=G._module.hoverPoints(J,W,Q,"closest",c._hoverlayer);if(ue){ue=ue.filter(function(e){return e.spikeDistance<=R})}if(ue&&ue.length){var ce;var fe=ue.filter(function(e){return e.xa.showspikes});if(fe.length){var de=fe[0];if(n(de.x0)&&n(de.y0)){ce=ge(de);if(!K.vLinePoint||K.vLinePoint.spikeDistance>ce.spikeDistance){K.vLinePoint=ce}}}var ve=ue.filter(function(e){return e.ya.showspikes});if(ve.length){var pe=ve[0];if(n(pe.x0)&&n(pe.y0)){ce=ge(pe);if(!K.hLinePoint||K.hLinePoint.spikeDistance>ce.spikeDistance){K.hLinePoint=ce}}}}}}}function he(e,t){var r=null;var a=Infinity;var n;for(var i=0;i<e.length;i++){n=e[i].spikeDistance;if(n<a&&n<=t){r=e[i];a=n}}return r}function ge(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var ye={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:t};var me=e._spikepoints,xe={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};e._spikepoints=xe;if(m&&R!==0){if(F.length!==0){var be=F.filter(function(e){return e.ya.showspikes});var _e=he(be,R);K.hLinePoint=ge(_e);var we=F.filter(function(e){return e.xa.showspikes});var ke=he(we,R);K.vLinePoint=ge(ke)}}if(F.length===0){var Me=d.unhoverRaw(e,t);if(m&&(K.hLinePoint!==null||K.vLinePoint!==null)){if(z(me)){C(K,ye)}}return Me}if(m){if(z(me)){C(K,ye)}}F.sort(function(e,t){return e.distance-t.distance});var Te=e._hoverdata,Ae=[];for(H=0;H<F.length;H++){var Le=F[H];Ae.push(h.makeEventData(Le,Le.trace,Le.cd))}e._hoverdata=Ae;var Se=E==="y"&&B.length>1;var Ce=f.combine(c.plot_bgcolor||f.background,c.paper_bgcolor);var Oe={hovermode:E,rotateLabels:Se,bgColor:Ce,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance};var ze=T(F,Oe,e);A(F,Se?"xa":"ya",c);L(ze,Se);if(t.target&&t.target.tagName){var Pe=p.getComponentMethod("annotations","hasClickToShow")(e,Ae);u(a.select(t.target),Pe?"pointer":"")}if(!t.target||i||!O(e,t,Te))return;if(Te){e.emit("plotly_unhover",{event:t,points:Te})}e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:_,yaxes:w,xvals:j,yvals:q})}function T(e,t,r){var n=t.hovermode;var i=t.rotateLabels;var l=t.bgColor;var u=t.container;var d=t.outerContainer;var v=t.commonLabelOpts||{};var p=t.fontFamily||g.HOVERFONT;var h=t.fontSize||g.HOVERFONTSIZE;var m=e[0];var x=m.xa;var b=m.ya;var _=n==="y"?"yLabel":"xLabel";var M=m[_];var T=(String(M)||"").split(" ")[0];var A=d.node().getBoundingClientRect();var L=A.top;var S=A.width;var C=A.height;var O=M!==undefined&&m.distance<=t.hoverdistance&&(n==="x"||n==="y");if(O){var z,P;var D=true;for(z=0;z<e.length;z++){if(D&&e[z].zLabel===undefined)D=false;P=e[z].hoverinfo||e[z].trace.hoverinfo;var I=Array.isArray(P)?P:P.split("+");if(I.indexOf("all")===-1&&I.indexOf(n)===-1){O=false;break}}if(D)O=false}var E=u.selectAll("g.axistext").data(O?[0]:[]);E.enter().append("g").classed("axistext",true);E.exit().remove();E.each(function(){var t=a.select(this);var i=o.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})});var l=o.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)});var u=v.bgcolor||f.defaultLine;var d=v.bordercolor||f.contrast(u);i.style({fill:u,stroke:d});l.text(M).call(c.font,v.font.family||p,v.font.size||h,v.font.color||f.background).call(s.positionText,0,0).call(s.convertToTspans,r);t.attr("transform","");var g=l.node().getBoundingClientRect();if(n==="x"){l.attr("text-anchor","middle").call(s.positionText,0,x.side==="top"?L-g.bottom-w-k:L-g.top+w+k);var y=x.side==="top"?"-":"";i.attr("d","M0,0"+"L"+w+","+y+w+"H"+(k+g.width/2)+"v"+y+(k*2+g.height)+"H-"+(k+g.width/2)+"V"+y+w+"H-"+w+"Z");t.attr("transform","translate("+(x._offset+(m.x0+m.x1)/2)+","+(b._offset+(x.side==="top"?0:b._length))+")")}else{l.attr("text-anchor",b.side==="right"?"start":"end").call(s.positionText,(b.side==="right"?1:-1)*(k+w),L-g.top-g.height/2);var A=b.side==="right"?"":"-";i.attr("d","M0,0"+"L"+A+w+","+w+"V"+(k+g.height/2)+"h"+A+(k*2+g.width)+"V-"+(k+g.height/2)+"H"+A+w+"V-"+w+"Z");t.attr("transform","translate("+(x._offset+(b.side==="right"?x._length:0))+","+(b._offset+(m.y0+m.y1)/2)+")")}e=e.filter(function(e){return e.zLabelVal!==undefined||(e[_]||"").split(" ")[0]===T})});var N=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});N.enter().append("g").classed("hovertext",true).each(function(){var e=a.select(this);e.append("rect").call(f.fill,f.addOpacity(l,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(c.font,p,h)});N.exit().remove();N.each(function(e){var t=a.select(this).attr("transform",""),o="",u="";var d=f.opacity(e.color)?e.color:f.defaultLine;var v=f.combine(d,l);var g=e.borderColor||f.contrast(v);if(e.nameOverride!==undefined)e.name=e.nameOverride;if(e.name){o=s.plainText(e.name||"");var m=Math.round(e.nameLength);if(m>-1&&o.length>m){if(m>3)o=o.substr(0,m-3)+"...";else o=o.substr(0,m)}}if(e.zLabel!==undefined){if(e.xLabel!==undefined)u+="x: "+e.xLabel+"<br>";if(e.yLabel!==undefined)u+="y: "+e.yLabel+"<br>";u+=(u?"z: ":"")+e.zLabel}else if(O&&e[n+"Label"]===M){u=e[(n==="x"?"y":"x")+"Label"]||""}else if(e.xLabel===undefined){if(e.yLabel!==undefined)u=e.yLabel}else if(e.yLabel===undefined)u=e.xLabel;else u="("+e.xLabel+", "+e.yLabel+")";if((e.text||e.text===0)&&!Array.isArray(e.text)){u+=(u?"<br>":"")+e.text}if(e.extraText!==undefined)u+=(u?"<br>":"")+e.extraText;if(u===""){if(o==="")t.remove();u=o}var x=t.select("text.nums").call(c.font,e.fontFamily||p,e.fontSize||h,e.fontColor||g).text(u).attr("data-notex",1).call(s.positionText,0,0).call(s.convertToTspans,r);var b=t.select("text.name"),_=0;if(o&&o!==u){b.call(c.font,e.fontFamily||p,e.fontSize||h,v).text(o).attr("data-notex",1).call(s.positionText,0,0).call(s.convertToTspans,r);_=b.node().getBoundingClientRect().width+2*k}else{b.remove();t.select("rect").remove()}t.select("path").style({fill:v,stroke:g});var T=x.node().getBoundingClientRect(),A=e.xa._offset+(e.x0+e.x1)/2,z=e.ya._offset+(e.y0+e.y1)/2,P=Math.abs(e.x1-e.x0),D=Math.abs(e.y1-e.y0),I=T.width+w+k+_,E,N;e.ty0=L-T.top;e.bx=T.width+2*k;e.by=T.height+2*k;e.anchor="start";e.txwidth=T.width;e.tx2width=_;e.offset=0;if(i){e.pos=A;E=z+D/2+I<=C;N=z-D/2-I>=0;if((e.idealAlign==="top"||!E)&&N){z-=D/2;e.anchor="end"}else if(E){z+=D/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=z;E=A+P/2+I<=S;N=A-P/2-I>=0;if((e.idealAlign==="left"||!E)&&N){A-=P/2;e.anchor="end"}else if(E){A+=P/2;e.anchor="start"}else e.anchor="middle"}x.attr("text-anchor",e.anchor);if(_)b.attr("text-anchor",e.anchor);t.attr("transform","translate("+A+","+z+")"+(i?"rotate("+y+")":""))});return N}function A(e,t,r){var a=0,n=e.map(function(e,a){var n=e[t];return[{i:a,dp:0,pos:e.pos,posref:e.posref,size:e.by*(n._id.charAt(0)==="x"?x:1)/2,pmin:0,pmax:n._id.charAt(0)==="x"?r.width:r.height}]}).sort(function(e,t){return e[0].posref-t[0].posref}),i,o,l,s,u,c,f;function d(e){var t=e[0],r=e[e.length-1];o=t.pmin-t.pos-t.dp+t.size;l=r.pos+r.dp+r.size-t.pmax;if(o>.01){for(u=e.length-1;u>=0;u--)e[u].dp+=o;i=false}if(l<.01)return;if(o<-.01){for(u=e.length-1;u>=0;u--)e[u].dp-=l;i=false}if(!i)return;var a=0;for(s=0;s<e.length;s++){c=e[s];if(c.pos+c.dp+c.size>t.pmax)a++}for(s=e.length-1;s>=0;s--){if(a<=0)break;c=e[s];if(c.pos>t.pmax-1){c.del=true;a--}}for(s=0;s<e.length;s++){if(a<=0)break;c=e[s];if(c.pos<t.pmin+1){c.del=true;a--;l=c.size*2;for(u=e.length-1;u>=0;u--)e[u].dp-=l}}for(s=e.length-1;s>=0;s--){if(a<=0)break;c=e[s];if(c.pos+c.dp+c.size>t.pmax){c.del=true;a--}}}while(!i&&a<=e.length){a++;i=true;s=0;while(s<n.length-1){var v=n[s],p=n[s+1],h=v[v.length-1],g=p[0];o=h.pos+h.dp+h.size-g.pos-g.dp+g.size;if(o>.01&&h.pmin===g.pmin&&h.pmax===g.pmax){for(u=p.length-1;u>=0;u--)p[u].dp+=o;v.push.apply(v,p);n.splice(s+1,1);f=0;for(u=v.length-1;u>=0;u--)f+=v[u].dp;l=f/v.length;for(u=v.length-1;u>=0;u--)v[u].dp-=l;i=false}else s++}n.forEach(d)}for(s=n.length-1;s>=0;s--){var y=n[s];for(u=y.length-1;u>=0;u--){var m=y[u],b=e[m.i];b.offset=m.dp;b.del=m.del}}}function L(e,t){e.each(function(e){var r=a.select(this);if(e.del){r.remove();return}var n=e.anchor==="end"?-1:1,i=r.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],l=o*(w+k),u=l+o*(e.txwidth+k),f=0,d=e.offset;if(e.anchor==="middle"){l-=e.tx2width/2;u+=e.txwidth/2+k}if(t){d*=-_;f=e.offset*b}r.select("path").attr("d",e.anchor==="middle"?"M-"+(e.bx/2+e.tx2width/2)+","+(d-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(n*w+f)+","+(w+d)+"v"+(e.by/2-w)+"h"+n*e.bx+"v-"+e.by+"H"+(n*w+f)+"V"+(d-w)+"Z");i.call(s.positionText,l+f,d+e.ty0-e.by/2+k);if(e.tx2width){r.select("text.name").call(s.positionText,u+o*k+f,d+e.ty0-e.by/2+k);r.select("rect").call(c.setRect,u+(o-1)*e.tx2width/2+f,d-e.by/2-1,e.tx2width,e.by+2)}})}function S(e,t){var r=e.index;var a=e.trace||{};var n=e.cd[0];var i=e.cd[r]||{};var l=Array.isArray(r)?function(e,t){return o.castOption(n,r,e)||o.extractOption({},a,"",t)}:function(e,t){return o.extractOption(i,a,e,t)};function s(t,r,a){var n=l(r,a);if(n)e[t]=n}s("hoverinfo","hi","hoverinfo");s("color","hbg","hoverlabel.bgcolor");s("borderColor","hbc","hoverlabel.bordercolor");s("fontFamily","htf","hoverlabel.font.family");s("fontSize","hts","hoverlabel.font.size");s("fontColor","htc","hoverlabel.font.color");s("nameLength","hnl","hoverlabel.namelength");e.posref=t==="y"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2;e.x0=o.constrain(e.x0,0,e.xa._length);e.x1=o.constrain(e.x1,0,e.xa._length);e.y0=o.constrain(e.y0,0,e.ya._length);e.y1=o.constrain(e.y1,0,e.ya._length);if(e.xLabelVal!==undefined){e.xLabel="xLabel"in e?e.xLabel:v.hoverLabelText(e.xa,e.xLabelVal);e.xVal=e.xa.c2d(e.xLabelVal)}if(e.yLabelVal!==undefined){e.yLabel="yLabel"in e?e.yLabel:v.hoverLabelText(e.ya,e.yLabelVal);e.yVal=e.ya.c2d(e.yLabelVal)}if(e.zLabelVal!==undefined&&e.zLabel===undefined){e.zLabel=String(e.zLabelVal)}if(!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=v.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;if(e.xerrneg!==undefined){e.xLabel+=" +"+u+" / -"+v.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text}else e.xLabel+=" \xb1 "+u;if(t==="x")e.distance+=1}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var c=v.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;if(e.yerrneg!==undefined){e.yLabel+=" +"+c+" / -"+v.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text}else e.yLabel+=" \xb1 "+c;if(t==="y")e.distance+=1}var f=e.hoverinfo||e.trace.hoverinfo;if(f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)e.xLabel=undefined;if(f.indexOf("y")===-1)e.yLabel=undefined;if(f.indexOf("z")===-1)e.zLabel=undefined;if(f.indexOf("text")===-1)e.text=undefined;if(f.indexOf("name")===-1)e.name=undefined}return e}function C(e,t){var r=t.container;var a=t.fullLayout;var n=t.event;var o,l;var s=!!e.hLinePoint;var u=!!e.vLinePoint;r.selectAll(".spikeline").remove();if(!(u||s))return;var d=f.combine(a.plot_bgcolor,a.paper_bgcolor);if(s){var v=e.hLinePoint,p,h;o=v&&v.xa;l=v&&v.ya;var g=l.spikesnap;if(g==="cursor"){p=n.pointerX;h=n.pointerY}else{p=o._offset+v.x;h=l._offset+v.y}var y=i.readability(v.color,d)<1.5?f.contrast(d):v.color;var m=l.spikemode,x=l.spikethickness,b=l.spikecolor||y,_=l._boundingBox,w=(_.left+_.right)/2<p?_.right:_.left,k,M;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1){k=w;M=p}if(m.indexOf("across")!==-1){k=l._counterSpan[0];M=l._counterSpan[1]}r.insert("line",":first-child").attr({x1:k,x2:M,y1:h,y2:h,"stroke-width":x,stroke:b,"stroke-dasharray":c.dashStyle(l.spikedash,x)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:k,x2:M,y1:h,y2:h,"stroke-width":x+2,stroke:d}).classed("spikeline",true).classed("crisp",true)}if(m.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:w+(l.side!=="right"?x:-x),cy:h,r:x,fill:b}).classed("spikeline",true)}}if(u){var T=e.vLinePoint,A,L;o=T&&T.xa;l=T&&T.ya;var S=o.spikesnap;if(S==="cursor"){A=n.pointerX;L=n.pointerY}else{A=o._offset+T.x;L=l._offset+T.y}var C=i.readability(T.color,d)<1.5?f.contrast(d):T.color;var O=o.spikemode,z=o.spikethickness,P=o.spikecolor||C,D=o._boundingBox,I=(D.top+D.bottom)/2<L?D.bottom:D.top,E,N;if(O.indexOf("toaxis")!==-1||O.indexOf("across")!==-1){if(O.indexOf("toaxis")!==-1){E=I;N=L}if(O.indexOf("across")!==-1){E=o._counterSpan[0];N=o._counterSpan[1]}r.insert("line",":first-child").attr({x1:A,x2:A,y1:E,y2:N,"stroke-width":z,stroke:P,"stroke-dasharray":c.dashStyle(o.spikedash,z)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:A,x2:A,y1:E,y2:N,"stroke-width":z+2,stroke:d}).classed("spikeline",true).classed("crisp",true)}if(O.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:A,cy:I-(o.side!=="top"?z:-z),r:z,fill:P}).classed("spikeline",true)}}}function O(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var a=r.length-1;a>=0;a--){var n=r[a],i=e._hoverdata[a];if(n.curveNumber!==i.curveNumber||String(n.pointNumber)!==String(i.pointNumber)){return true}}return false}function z(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}},{"../../lib":169,"../../lib/events":162,"../../lib/override_cursor":180,"../../lib/svg_text_utils":190,"../../plots/cartesian/axes":213,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"./constants":87,"./helpers":89,d3:15,"fast-isnumeric":18,tinycolor2:33}],91:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r,n,i){i=i||{};n("hoverlabel.bgcolor",i.bgcolor);n("hoverlabel.bordercolor",i.bordercolor);n("hoverlabel.namelength",i.namelength);a.coerceFont(n,"hoverlabel.font",i.font)}},{"../../lib":169}],92:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var l=e("./layout_attributes");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:l},attributes:e("./attributes"),layoutAttributes:l,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:u,castHoverinfo:c,hover:e("./hover").hover,unhover:i.unhover,loneHover:e("./hover").loneHover,loneUnhover:s,click:e("./click")};function s(e){var t=n.isD3Selection(e)?e:a.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function u(e,t,r){return n.castOption(e,t,"hoverlabel."+r)}function c(e,t,r){function a(r){return n.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)}return n.castOption(e,r,"hoverinfo",a)}},{"../../lib":169,"../dragelement":72,"./attributes":84,"./calc":85,"./click":86,"./constants":87,"./defaults":88,"./helpers":89,"./hover":90,"./layout_attributes":93,"./layout_defaults":94,"./layout_global_defaults":95,d3:15}],93:[function(e,t,r){"use strict";var a=e("./constants");var n=e("../../plots/font_attributes")({editType:"none"});n.family.dflt=a.HOVERFONT;n.size.dflt=a.HOVERFONTSIZE;t.exports={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:n,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":239,"./constants":87}],94:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./layout_attributes");t.exports=function e(t,r,o){function l(e,i){return a.coerce(t,r,n,e,i)}var s=l("dragmode");if(s==="select")l("selectdirection");var u;if(r._has("cartesian")){r._isHoriz=i(o);u=r._isHoriz?"y":"x"}else u="closest";var c=l("hovermode",u);if(c){l("hoverdistance");l("spikedistance")}var f=r._has("mapbox");var d=r._has("geo");var v=r._basePlotModules.length;if(r.dragmode==="zoom"&&((f||d)&&v===1||f&&d&&v===2)){r.dragmode="pan"}};function i(e){var t=true;for(var r=0;r<e.length;r++){var a=e[r];if(a.orientation!=="h"){t=false;break}}return t}},{"../../lib":169,"./layout_attributes":93}],95:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./hoverlabel_defaults");var i=e("./layout_attributes");t.exports=function e(t,r){function o(e,n){return a.coerce(t,r,i,e,n)}n(t,r,o)}},{"../../lib":169,"./hoverlabel_defaults":91,"./layout_attributes":93}],96:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../lib/regex").counter;var i=e("../../plots/domain").attributes;var o=e("../../plots/cartesian/constants").idRegex;var l=e("../../plot_api/plot_template");var s={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[n("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function u(e,t,r){var a=t[r+"axes"];var n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(a))return a;if(n.length)return n}function c(e,t){var r=e.grid||{};var n=u(t,r,"x");var i=u(t,r,"y");if(!e.grid&&!n&&!i)return;var o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var c=Array.isArray(n);var d=Array.isArray(i);var v=c&&n!==r.xaxes&&d&&i!==r.yaxes;var p,h;if(o){p=r.subplots.length;h=r.subplots[0].length}else{if(d)p=i.length;if(c)h=n.length}var g=l.newContainer(t,"grid");function y(e,t){return a.coerce(r,g,s,e,t)}var m=y("rows",p);var x=y("columns",h);if(!(m*x>1)){delete t.grid;return}if(!o&&!c&&!d){var b=y("pattern")==="independent";if(b)o=true}g._hasSubplotGrid=o;var _=y("roworder");var w=_==="top to bottom";var k=o?.2:.1;var M=o?.3:.1;var T,A;if(v&&t._splomGridDflt){T=t._splomGridDflt.xside;A=t._splomGridDflt.yside}g._domains={x:f("x",y,k,T,x),y:f("y",y,M,A,m,w)}}function f(e,t,r,a,n,i){var o=t(e+"gap",r);var l=t("domain."+e);t(e+"side",a);var s=new Array(n);var u=l[0];var c=(l[1]-u)/(n-o);var f=c*(1-o);for(var d=0;d<n;d++){var v=u+c*d;s[i?n-1-d:d]=[v,v+f]}return s}function d(e,t){var r=t.grid;if(!r||!r._domains)return;var a=e.grid||{};var n=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var l=r.columns;var s=r.pattern==="independent";var c,f,d,p,h,g,y;var m=r._axisMap={};if(i){var x=a.subplots||[];g=r.subplots=new Array(o);var b=1;for(c=0;c<o;c++){var _=g[c]=new Array(l);var w=x[c]||[];for(f=0;f<l;f++){if(s){h=b===1?"xy":"x"+b+"y"+b;b++}else h=w[f];_[f]="";if(n.cartesian.indexOf(h)!==-1){y=h.indexOf("y");d=h.slice(0,y);p=h.slice(y);if(m[d]!==undefined&&m[d]!==f||m[p]!==undefined&&m[p]!==c){continue}_[f]=h;m[d]=f;m[p]=c}}}}else{var k=u(t,a,"x");var M=u(t,a,"y");r.xaxes=v(k,n.xaxis,l,m,"x");r.yaxes=v(M,n.yaxis,o,m,"y")}var T=r._anchors={};var A=r.roworder==="top to bottom";for(var L in m){var S=L.charAt(0);var C=r[S+"side"];var O,z,P;if(C.length<8){T[L]="free"}else if(S==="x"){if(C.charAt(0)==="t"===A){O=0;z=1;P=o}else{O=o-1;z=-1;P=-1}if(i){var D=m[L];for(c=O;c!==P;c+=z){h=g[c][D];if(!h)continue;y=h.indexOf("y");if(h.slice(0,y)===L){T[L]=h.slice(y);break}}}else{for(c=O;c!==P;c+=z){p=r.yaxes[c];if(n.cartesian.indexOf(L+p)!==-1){T[L]=p;break}}}}else{if(C.charAt(0)==="l"){O=0;z=1;P=l}else{O=l-1;z=-1;P=-1}if(i){var I=m[L];for(c=O;c!==P;c+=z){h=g[I][c];if(!h)continue;y=h.indexOf("y");if(h.slice(y)===L){T[L]=h.slice(0,y);break}}}else{for(c=O;c!==P;c+=z){d=r.xaxes[c];if(n.cartesian.indexOf(d+L)!==-1){T[L]=d;break}}}}}}function v(e,t,r,a,n){var i=new Array(r);var o;function l(e,r){if(t.indexOf(r)!==-1&&a[r]===undefined){i[e]=r;a[r]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<r;o++){l(o,e[o])}}else{l(0,n);for(o=1;o<r;o++){l(o,n+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:s}},layoutAttributes:s,sizeDefaults:c,contentDefaults:d}},{"../../lib":169,"../../lib/regex":184,"../../plot_api/plot_template":203,"../../plots/cartesian/constants":218,"../../plots/domain":238}],97:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/constants");var n=e("../../plot_api/plot_template").templatedArray;t.exports=n("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",a.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",a.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":203,"../../plots/cartesian/constants":218}],98:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var l=i==="log"&&r.type==="linear",s=i==="linear"&&r.type==="log";if(!(l||s))return;var u=t._fullLayout.images,c=r._id.charAt(0),f,d;for(var v=0;v<u.length;v++){f=u[v];d="images["+v+"].";if(f[c+"ref"]===r._id){var p=f[c],h=f["size"+c],g=null,y=null;if(l){g=n(p,r.range);var m=h/Math.pow(10,g)/2;y=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else{g=Math.pow(10,p);y=g*(Math.pow(10,h/2)-Math.pow(10,-h/2))}if(!a(g)){g=null;y=null}else if(!a(y))y=null;o(d+c,g);o(d+"size"+c,y)}}}},{"../../lib/to_log_range":192,"fast-isnumeric":18}],99:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var l="images";t.exports=function e(t,r){var a={name:l,handleItemDefaults:s};i(t,r,a)};function s(e,t,r){function i(r,n){return a.coerce(e,t,o,r,n)}var l=i("source");var s=i("visible",!!l);if(!s)return t;i("layer");i("xanchor");i("yanchor");i("sizex");i("sizey");i("sizing");i("opacity");var u={_fullLayout:r},c=["x","y"];for(var f=0;f<2;f++){var d=c[f],v=n.coerceRef(e,t,u,d,"paper");n.coercePosition(t,u,i,v,d,0)}return t}},{"../../lib":169,"../../plots/array_container_defaults":209,"../../plots/cartesian/axes":213,"./attributes":97}],100:[function(e,t,r){"use strict";var a=e("d3");var n=e("../drawing");var i=e("../../plots/cartesian/axes");var o=e("../../constants/xmlns_namespaces");t.exports=function e(t){var r=t._fullLayout,l=[],s={},u=[],c,f;for(f=0;f<r.images.length;f++){var d=r.images[f];if(d.visible){if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){c=d.xref+d.yref;var v=r._plots[c];if(!v){u.push(d);continue}if(v.mainplot){c=v.mainplot.id}if(!s[c]){s[c]=[]}s[c].push(d)}else if(d.layer==="above"){l.push(d)}else{u.push(d)}}}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function h(e){var r=a.select(this);if(this.img&&this.img.src===e.source){return}r.attr("xmlns",o.svg);var n=new Promise(function(t){var a=new Image;this.img=a;a.setAttribute("crossOrigin","anonymous");a.onerror=n;a.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var a=e.getContext("2d");a.drawImage(this,0,0);var n=e.toDataURL("image/png");r.attr("xlink:href",n);t()};r.on("error",n);a.src=e.source;function n(){r.remove();t()}}.bind(this));t._promises.push(n)}function g(e){var o=a.select(this);var l=i.getFromId(t,e.xref),s=i.getFromId(t,e.yref);var u=r._size,c=l?Math.abs(l.l2p(e.sizex)-l.l2p(0)):e.sizex*u.w,f=s?Math.abs(s.l2p(e.sizey)-s.l2p(0)):e.sizey*u.h;var d=c*p.x[e.xanchor].offset,v=f*p.y[e.yanchor].offset;var h=p.x[e.xanchor].sizing+p.y[e.yanchor].sizing;var g=(l?l.r2p(e.x)+l._offset:e.x*u.w+u.l)+d,y=(s?s.r2p(e.y)+s._offset:u.h-e.y*u.h+u.t)+v;switch(e.sizing){case"fill":h+=" slice";break;case"stretch":h="none";break}o.attr({x:g,y:y,width:c,height:f,preserveAspectRatio:h,opacity:e.opacity});var m=l?l._id:"",x=s?s._id:"",b=m+x;o.call(n.setClipUrl,b?"clip"+r._uid+b:null)}var y=r._imageLowerLayer.selectAll("image").data(u),m=r._imageUpperLayer.selectAll("image").data(l);y.enter().append("image");m.enter().append("image");y.exit().remove();m.exit().remove();y.each(function(e){h.bind(this)(e);g.bind(this)(e)});m.each(function(e){h.bind(this)(e);g.bind(this)(e)});var x=Object.keys(r._plots);for(f=0;f<x.length;f++){c=x[f];var b=r._plots[c];if(!b.imagelayer)continue;var _=b.imagelayer.selectAll("image").data(s[c]||[]);_.enter().append("image");_.exit().remove();_.each(function(e){h.bind(this)(e);g.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":153,"../../plots/cartesian/axes":213,"../drawing":75,d3:15}],101:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":223,"./attributes":97,"./convert_coords":98,"./defaults":99,"./draw":100}],102:[function(e,t,r){"use strict";r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3}},{}],103:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:a({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":239,"../color/attributes":49}],104:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],105:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("../../plot_api/plot_template");var o=e("./attributes");var l=e("../../plots/layout_attributes");var s=e("./helpers");t.exports=function e(t,r,u){var c=t.legend||{};var f=0;var d="normal";var v,p,h,g;for(var y=0;y<u.length;y++){var m=u[y];if(s.legendGetsTrace(m)){f++;if(a.traceIs(m,"pie"))f++}if(a.traceIs(m,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(m.fill)!==-1){d=s.isGrouped({traceorder:d})?"grouped+reversed":"reversed"}if(m.legendgroup!==undefined&&m.legendgroup!==""){d=s.isReversed({traceorder:d})?"reversed+grouped":"grouped"}}var x=n.coerce(t,r,l,"showlegend",f>1);if(x===false)return;var b=i.newContainer(r,"legend");function _(e,t){return n.coerce(c,b,o,e,t)}_("bgcolor",r.paper_bgcolor);_("bordercolor");_("borderwidth");n.coerceFont(_,"font",r.font);_("orientation");if(b.orientation==="h"){var w=t.xaxis;if(w&&w.rangeslider&&w.rangeslider.visible){v=0;h="left";p=1.1;g="bottom"}else{v=0;h="left";p=-.1;g="top"}}_("traceorder",d);if(s.isGrouped(r.legend))_("tracegroupgap");_("x",v);_("xanchor",h);_("y",p);_("yanchor",g);n.noneOrAll(c,b,["x","y"])}},{"../../lib":169,"../../plot_api/plot_template":203,"../../plots/layout_attributes":243,"../../registry":261,"./attributes":103,"./helpers":109}],106:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../lib");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib/events");var s=e("../dragelement");var u=e("../drawing");var c=e("../color");var f=e("../../lib/svg_text_utils");var d=e("./handle_click");var v=e("./constants");var p=e("../../constants/interactions");var h=e("../../constants/alignment");var g=h.LINE_SPACING;var y=h.FROM_TL;var m=h.FROM_BR;var x=e("./get_legend_data");var b=e("./style");var _=e("./helpers");var w=e("./anchor_utils");var k=p.DBLCLICKDELAY;t.exports=function e(t){var r=t._fullLayout;var l="legend"+r._uid;if(!r._infolayer||!t.calcdata)return;if(!t._legendMouseDownTime)t._legendMouseDownTime=0;var f=r.legend;var d=r.showlegend&&x(t.calcdata,f);var p=r.hiddenlabels||[];if(!r.showlegend||!d.length){r._infolayer.selectAll(".legend").remove();r._topdefs.select("#"+l).remove();i.autoMargin(t,"legend");return}var h=0;for(var g=0;g<d.length;g++){for(var y=0;y<d[g].length;y++){var m=d[g][y][0];var _=m.trace;var k=o.traceIs(_,"pie");var A=k?m.label:_.name;h=Math.max(h,A&&A.length||0)}}var S=false;var P=n.ensureSingle(r._infolayer,"g","legend",function(e){e.attr("pointer-events","all");S=true});var D=n.ensureSingleById(r._topdefs,"clipPath",l,function(e){e.append("rect")});var I=n.ensureSingle(P,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});I.call(c.stroke,f.bordercolor).call(c.fill,f.bgcolor).style("stroke-width",f.borderwidth+"px");var E=n.ensureSingle(P,"g","scrollbox");var N=n.ensureSingle(P,"rect","scrollbar",function(e){e.attr({rx:20,ry:3,width:0,height:0}).call(c.fill,"#808BA4")});var R=E.selectAll("g.groups").data(d);R.enter().append("g").attr("class","groups");R.exit().remove();var F=R.selectAll("g.traces").data(n.identity);F.enter().append("g").attr("class","traces");F.exit().remove();F.call(b,t).style("opacity",function(e){var t=e[0].trace;if(o.traceIs(t,"pie")){return p.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){a.select(this).call(T,t,h).call(L,t)});if(S){C(t,R,F);O(t)}var B=0,j=r.width,q=0,H=r.height;C(t,R,F);if(f._height>H){z(t)}else{O(t)}var V=r._size,U=V.l+V.w*f.x,G=V.t+V.h*(1-f.y);if(w.isRightAnchor(f)){U-=f._width}else if(w.isCenterAnchor(f)){U-=f._width/2}if(w.isBottomAnchor(f)){G-=f._height}else if(w.isMiddleAnchor(f)){G-=f._height/2}var Z=f._width,Y=V.w;if(Z>Y){U=V.l;Z=Y}else{if(U+Z>j)U=j-Z;if(U<B)U=B;Z=Math.min(j-U,f._width)}var X=f._height,W=V.h;if(X>W){G=V.t;X=W}else{if(G+X>H)G=H-X;if(G<q)G=q;X=Math.min(H-G,f._height)}u.setTranslate(P,U,G);N.on(".drag",null);P.on("wheel",null);if(f._height<=X||t._context.staticPlot){I.attr({width:Z-f.borderwidth,height:X-f.borderwidth,x:f.borderwidth/2,y:f.borderwidth/2});u.setTranslate(E,0,0);D.select("rect").attr({width:Z-2*f.borderwidth,height:X-2*f.borderwidth,x:f.borderwidth,y:f.borderwidth});u.setClipUrl(E,l);u.setRect(N,0,0,0,0);delete f._scrollY}else{var Q=Math.max(v.scrollBarMinHeight,X*X/f._height);var J=X-Q-2*v.scrollBarMargin;var $=f._height-X;var K=J/$;var ee=Math.min(f._scrollY||0,$);I.attr({width:Z-2*f.borderwidth+v.scrollBarWidth+v.scrollBarMargin,height:X-f.borderwidth,x:f.borderwidth/2,y:f.borderwidth/2});D.select("rect").attr({width:Z-2*f.borderwidth+v.scrollBarWidth+v.scrollBarMargin,height:X-2*f.borderwidth,x:f.borderwidth,y:f.borderwidth+ee});u.setClipUrl(E,l);ne(ee,Q,K);P.on("wheel",function(){ee=n.constrain(f._scrollY+a.event.deltaY/J*$,0,$);ne(ee,Q,K);if(ee!==0&&ee!==$){a.event.preventDefault()}});var te,re;var ae=a.behavior.drag().on("dragstart",function(){te=a.event.sourceEvent.clientY;re=ee}).on("drag",function(){var e=a.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;ee=n.constrain((e.clientY-te)/K+re,0,$);ne(ee,Q,K)});N.call(ae)}function ne(e,r,a){f._scrollY=t._fullLayout.legend._scrollY=e;u.setTranslate(E,0,-e);u.setRect(N,Z,v.scrollBarMargin+e*a,v.scrollBarWidth,r);D.select("rect").attr({y:f.borderwidth+e})}if(t._context.edits.legendPosition){var ie,oe,le,se;P.classed("cursor-move",true);s.init({element:P.node(),gd:t,prepFn:function(){var e=u.getTranslate(P);le=e.x;se=e.y},moveFn:function(e,t){var r=le+e,a=se+t;u.setTranslate(P,r,a);ie=s.align(r,0,V.l,V.l+V.w,f.xanchor);oe=s.align(a,0,V.t+V.h,V.t,f.yanchor)},doneFn:function(){if(ie!==undefined&&oe!==undefined){o.call("relayout",t,{"legend.x":ie,"legend.y":oe})}},clickFn:function(e,a){var n=r._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return a.clientX>=e.left&&a.clientX<=e.right&&a.clientY>=e.top&&a.clientY<=e.bottom});if(n.size()>0){M(t,P,n,e,a)}}})}};function M(e,t,r,a,n){var i=r.data()[0][0].trace;var o={event:n,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(i.type==="pie"){o.label=r.datum()[0].label}var s=l.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(a===1){t._clickTimeout=setTimeout(function(){d(r,e,a)},k)}else if(a===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var u=l.triggerHandler(e,"plotly_legenddoubleclick",o);if(u!==false)d(r,e,a)}}function T(e,t,r){var a=e.data()[0][0];var i=t._fullLayout;var l=a.trace;var s=o.traceIs(l,"pie");var c=l.index;var d=s?a.label:l.name;var v=t._context.edits.legendText&&!s;var p=n.ensureSingle(e,"text","legendtext");p.attr("text-anchor","start").classed("user-select-none",true).call(u.font,i.legend.font).text(v?A(d,r):d);function h(r){f.convertToTspans(r,t,function(){S(e,t)})}if(v){p.call(f.makeEditable,{gd:t,text:d}).call(h).on("edit",function(e){this.text(A(e,r)).call(h);var i=a.trace._fullInput||{};var l={};if(o.hasTransform(i,"groupby")){var s=o.getTransformIndices(i,"groupby");var u=s[s.length-1];var f=n.keyedContainer(i,"transforms["+u+"].styles","target","value.name");f.set(a.trace._group,e);l=f.constructUpdate()}else{l.name=e}return o.call("restyle",t,l,c)})}else{h(p)}}function A(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var a=r-e.length;a>0;a--)e+=" ";return e}function L(e,t){var r,i=1;var o=n.ensureSingle(e,"rect","legendtoggle",function(e){e.style("cursor","pointer").attr("pointer-events","all").call(c.fill,"rgba(0,0,0,0)")});o.on("mousedown",function(){r=(new Date).getTime();if(r-t._legendMouseDownTime<k){i+=1}else{i=1;t._legendMouseDownTime=r}});o.on("mouseup",function(){if(t._dragged||t._editing)return;var r=t._fullLayout.legend;if((new Date).getTime()-t._legendMouseDownTime>k){i=Math.max(i-1,1)}M(t,r,e,i,a.event)})}function S(e,t){var r=e.data()[0][0];if(!r.trace.showlegend){e.remove();return}var a=e.select("g[class*=math-group]");var n=a.node();var i=t._fullLayout.legend;var o=i.font.size*g;var l,s;if(n){var c=u.bBox(n);l=c.height;s=c.width;u.setTranslate(a,0,l/4)}else{var d=e.select(".legendtext");var v=f.lineCount(d);var p=d.node();l=o*v;s=p?u.bBox(p).width:0;var h=o*(.3+(1-v)/2);f.positionText(d,40,h)}l=Math.max(l,16)+3;r.height=l;r.width=s}function C(e,t,r){var n=e._fullLayout;var i=n.legend;var o=i.borderwidth;var l=_.isGrouped(i);var s=0;i._width=0;i._height=0;if(_.isVertical(i)){if(l){t.each(function(e,t){u.setTranslate(this,0,t*i.tracegroupgap)})}r.each(function(e){var t=e[0],r=t.height,a=t.width;u.setTranslate(this,o,5+o+i._height+r/2);i._height+=r;i._width=Math.max(i._width,a)});i._width+=45+o*2;i._height+=10+o*2;if(l){i._height+=(i._lgroupsLength-1)*i.tracegroupgap}s=40}else if(l){var c=[i._width],f=t.data();for(var d=0,v=f.length;d<v;d++){var p=f[d].map(function(e){return e[0].width});var h=40+Math.max.apply(null,p);i._width+=i.tracegroupgap+h;c.push(i._width)}t.each(function(e,t){u.setTranslate(this,c[t],0)});t.each(function(){var e=a.select(this),t=e.selectAll("g.traces"),r=0;t.each(function(e){var t=e[0],a=t.height;u.setTranslate(this,0,5+o+r+a/2);r+=a});i._height=Math.max(i._height,r)});i._height+=10+o*2;i._width+=o*2}else{var g=0,y=0,m=0,x=0,b=0,w=i.tracegroupgap||5,k;r.each(function(e){m=Math.max(40+e[0].width,m);b+=40+e[0].width+w});k=n.width-(n.margin.r+n.margin.l)>o+b-w;r.each(function(e){var t=e[0],r=k?40+e[0].width:m;if(o+x+w+r>n.width-(n.margin.r+n.margin.l)){x=0;g=g+y;i._height=i._height+y;y=0}u.setTranslate(this,o+x,5+o+t.height/2+g);i._width+=w+r;i._height=Math.max(i._height,t.height);x+=w+r;y=Math.max(t.height,y)});i._width+=o*2;i._height+=10+o*2}i._width=Math.ceil(i._width);i._height=Math.ceil(i._height);r.each(function(t){var r=t[0],n=a.select(this).select(".legendtoggle");u.setRect(n,0,-r.height/2,(e._context.edits.legendText?0:i._width)+s,r.height)})}function O(e){var t=e._fullLayout,r=t.legend;var a="left";if(w.isRightAnchor(r)){a="right"}else if(w.isCenterAnchor(r)){a="center"}var n="top";if(w.isBottomAnchor(r)){n="bottom"}else if(w.isMiddleAnchor(r)){n="middle"}i.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*y[a],r:r._width*m[a],b:r._height*m[n],t:r._height*y[n]})}function z(e){var t=e._fullLayout,r=t.legend;var a="left";if(w.isRightAnchor(r)){a="right"}else if(w.isCenterAnchor(r)){a="center"}i.autoMargin(e,"legend",{x:r.x,y:.5,l:r._width*y[a],r:r._width*m[a],b:0,t:0})}},{"../../constants/alignment":148,"../../constants/interactions":150,"../../lib":169,"../../lib/events":162,"../../lib/svg_text_utils":190,"../../plots/plots":245,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"./anchor_utils":102,"./constants":104,"./get_legend_data":107,"./handle_click":108,"./helpers":109,"./style":111,d3:15}],107:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("./helpers");t.exports=function e(t,r){var i={},o=[],l=false,s={},u=0;var c,f;function d(e,t){if(e===""||!n.isGrouped(r)){var a="~~i"+u;o.push(a);i[a]=[[t]];u++}else if(o.indexOf(e)===-1){o.push(e);l=true;i[e]=[[t]]}else i[e].push([t])}for(c=0;c<t.length;c++){var v=t[c],p=v[0],h=p.trace,g=h.legendgroup;if(!n.legendGetsTrace(h)||!h.showlegend)continue;if(a.traceIs(h,"pie")){if(!s[g])s[g]={};for(f=0;f<v.length;f++){var y=v[f].label;if(!s[g][y]){d(g,{label:y,color:v[f].color,i:v[f].i,trace:h});s[g][y]=true}}}else d(g,p)}if(!o.length)return[];var m=o.length,x,b;if(l&&n.isGrouped(r)){b=new Array(m);for(c=0;c<m;c++){x=i[o[c]];b[c]=n.isReversed(r)?x.reverse():x}}else{b=[new Array(m)];for(c=0;c<m;c++){x=i[o[c]][0];b[0][n.isReversed(r)?m-c-1:c]=x}m=1}r._lgroupsLength=m;return b}},{"../../registry":261,"./helpers":109}],108:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../registry");var i=true;t.exports=function e(t,r,o){if(r._dragged||r._editing)return;var l=r._fullLayout.hiddenlabels?r._fullLayout.hiddenlabels.slice():[];var s=t.data()[0][0];var u=r._fullData;var c=s.trace;var f=c.legendgroup;var d,v,p,h,g,y;var m={};var x=[];var b=[];var _=[];function w(e,t,r){var a=x.indexOf(e);var n=m[t];if(!n){n=m[t]=[]}if(x.indexOf(e)===-1){x.push(e);a=x.length-1}n[a]=r;return a}function k(e,t){var r=e._fullInput;if(n.hasTransform(r,"groupby")){var i=b[r.index];if(!i){var o=n.getTransformIndices(r,"groupby");var l=o[o.length-1];i=a.keyedContainer(r,"transforms["+l+"].styles","target","value.visible");b[r.index]=i}var s=i.get(e._group);if(s===undefined){s=true}if(s!==false){i.set(e._group,t)}_[r.index]=w(r.index,"visible",r.visible===false?false:true)}else{var u=r.visible===false?false:t;w(r.index,"visible",u)}}if(o===1&&i&&r.data&&r._context.showTips){a.notifier(a._(r,"Double-click on legend to isolate one trace"),"long");i=false}else{i=false}if(n.traceIs(c,"pie")){var M=s.label,T=l.indexOf(M);if(o===1){if(T===-1)l.push(M);else l.splice(T,1)}else if(o===2){l=[];r.calcdata[0].forEach(function(e){if(M!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&T===-1){l=[]}}n.call("relayout",r,"hiddenlabels",l)}else{var A=f&&f.length;var L=[];var S;if(A){for(d=0;d<u.length;d++){S=u[d];if(!S.visible)continue;if(S.legendgroup===f){L.push(d)}}}if(o===1){var C;switch(c.visible){case true:C="legendonly";break;case false:C=false;break;case"legendonly":C=true;break}if(A){for(d=0;d<u.length;d++){if(u[d].visible!==false&&u[d].legendgroup===f){k(u[d],C)}}}else{k(c,C)}}else if(o===2){var O,z,P;var D=true;for(d=0;d<u.length;d++){O=u[d]===c;if(O)continue;z=A&&u[d].legendgroup===f;if(!z&&u[d].visible===true&&!n.traceIs(u[d],"notLegendIsolatable")){D=false;break}}for(d=0;d<u.length;d++){if(u[d].visible===false)continue;if(n.traceIs(u[d],"notLegendIsolatable")){continue}switch(c.visible){case"legendonly":k(u[d],true);break;case true:P=D?true:"legendonly";O=u[d]===c;z=O||A&&u[d].legendgroup===f;k(u[d],z?true:P);break}}}for(d=0;d<b.length;d++){p=b[d];if(!p)continue;var I=p.constructUpdate();var E=Object.keys(I);for(v=0;v<E.length;v++){h=E[v];y=m[h]=m[h]||[];y[_[d]]=I[h]}}g=Object.keys(m);for(d=0;d<g.length;d++){h=g[d];for(v=0;v<x.length;v++){if(!m[h].hasOwnProperty(v)){m[h][v]=undefined}}}n.call("restyle",r,m,x)}}},{"../../lib":169,"../../registry":261}],109:[function(e,t,r){"use strict";r.legendGetsTrace=function e(t){return t.visible&&t.showlegend!==undefined};r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],110:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":103,"./defaults":105,"./draw":106,"./style":111}],111:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../lib");var o=e("../drawing");var l=e("../color");var s=e("../../traces/scatter/subtypes");var u=e("../../traces/pie/style_one");t.exports=function e(t,r){t.each(function(e){var t=a.select(this);var r=i.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var n=r.selectAll("g.legendfill").data([e]);n.enter().append("g").classed("legendfill",true);var o=r.selectAll("g.legendlines").data([e]);o.enter().append("g").classed("legendlines",true);var l=r.selectAll("g.legendsymbols").data([e]);l.enter().append("g").classed("legendsymbols",true);l.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(d).each(v).each(g).each(c).each(f).each(p).each(h);function c(e){var t=e[0].trace;var r=t.visible&&t.fill&&t.fill!=="none";var n=s.hasLines(t);var i=t.contours;if(i&&i.type==="constraint"){n=i.showlines;r=i._operation!=="="}var l=a.select(this).select(".legendfill").selectAll("path").data(r?[e]:[]);l.enter().append("path").classed("js-fill",true);l.exit().remove();l.attr("d","M5,0h30v6h-30z").call(o.fillGroupStyle);var u=a.select(this).select(".legendlines").selectAll("path").data(n?[e]:[]);u.enter().append("path").classed("js-line",true).attr("d","M5,0h30");u.exit().remove();u.call(o.lineGroupStyle)}function f(e){var t=e[0],n=t.trace,l=s.hasMarkers(n),u=s.hasText(n),c=s.hasLines(n);var f,d;function v(e,t,r){var a=i.nestedProperty(n,e).get(),o=Array.isArray(a)&&t?t(a):a;if(r){if(o<r[0])return r[0];else if(o>r[1])return r[1]}return o}function p(e){return e[0]}if(l||u||c){var h={};var g={};if(l){h.mc=v("marker.color",p);h.mo=v("marker.opacity",i.mean,[.2,1]);h.ms=v("marker.size",i.mean,[2,16]);h.mlc=v("marker.line.color",p);h.mlw=v("marker.line.width",i.mean,[0,5]);g.marker={sizeref:1,sizemin:1,sizemode:"diameter"}}if(c){g.line={width:v("line.width",p,[0,10])}}if(u){h.tx="Aa";h.tp=v("textposition",p);h.ts=10;h.tc=v("textfont.color",p);h.tf=v("textfont.family",p)}f=[i.minExtend(t,h)];d=i.minExtend(n,g);d.selectedpoints=null}var y=a.select(this).select("g.legendpoints");var m=y.selectAll("path.scatterpts").data(l?f:[]);m.enter().append("path").classed("scatterpts",true).attr("transform","translate(20,0)");m.exit().remove();m.call(o.pointStyle,d,r);if(l)f[0].mrc=3;var x=y.selectAll("g.pointtext").data(u?f:[]);x.enter().append("g").classed("pointtext",true).append("text").attr("transform","translate(20,0)");x.exit().remove();x.selectAll("text").call(o.textPointStyle,d,r)}function d(e){var t=e[0].trace,r=t.marker||{},i=r.line||{},o=a.select(this).select("g.legendpoints").selectAll("path.legendbar").data(n.traceIs(t,"bar")?[e]:[]);o.enter().append("path").classed("legendbar",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");o.exit().remove();o.each(function(e){var t=a.select(this),n=e[0],o=(n.mlw+1||i.width+1)-1;t.style("stroke-width",o+"px").call(l.fill,n.mc||r.color);if(o){t.call(l.stroke,n.mlc||i.color)}})}function v(e){var t=e[0].trace,r=a.select(this).select("g.legendpoints").selectAll("path.legendbox").data(n.traceIs(t,"box-violin")&&t.visible?[e]:[]);r.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();r.each(function(){var e=t.line.width,r=a.select(this);r.style("stroke-width",e+"px").call(l.fill,t.fillcolor);if(e){l.stroke(r,t.line.color)}})}function p(e){var t=e[0].trace,r=a.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.type==="candlestick"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var n=t[r?"increasing":"decreasing"];var i=n.line.width,o=a.select(this);o.style("stroke-width",i+"px").call(l.fill,n.fillcolor);if(i){l.stroke(o,n.line.color)}})}function h(e){var t=e[0].trace,r=a.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.type==="ohlc"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var n=t[r?"increasing":"decreasing"];var i=n.line.width,s=a.select(this);s.style("fill","none").call(o.dashLine,n.line.dash,i);if(i){l.stroke(s,n.line.color)}})}function g(e){var t=e[0].trace,r=a.select(this).select("g.legendpoints").selectAll("path.legendpie").data(n.traceIs(t,"pie")&&t.visible?[e]:[]);r.enter().append("path").classed("legendpie",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();if(r.size())r.call(u,e[0],t)}}},{"../../lib":169,"../../registry":261,"../../traces/pie/style_one":365,"../../traces/scatter/subtypes":389,"../color":50,"../drawing":75,d3:15}],112:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../plots/plots");var i=e("../../plots/cartesian/axis_ids");var o=e("../../lib");var l=e("../../../build/ploticon");var s=o._;var u=t.exports={};u.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:l.camera,click:function(e){var t=e._context.toImageButtonOptions;var r={format:t.format||"png"};o.notifier(s(e,"Taking snapshot - this may take a few seconds"),"long");if(r.format!=="svg"&&o.isIE()){o.notifier(s(e,"IE only supports svg.  Changing format to svg."),"long");r.format="svg"}["filename","width","height","scale"].forEach(function(e){if(t[e]){r[e]=t[e]}});a.call("downloadImage",e,r).then(function(t){o.notifier(s(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){o.notifier(s(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:l.disk,click:function(e){n.sendDataToCloud(e)}};u.zoom2d={name:"zoom2d",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:c};u.pan2d={name:"pan2d",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:c};u.select2d={name:"select2d",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:c};u.lasso2d={name:"lasso2d",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:c};u.zoomIn2d={name:"zoomIn2d",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:c};u.zoomOut2d={name:"zoomOut2d",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:c};u.autoScale2d={name:"autoScale2d",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:c};u.resetScale2d={name:"resetScale2d",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:c};u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:c};u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:c};function c(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var o=r.getAttribute("data-val")||true;var l=e._fullLayout;var s={};var u=i.list(e,null,true);var c="on";var f,d;if(n==="zoom"){var v=o==="in"?.5:2,p=(1+v)/2,h=(1-v)/2;var g;for(d=0;d<u.length;d++){f=u[d];if(!f.fixedrange){g=f._name;if(o==="auto")s[g+".autorange"]=true;else if(o==="reset"){if(f._rangeInitial===undefined){s[g+".autorange"]=true}else{var y=f._rangeInitial.slice();s[g+".range[0]"]=y[0];s[g+".range[1]"]=y[1]}if(f._showSpikeInitial!==undefined){s[g+".showspikes"]=f._showSpikeInitial;if(c==="on"&&!f._showSpikeInitial){c="off"}}}else{var m=[f.r2l(f.range[0]),f.r2l(f.range[1])];var x=[p*m[0]+h*m[1],p*m[1]+h*m[0]];s[g+".range[0]"]=f.l2r(x[0]);s[g+".range[1]"]=f.l2r(x[1])}}}l._cartesianSpikesEnabled=c}else{if(n==="hovermode"&&(o==="x"||o==="y")){o=l._isHoriz?"y":"x";r.setAttribute("data-val",o)}else if(n==="hovermode"&&o==="closest"){for(d=0;d<u.length;d++){f=u[d];if(c==="on"&&!f.showspikes){c="off"}}l._cartesianSpikesEnabled=c}s[n]=o}a.call("relayout",e,s)}u.zoom3d={name:"zoom3d",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:f};u.pan3d={name:"pan3d",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:f};u.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:f};u.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:f};function f(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout._subplots.gl3d;var l={};var s=n.split(".");for(var u=0;u<o.length;u++){l[o[u]+"."+s[1]]=i}var c=i==="pan"?i:"zoom";l.dragmode=c;a.call("relayout",e,l)}u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:d};u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:d};function d(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var i=e._fullLayout;var l=i._subplots.gl3d;var s={};for(var u=0;u<l.length;u++){var c=l[u],f=c+".camera",d=i[c]._scene;if(n==="resetDefault"){s[f]=null}else if(n==="resetLastSave"){s[f]=o.extendDeep({},d.cameraInitial)}}a.call("relayout",e,s)}u.hoverClosest3d={name:"hoverClosest3d",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:v};function v(e,t){var r=t.currentTarget;var n=r._previousVal||false;var i=e.layout;var l=e._fullLayout;var s=l._subplots.gl3d;var u=["xaxis","yaxis","zaxis"];var c=["showspikes","spikesides","spikethickness","spikecolor"];var f={};var d={};var v={};if(n){v=o.extendDeep(i,n);r._previousVal=null}else{v={"allaxes.showspikes":false};for(var p=0;p<s.length;p++){var h=s[p],g=l[h],y=f[h]={};y.hovermode=g.hovermode;v[h+".hovermode"]=false;for(var m=0;m<3;m++){var x=u[m];d=y[x]={};for(var b=0;b<c.length;b++){var _=c[b];d[_]=g[x][_]}}}r._previousVal=o.extendDeep({},f)}a.call("relayout",e,v)}u.zoomInGeo={name:"zoomInGeo",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:p};u.zoomOutGeo={name:"zoomOutGeo",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:p};u.resetGeo={name:"resetGeo",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:p};u.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:h};function p(e,t){var r=t.currentTarget;var n=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout;var l=o._subplots.geo;for(var s=0;s<l.length;s++){var u=l[s];var c=o[u];if(n==="zoom"){var f=c.projection.scale;var d=i==="in"?2*f:.5*f;a.call("relayout",e,u+".projection.scale",d)}else if(n==="reset"){y(e,"geo")}}}u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:h};u.hoverClosestPie={name:"hoverClosestPie",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:h};function h(e){var t=e._fullLayout;var r;if(t._has("cartesian")){r=t._isHoriz?"y":"x"}else r="closest";var n=e._fullLayout.hovermode?false:r;a.call("relayout",e,"hovermode",n)}u.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:function(e,t){h(e);v(e,t)}};u.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:l.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");c(e,t);r.setAttribute("data-attr","resetLastSave");d(e,t);y(e,"geo");y(e,"mapbox")}};u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled=t._cartesianSpikesEnabled==="on"?"off":"on";var r=g(e);a.call("relayout",e,r)}};function g(e){var t=e._fullLayout;var r=i.list(e,null,true);var a={};var n,o;for(var l=0;l<r.length;l++){n=r[l];o=n._name;a[o+".showspikes"]=t._cartesianSpikesEnabled==="on"?true:n._showSpikeInitial}return a}u.resetViewMapbox={name:"resetViewMapbox",title:function(e){return s(e,"Reset view")},attr:"reset",icon:l.home,click:function(e){y(e,"mapbox")}};function y(e,t){var r=e._fullLayout;var n=r._subplots[t];var i={};for(var o=0;o<n.length;o++){var l=n[o];var s=r[l]._subplot;var u=s.viewInitial;var c=Object.keys(u);for(var f=0;f<c.length;f++){var d=c[f];i[l+"."+d]=u[d]}}a.call("relayout",e,i)}},{"../../../build/ploticon":2,"../../lib":169,"../../plots/cartesian/axis_ids":216,"../../plots/plots":245,"../../registry":261}],113:[function(e,t,r){"use strict";r.manage=e("./manage")},{"./manage":114}],114:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_ids");var n=e("../../traces/scatter/subtypes");var i=e("../../registry");var o=e("./modebar");var l=e("./buttons");t.exports=function e(t){var r=t._fullLayout,a=t._context,n=r._modeBar;if(!a.displayModeBar){if(n){n.destroy();delete r._modeBar}return}if(!Array.isArray(a.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(a.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=a.modeBarButtons;var l;if(Array.isArray(i)&&i.length){l=d(i)}else{l=s(t,a.modeBarButtonsToRemove,a.modeBarButtonsToAdd)}if(n)n.update(t,l);else r._modeBar=o(t,l)};function s(e,t,r){var a=e._fullLayout;var n=e._fullData;var i=a._has("cartesian");var o=a._has("gl3d");var s=a._has("geo");var d=a._has("pie");var v=a._has("gl2d");var p=a._has("ternary");var h=a._has("mapbox");var g=a._has("polar");var y=u(a);var m=[];function x(e){if(!e.length)return;var r=[];for(var a=0;a<e.length;a++){var n=e[a];if(t.indexOf(n)!==-1)continue;r.push(l[n])}m.push(r)}x(["toImage","sendDataToCloud"]);var b=[];var _=[];var w=[];var k=[];if((i||v||d||p)+s+o+h+g>1){_=["toggleHover"];w=["resetViews"]}else if(s){b=["zoomInGeo","zoomOutGeo"];_=["hoverClosestGeo"];w=["resetGeo"]}else if(o){_=["hoverClosest3d"];w=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(h){_=["toggleHover"];w=["resetViewMapbox"]}else if(v){_=["hoverClosestGl2d"]}else if(d){_=["hoverClosestPie"]}else{_=["toggleHover"]}if(i){_=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if((i||v)&&!y){b=["zoomIn2d","zoomOut2d","autoScale2d"];if(w[0]!=="resetViews")w=["resetScale2d"]}if(o){k=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((i||v)&&!y||p){k=["zoom2d","pan2d"]}else if(h||s){k=["pan2d"]}else if(g){k=["zoom2d"]}if(c(n)){k.push("select2d","lasso2d")}x(k);x(b.concat(w));x(_);return f(m,r)}function u(e){var t=a.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function c(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var a=e[r];if(!a._module||!a._module.selectPoints)continue;if(i.traceIs(a,"scatter-like")){if(n.hasMarkers(a)||n.hasText(a)){t=true}}else if(i.traceIs(a,"box-violin")){if(a.boxpoints==="all"||a.points==="all"){t=true}}else t=true}return t}function f(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function d(e){for(var t=0;t<e.length;t++){var r=e[t];for(var a=0;a<r.length;a++){var n=r[a];if(typeof n==="string"){if(l[n]!==undefined){e[t][a]=l[n]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":216,"../../registry":261,"../../traces/scatter/subtypes":389,"./buttons":112,"./modebar":115}],115:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../../lib");var o=e("../../../build/ploticon");function l(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var s=l.prototype;s.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;if(r.displayModeBar==="hover"){this.element.className="modebar modebar--hover"}else this.element.className="modebar";var a=!this.hasButtons(t);var n=this.hasLogo!==r.displaylogo;var i=this.locale!==r.locale;this.locale=r.locale;if(a||n||i){this.removeAllButtons();this.updateButtons(t);if(r.displaylogo){this.element.appendChild(this.getLogo());this.hasLogo=true}}this.updateActiveButton()};s.updateButtons=function(e){var t=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var r=t.createGroup();e.forEach(function(e){var a=e.name;if(!a){throw new Error("must provide button 'name' in button config")}if(t.buttonsNames.indexOf(a)!==-1){throw new Error("button name '"+a+"' is taken")}t.buttonsNames.push(a);var n=t.createButton(e);t.buttonElements.push(n);r.appendChild(n)});t.element.appendChild(r)})};s.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};s.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip");r.className="modebar-btn";var n=e.title;if(n===undefined)n=e.name;else if(typeof n==="function")n=n(this.graphInfo);if(n||n===0)r.setAttribute("data-title",n);if(e.attr!==undefined)r.setAttribute("data-attr",e.attr);var i=e.val;if(i!==undefined){if(typeof i==="function")i=i(this.graphInfo);r.setAttribute("data-val",i)}var l=e.click;if(typeof l!=="function"){throw new Error("must provide button 'click' function in button config")}else{r.addEventListener("click",function(r){e.click(t.graphInfo,r);t.updateActiveButton(r.currentTarget)})}r.setAttribute("data-toggle",e.toggle||false);if(e.toggle)a.select(r).classed("active",true);var s=e.icon;if(typeof s==="function"){r.appendChild(s())}else{r.appendChild(this.createIcon(s||o.question))}r.setAttribute("data-gravity",e.gravity||"n");return r};s.createIcon=function(e){var t=n(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",a=document.createElementNS(r,"svg"),i=document.createElementNS(r,"path");a.setAttribute("height","1em");a.setAttribute("width",e.width/t+"em");a.setAttribute("viewBox",[0,0,e.width,t].join(" "));i.setAttribute("d",e.path);if(e.transform){i.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}a.appendChild(i);return a};s.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var n=e.getAttribute("data-val")||true,o=e.getAttribute("data-attr"),l=e.getAttribute("data-toggle")==="true",s=a.select(e);if(l){if(o===r){s.classed("active",!s.classed("active"))}}else{var u=o===null?o:i.nestedProperty(t,o).get();s.classed("active",u===n)}})};s.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var a=0;a<e[r].length;a++){if(e[r][a].name!==t[r][a].name)return false}}return true};s.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");t.href="https://plot.ly/";t.target="_blank";t.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(o.plotlylogo));e.appendChild(t);return e};s.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};s.destroy=function(){i.removeElement(this.container.querySelector(".modebar"))};function u(e,t){var r=e._fullLayout;var n=new l({graphInfo:e,container:r._paperdiv.node(),buttons:t});if(r._privateplot){a.select(n.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return n}t.exports=u},{"../../../build/ploticon":2,"../../lib":169,d3:15,"fast-isnumeric":18}],116:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:a({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":203,"../../plots/font_attributes":239,"../color/attributes":49}],117:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],118:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../color");var i=e("../../plot_api/plot_template");var o=e("../../plots/array_container_defaults");var l=e("./attributes");var s=e("./constants");t.exports=function e(t,r,f,d,v){var p=t.rangeselector||{};var h=i.newContainer(r,"rangeselector");function g(e,t){return a.coerce(p,h,l,e,t)}var y=o(p,h,{name:"buttons",handleItemDefaults:u,calendar:v});var m=g("visible",y.length>0);if(m){var x=c(r,f,d);g("x",x[0]);g("y",x[1]);a.noneOrAll(t,r,["x","y"]);g("xanchor");g("yanchor");a.coerceFont(g,"font",f.font);var b=g("bgcolor");g("activecolor",n.contrast(b,s.lightAmount,s.darkAmount));g("bordercolor");g("borderwidth")}};function u(e,t,r,n){var i=n.calendar;function o(r,n){return a.coerce(e,t,l.buttons,r,n)}var s=o("visible");if(s){var u=o("step");if(u!=="all"){if(i&&i!=="gregorian"&&(u==="month"||u==="year")){t.stepmode="backward"}else{o("stepmode")}o("count")}o("label")}}function c(e,t,r){var a=r.filter(function(r){return t[r].anchor===e._id});var n=0;for(var i=0;i<a.length;i++){var o=t[a[i]].domain;if(o)n=Math.max(o[1],n)}return[e.domain[0],n+s.yPad]}},{"../../lib":169,"../../plot_api/plot_template":203,"../../plots/array_container_defaults":209,"../color":50,"./attributes":116,"./constants":117}],119:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../plots/plots");var o=e("../color");var l=e("../drawing");var s=e("../../lib");var u=e("../../lib/svg_text_utils");var c=e("../../plots/cartesian/axis_ids");var f=e("../legend/anchor_utils");var d=e("../../constants/alignment");var v=d.LINE_SPACING;var p=d.FROM_TL;var h=d.FROM_BR;var g=e("./constants");var y=e("./get_update_object");t.exports=function e(t){var r=t._fullLayout;var i=r._infolayer.selectAll(".rangeselector").data(m(t),x);i.enter().append("g").classed("rangeselector",true);i.exit().remove();i.style({cursor:"pointer","pointer-events":"all"});i.each(function(e){var r=a.select(this),i=e,o=i.rangeselector;var l=r.selectAll("g.button").data(s.filterVisible(o.buttons));l.enter().append("g").classed("button",true);l.exit().remove();l.each(function(e){var r=a.select(this);var l=y(i,e);e._isActive=b(i,e,l);r.call(_,o,e);r.call(k,o,e,t);r.on("click",function(){if(t._dragged)return;n.call("relayout",t,l)});r.on("mouseover",function(){e._isHovered=true;r.call(_,o,e)});r.on("mouseout",function(){e._isHovered=false;r.call(_,o,e)})});T(t,l,o,i._name,r)})};function m(e){var t=c.list(e,"x",true);var r=[];for(var a=0;a<t.length;a++){var n=t[a];if(n.rangeselector&&n.rangeselector.visible){r.push(n)}}return r}function x(e){return e._id}function b(e,t,r){if(t.step==="all"){return e.autorange===true}else{var a=Object.keys(r);return e.range[0]===r[a[0]]&&e.range[1]===r[a[1]]}}function _(e,t,r){var a=s.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});a.attr({rx:g.rx,ry:g.ry});a.call(o.stroke,t.bordercolor).call(o.fill,w(t,r)).style("stroke-width",t.borderwidth+"px")}function w(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function k(e,t,r,a){function n(e){u.convertToTspans(e,a)}var i=s.ensureSingle(e,"text","selector-text",function(e){e.classed("user-select-none",true).attr("text-anchor","middle")});i.call(l.font,t.font).text(M(r)).call(n)}function M(e){if(e.label)return e.label;if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function T(e,t,r,n,o){var s=0;var c=0;var d=r.borderwidth;t.each(function(){var e=a.select(this);var t=e.select(".selector-text");var n=r.font.size*v;var i=Math.max(n*u.lineCount(t),16)+3;c=Math.max(c,i)});t.each(function(){var e=a.select(this);var t=e.select(".selector-rect");var n=e.select(".selector-text");var i=n.node()&&l.bBox(n.node()).width;var o=r.font.size*v;var f=u.lineCount(n);var p=Math.max(i+10,g.minButtonWidth);e.attr("transform","translate("+(d+s)+","+d+")");t.attr({x:0,y:0,width:p,height:c});u.positionText(n,p/2,c/2-(f-1)*o/2+3);s+=p+5});var y=e._fullLayout._size;var m=y.l+y.w*r.x;var x=y.t+y.h*(1-r.y);var b="left";if(f.isRightAnchor(r)){m-=s;b="right"}if(f.isCenterAnchor(r)){m-=s/2;b="center"}var _="top";if(f.isBottomAnchor(r)){x-=c;_="bottom"}if(f.isMiddleAnchor(r)){x-=c/2;_="middle"}s=Math.ceil(s);c=Math.ceil(c);m=Math.round(m);x=Math.round(x);i.autoMargin(e,n+"-range-selector",{x:r.x,y:r.y,l:s*p[b],r:s*h[b],b:c*h[_],t:c*p[_]});o.attr("transform","translate("+m+","+x+")")}},{"../../constants/alignment":148,"../../lib":169,"../../lib/svg_text_utils":190,"../../plots/cartesian/axis_ids":216,"../../plots/plots":245,"../../registry":261,"../color":50,"../drawing":75,"../legend/anchor_utils":102,"./constants":117,"./get_update_object":120,d3:15}],120:[function(e,t,r){"use strict";var a=e("d3");t.exports=function e(t,r){var a=t._name;var i={};if(r.step==="all"){i[a+".autorange"]=true}else{var o=n(t,r);i[a+".range[0]"]=o[0];i[a+".range[1]"]=o[1]}return i};function n(e,t){var r=e.range;var n=new Date(e.r2l(r[1]));var i=t.step,o=t.count;var l;switch(t.stepmode){case"backward":l=e.l2r(+a.time[i].utc.offset(n,-o));break;case"todate":var s=a.time[i].utc.offset(n,-o);l=e.l2r(+a.time[i].utc.ceil(s));break}var u=r[1];return[l,u]}},{d3:15}],121:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":116,"./defaults":118,"./draw":119}],122:[function(e,t,r){"use strict";var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:a.background,editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":49}],123:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axis_ids").list;var n=e("../../plots/cartesian/autorange").getAutoRange;var i=e("./constants");t.exports=function e(t){var r=a(t,"x",true);for(var o=0;o<r.length;o++){var l=r[o],s=l[i.name];if(s&&s.visible&&s.autorange&&l._min.length&&l._max.length){s._input.autorange=true;s._input.range=s.range=n(l)}}}},{"../../plots/cartesian/autorange":212,"../../plots/cartesian/axis_ids":216,"./constants":124}],124:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],125:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/axis_ids");var o=e("./attributes");var l=e("./oppaxis_attributes");t.exports=function e(t,r,s){var u=t[s];var c=r[s];if(!(u.rangeslider||r._requestRangeslider[c._id]))return;if(!a.isPlainObject(u.rangeslider)){u.rangeslider={}}var f=u.rangeslider;var d=n.newContainer(c,"rangeslider");function v(e,t){return a.coerce(f,d,o,e,t)}var p,h;function g(e,t){return a.coerce(p,h,l,e,t)}var y=v("visible");if(!y)return;v("bgcolor",r.plot_bgcolor);v("bordercolor");v("borderwidth");v("thickness");c._rangesliderAutorange=v("autorange",!c.isValidRange(f.range));v("range");var m=r._subplots;if(m){var x=m.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===i.name2id(s)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var b=a.simpleMap(x,i.id2name);for(var _=0;_<b.length;_++){var w=b[_];p=f[w]||{};h=n.newContainer(d,w,"yaxis");var k=r[w];var M;if(p.range&&k.isValidRange(p.range)){M="fixed"}var T=g("rangemode",M);if(T!=="match"){g("range",k.range.slice())}k._rangesliderAutorange=T==="auto"}}d._input=f}},{"../../lib":169,"../../plot_api/plot_template":203,"../../plots/cartesian/axis_ids":216,"./attributes":122,"./oppaxis_attributes":128}],126:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var l=e("../drawing");var s=e("../color");var u=e("../titles");var c=e("../../plots/cartesian");var f=e("../../plots/cartesian/axes");var d=e("../dragelement");var v=e("../../lib/setcursor");var p=e("./constants");t.exports=function(e){var t=e._fullLayout,r=h(t);function n(e){return e._name}var o=t._infolayer.selectAll("g."+p.containerClassName).data(r,n);o.enter().append("g").classed(p.containerClassName,true).attr("pointer-events","all");o.exit().each(function(e){var r=e[p.name];t._topdefs.select("#"+r._clipId).remove()}).remove();if(r.length===0)return;o.each(function(r){var n=a.select(this),o=r[p.name],l=t[f.id2name(r.anchor)],s=o[f.id2name(r.anchor)];if(o.range){var c=o.range;var d=r.range;c[0]=r.l2r(Math.min(r.r2l(c[0]),r.r2l(d[0])));c[1]=r.l2r(Math.max(r.r2l(c[1]),r.r2l(d[1])));o._input.range=c.slice()}r.cleanRange("rangeslider.range");var v=t.margin;var h=t._size;var y=r.domain;var w=(r._boundingBox||{}).height||0;var A=Infinity;var L=f.getSubplots(e,r);for(var S=0;S<L.length;S++){var C=f.getFromId(e,L[S].substr(L[S].indexOf("y")));A=Math.min(A,C.domain[0])}o._id=p.name+r._id;o._clipId=o._id+"-"+t._uid;o._width=h.w*(y[1]-y[0]);o._height=(t.height-v.b-v.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2);var O=Math.round(v.l+h.w*y[0]);var z=Math.round(h.t+h.h*(1-A)+w+o._offsetShift+p.extraPad);n.attr("transform","translate("+O+","+z+")");var P=r.r2l(o.range[0]),D=r.r2l(o.range[1]),I=D-P;o.p2d=function(e){return e/o._width*I+P};o.d2p=function(e){return(e-P)/I*o._width};o._rl=[P,D];if(s.rangemode!=="match"){var E=l.r2l(s.range[0]),N=l.r2l(s.range[1]),R=N-E;o.d2pOppAxis=function(e){return(e-E)/R*o._height}}n.call(x,e,r,o).call(b,e,r,o).call(_,e,r,o).call(k,e,r,o,s).call(M,e,r,o).call(T,e,r,o);g(n,e,r,o);m(n,e,r,o,l,s);if(r.side==="bottom"){u.draw(e,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:t._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:z+o._height+o._offsetShift+10+1.5*r.titlefont.size,"text-anchor":"middle"}})}i.autoMargin(e,o._id,{x:y[0],y:A,l:0,r:0,t:0,b:o._height+v.b+w,pad:p.extraPad+o._offsetShift*2})})};function h(e){var t=f.list({_fullLayout:e},"x",true),r=p.name,a=[];if(e._has("gl2d"))return a;for(var n=0;n<t.length;n++){var i=t[n];if(i[r]&&i[r].visible)a.push(i)}return a}function g(e,t,r,n){var i=e.select("rect."+p.slideBoxClassName).node(),l=e.select("rect."+p.grabAreaMinClassName).node(),s=e.select("rect."+p.grabAreaMaxClassName).node();e.on("mousedown",function(){var u=a.event,c=u.target,f=u.clientX,p=f-e.node().getBoundingClientRect().left,h=n.d2p(r._rl[0]),g=n.d2p(r._rl[1]);var m=d.coverSlip();m.addEventListener("mousemove",x);m.addEventListener("mouseup",b);function x(o){var u=+o.clientX-f;var d,x,b;switch(c){case i:b="ew-resize";d=h+u;x=g+u;break;case l:b="col-resize";d=h+u;x=g;break;case s:b="col-resize";d=h;x=g+u;break;default:b="ew-resize";d=p;x=p+u;break}if(x<d){var _=x;x=d;d=_}n._pixelMin=d;n._pixelMax=x;v(a.select(m),b);y(e,t,r,n)}function b(){m.removeEventListener("mousemove",x);m.removeEventListener("mouseup",b);o.removeElement(m)}})}function y(e,t,r,a){function i(e){return r.l2r(o.constrain(e,a._rl[0],a._rl[1]))}var l=i(a.p2d(a._pixelMin)),s=i(a.p2d(a._pixelMax));window.requestAnimationFrame(function(){n.call("relayout",t,r._name+".range",[l,s])})}function m(e,t,r,a,n,i){var l=p.handleWidth/2;function s(e){return o.constrain(e,0,a._width)}function u(e){return o.constrain(e,0,a._height)}function c(e){return o.constrain(e,-l,a._width+l)}var f=s(a.d2p(r._rl[0])),d=s(a.d2p(r._rl[1]));e.select("rect."+p.slideBoxClassName).attr("x",f).attr("width",d-f);e.select("rect."+p.maskMinClassName).attr("width",f);e.select("rect."+p.maskMaxClassName).attr("x",d).attr("width",a._width-d);if(i.rangemode!=="match"){var v=a._height-u(a.d2pOppAxis(n._rl[1])),h=a._height-u(a.d2pOppAxis(n._rl[0]));e.select("rect."+p.maskMinOppAxisClassName).attr("x",f).attr("height",v).attr("width",d-f);e.select("rect."+p.maskMaxOppAxisClassName).attr("x",f).attr("y",h).attr("height",a._height-h).attr("width",d-f);e.select("rect."+p.slideBoxClassName).attr("y",v).attr("height",h-v)}var g=.5;var y=Math.round(c(f-l))-g,m=Math.round(c(d-l))+g;e.select("g."+p.grabberMinClassName).attr("transform","translate("+y+","+g+")");e.select("g."+p.grabberMaxClassName).attr("transform","translate("+m+","+g+")")}function x(e,t,r,a){var n=o.ensureSingle(e,"rect",p.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=a.borderwidth%2===0?a.borderwidth:a.borderwidth-1;var s=-a._offsetShift;var u=l.crispRound(t,a.borderwidth);n.attr({width:a._width+i,height:a._height+i,transform:"translate("+s+","+s+")",fill:a.bgcolor,stroke:a.bordercolor,"stroke-width":u})}function b(e,t,r,a){var n=t._fullLayout;var i=o.ensureSingleById(n._topdefs,"clipPath",a._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:a._width,height:a._height})}function _(e,t,r,n){var s=f.getSubplots(t,r),u=t.calcdata;var d=e.selectAll("g."+p.rangePlotClassName).data(s,o.identity);d.enter().append("g").attr("class",function(e){return p.rangePlotClassName+" "+e}).call(l.setClipUrl,n._clipId);d.order();d.exit().remove();var v;d.each(function(e,o){var l=a.select(this),s=o===0;var d=f.getFromId(t,e,"y"),p=d._name,h=n[p];var g={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:n.range.slice(),calendar:r.calendar},width:n._width,height:n._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};g.layout[p]={type:d.type,domain:[0,1],range:h.rangemode!=="match"?h.range.slice():d.range.slice(),calendar:d.calendar};i.supplyDefaults(g);var y=g._fullLayout.xaxis;var m=g._fullLayout[p];var x={id:e,plotgroup:l,xaxis:y,yaxis:m,isRangePlot:true};if(s)v=x;else{x.mainplot="xy";x.mainplotinfo=v}c.rangePlot(t,x,w(u,e))})}function w(e,t){var r=[];for(var a=0;a<e.length;a++){var n=e[a],i=n[0].trace;if(i.xaxis+i.yaxis===t){r.push(n)}}return r}function k(e,t,r,a,n){var i=o.ensureSingle(e,"rect",p.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",a._height).call(s.fill,p.maskColor);var l=o.ensureSingle(e,"rect",p.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("height",a._height).call(s.fill,p.maskColor);if(n.rangemode!=="match"){var u=o.ensureSingle(e,"rect",p.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});u.attr("width",a._width).call(s.fill,p.maskOppAxisColor);var c=o.ensureSingle(e,"rect",p.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});c.attr("width",a._width).style("border-top",p.maskOppBorder).call(s.fill,p.maskOppAxisColor)}}function M(e,t,r,a){if(t._context.staticPlot)return;var n=o.ensureSingle(e,"rect",p.slideBoxClassName,function(e){e.attr({y:0,cursor:p.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:a._height,fill:p.slideBoxFill})}function T(e,t,r,a){var n=o.ensureSingle(e,"g",p.grabberMinClassName);var i=o.ensureSingle(e,"g",p.grabberMaxClassName);var l={x:0,width:p.handleWidth,rx:p.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":p.handleStrokeWidth,"shape-rendering":"crispEdges"};var u={y:Math.round(a._height/4),height:Math.round(a._height/2)};var c=o.ensureSingle(n,"rect",p.handleMinClassName,function(e){e.attr(l)});c.attr(u);var f=o.ensureSingle(i,"rect",p.handleMaxClassName,function(e){e.attr(l)});f.attr(u);if(t._context.staticPlot)return;var d={width:p.grabAreaWidth,x:0,y:0,fill:p.grabAreaFill,cursor:p.grabAreaCursor};var v=o.ensureSingle(n,"rect",p.grabAreaMinClassName,function(e){e.attr(d)});v.attr("height",a._height);var h=o.ensureSingle(i,"rect",p.grabAreaMaxClassName,function(e){e.attr(d)});h.attr("height",a._height)}},{"../../lib":169,"../../lib/setcursor":188,"../../plots/cartesian":224,"../../plots/cartesian/axes":213,"../../plots/plots":245,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"../titles":141,"./constants":124,d3:15}],127:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./attributes");var i=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:a.extendFlat({},n,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":169,"./attributes":122,"./calc_autorange":123,"./defaults":125,"./draw":126,"./oppaxis_attributes":128}],128:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],129:[function(e,t,r){"use strict";var a=e("../annotations/attributes");var n=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var l=e("../../plot_api/plot_template").templatedArray;t.exports=l("shape",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},a.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:o({},a.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},n.color,{editType:"arraydraw"}),width:o({},n.width,{editType:"calcIfAutorange+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":163,"../../plot_api/plot_template":203,"../../traces/scatter/attributes":367,"../annotations/attributes":35,"../drawing/attributes":74}],130:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("./constants");var o=e("./helpers");t.exports=function e(t){var r=t._fullLayout,o=a.filterVisible(r.shapes);if(!o.length||!t._fullData.length)return;for(var u=0;u<o.length;u++){var f=o[u];var d,v;if(f.xref!=="paper"){var p=f.xsizemode==="pixel"?f.xanchor:f.x0,h=f.xsizemode==="pixel"?f.xanchor:f.x1;d=n.getFromId(t,f.xref);v=c(d,p,h,f.path,i.paramIsX);if(v)n.expand(d,v,l(f))}if(f.yref!=="paper"){var g=f.ysizemode==="pixel"?f.yanchor:f.y0,y=f.ysizemode==="pixel"?f.yanchor:f.y1;d=n.getFromId(t,f.yref);v=c(d,g,y,f.path,i.paramIsY);if(v)n.expand(d,v,s(f))}}};function l(e){return u(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function s(e){return u(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function u(e,t,r,n,l,s){var u=e/2,c=s;if(t==="pixel"){var f=l?o.extractPathCoords(l,s?i.paramIsY:i.paramIsX):[r,n];var d=a.aggNums(Math.max,null,f),v=a.aggNums(Math.min,null,f),p=v<0?Math.abs(v)+u:u,h=d>0?d+u:u;return{ppad:u,ppadplus:c?p:h,ppadminus:c?h:p}}else{return{ppad:u}}}function c(e,t,r,a,n){var l=e.type==="category"?e.r2c:e.d2c;if(t!==undefined)return[l(t),l(r)];if(!a)return;var s=Infinity,u=-Infinity,c=a.match(i.segmentRE),f,d,v,p,h;if(e.type==="date")l=o.decodeDate(l);for(f=0;f<c.length;f++){d=c[f];v=n[d.charAt(0)].drawn;if(v===undefined)continue;p=c[f].substr(1).match(i.paramRE);if(!p||p.length<v)continue;h=l(p[v]);if(h<s)s=h;if(h>u)u=h}if(u>=s)return[s,u]}},{"../../lib":169,"../../plots/cartesian/axes":213,"./constants":131,"./helpers":134}],131:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],132:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var l=e("./helpers");t.exports=function e(t,r){i(t,r,{name:"shapes",handleItemDefaults:s})};function s(e,t,r){function i(r,n){return a.coerce(e,t,o,r,n)}var s=i("visible");if(!s)return;i("layer");i("opacity");i("fillcolor");i("line.color");i("line.width");i("line.dash");var u=e.path?"path":"rect",c=i("type",u),f=i("xsizemode"),d=i("ysizemode");var v=["x","y"];for(var p=0;p<2;p++){var h=v[p],g=h+"anchor",y=h==="x"?f:d,m={_fullLayout:r},x,b,_;var w=n.coerceRef(e,t,m,h,"","paper");if(w!=="paper"){x=n.getFromId(m,w);_=l.rangeToShapePosition(x);b=l.shapePositionToRange(x)}else{b=_=a.identity}if(c!=="path"){var k=.25,M=.75;var T=h+"0",A=h+"1",L=e[T],S=e[A];e[T]=b(e[T],true);e[A]=b(e[A],true);if(y==="pixel"){i(T,0);i(A,10)}else{n.coercePosition(t,m,i,w,T,k);n.coercePosition(t,m,i,w,A,M)}t[T]=_(t[T]);t[A]=_(t[A]);e[T]=L;e[A]=S}if(y==="pixel"){var C=e[g];e[g]=b(e[g],true);n.coercePosition(t,m,i,w,g,.25);t[g]=_(t[g]);e[g]=C}}if(c==="path"){i("path")}else{a.noneOrAll(e,t,["x0","x1","y0","y1"])}}},{"../../lib":169,"../../plots/array_container_defaults":209,"../../plots/cartesian/axes":213,"./attributes":129,"./helpers":134}],133:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../color");var l=e("../drawing");var s=e("../../plot_api/plot_template").arrayEditor;var u=e("../dragelement");var c=e("../../lib/setcursor");var f=e("./constants");var d=e("./helpers");t.exports={draw:v,drawOne:p};function v(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var a=t._plots[r].shapelayer;if(a)a.selectAll("path").remove()}for(var n=0;n<t.shapes.length;n++){if(t.shapes[n].visible){p(e,n)}}}function p(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=e._fullLayout.shapes[t]||{};if(!r._input||r.visible===false)return;if(r.layer!=="below"){i(e._fullLayout._shapeUpperLayer)}else if(r.xref==="paper"||r.yref==="paper"){i(e._fullLayout._shapeLowerLayer)}else{var a=e._fullLayout._plots[r.xref+r.yref];if(a){var n=a.mainplotinfo||a;i(n.shapelayer)}else{i(e._fullLayout._shapeLowerLayer)}}function i(a){var n={"data-index":t,"fill-rule":"evenodd",d:y(e,r)},i=r.line.width?r.line.color:"rgba(0,0,0,0)";var s=a.append("path").attr(n).style("opacity",r.opacity).call(o.stroke,i).call(o.fill,r.fillcolor).call(l.dashLine,r.line.dash,r.line.width);h(s,e,r);if(e._context.edits.shapePosition)g(e,s,r,t,a)}}function h(e,t,r){var a=(r.xref+r.yref).replace(/paper/g,"");e.call(l.setClipUrl,a?"clip"+t._fullLayout._uid+a:null)}function g(e,t,r,o,v){var p=10;var g=10;var m=r.xsizemode==="pixel";var b=r.ysizemode==="pixel";var _=r.type==="line";var w=r.type==="path";var k=s(e.layout,"shapes",r);var M=k.modifyItem;var T,A,L,S,C,O;var z,P,D,I,E,N,R,F;var B;var j=i.getFromId(e,r.xref),q=i.getFromId(e,r.yref),H=d.getDataToPixel(e,j),V=d.getDataToPixel(e,q,true),U=d.getPixelToData(e,j),G=d.getPixelToData(e,q,true);var Z=W();var Y={element:Z.node(),gd:e,prepFn:$,doneFn:K,clickFn:ee},X;u.init(Y);Z.node().onmousemove=J;function W(){return _?Q():t}function Q(){var e=10,a=Math.max(r.line.width,e);var n=v.append("g").attr("data-index",o);n.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":a,"stroke-opacity":"0"});var i={"fill-opacity":"0"};var l=a/2>e?a/2:e;n.append("circle").attr({"data-line-point":"start-point",cx:m?H(r.xanchor)+r.x0:H(r.x0),cy:b?V(r.yanchor)-r.y0:V(r.y0),r:l}).style(i).classed("cursor-grab",true);n.append("circle").attr({"data-line-point":"end-point",cx:m?H(r.xanchor)+r.x1:H(r.x1),cy:b?V(r.yanchor)-r.y1:V(r.y1),r:l}).style(i).classed("cursor-grab",true);return n}function J(e){if(_){if(e.target.tagName==="path"){X="move"}else{X=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var r=Y.element.getBoundingClientRect();var a=r.right-r.left,n=r.bottom-r.top,i=e.clientX-r.left,o=e.clientY-r.top,l=!w&&a>p&&n>g&&!e.shiftKey?u.getCursor(i/a,1-o/n):"move";c(t,l);X=l.split("-")[0]}}function $(a){if(m){C=H(r.xanchor)}if(b){O=V(r.yanchor)}if(r.type==="path"){B=r.path}else{T=m?r.x0:H(r.x0);A=b?r.y0:V(r.y0);L=m?r.x1:H(r.x1);S=b?r.y1:V(r.y1)}if(T<L){D=T;R="x0";I=L;F="x1"}else{D=L;R="x1";I=T;F="x0"}if(!b&&A<S||b&&A>S){z=A;E="y0";P=S;N="y1"}else{z=S;E="y1";P=A;N="y0"}J(a);ae(v,r);ie(t,r,e);Y.moveFn=X==="move"?te:re}function K(){c(t);ne(v);h(t,e,r);a.call("relayout",e,k.getUpdateObj())}function ee(){ne(v)}function te(a,n){if(r.type==="path"){var i=function(e){return e},o=i,l=i;if(m){M("xanchor",r.xanchor=U(C+a))}else{o=function e(t){return U(H(t)+a)};if(j&&j.type==="date")o=d.encodeDate(o)}if(b){M("yanchor",r.yanchor=G(O+n))}else{l=function e(t){return G(V(t)+n)};if(q&&q.type==="date")l=d.encodeDate(l)}M("path",r.path=x(B,o,l))}else{if(m){M("xanchor",r.xanchor=U(C+a))}else{M("x0",r.x0=U(T+a));M("x1",r.x1=U(L+a))}if(b){M("yanchor",r.yanchor=G(O+n))}else{M("y0",r.y0=G(A+n));M("y1",r.y1=G(S+n))}}t.attr("d",y(e,r));ae(v,r)}function re(a,n){if(w){var i=function(e){return e},o=i,l=i;if(m){M("xanchor",r.xanchor=U(C+a))}else{o=function e(t){return U(H(t)+a)};if(j&&j.type==="date")o=d.encodeDate(o)}if(b){M("yanchor",r.yanchor=G(O+n))}else{l=function e(t){return G(V(t)+n)};if(q&&q.type==="date")l=d.encodeDate(l)}M("path",r.path=x(B,o,l))}else if(_){if(X==="resize-over-start-point"){var s=T+a;var u=b?A-n:A+n;M("x0",r.x0=m?s:U(s));M("y0",r.y0=b?u:G(u))}else if(X==="resize-over-end-point"){var c=L+a;var f=b?S-n:S+n;M("x1",r.x1=m?c:U(c));M("y1",r.y1=b?f:G(f))}}else{var h=~X.indexOf("n")?z+n:z,k=~X.indexOf("s")?P+n:P,Z=~X.indexOf("w")?D+a:D,Y=~X.indexOf("e")?I+a:I;if(~X.indexOf("n")&&b)h=z-n;if(~X.indexOf("s")&&b)k=P-n;if(!b&&k-h>g||b&&h-k>g){M(E,r[E]=b?h:G(h));M(N,r[N]=b?k:G(k))}if(Y-Z>p){M(R,r[R]=m?Z:U(Z));M(F,r[F]=m?Y:U(Y))}}t.attr("d",y(e,r));ae(v,r)}function ae(e,t){if(m||b){r()}function r(){var r=t.type!=="path";var a=e.selectAll(".visual-cue").data([0]);var i=1;a.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",true);var o=H(m?t.xanchor:n.midRange(r?[t.x0,t.x1]:d.extractPathCoords(t.path,f.paramIsX)));var l=V(b?t.yanchor:n.midRange(r?[t.y0,t.y1]:d.extractPathCoords(t.path,f.paramIsY)));o=d.roundPositionForSharpStrokeRendering(o,i);l=d.roundPositionForSharpStrokeRendering(l,i);if(m&&b){var s="M"+(o-1-i)+","+(l-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";a.attr("d",s)}else if(m){var u="M"+(o-1-i)+","+(l-9-i)+"v18 h2 v-18 Z";a.attr("d",u)}else{var c="M"+(o-9-i)+","+(l-1-i)+"h18 v2 h-18 Z";a.attr("d",c)}}}function ne(e){e.selectAll(".visual-cue").remove()}function ie(e,t,r){var a=t.xref,n=t.yref,o=i.getFromId(r,a),s=i.getFromId(r,n);var u="";if(a!=="paper"&&!o.autorange)u+=a;if(n!=="paper"&&!s.autorange)u+=n;e.call(l.setClipUrl,u?"clip"+r._fullLayout._uid+u:null)}}function y(e,t){var r=t.type,a=i.getFromId(e,t.xref),n=i.getFromId(e,t.yref),o=e._fullLayout._size,l,s,u,c,f,v,p,h;if(a){l=d.shapePositionToRange(a);s=function(e){return a._offset+a.r2p(l(e,true))}}else{s=function(e){return o.l+o.w*e}}if(n){u=d.shapePositionToRange(n);c=function(e){return n._offset+n.r2p(u(e,true))}}else{c=function(e){return o.t+o.h*(1-e)}}if(r==="path"){if(a&&a.type==="date")s=d.decodeDate(s);if(n&&n.type==="date")c=d.decodeDate(c);return m(t,s,c)}if(t.xsizemode==="pixel"){var g=s(t.xanchor);f=g+t.x0;v=g+t.x1}else{f=s(t.x0);v=s(t.x1)}if(t.ysizemode==="pixel"){var y=c(t.yanchor);p=y-t.y0;h=y-t.y1}else{p=c(t.y0);h=c(t.y1)}if(r==="line")return"M"+f+","+p+"L"+v+","+h;if(r==="rect")return"M"+f+","+p+"H"+v+"V"+h+"H"+f+"Z";var x=(f+v)/2,b=(p+h)/2,_=Math.abs(x-f),w=Math.abs(b-p),k="A"+_+","+w,M=x+_+","+b,T=x+","+(b-w);return"M"+M+k+" 0 1,1 "+T+k+" 0 0,1 "+M+"Z"}function m(e,t,r){var a=e.path,i=e.xsizemode,o=e.ysizemode,l=e.xanchor,s=e.yanchor;return a.replace(f.segmentRE,function(e){var a=0,u=e.charAt(0),c=f.paramIsX[u],d=f.paramIsY[u],v=f.numParams[u];var p=e.substr(1).replace(f.paramRE,function(e){if(c[a]){if(i==="pixel")e=t(l)+Number(e);else e=t(e)}else if(d[a]){if(o==="pixel")e=r(s)-Number(e);else e=r(e)}a++;if(a>v)e="X";return e});if(a>v){p=p.replace(/[\s,]*X.*/,"");n.log("Ignoring extra params in segment "+e)}return u+p})}function x(e,t,r){return e.replace(f.segmentRE,function(e){var a=0,n=e.charAt(0),i=f.paramIsX[n],o=f.paramIsY[n],l=f.numParams[n];var s=e.substr(1).replace(f.paramRE,function(e){if(a>=l)return e;if(i[a])e=t(e);else if(o[a])e=r(e);a++;return e});return n+s})}},{"../../lib":169,"../../lib/setcursor":188,"../../plot_api/plot_template":203,"../../plots/cartesian/axes":213,"../../registry":261,"../color":50,"../dragelement":72,"../drawing":75,"./constants":131,"./helpers":134}],134:[function(e,t,r){"use strict";var a=e("./constants");var n=e("../../lib");r.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};r.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};r.decodeDate=function(e){return function(t){if(t.replace)t=t.replace("_"," ");return e(t)}};r.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};r.extractPathCoords=function(e,t){var r=[];var i=e.match(a.segmentRE);i.forEach(function(e){var i=t[e.charAt(0)].drawn;if(i===undefined)return;var o=e.substr(1).match(a.paramRE);if(!o||o.length<i)return;r.push(n.cleanNumber(o[i]))});return r};r.getDataToPixel=function(e,t,a){var n=e._fullLayout._size,i;if(t){var o=r.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=r.decodeDate(i)}else if(a){i=function(e){return n.t+n.h*(1-e)}}else{i=function(e){return n.l+n.w*e}}return i};r.getPixelToData=function(e,t,a){var n=e._fullLayout._size,i;if(t){var o=r.rangeToShapePosition(t);i=function(e){return o(t.p2r(e-t._offset))}}else if(a){i=function(e){return 1-(e-n.t)/n.h}}else{i=function(e){return(e-n.l)/n.w}}return i};r.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var a=Math.round(e);return r?a+.5:a}},{"../../lib":169,"./constants":131}],135:[function(e,t,r){"use strict";var a=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:a.draw,drawOne:a.drawOne}},{"../../plots/cartesian/include_components":223,"./attributes":129,"./calc_autorange":130,"./defaults":132,"./draw":133}],136:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var l=e("../../plots/animation_attributes");var s=e("../../plot_api/plot_template").templatedArray;var u=e("./constants");var c=s("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(s("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i({},n,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:l.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:a({})},font:a({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":163,"../../plot_api/edit_types":196,"../../plot_api/plot_template":203,"../../plots/animation_attributes":208,"../../plots/font_attributes":239,"../../plots/pad_attributes":244,"./constants":137}],137:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],138:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var l=o.name;var s=i.steps;t.exports=function e(t,r){n(t,r,{name:l,handleItemDefaults:u})};function u(e,t,r){function o(r,n){return a.coerce(e,t,i,r,n)}var l=n(e,t,{name:"steps",handleItemDefaults:c});var s=0;for(var u=0;u<l.length;u++){if(l[u].visible)s++}var f;if(s<2)f=t.visible=false;else f=o("visible");if(!f)return;t._stepCount=s;var d=t._visibleSteps=a.filterVisible(l);var v=o("active");if(!(l[v]||{}).visible)t.active=d[0]._index;o("x");o("y");a.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("len");o("lenmode");o("pad.t");o("pad.r");o("pad.b");o("pad.l");a.coerceFont(o,"font",r.font);var p=o("currentvalue.visible");if(p){o("currentvalue.xanchor");o("currentvalue.prefix");o("currentvalue.suffix");o("currentvalue.offset");a.coerceFont(o,"currentvalue.font",t.font)}o("transition.duration");o("transition.easing");o("bgcolor");o("activebgcolor");o("bordercolor");o("borderwidth");o("ticklen");o("tickwidth");o("tickcolor");o("minorticklen")}function c(e,t){function r(r,n){return a.coerce(e,t,s,r,n)}var n;if(e.method!=="skip"&&!Array.isArray(e.args)){n=t.visible=false}else n=r("visible");if(n){r("method");r("args");var i=r("label","step-"+t._index);r("value",i);r("execute")}}},{"../../lib":169,"../../plots/array_container_defaults":209,"./attributes":136,"./constants":137}],139:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var c=e("../../plot_api/plot_template").arrayEditor;var f=e("./constants");var d=e("../../constants/alignment");var v=d.LINE_SPACING;var p=d.FROM_TL;var h=d.FROM_BR;t.exports=function e(t){var r=t._fullLayout,i=y(r,t);var o=r._infolayer.selectAll("g."+f.containerClassName).data(i.length>0?[0]:[]);o.enter().append("g").classed(f.containerClassName,true).style("cursor","ew-resize");function l(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}n.autoMargin(t,g(e))}o.exit().each(function(){a.select(this).selectAll("g."+f.groupClassName).each(l)}).remove();if(i.length===0)return;var s=o.selectAll("g."+f.groupClassName).data(i,m);s.enter().append("g").classed(f.groupClassName,true);s.exit().each(l).remove();for(var u=0;u<i.length;u++){var c=i[u];x(t,c)}s.each(function(e){var r=a.select(this);C(e);n.manageCommandObserver(t,e,e._visibleSteps,function(e){var a=r.data()[0];if(a.active===e.index)return;if(a._dragging)return;A(t,r,a,e.index,false,true)});b(t,a.select(this),e)})};function g(e){return f.autoMarginIdRoot+e._index}function y(e,t){var r=e[f.name],a=[];for(var n=0;n<r.length;n++){var i=r[n];if(!i.visible)continue;i._gd=t;a.push(i)}return a}function m(e){return e._index}function x(e,t){var r=o.tester.selectAll("g."+f.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(f.labelGroupClass,true);var i=0;var l=0;r.each(function(e){var r=a.select(this);var n=k(r,{step:e},t);var s=n.node();if(s){var u=o.bBox(s);l=Math.max(l,u.height);i=Math.max(i,u.width)}});r.remove();var c=t._dims={};c.inputAreaWidth=Math.max(f.railWidth,f.gripHeight);var d=e._fullLayout._size;c.lx=d.l+d.w*t.x;c.ly=d.t+d.h*(1-t.y);if(t.lenmode==="fraction"){c.outerLength=Math.round(d.w*t.len)}else{c.outerLength=t.len}c.inputAreaStart=0;c.inputAreaLength=Math.round(c.outerLength-t.pad.l-t.pad.r);var v=c.inputAreaLength-2*f.stepInset;var y=v/(t._stepCount-1);var m=i+f.labelPadding;c.labelStride=Math.max(1,Math.ceil(m/y));c.labelHeight=l;c.currentValueMaxWidth=0;c.currentValueHeight=0;c.currentValueTotalHeight=0;c.currentValueMaxLines=1;if(t.currentvalue.visible){var x=o.tester.append("g");r.each(function(e){var r=_(x,t,e.label);var a=r.node()&&o.bBox(r.node())||{width:0,height:0};var n=s.lineCount(r);c.currentValueMaxWidth=Math.max(c.currentValueMaxWidth,Math.ceil(a.width));c.currentValueHeight=Math.max(c.currentValueHeight,Math.ceil(a.height));c.currentValueMaxLines=Math.max(c.currentValueMaxLines,n)});c.currentValueTotalHeight=c.currentValueHeight+t.currentvalue.offset;x.remove()}c.height=c.currentValueTotalHeight+f.tickOffset+t.ticklen+f.labelOffset+c.labelHeight+t.pad.t+t.pad.b;var b="left";if(u.isRightAnchor(t)){c.lx-=c.outerLength;b="right"}if(u.isCenterAnchor(t)){c.lx-=c.outerLength/2;b="center"}var w="top";if(u.isBottomAnchor(t)){c.ly-=c.height;w="bottom"}if(u.isMiddleAnchor(t)){c.ly-=c.height/2;w="middle"}c.outerLength=Math.ceil(c.outerLength);c.height=Math.ceil(c.height);c.lx=Math.round(c.lx);c.ly=Math.round(c.ly);var M={y:t.y,b:c.height*h[w],t:c.height*p[w]};if(t.lenmode==="fraction"){M.l=0;M.xl=t.x-t.len*p[b];M.r=0;M.xr=t.x+t.len*h[b]}else{M.x=t.x;M.l=c.outerLength*p[b];M.r=c.outerLength*h[b]}n.autoMargin(e,g(t),M)}function b(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(_,r).call(I,r).call(M,r).call(S,r).call(D,e,r).call(w,e,r);var a=r._dims;o.setTranslate(t,a.lx+r.pad.l,a.ly+r.pad.t);t.call(O,r,false);t.call(_,r)}function _(e,t,r){if(!t.currentvalue.visible)return;var a=t._dims;var n,i;switch(t.currentvalue.xanchor){case"right":n=a.inputAreaLength-f.currentValueInset-a.currentValueMaxWidth;i="left";break;case"center":n=a.inputAreaLength*.5;i="middle";break;default:n=f.currentValueInset;i="left"}var u=l.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":i,"data-notex":1})});var c=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){c+=r}else{var d=t.steps[t.active].label;c+=d}if(t.currentvalue.suffix){c+=t.currentvalue.suffix}u.call(o.font,t.currentvalue.font).text(c).call(s.convertToTspans,t._gd);var p=s.lineCount(u);var h=(a.currentValueMaxLines+1-p)*t.currentvalue.font.size*v;s.positionText(u,n,h);return u}function w(e,t,r){var a=l.ensureSingle(e,"rect",f.gripRectClass,function(a){a.call(L,t,e,r).style("pointer-events","all")});a.attr({width:f.gripWidth,height:f.gripHeight,rx:f.gripRadius,ry:f.gripRadius}).call(i.stroke,r.bordercolor).call(i.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function k(e,t,r){var a=l.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":"middle","data-notex":1})});a.call(o.font,r.font).text(t.step.label).call(s.convertToTspans,r._gd);return a}function M(e,t){var r=l.ensureSingle(e,"g",f.labelsClass);var n=t._dims;var i=r.selectAll("g."+f.labelGroupClass).data(n.labelSteps);i.enter().append("g").classed(f.labelGroupClass,true);i.exit().remove();i.each(function(e){var r=a.select(this);r.call(k,e,t);o.setTranslate(r,z(t,e.fraction),f.tickOffset+t.ticklen+t.font.size*v+f.labelOffset+n.currentValueTotalHeight)})}function T(e,t,r,a,n){var i=Math.round(a*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){A(e,t,r,o,true,n)}}function A(e,t,r,a,i,o){var l=r.active;r.active=a;c(e.layout,f.name,r).applyUpdate("active",a);var s=r.steps[r.active];t.call(O,r,o);t.call(_,r);e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:l});if(s&&s.method&&i){if(t._nextMethod){t._nextMethod.step=s;t._nextMethod.doCallback=i;t._nextMethod.doTransition=o}else{t._nextMethod={step:s,doCallback:i,doTransition:o};t._nextMethodRaf=window.requestAnimationFrame(function(){var r=t._nextMethod.step;if(!r.method)return;if(r.execute){n.executeAPICommand(e,r.method,r.args)}t._nextMethod=null;t._nextMethodRaf=null})}}}function L(e,t,r){var n=r.node();var o=a.select(t);function l(){return r.data()[0]}e.on("mousedown",function(){var e=l();t.emit("plotly_sliderstart",{slider:e});var s=r.select("."+f.gripRectClass);a.event.stopPropagation();a.event.preventDefault();s.call(i.fill,e.activebgcolor);var u=P(e,a.mouse(n)[0]);T(t,r,e,u,true);e._dragging=true;o.on("mousemove",function(){var e=l();var i=P(e,a.mouse(n)[0]);T(t,r,e,i,false)});o.on("mouseup",function(){var e=l();e._dragging=false;s.call(i.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function S(e,t){var r=e.selectAll("rect."+f.tickRectClass).data(t._visibleSteps);var n=t._dims;r.enter().append("rect").classed(f.tickRectClass,true);r.exit().remove();r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"});r.each(function(e,r){var l=r%n.labelStride===0;var s=a.select(this);s.attr({height:l?t.ticklen:t.minorticklen}).call(i.fill,l?t.tickcolor:t.tickcolor);o.setTranslate(s,z(t,r/(t._stepCount-1))-.5*t.tickwidth,(l?f.tickOffset:f.minorTickOffset)+n.currentValueTotalHeight)})}function C(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var a=0;a<r;a+=t.labelStride){t.labelSteps.push({fraction:a/(r-1),step:e._visibleSteps[a]})}}function O(e,t,r){var a=e.select("rect."+f.gripRectClass);var n=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){n=i;break}}var o=z(t,n/(t._stepCount-1));if(t._invokingCommand)return;var l=a;if(r&&t.transition.duration>0){l=l.transition().duration(t.transition.duration).ease(t.transition.easing)}l.attr("transform","translate("+(o-f.gripWidth*.5)+","+t._dims.currentValueTotalHeight+")")}function z(e,t){var r=e._dims;return r.inputAreaStart+f.stepInset+(r.inputAreaLength-2*f.stepInset)*Math.min(1,Math.max(0,t))}function P(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-f.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*f.stepInset-2*r.inputAreaStart)))}function D(e,t,r){var a=r._dims;var n=l.ensureSingle(e,"rect",f.railTouchRectClass,function(a){a.call(L,t,e,r).style("pointer-events","all")});n.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,f.tickOffset+r.ticklen+a.labelHeight)}).call(i.fill,r.bgcolor).attr("opacity",0);o.setTranslate(n,0,a.currentValueTotalHeight)}function I(e,t){var r=t._dims;var a=r.inputAreaLength-f.railInset*2;var n=l.ensureSingle(e,"rect",f.railRectClass);n.attr({width:a,height:f.railWidth,rx:f.railRadius,ry:f.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");o.setTranslate(n,f.railInset,(r.inputAreaWidth-f.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":148,"../../lib":169,"../../lib/svg_text_utils":190,"../../plot_api/plot_template":203,"../../plots/plots":245,"../color":50,"../drawing":75,"../legend/anchor_utils":102,"./constants":137,d3:15}],140:[function(e,t,r){"use strict";var a=e("./constants");t.exports={moduleType:"component",name:a.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":136,"./constants":137,"./defaults":138,"./draw":139}],141:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib");var s=e("../drawing");var u=e("../color");var c=e("../../lib/svg_text_utils");var f=e("../../constants/interactions");t.exports={draw:v};var d=/ [XY][0-9]* /;function v(e,t,r){var v=r.propContainer;var p=r.propName;var h=r.placeholder;var g=r.traceIndex;var y=r.avoid||{};var m=r.attributes;var x=r.transform;var b=r.containerGroup;var _=e._fullLayout;var w=v.titlefont||{};var k=w.family;var M=w.size;var T=w.color;var A=1;var L=false;var S=(v.title||"").trim();var C;if(p==="title")C="titleText";else if(p.indexOf("axis")!==-1)C="axisTitleText";else if(p.indexOf("colorbar"!==-1))C="colorbarTitleText";var O=e._context.edits[C];if(S==="")A=0;else if(S.replace(d," % ")===h.replace(d," % ")){A=.2;L=true;if(!O)S=""}var z=S||O;if(!b){b=l.ensureSingle(_._infolayer,"g","g-"+t)}var P=b.selectAll("text").data(z?[0]:[]);P.enter().append("text");P.text(S).attr("class",t);P.exit().remove();if(!z)return b;function D(e){l.syncOrAsync([I,E],e)}function I(t){var r;if(x){r="";if(x.rotate){r+="rotate("+[x.rotate,m.x,m.y]+")"}if(x.offset){r+="translate(0, "+x.offset+")"}}else{r=null}t.attr("transform",r);t.style({"font-family":k,"font-size":a.round(M,2)+"px",fill:u.rgb(T),opacity:A*u.opacity(T),"font-weight":i.fontWeight}).attr(m).call(c.convertToTspans,e);return i.previousPromises(e)}function E(e){var t=a.select(e.node().parentNode);if(y&&y.selection&&y.side&&S){t.attr("transform",null);var r=0;var i={left:"right",right:"left",top:"bottom",bottom:"top"}[y.side];var o=["left","top"].indexOf(y.side)!==-1?-1:1;var u=n(y.pad)?y.pad:2;var c=s.bBox(t.node());var f={left:0,top:0,right:_.width,bottom:_.height};var d=y.maxShift||(f[y.side]-c[y.side])*(y.side==="left"||y.side==="top"?-1:1);if(d<0)r=d;else{var v=y.offsetLeft||0;var p=y.offsetTop||0;c.left-=v;c.right-=v;c.top-=p;c.bottom-=p;y.selection.each(function(){var e=s.bBox(this);if(l.bBoxIntersect(c,e,u)){r=Math.max(r,o*(e[y.side]-c[i])+u)}});r=Math.min(d,r)}if(r>0||d<0){var h={left:[-r,0],right:[r,0],top:[0,-r],bottom:[0,r]}[y.side];t.attr("transform","translate("+h+")")}}}P.call(D);function N(){A=0;L=true;P.text(h).on("mouseover.opacity",function(){a.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){a.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}if(O){if(!S)N();else P.on(".opacity",null);P.call(c.makeEditable,{gd:e}).on("edit",function(t){if(g!==undefined){o.call("restyle",e,p,t,g)}else{o.call("relayout",e,p,t)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(e){this.text(e||" ").call(c.positionText,m.x,m.y)})}P.classed("js-placeholder",L);return b}},{"../../constants/interactions":150,"../../lib":169,"../../lib/svg_text_utils":190,"../../plots/plots":245,"../../registry":261,"../color":50,"../drawing":75,d3:15,"fast-isnumeric":18}],142:[function(e,t,r){"use strict";var a=e("../../plots/font_attributes");var n=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var l=e("../../plots/pad_attributes");var s=e("../../plot_api/plot_template").templatedArray;var u=s("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(s("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i({},l,{}),font:a({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":163,"../../plot_api/edit_types":196,"../../plot_api/plot_template":203,"../../plots/font_attributes":239,"../../plots/pad_attributes":244,"../color/attributes":49}],143:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],144:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var l=o.name;var s=i.buttons;t.exports=function e(t,r){var a={name:l,handleItemDefaults:u};n(t,r,a)};function u(e,t,r){function o(r,n){return a.coerce(e,t,i,r,n)}var l=n(e,t,{name:"buttons",handleItemDefaults:c});var s=o("visible",l.length>0);if(!s)return;o("active");o("direction");o("type");o("showactive");o("x");o("y");a.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("pad.t");o("pad.r");o("pad.b");o("pad.l");a.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor);o("bordercolor");o("borderwidth")}function c(e,t){function r(r,n){return a.coerce(e,t,s,r,n)}var n=r("visible",e.method==="skip"||Array.isArray(e.args));if(n){r("method");r("args");r("label");r("execute")}}},{"../../lib":169,"../../plots/array_container_defaults":209,"./attributes":142,"./constants":143}],145:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var c=e("../../plot_api/plot_template").arrayEditor;var f=e("../../constants/alignment").LINE_SPACING;var d=e("./constants");var v=e("./scrollbox");t.exports=function e(t){var r=t._fullLayout,i=l.filterVisible(r[d.name]);function o(e){n.autoMargin(t,C(e))}var s=r._menulayer.selectAll("g."+d.containerClassName).data(i.length>0?[0]:[]);s.enter().append("g").classed(d.containerClassName,true).style("cursor","pointer");s.exit().each(function(){a.select(this).selectAll("g."+d.headerGroupClassName).each(o)}).remove();if(i.length===0)return;var u=s.selectAll("g."+d.headerGroupClassName).data(i,p);u.enter().append("g").classed(d.headerGroupClassName,true);var c=l.ensureSingle(s,"g",d.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var f=0;f<i.length;f++){var h=i[f];S(t,h)}var b="updatemenus"+r._uid,_=new v(t,c,b);if(u.enter().size()){c.node().parentNode.appendChild(c.node());c.call(z)}u.exit().each(function(e){c.call(z);o(e)}).remove();u.each(function(e){var r=a.select(this);var i=e.type==="dropdown"?c:null;n.manageCommandObserver(t,e,e.buttons,function(a){y(t,e,e.buttons[a.index],r,i,_,a.index,true)});if(e.type==="dropdown"){m(t,r,c,_,e);if(g(c,e)){x(t,r,c,_,e)}}else{x(t,r,null,null,e)}})};function p(e){return e._index}function h(e){return+e.attr(d.menuIndexAttrName)===-1}function g(e,t){return+e.attr(d.menuIndexAttrName)===t._index}function y(e,t,r,a,n,i,o,l){t.active=o;c(e.layout,d.name,t).applyUpdate("active",o);if(t.type==="buttons"){x(e,a,null,null,t)}else if(t.type==="dropdown"){n.attr(d.menuIndexAttrName,"-1");m(e,a,n,i,t);if(!l){x(e,a,n,i,t)}}}function m(e,t,r,a,n){var i=l.ensureSingle(t,"g",d.headerClassName,function(e){e.style("pointer-events","all")});var s=n._dims;var u=n.active;var c=n.buttons[u]||d.blankHeaderOpts;var f={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0};var v={width:s.headerWidth,height:s.headerHeight};i.call(w,n,c,e).call(O,n,f,v);var p=l.ensureSingle(t,"text",d.headerArrowClassName,function(e){e.classed("user-select-none",true).attr("text-anchor","end").call(o.font,n.font).text(d.arrowSymbol[n.direction])});p.attr({x:s.headerWidth-d.arrowOffsetX+n.pad.l,y:s.headerHeight/2+d.textOffsetY+n.pad.t});i.on("click",function(){r.call(z,String(g(r,n)?-1:n._index));x(e,t,r,a,n)});i.on("mouseover",function(){i.call(A)});i.on("mouseout",function(){i.call(L,n)});o.setTranslate(t,s.lx,s.ly)}function x(e,t,r,i,o){if(!r){r=t;r.attr("pointer-events","all")}var s=!h(r)||o.type==="buttons"?o.buttons:[];var u=o.type==="dropdown"?d.dropdownButtonClassName:d.buttonClassName;var c=r.selectAll("g."+u).data(l.filterVisible(s));var f=c.enter().append("g").classed(u,true);var v=c.exit();if(o.type==="dropdown"){f.attr("opacity","0").transition().attr("opacity","1");v.transition().attr("opacity","0").remove()}else{v.remove()}var p=0;var g=0;var m=o._dims;var x=["up","down"].indexOf(o.direction)!==-1;if(o.type==="dropdown"){if(x){g=m.headerHeight+d.gapButtonHeader}else{p=m.headerWidth+d.gapButtonHeader}}if(o.type==="dropdown"&&o.direction==="up"){g=-d.gapButtonHeader+d.gapButton-m.openHeight}if(o.type==="dropdown"&&o.direction==="left"){p=-d.gapButtonHeader+d.gapButton-m.openWidth}var k={x:m.lx+p+o.pad.l,y:m.ly+g+o.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0};var M={l:k.x+o.borderwidth,t:k.y+o.borderwidth};c.each(function(l,s){var u=a.select(this);u.call(w,o,l,e).call(O,o,k);u.on("click",function(){if(a.event.defaultPrevented)return;y(e,o,l,t,r,i,s);if(l.execute){n.executeAPICommand(e,l.method,l.args)}e.emit("plotly_buttonclicked",{menu:o,button:l,active:o.active})});u.on("mouseover",function(){u.call(A)});u.on("mouseout",function(){u.call(L,o);c.call(T,o)})});c.call(T,o);if(x){M.w=Math.max(m.openWidth,m.headerWidth);M.h=k.y-M.t}else{M.w=k.x-M.l;M.h=Math.max(m.openHeight,m.headerHeight)}M.direction=o.direction;if(i){if(c.size()){b(e,t,r,i,o,M)}else{_(i)}}}function b(e,t,r,a,n,i){var o=n.direction;var l=o==="up"||o==="down";var s=n._dims;var u=n.active,c,f,v;if(l){f=0;for(v=0;v<u;v++){f+=s.heights[v]+d.gapButton}}else{c=0;for(v=0;v<u;v++){c+=s.widths[v]+d.gapButton}}a.enable(i,c,f);if(a.hbar){a.hbar.attr("opacity","0").transition().attr("opacity","1")}if(a.vbar){a.vbar.attr("opacity","0").transition().attr("opacity","1")}}function _(e){var t=!!e.hbar,r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function w(e,t,r,a){e.call(k,t).call(M,t,r,a)}function k(e,t){var r=l.ensureSingle(e,"rect",d.itemRectClassName,function(e){e.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function M(e,t,r,a){var n=l.ensureSingle(e,"text",d.itemTextClassName,function(e){e.classed("user-select-none",true).attr({"text-anchor":"start","data-notex":1})});n.call(o.font,t.font).text(r.label).call(s.convertToTspans,a)}function T(e,t){var r=t.active;e.each(function(e,n){var o=a.select(this);if(n===r&&t.showactive){o.select("rect."+d.itemRectClassName).call(i.fill,d.activeColor)}})}function A(e){e.select("rect."+d.itemRectClassName).call(i.fill,d.hoverColor)}function L(e,t){e.select("rect."+d.itemRectClassName).call(i.fill,t.bgcolor)}function S(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var i=o.tester.selectAll("g."+d.dropdownButtonClassName).data(l.filterVisible(t.buttons));i.enter().append("g").classed(d.dropdownButtonClassName,true);var c=["up","down"].indexOf(t.direction)!==-1;i.each(function(n,i){var l=a.select(this);l.call(w,t,n,e);var u=l.select("."+d.itemTextClassName);var v=u.node()&&o.bBox(u.node()).width;var p=Math.max(v+d.textPadX,d.minWidth);var h=t.font.size*f;var g=s.lineCount(u);var y=Math.max(h*g,d.minHeight)+d.textOffsetY;y=Math.ceil(y);p=Math.ceil(p);r.widths[i]=p;r.heights[i]=y;r.height1=Math.max(r.height1,y);r.width1=Math.max(r.width1,p);if(c){r.totalWidth=Math.max(r.totalWidth,p);r.openWidth=r.totalWidth;r.totalHeight+=y+d.gapButton;r.openHeight+=y+d.gapButton}else{r.totalWidth+=p+d.gapButton;r.openWidth+=p+d.gapButton;r.totalHeight=Math.max(r.totalHeight,y);r.openHeight=r.totalHeight}});if(c){r.totalHeight-=d.gapButton}else{r.totalWidth-=d.gapButton}r.headerWidth=r.width1+d.arrowPadX;r.headerHeight=r.height1;if(t.type==="dropdown"){if(c){r.width1+=d.arrowPadX;r.totalHeight=r.height1}else{r.totalWidth=r.width1}r.totalWidth+=d.arrowPadX}i.remove();var v=r.totalWidth+t.pad.l+t.pad.r;var p=r.totalHeight+t.pad.t+t.pad.b;var h=e._fullLayout._size;r.lx=h.l+h.w*t.x;r.ly=h.t+h.h*(1-t.y);var g="left";if(u.isRightAnchor(t)){r.lx-=v;g="right"}if(u.isCenterAnchor(t)){r.lx-=v/2;g="center"}var y="top";if(u.isBottomAnchor(t)){r.ly-=p;y="bottom"}if(u.isMiddleAnchor(t)){r.ly-=p/2;y="middle"}r.totalWidth=Math.ceil(r.totalWidth);r.totalHeight=Math.ceil(r.totalHeight);r.lx=Math.round(r.lx);r.ly=Math.round(r.ly);n.autoMargin(e,C(t),{x:t.x,y:t.y,l:v*({right:1,center:.5}[g]||0),r:v*({left:1,center:.5}[g]||0),b:p*({top:1,middle:.5}[y]||0),t:p*({bottom:1,middle:.5}[y]||0)})}function C(e){return d.autoMarginIdRoot+e._index}function O(e,t,r,a){a=a||{};var n=e.select("."+d.itemRectClassName);var i=e.select("."+d.itemTextClassName);var l=t.borderwidth;var u=r.index;var c=t._dims;o.setTranslate(e,l+r.x,l+r.y);var v=["up","down"].indexOf(t.direction)!==-1;var p=a.height||(v?c.heights[u]:c.height1);n.attr({x:0,y:0,width:a.width||(v?c.width1:c.widths[u]),height:p});var h=t.font.size*f;var g=s.lineCount(i);var y=(g-1)*h/2;s.positionText(i,d.textOffsetX,p/2-y+d.textOffsetY);if(v){r.y+=c.heights[u]+r.yPad}else{r.x+=c.widths[u]+r.xPad}r.index++}function z(e,t){e.attr(d.menuIndexAttrName,t||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}},{"../../constants/alignment":148,"../../lib":169,"../../lib/svg_text_utils":190,"../../plot_api/plot_template":203,"../../plots/plots":245,"../color":50,"../drawing":75,"../legend/anchor_utils":102,"./constants":143,"./scrollbox":147,d3:15}],146:[function(e,t,r){arguments[4][140][0].apply(r,arguments)},{"./attributes":142,"./constants":143,"./defaults":144,"./draw":145,dup:140}],147:[function(e,t,r){"use strict";t.exports=l;var a=e("d3");var n=e("../color");var i=e("../drawing");var o=e("../../lib");function l(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}l.barWidth=2;l.barLength=20;l.barRadius=2;l.barPad=1;l.barColor="#808BA4";l.prototype.enable=function e(t,r,o){var s=this.gd._fullLayout,u=s.width,c=s.height;this.position=t;var f=this.position.l,d=this.position.w,v=this.position.t,p=this.position.h,h=this.position.direction,g=h==="down",y=h==="left",m=h==="right",x=h==="up",b=d,_=p,w,k,M,T;if(!g&&!y&&!m&&!x){this.position.direction="down";g=true}var A=g||x;if(A){w=f;k=w+b;if(g){M=v;T=Math.min(M+_,c);_=T-M}else{T=v+_;M=Math.max(T-_,0);_=T-M}}else{M=v;T=M+_;if(y){k=f+b;w=Math.max(k-b,0);b=k-w}else{w=f;k=Math.min(w+b,u);b=k-w}}this._box={l:w,t:M,w:b,h:_};var L=d>b,S=l.barLength+2*l.barPad,C=l.barWidth+2*l.barPad,O=f,z=v+p;if(z+C>c)z=c-C;var P=this.container.selectAll("rect.scrollbar-horizontal").data(L?[0]:[]);P.exit().on(".drag",null).remove();P.enter().append("rect").classed("scrollbar-horizontal",true).call(n.fill,l.barColor);if(L){this.hbar=P.attr({rx:l.barRadius,ry:l.barRadius,x:O,y:z,width:S,height:C});this._hbarXMin=O+S/2;this._hbarTranslateMax=b-S}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var D=p>_,I=l.barWidth+2*l.barPad,E=l.barLength+2*l.barPad,N=f+d,R=v;if(N+I>u)N=u-I;var F=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);F.exit().on(".drag",null).remove();F.enter().append("rect").classed("scrollbar-vertical",true).call(n.fill,l.barColor);if(D){this.vbar=F.attr({rx:l.barRadius,ry:l.barRadius,x:N,y:R,width:I,height:E});this._vbarYMin=R+E/2;this._vbarTranslateMax=_-E}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var B=this.id,j=w-.5,q=D?k+I+.5:k+.5,H=M-.5,V=L?T+C+.5:T+.5;var U=s._topdefs.selectAll("#"+B).data(L||D?[0]:[]);U.exit().remove();U.enter().append("clipPath").attr("id",B).append("rect");if(L||D){this._clipRect=U.select("rect").attr({x:Math.floor(j),y:Math.floor(H),width:Math.ceil(q)-Math.floor(j),height:Math.ceil(V)-Math.floor(H)});this.container.call(i.setClipUrl,B);this.bg.attr({x:f,y:v,width:d,height:p})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(L||D){var G=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var Z=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.preventDefault();a.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(L){this.hbar.on(".drag",null).call(Z)}if(D){this.vbar.on(".drag",null).call(Z)}}this.setTranslate(r,o)};l.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};l.prototype._onBoxDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t-=a.event.dx}if(this.vbar){r-=a.event.dy}this.setTranslate(t,r)};l.prototype._onBoxWheel=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t+=a.event.deltaY}if(this.vbar){r+=a.event.deltaY}this.setTranslate(t,r)};l.prototype._onBarDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){var n=t+this._hbarXMin,i=n+this._hbarTranslateMax,l=o.constrain(a.event.x,n,i),s=(l-n)/(i-n);var u=this.position.w-this._box.w;t=s*u}if(this.vbar){var c=r+this._vbarYMin,f=c+this._vbarTranslateMax,d=o.constrain(a.event.y,c,f),v=(d-c)/(f-c);var p=this.position.h-this._box.h;r=v*p}this.setTranslate(t,r)};l.prototype.setTranslate=function e(t,r){var a=this.position.w-this._box.w,n=this.position.h-this._box.h;t=o.constrain(t||0,0,a);r=o.constrain(r||0,0,n);this.translateX=t;this.translateY=r;this.container.call(i.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var l=t/a;this.hbar.call(i.setTranslate,t+l*this._hbarTranslateMax,r)}if(this.vbar){var s=r/n;this.vbar.call(i.setTranslate,t,r+s*this._vbarTranslateMax)}}},{"../../lib":169,"../color":50,"../drawing":75,d3:15}],148:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],149:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],150:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],151:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"}},{}],152:[function(e,t,r){"use strict";t.exports={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}}},{}],153:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],154:[function(e,t,r){"use strict";r.version="1.39.1";e("es6-promise").polyfill();e("../build/plotcss");e("./fonts/mathjax_config");var a=e("./registry");var n=r.register=a.register;var i=e("./plot_api");var o=Object.keys(i);for(var l=0;l<o.length;l++){var s=o[l];r[s]=i[s];n({moduleType:"apiMethod",name:s,fn:i[s]})}n(e("./traces/scatter"));n([e("./components/fx"),e("./components/legend"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars")]);n([e("./locale-en"),e("./locale-en-us")]);r.Icons=e("../build/ploticon");r.Plots=e("./plots/plots");r.Fx=e("./components/fx");r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema");r.Queue=e("./lib/queue");r.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":43,"./components/annotations3d":48,"./components/errorbars":81,"./components/fx":92,"./components/grid":96,"./components/images":101,"./components/legend":110,"./components/rangeselector":121,"./components/rangeslider":127,"./components/shapes":135,"./components/sliders":140,"./components/updatemenus":146,"./fonts/mathjax_config":155,"./lib/queue":183,"./locale-en":194,"./locale-en-us":193,"./plot_api":198,"./plot_api/plot_schema":202,"./plots/plots":245,"./registry":261,"./snapshot":266,"./traces/scatter":378,d3:15,"es6-promise":16}],155:[function(e,t,r){"use strict";if(typeof MathJax!=="undefined"){r.MathJax=true;MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:true,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});MathJax.Hub.Configured()}else{r.MathJax=false}},{}],156:[function(e,t,r){"use strict";var a=Math.PI;r.deg2rad=function(e){return e/180*a};r.rad2deg=function(e){return e/a*180};r.wrap360=function(e){var t=e%360;return t<0?t+360:t};r.wrap180=function(e){if(Math.abs(e)>180)e-=Math.round(e/360)*360;return e}},{}],157:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(a(t))return Number(t);return n}},{"../constants/numerical":151,"fast-isnumeric":18}],158:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],159:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("tinycolor2");var i=e("../plots/attributes");var o=e("../components/colorscale/get_scale");var l=Object.keys(e("../components/colorscale/scales"));var s=e("./nested_property");var u=e("./regex").counter;var c=e("../constants/interactions").DESELECTDIM;var f=e("./angles").wrap180;var d=e("./is_array").isArrayOrTypedArray;r.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(d(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,a){if(a.coerceNumber)e=+e;if(a.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var a=0;a<r.length;a++){var n=String(r[a]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var i=new RegExp(n.substr(1,n.length-2));if(i.test(e))return true}else if(e===r[a])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,n){if(!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,n){if(e%1||!a(e)||n.min!==undefined&&e<n.min||n.max!==undefined&&e>n.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){var n=typeof e==="number";if(a.strict===true||!n)t.set(r);else t.set(String(e))}else if(a.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(n(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function a(e){return n(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(a))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(o(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!a(e))t.set(r);else t.set(f(+e))}},subplotid:{coerceFunction:function(e,t,r,a){var n=a.regex||u(r);if(typeof e==="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(u(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,a){if(typeof e!=="string"){t.set(r);return}if((a.extras||[]).indexOf(e)!==-1){t.set(e);return}var n=e.split("+"),i=0;while(i<n.length){var o=n[i];if(a.flags.indexOf(o)===-1||n.indexOf(o)<i){n.splice(i,1)}else i++}if(!n.length)t.set(r);else t.set(n.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,a,n){function i(e,t,a){var n;var i={set:function(e){n=e}};if(a===undefined)a=t.dflt;r.valObjectMeta[t.valType].coerceFunction(e,i,a,t);return n}var o=n.dimensions===2||n.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(a);return}var l=n.items;var s=[];var u=Array.isArray(l);var c=u&&o&&Array.isArray(l[0]);var f=o&&u&&!c;var d=u&&!f?l.length:e.length;var v,p,h,g,y,m;a=Array.isArray(a)?a:[];if(o){for(v=0;v<d;v++){s[v]=[];h=Array.isArray(e[v])?e[v]:[];if(f)y=l.length;else if(u)y=l[v].length;else y=h.length;for(p=0;p<y;p++){if(f)g=l[p];else if(u)g=l[v][p];else g=l;m=i(h[p],g,(a[v]||[])[p]);if(m!==undefined)s[v][p]=m}}}else{for(v=0;v<d;v++){m=i(e[v],u?l[v]:l,a[v]);if(m!==undefined)s[v]=m}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var a=Array.isArray(r);var n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(n){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!v(e[i][o],a?r[i][o]:r)){return false}}}else if(!v(e[i],a?r[i]:r))return false}return true}}};r.coerce=function(e,t,a,n,i){var o=s(a,n).get();var l=s(e,n);var u=s(t,n);var c=l.get();var f=t._template;if(c===undefined&&f){c=s(f,n).get();f=0}if(i===undefined)i=o.dflt;if(o.arrayOk&&d(c)){u.set(c);return c}var p=r.valObjectMeta[o.valType].coerceFunction;p(c,u,i,o);var h=u.get();if(f&&h===i&&!v(c,o)){c=s(f,n).get();p(c,u,i,o);h=u.get()}return h};r.coerce2=function(e,t,a,n,i){var o=s(e,n),l=r.coerce(e,t,a,n,i),u=o.get();return u!==undefined&&u!==null?l:false};r.coerceFont=function(e,t,r){var a={};r=r||{};a.family=e(t+".family",r.family);a.size=e(t+".size",r.size);a.color=e(t+".color",r.color);return a};r.coerceHoverinfo=function(e,t,a){var n=t._module.attributes;var o=n.hoverinfo?n:i;var l=o.hoverinfo;var s;if(a._dataLength===1){var u=l.dflt==="all"?l.flags.slice():l.dflt.split("+");u.splice(u.indexOf("name"),1);s=u.join("+")}return r.coerce(e,t,o,"hoverinfo",s)};r.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var a;var n;if(!d(r)&&!e.selected&&!e.unselected){a=r;n=c*r}t("selected.marker.opacity",a);t("unselected.marker.opacity",n)};function v(e,t){var a=r.valObjectMeta[t.valType];if(t.arrayOk&&d(e))return true;if(a.validateFunction){return a.validateFunction(e,t)}var n={},i=n,o={set:function(e){i=e}};a.coerceFunction(e,o,n,t);return i!==n}r.validate=v},{"../components/colorscale/get_scale":63,"../components/colorscale/scales":69,"../constants/interactions":150,"../plots/attributes":210,"./angles":156,"./is_array":170,"./nested_property":177,"./regex":184,"fast-isnumeric":18,tinycolor2:33}],160:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("./loggers");var o=e("./mod");var l=e("../constants/numerical");var s=l.BADNUM;var u=l.ONEDAY;var c=l.ONEHOUR;var f=l.ONEMIN;var d=l.ONESEC;var v=l.EPOCHJD;var p=e("../registry");var h=a.time.format.utc;var g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var m=(new Date).getFullYear()-70;function x(e){return e&&p.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}r.dateTick0=function(e,t){if(x(e)){return t?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:p.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}};r.dfltRange=function(e){if(x(e)){return p.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};r.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var b,_;r.dateTime2ms=function(e,t){if(r.isJSDate(e)){var a=e.getTimezoneOffset()*f;var n=(e.getUTCMinutes()-e.getMinutes())*f+(e.getUTCSeconds()-e.getSeconds())*d+(e.getUTCMilliseconds()-e.getMilliseconds());if(n){var i=3*f;a=a-i/2+o(n-a+i/2,i)}e=Number(e)-a;if(e>=b&&e<=_)return e;return s}if(typeof e!=="string"&&typeof e!=="number")return s;e=String(e);var l=x(t);var h=e.charAt(0);if(l&&(h==="G"||h==="g")){e=e.substr(1);t=""}var w=l&&t.substr(0,7)==="chinese";var k=e.match(w?y:g);if(!k)return s;var M=k[1],T=k[3]||"1",A=Number(k[5]||1),L=Number(k[7]||0),S=Number(k[9]||0),C=Number(k[11]||0);if(l){if(M.length===2)return s;M=Number(M);var O;try{var z=p.getComponentMethod("calendars","getCal")(t);if(w){var P=T.charAt(T.length-1)==="i";T=parseInt(T,10);O=z.newDate(M,z.toMonthIndex(M,T,P),A)}else{O=z.newDate(M,Number(T),A)}}catch(e){return s}if(!O)return s;return(O.toJD()-v)*u+L*c+S*f+C*d}if(M.length===2){M=(Number(M)+2e3-m)%100+m}else M=Number(M);T-=1;var D=new Date(Date.UTC(2e3,T,A,L,S));D.setUTCFullYear(M);if(D.getUTCMonth()!==T)return s;if(D.getUTCDate()!==A)return s;return D.getTime()+C*d};b=r.MIN_MS=r.dateTime2ms("-9999");_=r.MAX_MS=r.dateTime2ms("9999-12-31 23:59:59.9999");r.isDateTime=function(e,t){return r.dateTime2ms(e,t)!==s};function w(e,t){return String(e+Math.pow(10,t)).substr(1)}var k=90*u;var M=3*c;var T=5*f;r.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=b&&e<=_))return s;if(!t)t=0;var a=Math.floor(o(e+.05,1)*10),n=Math.round(e-a/10),i,l,g,y,m,w;if(x(r)){var L=Math.floor(n/u)+v,S=Math.floor(o(e,u));try{i=p.getComponentMethod("calendars","getCal")(r).fromJD(L).formatDate("yyyy-mm-dd")}catch(e){i=h("G%Y-%m-%d")(new Date(n))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}l=t<k?Math.floor(S/c):0;g=t<k?Math.floor(S%c/f):0;y=t<M?Math.floor(S%f/d):0;m=t<T?S%d*10+a:0}else{w=new Date(n);i=h("%Y-%m-%d")(w);l=t<k?w.getUTCHours():0;g=t<k?w.getUTCMinutes():0;y=t<M?w.getUTCSeconds():0;m=t<T?w.getUTCMilliseconds()*10+a:0}return A(i,l,g,y,m)};r.ms2DateTimeLocal=function(e){if(!(e>=b+u&&e<=_-u))return s;var t=Math.floor(o(e+.05,1)*10),r=new Date(Math.round(e-t/10)),n=a.time.format("%Y-%m-%d")(r),i=r.getHours(),l=r.getMinutes(),c=r.getSeconds(),f=r.getUTCMilliseconds()*10+t;return A(n,i,l,c,f)};function A(e,t,r,a,n){if(t||r||a||n){e+=" "+w(t,2)+":"+w(r,2);if(a||n){e+=":"+w(a,2);if(n){var i=4;while(n%10===0){i-=1;n/=10}e+="."+w(n,i)}}}return e}r.cleanDate=function(e,t,a){if(r.isJSDate(e)||typeof e==="number"){if(x(a)){i.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=r.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!r.isDateTime(e,a)){i.error("unrecognized date",e);return t}return e};var L=/%\d?f/g;function S(e,t,r,a){e=e.replace(L,function(e){var r=Math.min(+e.charAt(1)||6,6),a=(t/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0";return a});var n=new Date(Math.floor(t+.05));if(x(a)){try{e=p.getComponentMethod("calendars","worldCalFmt")(e,t,a)}catch(e){return"Invalid"}}return r(e)(n)}var C=[59,59.9,59.99,59.999,59.9999];function O(e,t){var r=o(e+.05,u);var a=w(Math.floor(r/c),2)+":"+w(o(Math.floor(r/f),60),2);if(t!=="M"){if(!n(t))t=0;var i=Math.min(o(e/d,60),C[t]);var l=(100+i).toFixed(t).substr(1);if(t>0){l=l.replace(/0+$/,"").replace(/[\.]$/,"")}a+=":"+l}return a}r.formatDate=function(e,t,r,a,n,i){n=x(n)&&n;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return O(e,r)+"\n"+S(i.dayMonthYear,e,a,n)}}return S(t,e,a,n)};var z=3*u;r.incrementMonth=function(e,t,r){r=x(r)&&r;var a=o(e,u);e=Math.round(e-a);if(r){try{var n=Math.round(e/u)+v,l=p.getComponentMethod("calendars","getCal")(r),s=l.fromJD(n);if(t%12)l.add(s,t,"m");else l.add(s,t/12,"y");return(s.toJD()-v)*u+a}catch(t){i.error("invalid ms "+e+" in calendar "+r)}}var c=new Date(e+z);return c.setUTCMonth(c.getUTCMonth()+t)+a-z};r.findExactDates=function(e,t){var r=0,a=0,i=0,o=0,l,s;var c=x(t)&&p.getComponentMethod("calendars","getCal")(t);for(var f=0;f<e.length;f++){s=e[f];if(!n(s)){o++;continue}if(s%u)continue;if(c){try{l=c.fromJD(s/u+v);if(l.day()===1){if(l.month()===1)r++;else a++}else i++}catch(e){}}else{l=new Date(s);if(l.getUTCDate()===1){if(l.getUTCMonth()===0)r++;else a++}else i++}}a+=r;i+=a;var d=e.length-o;return{exactYears:r/d,exactMonths:a/d,exactDays:i/d}}},{"../constants/numerical":151,"../registry":261,"./loggers":174,"./mod":176,d3:15,"fast-isnumeric":18}],161:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!Array.isArray(t))t=[];t.length=r;return t}},{}],162:[function(e,t,r){"use strict";var a=e("events").EventEmitter;var n={init:function(e){if(e._ev instanceof a)return e;var t=new a;var r=new a;e._ev=t;e._internalEv=r;e.on=t.on.bind(t);e.once=t.once.bind(t);e.removeListener=t.removeListener.bind(t);e.removeAllListeners=t.removeAllListeners.bind(t);e._internalOn=r.on.bind(r);e._internalOnce=r.once.bind(r);e._removeInternalListener=r.removeListener.bind(r);e._removeAllInternalListeners=r.removeAllListeners.bind(r);e.emit=function(a,n){if(typeof jQuery!=="undefined"){jQuery(e).trigger(a,n)}t.emit(a,n);r.emit(a,n)};return e},triggerHandler:function(e,t,r){var a;var n;if(typeof jQuery!=="undefined"){a=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return a;var o=i._events[t];if(!o)return a;function l(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var s;for(s=0;s<o.length-1;s++){l(o[s])}n=l(o[s]);return a!==undefined?a:n},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=n},{events:17}],163:[function(e,t,r){"use strict";var a=e("./is_plain_object.js");var n=Array.isArray;function i(e,t){var r,a;for(r=0;r<e.length;r++){a=e[r];if(a!==null&&typeof a==="object"){return false}if(a!==void 0){t[r]=a}}return true}r.extendFlat=function(){return o(arguments,false,false,false)};r.extendDeep=function(){return o(arguments,true,false,false)};r.extendDeepAll=function(){return o(arguments,true,true,false)};r.extendDeepNoArrays=function(){return o(arguments,true,false,true)};function o(e,t,r,l){var s=e[0],u=e.length;var c,f,d,v,p,h,g;if(u===2&&n(s)&&n(e[1])&&s.length===0){g=i(e[1],s);if(g){return s}else{s.splice(0,s.length)}}for(var y=1;y<u;y++){c=e[y];for(f in c){d=s[f];v=c[f];if(l&&n(v)){s[f]=v}else if(t&&v&&(a(v)||(p=n(v)))){if(p){p=false;h=d&&n(d)?d:[]}else{h=d&&a(d)?d:{}}s[f]=o([h,v],t,r,l)}else if(typeof v!=="undefined"||r){s[f]=v}}}return s}},{"./is_plain_object.js":171}],164:[function(e,t,r){"use strict";t.exports=function e(t){var r={},a=[],n=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;a[n++]=o}}return a}},{}],165:[function(e,t,r){"use strict";t.exports=function e(t){var r=i(t)?n:a;var o=[];for(var l=0;l<t.length;l++){var s=t[l];if(r(s))o.push(s)}return o};function a(e){return e.visible===true}function n(e){return e[0].trace.visible===true}function i(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],166:[function(e,t,r){"use strict";var a=e("./mod");r.segmentsIntersect=n;function n(e,t,r,a,n,i,o,l){var s=r-e,u=n-e,c=o-n,f=a-t,d=i-t,v=l-i,p=s*v-c*f;if(p===0)return null;var h=(u*v-c*d)/p,g=(u*f-s*d)/p;if(g<0||g>1||h<0||h>1)return null;return{x:e+s*h,y:t+f*h}}r.segmentDistance=function e(t,r,a,o,l,s,u,c){if(n(t,r,a,o,l,s,u,c))return 0;var f=a-t;var d=o-r;var v=u-l;var p=c-s;var h=f*f+d*d;var g=v*v+p*p;var y=Math.min(i(f,d,h,l-t,s-r),i(f,d,h,u-t,c-r),i(v,p,g,t-l,r-s),i(v,p,g,a-l,o-s));return Math.sqrt(y)};function i(e,t,r,a,n){var i=a*e+n*t;if(i<0){return a*a+n*n}else if(i>r){var o=a-e;var l=n-t;return o*o+l*l}else{var s=a*t-n*e;return s*s/r}}var o,l,s;r.getTextLocation=function e(t,r,n,i){if(t!==l||i!==s){o={};l=t;s=i}if(o[n]){return o[n]}var u=t.getPointAtLength(a(n-i/2,r));var c=t.getPointAtLength(a(n+i/2,r));var f=Math.atan((c.y-u.y)/(c.x-u.x));var d=t.getPointAtLength(a(n,r));var v=(d.x*4+u.x+c.x)/6;var p=(d.y*4+u.y+c.y)/6;var h={x:v,y:p,theta:f};o[n]=h;return h};r.clearLocationCache=function(){l=null};r.getVisibleSegment=function e(t,r,a){var n=r.left;var i=r.right;var o=r.top;var l=r.bottom;var s=0;var u=t.getTotalLength();var c=u;var f,d;function v(e){var r=t.getPointAtLength(e);if(e===0)f=r;else if(e===u)d=r;var a=r.x<n?n-r.x:r.x>i?r.x-i:0;var s=r.y<o?o-r.y:r.y>l?r.y-l:0;return Math.sqrt(a*a+s*s)}var p=v(s);while(p){s+=p+a;if(s>c)return;p=v(s)}p=v(c);while(p){c-=p+a;if(s>c)return;p=v(c)}return{min:s,max:c,len:c-s,total:u,isClosed:s===0&&c===u&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,a,n){n=n||{};var i=n.pathLength||t.getTotalLength();var o=n.tolerance||.001;var l=n.iterationLimit||30;var s=t.getPointAtLength(0)[a]>t.getPointAtLength(i)[a]?-1:1;var u=0;var c=0;var f=i;var d;var v;var p;while(u<l){d=(c+f)/2;v=t.getPointAtLength(d);p=v[a]-r;if(Math.abs(p)<o){return v}else{if(s*p>0){f=d}else{c=d}u++}}return v}},{"./mod":176}],167:[function(e,t,r){"use strict";t.exports=function(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}},{}],168:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],169:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../constants/numerical");var o=i.FP_SAFE;var l=i.BADNUM;var s=t.exports={};s.nestedProperty=e("./nested_property");s.keyedContainer=e("./keyed_container");s.relativeAttr=e("./relative_attr");s.isPlainObject=e("./is_plain_object");s.mod=e("./mod");s.toLogRange=e("./to_log_range");s.relinkPrivateKeys=e("./relink_private");s.ensureArray=e("./ensure_array");var u=e("./is_array");s.isTypedArray=u.isTypedArray;s.isArrayOrTypedArray=u.isArrayOrTypedArray;s.isArray1D=u.isArray1D;var c=e("./coerce");s.valObjectMeta=c.valObjectMeta;s.coerce=c.coerce;s.coerce2=c.coerce2;s.coerceFont=c.coerceFont;s.coerceHoverinfo=c.coerceHoverinfo;s.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity;s.validate=c.validate;var f=e("./dates");s.dateTime2ms=f.dateTime2ms;s.isDateTime=f.isDateTime;s.ms2DateTime=f.ms2DateTime;s.ms2DateTimeLocal=f.ms2DateTimeLocal;s.cleanDate=f.cleanDate;s.isJSDate=f.isJSDate;s.formatDate=f.formatDate;s.incrementMonth=f.incrementMonth;s.dateTick0=f.dateTick0;s.dfltRange=f.dfltRange;s.findExactDates=f.findExactDates;s.MIN_MS=f.MIN_MS;s.MAX_MS=f.MAX_MS;var d=e("./search");s.findBin=d.findBin;s.sorterAsc=d.sorterAsc;s.sorterDes=d.sorterDes;s.distinctVals=d.distinctVals;s.roundUp=d.roundUp;var v=e("./stats");s.aggNums=v.aggNums;s.len=v.len;s.mean=v.mean;s.midRange=v.midRange;s.variance=v.variance;s.stdev=v.stdev;s.interp=v.interp;var p=e("./matrix");s.init2dArray=p.init2dArray;s.transposeRagged=p.transposeRagged;s.dot=p.dot;s.translationMatrix=p.translationMatrix;s.rotationMatrix=p.rotationMatrix;s.rotationXYMatrix=p.rotationXYMatrix;s.apply2DTransform=p.apply2DTransform;s.apply2DTransform2=p.apply2DTransform2;var h=e("./angles");s.deg2rad=h.deg2rad;s.rad2deg=h.rad2deg;s.wrap360=h.wrap360;s.wrap180=h.wrap180;var g=e("./geometry2d");s.segmentsIntersect=g.segmentsIntersect;s.segmentDistance=g.segmentDistance;s.getTextLocation=g.getTextLocation;s.clearLocationCache=g.clearLocationCache;s.getVisibleSegment=g.getVisibleSegment;s.findPointOnPath=g.findPointOnPath;var y=e("./extend");s.extendFlat=y.extendFlat;s.extendDeep=y.extendDeep;s.extendDeepAll=y.extendDeepAll;s.extendDeepNoArrays=y.extendDeepNoArrays;var m=e("./loggers");s.log=m.log;s.warn=m.warn;s.error=m.error;var x=e("./regex");s.counterRegex=x.counter;var b=e("./throttle");s.throttle=b.throttle;s.throttleDone=b.done;s.clearThrottle=b.clear;s.getGraphDiv=e("./get_graph_div");s._=e("./localize");s.notifier=e("./notifier");s.filterUnique=e("./filter_unique");s.filterVisible=e("./filter_visible");s.pushUnique=e("./push_unique");s.cleanNumber=e("./clean_number");s.ensureNumber=function e(t){if(!n(t))return l;t=Number(t);if(t<-o||t>o)return l;return n(t)?Number(t):l};s.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return n(e)&&e>=0&&e%1===0};s.noop=e("./noop");s.identity=e("./identity");s.swapAttrs=function(e,t,r,a){if(!r)r="x";if(!a)a="y";for(var n=0;n<t.length;n++){var i=t[n],o=s.nestedProperty(e,i.replace("?",r)),l=s.nestedProperty(e,i.replace("?",a)),u=o.get();o.set(l.get());l.set(u)}};s.raiseToTop=function e(t){t.parentNode.appendChild(t)};s.cancelTransition=function(e){return e.transition().duration(0)};s.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};s.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};s.simpleMap=function(e,t,r,a){var n=e.length,i=new Array(n);for(var o=0;o<n;o++)i[o]=t(e[o],r,a);return i};s.randstr=function e(t,r,a,n){if(!a)a=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(a);var o="";var l,u,c;for(l=2;i===Infinity;l*=2){i=Math.log(Math.pow(2,r/l))/Math.log(a)*l}var f=i-Math.floor(i);for(l=0;l<Math.floor(i);l++){c=Math.floor(Math.random()*a).toString(a);o=c+o}if(f){u=Math.pow(a,f);c=Math.floor(Math.random()*u).toString(a);o=c+o}var d=parseInt(o,a);if(t&&t[o]||d!==Infinity&&d>=Math.pow(2,r)){if(n>10){s.warn("randstr failed uniqueness");return o}return e(t,r,a,(n||0)+1)}else return o};s.OptionControl=function(e,t){if(!e)e={};if(!t)t="opt";var r={};r.optionList=[];r._newoption=function(a){a[t]=e;r[a.name]=a;r.optionList.push(a)};r["_"+t]=e;return r};s.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length,a=2*r,n=2*t-1,i=new Array(n),o=new Array(r),l,s,u,c;for(l=0;l<n;l++){i[l]=(1-Math.cos(Math.PI*(l+1)/t))/(2*t)}for(l=0;l<r;l++){c=0;for(s=0;s<n;s++){u=l+s+1-t;if(u<-r)u-=a*Math.round(u/a);else if(u>=a)u-=a*Math.floor(u/a);if(u<0)u=-1-u;else if(u>=r)u=a-1-u;c+=e[u]*i[s]}o[l]=c}return o};s.syncOrAsync=function(e,t,r){var a,n;function i(){return s.syncOrAsync(e,t,r)}while(e.length){n=e.splice(0,1)[0];a=n(t);if(a&&a.then){return a.then(i).then(undefined,s.promiseError)}}return r&&r(t)};s.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};s.noneOrAll=function(e,t,r){if(!e)return;var a=false,n=true,i,o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)a=true;else n=false}if(a&&!n){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};s.mergeArray=function(e,t,r){if(s.isArrayOrTypedArray(e)){var a=Math.min(e.length,t.length);for(var n=0;n<a;n++)t[n][r]=e[n]}};s.fillArray=function(e,t,r,a){a=a||s.identity;if(s.isArrayOrTypedArray(e)){for(var n=0;n<t.length;n++){t[n][r]=a(e[n])}}};s.castOption=function(e,t,r,a){a=a||s.identity;var n=s.nestedProperty(e,r).get();if(s.isArrayOrTypedArray(n)){if(Array.isArray(t)&&s.isArrayOrTypedArray(n[t[0]])){return a(n[t[0]][t[1]])}else{return a(n[t])}}else{return n}};s.extractOption=function(e,t,r,a){if(r in e)return e[r];var n=s.nestedProperty(t,a).get();if(!Array.isArray(n))return n};function _(e){var t={};for(var r in e){var a=e[r];for(var n=0;n<a.length;n++){t[a[n]]=+r}}return t}s.tagSelected=function(e,t,r){var a=t.selectedpoints;var n=t._indexToPoints;var i;if(n){i=_(n)}function o(t){return t!==undefined&&t<e.length}for(var l=0;l<a.length;l++){var u=a[l];if(s.isIndex(u)){var c=i?i[u]:u;var f=r?r[c]:c;if(o(f)){e[f].selected=1}}}};s.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var a=_(r);var n=[];for(var i=0;i<t.length;i++){var o=t[i];if(s.isIndex(o)){var l=a[o];if(s.isIndex(l)){n.push(l)}}}return n}else{return t}};s.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var a=s.nestedProperty(e,r).get();return Array.isArray(a)?a:false}else if(Array.isArray(r)){return r}return false};s.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var a=3,n=Object.keys(e),i,o,l;for(i=0;i<n.length;i++){o=n[i];l=e[o];if(o.charAt(0)==="_"||typeof l==="function")continue;else if(o==="module")r[o]=l;else if(Array.isArray(l))r[o]=l.slice(0,a);else if(l&&typeof l==="object")r[o]=s.minExtend(e[o],t[o]);else r[o]=l}n=Object.keys(t);for(i=0;i<n.length;i++){o=n[i];l=t[o];if(typeof l!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=l}}return r};s.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};s.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};s.isPlotDiv=function(e){var t=a.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")};s.removeElement=function(e){var t=e&&e.parentNode;if(t)t.removeChild(e)};s.addStyleRule=function(e,t){if(!s.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode(""));document.head.appendChild(r);s.styleSheet=r.sheet}var a=s.styleSheet;if(a.insertRule){a.insertRule(e+"{"+t+"}",0)}else if(a.addRule){a.addRule(e,t,0)}else s.warn("addStyleRule failed")};s.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};s.isD3Selection=function(e){return e&&typeof e.classed==="function"};s.ensureSingle=function(e,t,r,a){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var i=e.append(t).classed(r,true);if(a)i.call(a);return i};s.ensureSingleById=function(e,t,r,a){var n=e.select(t+"#"+r);if(n.size())return n;var i=e.append(t).attr("id",r);if(a)i.call(a);return i};s.objectFromPath=function(e,t){var r=e.split("."),a,n=a={};for(var i=0;i<r.length;i++){var o=r[i];var l=null;var s=r[i].match(/(.*)\[([0-9]+)\]/);if(s){o=s[1];l=s[2];a=a[o]=[];if(i===r.length-1){a[l]=t}else{a[l]={}}a=a[l]}else{if(i===r.length-1){a[o]=t}else{a[o]={}}a=a[o]}}return n};var w=/^([^\[\.]+)\.(.+)?/;var k=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;s.expandObjectPaths=function(e){var t,r,a,n,i,o,l;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(w)){n=e[r];a=t[1];delete e[r];e[a]=s.extendDeepNoArrays(e[a]||{},s.objectFromPath(r,s.expandObjectPaths(n))[a])}else if(t=r.match(k)){n=e[r];a=t[1];i=parseInt(t[2]);delete e[r];e[a]=e[a]||[];if(t[3]==="."){l=t[4];o=e[a][i]=e[a][i]||{};s.extendDeepNoArrays(o,s.objectFromPath(l,s.expandObjectPaths(n)))}else{e[a][i]=s.expandObjectPaths(n)}}else{e[r]=s.expandObjectPaths(e[r])}}}}return e};s.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var a=/(\d+)(\d{3})/,n=t.charAt(0),i=t.charAt(1);var o=e.split("."),l=o[0],s=o.length>1?n+o[1]:"";if(i&&(o.length>1||l.length>4||r)){while(a.test(l)){l=l.replace(a,"$1"+i+"$2")}}return l+s};var M=/%{([^\s%{}]*)}/g;var T=/^\w*$/;s.templateString=function(e,t){var r={};return e.replace(M,function(e,a){if(T.test(a)){return t[a]||""}r[a]=r[a]||s.nestedProperty(t,a).get;return r[a]()||""})};var A=48;var L=57;s.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var a=0;var n=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var l=t.charCodeAt(i)||0;var s=o>=A&&o<=L;var u=l>=A&&l<=L;if(s)a=10*a+o-A;if(u)n=10*n+l-A;if(!s||!u){if(a!==n)return a-n;if(o!==l)return o-l}}return n-a};var S=2e9;s.seedPseudoRandom=function(){S=2e9};s.pseudoRandom=function(){var e=S;S=(69069*S+1)%4294967296;if(Math.abs(S-e)<429496729)return s.pseudoRandom();return S/4294967296}},{"../constants/numerical":151,"./angles":156,"./clean_number":157,"./coerce":159,"./dates":160,"./ensure_array":161,"./extend":163,"./filter_unique":164,"./filter_visible":165,"./geometry2d":166,"./get_graph_div":167,"./identity":168,"./is_array":170,"./is_plain_object":171,"./keyed_container":172,"./localize":173,"./loggers":174,"./matrix":175,"./mod":176,"./nested_property":177,"./noop":178,"./notifier":179,"./push_unique":182,"./regex":184,"./relative_attr":185,"./relink_private":186,"./search":187,"./stats":189,"./throttle":191,"./to_log_range":192,d3:15,"fast-isnumeric":18}],170:[function(e,t,r){"use strict";var a=typeof ArrayBuffer==="undefined"||!ArrayBuffer.isView?{isView:function(){return false}}:ArrayBuffer;var n=typeof DataView==="undefined"?function(){}:DataView;function i(e){return a.isView(e)&&!(e instanceof n)}function o(e){return Array.isArray(e)||i(e)}function l(e){return!o(e[0])}t.exports={isTypedArray:i,isArrayOrTypedArray:o,isArray1D:l}},{}],171:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t)===Object.prototype}},{}],172:[function(e,t,r){"use strict";var a=e("./nested_property");var n=/^\w*$/;var i=0;var o=1;var l=2;var s=3;var u=4;t.exports=function e(t,r,c,f){c=c||"name";f=f||"value";var d,v,p;var h={};if(r&&r.length){p=a(t,r);v=p.get()}else{v=t}r=r||"";var g={};if(v){for(d=0;d<v.length;d++){g[v[d][c]]=d}}var y=n.test(f);var m={set:function(e,t){var r=t===null?u:i;if(!v){if(!p||r===u)return;v=[];p.set(v)}var n=g[e];if(n===undefined){if(r===u)return;r=r|s;n=v.length;g[e]=n}else if(t!==(y?v[n][f]:a(v[n],f).get())){r=r|l}var o=v[n]=v[n]||{};o[c]=e;if(y){o[f]=t}else{a(o,f).set(t)}if(t!==null){r=r&~u}h[n]=h[n]|r;return m},get:function(e){if(!v)return;var t=g[e];if(t===undefined){return undefined}else if(y){return v[t][f]}else{return a(v[t],f).get()}},rename:function(e,t){var r=g[e];if(r===undefined)return m;h[r]=h[r]|o;g[t]=r;delete g[e];v[r][c]=t;return m},remove:function(e){var t=g[e];if(t===undefined)return m;var r=v[t];if(Object.keys(r).length>2){h[t]=h[t]|l;return m.set(e,null)}if(y){for(d=t;d<v.length;d++){h[d]=h[d]|s}for(d=t;d<v.length;d++){g[v[d][c]]--}v.splice(t,1);delete g[e]}else{a(r,f).set(null);h[t]=h[t]|l|u}return m},constructUpdate:function(){var e,t;var n={};var i=Object.keys(h);for(var s=0;s<i.length;s++){t=i[s];e=r+"["+t+"]";if(v[t]){if(h[t]&o){n[e+"."+c]=v[t][c]}if(h[t]&l){if(y){n[e+"."+f]=h[t]&u?null:v[t][f]}else{n[e+"."+f]=h[t]&u?null:a(v[t],f).get()}}}else{n[e]=null}}return n}};return m}},{"./nested_property":177}],173:[function(e,t,r){"use strict";var a=e("../registry");t.exports=function e(t,r){var n=t._context.locale;for(var i=0;i<2;i++){var o=t._context.locales;for(var l=0;l<2;l++){var s=(o[n]||{}).dictionary;if(s){var u=s[r];if(u)return u}o=a.localeRegistry}var c=n.split("-")[0];if(c===n)break;n=c}return r}},{"../registry":261}],174:[function(e,t,r){"use strict";var a=e("../plot_api/plot_config");var n=t.exports={};n.log=function(){if(a.logging>1){var e=["LOG:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};n.warn=function(){if(a.logging>0){var e=["WARN:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};n.error=function(){if(a.logging>0){var e=["ERROR:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.error,e)}};function i(e,t){if(e.apply){e.apply(e,t)}else{for(var r=0;r<t.length;r++){e(t[r])}}}},{"../plot_api/plot_config":201}],175:[function(e,t,r){"use strict";r.init2dArray=function(e,t){var r=new Array(e);for(var a=0;a<e;a++)r[a]=new Array(t);return r};r.transposeRagged=function(e){var t=0,r=e.length,a,n;for(a=0;a<r;a++)t=Math.max(t,e[a].length);var i=new Array(t);for(a=0;a<t;a++){i[a]=new Array(r);for(n=0;n<r;n++)i[a][n]=e[n][a]}return i};r.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var a=e.length,n,i;if(e[0].length){n=new Array(a);for(i=0;i<a;i++)n[i]=r.dot(e[i],t)}else if(t[0].length){var o=r.transposeRagged(t);n=new Array(o.length);for(i=0;i<o.length;i++)n[i]=r.dot(e,o[i])}else{n=0;for(i=0;i<a;i++)n+=e[i]*t[i]}return n};r.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};r.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};r.rotationXYMatrix=function(e,t,a){return r.dot(r.dot(r.translationMatrix(t,a),r.rotationMatrix(e)),r.translationMatrix(-t,-a))};r.apply2DTransform=function(e){return function(){var t=arguments;if(t.length===3){t=t[0]}var a=arguments.length===1?t[0]:[t[0],t[1]];return r.dot(e,[a[0],a[1],1]).slice(0,2)}};r.apply2DTransform2=function(e){var t=r.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],176:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t%r;return a<0?a+r:a}},{}],177:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("./is_array").isArrayOrTypedArray;t.exports=function e(t,r){if(a(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var n=0,o=r.split("."),l,u,c;while(n<o.length){l=String(o[n]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(l){if(l[1])o[n]=l[1];else if(n===0)o.splice(0,1);else throw"bad property string";u=l[2].substr(1,l[2].length-2).split("][");for(c=0;c<u.length;c++){n++;o.splice(n,0,Number(u[c]))}}n++}if(typeof t!=="object"){return d(t,r,o)}return{set:s(t,o,r),get:i(t,o),astr:r,parts:o,obj:t}};function i(e,t){return function(){var r=e,a,o,l,s,u;for(s=0;s<t.length-1;s++){a=t[s];if(a===-1){o=true;l=[];for(u=0;u<r.length;u++){l[u]=i(r[u],t.slice(s+1))();if(l[u]!==l[0])o=false}return o?l[0]:l}if(typeof a==="number"&&!n(r)){return undefined}r=r[a];if(typeof r!=="object"||r===null){return undefined}}if(typeof r!=="object"||r===null)return undefined;l=r[t[s]];if(l===null)return undefined;return l}}var o=/(^|\.)args\[/;function l(e,t){return e===undefined||e===null&&!t.match(o)}function s(e,t,r){return function(a){var i=e,o="",s=[[e,o]],d=l(a,r),v,p;for(p=0;p<t.length-1;p++){v=t[p];if(typeof v==="number"&&!n(i)){throw"array index but container is not an array"}if(v===-1){d=!c(i,t.slice(p+1),a,r);if(d)break;else return}if(!f(i,v,t[p+1],d)){break}i=i[v];if(typeof i!=="object"||i===null){throw"container is not an object"}o=u(o,v);s.push([i,o])}if(d){if(p===t.length-1){delete i[t[p]];if(Array.isArray(i)&&+t[p]===i.length-1){while(i.length&&i[i.length-1]===undefined){i.pop()}}}}else i[t[p]]=a}}function u(e,t){var r=t;if(a(t))r="["+t+"]";else if(e)r="."+t;return e+r}function c(e,t,r,a){var i=n(r),o=true,u=r,c=a.replace("-1",0),d=i?false:l(r,c),v=t[0],p;for(p=0;p<e.length;p++){c=a.replace("-1",p);if(i){u=r[p%r.length];d=l(u,c)}if(d)o=false;if(!f(e,p,v,d)){continue}s(e[p],t,a.replace("-1",p))(u)}return o}function f(e,t,r,a){if(e[t]===undefined){if(a)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function d(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./is_array":170,"fast-isnumeric":18}],178:[function(e,t,r){"use strict";t.exports=function e(){}},{}],179:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=[];t.exports=function(e,t){if(i.indexOf(e)!==-1)return;i.push(e);var r=1e3;if(n(t))r=t;else if(t==="long")r=3e3;var o=a.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",true);var l=o.selectAll(".notifier-note").data(i);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=i.indexOf(e);if(t!==-1)i.splice(t,1);a.select(this).remove()})}l.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=a.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var n=t.append("p");var i=e.split(/<br\s*\/?>/g);for(var o=0;o<i.length;o++){if(o)n.append("br");n.append("span").text(i[o])}t.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}},{d3:15,"fast-isnumeric":18}],180:[function(e,t,r){"use strict";var a=e("./setcursor");var n="data-savedcursor";var i="!!";t.exports=function e(t,r){var o=t.attr(n);if(r){if(!o){var l=(t.attr("class")||"").split(" ");for(var s=0;s<l.length;s++){var u=l[s];if(u.indexOf("cursor-")===0){t.attr(n,u.substr(7)).classed(u,false)}}if(!t.attr(n)){t.attr(n,i)}}a(t,r)}else if(o){t.attr(n,null);if(o===i)a(t);else a(t,o)}}},{"./setcursor":188}],181:[function(e,t,r){"use strict";var a=e("./matrix").dot;var n=e("../constants/numerical").BADNUM;var i=t.exports={};i.tester=function e(t){if(Array.isArray(t[0][0]))return i.multitester(t);var r=t.slice(),a=r[0][0],o=a,l=r[0][1],s=l,u;r.push(r[0]);for(u=1;u<r.length;u++){a=Math.min(a,r[u][0]);o=Math.max(o,r[u][0]);l=Math.min(l,r[u][1]);s=Math.max(s,r[u][1])}var c=false,f;if(r.length===5){if(r[0][0]===r[1][0]){if(r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]){c=true;f=function(e){return e[0]===r[0][0]}}}else if(r[0][1]===r[1][1]){if(r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]){c=true;f=function(e){return e[1]===r[0][1]}}}}function d(e,t){var r=e[0],i=e[1];if(r===n||r<a||r>o||i===n||i<l||i>s){return false}if(t&&f(e))return false;return true}function v(e,t){var i=e[0],u=e[1];if(i===n||i<a||i>o||u===n||u<l||u>s){return false}var c=r.length,f=r[0][0],d=r[0][1],v=0,p,h,g,y,m;for(p=1;p<c;p++){h=f;g=d;f=r[p][0];d=r[p][1];y=Math.min(h,f);if(i<y||i>Math.max(h,f)||u>Math.max(g,d)){continue}else if(u<Math.min(g,d)){if(i!==y)v++}else{if(f===h)m=u;else m=g+(i-h)*(d-g)/(f-h);if(u===m){if(p===1&&t)return false;return true}if(u<=m&&i!==y)v++}}return v%2===1}var p=true;var h=r[0];for(u=1;u<r.length;u++){if(h[0]!==r[u][0]||h[1]!==r[u][1]){p=false;break}}return{xmin:a,xmax:o,ymin:l,ymax:s,pts:r,contains:c?d:v,isRect:c,degenerate:p}};i.multitester=function e(t){var r=[],a=t[0][0][0],n=a,o=t[0][0][1],l=o;for(var s=0;s<t.length;s++){var u=i.tester(t[s]);u.subtract=t[s].subtract;r.push(u);a=Math.min(a,u.xmin);n=Math.max(n,u.xmax);o=Math.min(o,u.ymin);l=Math.max(l,u.ymax)}function c(e,t){var a=false;for(var n=0;n<r.length;n++){if(r[n].contains(e,t)){a=r[n].subtract===false}}return a}return{xmin:a,xmax:n,ymin:o,ymax:l,pts:[],contains:c,isRect:false,degenerate:false}};var o=i.isSegmentBent=function e(t,r,n,i){var o=t[r],l=[t[n][0]-o[0],t[n][1]-o[1]],s=a(l,l),u=Math.sqrt(s),c=[-l[1]/u,l[0]/u],f,d,v;for(f=r+1;f<n;f++){d=[t[f][0]-o[0],t[f][1]-o[1]];v=a(d,l);if(v<0||v>s||Math.abs(a(d,c))>i)return true}return false};i.filter=function e(t,r){var a=[t[0]],n=0,i=0;function l(e){t.push(e);var l=a.length,s=n;a.splice(i+1);for(var u=s+1;u<t.length;u++){if(u===t.length-1||o(t,s,u+1,r)){a.push(t[u]);if(a.length<l-2){n=u;i=a.length-1}s=u}}}if(t.length>1){var s=t.pop();l(s)}return{addPt:l,raw:t,filtered:a}}},{"../constants/numerical":151,"./matrix":175}],182:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var a=r.toString(),n;for(n=0;n<t.length;n++){if(t[n]instanceof RegExp&&t[n].toString()===a){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],183:[function(e,t,r){"use strict";var a=e("../lib");var n=e("../plot_api/plot_config");function i(e,t){var r=[];var n;for(var i=0;i<t.length;i++){n=t[i];if(n===e)r[i]=n;else if(typeof n==="object"){r[i]=Array.isArray(n)?a.extendDeep([],n):a.extendDeepAll({},n)}else r[i]=n}return r}var o={};o.add=function(e,t,r,a,i){var o,l;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};l=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(l,e.undoQueue.queue.length-l,o);e.undoQueue.index+=1}else{o=e.undoQueue.queue[l-1]}e.undoQueue.beginSequence=false;if(o){o.undo.calls.unshift(t);o.undo.args.unshift(r);o.redo.calls.push(a);o.redo.args.push(i)}if(e.undoQueue.queue.length>n.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};o.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};o.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};o.undo=function e(t){var r,a;if(t.framework&&t.framework.isPolar){t.framework.undo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.undo.calls.length;a++){o.plotDo(t,r.undo.calls[a],r.undo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false};o.redo=function e(t){var r,a;if(t.framework&&t.framework.isPolar){t.framework.redo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(a=0;a<r.redo.calls.length;a++){o.plotDo(t,r.redo.calls[a],r.redo.args[a])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};o.plotDo=function(e,t,r){e.autoplay=true;r=i(e,r);t.apply(null,r)};t.exports=o},{"../lib":169,"../plot_api/plot_config":201}],184:[function(e,t,r){"use strict";r.counter=function(e,t,r){var a=(t||"")+(r?"":"$");if(e==="xy"){return new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+a)}return new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+a)}},{}],185:[function(e,t,r){"use strict";var a=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var n=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(a);if(r)e=r[1];else if(e.match(n))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],186:[function(e,t,r){"use strict";var a=e("./is_array").isArrayOrTypedArray;var n=e("./is_plain_object");t.exports=function e(t,r){for(var i in r){var o=r[i];var l=t[i];if(l===o){continue}if(i.charAt(0)==="_"||typeof o==="function"){if(i in t)continue;t[i]=o}else if(a(o)&&a(l)&&n(o[0])){if(i==="customdata"||i==="ids")continue;var s=Math.min(o.length,l.length);for(var u=0;u<s;u++){if(l[u]!==o[u]&&n(o[u])&&n(l[u])){e(l[u],o[u])}}}else if(n(o)&&n(l)){e(l,o);if(!Object.keys(l).length)delete t[i]}}}},{"./is_array":170,"./is_plain_object":171}],187:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("./loggers");var i=1e-9;r.findBin=function(e,t,r){if(a(t.start)){return r?Math.ceil((e-t.start)/t.size-i)-1:Math.floor((e-t.start)/t.size+i)}else{var c=0;var f=t.length;var d=0;var v=f>1?(t[f-1]-t[0])/(f-1):1;var p,h;if(v>=0){h=r?o:l}else{h=r?u:s}e+=v*i*(r?-1:1)*(v>=0?1:-1);while(c<f&&d++<100){p=Math.floor((c+f)/2);if(h(t[p],e))c=p+1;else f=p}if(d>90)n.log("Long binary search...");return c-1}};function o(e,t){return e<t}function l(e,t){return e<=t}function s(e,t){return e>t}function u(e,t){return e>=t}r.sorterAsc=function(e,t){return e-t};r.sorterDes=function(e,t){return t-e};r.distinctVals=function(e){var t=e.slice();t.sort(r.sorterAsc);var a=t.length-1,n=t[a]-t[0]||1,i=n/(a||1)/1e4,o=[t[0]];for(var l=0;l<a;l++){if(t[l+1]>t[l]+i){n=Math.min(n,t[l+1]-t[l]);o.push(t[l+1])}}return{vals:o,minDiff:n}};r.roundUp=function(e,t,r){var a=0,n=t.length-1,i,o=0,l=r?0:1,s=r?1:0,u=r?Math.ceil:Math.floor;while(a<n&&o++<100){i=u((a+n)/2);if(t[i]<=e)a=i+l;else n=i-s}return t[a]}},{"./loggers":174,"fast-isnumeric":18}],188:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],189:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("./is_array").isArrayOrTypedArray;r.aggNums=function(e,t,i,o){var l,s;if(!o||o>i.length)o=i.length;if(!a(t))t=false;if(n(i[0])){s=new Array(o);for(l=0;l<o;l++)s[l]=r.aggNums(e,t,i[l]);i=s}for(l=0;l<o;l++){if(!a(t))t=i[l];else if(a(i[l]))t=e(+t,+i[l])}return t};r.len=function(e){return r.aggNums(function(e){return e+1},0,e)};r.mean=function(e,t){if(!t)t=r.len(e);return r.aggNums(function(e,t){return e+t},0,e)/t};r.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(r.aggNums(Math.max,null,e)+r.aggNums(Math.min,null,e))/2};r.variance=function(e,t,n){if(!t)t=r.len(e);if(!a(n))n=r.mean(e,t);return r.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t};r.stdev=function(e,t,a){return Math.sqrt(r.variance(e,t,a))};r.interp=function(e,t){if(!a(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./is_array":170,"fast-isnumeric":18}],190:[function(e,t,r){"use strict";var a=e("d3");var n=e("../lib");var i=e("../constants/xmlns_namespaces");var o=e("../constants/string_mappings");var l=e("../constants/alignment").LINE_SPACING;function s(e,t){return e.node().getBoundingClientRect()[t]}var u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(e,t,n){var i=e.text();var o=!e.attr("data-notex")&&typeof MathJax!=="undefined"&&i.match(u);var l=a.select(e.node().parentNode);if(l.empty())return;var c=e.attr("class")?e.attr("class").split(" ")[0]:"text";c+="-math";l.selectAll("svg."+c).remove();l.selectAll("g."+c+"-group").remove();e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function f(){if(!l.empty()){c=e.attr("class")+"-math";l.select("svg."+c).remove()}e.text("").style("white-space","pre");var t=D(e.node(),i);if(t){e.style("pointer-events","all")}r.positionText(e);if(n)n.call(e)}if(o){(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var r=parseInt(e.node().style.fontSize,10);var a={fontSize:r};v(o[2],a,function(a,o,u){l.selectAll("svg."+c).remove();l.selectAll("g."+c+"-group").remove();var d=a&&a.select("svg");if(!d||!d.node()){f();t();return}var v=l.append("g").classed(c+"-group",true).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});v.node().appendChild(d.node());if(o&&o.node()){d.node().insertBefore(o.node().cloneNode(true),d.node().firstChild)}d.attr({class:c,height:u.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var p=e.node().style.fill||"black";d.select("g").attr({fill:p,stroke:p});var h=s(d,"width"),g=s(d,"height"),y=+e.attr("x")-h*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],m=r||s(e,"height"),x=-m/4;if(c[0]==="y"){v.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-h/2,x-g/2]+")"});d.attr({x:+e.attr("x"),y:+e.attr("y")})}else if(c[0]==="l"){d.attr({x:e.attr("x"),y:x-g/2})}else if(c[0]==="a"){d.attr({x:0,y:x})}else{d.attr({x:y,y:+e.attr("y")+x-g/2})}if(n)n.call(e,v);t(v)})}))}else f();return e};var c=/(<|&lt;|&#60;)/g;var f=/(>|&gt;|&#62;)/g;function d(e){return e.replace(c,"\\lt ").replace(f,"\\gt ")}function v(e,t,r){var i="math-output-"+n.randstr({},64);var o=a.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(d(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,o.node()],function(){var t=a.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){n.log("There was an error in the tex syntax.",e);r()}else{var i=o.select("svg").node().getBoundingClientRect();r(o.select(".MathJax_SVG"),t,i)}o.remove()})}var p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var h={sub:"0.3em",sup:"-0.6em"};var g={sub:"-0.21em",sup:"0.42em"};var y="\u200b";var m=["http:","https:","mailto:","",undefined,":"];var x=new RegExp("</?("+Object.keys(p).join("|")+")( [^>]*)?/?>","g");var b=Object.keys(o.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:o.entityToUnicode[e]}});var _=/(\r\n?|\n)/g;var w=/(<[^<>]*>)/;var k=/<(\/?)([^ >]*)(\s+(.*))?>/i;var M=/<br(\s+.*)?>/i;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var A=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var L=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var S=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function C(e,t){if(!e)return null;var r=e.match(t);return r&&(r[3]||r[4])}var O=/(^|;)\s*color:/;r.plainText=function(e){return(e||"").replace(x," ")};function z(e,t){if(!e)return"";for(var r=0;r<t.length;r++){var a=t[r];e=e.replace(a.regExp,a.sub)}return e}function P(e){return z(e,b)}function D(e,t){t=P(t).replace(_," ");var r=false;var o=[];var s;var u=-1;function c(){u++;var t=document.createElementNS(i.svg,"tspan");a.select(t).attr({class:"line",dy:u*l+"em"});e.appendChild(t);s=t;var r=o;o=[{node:t}];if(r.length>1){for(var n=1;n<r.length;n++){f(r[n])}}}function f(e){var t=e.type;var r={};var n;if(t==="a"){n="a";var l=e.target;var u=e.href;var c=e.popup;if(u){r={"xlink:xlink:show":l==="_blank"||l.charAt(0)!=="_"?"new":"replace",target:l,"xlink:xlink:href":u};if(c){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+c+'");return false;'}}}else n="tspan";if(e.style)r.style=e.style;var f=document.createElementNS(i.svg,n);if(t==="sup"||t==="sub"){d(s,y);s.appendChild(f);var v=document.createElementNS(i.svg,"tspan");d(v,y);a.select(v).attr("dy",g[t]);r.dy=h[t];s.appendChild(f);s.appendChild(v)}else{s.appendChild(f)}a.select(f).attr(r);s=e.node=f;o.push(e)}function d(e,t){e.appendChild(document.createTextNode(t))}function v(e){if(o.length===1){n.log("Ignoring unexpected end tag </"+e+">.",t);return}var r=o.pop();if(e!==r.type){n.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t)}s=o[o.length-1].node}var x=M.test(t);if(x)c();else{s=e;o=[{node:e}]}var b=t.split(w);for(var z=0;z<b.length;z++){var D=b[z];var I=D.match(k);var E=I&&I[2].toLowerCase();var N=p[E];if(E==="br"){c()}else if(N===undefined){d(s,D)}else{if(I[1]){v(E)}else{var R=I[4];var F={type:E};var B=C(R,T);if(B){B=B.replace(O,"$1 fill:");if(N)B+=";"+N}else if(N)B=N;if(B)F.style=B;if(E==="a"){r=true;var j=C(R,A);if(j){var q=document.createElement("a");q.href=j;if(m.indexOf(q.protocol)!==-1){F.href=encodeURI(decodeURI(j));F.target=C(R,L)||"_blank";F.popup=C(R,S)}}}f(F)}}}return r}r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,r,n){return t.each(function(){var e=a.select(this);function t(t,r){if(r===undefined){r=e.attr(t);if(r===null){e.attr(t,0);r=0}}else e.attr(t,r);return r}var i=t("x",r);var o=t("y",n);if(this.nodeName==="text"){e.selectAll("tspan.line").attr({x:i,y:o})}})};function I(e,t,r){var a=r.horizontalAlign,n=r.verticalAlign||"top",i=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),l,s,u;if(n==="bottom"){s=function(){return i.bottom-l.height}}else if(n==="middle"){s=function(){return i.top+(i.height-l.height)/2}}else{s=function(){return i.top}}if(a==="right"){u=function(){return i.right-l.width}}else if(a==="center"){u=function(){return i.left+(i.width-l.width)/2}}else{u=function(){return i.left}}return function(){l=this.node().getBoundingClientRect();this.style({top:s()-o.top+"px",left:u()-o.left+"px","z-index":1e3});return this}}r.makeEditable=function(e,t){var r=t.gd;var n=t.delegate;var i=a.dispatch("edit","input","cancel");var o=n||e;e.style({"pointer-events":n?"none":"all"});if(e.size()!==1)throw new Error("boo");function l(){u();e.style({opacity:0});var t=o.attr("class"),r;if(t)r="."+t.split(" ")[0]+"-math-group";else r="[class*=-math-group]";if(r){a.select(e.node().parentNode).select(r).style({opacity:0})}}function s(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var a=window.getSelection();a.removeAllRanges();a.addRange(r);t.focus()}function u(){var n=a.select(r);var o=n.select(".svg-container");var l=o.append("div");var u=e.node().style;var c=parseFloat(u.fontSize||12);var f=t.text;if(f===undefined)f=e.attr("data-unformatted");l.classed("plugin-editable editable",true).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":c,color:t.fill||u.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(f).call(I(e,o,t)).on("blur",function(){r._editing=false;e.text(this.textContent).style({opacity:1});var t=a.select(this).attr("class"),n;if(t)n="."+t.split(" ")[0]+"-math-group";else n="[class*=-math-group]";if(n){a.select(e.node().parentNode).select(n).style({opacity:0})}var o=this.textContent;a.select(this).transition().duration(0).remove();a.select(document).on("mouseup",null);i.edit.call(e,o)}).on("focus",function(){var e=this;r._editing=true;a.select(document).on("mouseup",function(){if(a.event.target===e)return false;if(document.activeElement===l.node())l.node().blur()})}).on("keyup",function(){if(a.event.which===27){r._editing=false;e.style({opacity:1});a.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();i.cancel.call(e,this.textContent)}else{i.input.call(e,this.textContent);a.select(this).call(I(e,o,t))}}).on("keydown",function(){if(a.event.which===13)this.blur()}).call(s)}if(t.immediate)l();else o.on("click",l);return a.rebind(e,i,"on")}},{"../constants/alignment":148,"../constants/string_mappings":152,"../constants/xmlns_namespaces":153,"../lib":169,d3:15}],191:[function(e,t,r){"use strict";var a={};r.throttle=function e(t,r,i){var o=a[t];var l=Date.now();if(!o){for(var s in a){if(a[s].ts<l-6e4){delete a[s]}}o=a[t]={ts:0,timer:null}}n(o);function u(){i();o.ts=Date.now();if(o.onDone){o.onDone();o.onDone=null}}if(l>o.ts+r){u();return}o.timer=setTimeout(function(){u();o.timer=null},r)};r.done=function(e){var t=a[e];if(!t||!t.timer)return Promise.resolve();return new Promise(function(e){var r=t.onDone;t.onDone=function a(){if(r)r();e();t.onDone=null}})};r.clear=function(e){if(e){n(a[e]);delete a[e]}else{for(var t in a)r.clear(t)}};function n(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],192:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!a(n))n=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return n}},{"fast-isnumeric":18}],193:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],194:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],195:[function(e,t,r){"use strict";var a=e("../registry");t.exports=function e(t){var r=a.layoutArrayContainers,n=a.layoutArrayRegexes,i=t.split("[")[0],o,l;for(var s=0;s<n.length;s++){l=t.match(n[s]);if(l&&l.index===0){o=l[0];break}}if(!o)o=r[r.indexOf(i)];if(!o)return false;var u=t.substr(o.length);if(!u)return{array:o,index:"",property:""};l=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!l)return false;return{array:o,index:Number(l[1]),property:l[3]||""}}},{"../registry":261}],196:[function(e,t,r){"use strict";var a=e("../lib");var n=a.extendFlat;var i=a.isPlainObject;var o={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]};var l={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]};var s=o.flags.slice().concat(["clearCalc","fullReplot"]);var u=l.flags.slice().concat("layoutReplot");t.exports={traces:o,layout:l,traceFlags:function(){return c(s)},layoutFlags:function(){return c(u)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var a=r.split("+");for(var n=0;n<a.length;n++){e[a[n]]=true}}},overrideAll:f};function c(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var a=n({},e);for(var o in a){var l=a[o];if(i(l)){a[o]=d(l,t,r,o)}}if(r==="from-root")a.editType=t;return a}function d(e,t,r,a){if(e.valType){var i=n({},e);i.editType=t;if(Array.isArray(e.items)){i.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++){i.items[o]=d(e.items[o],t,"from-root")}}return i}else{return f(e,t,a.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":169}],197:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("gl-mat4/fromQuat");var i=e("../registry");var o=e("../lib");var l=e("../plots/plots");var s=e("../plots/cartesian/axis_ids");var u=s.cleanId;var c=s.getFromTrace;var f=e("../components/color");r.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){o.log("Clearing previous rejected promises from queue.")}e._promises=[]};r.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var a=(l.subplotsRegistry.cartesian||{}).attrRegex;var i=(l.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var c=s[t];if(a&&a.test(c)){var v=e[c];if(v.anchor&&v.anchor!=="free"){v.anchor=u(v.anchor)}if(v.overlaying)v.overlaying=u(v.overlaying);if(!v.type){if(v.isdate)v.type="date";else if(v.islog)v.type="log";else if(v.isdate===false&&v.islog===false)v.type="linear"}if(v.autorange==="withzero"||v.autorange==="tozero"){v.autorange=true;v.rangemode="tozero"}delete v.islog;delete v.isdate;delete v.categories;if(g(v,"domain"))delete v.domain;if(v.autotick!==undefined){if(v.tickmode===undefined){v.tickmode=v.autotick?"auto":"linear"}delete v.autotick}}else if(i&&i.test(c)){var p=e[c];var h=p.cameraposition;if(Array.isArray(h)&&h[0].length===4){var y=h[0],m=h[1],x=h[2],b=n([],y),_=[];for(r=0;r<3;++r){_[r]=m[r]+x*b[2+4*r]}p.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:m[0],y:m[1],z:m[2]},up:{x:b[1],y:b[5],z:b[9]}};delete p.cameraposition}}}var w=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<w;t++){var k=e.annotations[t];if(!o.isPlainObject(k))continue;if(k.ref){if(k.ref==="paper"){k.xref="paper";k.yref="paper"}else if(k.ref==="data"){k.xref="x";k.yref="y"}delete k.ref}d(k,"xref");d(k,"yref")}var M=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<M;t++){var T=e.shapes[t];if(!o.isPlainObject(T))continue;d(T,"xref");d(T,"yref")}var A=e.legend;if(A){if(A.x>3){A.x=1.02;A.xanchor="left"}else if(A.x<-2){A.x=-.02;A.xanchor="right"}if(A.y>3){A.y=1.02;A.yanchor="bottom"}else if(A.y<-2){A.y=-.02;A.yanchor="top"}}if(e.dragmode==="rotate")e.dragmode="orbit";f.clean(e);return e};function d(e,t){var r=e[t],a=t.charAt(0);if(r&&r!=="paper"){e[t]=u(r,a)}}r.cleanData=function(e){for(var t=0;t<e.length;t++){var a=e[t];var n;if(a.type==="histogramy"&&"xbins"in a&&!("ybins"in a)){a.ybins=a.xbins;delete a.xbins}if(a.error_y&&"opacity"in a.error_y){var s=f.defaults,c=a.error_y.color||(i.traceIs(a,"bar")?f.defaultLine:s[t%s.length]);a.error_y.color=f.addOpacity(f.rgb(c),f.opacity(c)*a.error_y.opacity);delete a.error_y.opacity}if("bardir"in a){if(a.bardir==="h"&&(i.traceIs(a,"bar")||a.type.substr(0,9)==="histogram")){a.orientation="h";r.swapXYData(a)}delete a.bardir}if(a.type==="histogramy")r.swapXYData(a);if(a.type==="histogramx"||a.type==="histogramy"){a.type="histogram"}if("scl"in a){a.colorscale=a.scl;delete a.scl}if("reversescl"in a){a.reversescale=a.reversescl;delete a.reversescl}if(a.xaxis)a.xaxis=u(a.xaxis,"x");if(a.yaxis)a.yaxis=u(a.yaxis,"y");if(i.traceIs(a,"gl3d")&&a.scene){a.scene=l.subplotsRegistry.gl3d.cleanId(a.scene)}if(!i.traceIs(a,"pie")&&!i.traceIs(a,"bar")){if(Array.isArray(a.textposition)){for(n=0;n<a.textposition.length;n++){a.textposition[n]=h(a.textposition[n])}}else if(a.textposition){a.textposition=h(a.textposition)}}var d=i.getModule(a);if(d&&d.colorbar){var y=d.colorbar.container;var m=y?a[y]:a;if(m&&m.colorscale){if(m.colorscale==="YIGnBu")m.colorscale="YlGnBu";if(m.colorscale==="YIOrRd")m.colorscale="YlOrRd"}}if(a.type==="surface"&&o.isPlainObject(a.contours)){var x=["x","y","z"];for(n=0;n<x.length;n++){var b=a.contours[x[n]];if(!o.isPlainObject(b))continue;if(b.highlightColor){b.highlightcolor=b.highlightColor;delete b.highlightColor}if(b.highlightWidth){b.highlightwidth=b.highlightWidth;delete b.highlightWidth}}}if(a.type==="candlestick"||a.type==="ohlc"){var _=(a.increasing||{}).showlegend!==false;var w=(a.decreasing||{}).showlegend!==false;var k=v(a.increasing);var M=v(a.decreasing);if(k!==false&&M!==false){var T=p(k,M,_,w);if(T)a.name=T}else if((k||M)&&!a.name){a.name=k||M}}if(Array.isArray(a.transforms)){var A=a.transforms;for(n=0;n<A.length;n++){var L=A[n];if(!o.isPlainObject(L))continue;switch(L.type){case"filter":if(L.filtersrc){L.target=L.filtersrc;delete L.filtersrc}if(L.calendar){if(!L.valuecalendar){L.valuecalendar=L.calendar}delete L.calendar}break;case"groupby":L.styles=L.styles||L.style;if(L.styles&&!Array.isArray(L.styles)){var S=L.styles;var C=Object.keys(S);L.styles=[];for(var O=0;O<C.length;O++){L.styles.push({target:C[O],value:S[C[O]]})}}break}}}if(g(a,"line"))delete a.line;if("marker"in a){if(g(a.marker,"line"))delete a.marker.line;if(g(a,"marker"))delete a.marker}f.clean(a)}};function v(e){if(!o.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function p(e,t,r,a){if(r&&!a)return e;if(a&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length);var i;for(i=0;i<n;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function h(e){var t="middle",r="center";if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right";return t+" "+r}function g(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}r.swapXYData=function(e){var t;o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y,a="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);o.swapAttrs(e,["error_?.copy_ystyle"]);if(a){o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++){if(n[t]==="x")n[t]="y";else if(n[t]==="y")n[t]="x"}e.hoverinfo=n.join("+")}};r.coerceTraceIndices=function(e,t){if(a(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}return t};r.manageArrayContainers=function(e,t,r){var n=e.obj,i=e.parts,l=i.length,s=i[l-1];var u=a(s);if(u&&t===null){var c=i.slice(0,l-1).join("."),f=o.nestedProperty(n,c).get();f.splice(s,1)}else if(u&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function m(e){var t=e.search(y);if(t>0)return e.substr(0,t)}r.hasParent=function(e,t){var r=m(t);while(r){if(r in e)return true;r=m(r)}return false};var x=["x","y","z"];r.clearAxisTypes=function(e,t,r){for(var a=0;a<t.length;a++){var n=e._fullData[a];for(var i=0;i<3;i++){var l=c(e,n,x[i]);if(l&&l.type!=="log"){var s=l._name;var u=l._id.substr(1);if(u.substr(0,5)==="scene"){if(r[u]!==undefined)continue;s=u+"."+s}var f=s+".type";if(r[s]===undefined&&r[f]===undefined){o.nestedProperty(e.layout,f).set(null)}}}}}},{"../components/color":50,"../lib":169,"../plots/cartesian/axis_ids":216,"../plots/plots":245,"../registry":261,"fast-isnumeric":18,"gl-mat4/fromQuat":19}],198:[function(e,t,r){"use strict";var a=e("./plot_api");r.plot=a.plot;r.newPlot=a.newPlot;r.restyle=a.restyle;r.relayout=a.relayout;r.redraw=a.redraw;r.update=a.update;r.react=a.react;r.extendTraces=a.extendTraces;r.prependTraces=a.prependTraces;r.addTraces=a.addTraces;r.deleteTraces=a.deleteTraces;r.moveTraces=a.moveTraces;r.purge=a.purge;r.addFrames=a.addFrames;r.deleteFrames=a.deleteFrames;r.animate=a.animate;r.setPlotConfig=a.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var n=e("./template_api");r.makeTemplate=n.makeTemplate;r.validateTemplate=n.validateTemplate},{"../snapshot/download":263,"./plot_api":200,"./template_api":205,"./to_image":206,"./validate":207}],199:[function(e,t,r){"use strict";var a=e("../lib/nested_property");var n=e("../lib/is_plain_object");var i=e("../lib/noop");var o=e("../lib/loggers");var l=e("../lib/search").sorterAsc;var s=e("../registry");r.containerArrayMatch=e("./container_array_match");var u=r.isAddVal=function e(t){return t==="add"||n(t)};var c=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,n,f){var d=r.astr,v=s.getComponentMethod(d,"supplyLayoutDefaults"),p=s.getComponentMethod(d,"draw"),h=s.getComponentMethod(d,"drawOne"),g=f.replot||f.recalc||v===i||p===i,y=t.layout,m=t._fullLayout;if(n[""]){if(Object.keys(n).length>1){o.warn("Full array edits are incompatible with other edits",d)}var x=n[""][""];if(c(x))r.set(null);else if(Array.isArray(x))r.set(x);else{o.warn("Unrecognized full array edit value",d,x);return true}if(g)return false;v(y,m);p(t);return true}var b=Object.keys(n).map(Number).sort(l),_=r.get(),w=_||[],k=a(m,d).get();var M=[],T=-1,A=w.length,L,S,C,O,z,P,D;for(L=0;L<b.length;L++){C=b[L];O=n[C];z=Object.keys(O);P=O[""],D=u(P);if(C<0||C>w.length-(D?0:1)){o.warn("index out of range",d,C);continue}if(P!==undefined){if(z.length>1){o.warn("Insertion & removal are incompatible with edits to the same index.",d,C)}if(c(P)){M.push(C)}else if(D){if(P==="add")P={};w.splice(C,0,P);if(k)k.splice(C,0,{})}else{o.warn("Unrecognized full object edit value",d,C,P)}if(T===-1)T=C}else{for(S=0;S<z.length;S++){a(w[C],z[S]).set(O[z[S]])}}}for(L=M.length-1;L>=0;L--){w.splice(M[L],1);if(k)k.splice(M[L],1)}if(!w.length)r.set(null);else if(!_)r.set(w);if(g)return false;v(y,m);if(h!==i){var I;if(T===-1){I=b}else{A=Math.max(w.length,A);I=[];for(L=0;L<b.length;L++){C=b[L];if(C>=T)break;I.push(C)}for(L=T;L<A;L++){I.push(L)}}for(L=0;L<I.length;L++){h(t,I[L])}}else p(t);return true}},{"../lib/is_plain_object":171,"../lib/loggers":174,"../lib/nested_property":177,"../lib/noop":178,"../lib/search":187,"../registry":261,"./container_array_match":195}],200:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("has-hover");var o=e("../lib");var l=e("../lib/events");var s=e("../lib/queue");var u=e("../registry");var c=e("./plot_schema");var f=e("../plots/plots");var d=e("../plots/polar/legacy");var v=e("../plots/cartesian/axes");var p=e("../components/drawing");var h=e("../components/color");var g=e("../components/colorbar/connect");var y=e("../plots/cartesian/graph_interact").initInteractions;var m=e("../constants/xmlns_namespaces");var x=e("../lib/svg_text_utils");var b=e("./plot_config");var _=e("./manage_arrays");var w=e("./helpers");var k=e("./subroutines");var M=e("./edit_types");var T=e("../plots/cartesian/constants").AX_NAME_PATTERN;var A=0;var L=5;r.plot=function(e,t,n,i){var s;e=o.getGraphDiv(e);l.init(e);if(o.isPlainObject(t)){var c=t;t=c.data;n=c.layout;i=c.config;s=c.frames}var d=l.triggerHandler(e,"plotly_beforeplot",[t,n,i]);if(d===false)return Promise.reject();if(!t&&!n&&!o.isPlotDiv(e)){o.warn("Calling Plotly.plot as if redrawing "+"but this container doesn't yet have a plot.",e)}function h(){if(s){return r.addFrames(e,s)}}z(e,i);if(!n)n={};a.select(e).classed("js-plotly-plot",true);p.makeTester();delete p.baseUrl;if(!Array.isArray(e._promises))e._promises=[];var m=(e.data||[]).length===0&&Array.isArray(t);if(Array.isArray(t)){w.cleanData(t);if(m)e.data=t;else e.data.push.apply(e.data,t);e.empty=false}if(!e.layout||m)e.layout=w.cleanLayout(n);if(e._dragging&&!e._transitioning){e._replotPending=true;return Promise.reject()}else{e._replotPending=false}f.supplyDefaults(e);var x=e._fullLayout;var b=x._has("cartesian");if(!x._has("polar")&&t&&t[0]&&t[0].r){o.log("Legacy polar charts are deprecated!");return P(e,t,n)}x._replotting=true;if(m)ee(e);if(e.framework!==ee){e.framework=ee;ee(e)}p.initGradients(e);if(m)v.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;if(_)f.doCalcdata(e);for(var M=0;M<e.calcdata.length;M++){e.calcdata[M][0].trace=e._fullData[M]}var T=JSON.stringify(x._size);function A(){var t=x._basePlotModules;for(var r=0;r<t.length;r++){if(t[r].drawFramework){t[r].drawFramework(e)}}if(!x._glcanvas&&x._has("gl")){x._glcanvas=x._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});x._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})}if(x._glcanvas){x._glcanvas.attr("width",x.width).attr("height",x.height)}return f.previousPromises(e)}function L(){var t=e.calcdata;var r,a,n;f.clearAutoMarginIds(e);k.drawMarginPushers(e);v.allowAutoMargin(e);for(r=0;r<t.length;r++){a=t[r];n=a[0].trace;var i=n._module.colorbar;if(n.visible!==true||!i){f.autoMargin(e,"cb"+n.uid)}else g(e,a,i)}f.doAutoMargin(e);return f.previousPromises(e)}function C(){if(JSON.stringify(x._size)===T)return;return o.syncOrAsync([L,k.layoutStyles],e)}function O(){if(!_){D();return}var t=x._subplots.cartesian;var r=x._modules;var a=[];var n,i,l;for(l=0;l<r.length;l++){o.pushUnique(a,r[l].setPositions)}if(a.length){for(i=0;i<t.length;i++){n=x._plots[t[i]];for(l=0;l<a.length;l++){a[l](e,n)}}}u.getComponentMethod("errorbars","calc")(e);return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),D,u.getComponentMethod("rangeslider","calcAutorange")],e)}function D(){if(e._transitioning)return;k.doAutoRangeAndConstraints(e);if(m)v.saveRangeInitial(e)}function I(){return v.doTicks(e,m?"":"redraw")}var E=[f.previousPromises,h,A,L,C];if(b)E.push(O);E.push(k.layoutStyles);if(b)E.push(I);E.push(k.drawData,k.finalDraw,y,f.addLinks,f.rehover,f.doAutoMargin,f.previousPromises);var N=o.syncOrAsync(E,e);if(!N||!N.then)N=Promise.resolve();return N.then(function(){S(e);return e})};function S(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}r.setPlotConfig=function e(t){return o.extendFlat(b,t)};function C(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){o.error(e)}}function O(e,t){var r=h.combine(t,"white");C(e,r)}function z(e,t){if(!e._context)e._context=o.extendDeep({},b);var r=e._context;var a,n,l;if(t){n=Object.keys(t);for(a=0;a<n.length;a++){l=n[a];if(l==="editable"||l==="edits")continue;if(l in r){if(l==="setBackground"&&t[l]==="opaque"){r[l]=O}else{r[l]=t[l]}}}if(t.plot3dPixelRatio&&!r.plotGlPixelRatio){r.plotGlPixelRatio=r.plot3dPixelRatio}var s=t.editable;if(s!==undefined){r.editable=s;n=Object.keys(r.edits);for(a=0;a<n.length;a++){r.edits[n[a]]=s}}if(t.edits){n=Object.keys(t.edits);for(a=0;a<n.length;a++){l=n[a];if(l in r.edits){r.edits[l]=t.edits[l]}}}}if(r.staticPlot){r.editable=false;r.edits={};r.autosizable=false;r.scrollZoom=false;r.doubleClick=false;r.showTips=false;r.showLink=false;r.displayModeBar=false}if(r.displayModeBar==="hover"&&!i){r.displayModeBar=true}if(r.setBackground==="transparent"||typeof r.setBackground!=="function"){r.setBackground=C}}function P(e,t,r){var n=a.select(e).selectAll(".plot-container").data([0]);n.enter().insert("div",":first-child").classed("plot-container plotly",true);var i=n.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",true).style("position","relative");i.html("");if(t)e.data=t;if(r)e.layout=r;d.manager.fillLayout(e);i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"});e.framework=d.manager.framework(e);e.framework({data:e.data,layout:e.layout},i.node());e.framework.setUndoPoint();var l=e.framework.svg();var s=1;var u=e._fullLayout.title;if(u===""||!u)s=0;var c=function(){this.call(x.convertToTspans,e)};var v=l.select(".title-group text").call(c);if(e._context.edits.titleText){var p=o._(e,"Click to enter Plot title");if(!u||u===p){s=.2;v.attr({"data-unformatted":p}).text(p).style({opacity:s}).on("mouseover.opacity",function(){a.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){a.select(this).transition().duration(1e3).style("opacity",0)})}var h=function(){this.call(x.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}});this.text(t).call(c);this.call(h)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(c)})};v.call(h)}e._context.setBackground(e,e._fullLayout.paper_bgcolor);f.addLinks(e);return Promise.resolve()}r.redraw=function(e){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}w.cleanData(e.data);w.cleanLayout(e.layout);e.calcdata=undefined;return r.plot(e).then(function(){e.emit("plotly_redraw");return e})};r.newPlot=function(e,t,a,n){e=o.getGraphDiv(e);f.cleanPlot([],{},e._fullData||[],e._fullLayout||{},e.calcdata||[]);f.purge(e);return r.plot(e,t,a,n)};function D(e,t){var r=t+1,a=[],n,i;for(n=0;n<e.length;n++){i=e[n];if(i<0){a.push(r+i)}else{a.push(i)}}return a}function I(e,t,r){var a,n;for(a=0;a<t.length;a++){n=t[a];if(n!==parseInt(n,10)){throw new Error("all values in "+r+" must be integers")}if(n>=e.data.length||n<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(n,a+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1){throw new Error("each index in "+r+" must be unique.")}}}function E(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}I(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){I(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function N(e,t,r){var a,n;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(a=0;a<t.length;a++){n=t[a];if(typeof n!=="object"||(Array.isArray(n)||n===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function R(e,t,r,a){var n=o.isPlainObject(a);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!o.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}I(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(n&&(!(i in a)||!Array.isArray(a[i])||a[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function F(e,t,r,a){var i=o.isPlainObject(a),l=[];var s,u,c,f,d;if(!Array.isArray(r))r=[r];r=D(r,e.data.length-1);for(var v in t){for(var p=0;p<r.length;p++){s=e.data[r[p]];c=o.nestedProperty(s,v);u=c.get();f=t[v][p];if(!o.isArrayOrTypedArray(f)){throw new Error("attribute: "+v+" index: "+p+" must be an array")}if(!o.isArrayOrTypedArray(u)){throw new Error("cannot extend missing or non-array attribute: "+v)}if(u.constructor!==f.constructor){throw new Error("cannot extend array with an array of a different type: "+v)}d=i?a[v][p]:a;if(!n(d))d=-1;l.push({prop:c,target:u,insert:f,maxp:Math.floor(d)})}}return l}function B(e,t,r,a,n){R(e,t,r,a);var i=F(e,t,r,a);var o={};var l={};for(var s=0;s<i.length;s++){var u=i[s].prop;var c=i[s].maxp;var f=n(i[s].target,i[s].insert,c);u.set(f[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(f[1]);if(!Array.isArray(l[u.astr]))l[u.astr]=[];l[u.astr].push(i[s].target.length)}return{update:o,maxPoints:l}}function j(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}r.extendTraces=function e(t,a,n,i){t=o.getGraphDiv(t);function l(e,t,r){var a,n;if(o.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var l=j(e,t);if(r<0){a=l;n=i}else{a=i;n=l}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(s));n.set(e);n.set(t.subarray(0,s),e.length)}else{var u=r-t.length;var c=e.length-u;a.set(e.subarray(c));a.set(t,u);n.set(e.subarray(0,c))}}}else{a=e.concat(t);n=r>=0&&r<a.length?a.splice(0,a.length-r):[]}return[a,n]}var u=B(t,a,n,i,l);var c=r.redraw(t);var f=[t,u.update,n,u.maxPoints];s.add(t,r.prependTraces,f,e,arguments);return c};r.prependTraces=function e(t,a,n,i){t=o.getGraphDiv(t);function l(e,t,r){var a,n;if(o.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var l=j(t,e);if(r<0){a=l;n=i}else{a=i;n=l}}else{a=new e.constructor(r);n=new e.constructor(e.length+t.length-r);if(r===t.length){a.set(t);n.set(e)}else if(r<t.length){var s=t.length-r;a.set(t.subarray(0,s));n.set(t.subarray(s));n.set(e,s)}else{var u=r-t.length;a.set(t);a.set(e.subarray(0,u),t.length);n.set(e.subarray(u))}}}else{a=t.concat(e);n=r>=0&&r<a.length?a.splice(r,a.length):[]}return[a,n]}var u=B(t,a,n,i,l);var c=r.redraw(t);var f=[t,u.update,n,u.maxPoints];s.add(t,r.extendTraces,f,e,arguments);return c};r.addTraces=function e(t,a,n){t=o.getGraphDiv(t);var i=[],l=r.deleteTraces,u=e,c=[t,i],f=[t,a],d,v;N(t,a,n);if(!Array.isArray(a)){a=[a]}a=a.map(function(e){return o.extendFlat({},e)});w.cleanData(a);for(d=0;d<a.length;d++){t.data.push(a[d])}for(d=0;d<a.length;d++){i.push(-a.length+d)}if(typeof n==="undefined"){v=r.redraw(t);s.add(t,l,c,u,f);return v}if(!Array.isArray(n)){n=[n]}try{E(t,i,n)}catch(e){t.data.splice(t.data.length-a.length,a.length);throw e}s.startSequence(t);s.add(t,l,c,u,f);v=r.moveTraces(t,i,n);s.stopSequence(t);return v};r.deleteTraces=function e(t,a){t=o.getGraphDiv(t);var n=[],i=r.addTraces,l=e,u=[t,n,a],c=[t,a],f,d;if(typeof a==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(a)){a=[a]}I(t,a,"indices");a=D(a,t.data.length-1);a.sort(o.sorterDes);for(f=0;f<a.length;f+=1){d=t.data.splice(a[f],1)[0];n.push(d)}var v=r.redraw(t);s.add(t,i,u,l,c);return v};r.moveTraces=function e(t,a,n){t=o.getGraphDiv(t);var i=[],l=[],u=e,c=e,f=[t,n,a],d=[t,a,n],v;E(t,a,n);a=Array.isArray(a)?a:[a];if(typeof n==="undefined"){n=[];for(v=0;v<a.length;v++){n.push(-a.length+v)}}n=Array.isArray(n)?n:[n];a=D(a,t.data.length-1);n=D(n,t.data.length-1);for(v=0;v<t.data.length;v++){if(a.indexOf(v)===-1){i.push(t.data[v])}}for(v=0;v<a.length;v++){l.push({newIndex:n[v],trace:t.data[a[v]]})}l.sort(function(e,t){return e.newIndex-t.newIndex});for(v=0;v<l.length;v+=1){i.splice(l[v].newIndex,0,l[v].trace)}t.data=i;var p=r.redraw(t);s.add(t,u,f,c,d);return p};r.restyle=function e(t,a,n,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);var l={};if(typeof a==="string")l[a]=n;else if(o.isPlainObject(a)){l=o.extendFlat({},a);if(i===undefined)i=n}else{o.warn("Restyle fail.",a,n,i);return Promise.reject()}if(Object.keys(l).length)t.changed=true;var u=w.coerceTraceIndices(t,i);var c=H(t,l,u);var d=c.flags;if(d.clearCalc)t.calcdata=undefined;if(d.clearAxisTypes)w.clearAxisTypes(t,u,{});var v=[];if(d.fullReplot){v.push(r.plot)}else{v.push(f.previousPromises);f.supplyDefaults(t);if(d.style)v.push(k.doTraceStyle);if(d.colorbars)v.push(k.doColorBars);v.push(S)}v.push(f.rehover);s.add(t,e,[t,c.undoit,c.traces],e,[t,c.redoit,c.traces]);var p=o.syncOrAsync(v,t);if(!p||!p.then)p=Promise.resolve();return p.then(function(){t.emit("plotly_restyle",c.eventData);return t})};function q(e){if(e===undefined)return null;return e}function H(e,t,r){var a=e._fullLayout,n=e._fullData,i=e.data,l;var s=M.traceFlags();var d={},p={},h;function g(){return r.map(function(){return undefined})}function y(e){var t=v.id2name(e);if(h.indexOf(t)===-1)h.push(t)}function m(e){return"LAYOUT"+e+".autorange"}function x(e){return"LAYOUT"+e+".range"}function b(a,n,l){if(Array.isArray(a)){a.forEach(function(e){b(e,n,l)});return}if(a in t||w.hasParent(t,a))return;var s;if(a.substr(0,6)==="LAYOUT"){s=o.nestedProperty(e.layout,a.replace("LAYOUT",""))}else{s=o.nestedProperty(i[r[l]],a)}if(!(a in p)){p[a]=g()}if(p[a][l]===undefined){p[a][l]=q(s.get())}if(n!==undefined){s.set(n)}}for(var _ in t){if(w.hasParent(t,_)){throw new Error("cannot set "+_+"and a parent attribute simultaneously")}var k=t[_],T,A,L,S,C,O;d[_]=k;if(_.substr(0,6)==="LAYOUT"){L=o.nestedProperty(e.layout,_.replace("LAYOUT",""));p[_]=[q(L.get())];L.set(Array.isArray(k)?k[0]:k);s.calc=true;continue}p[_]=g();for(l=0;l<r.length;l++){T=i[r[l]];A=n[r[l]];L=o.nestedProperty(T,_);S=L.get();C=Array.isArray(k)?k[l%k.length]:k;if(C===undefined)continue;var z=L.parts[L.parts.length-1];var P=_.substr(0,_.length-z.length-1);var D=P?P+".":"";var I=P?o.nestedProperty(A,P).get():A;O=c.getTraceValObject(A,L.parts);if(O&&O.impliedEdits&&C!==null){for(var E in O.impliedEdits){b(o.relativeAttr(_,E),O.impliedEdits[E],l)}}else if((z==="thicknessmode"||z==="lenmode")&&S!==C&&(C==="fraction"||C==="pixels")&&I){var N=a._size;var R=I.orient;var F=R==="top"||R==="bottom";if(z==="thicknessmode"){var B=F?N.h:N.w;b(D+"thickness",I.thickness*(C==="fraction"?1/B:B),l)}else{var j=F?N.w:N.h;b(D+"len",I.len*(C==="fraction"?1/j:j),l)}}else if(_==="type"&&C==="pie"!==(S==="pie")){var H="x",V="y";if((C==="bar"||S==="bar")&&T.orientation==="h"){H="y";V="x"}o.swapAttrs(T,["?","?src"],"labels",H);o.swapAttrs(T,["d?","?0"],"label",H);o.swapAttrs(T,["?","?src"],"values",V);if(S==="pie"){o.nestedProperty(T,"marker.color").set(o.nestedProperty(T,"marker.colors").get());a._pielayer.selectAll("g.trace").remove()}else if(u.traceIs(T,"cartesian")){o.nestedProperty(T,"marker.colors").set(o.nestedProperty(T,"marker.color").get())}}p[_][l]=q(S);var U=["swapxy","swapxyaxes","orientation","orientationaxes"];if(U.indexOf(_)!==-1){if(_==="orientation"){L.set(C);var G=T.x&&!T.y?"h":"v";if((L.get()||G)===A.orientation){continue}}else if(_==="orientationaxes"){T.orientation={v:"h",h:"v"}[A.orientation]}w.swapXYData(T);s.calc=s.clearAxisTypes=true}else if(f.dataArrayContainers.indexOf(L.parts[0])!==-1){w.manageArrayContainers(L,C,p);s.calc=true}else{if(O){if(O.arrayOk&&(o.isArrayOrTypedArray(C)||o.isArrayOrTypedArray(S))){s.calc=true}else M.update(s,O)}else{s.calc=true}L.set(C)}}if(["swapxyaxes","orientationaxes"].indexOf(_)!==-1){v.swap(e,r)}if(_==="orientationaxes"){var Z=o.nestedProperty(e.layout,"hovermode");if(Z.get()==="x"){Z.set("y")}else if(Z.get()==="y"){Z.set("x")}}if(["orientation","type"].indexOf(_)!==-1){h=[];for(l=0;l<r.length;l++){var Y=i[r[l]];if(u.traceIs(Y,"cartesian")){y(Y.xaxis||"x");y(Y.yaxis||"y");if(_==="type"){b(["autobinx","autobiny"],true,l)}}}b(h.map(m),true,0);b(h.map(x),[0,1],0)}}var X=false;var W=v.list(e);for(l=0;l<W.length;l++){if(W[l].autorange){X=true;break}}if(s.calc||s.calcIfAutorange&&X){s.clearCalc=true}if(s.calc||s.plot||s.calcIfAutorange){s.fullReplot=true}return{flags:s,undoit:p,redoit:d,traces:r,eventData:o.extendDeepNoArrays([],[d,r])}}r.relayout=function e(t,r,a){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}var n={};if(typeof r==="string"){n[r]=a}else if(o.isPlainObject(r)){n=o.extendFlat({},r)}else{o.warn("Relayout fail.",r,a);return Promise.reject()}if(Object.keys(n).length)t.changed=true;var i=Y(t,n);var l=i.flags;if(l.calc)t.calcdata=undefined;var u=[f.previousPromises];if(l.layoutReplot){u.push(k.layoutReplot)}else if(Object.keys(n).length){f.supplyDefaults(t);if(l.legend)u.push(k.doLegend);if(l.layoutstyle)u.push(k.layoutStyles);if(l.axrange){V(u,i.rangesAltered)}if(l.ticks)u.push(k.doTicksRelayout);if(l.modebar)u.push(k.doModeBar);if(l.camera)u.push(k.doCamera);u.push(S)}u.push(f.rehover);s.add(t,e,[t,i.undoit],e,[t,i.redoit]);var c=o.syncOrAsync(u,t);if(!c||!c.then)c=Promise.resolve(t);return c.then(function(){t.emit("plotly_relayout",i.eventData);return t})};function V(e,t){var r=t?function(e){return k.doTicksRelayout(e,t)}:k.doTicksRelayout;e.push(r,k.drawData,k.finalDraw)}var U=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var G=/^[xyz]axis[0-9]*\.autorange$/;var Z=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Y(e,t){var r=e.layout,a=e._fullLayout,n=Object.keys(t),i=v.list(e),l={},s,f,d;for(f=0;f<n.length;f++){if(n[f].indexOf("allaxes")===0){for(d=0;d<i.length;d++){var p=i[d]._id.substr(1),h=p.indexOf("scene")!==-1?p+".":"",g=n[f].replace("allaxes",h+i[d]._name);if(!t[g])t[g]=t[n[f]]}delete t[n[f]]}}var y=M.layoutFlags();var m={},x={};function b(e,a){if(Array.isArray(e)){e.forEach(function(e){b(e,a)});return}if(e in t||w.hasParent(t,e))return;var n=o.nestedProperty(r,e);if(!(e in x)){x[e]=q(n.get())}if(a!==undefined)n.set(a)}var k={};var A;function L(e){var t=v.name2id(e.split(".")[0]);k[t]=1;return t}for(var S in t){if(w.hasParent(t,S)){throw new Error("cannot set "+S+"and a parent attribute simultaneously")}var C=o.nestedProperty(r,S);var O=t[S];var z=C.parts.length;var P=z-1;while(P>0&&typeof C.parts[P]!=="string")P--;var D=C.parts[P];var I=C.parts[P-1]+"."+D;var E=C.parts.slice(0,P).join(".");var N=o.nestedProperty(e.layout,E).get();var R=o.nestedProperty(a,E).get();var F=C.get();if(O===undefined)continue;m[S]=O;x[S]=D==="reverse"?O:q(F);var B=c.getLayoutValObject(a,C.parts);if(B&&B.impliedEdits&&O!==null){for(var j in B.impliedEdits){b(o.relativeAttr(S,j),B.impliedEdits[j])}}if(["width","height"].indexOf(S)!==-1&&O===null){a[S]=e._initialAutoSize[S]}else if(I.match(U)){L(I);o.nestedProperty(a,E+"._inputRange").set(null)}else if(I.match(G)){L(I);o.nestedProperty(a,E+"._inputRange").set(null);var H=o.nestedProperty(a,E).get();if(H._inputDomain){H._input.domain=H._inputDomain.slice()}}else if(I.match(Z)){o.nestedProperty(a,E+"._inputDomain").set(null)}if(D==="type"){var V=N,Y=R.type==="linear"&&O==="log",Q=R.type==="log"&&O==="linear";if(Y||Q){if(!V||!V.range){b(E+".autorange",true)}else if(!R.autorange){var J=V.range[0],$=V.range[1];if(Y){if(J<=0&&$<=0){b(E+".autorange",true)}if(J<=0)J=$/1e6;else if($<=0)$=J/1e6;b(E+".range[0]",Math.log(J)/Math.LN10);b(E+".range[1]",Math.log($)/Math.LN10)}else{b(E+".range[0]",Math.pow(10,J));b(E+".range[1]",Math.pow(10,$))}}else if(Y){V.range=V.range[1]>V.range[0]?[1,2]:[2,1]}if(Array.isArray(a._subplots.polar)&&a._subplots.polar.length&&a[C.parts[0]]&&C.parts[1]==="radialaxis"){delete a[C.parts[0]]._subplot.viewInitial["radialaxis.range"]}u.getComponentMethod("annotations","convertCoords")(e,R,O,b);u.getComponentMethod("images","convertCoords")(e,R,O,b)}else{b(E+".autorange",true);b(E+".range",null)}o.nestedProperty(a,E+"._inputRange").set(null)}else if(D.match(T)){var K=o.nestedProperty(a,S).get(),ee=(O||{}).type;if(!ee||ee==="-")ee="linear";u.getComponentMethod("annotations","convertCoords")(e,K,ee,b);u.getComponentMethod("images","convertCoords")(e,K,ee,b)}var te=_.containerArrayMatch(S);if(te){s=te.array;f=te.index;var re=te.property;var ae=o.nestedProperty(r,s);var ne=(ae||[])[f]||{};var ie=ne;var oe=B||{editType:"calc"};var le=oe.editType.indexOf("calcIfAutorange")!==-1;if(f===""){if(le)y.calc=true;else M.update(y,oe);le=false}else if(re===""){ie=O;if(_.isAddVal(O)){x[S]=null}else if(_.isRemoveVal(O)){x[S]=ne;ie=ne}else o.warn("unrecognized full object value",t)}if(le&&(W(e,ie,"x")||W(e,ie,"y"))){y.calc=true}else{M.update(y,oe)}if(!l[s])l[s]={};var se=l[s][f];if(!se)se=l[s][f]={};se[re]=O;delete t[S]}else if(D==="reverse"){if(N.range)N.range.reverse();else{b(E+".autorange",true);N.range=[1,0]}if(R.autorange)y.calc=true;else y.plot=true}else{if(a._has("scatter-like")&&a._has("regl")&&(S==="dragmode"&&(O==="lasso"||O==="select")&&!(F==="lasso"||F==="select"))){y.plot=true}else if(B)M.update(y,B);else y.calc=true;C.set(O)}}for(s in l){var ue=_.applyContainerArrayChanges(e,o.nestedProperty(r,s),l[s],y);if(!ue)y.plot=true}var ce=a._axisConstraintGroups||[];for(A in k){for(f=0;f<ce.length;f++){var fe=ce[f];if(fe[A]){y.calc=true;for(var de in fe){if(!k[de]){v.getFromId(e,de)._constraintShrinkable=true}}}}}if(X(e)||t.height||t.width)y.plot=true;if(y.plot||y.calc){y.layoutReplot=true}return{flags:y,rangesAltered:k,undoit:x,redoit:m,eventData:o.extendDeep({},m)}}function X(e){var t=e._fullLayout;var r=t.width;var a=t.height;if(e.layout.autosize)f.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==a}function W(e,t,r){if(!o.isPlainObject(t))return false;var a=t[r+"ref"]||r,n=v.getFromId(e,a);if(!n&&a.charAt(0)===r){n=v.getFromId(e,r)}return(n||{}).autorange}r.update=function e(t,a,n,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}if(!o.isPlainObject(a))a={};if(!o.isPlainObject(n))n={};if(Object.keys(a).length)t.changed=true;if(Object.keys(n).length)t.changed=true;var l=w.coerceTraceIndices(t,i);var u=H(t,o.extendFlat({},a),l);var c=u.flags;var d=Y(t,o.extendFlat({},n));var v=d.flags;if(c.clearCalc||v.calc)t.calcdata=undefined;if(c.clearAxisTypes)w.clearAxisTypes(t,l,n);var p=[];if(c.fullReplot&&v.layoutReplot){var h=t.data,g=t.layout;t.data=undefined;t.layout=undefined;p.push(function(){return r.plot(t,h,g)})}else if(c.fullReplot){p.push(r.plot)}else if(v.layoutReplot){p.push(k.layoutReplot)}else{p.push(f.previousPromises);f.supplyDefaults(t);if(c.style)p.push(k.doTraceStyle);if(c.colorbars)p.push(k.doColorBars);if(v.legend)p.push(k.doLegend);if(v.layoutstyle)p.push(k.layoutStyles);if(v.axrange){V(p,d.rangesAltered)}if(v.ticks)p.push(k.doTicksRelayout);if(v.modebar)p.push(k.doModeBar);if(v.camera)p.push(k.doCamera);p.push(S)}p.push(f.rehover);s.add(t,e,[t,u.undoit,d.undoit,u.traces],e,[t,u.redoit,d.redoit,u.traces]);var y=o.syncOrAsync(p,t);if(!y||!y.then)y=Promise.resolve(t);return y.then(function(){t.emit("plotly_update",{data:u.eventData,layout:d.eventData});return t})};r.react=function(e,t,a,n){var i,l;function s(){return r.addFrames(e,i)}e=o.getGraphDiv(e);var c=e._fullData;var d=e._fullLayout;if(!o.isPlotDiv(e)||!c||!d){l=r.newPlot(e,t,a,n)}else{if(o.isPlainObject(t)){var v=t;t=v.data;a=v.layout;n=v.config;i=v.frames}var p=false;if(n){var h=o.extendDeep({},e._context);e._context=undefined;z(e,n);p=K(h,e._context)}e.data=t||[];w.cleanData(e.data);e.layout=a||{};w.cleanLayout(e.layout);f.supplyDefaults(e,{skipUpdateCalc:true});var g=e._fullData;var y=e._fullLayout;var m=y.datarevision===undefined;var x=Q(e,c,g,m);var b=J(e,d,y,m);if(X(e))b.layoutReplot=true;if(x.calc||b.calc)e.calcdata=undefined;else f.supplyDefaultsUpdateCalc(e.calcdata,g);var _=[];if(i){e._transitionData={};f.createTransitionData(e);_.push(s)}if(x.fullReplot||b.layoutReplot||p){e._fullLayout._skipDefaults=true;_.push(r.plot)}else{for(var M in b.arrays){var T=b.arrays[M];if(T.length){var A=u.getComponentMethod(M,"drawOne");if(A!==o.noop){for(var L=0;L<T.length;L++){A(e,T[L])}}else{var C=u.getComponentMethod(M,"draw");if(C===o.noop){throw new Error("cannot draw components: "+M)}C(e)}}}_.push(f.previousPromises);if(x.style)_.push(k.doTraceStyle);if(x.colorbars)_.push(k.doColorBars);if(b.legend)_.push(k.doLegend);if(b.layoutstyle)_.push(k.layoutStyles);if(b.axrange)V(_);if(b.ticks)_.push(k.doTicksRelayout);if(b.modebar)_.push(k.doModeBar);if(b.camera)_.push(k.doCamera);_.push(S)}_.push(f.rehover);l=o.syncOrAsync(_,e);if(!l||!l.then)l=Promise.resolve(e)}return l.then(function(){e.emit("plotly_react",{data:t,layout:a});return e})};function Q(e,t,r,a){if(t.length!==r.length){return{fullReplot:true,calc:true}}var n=M.traceFlags();n.arrays={};var i,o;function l(e){return c.getTraceValObject(o,e)}var s={getValObject:l,flags:n,immutable:a,gd:e};var u={};for(i=0;i<t.length;i++){o=r[i]._fullInput;if(u[o.uid])continue;u[o.uid]=1;s.autoranged=o.xaxis?v.getFromId(e,o.xaxis).autorange||v.getFromId(e,o.yaxis).autorange:false;$(t[i]._fullInput,o,[],s)}if(n.calc||n.plot||n.calcIfAutorange){n.fullReplot=true}return n}function J(e,t,r,a){var n=M.layoutFlags();n.arrays={};function i(e){return c.getLayoutValObject(r,e)}var o={getValObject:i,flags:n,immutable:a,gd:e};$(t,r,[],o);if(n.plot||n.calc){n.layoutReplot=true}return n}function $(e,t,r,a){var n,i;var l=a.getValObject;var s=a.flags;var u=a.immutable;var c=a.inArray;var f=a.arrayIndex;var d=a.gd;var v=a.autoranged;function p(){var e=n.editType;if(e.indexOf("calcIfAutorange")!==-1&&(v||v===undefined&&(W(d,t,"x")||W(d,t,"y")))){s.calc=true;return}if(c&&e.indexOf("arraydraw")!==-1){o.pushUnique(s.arrays[c],f);return}M.update(s,n)}function h(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(s.calc)return;var g=e[i];var y=t[i];if(i.charAt(0)==="_"||typeof g==="function"||g===y)continue;if(i==="tick0"||i==="dtick"){var m=t.tickmode;if(m==="auto"||m==="array"||!m)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;var x=r.concat(i);n=l(x);if(!n)continue;if(n._compareAsJSON&&JSON.stringify(g)===JSON.stringify(y))continue;var b=n.valType;var _;var w=h(n);var k=Array.isArray(g);var T=Array.isArray(y);if(k&&T){var A="_input_"+i;var L=e[A];var S=t[A];if(Array.isArray(L)&&L===S)continue}if(y===undefined){if(w&&k)s.calc=true;else p()}else if(n._isLinkedToArray){var C=[];var O=false;if(!c)s.arrays[i]=C;var z=Math.min(g.length,y.length);var P=Math.max(g.length,y.length);if(z!==P){if(n.editType==="arraydraw"){O=true}else{p();continue}}for(_=0;_<z;_++){$(g[_],y[_],x.concat(_),o.extendFlat({inArray:i,arrayIndex:_},a))}if(O){for(_=z;_<P;_++){C.push(_)}}}else if(!b&&o.isPlainObject(g)){$(g,y,x,a)}else if(w){if(k&&T){if(u){s.calc=true}}else if(k!==T){s.calc=true}else p()}else if(k&&T){if(g.length!==y.length||String(g)!==String(y)){p()}}else{p()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){n=l(r.concat(i));if(h(n)&&Array.isArray(t[i])){s.calc=true;return}else p()}}}function K(e,t){var r;for(r in e){var a=e[r];var n=t[r];if(a!==n){if(o.isPlainObject(a)&&o.isPlainObject(n)){if(K(a,n)){return true}}else if(Array.isArray(a)&&Array.isArray(n)){if(a.length!==n.length){return true}for(var i=0;i<a.length;i++){if(a[i]!==n[i]){if(o.isPlainObject(a[i])&&o.isPlainObject(n[i])){if(K(a[i],n[i])){return true}}else{return true}}}}else{return true}}}}r.animate=function(e,t,r){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plot.ly/javascript/animations/")}var a=e._transitionData;if(!a._frameQueue){a._frameQueue=[]}r=f.supplyAnimationDefaults(r);var n=r.transition;var i=r.frame;if(a._frameWaitingCnt===undefined){a._frameWaitingCnt=0}function l(e){if(Array.isArray(n)){if(e>=n.length){return n[0]}else{return n[e]}}else{return n}}function s(e){if(Array.isArray(i)){if(e>=i.length){return i[0]}else{return i[e]}}else{return i}}function u(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(i,c){function d(){if(a._frameQueue.length===0){return}while(a._frameQueue.length){var t=a._frameQueue.pop();if(t.onInterrupt){t.onInterrupt()}}e.emit("plotly_animationinterrupted",[])}function v(t){if(t.length===0)return;for(var n=0;n<t.length;n++){var o;if(t[n].type==="byname"){o=f.computeFrame(e,t[n].name)}else{o=t[n].data}var d=s(n);var v=l(n);v.duration=Math.min(v.duration,d.duration);var p={frame:o,name:t[n].name,frameOpts:d,transitionOpts:v};if(n===t.length-1){p.onComplete=u(i,2);p.onInterrupt=c}a._frameQueue.push(p)}if(r.mode==="immediate"){a._lastFrameAt=-Infinity}if(!a._animationRaf){g()}}function p(){e.emit("plotly_animated");window.cancelAnimationFrame(a._animationRaf);a._animationRaf=null}function h(){if(a._currentFrame&&a._currentFrame.onComplete){a._currentFrame.onComplete()}var t=a._currentFrame=a._frameQueue.shift();if(t){var r=t.name?t.name.toString():null;e._fullLayout._currentFrame=r;a._lastFrameAt=Date.now();a._timeToNext=t.frameOpts.duration;f.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){if(t.onComplete){t.onComplete()}});e.emit("plotly_animatingframe",{name:r,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else{p()}}function g(){e.emit("plotly_animating");a._lastFrameAt=-Infinity;a._timeToNext=0;a._runningTransitions=0;a._currentFrame=null;var t=function(){a._animationRaf=window.requestAnimationFrame(t);if(Date.now()-a._lastFrameAt>a._timeToNext){h()}};t()}var y=0;function m(e){if(Array.isArray(n)){if(y>=n.length){e.transitionOpts=n[y]}else{e.transitionOpts=n[0]}}else{e.transitionOpts=n}y++;return e}var x,b;var _=[];var k=t===undefined||t===null;var M=Array.isArray(t);var T=!k&&!M&&o.isPlainObject(t);if(T){_.push({type:"object",data:m(o.extendFlat({},t))})}else if(k||["string","number"].indexOf(typeof t)!==-1){for(x=0;x<a._frames.length;x++){b=a._frames[x];if(!b)continue;if(k||String(b.group)===String(t)){_.push({type:"byname",name:String(b.name),data:m({name:b.name})})}}}else if(M){for(x=0;x<t.length;x++){var A=t[x];if(["number","string"].indexOf(typeof A)!==-1){A=String(A);_.push({type:"byname",name:A,data:m({name:A})})}else if(o.isPlainObject(A)){_.push({type:"object",data:m(o.extendFlat({},A))})}}}for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&!a._frameHash[b.data.name]){o.warn('animate failure: frame not found: "'+b.data.name+'"');c();return}}if(["next","immediate"].indexOf(r.mode)!==-1){d()}if(r.direction==="reverse"){_.reverse()}var L=e._fullLayout._currentFrame;if(L&&r.fromcurrent){var S=-1;for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&b.name===L){S=x;break}}if(S>0&&S<_.length-1){var C=[];for(x=0;x<_.length;x++){b=_[x];if(_[x].type!=="byname"||x>S){C.push(b)}}_=C}}if(_.length>0){v(_)}else{e.emit("plotly_animated");i()}})};r.addFrames=function(e,t,r){e=o.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plot.ly/javascript/animations/")}var a,n,i,l;var u=e._transitionData._frames;var c=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var d=u.length+t.length*2;var v=[];var p={};for(a=t.length-1;a>=0;a--){if(!o.isPlainObject(t[a]))continue;var h=t[a].name;var g=(c[h]||p[h]||{}).name;var y=t[a].name;var m=c[g]||p[g];if(g&&y&&typeof y==="number"&&m&&A<L){A++;o.warn('addFrames: overwriting frame "'+(c[g]||p[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(A===L){o.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}p[h]={name:h};v.push({frame:f.supplyFrameDefaults(t[a]),index:r&&r[a]!==undefined&&r[a]!==null?r[a]:d+a})}v.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var x=[];var b=[];var _=u.length;for(a=v.length-1;a>=0;a--){n=v[a].frame;if(typeof n.name==="number"){o.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!n.name){while(c[n.name="frame "+e._transitionData._counter++]);}if(c[n.name]){for(i=0;i<u.length;i++){if((u[i]||{}).name===n.name)break}x.push({type:"replace",index:i,value:n});b.unshift({type:"replace",index:i,value:u[i]})}else{l=Math.max(0,Math.min(v[a].index,_));x.push({type:"insert",index:l,value:n});b.unshift({type:"delete",index:l});_++}}var w=f.modifyFrames,k=f.modifyFrames,M=[e,b],T=[e,x];if(s)s.add(e,w,M,k,T);return f.modifyFrames(e,x)};r.deleteFrames=function(e,t){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,a;var n=e._transitionData._frames;var i=[];var l=[];if(!t){t=[];for(r=0;r<n.length;r++){t.push(r)}}t=t.slice(0);t.sort();for(r=t.length-1;r>=0;r--){a=t[r];i.push({type:"delete",index:a});l.unshift({type:"insert",index:a,value:n[a]})}var u=f.modifyFrames,c=f.modifyFrames,d=[e,l],v=[e,i];if(s)s.add(e,u,d,c,v);return f.modifyFrames(e,i)};r.purge=function e(t){t=o.getGraphDiv(t);var r=t._fullLayout||{};var a=t._fullData||[];var n=t.calcdata||[];f.cleanPlot([],{},a,r,n);f.purge(t);l.purge(t);if(r._container)r._container.remove();delete t._context;return t};function ee(e){var t=a.select(e);var r=e._fullLayout;r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._glcanvas=null;r._paperdiv.selectAll(".main-svg").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var n={};a.selectAll("defs").each(function(){if(this.id)n[this.id.split("-")[1]]=1});r._uid=o.randstr(n)}r._paperdiv.selectAll(".main-svg").attr(m.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var i=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=i.append("g").classed("imagelayer",true);r._shapeLowerLayer=i.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var l=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=l.append("g").classed("imagelayer",true);r._shapeUpperLayer=l.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._toppaper.append("g").classed("hoverlayer",true);e.emit("plotly_framework")}},{"../components/color":50,"../components/colorbar/connect":52,"../components/drawing":75,"../constants/xmlns_namespaces":153,"../lib":169,"../lib/events":162,"../lib/queue":183,"../lib/svg_text_utils":190,"../plots/cartesian/axes":213,"../plots/cartesian/constants":218,"../plots/cartesian/graph_interact":222,"../plots/plots":245,"../plots/polar/legacy":248,"../registry":261,"./edit_types":196,"./helpers":197,"./manage_arrays":199,"./plot_config":201,"./plot_schema":202,"./subroutines":204,d3:15,"fast-isnumeric":18,"has-hover":20}],201:[function(e,t,r){"use strict";t.exports={staticPlot:false,plotlyServerURL:"https://plot.ly",editable:false,edits:{annotationPosition:false,annotationTail:false,annotationText:false,axisTitleText:false,colorbarPosition:false,colorbarTitleText:false,legendPosition:false,legendText:false,shapePosition:false,titleText:false},autosizable:false,queueLength:0,fillFrame:false,frameMargins:0,scrollZoom:false,doubleClick:"reset+autosize",showTips:true,showAxisDragHandles:true,showAxisRangeEntryBoxes:true,showLink:false,sendData:true,linkText:"Edit chart",showSources:false,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:false,toImageButtonOptions:{},displaylogo:true,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],202:[function(e,t,r){"use strict";var a=e("../registry");var n=e("../lib");var i=e("../plots/attributes");var o=e("../plots/layout_attributes");var l=e("../plots/frame_attributes");var s=e("../plots/animation_attributes");var u=e("../plots/polar/legacy/area_attributes");var c=e("../plots/polar/legacy/axis_attributes");var f=e("./edit_types");var d=n.extendFlat;var v=n.extendDeepAll;var p=n.isPlainObject;var h="_isSubplotObj";var g="_isLinkedToArray";var y="_arrayAttrRegexps";var m="_deprecated";var x=[h,g,y,m];r.IS_SUBPLOT_OBJ=h;r.IS_LINKED_TO_ARRAY=g;r.DEPRECATED=m;r.UNDERSCORE_ATTRS=x;r.get=function(){var e={};a.allTypes.concat("area").forEach(function(t){e[t]=k(t)});var t={};Object.keys(a.transformsRegistry).forEach(function(e){t[e]=T(e)});return{defs:{valObjects:n.valObjectMeta,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:f.traces,layout:f.layout},impliedEdits:{}},traces:e,layout:M(),transforms:t,frames:A(),animation:L(s)}};r.crawl=function(e,t,a,n){var i=a||0;n=n||"";Object.keys(e).forEach(function(a){var o=e[a];if(x.indexOf(a)!==-1)return;var l=(n?n+".":"")+a;t(o,a,e,i,l);if(r.isValObject(o))return;if(p(o)&&a!=="impliedEdits"){r.crawl(o,t,i+1,l)}})};r.isValObject=function(e){return e&&e.valType!==undefined};r.findArrayAttributes=function(e){var t=[];var a=[];var o=[];var l,s;function u(e,t,r,n){a=a.slice(0,n).concat([t]);o=o.slice(0,n).concat([e&&e._isLinkedToArray]);var i=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(a[n-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!i)return;c(l,0,"")}function c(e,r,i){var l=e[a[r]];var u=i+a[r];if(r===a.length-1){if(n.isArrayOrTypedArray(l)){t.push(s+u)}}else{if(o[r]){if(Array.isArray(l)){for(var f=0;f<l.length;f++){if(n.isPlainObject(l[f])){c(l[f],r+1,u+"["+f+"].")}}}}else if(n.isPlainObject(l)){c(l,r+1,u+".")}}}l=e;s="";r.crawl(i,u);if(e._module&&e._module.attributes){r.crawl(e._module.attributes,u)}var f=e.transforms;if(f){for(var d=0;d<f.length;d++){var v=f[d];var p=v._module;if(p){s="transforms["+d+"].";l=v;r.crawl(p.attributes,u)}}}return t};r.getTraceValObject=function(e,t){var r=t[0];var n=1;var o,l;if(r==="transforms"){if(t.length===1){return i.transforms}var s=e.transforms;if(!Array.isArray(s)||!s.length)return false;var c=t[1];if(!w(c)||c>=s.length){return false}o=(a.transformsRegistry[s[c].type]||{}).attributes;l=o&&o[t[2]];n=3}else if(e.type==="area"){l=u[r]}else{var f=e._module;if(!f)f=(a.modules[e.type||i.type.dflt]||{})._module;if(!f)return false;o=f.attributes;l=o&&o[r];if(!l){var d=f.basePlotModule;if(d&&d.attributes){l=d.attributes[r]}}if(!l)l=i[r]}return _(l,t,n)};r.getLayoutValObject=function(e,t){var r=b(e,t[0]);return _(r,t,1)};function b(e,t){var r,n,i,l;var s=e._basePlotModules;if(s){var u;for(r=0;r<s.length;r++){i=s[r];if(i.attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;if(!u&&i.layoutAttributes)u=i.layoutAttributes}var f=i.baseLayoutAttrOverrides;if(f&&t in f)return f[t]}if(u)return u}var d=e._modules;if(d){for(r=0;r<d.length;r++){l=d[r].layoutAttributes;if(l&&t in l){return l[t]}}}for(n in a.componentsRegistry){i=a.componentsRegistry[n];if(!i.schema&&t===i.name){return i.layoutAttributes}}if(t in o)return o[t];if(t==="radialaxis"||t==="angularaxis"){return c[t]}return c.layout[t]||false}function _(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(w(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var a=e[t[r]];if(p(a))e=a;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!w(t[r]))return false}else if(e.valType==="info_array"){r++;var n=t[r];if(!w(n))return false;var i=e.items;if(Array.isArray(i)){if(n>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!w(o))return false;e=i[n][o]}else e=i[n]}else{e=i}}}return e}function w(e){return e===Math.round(e)&&e>=0}function k(e){var t,r;if(e==="area"){t={attributes:u};r={}}else{t=a.modules[e]._module,r=t.basePlotModule}var n={};n.type=null;v(n,i);v(n,t.attributes);if(r.attributes){v(n,r.attributes)}n.type=e;var o={meta:t.meta||{},attributes:L(n)};if(t.layoutAttributes){var l={};v(l,t.layoutAttributes);o.layoutAttributes=L(l)}return o}function M(){var e={};var t,r;v(e,o);for(t in a.subplotsRegistry){r=a.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var n=0;n<r.attr.length;n++){P(e,r,r.attr[n])}}else{var i=r.attr==="subplot"?r.name:r.attr;P(e,r,i)}}e=z(e);for(t in a.componentsRegistry){r=a.componentsRegistry[t];var l=r.schema;if(l&&(l.subplots||l.layout)){var s=l.subplots;if(s&&s.xaxis&&!s.yaxis){for(var u in s.xaxis)delete e.yaxis[u]}}else if(r.layoutAttributes){D(e,r.layoutAttributes,r.name)}}return{layoutAttributes:L(e)}}function T(e){var t=a.transformsRegistry[e];var r=v({},t.attributes);Object.keys(a.componentsRegistry).forEach(function(t){var n=a.componentsRegistry[t];if(n.schema&&n.schema.transforms&&n.schema.transforms[e]){Object.keys(n.schema.transforms[e]).forEach(function(t){D(r,n.schema.transforms[e][t],t)})}});return{attributes:L(r)}}function A(){var e={frames:n.extendDeepAll({},l)};L(e);return e.frames}function L(e){S(e);C(e);O(e);return e}function S(e){function t(e){return{valType:"string",editType:"none"}}function a(e,a,n){if(r.isValObject(e)){if(e.valType==="data_array"){e.role="data";n[a+"src"]=t(a)}else if(e.arrayOk===true){n[a+"src"]=t(a)}}else if(p(e)){e.role="object"}}r.crawl(e,a)}function C(e){function t(e,t,r){if(!e)return;var a=e[g];if(!a)return;delete e[g];r[t]={items:{}};r[t].items[a]=e;r[t].role="object"}r.crawl(e,t)}function O(e){function t(e){for(var r in e){if(p(e[r])){t(e[r])}else if(Array.isArray(e[r])){for(var a=0;a<e[r].length;a++){t(e[r][a])}}else{if(e[r]instanceof RegExp){e[r]=e[r].toString()}}}}t(e)}function z(e){d(e,{radialaxis:c.radialaxis,angularaxis:c.angularaxis});d(e,c.layout);return e}function P(e,t,r){var a=n.nestedProperty(e,r),i=v({},t.layoutAttributes);i[h]=true;a.set(i)}function D(e,t,r){var a=n.nestedProperty(e,r);a.set(v(a.get()||{},t))}},{"../lib":169,"../plots/animation_attributes":208,"../plots/attributes":210,"../plots/frame_attributes":240,"../plots/layout_attributes":243,"../plots/polar/legacy/area_attributes":246,"../plots/polar/legacy/axis_attributes":247,"../registry":261,"./edit_types":196}],203:[function(e,t,r){"use strict";var a=e("../lib");var n=e("../plots/attributes");var i="templateitemname";var o={name:{valType:"string",editType:"none"}};o[i]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=o.name;t[i]=o[i];return t};r.traceTemplater=function(e){var t={};var r,i;for(r in e){i=e[r];if(Array.isArray(i)&&i.length){t[r]=0}}function o(o){r=a.coerce(o,{},n,"type");var l={type:r,_template:null};if(r in t){i=e[r];var s=t[r]%i.length;t[r]++;l._template=i[s]}else{}return l}return{newTrace:o}};r.newContainer=function(e,t,r){var n=e._template;var i=n&&(n[t]||r&&n[r]);if(!a.isPlainObject(i))i=null;var o=e[t]={_template:i};return o};r.arrayTemplater=function(e,t,r){var a=e._template;var n=a&&a[s(t)];var o=a&&a[t];if(!Array.isArray(o)||!o.length){o=[]}var u={};function c(e){var t={name:e.name,_input:e};var a=t[i]=e[i];if(!l(a)){t._template=n;return t}for(var s=0;s<o.length;s++){var c=o[s];if(c.name===a){u[a]=1;t._template=c;return t}}t[r]=e[r]||false;t._template=false;return t}function f(){var e=[];for(var t=0;t<o.length;t++){var r=o[t];var a=r.name;if(l(a)&&!u[a]){var n={_template:r,name:a,_input:{_templateitemname:a}};n[i]=r[i];e.push(n);u[a]=1}}return e}return{newItem:c,defaultItems:f}};function l(e){return e&&typeof e==="string"}function s(e){var t=e.length-1;if(e.charAt(t)!=="s"){a.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=s;r.arrayEditor=function(e,t,r){var n=(a.nestedProperty(e,t).get()||[]).length;var o=r._index;var l=o>=n&&(r._input||{})._templateitemname;if(l)o=n;var s=t+"["+o+"]";var u;function c(){u={};if(l){u[s]={};u[s][i]=l}}c();function f(e,t){u[e]=t}function d(e,t){if(l){a.nestedProperty(u[s],e).set(t)}else{u[s+"."+e]=t}}function v(){var e=u;c();return e}function p(t,r){if(t)d(t,r);var n=v();for(var i in n){a.nestedProperty(e,i).set(n[i])}}return{modifyBase:f,modifyItem:d,getUpdateObj:v,applyUpdate:p}}},{"../lib":169,"../plots/attributes":210}],204:[function(e,t,r){"use strict";var a=e("d3");var n=e("../registry");var i=e("../plots/plots");var o=e("../lib");var l=e("../lib/clear_gl_canvases");var s=e("../components/color");var u=e("../components/drawing");var c=e("../components/titles");var f=e("../components/modebar");var d=e("../plots/cartesian/axes");var v=e("../constants/alignment");var p=e("../plots/cartesian/constraints");var h=p.enforce;var g=p.clean;var y=e("../plots/cartesian/autorange").doAutoRange;r.layoutStyles=function(e){return o.syncOrAsync([i.doAutoMargin,x],e)};function m(e,t,r){for(var a=0;a<r.length;a++){var n=r[a][0],i=r[a][1];if(n[0]>=e[1]||n[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function x(e){var t=e._fullLayout;var n=t._size;var i=n.p;var l=d.list(e,"",true);var c=t._has("cartesian");var p;function h(e,t,r){var a=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return n.t+n.h*(1-(e.position||0))+a%1;else if(r==="top")return t._offset-i-a;return t._offset+t._length+i+a}if(!t)return n.l+n.w*(e.position||0)+a%1;else if(r==="right")return t._offset+t._length+i+a;return t._offset-i-a}for(p=0;p<l.length;p++){var g=l[p];g.setScale();var y=g._anchorAxis;g._linepositions={};g._lw=u.crispRound(e,g.linewidth,1);g._mainLinePosition=h(g,y,g.side);g._mainMirrorPosition=g.mirror&&y?h(g,y,v.OPPOSITE_SIDE[g.side]):null;g._mainSubplot=b(g,t)}t._paperdiv.style({width:t.width+"px",height:t.height+"px"}).selectAll(".main-svg").call(u.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);var x=t._paper.selectAll("g.subplot");var w=[];var M=[];x.each(function(e){var r=t._plots[e];if(r.mainplot){if(r.bg){r.bg.remove()}r.bg=undefined;return}var a=r.xaxis.domain;var n=r.yaxis.domain;var i=r.plotgroup;if(m(a,n,M)){var l=i.node();var s=r.bg=o.ensureSingle(i,"rect","bg");l.insertBefore(s.node(),l.childNodes[0])}else{i.select("rect.bg").remove();w.push(e);M.push([a,n])}});var T=t._bgLayer.selectAll(".bg").data(w);T.enter().append("rect").classed("bg",true);T.exit().remove();T.each(function(e){t._plots[e].bg=a.select(this)});x.each(function(e){var r=t._plots[e];var a=r.xaxis;var n=r.yaxis;if(r.bg&&c){r.bg.call(u.setRect,a._offset-i,n._offset-i,a._length+2*i,n._length+2*i).call(s.fill,t.plot_bgcolor).style("stroke-width",0)}var f=r.clipId="clip"+t._uid+e+"plot";var d=o.ensureSingleById(t._clips,"clipPath",f,function(e){e.classed("plotclip",true).append("rect")});r.clipRect=d.select("rect").attr({width:a._length,height:n._length});u.setTranslate(r.plot,a._offset,n._offset);var v;var p;if(r._hasClipOnAxisFalse){v=null;p=f}else{v=f;p=null}u.setClipUrl(r.plot,v);r.layerClipId=p;if(!c)return;var g,y,m,x,b,w;var M,T,A,L,S,C;var O;function z(e){return"M"+g+","+e+"H"+y}function P(e){return"M"+a._offset+","+e+"h"+a._length}function D(e){return"M"+e+","+T+"V"+M}function I(e){return"M"+e+","+n._offset+"v"+n._length}function E(t,r,a){if(!t.showline||e!==t._mainSubplot)return"";if(!t._anchorAxis)return a(t._mainLinePosition);var n=r(t._mainLinePosition);if(t.mirror)n+=r(t._mainMirrorPosition);return n}var N="M0,0";if(_(a,e)){b=k(a,"left",n,l);g=a._offset-(b?i+b:0);w=k(a,"right",n,l);y=a._offset+a._length+(w?i+w:0);m=h(a,n,"bottom");x=h(a,n,"top");O=!a._anchorAxis||e!==a._mainSubplot;if(O&&a.ticks&&a.mirror==="allticks"){a._linepositions[e]=[m,x]}N=E(a,z,P);if(O&&a.showline&&(a.mirror==="all"||a.mirror==="allticks")){N+=z(m)+z(x)}r.xlines.style("stroke-width",a._lw+"px").call(s.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")}r.xlines.attr("d",N);var R="M0,0";if(_(n,e)){S=k(n,"bottom",a,l);M=n._offset+n._length+(S?i:0);C=k(n,"top",a,l);T=n._offset-(C?i:0);A=h(n,a,"left");L=h(n,a,"right");O=!n._anchorAxis||e!==a._mainSubplot;if(O&&n.ticks&&n.mirror==="allticks"){n._linepositions[e]=[A,L]}R=E(n,D,I);if(O&&n.showline&&(n.mirror==="all"||n.mirror==="allticks")){R+=D(A)+D(L)}r.ylines.style("stroke-width",n._lw+"px").call(s.stroke,n.showline?n.linecolor:"rgba(0,0,0,0)")}r.ylines.attr("d",R)});d.makeClipPaths(e);r.drawMainTitle(e);f.manage(e);return e._promises.length&&Promise.all(e._promises)}function b(e,t){var r=t._subplots;var a=r.cartesian.concat(r.gl2d||[]);var n={_fullLayout:t};var i=e._id.charAt(0)==="x";var o=e._mainAxis._anchorAxis;var l="";var s="";var u="";if(o){u=o._mainAxis._id;l=i?e._id+u:u+e._id}if(!l||!t._plots[l]){l="";for(var c=0;c<a.length;c++){var f=a[c];var v=f.indexOf("y");var p=i?f.substr(0,v):f.substr(v);var h=i?f.substr(v):f.substr(0,v);if(p===e._id){if(!s)s=f;var g=d.getFromId(n,h);if(u&&g.overlaying===u){l=f;break}}}}return l||s}function _(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function w(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var a=r._anchorAxis;if(!a)return false;var n=v.FROM_BL[t];if(r.side===t){return a.domain[n]===e.domain[n]}return r.mirror&&a.domain[1-n]===e.domain[1-n]}function k(e,t,r,a){if(w(e,t,r)){return r._lw}for(var n=0;n<a.length;n++){var i=a[n];if(i._mainAxis===r._mainAxis&&w(e,t,i)){return i._lw}}return 0}r.drawMainTitle=function(e){var t=e._fullLayout;c.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})};r.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t],a=((r[0]||{}).trace||{})._module||{},o=a.arraysToCalcdata;if(o)o(r,r[0].trace)}i.style(e);n.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t][0];if((r.t||{}).cb){var a=r.trace,o=r.t.cb;if(n.traceIs(a,"contour")){o.line({width:a.contours.showlines!==false?a.line.width:0,dash:a.line.dash,color:a.contours.coloring==="line"?o._opts.line.color:a.line.color})}var l=a._module.colorbar;var s=l.container;var u=(s?a[s]:a).colorbar;o.options(u)()}}return i.previousPromises(e)};r.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return n.call("plot",e,"",t)};r.doLegend=function(e){n.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doTicksRelayout=function(e,t){if(t){d.doTicks(e,Object.keys(t),true)}else{d.doTicks(e,"redraw")}if(e._fullLayout._hasOnlyLargeSploms){l(e);n.subplotsRegistry.splom.plot(e)}r.drawMainTitle(e);return i.previousPromises(e)};r.doModeBar=function(e){var t=e._fullLayout;f.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var a=t._basePlotModules[r].updateFx;if(a)a(t)}return i.previousPromises(e)};r.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var a=0;a<r.length;a++){var n=t[r[a]];var i=n._scene;i.setCamera(n.camera)}};r.drawData=function(e){var t=e._fullLayout;var r=e.calcdata;var a;for(a=0;a<r.length;a++){var o=r[a][0].trace;if(o.visible!==true||!o._module.colorbar){t._infolayer.select(".cb"+o.uid).remove()}}l(e);var s=t._basePlotModules;for(a=0;a<s.length;a++){s[a].plot(e)}i.style(e);n.getComponentMethod("shapes","draw")(e);n.getComponentMethod("annotations","draw")(e);t._replotting=false;return i.previousPromises(e)};r.doAutoRangeAndConstraints=function(e){var t=d.list(e,"",true);for(var r=0;r<t.length;r++){var a=t[r];g(e,a);y(a)}h(e)};r.finalDraw=function(e){n.getComponentMethod("shapes","draw")(e);n.getComponentMethod("images","draw")(e);n.getComponentMethod("annotations","draw")(e);n.getComponentMethod("rangeslider","draw")(e);n.getComponentMethod("rangeselector","draw")(e)};r.drawMarginPushers=function(e){n.getComponentMethod("legend","draw")(e);n.getComponentMethod("rangeselector","draw")(e);n.getComponentMethod("sliders","draw")(e);n.getComponentMethod("updatemenus","draw")(e)}},{"../components/color":50,"../components/drawing":75,"../components/modebar":113,"../components/titles":141,"../constants/alignment":148,"../lib":169,"../lib/clear_gl_canvases":158,"../plots/cartesian/autorange":212,"../plots/cartesian/axes":213,"../plots/cartesian/constraints":220,"../plots/plots":245,"../registry":261,d3:15}],205:[function(e,t,r){"use strict";var a=e("../lib");var n=a.isPlainObject;var i=e("./plot_schema");var o=e("../plots/plots");var l=e("../plots/attributes");var s=e("./plot_template");var u=e("./plot_config");r.makeTemplate=function(e){e=a.extendDeep({_context:u},e);o.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(e){var t={};d(e,t,p.bind(null,e));var r=a.coerce(e,{},l,"type");var n=i.data[r];if(!n)n=i.data[r]=[];n.push(t)});d(r,i.layout,v.bind(null,r));delete i.layout.template;var s=r.template;if(n(s)){var f=s.layout;var h,g,y,m,x,b;if(n(f)){c(f,i.layout)}var _=s.data;if(n(_)){for(g in i.data){y=_[g];if(Array.isArray(y)){x=i.data[g];b=x.length;m=y.length;for(h=0;h<b;h++){c(y[h%m],x[h])}for(h=b;h<m;h++){x.push(a.extendDeep({},y[h]))}}}for(g in _){if(!(g in i.data)){i.data[g]=a.extendDeep([],_[g])}}}}return i};function c(e,t){e=a.extendDeep({},e);var r=Object.keys(e).sort();var i,o;function l(t,r,a){if(n(r)&&n(t)){c(t,r)}else if(Array.isArray(r)&&Array.isArray(t)){var i=s.arrayTemplater({_template:e},a);for(o=0;o<r.length;o++){var l=r[o];var u=i.newItem(l)._template;if(u)c(u,l)}var f=i.defaultItems();for(o=0;o<f.length;o++)r.push(f[o]._template);for(o=0;o<r.length;o++)delete r[o].templateitemname}}for(i=0;i<r.length;i++){var u=r[i];var d=e[u];if(u in t){l(d,t[u],u)}else t[u]=d;if(f(u)===u){for(var v in t){var p=f(v);if(v!==p&&p===u&&!(v in e)){l(d,t[v],u)}}}}}function f(e){return e.replace(/[0-9]+$/,"")}function d(e,t,r,i,o){var l=o&&r(o);for(var u in e){var c=e[u];var v=h(e,u,i);var p=h(e,u,o);var g=r(p);if(!g){var y=f(u);if(y!==u){p=h(e,y,o);g=r(p)}}if(l&&l===g)continue;if(!g||g._noTemplating||g.valType==="data_array"||g.arrayOk&&Array.isArray(c)){continue}if(!g.valType&&n(c)){d(c,t,r,v,p)}else if(g._isLinkedToArray&&Array.isArray(c)){var m=false;var x=0;var b={};for(var _=0;_<c.length;_++){var w=c[_];if(n(w)){var k=w.name;if(k){if(!b[k]){d(w,t,r,h(c,x,v),h(c,x,p));x++;b[k]=1}}else if(!m){var M=s.arrayDefaultKey(u);var T=h(e,M,i);var A=h(c,x,v);d(w,t,r,A,h(c,x,p));var L=a.nestedProperty(t,A);var S=a.nestedProperty(t,T);S.set(L.get());L.set(null);m=true}}}}else{var C=a.nestedProperty(t,v);C.set(c)}}}function v(e,t){return i.getLayoutValObject(e,a.nestedProperty({},t).parts)}function p(e,t){return i.getTraceValObject(e,a.nestedProperty({},t).parts)}function h(e,t,r){var a;if(!r)a=t;else if(Array.isArray(e))a=r+"["+t+"]";else a=r+"."+t;return a}r.validateTemplate=function(e,t){var r=a.extendDeep({},{_context:u,data:e.data,layout:e.layout});var i=r.layout||{};if(!n(t))t=i.template||{};var l=t.layout;var s=t.data;var c=[];r.layout=i;r.layout.template=t;o.supplyDefaults(r);var d=r._fullLayout;var v=r._fullData;var p={};function m(e,t){for(var r in e){if(r.charAt(0)!=="_"&&n(e[r])){var a=f(r);var i=[];var o;for(o=0;o<t.length;o++){i.push(h(e,r,t[o]));if(a!==r)i.push(h(e,a,t[o]))}for(o=0;o<i.length;o++){p[i[o]]=1}m(e[r],i)}}}function x(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&n(e[r])){var a=h(e,r,t);if(p[a]){x(e[r],a)}else{c.push({code:"unused",path:a})}}}}if(!n(l)){c.push({code:"layout"})}else{m(d,["layout"]);x(l,"layout")}if(!n(s)){c.push({code:"data"})}else{var b={};var _;for(var w=0;w<v.length;w++){var k=v[w];_=k.type;b[_]=(b[_]||0)+1;if(!k._fullInput._template){c.push({code:"missing",index:k._fullInput.index,traceType:_})}}for(_ in s){var M=s[_].length;var T=b[_]||0;if(M>T){c.push({code:"unused",traceType:_,templateCount:M,dataCount:T})}else if(T>M){c.push({code:"reused",traceType:_,templateCount:M,dataCount:T})}}}function A(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var a=e[r];var i=h(e,r,t);if(n(a)){if(Array.isArray(e)&&a._template===false&&a.templateitemname){c.push({code:"missing",path:i,templateitemname:a.templateitemname})}A(a,i)}else if(Array.isArray(a)&&g(a)){A(a,i)}}}A({data:v,layout:d},"");if(c.length)return c.map(y)};function g(e){for(var t=0;t<e.length;t++){if(n(e[t]))return true}}function y(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":169,"../plots/attributes":210,"../plots/plots":245,"./plot_config":201,"./plot_schema":202,"./plot_template":203}],206:[function(e,t,r){"use strict";var a=e("./plot_api");var n=e("../lib");var i=e("../snapshot/helpers");var o=e("../snapshot/tosvg");var l=e("../snapshot/svgtoimg");var s={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};var u=/^data:image\/\w+;base64,/;function c(e,t){t=t||{};var r;var c;var f;if(n.isPlainObject(e)){r=e.data||[];c=e.layout||{};f=e.config||{}}else{e=n.getGraphDiv(e);r=n.extendDeep([],e.data);c=n.extendDeep({},e.layout);f=e._context}function d(e){return!(e in t)||n.validate(t[e],s[e])}if(!d("width")||!d("height")){throw new Error("Height and width should be pixel values.")}if(!d("format")){throw new Error("Image format is not jpeg, png, svg or webp.")}var v={};function p(e,r){return n.coerce(t,v,s,e,r)}var h=p("format");var g=p("width");var y=p("height");var m=p("scale");var x=p("setBackground");var b=p("imageDataOnly");var _=document.createElement("div");_.style.position="absolute";_.style.left="-5000px";document.body.appendChild(_);var w=n.extendFlat({},c);if(g)w.width=g;if(y)w.height=y;var k=n.extendFlat({},f,{staticPlot:true,setBackground:x});var M=i.getRedrawFunc(_);function T(){return new Promise(function(e){setTimeout(e,i.getDelay(_._fullLayout))})}function A(){return new Promise(function(e,t){var r=o(_,h,m);var i=_._fullLayout.width;var s=_._fullLayout.height;a.purge(_);document.body.removeChild(_);if(h==="svg"){if(b){return e(r)}else{return e("data:image/svg+xml,"+encodeURIComponent(r))}}var u=document.createElement("canvas");u.id=n.randstr();l({format:h,width:i,height:s,scale:m,canvas:u,svg:r,promise:true}).then(e).catch(t)})}function L(e){if(b){return e.replace(u,"")}else{return e}}return new Promise(function(e,t){a.plot(_,r,w,k).then(M).then(T).then(A).then(function(t){e(L(t))}).catch(function(e){t(e)})})}t.exports=c},{"../lib":169,"../snapshot/helpers":265,"../snapshot/svgtoimg":267,"../snapshot/tosvg":269,"./plot_api":200}],207:[function(e,t,r){"use strict";var a=e("../lib");var n=e("../plots/plots");var i=e("./plot_schema");var o=e("./plot_config");var l=a.isPlainObject;var s=Array.isArray;var u=a.isArrayOrTypedArray;t.exports=function e(t,r){var u=i.get();var d=[];var v={_context:a.extendFlat({},o)};var h,g;if(s(t)){v.data=a.extendDeep([],t);h=t}else{v.data=[];h=[];d.push(p("array","data"))}if(l(r)){v.layout=a.extendDeep({},r);g=r}else{v.layout={};g={};if(arguments.length>1){d.push(p("object","layout"))}}n.supplyDefaults(v);var y=v._fullData,m=h.length;for(var x=0;x<m;x++){var b=h[x],_=["data",x];if(!l(b)){d.push(p("object",_));continue}var w=y[x],k=w.type,M=u.traces[k].attributes;M.type={valType:"enumerated",values:[k]};if(w.visible===false&&b.visible!==false){d.push(p("invisible",_))}c(b,w,M,d,_);var T=b.transforms,A=w.transforms;if(T){if(!s(T)){d.push(p("array",_,["transforms"]))}_.push("transforms");for(var L=0;L<T.length;L++){var S=["transforms",L],C=T[L].type;if(!l(T[L])){d.push(p("object",_,S));continue}var O=u.transforms[C]?u.transforms[C].attributes:{};O.type={valType:"enumerated",values:Object.keys(u.transforms)};c(T[L],A[L],O,d,_,S)}}}var z=v._fullLayout,P=f(u,y);c(g,z,P,d,"layout");return d.length===0?void 0:d};function c(e,t,r,n,i,o){o=o||[];var f=Object.keys(e);for(var d=0;d<f.length;d++){var v=f[d];if(v==="transforms")continue;var y=o.slice();y.push(v);var m=e[v],x=t[v];var b=g(r,v);var _=(b||{}).valType==="info_array";var w=(b||{}).valType==="colorscale";var k=(b||{}).items;if(!h(r,v)){n.push(p("schema",i,y))}else if(l(m)&&l(x)){c(m,x,b,n,i,y)}else if(_&&s(m)){if(m.length>x.length){n.push(p("unused",i,y.concat(x.length)))}var M=x.length;var T=Array.isArray(k);if(T)M=Math.min(M,k.length);var A,L,S,C,O;if(b.dimensions===2){for(L=0;L<M;L++){if(s(m[L])){if(m[L].length>x[L].length){n.push(p("unused",i,y.concat(L,x[L].length)))}var z=x[L].length;for(A=0;A<(T?Math.min(z,k[L].length):z);A++){S=T?k[L][A]:k;C=m[L][A];O=x[L][A];if(!a.validate(C,S)){n.push(p("value",i,y.concat(L,A),C))}else if(O!==C&&O!==+C){n.push(p("dynamic",i,y.concat(L,A),C,O))}}}else{n.push(p("array",i,y.concat(L),m[L]))}}}else{for(L=0;L<M;L++){S=T?k[L]:k;C=m[L];O=x[L];if(!a.validate(C,S)){n.push(p("value",i,y.concat(L),C))}else if(O!==C&&O!==+C){n.push(p("dynamic",i,y.concat(L),C,O))}}}}else if(b.items&&!_&&s(m)){var P=k[Object.keys(k)[0]],D=[];var I,E;for(I=0;I<x.length;I++){var N=x[I]._index||I;E=y.slice();E.push(N);if(l(m[N])&&l(x[I])){D.push(N);var R=m[N];var F=x[I];if(l(R)&&R.visible!==false&&F.visible===false){n.push(p("invisible",i,E))}else c(R,F,P,n,i,E)}}for(I=0;I<m.length;I++){E=y.slice();E.push(I);if(!l(m[I])){n.push(p("object",i,E,m[I]))}else if(D.indexOf(I)===-1){n.push(p("unused",i,E))}}}else if(!l(m)&&l(x)){n.push(p("object",i,y,m))}else if(!u(m)&&u(x)&&!_&&!w){n.push(p("array",i,y,m))}else if(!(v in t)){n.push(p("unused",i,y,m))}else if(!a.validate(m,b)){n.push(p("value",i,y,m))}else if(b.valType==="enumerated"&&(b.coerceNumber&&m!==+x||m!==x)){n.push(p("dynamic",i,y,m,x))}}return n}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r].type,i=e.traces[n].layoutAttributes;if(i){a.extendFlat(e.layout.layoutAttributes,i)}}return e.layout.layoutAttributes}var d={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=v(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=v(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return v(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var a=l(r)?"container":"key";return v(e)+a+" "+t+" did not get coerced"},dynamic:function(e,t,r,a){return[v(e)+"key",t,"(set to '"+r+"')","got reset to","'"+a+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?v(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[v(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function v(e){if(s(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function p(e,t,r,n,i){r=r||"";var o,l;if(s(t)){o=t[0];l=t[1]}else{o=t;l=null}var u=x(r);var c=d[e](t,u,n,i);a.log(c);return{code:e,container:o,trace:l,path:r,astr:u,msg:c}}function h(e,t){var r=m(t),a=r.keyMinusId,n=r.id;if(a in e&&e[a]._isSubplotObj&&n){return true}return t in e}function g(e,t){if(t in e)return e[t];var r=m(t);return e[r.keyMinusId]}var y=a.counterRegex("([a-z]+)");function m(e){var t=e.match(y);return{keyMinusId:t&&t[1],id:t&&t[2]}}function x(e){if(!s(e))return String(e);var t="";for(var r=0;r<e.length;r++){var a=e[r];if(typeof a==="number"){t=t.substr(0,t.length-1)+"["+a+"]"}else{t+=a}if(r<e.length-1)t+="."}return t}},{"../lib":169,"../plots/plots":245,"./plot_config":201,"./plot_schema":202}],208:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],209:[function(e,t,r){"use strict";var a=e("../lib");var n=e("../plot_api/plot_template");t.exports=function e(t,r,i){var o=i.name;var l=i.inclusionAttr||"visible";var s=r[o];var u=a.isArrayOrTypedArray(t[o])?t[o]:[];var c=r[o]=[];var f=n.arrayTemplater(r,o,l);var d,v;for(d=0;d<u.length;d++){var p=u[d];if(!a.isPlainObject(p)){v=f.newItem({});v[l]=false}else{v=f.newItem(p)}v._index=d;if(v[l]!==false){i.handleItemDefaults(p,v,r,i)}c.push(v)}var h=f.defaultItems();for(d=0;d<h.length;d++){v=h[d];v._index=c.length;i.handleItemDefaults({},v,r,i,{});c.push(v)}if(a.isArrayOrTypedArray(s)){var g=Math.min(s.length,c.length);for(d=0;d<g;d++){a.relinkPrivateKeys(c[d],s[d])}}return c}},{"../lib":169,"../plot_api/plot_template":203}],210:[function(e,t,r){"use strict";var a=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:a.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"}}},{"../components/fx/attributes":84}],211:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],212:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../../constants/numerical").FP_SAFE;t.exports={getAutoRange:o,makePadFn:l,doAutoRange:s,expand:c};function o(e){var t=[];var r=e._min[0].val;var a=e._max[0].val;var i=0;var o=false;var s=l(e);var u,c,f,d,v,p,h,g;for(u=1;u<e._min.length;u++){if(r!==a)break;r=Math.min(r,e._min[u].val)}for(u=1;u<e._max.length;u++){if(r!==a)break;a=Math.max(a,e._max[u].val)}if(e.range){var y=n.simpleMap(e.range,e.r2l);o=y[1]<y[0]}if(e.autorange==="reversed"){o=true;e.autorange=true}for(u=0;u<e._min.length;u++){f=e._min[u];for(c=0;c<e._max.length;c++){d=e._max[c];g=d.val-f.val;h=e._length-s(f)-s(d);if(g>0&&h>0&&g/h>i){v=f;p=d;i=g/h}}}if(r===a){var m=r-1;var x=r+1;if(e.rangemode==="tozero"){t=r<0?[m,0]:[0,x]}else if(e.rangemode==="nonnegative"){t=[Math.max(0,m),Math.max(0,x)]}else{t=[m,x]}}else if(i){if(e.type==="linear"||e.type==="-"){if(e.rangemode==="tozero"){if(v.val>=0){v={val:0,pad:0}}if(p.val<=0){p={val:0,pad:0}}}else if(e.rangemode==="nonnegative"){if(v.val-i*s(v)<0){v={val:0,pad:0}}if(p.val<0){p={val:1,pad:0}}}i=(p.val-v.val)/(e._length-s(v)-s(p))}t=[v.val-i*s(v),p.val+i*s(p)]}if(t[0]===t[1]){if(e.rangemode==="tozero"){if(t[0]<0){t=[t[0],0]}else if(t[0]>0){t=[0,t[0]]}else{t=[0,1]}}else{t=[t[0]-1,t[0]+1];if(e.rangemode==="nonnegative"){t[0]=Math.max(0,t[0])}}}if(o)t.reverse();return n.simpleMap(t,e.l2r||Number)}function l(e){var t=e._length/20;if(e.constrain==="domain"&&e._inputDomain){t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])}return function e(r){return r.pad+(r.extrapad?t:0)}}function s(e){if(!e._length)e.setScale();var t=e._min&&e._max&&e._min.length&&e._max.length;var r;if(e.autorange&&t){e.range=o(e);e._r=e.range.slice();e._rl=n.simpleMap(e._r,e.r2l);r=e._input;r.range=e.range.slice();r.autorange=e.autorange}if(e._anchorAxis&&e._anchorAxis.rangeslider){var a=e._anchorAxis.rangeslider[e._name];if(a){if(a.rangemode==="auto"){if(t){a.range=o(e)}else{a.range=e._rangeInitial?e._rangeInitial.slice():e.range.slice()}}}r=e._anchorAxis._input;r.rangeslider[e._name]=n.extendFlat({},a)}}function u(e){return e.autorange||e._rangesliderAutorange}function c(e,t,r){if(!u(e)||!t)return;if(!e._min)e._min=[];if(!e._max)e._max=[];if(!r)r={};if(!e._m)e.setScale();var n=t.length;var o=r.padded||false;var l=r.tozero&&(e.type==="linear"||e.type==="-");var s=e.type==="log";var c,p,h,g,y,m,x,b,_,w,k,M;var T=false;function A(e){if(Array.isArray(e)){T=true;return function(t){return Math.max(Number(e[t]||0),0)}}else{var t=Math.max(Number(e||0),0);return function(){return t}}}var L=A((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0);var S=A((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0);var C=A(r.vpadplus||r.vpad);var O=A(r.vpadminus||r.vpad);if(!T){k=Infinity;M=-Infinity;if(s){for(c=0;c<n;c++){g=t[c];if(g<k&&g>0)k=g;if(g>M&&g<i)M=g}}else{for(c=0;c<n;c++){g=t[c];if(g<k&&g>-i)k=g;if(g>M&&g<i)M=g}}t=[k,M];n=2}function z(r){y=t[r];if(!a(y))return;b=L(r);_=S(r);k=y-O(r);M=y+C(r);if(s&&k<M/10)k=M/10;m=e.c2l(k);x=e.c2l(M);if(l){m=Math.min(0,m);x=Math.max(0,x)}for(h=0;h<2;h++){var n=h?x:m;if(f(n)){var i=h?e._max:e._min;var u=h?b:_;var c=h?v:d;w=true;for(p=0;p<i.length&&w;p++){g=i[p];if(c(g.val,n)&&g.pad>=u&&(g.extrapad||!o)){w=false;break}else if(c(n,g.val)&&g.pad<=u&&(o||!g.extrapad)){i.splice(p,1);p--}}if(w){var T=l&&n===0;i.push({val:n,pad:T?0:u,extrapad:T?false:o})}}}}var P=Math.min(6,n);for(c=0;c<P;c++)z(c);for(c=n-1;c>=P;c--)z(c)}function f(e){return a(e)&&Math.abs(e)<i}function d(e,t){return e<=t}function v(e,t){return e>=t}},{"../../constants/numerical":151,"../../lib":169,"fast-isnumeric":18}],213:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../../components/titles");var c=e("../../components/color");var f=e("../../components/drawing");var d=e("../../constants/numerical");var v=d.ONEAVGYEAR;var p=d.ONEAVGMONTH;var h=d.ONEDAY;var g=d.ONEHOUR;var y=d.ONEMIN;var m=d.ONESEC;var x=d.MINUS_SIGN;var b=d.BADNUM;var _=e("../../constants/alignment").MID_SHIFT;var w=e("../../constants/alignment").LINE_SPACING;var k=t.exports={};k.setConvert=e("./set_convert");var M=e("./axis_autotype");var T=e("./axis_ids");k.id2name=T.id2name;k.name2id=T.name2id;k.cleanId=T.cleanId;k.list=T.list;k.listIds=T.listIds;k.getFromId=T.getFromId;k.getFromTrace=T.getFromTrace;var A=e("./autorange");k.expand=A.expand;k.getAutoRange=A.getAutoRange;k.coerceRef=function(e,t,r,a,n,i){var o=a.charAt(a.length-1);var s=r._fullLayout._subplots[o+"axis"];var u=a+"ref";var c={};if(!n)n=s[0]||i;if(!i)i=n;c[u]={valType:"enumerated",values:s.concat(i?[i]:[]),dflt:n};return l.coerce(e,t,c,u)};k.coercePosition=function(e,t,r,a,n,i){var o,s;if(a==="paper"||a==="pixel"){o=l.ensureNumber;s=r(n,i)}else{var u=k.getFromId(t,a);i=u.fraction2r(i);s=r(n,i);o=u.cleanPos}e[n]=o(s)};k.cleanPosition=function(e,t,r){var a=r==="paper"||r==="pixel"?l.ensureNumber:k.getFromId(t,r).cleanPos;return a(e)};var L=k.getDataConversions=function(e,t,r,a){var n;var i=r==="x"||r==="y"||r==="z"?r:a;if(Array.isArray(i)){n={type:M(a),_categories:[]};k.setConvert(n);if(n.type==="category"){for(var o=0;o<a.length;o++){n.d2c(a[o])}}}else{n=k.getFromTrace(e,t,i)}if(n)return{d2c:n.d2c,c2d:n.c2d};if(i==="ids")return{d2c:C,c2d:C};return{d2c:S,c2d:S}};function S(e){return+e}function C(e){return String(e)}k.getDataToCoordFunc=function(e,t,r,a){return L(e,t,r,a).d2c};k.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};k.minDtick=function(e,t,r,a){if(["log","category"].indexOf(e.type)!==-1||!a){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};k.saveRangeInitial=function(e,t){var r=k.list(e,"",true),a=false;for(var n=0;n<r.length;n++){var i=r[n];var o=i._rangeInitial===undefined;var l=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&l){i._rangeInitial=i.range.slice();a=true}}return a};k.saveShowSpikeInitial=function(e,t){var r=k.list(e,"",true),a=false,n="on";for(var i=0;i<r.length;i++){var o=r[i];var l=o._showSpikeInitial===undefined;var s=l||!(o.showspikes===o._showspikes);if(l||t&&s){o._showSpikeInitial=o.showspikes;a=true}if(n==="on"&&!o.showspikes){n="off"}}e._fullLayout._cartesianSpikesEnabled=n;return a};k.autoBin=function(e,t,r,a,i){var o=l.aggNums(Math.min,null,e),s=l.aggNums(Math.max,null,e);if(!i)i=t.calendar;if(t.type==="category"){return{start:o-.5,end:s+.5,size:1,_dataSpan:s-o}}var u;if(r)u=(s-o)/r;else{var c=l.distinctVals(e),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),d=f*l.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],true);u=Math.max(d,2*l.stdev(e)/Math.pow(e.length,a?.25:.4));if(!n(u))u=1}var v;if(t.type==="log"){v={type:"linear",range:[o,s]}}else{v={type:t.type,range:l.simpleMap([o,s],t.c2r,0,i),calendar:i}}k.setConvert(v);k.autoTicks(v,u);var p=k.tickIncrement(k.tickFirst(v),v.dtick,"reverse",i);var h,g;if(typeof v.dtick==="number"){p=O(p,e,v,o,s);g=1+Math.floor((s-p)/v.dtick);h=p+g*v.dtick}else{if(v.dtick.charAt(0)==="M"){p=z(p,e,v.dtick,o,i)}h=p;g=0;while(h<=s){h=k.tickIncrement(h,v.dtick,false,i);g++}}return{start:t.c2r(p,0,i),end:t.c2r(h,0,i),size:v.dtick,_dataSpan:s-o}};function O(e,t,r,a,i){var o=0,l=0,s=0,u=0;function c(t){return(1+(t-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++){if(t[f]%1===0)s++;else if(!n(t[f]))u++;if(c(t[f]))o++;if(c(t[f]+r.dtick/2))l++}var d=t.length-u;if(s===d&&r.type!=="date"){if(r.dtick<1){e=a-.5*r.dtick}else{e-=.5;if(e+r.dtick<a)e+=r.dtick}}else if(l<d*.1){if(o>d*.3||c(a)||c(i)){var v=r.dtick/2;e+=e+v<a?v:-v}}return e}function z(e,t,r,a,n){var i=l.findExactDates(t,n);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=k.tickIncrement(e,"M6","reverse")+h*1.5}else if(i.exactMonths>o){e=k.tickIncrement(e,"M1","reverse")+h*15.5}else{e-=h/2}var u=k.tickIncrement(e,r);if(u<=a)return u}return e}k.prepTicks=function(e){var t=l.simpleMap(e.range,e.r2l);if(e.tickmode==="auto"||!e.dtick){var r=e.nticks,a;if(!r){if(e.type==="category"){a=e.tickfont?(e.tickfont.size||12)*1.2:15;r=e._length/a}else{a=e._id.charAt(0)==="y"?40:80;r=l.constrain(e._length/a,4,9)+1}if(e._name==="radialaxis")r*=2}if(e.tickmode==="array")r*=100;k.autoTicks(e,Math.abs(t[1]-t[0])/r);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}q(e)};k.calcTicks=function e(t){k.prepTicks(t);var r=l.simpleMap(t.range,t.r2l);if(t.tickmode==="array")return P(t);t._tmin=k.tickFirst(t);var a=r[0]*1.0001-r[1]*1e-4;var n=r[1]*1.0001-r[0]*1e-4;var i=r[1]<r[0];if(t._tmin<a!==i)return[];var o=[];if(t.type==="category"){n=i?Math.max(-.5,n):Math.min(t._categories.length-.5,n)}var s=null;var u=Math.max(1e3,t._length||0);for(var c=t._tmin;i?c>=n:c<=n;c=k.tickIncrement(c,t.dtick,i,t.calendar)){if(o.length>u||c===s)break;s=c;o.push(c)}if(t._id==="angular"&&Math.abs(r[1]-r[0])===360){o.pop()}t._tmax=o[o.length-1];t._prevDateHead="";t._inCalcTicks=true;var f=new Array(o.length);for(var d=0;d<o.length;d++)f[d]=k.tickText(t,o[d]);t._inCalcTicks=false;return f};function P(e){var t=e.tickvals,r=e.ticktext,a=new Array(t.length),n=l.simpleMap(e.range,e.r2l),i=n[0]*1.0001-n[1]*1e-4,o=n[1]*1.0001-n[0]*1e-4,s=Math.min(i,o),u=Math.max(i,o),c,f,d=0;if(!Array.isArray(r))r=[];var v=e.type==="category"?e.d2l_noadd:e.d2l;if(e.type==="log"&&String(e.dtick).charAt(0)!=="L"){e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)}for(f=0;f<t.length;f++){c=v(t[f]);if(c>s&&c<u){if(r[f]===undefined)a[d]=k.tickText(e,c);else a[d]=H(e,c,String(r[f]));d++}}if(d<t.length)a.splice(d,t.length-d);return a}var D=[2,5,10],I=[1,2,3,6,12],E=[1,2,5,10,15,30],N=[1,2,3,7,14],R=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],F=[-.301,0,.301,.699,1],B=[15,30,45,90,180];function j(e,t,r){return t*l.roundUp(e/t,r)}k.autoTicks=function(e,t){var r;function a(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=l.dateTick0(e.calendar);var i=2*t;if(i>v){t/=v;r=a(10);e.dtick="M"+12*j(t,r,D)}else if(i>p){t/=p;e.dtick="M"+j(t,1,I)}else if(i>h){e.dtick=j(t,h,N);e.tick0=l.dateTick0(e.calendar,true)}else if(i>g){e.dtick=j(t,g,I)}else if(i>y){e.dtick=j(t,y,E)}else if(i>m){e.dtick=j(t,m,E)}else{r=a(10);e.dtick=j(t,r,D)}}else if(e.type==="log"){e.tick0=0;var o=l.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(o[1]-o[0])<1){var s=1.5*Math.abs((o[1]-o[0])/t);t=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/s;r=a(10);e.dtick="L"+j(t,r,D)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(e._id==="angular"){e.tick0=0;r=1;e.dtick=j(t,r,B)}else{e.tick0=0;r=a(10);e.dtick=j(t,r,D)}if(e.dtick===0)e.dtick=1;if(!n(e.dtick)&&typeof e.dtick!=="string"){var u=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(u)}};function q(e){var t=e.dtick;e._tickexponent=0;if(!n(t)&&typeof t!=="string"){t=1}if(e.type==="category"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0),a=e.l2r(r).replace(/(^-|i)/g,""),i=a.length;if(String(t).charAt(0)==="M"){if(i>10||a.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=h&&i<=10||t>=h*15)e._tickround="d";else if(t>=y&&i<=16||t>=g)e._tickround="M";else if(t>=m&&i<=19||t>=y)e._tickround="S";else{var o=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(i,o)-20}}else if(n(t)||t.charAt(0)==="L"){var l=e.range.map(e.r2d||Number);if(!n(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(l[0]),Math.abs(l[1]));var u=Math.floor(Math.log(s)/Math.LN10+.01);if(Math.abs(u)>3){if(Q(e.exponentformat)&&!J(u)){e._tickexponent=3*Math.round((u-1)/3)}else e._tickexponent=u}}else e._tickround=null}k.tickIncrement=function(e,t,r,i){var o=r?-1:1;if(n(t))return e+o*t;var s=t.charAt(0),u=o*Number(t.substr(1));if(s==="M")return l.incrementMonth(e,u,i);else if(s==="L")return Math.log(Math.pow(10,e)+u)/Math.LN10;else if(s==="D"){var c=t==="D2"?F:R,f=e+o*.01,d=l.roundUp(l.mod(f,1),c,r);return Math.floor(f)+Math.log(a.round(Math.pow(10,d),1))/Math.LN10}else throw"unrecognized dtick "+String(t)};k.tickFirst=function(e){var t=e.r2l||Number,r=l.simpleMap(e.range,t),i=r[1]<r[0],o=i?Math.floor:Math.ceil,s=r[0]*1.0001-r[1]*1e-4,u=e.dtick,c=t(e.tick0);if(n(u)){var f=o((s-c)/u)*u+c;if(e.type==="category"){f=l.constrain(f,0,e._categories.length-1)}return f}var d=u.charAt(0),v=Number(u.substr(1));if(d==="M"){var p=0,h=c,g,y,m;while(p<10){g=k.tickIncrement(h,u,i,e.calendar);if((g-s)*(h-s)<=0){if(i)return Math.min(h,g);return Math.max(h,g)}y=(s-(h+g)/2)/(g-h);m=d+(Math.abs(Math.round(y))||1)*v;h=k.tickIncrement(h,m,y<0?!i:i,e.calendar);p++}l.error("tickFirst did not converge",e);return h}else if(d==="L"){return Math.log(o((Math.pow(10,s)-c)/v)*v+c)/Math.LN10}else if(d==="D"){var x=u==="D2"?F:R,b=l.roundUp(l.mod(s,1),x,i);return Math.floor(s)+Math.log(a.round(Math.pow(10,b),1))/Math.LN10}else throw"unrecognized dtick "+String(u)};k.tickText=function(e,t,r){var a=H(e,t),n,i=e.tickmode==="array",o=r||i,s,u=e.type==="category"?e.d2l_noadd:e.d2l;if(i&&Array.isArray(e.ticktext)){var c=l.simpleMap(e.range,e.r2l),f=Math.abs(c[1]-c[0])/1e4;for(s=0;s<e.ticktext.length;s++){if(Math.abs(t-u(e.tickvals[s]))<f)break}if(s<e.ticktext.length){a.text=String(e.ticktext[s]);return a}}function d(a){var n;if(a===undefined)return true;if(r)return a==="none";n={first:e._tmin,last:e._tmax}[a];return a!=="all"&&t!==n}if(r){n="never"}else{n=e.exponentformat!=="none"&&d(e.showexponent)?"hide":""}if(e.type==="date")V(e,a,r,o);else if(e.type==="log")U(e,a,r,o,n);else if(e.type==="category")G(e,a);else if(e._id==="angular")Y(e,a,r,o,n);else Z(e,a,r,o,n);if(e.tickprefix&&!d(e.showtickprefix))a.text=e.tickprefix+a.text;if(e.ticksuffix&&!d(e.showticksuffix))a.text+=e.ticksuffix;return a};k.hoverLabelText=function(e,t,r){if(r!==b&&r!==t){return k.hoverLabelText(e,t)+" - "+k.hoverLabelText(e,r)}var a=e.type==="log"&&t<=0;var n=k.tickText(e,e.c2l(a?-t:t),"hover").text;if(a){return t===0?"0":x+n}return n};function H(e,t,r){var a=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:a.size,font:a.family,fontColor:a.color}}function V(e,t,r,a){var i=e._tickround,o=r&&e.hoverformat||k.getTickFormat(e);if(a){if(n(i))i=4;else i={y:"m",m:"d",d:"M",M:"S",S:4}[i]}var s=l.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat),u;var c=s.indexOf("\n");if(c!==-1){u=s.substr(c+1);s=s.substr(0,c)}if(a){if(s==="00:00:00"||s==="00:00"){s=u;u=""}else if(s.length===8){s=s.replace(/:00$/,"")}}if(u){if(r){if(i==="d")s+=", "+u;else s=u+(s?", "+s:"")}else if(!e._inCalcTicks||u!==e._prevDateHead){s+="<br>"+u;e._prevDateHead=u}}t.text=s}function U(e,t,r,a,i){var o=e.dtick,s=t.x,u=e.tickformat;if(i==="never"){i=""}if(a&&(typeof o!=="string"||o.charAt(0)!=="L"))o="L3";if(u||typeof o==="string"&&o.charAt(0)==="L"){t.text=$(Math.pow(10,s),e,i,a)}else if(n(o)||o.charAt(0)==="D"&&l.mod(s+.01,1)<.1){var c=Math.round(s);if(["e","E","power"].indexOf(e.exponentformat)!==-1||Q(e.exponentformat)&&J(c)){if(c===0)t.text=1;else if(c===1)t.text="10";else if(c>1)t.text="10<sup>"+c+"</sup>";else t.text="10<sup>"+x+-c+"</sup>";t.fontSize*=1.25}else{t.text=$(Math.pow(10,s),e,"","fakehover");if(o==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(o.charAt(0)==="D"){t.text=String(Math.round(Math.pow(10,l.mod(s,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(o);if(e.dtick==="D1"){var f=String(t.text).charAt(0);if(f==="0"||f==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(s<0?.5:.25)}}}}function G(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function Z(e,t,r,a,n){if(n==="never"){n=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){n="hide"}t.text=$(t.x,e,n,a)}function Y(e,t,r,a,n){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=X(i);if(o[1]>=100){t.text=$(l.deg2rad(t.x),e,n,a)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="\u03c0";else t.text=o[0]+"\u03c0"}else{t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join("")}if(s)t.text=x+t.text}}}else{t.text=$(t.x,e,n,a)}}function X(e){function t(e,t){return Math.abs(e-t)<=1e-6}function r(e,a){return t(a,0)?e:r(a,e%a)}function a(e){var r=1;while(!t(Math.round(e*r)/r,e)){r*=10}return r}var n=a(e);var i=e*n;var o=Math.abs(r(i,n));return[Math.round(i/o),Math.round(n/o)]}var W=["f","p","n","\u03bc","m","","k","M","G","T"];function Q(e){return e==="SI"||e==="B"}function J(e){return e>14||e<-15}function $(e,t,r,a){var i=e<0,o=t._tickround,s=r||t.exponentformat||"B",u=t._tickexponent,c=k.getTickFormat(t),f=t.separatethousands;if(a){var d={exponentformat:s,dtick:t.showexponent==="none"?t.dtick:n(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};q(d);o=(Number(d._tickround)||0)+4;u=d._tickexponent;if(t.hoverformat)c=t.hoverformat}if(c)return t._numFormat(c)(e).replace(/-/g,x);var v=Math.pow(10,-o)/2;if(s==="none")u=0;e=Math.abs(e);if(e<v){e="0";i=false}else{e+=v;if(u){e*=Math.pow(10,-u);o+=u}if(o===0)e=String(Math.floor(e));else if(o<0){e=String(Math.round(e));e=e.substr(0,e.length+o);for(var p=o;p<0;p++)e+="0"}else{e=String(e);var h=e.indexOf(".")+1;if(h)e=e.substr(0,h+o).replace(/\.?0+$/,"")}e=l.numSeparate(e,t._separators,f)}if(u&&s!=="hide"){if(Q(s)&&J(u))s="power";var g;if(u<0)g=x+-u;else if(s!=="power")g="+"+u;else g=String(u);if(s==="e"){e+="e"+g}else if(s==="E"){e+="E"+g}else if(s==="power"){e+="\xd710<sup>"+g+"</sup>"}else if(s==="B"&&u===9){e+="B"}else if(Q(s)){e+=W[u/3+5]}}if(i)return x+e;return e}k.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*p}function a(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var a=r.indexOf(e.charAt(0));var n=r.indexOf(t.charAt(0));if(a===n){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return a-n}}}else{return typeof e==="number"?1:-1}}function n(e,t,r){var a=r||function(e){return e};var n=t[0];var i=t[1];return(!n&&typeof n!=="number"||a(n)<=a(e))&&(!i&&typeof i!=="number"||a(i)>=a(e))}function i(e,t){var r=t[0]===null;var n=t[1]===null;var i=a(e,t[0])>=0;var o=a(e,t[1])<=0;return(r||i)&&(n||o)}var o,l;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){l=e.tickformatstops[t];if(l.enabled&&n(e.dtick,l.dtickrange,r)){o=l;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){l=e.tickformatstops[t];if(l.enabled&&i(e.dtick,l.dtickrange)){o=l;break}}break}default:}}return o?o.value:e.tickformat};k.getSubplots=function(e,t){var r=e._fullLayout._subplots;var a=r.cartesian.concat(r.gl2d||[]);var n=t?k.findSubplotsWithAxis(a,t):a;n.sort(function(e,t){var r=e.substr(1).split("y");var a=t.substr(1).split("y");if(r[0]===a[0])return+r[1]-+a[1];return+r[0]-+a[0]});return n};k.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var a=[];for(var n=0;n<e.length;n++){var i=e[n];if(r.test(i))a.push(i)}return a};k.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var n={_offset:0,_length:t.height,_id:""};var i=k.list(e,"x",true);var o=k.list(e,"y",true);var l=[];var s,u;for(s=0;s<i.length;s++){l.push({x:i[s],y:n});for(u=0;u<o.length;u++){if(s===0)l.push({x:r,y:o[u]});l.push({x:i[s],y:o[u]})}}var c=t._clips.selectAll(".axesclip").data(l,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");c.exit().remove();c.each(function(e){a.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};k.doTicks=function(e,t,r){var a=e._fullLayout;if(t==="redraw"){a._paper.selectAll("g.subplot").each(function(e){var t=a._plots[e];var r=t.xaxis;var n=t.yaxis;t.xaxislayer.selectAll("."+r._id+"tick").remove();t.yaxislayer.selectAll("."+n._id+"tick").remove();if(t.gridlayer)t.gridlayer.selectAll("path").remove();if(t.zerolinelayer)t.zerolinelayer.selectAll("path").remove();a._infolayer.select(".g-"+r._id+"title").remove();a._infolayer.select(".g-"+n._id+"title").remove()})}var n=!t||t==="redraw"?k.listIds(e):t;l.syncOrAsync(n.map(function(t){return function(){if(!t)return;var a=k.doTicksSingle(e,t,r);var n=k.getFromId(e,t);n._r=n.range.slice();n._rl=l.simpleMap(n._r,n.r2l);return a}}))};k.doTicksSingle=function(e,t,r){var d=e._fullLayout;var v=false;var p;if(l.isPlainObject(t)){p=t;v=true}else{p=k.getFromId(e,t)}p.setScale();var h=p._id;var g=h.charAt(0);var y=k.counterLetter(h);var m=p._vals=k.calcTicks(p);var x=function(e){return[e.text,e.x,p.mirror,e.font,e.fontSize,e.fontColor].join("_")};var b=h+"tick";var M=h+"grid";var A=h+"zl";var L=(p.linewidth||1)/2;var S=p.ticks==="outside"?p.ticklen:0;var C=0;var O=f.crispRound(e,p.gridwidth,1);var z=f.crispRound(e,p.zerolinewidth,O);var P=f.crispRound(e,p.tickwidth,1);var D,I,E,N;var R;var F;if(p._counterangle&&p.ticks==="outside"){var B=p._counterangle*Math.PI/180;S=p.ticklen*Math.cos(B)+1;C=p.ticklen*Math.sin(B)}if(p.showticklabels&&(p.ticks==="outside"||p.showline)){S+=.2*p.tickfont.size}if(g==="x"){D=["bottom","top"];I=p._transfn||function(e){return"translate("+(p._offset+p.l2p(e.x))+",0)"};E=function(e,t){if(p._counterangle){var r=p._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(r)*t+","+Math.cos(r)*t}else return"M0,"+e+"v"+t}}else if(g==="y"){D=["left","right"];I=p._transfn||function(e){return"translate(0,"+(p._offset+p.l2p(e.x))+")"};E=function(e,t){if(p._counterangle){var r=p._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(r)*t+","+-Math.sin(r)*t}else return"M"+e+",0h"+t}}else if(h==="angular"){D=["left","right"];I=p._transfn;E=function(e,t){return"M"+e+",0h"+t}}else{l.warn("Unrecognized doTicks axis:",h);return}var j=p.side||D[0];var q=[-1,1,j===D[1]?1:-1];if(p.ticks!=="inside"===(g==="x")){q=q.map(function(e){return-e})}if(!p.visible)return;if(p._tickFilter){m=m.filter(p._tickFilter)}function H(e){var t=p.l2p(e.x);return t>1&&t<p._length-1}var V=m.filter(H);if(p._id==="angular"){V=m}function U(e,t){var r=e.selectAll("path."+b).data(p.ticks==="inside"?V:m,x);if(t&&p.ticks){r.enter().append("path").classed(b,1).classed("ticks",1).classed("crisp",1).call(c.stroke,p.tickcolor).style("stroke-width",P+"px").attr("d",t);r.attr("transform",I);r.exit().remove()}else r.remove()}function G(t,r){R=t.selectAll("g."+b).data(m,x);if(!n(r)){R.remove();Z();return}if(!p.showticklabels){R.remove();Z();D();return}var o,u,c,v,y;if(g==="x"){y=j==="bottom"?1:-1;o=function(e){return e.dx+C*y};v=r+(S+L)*y;u=function(e){return e.dy+v+e.fontSize*(j==="bottom"?1:-.2)};c=function(e){if(!n(e)||e===0||e===180){return"middle"}return e*y<0?"end":"start"}}else if(g==="y"){y=j==="right"?1:-1;u=function(e){return e.dy+e.fontSize*_-C*y};o=function(e){return e.dx+r+(S+L+(Math.abs(p.tickangle)===90?e.fontSize/2:0))*y};c=function(e){if(n(e)&&Math.abs(e)===90){return"middle"}return j==="right"?"start":"end"}}else if(h==="angular"){p._labelShift=C;p._labelStandoff=S;p._pad=L;o=p._labelx;u=p._labely;c=p._labelanchor}var k=0,M=0,T=[];R.enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(t){var r=a.select(this),n=e._promises.length;r.call(s.positionText,o(t),u(t)).call(f.font,t.font,t.fontSize,t.fontColor).text(t.text).call(s.convertToTspans,e);n=e._promises[n];if(n){T.push(e._promises.pop().then(function(){O(r,p.tickangle)}))}else{O(r,p.tickangle)}});R.exit().remove();R.each(function(e){k=Math.max(k,e.fontSize)});if(h==="angular"){R.each(function(e){a.select(this).select("text").call(s.positionText,o(e),u(e))})}function A(e,t,r){var a=(e-1)*t;if(g==="x"){if(r<-60||60<r){return-.5*a}else if(j==="top"){return-a}}else{r*=j==="left"?1:-1;if(r<-30){return-a}else if(r<30){return-.5*a}}return 0}function O(e,t){e.each(function(e){var r=c(t,e);var i=a.select(this),l=i.select(".text-math-group"),d=I.call(i.node(),e)+(n(t)&&+t!==0?" rotate("+t+","+o(e)+","+(u(e)-e.fontSize/2)+")":"");var v=A(s.lineCount(i),w*e.fontSize,n(t)?+t:0);if(v){d+=" translate(0, "+v+")"}if(l.empty()){i.select("text").attr({transform:d,"text-anchor":r})}else{var p=f.bBox(l.node()).width*{end:-.5,start:.5}[r];l.attr("transform",d+(p?"translate("+p+",0)":""))}})}O(R,p._lastangle||p.tickangle);function z(){return T.length&&Promise.all(T)}function P(){O(R,p.tickangle);if(g==="x"&&!n(p.tickangle)&&(p.type!=="log"||String(p.dtick).charAt(0)!=="D")){var e=[];R.each(function(t){var r=a.select(this),n=r.select(".text-math-group"),i=p.l2p(t.x);if(n.empty())n=r.select("text");var o=f.bBox(n.node());e.push({top:0,bottom:10,height:10,left:i-o.width/2,right:i+o.width/2+2,width:o.width+2})});for(F=0;F<e.length-1;F++){if(l.bBoxIntersect(e[F],e[F+1])){M=30;break}}if(M){var t=Math.abs((m[m.length-1].x-m[0].x)*p._m)/(m.length-1);if(t<k*2.5){M=90}O(R,M)}p._lastangle=M}Z();return h+" done"}function D(){if(p.showticklabels){var r=e.getBoundingClientRect();var a=t.node().getBoundingClientRect();p._boundingBox={width:a.width,height:a.height,left:a.left-r.left,right:a.right-r.left,top:a.top-r.top,bottom:a.bottom-r.top}}else{var n=d._size;var i;if(g==="x"){i=p.anchor==="free"?n.t+n.h*(1-p.position):n.t+n.h*(1-p._anchorAxis.domain[{bottom:0,top:1}[p.side]]);p._boundingBox={top:i,bottom:i,left:p._offset,right:p._offset+p._length,width:p._length,height:0}}else{i=p.anchor==="free"?n.l+n.w*p.position:n.l+n.w*p._anchorAxis.domain[{left:0,right:1}[p.side]];p._boundingBox={left:i,right:i,bottom:p._offset+p._length,top:p._offset,height:p._length,width:0}}}if(N){var o=p._counterSpan=[Infinity,-Infinity];for(F=0;F<N.length;F++){var l=d._plots[N[F]];var s=l[g==="x"?"yaxis":"xaxis"];u(o,[s._offset,s._offset+s._length])}if(p.anchor==="free"){u(o,g==="x"?[p._boundingBox.bottom,p._boundingBox.top]:[p._boundingBox.right,p._boundingBox.left])}}function u(e,t){e[0]=Math.min(e[0],t[0]);e[1]=Math.max(e[1],t[1])}}function E(){var t=p._name+".automargin";if(g!=="x"&&g!=="y"){return}if(!p.automargin){i.autoMargin(e,t);return}var r=p.side[0];var a={x:0,y:0,r:0,l:0,t:0,b:0};if(g==="x"){a.y=p.anchor==="free"?p.position:p._anchorAxis.domain[r==="t"?1:0];a[r]+=p._boundingBox.height}else{a.x=p.anchor==="free"?p.position:p._anchorAxis.domain[r==="r"?1:0];a[r]+=p._boundingBox.width}if(p.title!==d._dfltTitle[g]){a[r]+=p.titlefont.size}i.autoMargin(e,t,a)}var B=l.syncOrAsync([z,P,D,E]);if(B&&B.then)e._promises.push(B);return B}function Z(){if(r)return;if(p.rangeslider&&p.rangeslider.visible&&p._boundingBox&&p.side==="bottom")return;var t={selection:R,side:p.side};var a=h.charAt(0);var n=e._fullLayout._size;var i=1.5;var o=p.titlefont.size;var l,s,c,v;if(R.size()){var g=f.getTranslate(R.node().parentNode);t.offsetLeft=g.x;t.offsetTop=g.y}var y=10+o*i+(p.linewidth?p.linewidth-1:0);if(a==="x"){s=p.anchor==="free"?{_offset:n.t+(1-(p.position||0))*n.h,_length:0}:T.getFromId(e,p.anchor);c=p._offset+p._length/2;if(p.side==="top"){v=-y-o*(p.showticklabels?1:0)}else{v=s._length+y+o*(p.showticklabels?1.5:.5)}v+=s._offset;if(!t.side)t.side="bottom"}else{s=p.anchor==="free"?{_offset:n.l+(p.position||0)*n.w,_length:0}:T.getFromId(e,p.anchor);v=p._offset+p._length/2;if(p.side==="right"){c=s._length+y+o*(p.showticklabels?1:.5)}else{c=-y-o*(p.showticklabels?.5:0)}c+=s._offset;l={rotate:"-90",offset:0};if(!t.side)t.side="left"}u.draw(e,h+"title",{propContainer:p,propName:p._name+".title",placeholder:d._dfltTitle[a],avoid:t,transform:l,attributes:{x:c,y:v,"text-anchor":"middle"}})}function Y(e,t){if(e.visible!==true||e.xaxis+e.yaxis!==t)return false;if(o.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[g])return true;return e.fill&&e.fill.charAt(e.fill.length-1)===g}function X(t,r,n){if(d._hasOnlyLargeSploms)return;var i=t.gridlayer.selectAll("."+h);var o=t.zerolinelayer;var s=t["hidegrid"+g]?[]:V;var u=p._gridpath||(g==="x"?"M0,"+r._offset+"v":"M"+r._offset+",0h")+r._length;var f=i.selectAll("path."+M).data(p.showgrid===false?[]:s,x);f.enter().append("path").classed(M,1).classed("crisp",1).attr("d",u).each(function(e){if(p.zeroline&&(p.type==="linear"||p.type==="-")&&Math.abs(e.x)<p.dtick/100){a.select(this).remove()}});f.attr("transform",I).call(c.stroke,p.gridcolor||"#ddd").style("stroke-width",O+"px");if(typeof u==="function")f.attr("d",u);f.exit().remove();if(o){var v=false;for(var y=0;y<e._fullData.length;y++){if(Y(e._fullData[y],n)){v=true;break}}var m=l.simpleMap(p.range,p.r2l),b=m[0]*m[1]<=0&&p.zeroline&&(p.type==="linear"||p.type==="-")&&s.length&&(v||H({x:0})||!p.showline);var _=o.selectAll("path."+A).data(b?[{x:0,id:h}]:[]);_.enter().append("path").classed(A,1).classed("zl",1).classed("crisp",1).attr("d",u).each(function(){o.selectAll("path").sort(function(e,t){return T.idSort(e.id,t.id)})});_.attr("transform",I).call(c.stroke,p.zerolinecolor||c.defaultLine).style("stroke-width",z+"px");_.exit().remove()}}if(v){U(p._axislayer,E(p._pos+L*q[2],q[2]*p.ticklen));if(p._counteraxis){var W={gridlayer:p._gridlayer,zerolinelayer:p._zerolinelayer};X(W,p._counteraxis)}return G(p._axislayer,p._pos)}else if(d._has("cartesian")){N=k.getSubplots(e,p);var Q={};N.map(function(e){var t=d._plots[e];var r=t[y+"axis"];var a=r._mainAxis._id;if(Q[a])return;Q[a]=1;X(t,r,e)});var J=p._mainSubplot;var $=d._plots[J];var K=[];if(p.ticks){var ee=q[2];var te=E(p._mainLinePosition+L*ee,ee*p.ticklen);if(p._anchorAxis&&p.mirror&&p.mirror!==true){te+=E(p._mainMirrorPosition-L*ee,-ee*p.ticklen)}U($[g+"axislayer"],te);K=Object.keys(p._linepositions||{})}K.map(function(e){var t=d._plots[e];var r=t[g+"axislayer"];var a=p._linepositions[e]||[];function n(e){var t=q[e];return E(a[e]+L*t,t*p.ticklen)}U(r,n(0)+n(1))});var re=$[g+"axislayer"];return G(re,p._mainLinePosition)}};k.allowAutoMargin=function(e){var t=k.list(e,"",true);for(var r=0;r<t.length;r++){var a=t[r];if(a.automargin){i.allowAutoMargin(e,a._name+".automargin")}if(a.rangeslider&&a.rangeslider.visible){i.allowAutoMargin(e,"rangeslider"+a._id)}}};k.swap=function(e,t){var r=K(e,t);for(var a=0;a<r.length;a++){te(e,r[a].x,r[a].y)}};function K(e,t){var r=[],a,n;for(a=0;a<t.length;a++){var i=[],o=e._fullData[t[a]].xaxis,l=e._fullData[t[a]].yaxis;if(!o||!l)continue;for(n=0;n<r.length;n++){if(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(l)!==-1){i.push(n)}}if(!i.length){r.push({x:[o],y:[l]});continue}var s=r[i[0]],u;if(i.length>1){for(n=1;n<i.length;n++){u=r[i[n]];ee(s.x,u.x);ee(s.y,u.y)}}ee(s.x,[o]);ee(s.y,[l])}return r}function ee(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function te(e,t,r){var a,n,i=[],o=[],s=e.layout;for(a=0;a<t.length;a++)i.push(k.getFromId(e,t[a]));for(a=0;a<r.length;a++)o.push(k.getFromId(e,r[a]));var u=Object.keys(i[0]),c=["anchor","domain","overlaying","position","side","tickangle"],f=["linear","log"];for(a=0;a<u.length;a++){var d=u[a],v=i[0][d],p=o[0][d],h=true,g=false,y=false;if(d.charAt(0)==="_"||typeof v==="function"||c.indexOf(d)!==-1){continue}for(n=1;n<i.length&&h;n++){var m=i[n][d];if(d==="type"&&f.indexOf(v)!==-1&&f.indexOf(m)!==-1&&v!==m){g=true}else if(m!==v)h=false}for(n=1;n<o.length&&h;n++){var x=o[n][d];if(d==="type"&&f.indexOf(p)!==-1&&f.indexOf(x)!==-1&&p!==x){y=true}else if(o[n][d]!==p)h=false}if(h){if(g)s[i[0]._name].type="linear";if(y)s[o[0]._name].type="linear";re(s,d,i,o,e._fullLayout._dfltTitle)}}for(a=0;a<e._fullLayout.annotations.length;a++){var b=e._fullLayout.annotations[a];if(t.indexOf(b.xref)!==-1&&r.indexOf(b.yref)!==-1){l.swapAttrs(s.annotations[a],["?"])}}}function re(e,t,r,a,n){var i=l.nestedProperty,o=i(e[r[0]._name],t).get(),s=i(e[a[0]._name],t).get(),u;if(t==="title"){if(o===n.x){o=n.y}if(s===n.y){s=n.x}}for(u=0;u<r.length;u++){i(e,r[u]._name+"."+t).set(s)}for(u=0;u<a.length;u++){i(e,a[u]._name+"."+t).set(o)}}},{"../../components/color":50,"../../components/drawing":75,"../../components/titles":141,"../../constants/alignment":148,"../../constants/numerical":151,"../../lib":169,"../../lib/svg_text_utils":190,"../../plots/plots":245,"../../registry":261,"./autorange":212,"./axis_autotype":214,"./axis_ids":216,"./set_convert":231,d3:15,"fast-isnumeric":18}],214:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){if(l(t,r))return"date";if(s(t))return"category";if(o(t))return"linear";else return"-"};function o(e){if(!e)return false;for(var t=0;t<e.length;t++){if(a(e[t]))return true}return false}function l(e,t){var r=0,i=0,o=Math.max(1,(e.length-1)/1e3),l;for(var s=0;s<e.length;s+=o){l=e[Math.round(s)];if(n.isDateTime(l,t))r+=1;if(a(l))i+=1}return r>i*2}function s(e){var t=Math.max(1,(e.length-1)/1e3),r=0,a=0,o;for(var l=0;l<e.length;l+=t){o=e[Math.round(l)];if(n.cleanNumber(o)!==i)r++;else if(typeof o==="string"&&o!==""&&o!=="None")a++}return a>r*2}},{"../../constants/numerical":151,"../../lib":169,"fast-isnumeric":18}],215:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("./layout_attributes");var o=e("./tick_value_defaults");var l=e("./tick_mark_defaults");var s=e("./tick_label_defaults");var u=e("./category_order_defaults");var c=e("./line_grid_defaults");var f=e("./set_convert");t.exports=function e(t,r,d,v,p){var h=v.letter;var g=r._id;var y=v.font||{};var m=d("visible",!v.cheateronly);var x=r.type;if(x==="date"){var b=a.getComponentMethod("calendars","handleDefaults");b(t,r,"calendar",v.calendar)}f(r,p);var _=d("autorange",!r.isValidRange(t.range));r._rangesliderAutorange=false;if(_)d("rangemode");d("range");r.cleanRange();u(t,r,d,v);if(x!=="category"&&!v.noHover)d("hoverformat");if(!m)return r;var w=d("color");var k=w!==i.color.dflt?w:y.color;var M=((p._splomAxes||{})[h]||{})[g]||p._dfltTitle[h];d("title",M);n.coerceFont(d,"titlefont",{family:y.family,size:Math.round(y.size*1.2),color:k});o(t,r,d,x);s(t,r,d,x,v);l(t,r,d,v);c(t,r,d,{dfltColor:w,bgColor:v.bgColor,showGrid:v.showGrid,attributes:i});if(r.showline||r.ticks)d("mirror");if(v.automargin)d("automargin");return r}},{"../../lib":169,"../../registry":261,"./category_order_defaults":217,"./layout_attributes":225,"./line_grid_defaults":227,"./set_convert":231,"./tick_label_defaults":232,"./tick_mark_defaults":233,"./tick_value_defaults":234}],216:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("./constants");r.id2name=function e(t){if(typeof t!=="string"||!t.match(n.AX_ID_PATTERN))return;var r=t.substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};r.name2id=function e(t){if(!t.match(n.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};r.cleanId=function e(t,r){if(!t.match(n.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;var a=t.substr(1).replace(/^0+/,"");if(a==="1")a="";return t.charAt(0)+a};r.list=function(e,t,a){var n=e._fullLayout;if(!n)return[];var i=r.listIds(e,t);var o=new Array(i.length);var l;for(l=0;l<i.length;l++){var s=i[l];o[l]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var u=n._subplots.gl3d||[];for(l=0;l<u.length;l++){var c=n[u[l]];if(t)o.push(c[t+"axis"]);else o.push(c.xaxis,c.yaxis,c.zaxis)}}return o};r.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var a=r._subplots;if(t)return a[t+"axis"];return a.xaxis.concat(a.yaxis)};r.getFromId=function(e,t,a){var n=e._fullLayout;if(a==="x")t=t.replace(/y[0-9]*/,"");else if(a==="y")t=t.replace(/x[0-9]*/,"");return n[r.id2name(t)]};r.getFromTrace=function(e,t,n){var i=e._fullLayout;var o=null;if(a.traceIs(t,"gl3d")){var l=t.scene;if(l.substr(0,5)==="scene"){o=i[l][n+"axis"]}}else{o=r.getFromId(e,t[n+"axis"]||n)}return o};r.idSort=function(e,t){var r=e.charAt(0);var a=t.charAt(0);if(r!==a)return r>a?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":261,"./constants":218}],217:[function(e,t,r){"use strict";function a(e,t){var r=t.dataAttr||e._id.charAt(0);var a={};var n;var i,o;if(t.axData){n=t.axData}else{n=[];for(i=0;i<t.data.length;i++){var l=t.data[i];if(l[r+"axis"]===e._id){n.push(l)}}}for(i=0;i<n.length;i++){var s=n[i][r];for(o=0;o<s.length;o++){var u=s[o];if(u!==null&&u!==undefined){a[u]=1}}}return Object.keys(a)}t.exports=function e(t,r,n,i){if(r.type!=="category")return;var o=t.categoryarray;var l=Array.isArray(o)&&o.length>0;var s;if(l)s="array";var u=n("categoryorder",s);var c;if(u==="array"){c=n("categoryarray")}if(!l&&u==="array"){u=r.categoryorder="trace"}if(u==="trace"){r._initialCategories=[]}else if(u==="array"){r._initialCategories=c.slice()}else{c=a(r,i).sort();if(u==="category ascending"){r._initialCategories=c}else if(u==="category descending"){r._initialCategories=c.reverse()}}}},{}],218:[function(e,t,r){"use strict";var a=e("../../lib/regex").counter;t.exports={idRegex:{x:a("x"),y:a("y")},attrRegex:a("[xy]axis"),xAxisMatch:a("xaxis"),yAxisMatch:a("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":184}],219:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./axis_ids").id2name;t.exports=function e(t,r,n,l,s){var u=s._axisConstraintGroups;var c=r._id;var f=c.charAt(0);if(r.fixedrange)return;n("constrain");a.coerce(t,r,{constraintoward:{valType:"enumerated",values:f==="x"?["left","center","right"]:["bottom","middle","top"],dflt:f==="x"?"center":"middle"}},"constraintoward");if(!t.scaleanchor)return;var d=i(u,c,l,s);var v=a.coerce(t,r,{scaleanchor:{valType:"enumerated",values:d.linkableAxes}},"scaleanchor");if(v){var p=n("scaleratio");if(!p)p=r.scaleratio=1;o(u,d.thisGroup,c,v,p)}else if(l.indexOf(t.scaleanchor)!==-1){a.warn("ignored "+r._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because the target"+"axis has fixed range.")}};function i(e,t,r,a){var i=a[n(t)].type;var o,l,s,u;var c=[];for(l=0;l<r.length;l++){s=r[l];if(s===t)continue;u=a[n(s)];if(u.type===i&&!u.fixedrange)c.push(s)}for(o=0;o<e.length;o++){if(e[o][t]){var f=e[o];var d=[];for(l=0;l<c.length;l++){s=c[l];if(!f[s])d.push(s)}return{linkableAxes:d,thisGroup:f}}}return{linkableAxes:c,thisGroup:null}}function o(e,t,r,a,n){var i,o,l,s,u;if(t===null){t={};t[r]=1;u=e.length;e.push(t)}else{u=e.indexOf(t)}var c=Object.keys(t);for(i=0;i<e.length;i++){l=e[i];if(i!==u&&l[a]){var f=l[a];for(o=0;o<c.length;o++){s=c[o];l[s]=f*n*t[s]}e.splice(u,1);return}}if(n!==1){for(o=0;o<c.length;o++){t[c[o]]*=n}}t[a]=1}},{"../../lib":169,"./axis_ids":216}],220:[function(e,t,r){"use strict";var a=e("./axis_ids").id2name;var n=e("./scale_zoom");var i=e("./autorange").makePadFn;var o=e("../../constants/numerical").ALMOST_EQUAL;var l=e("../../constants/alignment").FROM_BL;r.enforce=function e(t){var r=t._fullLayout;var l=r._axisConstraintGroups||[];var u,c,f,d,v,p,h;for(u=0;u<l.length;u++){var g=l[u];var y=Object.keys(g);var m=Infinity;var x=0;var b=Infinity;var _={};var w={};var k=false;for(c=0;c<y.length;c++){f=y[c];w[f]=d=r[a(f)];if(d._inputDomain)d.domain=d._inputDomain.slice();else d._inputDomain=d.domain.slice();if(!d._inputRange)d._inputRange=d.range.slice();d.setScale();_[f]=v=Math.abs(d._m)/g[f];m=Math.min(m,v);if(d.constrain==="domain"||!d._constraintShrinkable){b=Math.min(b,v)}delete d._constraintShrinkable;x=Math.max(x,v);if(d.constrain==="domain")k=true}if(m>o*x&&!k)continue;for(c=0;c<y.length;c++){f=y[c];v=_[f];d=w[f];p=d.constrain;if(v!==b||p==="domain"){h=v/b;if(p==="range"){n(d,h)}else{var M=d._inputDomain;var T=(d.domain[1]-d.domain[0])/(M[1]-M[0]);var A=(d.r2l(d.range[1])-d.r2l(d.range[0]))/(d.r2l(d._inputRange[1])-d.r2l(d._inputRange[0]));h/=T;if(h*A<1){d.domain=d._input.domain=M.slice();n(d,h);continue}if(A<1){d.range=d._input.range=d._inputRange.slice();h*=A}if(d.autorange&&d._min.length&&d._max.length){var L=d.r2l(d.range[0]);var S=d.r2l(d.range[1]);var C=(L+S)/2;var O=C;var z=C;var P=Math.abs(S-C);var D=C-P*h*1.0001;var I=C+P*h*1.0001;var E=i(d);s(d,h);d.setScale();var N=Math.abs(d._m);var R;var F;for(F=0;F<d._min.length;F++){R=d._min[F].val-E(d._min[F])/N;if(R>D&&R<O){O=R}}for(F=0;F<d._max.length;F++){R=d._max[F].val+E(d._max[F])/N;if(R<I&&R>z){z=R}}var B=(z-O)/(2*P);h/=B;O=d.l2r(O);z=d.l2r(z);d.range=d._input.range=L<S?[O,z]:[z,O]}s(d,h)}}}}};r.clean=function e(t,r){if(r._inputDomain){var a=false;var n=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][n]){a=true;break}}if(!a||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function s(e,t){var r=e._inputDomain;var a=l[e.constraintoward];var n=r[0]+(r[1]-r[0])*a;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t]}},{"../../constants/alignment":148,"../../constants/numerical":151,"./autorange":212,"./axis_ids":216,"./scale_zoom":229}],221:[function(e,t,r){"use strict";var a=e("d3");var n=e("tinycolor2");var i=e("has-passive-events");var o=e("../../registry");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../../lib/clear_gl_canvases");var c=e("../../components/color");var f=e("../../components/drawing");var d=e("../../components/fx");var v=e("../../lib/setcursor");var p=e("../../components/dragelement");var h=e("../../constants/alignment").FROM_TL;var g=e("../plots");var y=e("./axes").doTicksSingle;var m=e("./axis_ids").getFromId;var x=e("./select").prepSelect;var b=e("./select").clearSelect;var _=e("./scale_zoom");var w=e("./constants");var k=w.MINDRAG;var M=w.MINZOOM;var T=true;function A(e,t,r,i,c,v,T,A){var L=e._fullLayout._zoomlayer;var F=T+A==="nsew";var X=(T+A).length===1;var W,Q;var J,$;var K,ee;var te,re;var ae,ne;var ie;var oe,le;var se;var ue;var ce,fe;var de,ve,pe,he;function ge(){W=t.xaxis;Q=t.yaxis;ae=W._length;ne=Q._length;te=W._offset;re=Q._offset;J={};J[W._id]=W;$={};$[Q._id]=Q;if(T&&A){var r=t.overlays;for(var a=0;a<r.length;a++){var n=r[a].xaxis;J[n._id]=n;var i=r[a].yaxis;$[i._id]=i}}K=Y(J);ee=Y($);oe=C(K,A);le=C(ee,T);se=!le&&!oe;ie=G(e,J,$);ue=ie.isSubplotConstrained;ce=A||ue;fe=T||ue;var o=e._fullLayout;de=o._has("scattergl");ve=o._hasOnlyLargeSploms;pe=ve||o._has("splom");he=o._has("svg")}ge();var ye=I(le+oe,e._fullLayout.dragmode,F);var me=S(t,T+A+"drag",ye,r,i,c,v);if(se&&!F){me.onmousedown=null;me.style.pointerEvents="none";return me}var xe={element:me,gd:e,plotinfo:t};xe.prepFn=function(t,r,a){var n=e._fullLayout.dragmode;ge();if(!se){if(F){if(t.shiftKey){if(n==="pan")n="zoom";else if(!q(n))n="pan"}else if(t.ctrlKey){n="pan"}}else n="pan"}if(n==="lasso")xe.minDrag=1;else xe.minDrag=undefined;if(q(n)){xe.xaxes=K;xe.yaxes=ee;x(t,r,a,xe,n)}else{xe.clickFn=_e;be();if(!se){if(n==="zoom"){xe.moveFn=Ie;xe.doneFn=Ee;xe.minDrag=1;De(t,r,a)}else if(n==="pan"){xe.moveFn=qe;xe.doneFn=Ue}}}};function be(){xe.plotinfo.selection=false;b(L)}function _e(r,n){B(e);if(r===2&&!X)Ve();if(F){d.click(e,n,t.id)}else if(r===1&&X){var i=T?Q:W,l=T==="s"||A==="w"?0:1,u=i._name+".range["+l+"]",c=O(i,l),f="left",v="middle";if(i.fixedrange)return;if(T){v=T==="n"?"top":"bottom";if(i.side==="right")f="right"}else if(A==="e")f="right";if(e._context.showAxisRangeEntryBoxes){a.select(me).call(s.makeEditable,{gd:e,immediate:true,background:e._fullLayout.paper_bgcolor,text:String(c),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:f,verticalAlign:v}).on("edit",function(t){var r=i.d2r(t);if(r!==undefined){o.call("relayout",e,u,r)}})}}}p.init(xe);var we,ke,Me,Te,Ae,Le,Se,Ce,Oe;var ze;var Pe={};function De(t,r,a){var i=me.getBoundingClientRect();we=r-i.left;ke=a-i.top;Me={l:we,r:we,w:0,t:ke,b:ke,h:0};Te=e._hmpixcount?e._hmlumcount/e._hmpixcount:n(e._fullLayout.plot_bgcolor).getLuminance();Ae="M0,0H"+ae+"V"+ne+"H0V0";Le=false;Se="xy";ze=false;Ce=E(L,Te,te,re,Ae);Oe=N(L,te,re)}function Ie(t,r){if(e._transitioningWithDuration){return false}var a=Math.max(0,Math.min(ae,t+we)),n=Math.max(0,Math.min(ne,r+ke)),i=Math.abs(a-we),o=Math.abs(n-ke);Me.l=Math.min(we,a);Me.r=Math.max(we,a);Me.t=Math.min(ke,n);Me.b=Math.max(ke,n);function l(){Se="";Me.r=Me.l;Me.t=Me.b;Oe.attr("d","M0,0Z")}if(ue){if(i>M||o>M){Se="xy";if(i/ae>o/ne){o=i*ne/ae;if(ke>n)Me.t=ke-o;else Me.b=ke+o}else{i=o*ae/ne;if(we>a)Me.l=we-i;else Me.r=we+i}Oe.attr("d",U(Me))}else{l()}}else if(!le||o<Math.min(Math.max(i*.6,k),M)){if(i<k||!oe){l()}else{Me.t=0;Me.b=ne;Se="x";Oe.attr("d",H(Me,ke))}}else if(!oe||i<Math.min(o*.6,M)){Me.l=0;Me.r=ae;Se="y";Oe.attr("d",V(Me,we))}else{Se="xy";Oe.attr("d",U(Me))}Me.w=Me.r-Me.l;Me.h=Me.b-Me.t;if(Se)ze=true;e._dragged=ze;R(Ce,Oe,Me,Ae,Le,Te);Le=true}function Ee(){if(Math.min(Me.h,Me.w)<k*2){return B(e)}if(Se==="xy"||Se==="x"){z(K,Me.l/ae,Me.r/ae,Pe,ie.xaxes)}if(Se==="xy"||Se==="y"){z(ee,(ne-Me.b)/ne,(ne-Me.t)/ne,Pe,ie.yaxes)}B(e);Ue();j(e)}var Ne=[0,0,ae,ne];var Re=null;var Fe=w.REDRAWDELAY;var Be=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function je(t){if(!e._context.scrollZoom&&!e._fullLayout._enablescrollzoom){return}be();if(e._transitioningWithDuration){t.preventDefault();t.stopPropagation();return}var r=e.querySelector(".plotly");ge();if(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10){return}clearTimeout(Re);var a=-t.deltaY;if(!isFinite(a))a=t.wheelDelta/10;if(!isFinite(a)){l.log("Did not find wheel motion attributes: ",t);return}var n=Math.exp(-Math.min(Math.max(a,-20),20)/200),i=Be.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(t.clientX-i.left)/i.width,s=(i.bottom-t.clientY)/i.height,u;function c(e,t,r){if(e.fixedrange)return;var a=l.simpleMap(e.range,e.r2l),n=a[0]+(a[1]-a[0])*t;function i(t){return e.l2r(n+(t-n)*r)}e.range=a.map(i)}if(ce){if(!A)o=.5;for(u=0;u<K.length;u++){c(K[u],o,n)}Ne[2]*=n;Ne[0]+=Ne[2]*o*(1/n-1)}if(fe){if(!T)s=.5;for(u=0;u<ee.length;u++){c(ee[u],s,n)}Ne[3]*=n;Ne[1]+=Ne[3]*(1-s)*(1/n-1)}Ye(Ne);He(T,A);Re=setTimeout(function(){Ne=[0,0,ae,ne];Ue()},Fe);t.preventDefault();return}if(T.length*A.length!==1){Z(me,je)}function qe(t,r){if(e._transitioningWithDuration){return}if(oe==="ew"||le==="ns"){if(oe)P(K,t);if(le)P(ee,r);Ye([oe?-t:0,le?-r:0,ae,ne]);He(le,oe);return}function a(e,t,r){var a=1-t,n,i;for(var o=0;o<e.length;o++){var l=e[o];if(l.fixedrange)continue;n=l;i=l._rl[a]+(l._rl[t]-l._rl[a])/D(r/l._length);var s=l.l2r(i);if(s!==false&&s!==undefined)l.range[t]=s}return n._length*(n._rl[t]-i)/(n._rl[t]-n._rl[a])}if(ue&&oe&&le){var n=oe==="w"===(le==="n")?1:-1;var i=(t/ae+n*r/ne)/2;t=i*ae;r=n*i*ne}if(oe==="w")t=a(K,0,t);else if(oe==="e")t=a(K,1,-t);else if(!oe)t=0;if(le==="n")r=a(ee,1,r);else if(le==="s")r=a(ee,0,-r);else if(!le)r=0;var o=oe==="w"?t:0;var l=le==="n"?r:0;if(ue){var s;if(!oe&&le.length===1){for(s=0;s<K.length;s++){K[s].range=K[s]._r.slice();_(K[s],1-r/ne)}t=r*ae/ne;o=t/2}if(!le&&oe.length===1){for(s=0;s<ee.length;s++){ee[s].range=ee[s]._r.slice();_(ee[s],1-t/ae)}r=t*ne/ae;l=r/2}}Ye([o,l,ae-t,ne-r]);He(le,oe)}function He(t,r){var a=[],n;function i(e){for(n=0;n<e.length;n++){if(!e[n].fixedrange)a.push(e[n]._id)}}if(ce){i(K);i(ie.xaxes)}if(fe){i(ee);i(ie.yaxes)}Pe={};for(n=0;n<a.length;n++){var l=a[n];y(e,l,true);var s=m(e,l);Pe[s._name+".range[0]"]=s.range[0];Pe[s._name+".range[1]"]=s.range[1]}function u(i,o,l){for(n=0;n<i.length;n++){var s=i[n];if(r&&a.indexOf(s.xref)!==-1||t&&a.indexOf(s.yref)!==-1){o(e,n);if(l)return}}}u(e._fullLayout.annotations||[],o.getComponentMethod("annotations","drawOne"));u(e._fullLayout.shapes||[],o.getComponentMethod("shapes","drawOne"));u(e._fullLayout.images||[],o.getComponentMethod("images","draw"),true)}function Ve(){if(e._transitioningWithDuration)return;var t=e._context.doubleClick,r=(oe?K:[]).concat(le?ee:[]),a={};var n,i,l;if(t==="reset+autosize"){t="autosize";for(i=0;i<r.length;i++){n=r[i];if(n._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){t="reset";break}}}if(t==="autosize"){for(i=0;i<r.length;i++){n=r[i];if(!n.fixedrange)a[n._name+".autorange"]=true}}else if(t==="reset"){if(oe||ue)r=r.concat(ie.xaxes);if(le&&!ue)r=r.concat(ie.yaxes);if(ue){if(!oe)r=r.concat(K);else if(!le)r=r.concat(ee)}for(i=0;i<r.length;i++){n=r[i];if(!n._rangeInitial){a[n._name+".autorange"]=true}else{l=n._rangeInitial;a[n._name+".range[0]"]=l[0];a[n._name+".range[1]"]=l[1]}}}e.emit("plotly_doubleclick",null);o.call("relayout",e,a)}function Ue(){Ye([0,0,ae,ne]);l.syncOrAsync([g.previousPromises,function(){o.call("relayout",e,Pe)}],e)}var Ge,Ze;function Ye(t){var r=e._fullLayout;var a=r._plots;var n=r._subplots.cartesian;var i,s,c,d;if(pe||de){u(e)}if(pe){o.subplotsRegistry.splom.drag(e);if(ve)return}if(de){for(i=0;i<n.length;i++){s=a[n[i]];c=s.xaxis;d=s.yaxis;var v=s._scene;if(v){var p=l.simpleMap(c.range,c.r2l);var h=l.simpleMap(d.range,d.r2l);v.update({range:[p[0],h[0],p[1],h[1]]})}}}if(he){var g=t[2]/W._length;var y=t[3]/Q._length;for(i=0;i<n.length;i++){s=a[n[i]];c=s.xaxis;d=s.yaxis;var m=ce&&!c.fixedrange&&J[c._id];var x=fe&&!d.fixedrange&&$[d._id];var b,_;var w,k;if(m){b=g;w=A?t[0]:Qe(c,b)}else{b=Xe(c,g,y);w=We(c,b)}if(x){_=y;k=T?t[1]:Qe(d,_)}else{_=Xe(d,g,y);k=We(d,_)}if(!b&&!_){continue}if(!b)b=1;if(!_)_=1;var M=c._offset-w/b;var L=d._offset-k/_;s.clipRect.call(f.setTranslate,w,k).call(f.setScale,b,_);s.plot.call(f.setTranslate,M,L).call(f.setScale,1/b,1/_);if(b!==Ge||_!==Ze){f.setPointGroupScale(s.zoomScalePts,b,_);f.setTextPointsScale(s.zoomScaleTxt,b,_)}f.hideOutsideRangePoints(s.clipOnAxisFalseTraces,s);Ge=b;Ze=_}}}function Xe(e,t,r){if(e.fixedrange)return 0;if(ce&&ie.xaHash[e._id]){return t}if(fe&&(ue?ie.xaHash:ie.yaHash)[e._id]){return r}return 0}function We(e,t){if(t){e.range=e._r.slice();_(e,t);return Qe(e,t)}return 0}function Qe(e,t){return e._length*(1-t)*h[e.constraintoward||"middle"]}return me}function L(e,t,r,a){var n=l.ensureSingle(e.draglayer,t,r,function(t){t.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});n.call(v,a);return n.node()}function S(e,t,r,n,i,o,l){var s=L(e,"rect",t,r);a.select(s).call(f.setRect,n,i,o,l);return s}function C(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function O(e,t){var r=e.range[t],n=Math.abs(r-e.range[1-t]),i;if(e.type==="date"){return r}else if(e.type==="log"){i=Math.ceil(Math.max(0,-Math.log(n)/Math.LN10))+3;return a.format("."+i+"g")(Math.pow(10,r))}else{i=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(n)/Math.LN10)+4;return a.format("."+String(i)+"g")(r)}}function z(e,t,r,a,n){var i,o,l,s;for(i=0;i<e.length;i++){o=e[i];if(o.fixedrange)continue;l=o._rl[0];s=o._rl[1]-l;o.range=[o.l2r(l+s*t),o.l2r(l+s*r)];a[o._name+".range[0]"]=o.range[0];a[o._name+".range[1]"]=o.range[1]}if(n&&n.length){var u=(t+(1-r))/2;z(n,u,1-u,a)}}function P(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(!a.fixedrange){a.range=[a.l2r(a._rl[0]-t/a._m),a.l2r(a._rl[1]-t/a._m)]}}}function D(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function I(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function E(e,t,r,a,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+a+")").attr("d",n+"Z")}function N(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+r+")").attr("d","M0,0Z")}function R(e,t,r,a,n,i){e.attr("d",a+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");F(e,t,n,i)}function F(e,t,r,a){if(!r){e.transition().style("fill",a>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function B(e){a.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function j(e){if(T&&e.data&&e._context.showTips){l.notifier(l._(e,"Double-click to zoom back out"),"long");T=false}}function q(e){return e==="lasso"||e==="select"}function H(e,t){return"M"+(e.l-.5)+","+(t-M-.5)+"h-3v"+(2*M+1)+"h3ZM"+(e.r+.5)+","+(t-M-.5)+"h3v"+(2*M+1)+"h-3Z"}function V(e,t){return"M"+(t-M-.5)+","+(e.t-.5)+"v-3h"+(2*M+1)+"v3ZM"+(t-M-.5)+","+(e.b+.5)+"v3h"+(2*M+1)+"v-3Z"}function U(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,M)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function G(e,t,r){var a=e._fullLayout._axisConstraintGroups;var n=false;var i={};var o={};var s,u,c,f;for(var d=0;d<a.length;d++){var v=a[d];for(s in t){if(v[s]){for(c in v){if(!(c.charAt(0)==="x"?t:r)[c]){i[c]=1}}for(u in r){if(v[u])n=true}}}for(u in r){if(v[u]){for(f in v){if(!(f.charAt(0)==="x"?t:r)[f]){o[f]=1}}}}}if(n){l.extendFlat(i,o);o={}}var p={};var h=[];for(c in i){var g=m(e,c);h.push(g);p[g._id]=g}var y={};var x=[];for(f in o){var b=m(e,f);x.push(b);y[b._id]=b}return{xaHash:p,yaHash:y,xaxes:h,yaxes:x,isSubplotConstrained:n}}function Z(e,t){if(!i){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function Y(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:A,makeDragger:L,makeRectDragger:S,makeZoombox:E,makeCorners:N,updateZoombox:R,xyCorners:U,transitionZoombox:F,removeZoombox:B,showDoubleClickNotifier:j,attachWheelEventHandler:Z}},{"../../components/color":50,"../../components/dragelement":72,"../../components/drawing":75,"../../components/fx":92,"../../constants/alignment":148,"../../lib":169,"../../lib/clear_gl_canvases":158,"../../lib/setcursor":188,"../../lib/svg_text_utils":190,"../../registry":261,"../plots":245,"./axes":213,"./axis_ids":216,"./constants":218,"./scale_zoom":229,"./select":230,d3:15,"has-passive-events":21,tinycolor2:33}],222:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/fx");var i=e("../../components/dragelement");var o=e("../../lib/setcursor");var l=e("./dragbox").makeDragBox;var s=e("./constants").DRAGGERSIZE;r.initInteractions=function e(t){var o=t._fullLayout;if(t._context.staticPlot){a.select(t).selectAll(".drag").remove();return}if(!o._has("cartesian")&&!o._has("gl2d")&&!o._has("splom"))return;var u=Object.keys(o._plots||{}).sort(function(e,t){if((o._plots[e].mainplot&&true)===(o._plots[t].mainplot&&true)){var r=e.split("y"),a=t.split("y");return r[0]===a[0]?Number(r[1]||1)-Number(a[1]||1):Number(r[0]||1)-Number(a[0]||1)}return o._plots[e].mainplot?1:-1});u.forEach(function(e){var r=o._plots[e];var a=r.xaxis;var u=r.yaxis;if(!r.mainplot){var c=l(t,r,a._offset,u._offset,a._length,u._length,"ns","ew");c.onmousemove=function(r){t._fullLayout._rehover=function(){if(t._fullLayout._hoversubplot===e){n.hover(t,r,e)}};n.hover(t,r,e);t._fullLayout._lasthover=c;t._fullLayout._hoversubplot=e};c.onmouseout=function(e){if(t._dragging)return;t._fullLayout._hoversubplot=null;i.unhover(t,e)};if(t._context.showAxisDragHandles){l(t,r,a._offset-s,u._offset-s,s,s,"n","w");l(t,r,a._offset+a._length,u._offset-s,s,s,"n","e");l(t,r,a._offset-s,u._offset+u._length,s,s,"s","w");l(t,r,a._offset+a._length,u._offset+u._length,s,s,"s","e")}}if(t._context.showAxisDragHandles){if(e===a._mainSubplot){var f=a._mainLinePosition;if(a.side==="top")f-=s;l(t,r,a._offset+a._length*.1,f,a._length*.8,s,"","ew");l(t,r,a._offset,f,a._length*.1,s,"","w");l(t,r,a._offset+a._length*.9,f,a._length*.1,s,"","e")}if(e===u._mainSubplot){var d=u._mainLinePosition;if(u.side!=="right")d-=s;l(t,r,d,u._offset+u._length*.1,s,u._length*.8,"ns","");l(t,r,d,u._offset+u._length*.9,s,u._length*.1,"s","");l(t,r,d,u._offset,s,u._length*.1,"n","")}}});var c=o._hoverlayer.node();c.onmousemove=function(e){e.target=t._fullLayout._lasthover;n.hover(t,e,o._hoversubplot)};c.onclick=function(e){e.target=t._fullLayout._lasthover;n.click(t,e)};c.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)};r.updateFx(o)};r.updateFx=function(e){var t=e.dragmode==="pan"?"move":"crosshair";o(e._draggers,t)}},{"../../components/dragelement":72,"../../components/fx":92,"../../lib/setcursor":188,"./constants":218,"./dragbox":221,d3:15}],223:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");t.exports=function e(t){return function e(r,i){var o=r[t];if(!Array.isArray(o))return;var l=a.subplotsRegistry.cartesian;var s=l.idRegex;var u=i._subplots;var c=u.xaxis;var f=u.yaxis;var d=u.cartesian;var v=i._has("cartesian")||i._has("gl2d");for(var p=0;p<o.length;p++){var h=o[p];if(!n.isPlainObject(h))continue;var g=h.xref;var y=h.yref;var m=s.x.test(g);var x=s.y.test(y);if(m||x){if(!v)n.pushUnique(i._basePlotModules,l);var b=false;if(m&&c.indexOf(g)===-1){c.push(g);b=true}if(x&&f.indexOf(y)===-1){f.push(y);b=true}if(b&&m&&x){d.push(g+y)}}}}}},{"../../lib":169,"../../registry":261}],224:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../lib");var o=e("../plots");var l=e("../../components/drawing");var s=e("../get_data").getModuleCalcData;var u=e("./axis_ids");var c=e("./constants");var f=e("../../constants/xmlns_namespaces");var d=i.ensureSingle;function v(e,t,r){return i.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=c.idRegex;r.attrRegex=c.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var a=r.xaxis;var n=r.yaxis;var o=r.cartesian;var l=o.concat(r.gl2d||[]);var s={};var f={};var d,v,p;for(d=0;d<l.length;d++){var h=l[d].split("y");s[h[0]]=1;f["y"+h[1]]=1}for(d=0;d<a.length;d++){v=a[d];if(!s[v]){p=(e[u.id2name(v)]||{}).anchor;if(!c.idRegex.y.test(p))p="y";o.push(v+p);l.push(v+p);if(!f[p]){f[p]=1;i.pushUnique(n,p)}}}for(d=0;d<n.length;d++){p=n[d];if(!f[p]){v=(e[u.id2name(p)]||{}).anchor;if(!c.idRegex.x.test(v))v="x";o.push(v+p);l.push(v+p);if(!s[v]){s[v]=1;i.pushUnique(a,v)}}}if(!l.length){v="";p="";for(var g in e){if(c.attrRegex.test(g)){var y=g.charAt(0);if(y==="x"){if(!v||+g.substr(5)<+v.substr(5)){v=g}}else if(!p||+g.substr(5)<+p.substr(5)){p=g}}}v=v?u.name2id(v):"x";p=p?u.name2id(p):"y";a.push(v);n.push(p);o.push(v+p)}};r.plot=function(e,t,r,a){var n=e._fullLayout;var i=n._subplots.cartesian;var o=e.calcdata;var l;if(!Array.isArray(t)){t=[];for(l=0;l<o.length;l++)t.push(l)}for(l=0;l<i.length;l++){var s=i[l];var u=n._plots[s];var c=[];var f;for(var d=0;d<o.length;d++){var v=o[d];var h=v[0].trace;if(h.xaxis+h.yaxis===s){if(t.indexOf(h.index)!==-1||h.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===s&&["tonextx","tonexty","tonext"].indexOf(h.fill)!==-1&&c.indexOf(f)===-1){c.push(f)}c.push(v)}f=v}}p(e,u,c,r,a)}};function p(e,t,r,i,o){var u=c.traceLayerClasses;var f=e._fullLayout;var d=f._modules;var v,p,h;var g=[];var y=[];for(var m=0;m<d.length;m++){v=d[m];var x=v.name;var b=n.modules[x].categories;if(b.svg){var _=v.layerName||x+"layer";var w=v.plot;p=s(r,w);h=p[0];r=p[1];if(h.length){g.push({i:u.indexOf(_),className:_,plotMethod:w,cdModule:h})}if(b.zoomScale){y.push("."+_)}}}g.sort(function(e,t){return e.i-t.i});var k=t.plot.selectAll("g.mlayer").data(g,function(e){return e.className});k.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true);k.exit().remove();k.order();k.each(function(r){var n=a.select(this);var s=r.className;r.plotMethod(e,t,r.cdModule,n,i,o);if(s!=="scatterlayer"&&s!=="barlayer"){l.setClipUrl(n,t.layerClipId)}});if(f._has("scattergl")){v=n.getModule("scattergl");h=s(r,v)[0];v.plot(e,t,h)}if(!e._context.staticPlot){if(t._hasClipOnAxisFalse){t.clipOnAxisFalseTraces=t.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")}if(y.length){var M=t.plot.selectAll(y.join(",")).selectAll(".trace");t.zoomScalePts=M.selectAll("path.point");t.zoomScaleTxt=M.selectAll(".textpoint")}}}r.clean=function(e,t,r,a){var n=a._plots||{};var i=t._plots||{};var o=a._subplots||{};var l;var s,c;if(a._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(c in n){l=n[c];if(l.plotgroup)l.plotgroup.remove()}}var f=a._has&&a._has("gl");var d=t._has&&t._has("gl");if(f&&!d){for(c in n){l=n[c];if(l._scene)l._scene.destroy()}}if(o.xaxis&&o.yaxis){var v=u.listIds({_fullLayout:a});for(s=0;s<v.length;s++){var p=v[s];if(!t[u.id2name(p)]){a._infolayer.selectAll(".g-"+p+"title").remove()}}}var h=a._has&&a._has("cartesian");var g=t._has&&t._has("cartesian");if(h&&!g){y(a._cartesianlayer.selectAll(".subplot"),a);a._defs.selectAll(".axesclip").remove();delete a._axisConstraintGroups}else if(o.cartesian){for(s=0;s<o.cartesian.length;s++){var x=o.cartesian[s];if(!i[x]){var b="."+x+",."+x+"-x,."+x+"-y";a._cartesianlayer.selectAll(b).remove();m(x,a)}}}};r.drawFramework=function(e){var t=e._fullLayout;var r=h(e);var n=t._cartesianlayer.selectAll(".subplot").data(r,i.identity);n.enter().append("g").attr("class",function(e){return"subplot "+e});n.order();n.exit().call(y,t);n.each(function(r){var n=t._plots[r];n.plotgroup=a.select(this);n.overlays=[];g(e,n);if(n.mainplot){var i=t._plots[n.mainplot];i.overlays.push(n)}n.draglayer=d(t._draggers,"g",r)})};r.rangePlot=function(e,t,r){g(e,t);p(e,t,r);o.style(e)};function h(e){var t=e._fullLayout;var r=[];var a=[];for(var n in t._plots){var i=t._plots[n];var o=i.xaxis._mainAxis;var l=i.yaxis._mainAxis;var s=o._id+l._id;if(s!==n&&t._plots[s]){i.mainplot=s;i.mainplotinfo=t._plots[s];a.push(n)}else{r.push(n);i.mainplot=undefined}}r=r.concat(a);return r}function g(e,t){var r=t.plotgroup;var a=t.id;var n=c.layerValue2layerClass[t.xaxis.layer];var i=c.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.plot=d(r,"g","plot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var l=d(r,"g","layer-subplot");t.shapelayer=d(l,"g","shapelayer");t.imagelayer=d(l,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+n);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+n);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var s=t.mainplotinfo;var f=s.plotgroup;var p=a+"-x";var h=a+"-y";t.gridlayer=s.gridlayer;t.zerolinelayer=s.zerolinelayer;d(s.overlinesBelow,"path",p);d(s.overlinesBelow,"path",h);d(s.overaxesBelow,"g",p);d(s.overaxesBelow,"g",h);t.plot=d(s.overplot,"g",a);d(s.overlinesAbove,"path",p);d(s.overlinesAbove,"path",h);d(s.overaxesAbove,"g",p);d(s.overaxesAbove,"g",h);t.xlines=f.select(".overlines-"+n).select("."+p);t.ylines=f.select(".overlines-"+i).select("."+h);t.xaxislayer=f.select(".overaxes-"+n).select("."+p);t.yaxislayer=f.select(".overaxes-"+i).select("."+h)}if(!o){v(t.gridlayer,"g",t.xaxis._id);v(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").sort(u.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function y(e,t){if(!e)return;var r={};e.each(function(e){var n=a.select(this);n.remove();m(e,t);r[e]=true});for(var n in t._plots){var i=t._plots[n];var o=i.overlays||[];for(var l=0;l<o.length;l++){var s=o[l];if(r[s.id]){s.plot.selectAll(".trace").remove()}}}}function m(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var t=e._fullLayout._glimages;var r=a.select(e).selectAll(".svg-container");var n=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var a=t.append("svg:image");a.attr({xmlns:f.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}n.each(i)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":75,"../../constants/xmlns_namespaces":153,"../../lib":169,"../../registry":261,"../get_data":241,"../plots":245,"./attributes":211,"./axis_ids":216,"./constants":218,"./graph_interact":222,"./layout_attributes":225,"./layout_defaults":226,"./transition_axes":235,d3:15}],225:[function(e,t,r){"use strict";var a=e("../font_attributes");var n=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var l=e("../../plot_api/plot_template").templatedArray;var s=e("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:a({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc",_noTemplating:true},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}}],editType:"axrange",impliedEdits:{autorange:false}},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:a({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:l("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:false,editType:"layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":49,"../../components/drawing/attributes":74,"../../lib/extend":163,"../../plot_api/plot_template":203,"../font_attributes":239,"./constants":218}],226:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("../../components/color");var o=e("../../plot_api/plot_template");var l=e("../layout_attributes");var s=e("./layout_attributes");var u=e("./type_defaults");var c=e("./axis_defaults");var f=e("./constraint_defaults");var d=e("./position_defaults");var v=e("./axis_ids");t.exports=function e(t,r,p){var h={};var g={};var y={};var m={};var x;for(x=0;x<p.length;x++){var b=p[x];if(!a.traceIs(b,"cartesian")&&!a.traceIs(b,"gl2d")){continue}var _=v.id2name(b.xaxis);var w=v.id2name(b.yaxis);if(!a.traceIs(b,"carpet")||b.type==="carpet"&&!b._cheater){if(_)g[_]=1}if(b.type==="carpet"&&b._cheater){if(_)h[_]=1}if(a.traceIs(b,"2dMap")){y[_]=true;y[w]=true}if(a.traceIs(b,"oriented")){var k=b.orientation==="h"?w:_;m[k]=true}}var M=r._subplots;var T=M.xaxis;var A=M.yaxis;var L=n.simpleMap(T,v.id2name);var S=n.simpleMap(A,v.id2name);var C=L.concat(S);var O=i.background;if(T.length&&A.length){O=n.coerce(t,r,l,"plot_bgcolor")}var z=i.combine(O,r.paper_bgcolor);var P,D,I,E;function N(e,t){return n.coerce(I,E,s,e,t)}function R(e,t){return n.coerce2(I,E,s,e,t)}function F(e){return e==="x"?A:T}var B={x:F("x"),y:F("y")};function j(e,r){var a=e==="x"?L:S;var n=[];for(var i=0;i<a.length;i++){var o=a[i];if(o!==r&&!(t[o]||{}).overlaying){n.push(v.name2id(o))}}return n}for(x=0;x<C.length;x++){P=C[x];D=P.charAt(0);if(!n.isPlainObject(t[P])){t[P]={}}I=t[P];E=o.newContainer(r,P,D+"axis");u(I,E,N,p,P);var q=j(D,P);var H={letter:D,font:r.font,outerTicks:y[P],showGrid:!m[P],data:p,bgColor:z,calendar:r.calendar,automargin:true,cheateronly:D==="x"&&h[P]&&!g[P]};c(I,E,N,H,r);var V=R("spikecolor"),U=R("spikethickness"),G=R("spikedash"),Z=R("spikemode"),Y=R("spikesnap"),X=N("showspikes",!!V||!!U||!!G||!!Z||!!Y);if(!X){delete E.spikecolor;delete E.spikethickness;delete E.spikedash;delete E.spikemode;delete E.spikesnap}var W={letter:D,counterAxes:B[D],overlayableAxes:q,grid:r.grid};d(I,E,N,W);E._input=I}var Q=a.getComponentMethod("rangeslider","handleDefaults");var J=a.getComponentMethod("rangeselector","handleDefaults");for(x=0;x<L.length;x++){P=L[x];I=t[P];E=r[P];Q(t,r,P);if(E.type==="date"){J(I,E,r,S,E.calendar)}N("fixedrange")}for(x=0;x<S.length;x++){P=S[x];I=t[P];E=r[P];var $=r[v.id2name(E.anchor)];var K=$&&$.rangeslider&&$.rangeslider.visible;N("fixedrange",K)}r._axisConstraintGroups=[];var ee=B.x.concat(B.y);for(x=0;x<C.length;x++){P=C[x];D=P.charAt(0);I=t[P];E=r[P];f(I,E,N,ee,r)}}},{"../../components/color":50,"../../lib":169,"../../plot_api/plot_template":203,"../../registry":261,"../layout_attributes":243,"./axis_defaults":215,"./axis_ids":216,"./constraint_defaults":219,"./layout_attributes":225,"./position_defaults":228,"./type_defaults":236}],227:[function(e,t,r){"use strict";var a=e("tinycolor2").mix;var n=e("../../components/color/attributes").lightFraction;var i=e("../../lib");t.exports=function e(t,r,o,l){l=l||{};var s=l.dfltColor;function u(e,a){return i.coerce2(t,r,l.attributes,e,a)}var c=u("linecolor",s);var f=u("linewidth");var d=o("showline",l.showLine||!!c||!!f);if(!d){delete r.linecolor;delete r.linewidth}var v=a(s,l.bgColor,l.blend||n).toRgbString();var p=u("gridcolor",v);var h=u("gridwidth");var g=o("showgrid",l.showGrid||!!p||!!h);if(!g){delete r.gridcolor;delete r.gridwidth}if(!l.noZeroLine){var y=u("zerolinecolor",s);var m=u("zerolinewidth");var x=o("zeroline",l.showGrid||!!y||!!m);if(!x){delete r.zerolinecolor;delete r.zerolinewidth}}}},{"../../components/color/attributes":49,"../../lib":169,tinycolor2:33}],228:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");t.exports=function e(t,r,i,o){var l=o.counterAxes||[];var s=o.overlayableAxes||[];var u=o.letter;var c=o.grid;var f,d,v,p;if(c){d=c._domains[u][c._axisMap[r._id]];f=c._anchors[r._id];if(d){v=c[u+"side"].split(" ")[0];p=c.domain[u][v==="right"||v==="top"?1:0]}}d=d||[0,1];f=f||(a(t.position)?"free":l[0]||"free");v=v||(u==="x"?"bottom":"left");p=p||0;var h=n.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:f}},"anchor");if(h==="free")i("position",p);n.coerce(t,r,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:v}},"side");var g=false;if(s.length){g=n.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(s),dflt:false}},"overlaying")}if(!g){var y=i("domain",d);if(y[0]>y[1]-.01)r.domain=d;n.noneOrAll(t.domain,r.domain,d)}i("layer");return r}},{"../../lib":169,"fast-isnumeric":18}],229:[function(e,t,r){"use strict";var a=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,n){if(n===undefined){n=a[t.constraintoward||"center"]}var i=[t.r2l(t.range[0]),t.r2l(t.range[1])];var o=i[0]+(i[1]-i[0])*n;t.range=t._input.range=[t.l2r(o+(i[0]-o)*r),t.l2r(o+(i[1]-o)*r)]}},{"../../constants/alignment":148}],230:[function(e,t,r){"use strict";var a=e("polybooljs");var n=e("../../registry");var i=e("../../components/color");var o=e("../../components/fx");var l=e("../../lib/polygon");var s=e("../../lib/throttle");var u=e("../../components/fx/helpers").makeEventData;var c=e("./axis_ids").getFromId;var f=e("../sort_modules").sortModules;var d=e("./constants");var v=d.MINSELECT;var p=l.filter;var h=l.tester;var g=l.multitester;function y(e){return e._id}function m(e,t,r,a,n){var l=a.gd;var u=l._fullLayout;var f=u._zoomlayer;var m=a.element.getBoundingClientRect();var k=a.plotinfo;var M=k.xaxis._offset;var T=k.yaxis._offset;var A=t-m.left;var L=r-m.top;var S=A;var C=L;var O="M"+A+","+L;var z=a.xaxes[0]._length;var P=a.yaxes[0]._length;var D=a.xaxes.map(y);var I=a.yaxes.map(y);var E=a.xaxes.concat(a.yaxes);var N=e.altKey;var R,F,B,j;var q,H,V,U,G;var Z=u._lastSelectedSubplot&&u._lastSelectedSubplot===k.id;if(Z&&(e.shiftKey||e.altKey)&&(k.selection&&k.selection.polygons)&&!a.polygons){a.polygons=k.selection.polygons;a.mergedPolygons=k.selection.mergedPolygons}else if(!e.shiftKey&&!e.altKey||(e.shiftKey||e.altKey)&&!k.selection){k.selection={};k.selection.polygons=a.polygons=[];k.selection.mergedPolygons=a.mergedPolygons=[]}if(!Z){w(f);u._lastSelectedSubplot=k.id}if(n==="lasso"){R=p([[A,L]],d.BENDPX)}var Y=f.selectAll("path.select-outline-"+k.id).data([1,2]);Y.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+k.id}).attr("transform","translate("+M+", "+T+")").attr("d",O+"Z");var X=f.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1}).attr("transform","translate("+M+", "+T+")").attr("d","M0,0Z");var W=[];var Q=u._uid+d.SELECTID;var J=[];for(q=0;q<l.calcdata.length;q++){H=l.calcdata[q];V=H[0].trace;if(V.visible!==true||!V._module||!V._module.selectPoints)continue;if(a.subplot){if(V.subplot===a.subplot||V.geo===a.subplot){W.push({_module:V._module,cd:H,xaxis:a.xaxes[0],yaxis:a.yaxes[0]})}}else if(V.type==="splom"&&V._xaxes[D[0]]&&V._yaxes[I[0]]){W.push({_module:V._module,cd:H,xaxis:a.xaxes[0],yaxis:a.yaxes[0]})}else{if(D.indexOf(V.xaxis)===-1)continue;if(I.indexOf(V.yaxis)===-1)continue;W.push({_module:V._module,cd:H,xaxis:c(l,V.xaxis),yaxis:c(l,V.yaxis)})}}function $(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return e.p2d(r[t])}}function K(e,t){return e-t}var ee;if(k.fillRangeItems){ee=k.fillRangeItems}else{if(n==="select"){ee=function(e,t){var r=e.range={};for(q=0;q<E.length;q++){var a=E[q];var n=a._id.charAt(0);r[a._id]=[a.p2d(t[n+"min"]),a.p2d(t[n+"max"])].sort(K)}}}else{ee=function(e,t,r){var a=e.lassoPoints={};for(q=0;q<E.length;q++){var n=E[q];a[n._id]=r.filtered.map($(n))}}}}a.moveFn=function(e,t){S=Math.max(0,Math.min(z,e+A));C=Math.max(0,Math.min(P,t+L));var r=Math.abs(S-A),i=Math.abs(C-L);if(n==="select"){var o=u.selectdirection;if(u.selectdirection==="any"){if(i<Math.min(r*.6,v))o="h";else if(r<Math.min(i*.6,v))o="v";else o="d"}else{o=u.selectdirection}if(o==="h"){j=[[A,0],[A,P],[S,P],[S,0]];j.xmin=Math.min(A,S);j.xmax=Math.max(A,S);j.ymin=Math.min(0,P);j.ymax=Math.max(0,P);X.attr("d","M"+j.xmin+","+(L-v)+"h-4v"+2*v+"h4Z"+"M"+(j.xmax-1)+","+(L-v)+"h4v"+2*v+"h-4Z")}else if(o==="v"){j=[[0,L],[0,C],[z,C],[z,L]];j.xmin=Math.min(0,z);j.xmax=Math.max(0,z);j.ymin=Math.min(L,C);j.ymax=Math.max(L,C);X.attr("d","M"+(A-v)+","+j.ymin+"v-4h"+2*v+"v4Z"+"M"+(A-v)+","+(j.ymax-1)+"v4h"+2*v+"v-4Z")}else if(o==="d"){j=[[A,L],[A,C],[S,C],[S,L]];j.xmin=Math.min(A,S);j.xmax=Math.max(A,S);j.ymin=Math.min(L,C);j.ymax=Math.max(L,C);X.attr("d","M0,0Z")}}else if(n==="lasso"){R.addPt([S,C]);j=R.filtered}if(a.polygons&&a.polygons.length){B=b(a.mergedPolygons,j,N);j.subtract=N;F=g(a.polygons.concat([j]))}else{B=[j];F=h(j)}var c=[];for(q=0;q<B.length;q++){var f=B[q];c.push(f.join("L")+"L"+f[0])}Y.attr("d","M"+c.join("M")+"Z");s.throttle(Q,d.SELECTDELAY,function(){J=[];var e,t=[],r;for(q=0;q<W.length;q++){U=W[q];r=U._module.selectPoints(U,F);t.push(r);e=_(r,U);if(J.length){for(var n=0;n<e.length;n++){J.push(e[n])}}else J=e}G={points:J};x(l,W,G);ee(G,j,R);a.gd.emit("plotly_selecting",G)})};a.clickFn=function(e,t){X.remove();s.done(Q).then(function(){s.clear(Q);if(e===2){Y.remove();for(q=0;q<W.length;q++){U=W[q];U._module.selectPoints(U,false)}x(l,W);l.emit("plotly_deselect",null)}else{l.emit("plotly_selected",undefined)}o.click(l,t)})};a.doneFn=function(){X.remove();s.done(Q).then(function(){s.clear(Q);a.gd.emit("plotly_selected",G);if(j&&a.polygons){j.subtract=N;a.polygons.push(j);a.mergedPolygons.length=0;[].push.apply(a.mergedPolygons,B)}})}}function x(e,t,r){var a,i,o,l;if(r){var s=r.points||[];for(a=0;a<t.length;a++){l=t[a].cd[0].trace;l.selectedpoints=[];l._input.selectedpoints=[]}for(a=0;a<s.length;a++){var u=s[a];var c=u.data;var d=u.fullData;if(u.pointIndices){[].push.apply(c.selectedpoints,u.pointIndices);[].push.apply(d.selectedpoints,u.pointIndices)}else{c.selectedpoints.push(u.pointIndex);d.selectedpoints.push(u.pointIndex)}}}else{for(a=0;a<t.length;a++){l=t[a].cd[0].trace;delete l.selectedpoints;delete l._input.selectedpoints}}var v={};for(a=0;a<t.length;a++){o=t[a];var p=o._module.name;if(v[p]){v[p].push(o)}else{v[p]=[o]}}var h=Object.keys(v).sort(f);for(a=0;a<h.length;a++){var g=v[h[a]];var y=g.length;var m=g[0];var x=m.cd[0].trace;var b=m._module;var _=b.styleOnSelect||b.style;if(n.traceIs(x,"regl")){var w=new Array(y);for(i=0;i<y;i++){w[i]=g[i].cd}_(e,w)}else{for(i=0;i<y;i++){_(e,g[i].cd)}}}}function b(e,t,r){var n;if(r){n=a.difference({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}n=a.union({regions:e,inverted:false},{regions:[t],inverted:false});return n.regions}function _(e,t){if(Array.isArray(e)){var r=t.cd;var a=t.cd[0].trace;for(var n=0;n<e.length;n++){e[n]=u(e[n],a,r)}}return e}function w(e){e.selectAll(".select-outline").remove()}t.exports={prepSelect:m,clearSelect:w}},{"../../components/color":50,"../../components/fx":92,"../../components/fx/helpers":89,"../../lib/polygon":181,"../../lib/throttle":191,"../../registry":261,"../sort_modules":252,"./axis_ids":216,"./constants":218,polybooljs:24}],231:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../../lib");var o=i.cleanNumber;var l=i.ms2DateTime;var s=i.dateTime2ms;var u=i.ensureNumber;var c=e("../../constants/numerical");var f=c.FP_SAFE;var d=c.BADNUM;var v=e("./constants");var p=e("./axis_ids");function h(e){return Math.pow(10,e)}t.exports=function e(t,r){r=r||{};var c=(t._id||"x").charAt(0);var g=10;function y(e,r){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&r&&t.range&&t.range.length===2){var a=t.range[0],n=t.range[1];return.5*(a+n-3*g*Math.abs(a-n))}else return d}function m(e,r,a){var i=s(e,a||t.calendar);if(i===d){if(n(e))i=s(new Date(+e));else return d}return i}function x(e,r,a){return l(e,r,a||t.calendar)}function b(e){return t._categories[Math.round(e)]}function _(e){if(e!==null&&e!==undefined){if(t._categoriesMap===undefined){t._categoriesMap={}}if(t._categoriesMap[e]!==undefined){return t._categoriesMap[e]}else{t._categories.push(e);var r=t._categories.length-1;t._categoriesMap[e]=r;return r}}return d}function w(e){if(t._categoriesMap){var r=t._categoriesMap[e];if(r!==undefined)return r}if(n(e))return+e}function k(e){if(!n(e))return d;return a.round(t._b+t._m*e,2)}function M(e){return(e-t._b)/t._m}t.c2l=t.type==="log"?y:u;t.l2c=t.type==="log"?h:u;t.l2p=k;t.p2l=M;t.c2p=t.type==="log"?function(e,t){return k(y(e,t))}:k;t.p2c=t.type==="log"?function(e){return h(M(e))}:M;if(["linear","-"].indexOf(t.type)!==-1){t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=o;t.c2d=t.c2r=t.l2d=t.l2r=u;t.d2p=t.r2p=function(e){return t.l2p(o(e))};t.p2d=t.p2r=M;t.cleanPos=u}else if(t.type==="log"){t.d2r=t.d2l=function(e,t){return y(o(e),t)};t.r2d=t.r2c=function(e){return h(o(e))};t.d2c=t.r2l=o;t.c2d=t.l2r=u;t.c2r=y;t.l2d=h;t.d2p=function(e,r){return t.l2p(t.d2r(e,r))};t.p2d=function(e){return h(M(e))};t.r2p=function(e){return t.l2p(o(e))};t.p2r=M;t.cleanPos=u}else if(t.type==="date"){t.d2r=t.r2d=i.identity;t.d2c=t.r2c=t.d2l=t.r2l=m;t.c2d=t.c2r=t.l2d=t.l2r=x;t.d2p=t.r2p=function(e,r,a){return t.l2p(m(e,0,a))};t.p2d=t.p2r=function(e,t,r){return x(M(e),t,r)};t.cleanPos=function(e){return i.cleanDate(e,d,t.calendar)}}else if(t.type==="category"){t.d2c=t.d2l=_;t.r2d=t.c2d=t.l2d=b;t.d2r=t.d2l_noadd=w;t.r2c=function(e){var r=w(e);return r!==undefined?r:t.fraction2r(.5)};t.l2r=t.c2r=u;t.r2l=w;t.d2p=function(e){return t.l2p(t.r2c(e))};t.p2d=function(e){return b(M(e))};t.r2p=t.d2p;t.p2r=M;t.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return u(e)}}t.fraction2r=function(e){var r=t.r2l(t.range[0]),a=t.r2l(t.range[1]);return t.l2r(r+e*(a-r))};t.r2fraction=function(e){var r=t.r2l(t.range[0]),a=t.r2l(t.range[1]);return(t.r2l(e)-r)/(a-r)};t.cleanRange=function(e,r){if(!r)r={};if(!e)e="range";var a=i.nestedProperty(t,e).get();var o,l;if(t.type==="date")l=i.dfltRange(t.calendar);else if(c==="y")l=v.DFLTRANGEY;else l=r.dfltRange||v.DFLTRANGEX;l=l.slice();if(!a||a.length!==2){i.nestedProperty(t,e).set(l);return}if(t.type==="date"){a[0]=i.cleanDate(a[0],d,t.calendar);a[1]=i.cleanDate(a[1],d,t.calendar)}for(o=0;o<2;o++){if(t.type==="date"){if(!i.isDateTime(a[o],t.calendar)){t[e]=l;break}if(t.r2l(a[0])===t.r2l(a[1])){var s=i.constrain(t.r2l(a[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);a[0]=t.l2r(s-1e3);a[1]=t.l2r(s+1e3);break}}else{if(!n(a[o])){if(n(a[1-o])){a[o]=a[1-o]*(o?10:.1)}else{t[e]=l;break}}if(a[o]<-f)a[o]=-f;else if(a[o]>f)a[o]=f;if(a[0]===a[1]){var u=Math.max(1,Math.abs(a[0]*1e-6));a[0]-=u;a[1]+=u}}}};t.setScale=function(e){var a=r._size;if(!t._categories)t._categories=[];if(!t._categoriesMap)t._categoriesMap={};if(t.overlaying){var n=p.getFromId({_fullLayout:r},t.overlaying);t.domain=n.domain}var i=e&&t._r?"_r":"range",o=t.calendar;t.cleanRange(i);var l=t.r2l(t[i][0],o),s=t.r2l(t[i][1],o);if(c==="y"){t._offset=a.t+(1-t.domain[1])*a.h;t._length=a.h*(t.domain[1]-t.domain[0]);t._m=t._length/(l-s);t._b=-t._m*s}else{t._offset=a.l+t.domain[0]*a.w;t._length=a.w*(t.domain[1]-t.domain[0]);t._m=t._length/(s-l);t._b=-t._m*l}if(!isFinite(t._m)||!isFinite(t._b)){r._replotting=false;throw new Error("Something went wrong with axis scaling")}};t.makeCalcdata=function(e,r){var a,n,o,l;var s=t.type;var u=s==="date"&&e[r+"calendar"];if(r in e){a=e[r];l=e._length||a.length;if(i.isTypedArray(a)&&(s==="linear"||s==="log")){if(l===a.length){return a}else if(a.subarray){return a.subarray(0,l)}}n=new Array(l);for(o=0;o<l;o++){n[o]=t.d2c(a[o],0,u)}}else{var c=r+"0"in e?t.d2c(e[r+"0"],0,u):0;var f=e["d"+r]?Number(e["d"+r]):1;a=e[{x:"y",y:"x"}[r]];l=e._length||a.length;n=new Array(l);for(o=0;o<l;o++){n[o]=c+o*f}}return n};t.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&n(t.r2l(e[0]))&&n(t.r2l(e[1]))};t.isPtWithinRange=function(e,r){var a=t.c2l(e[c],null,r);var n=t.r2l(t.range[0]);var i=t.r2l(t.range[1]);if(n<i){return n<=a&&a<=i}else{return i<=a&&a<=n}};t.clearCalc=function(){t._min=[];t._max=[];t._categories=(t._initialCategories||[]).slice();t._categoriesMap={};for(var e=0;e<t._categories.length;e++){t._categoriesMap[t._categories[e]]=e}};var T=r._d3locale;if(t.type==="date"){t._dateFormat=T?T.timeFormat.utc:a.time.format.utc;t._extraFormat=r._extraFormat}t._separators=r.separators;t._numFormat=T?T.numberFormat:a.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":151,"../../lib":169,"./axis_ids":216,"./constants":218,d3:15,"fast-isnumeric":18}],232:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./layout_attributes");var i=e("../array_container_defaults");t.exports=function e(t,r,s,u,c){var f=o(t);var d=s("tickprefix");if(d)s("showtickprefix",f);var v=s("ticksuffix",c.tickSuffixDflt);if(v)s("showticksuffix",f);var p=s("showticklabels");if(p){var h=c.font||{};var g=r.color!==n.color.dflt?r.color:h.color;a.coerceFont(s,"tickfont",{family:h.family,size:h.size,color:g});s("tickangle");if(u!=="category"){var y=s("tickformat");var m=t.tickformatstops;if(Array.isArray(m)&&m.length){i(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l})}if(!y&&u!=="date"){s("showexponent",f);s("exponentformat");s("separatethousands")}}}};function o(e){var t=["showexponent","showtickprefix","showticksuffix"],r=t.filter(function(t){return e[t]!==undefined}),a=function(t){return e[t]===e[r[0]]};if(r.every(a)||r.length===1){return e[r[0]]}}function l(e,t){function r(r,i){return a.coerce(e,t,n.tickformatstops,r,i)}var i=r("enabled");if(i){r("dtickrange");r("value")}}},{"../../lib":169,"../array_container_defaults":209,"./layout_attributes":225}],233:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./layout_attributes");t.exports=function e(t,r,i,o){var l=a.coerce2(t,r,n,"ticklen"),s=a.coerce2(t,r,n,"tickwidth"),u=a.coerce2(t,r,n,"tickcolor",r.color),c=i("ticks",o.outerTicks||l||s||u?"outside":"");if(!c){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":169,"./layout_attributes":225}],234:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../../constants/numerical").ONEDAY;t.exports=function e(t,r,o,l){var s;if(t.tickmode==="array"&&(l==="log"||l==="date")){s=r.tickmode="auto"}else{var u=Array.isArray(t.tickvals)?"array":t.dtick?"linear":"auto";s=o("tickmode",u)}if(s==="auto")o("nticks");else if(s==="linear"){var c=l==="date"?i:1;var f=o("dtick",c);if(a(f)){r.dtick=f>0?Number(f):c}else if(typeof f!=="string"){r.dtick=c}else{var d=f.charAt(0),v=f.substr(1);v=a(v)?Number(v):0;if(v<=0||!(l==="date"&&d==="M"&&v===Math.round(v)||l==="log"&&d==="L"||l==="log"&&d==="D"&&(v===1||v===2))){r.dtick=c}}var p=l==="date"?n.dateTick0(r.calendar):0;var h=o("tick0",p);if(l==="date"){r.tick0=n.cleanDate(h,p)}else if(a(h)&&f!=="D1"&&f!=="D2"){r.tick0=Number(h)}else{r.tick0=p}}else{var g=o("tickvals");if(g===undefined)r.tickmode="auto";else o("ticktext")}}},{"../../constants/numerical":151,"../../lib":169,"fast-isnumeric":18}],235:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../components/drawing");var o=e("./axes");var l=e("./constants").attrRegex;t.exports=function e(t,r,s,u){var c=t._fullLayout;var f=[];function d(e){var t,r,a,n,i;var o={};for(t in e){r=t.split(".");a=r[0].match(l);if(a){var s=t.charAt(0);var u=r[0];n=c[u];i={};if(Array.isArray(e[t])){i.to=e[t].slice(0)}else{if(Array.isArray(e[t].range)){i.to=e[t].range.slice(0)}}if(!i.to)continue;i.axisName=u;i.length=n._length;f.push(s);o[s]=i}}return o}function v(e,t,r){var a;var n=e._plots;var i=[];var o,l;for(a in n){var s=n[a];if(i.indexOf(s)!==-1)continue;var u=s.xaxis._id;var c=s.yaxis._id;var f=s.xaxis.range;var d=s.yaxis.range;s.xaxis._r=s.xaxis.range.slice();s.yaxis._r=s.yaxis.range.slice();if(r[u]){o=r[u].to}else{o=f}if(r[c]){l=r[c].to}else{l=d}if(f[0]===o[0]&&f[1]===o[1]&&d[0]===l[0]&&d[1]===l[1])continue;if(t.indexOf(u)!==-1||t.indexOf(c)!==-1){i.push(s)}}return i}var p=d(r);var h=Object.keys(p);var g=v(c,h,p);function y(){function e(e,r,a){for(var n=0;n<e.length;n++){r(t,n);if(a)return}}e(c.annotations||[],n.getComponentMethod("annotations","drawOne"));e(c.shapes||[],n.getComponentMethod("shapes","drawOne"));e(c.images||[],n.getComponentMethod("images","draw"),true)}if(!g.length){y();return false}function m(e,r){var a=[],i;a=[e._id,r._id];for(i=0;i<a.length;i++){o.doTicksSingle(t,a[i],true)}function l(e,r,n){for(i=0;i<e.length;i++){var o=e[i];if(a.indexOf(o.xref)!==-1||a.indexOf(o.yref)!==-1){r(t,i)}if(n)return}}l(c.annotations||[],n.getComponentMethod("annotations","drawOne"));l(c.shapes||[],n.getComponentMethod("shapes","drawOne"));l(c.images||[],n.getComponentMethod("images","draw"),true)}function x(e){var t=e.xaxis;var r=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(i.setTranslate,0,0).call(i.setScale,1,1);e.plot.call(i.setTranslate,t._offset,r._offset).call(i.setScale,1,1);var a=e.plot.selectAll(".scatterlayer .trace");a.selectAll(".point").call(i.setPointGroupScale,1,1);a.selectAll(".textpoint").call(i.setTextPointsScale,1,1);a.call(i.hideOutsideRangePoints,e)}function b(e,r){var a,n,o;var l=p[e.xaxis._id];var s=p[e.yaxis._id];var u=[];if(l){a=t._fullLayout[l.axisName];n=a._r;o=l.to;u[0]=(n[0]*(1-r)+r*o[0]-n[0])/(n[1]-n[0])*e.xaxis._length;var c=n[1]-n[0];var f=o[1]-o[0];a.range[0]=n[0]*(1-r)+r*o[0];a.range[1]=n[1]*(1-r)+r*o[1];u[2]=e.xaxis._length*(1-r+r*f/c)}else{u[0]=0;u[2]=e.xaxis._length}if(s){a=t._fullLayout[s.axisName];n=a._r;o=s.to;u[1]=(n[1]*(1-r)+r*o[1]-n[1])/(n[0]-n[1])*e.yaxis._length;var d=n[1]-n[0];var v=o[1]-o[0];a.range[0]=n[0]*(1-r)+r*o[0];a.range[1]=n[1]*(1-r)+r*o[1];u[3]=e.yaxis._length*(1-r+r*v/d)}else{u[1]=0;u[3]=e.yaxis._length}m(e.xaxis,e.yaxis);var h=e.xaxis;var g=e.yaxis;var y=!!l;var x=!!s;var b=y?h._length/u[2]:1,_=x?g._length/u[3]:1;var w=y?u[0]:0,k=x?u[1]:0;var M=y?u[0]/u[2]*h._length:0,T=x?u[1]/u[3]*g._length:0;var A=h._offset-M,L=g._offset-T;e.clipRect.call(i.setTranslate,w,k).call(i.setScale,1/b,1/_);e.plot.call(i.setTranslate,A,L).call(i.setScale,b,_);i.setPointGroupScale(e.zoomScalePts,1/b,1/_);i.setTextPointsScale(e.zoomScaleTxt,1/b,1/_)}var _;if(u){_=u()}function w(){var e={};for(var r=0;r<h.length;r++){var a=t._fullLayout[p[h[r]].axisName];var i=p[h[r]].to;e[a._name+".range[0]"]=i[0];e[a._name+".range[1]"]=i[1];a.range=i.slice()}_&&_();return n.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){x(g[e])}})}function k(){var e={};for(var r=0;r<h.length;r++){var a=t._fullLayout[h[r]+"axis"];e[a._name+".range[0]"]=a.range[0];e[a._name+".range[1]"]=a.range[1];a.range=a._r.slice()}return n.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){x(g[e])}})}var M,T,A;var L=a.ease(s.easing);t._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(A);A=null;return k()});function S(){T=Date.now();var e=Math.min(1,(T-M)/s.duration);var t=L(e);for(var r=0;r<g.length;r++){b(g[r],t)}if(T-M>s.duration){w();A=window.cancelAnimationFrame(S)}else{A=window.requestAnimationFrame(S)}}M=Date.now();A=window.requestAnimationFrame(S);return Promise.resolve()}},{"../../components/drawing":75,"../../registry":261,"./axes":213,"./constants":218,d3:15}],236:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("./axis_autotype");var i=e("./axis_ids").name2id;t.exports=function e(t,r,a,n,l){if(l){r._name=l;r._id=i(l)}var s=a("type");if(s==="-"){o(r,n);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var i=r.charAt(0);if(r.indexOf("scene")!==-1)r=i;var o=l(t,r,i);if(!o)return;if(o.type==="histogram"&&i==={v:"y",h:"x"}[o.orientation||"v"]){e.type="linear";return}var c=i+"calendar";var f=o[c];var d;if(u(o,i)){var v=s(o);var p=[];for(d=0;d<t.length;d++){var h=t[d];if(!a.traceIs(h,"box-violin")||(h[i+"axis"]||i)!==r)continue;if(h[v]!==undefined)p.push(h[v][0]);else if(h.name!==undefined)p.push(h.name);else p.push("text");if(h[c]!==f)f=undefined}e.type=n(p,f)}else if(o.type==="splom"){var g=o.dimensions;for(d=0;d<g.length;d++){var y=g[d];if(y.visible){e.type=n(y.values,f);break}}}else{e.type=n(o[i]||[o[i+"0"]],f)}}function l(e,t,r){for(var a=0;a<e.length;a++){var n=e[a];if(n.type==="splom"&&n._length>0&&n["_"+r+"axes"][t]){return n}if((n[r+"axis"]||r)===t){if(u(n,r)){return n}else if((n[r]||[]).length||n[r+"0"]){return n}}}}function s(e){return{v:"x",h:"y"}[e.orientation||"v"]}function u(e,t){var r=s(e),n=a.traceIs(e,"box-violin"),i=a.traceIs(e._fullInput||{},"candlestick");return n&&!i&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":261,"./axis_autotype":214,"./axis_ids":216}],237:[function(e,t,r){"use strict";var a=e("../registry");var n=e("../lib");r.manageCommandObserver=function(e,t,a,o){var l={};var s=true;if(t&&t._commandObserver){l=t._commandObserver}if(!l.cache){l.cache={}}l.lookupTable={};var u=r.hasSimpleAPICommandBindings(e,a,l.lookupTable);if(t&&t._commandObserver){if(!u){if(t._commandObserver.remove){t._commandObserver.remove();t._commandObserver=null;return l}}else{return l}}if(u){i(e,u,l.cache);l.check=function t(){if(!s)return;var r=i(e,u,l.cache);if(r.changed&&o){if(l.lookupTable[r.value]!==undefined){l.disable();Promise.resolve(o({value:r.value,type:u.type,prop:u.prop,traces:u.traces,index:l.lookupTable[r.value]})).then(l.enable,l.enable)}}return r.changed};var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var f=0;f<c.length;f++){e._internalOn(c[f],l.check)}l.remove=function(){for(var t=0;t<c.length;t++){e._removeInternalListener(c[t],l.check)}}}else{n.log("Unable to automatically bind plot updates to API command");l.lookupTable={};l.remove=function(){}}l.disable=function e(){s=false};l.enable=function e(){s=true};if(t){t._commandObserver=l}return l};r.hasSimpleAPICommandBindings=function(e,t,a){var n;var i=t.length;var o;for(n=0;n<i;n++){var l;var s=t[n];var u=s.method;var c=s.args;if(!Array.isArray(c))c=[];if(!u){return false}var f=r.computeAPICommandBindings(e,u,c);if(f.length!==1){return false}if(!o){o=f[0];if(Array.isArray(o.traces)){o.traces.sort()}}else{l=f[0];if(l.type!==o.type){return false}if(l.prop!==o.prop){return false}if(Array.isArray(o.traces)){if(Array.isArray(l.traces)){l.traces.sort();for(var d=0;d<o.traces.length;d++){if(o.traces[d]!==l.traces[d]){return false}}}else{return false}}else{if(l.prop!==o.prop){return false}}}l=f[0];var v=l.value;if(Array.isArray(v)){if(v.length===1){v=v[0]}else{return false}}if(a){a[v]=n}}return o};function i(e,t,r){var a,i,o;var l=false;if(t.type==="data"){a=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){a=e._fullLayout}else{return false}i=n.nestedProperty(a,t.prop).get();o=r[t.type]=r[t.type]||{};if(o.hasOwnProperty(t.prop)){if(o[t.prop]!==i){l=true}}o[t.prop]=i;return{changed:l,value:i}}r.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=a.apiMethodRegistry[t];var o=[e];if(!Array.isArray(r))r=[];for(var l=0;l<r.length;l++){o.push(r[l])}return i.apply(null,o).catch(function(e){n.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};r.computeAPICommandBindings=function(e,t,r){var a;if(!Array.isArray(r))r=[];switch(t){case"restyle":a=s(e,r);break;case"relayout":a=l(e,r);break;case"update":a=s(e,[r[0],r[2]]).concat(l(e,[r[1]]));break;case"animate":a=o(e,r);break;default:a=[]}return a};function o(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function l(e,t){var r=[];var a=t[0];var i={};if(typeof a==="string"){i[a]=t[1]}else if(n.isPlainObject(a)){i=a}else{return r}u(i,function(e,t,a){r.push({type:"layout",prop:e,value:a})},"",0);return r}function s(e,t){var r,a,i,o;var l=[];a=t[0];i=t[1];r=t[2];o={};if(typeof a==="string"){o[a]=i}else if(n.isPlainObject(a)){o=a;if(r===undefined){r=i}}else{return l}if(r===undefined){r=null}u(o,function(t,a,n){var i;if(Array.isArray(n)){var o=Math.min(n.length,e.data.length);if(r){o=Math.min(o,r.length)}i=[];for(var s=0;s<o;s++){i[s]=r?r[s]:s}}else{i=r?r.slice(0):null}if(i===null){if(Array.isArray(n)){n=n[0]}}else if(Array.isArray(i)){if(!Array.isArray(n)){var u=n;n=[];for(var c=0;c<i.length;c++){n[c]=u}}n.length=Math.min(i.length,n.length)}l.push({type:"data",prop:t,traces:i,value:n})},"",0);return l}function u(e,t,r,a){Object.keys(e).forEach(function(i){var o=e[i];if(i[0]==="_")return;var l=r+(a>0?".":"")+i;if(n.isPlainObject(o)){u(o,t,l,a+1)}else{t(l,i,o)}})}},{"../lib":169,"../registry":261}],238:[function(e,t,r){"use strict";var a=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var n=e.name?e.name+" ":"";var i=e.trace?"trace ":"subplot ";var o=t.description?" "+t.description:"";var l={x:a({},r,{}),y:a({},r,{}),editType:e.editType};if(!e.noGridCell){l.row={valType:"integer",min:0,dflt:0,editType:e.editType};l.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return l};r.defaults=function(e,t,r,a){var n=a&&a.x||[0,1];var i=a&&a.y||[0,1];var o=t.grid;if(o){var l=r("domain.column");if(l!==undefined){if(l<o.columns)n=o._domains.x[l];else delete e.domain.column}var s=r("domain.row");if(s!==undefined){if(s<o.rows)i=o._domains.y[s];else delete e.domain.row}}r("domain.x",n);r("domain.y",i)}},{"../lib/extend":163}],239:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var a={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){a.family.arrayOk=true;a.size.arrayOk=true;a.color.arrayOk=true}return a}},{}],240:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],241:[function(e,t,r){"use strict";var a=e("../registry");var n=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var n=a.subplotsRegistry[t];if(!n)return[];var i=n.attr;var o=[];for(var l=0;l<e.length;l++){var s=e[l];var u=s[0].trace;if(u[i]===r)o.push(s)}return o};r.getModuleCalcData=function(e,t){var r=[];var n=[];var i;if(typeof t==="string"){i=a.getModule(t).plot}else if(typeof t==="function"){i=t}else{i=t.plot}if(!i){return[r,e]}for(var o=0;o<e.length;o++){var l=e[o];var s=l[0].trace;if(s.visible!==true)continue;if(s._module.plot===i){r.push(l)}else{n.push(l)}}return[r,n]};r.getSubplotData=function e(t,r,i){if(!a.subplotsRegistry[r])return[];var o=a.subplotsRegistry[r].attr;var l=[];var s,u,c;if(r==="gl2d"){var f=i.match(n);u="x"+f[1];c="y"+f[2]}for(var d=0;d<t.length;d++){s=t[d];if(r==="gl2d"&&a.traceIs(s,"gl2d")){if(s[o[0]]===u&&s[o[1]]===c){l.push(s)}}else{if(s[o]===i)l.push(s)}}return l};r.getUidsFromCalcData=function(e){var t={};for(var r=0;r<e.length;r++){var a=e[r][0].trace;t[a.uid]=1}return t}},{"../registry":261,"./cartesian/constants":218}],242:[function(e,t,r){"use strict";function a(e,t){var r=[0,0,0,0];var a,n;for(a=0;a<4;++a){for(n=0;n<4;++n){r[n]+=e[4*a+n]*t[a]}}return r}function n(e,t){var r=a(e.projection,a(e.view,a(e.model,[t[0],t[1],t[2],1])));return r}t.exports=n},{}],243:[function(e,t,r){"use strict";var a=e("./font_attributes");var n=e("../components/color/attributes");var i=a({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif';i.size.dflt=12;i.color.dflt=n.defaultLine;t.exports={font:i,title:{valType:"string",editType:"layoutstyle"},titlefont:a({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},template:{valType:"any",editType:"calc"}}},{"../components/color/attributes":49,"./font_attributes":239}],244:[function(e,t,r){"use strict";t.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],245:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("../registry");var o=e("../plot_api/plot_schema");var l=e("../plot_api/plot_template");var s=e("../lib");var u=e("../components/color");var c=e("../constants/numerical").BADNUM;var f=e("../plots/cartesian/axis_ids");var d=e("./sort_modules").sortBasePlotModules;var v=e("./animation_attributes");var p=e("./frame_attributes");var h=s.relinkPrivateKeys;var g=s._;var y=t.exports={};s.extendFlat(y,i);y.attributes=e("./attributes");y.attributes.type.values=y.allTypes;y.fontAttrs=e("./font_attributes");y.layoutAttributes=e("./layout_attributes");y.fontWeight="normal";var m=y.transformsRegistry;var x=e("./command");y.executeAPICommand=x.executeAPICommand;y.computeAPICommandBindings=x.computeAPICommandBindings;y.manageCommandObserver=x.manageCommandObserver;y.hasSimpleAPICommandBindings=x.hasSimpleAPICommandBindings;y.redrawText=function(e){e=s.getGraphDiv(e);if(e.data&&e.data[0]&&e.data[0].r)return;return new Promise(function(t){setTimeout(function(){i.getComponentMethod("annotations","draw")(e);i.getComponentMethod("legend","draw")(e);(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()});t(y.previousPromises(e))},300)})};y.resize=function(e){e=s.getGraphDiv(e);return new Promise(function(t,r){function a(e){var t=window.getComputedStyle(e).display;return!t||t==="none"}if(!e||a(e)){r(new Error("Resize must be passed a displayed plot div element."))}if(e._redrawTimer)clearTimeout(e._redrawTimer);e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||a(e)){t(e);return}delete e.layout.width;delete e.layout.height;var r=e.changed;e.autoplay=true;i.call("relayout",e,{autosize:true}).then(function(){e.changed=r;t(e)})},100)})};y.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};y.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=s.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var e=a.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var n=r.node();var i={y:t._paper.attr("height")-9};if(document.body.contains(n)&&n.getComputedTextLength()>=t.width-20){i["text-anchor"]="start";i.x=5}else{i["text-anchor"]="end";i.x=t._paper.attr("width")-7}r.attr(i);var o=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),c=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)b(e,o);l.text(o.text()&&c.text()?" - ":"")};function b(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){y.sendDataToCloud(e)})}else{var a=window.location.pathname.split("/");var n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+a[2].split(".")[0]+"/"+a[1]+n})}}y.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;var r=a.select(e).append("div").attr("id","hiddenform").style("display","none");var n=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var i=n.append("input").attr({type:"text",name:"data"});i.node().value=y.graphJson(e,false,"keepdata");n.node().submit();r.remove();e.emit("plotly_afterexport");return false};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var w=["year","month","dayMonth","dayMonthYear"];y.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var a=e._fullLayout||{};if(a._skipDefaults){delete a._skipDefaults;return}var n=e._fullLayout={};var o=e.layout||{};var l=e._fullData||[];var u=e._fullData=[];var c=e.data||[];var v=e.calcdata||[];var p=e._context||{};var m;if(!e._transitionData)y.createTransitionData(e);n._dfltTitle={plot:g(e,"Click to enter Plot title"),x:g(e,"Click to enter X axis title"),y:g(e,"Click to enter Y axis title"),colorbar:g(e,"Click to enter Colorscale title"),annotation:g(e,"new text")};n._traceWord=g(e,"trace");var x=A(e,_);n._mapboxAccessToken=p.mapboxAccessToken;if(a._initialAutoSizeIsDone){var b=a.width,M=a.height;y.supplyLayoutGlobalDefaults(o,n,x);if(!o.width)n.width=b;if(!o.height)n.height=M;y.sanitizeMargins(n)}else{y.supplyLayoutGlobalDefaults(o,n,x);var S=!o.width||!o.height,C=n.autosize,O=p.autosizable,z=S&&(C||O);if(z)y.plotAutoSize(e,o,n);else if(S)y.sanitizeMargins(n);if(!C&&S){o.width=n.width;o.height=n.height}}n._d3locale=L(x,n.separators);n._extraFormat=A(e,w);n._initialAutoSizeIsDone=true;n._dataLength=c.length;n._modules=[];n._basePlotModules=[];var P=n._subplots=T();var D=n._splomAxes={x:{},y:{}};var I=n._splomSubplots={};n._splomGridDflt={};n._requestRangeslider={};n._traceUids=k(l,c);n._globalTransforms=(e._context||{}).globalTransforms;y.supplyDataDefaults(c,u,o,n);var E=Object.keys(D.x);var N=Object.keys(D.y);if(E.length>1&&N.length>1){i.getComponentMethod("grid","sizeDefaults")(o,n);for(m=0;m<E.length;m++){s.pushUnique(P.xaxis,E[m])}for(m=0;m<N.length;m++){s.pushUnique(P.yaxis,N[m])}for(var R in I){s.pushUnique(P.cartesian,R)}}n._has=y._hasPlotType.bind(n);var F=n._modules;for(m=0;m<F.length;m++){var B=F[m];if(B.cleanData)B.cleanData(u)}if(l.length===u.length){for(m=0;m<u.length;m++){h(u[m],l[m])}}y.supplyLayoutModuleDefaults(o,n,u,e._transitionData);n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&E.length>15&&N.length>15&&n.shapes.length===0&&n.images.length===0;n._hasCartesian=n._has("cartesian");n._hasGeo=n._has("geo");n._hasGL3D=n._has("gl3d");n._hasGL2D=n._has("gl2d");n._hasTernary=n._has("ternary");n._hasPie=n._has("pie");y.linkSubplots(u,n,l,a);y.cleanPlot(u,n,l,a,v);h(n,a);y.doAutoMargin(e);var j=f.list(e);for(m=0;m<j.length;m++){var q=j[m];q.setScale()}if(!r&&v.length===u.length){y.supplyDefaultsUpdateCalc(v,u)}n._basePlotModules.sort(d)};y.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var a=t[r];var n=e[r][0];if(n&&n.trace){var i=n.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var l,u,c;for(l=0;l<o.length;l++){u=o[l];c=s.nestedProperty(i,u).get().slice();s.nestedProperty(a,u).set(c)}}n.trace=a}}};function k(e,t){var r=t.length;var a=[];var n,i;for(n=0;n<e.length;n++){var o=e[n]._fullInput;if(o!==i)a.push(o);i=o}var l=a.length;var u=new Array(r);var c={};function f(e,t){u[t]=e;c[e]=1}function d(e,t){if(e&&typeof e==="string"&&!c[e]){f(e,t);return true}}for(n=0;n<r;n++){if(d(t[n].uid,n))continue;if(n<l&&d(a[n].uid,n))continue;f(s.randstr(c),n)}return u}var M;function T(){var e={};var t,r;if(!M){M=[];var a=i.subplotsRegistry;for(var n in a){var o=a[n];var l=o.attr;if(l){M.push(n);if(Array.isArray(l)){for(r=0;r<l.length;r++){s.pushUnique(M,l[r])}}}}}for(t=0;t<M.length;t++){e[M[t]]=[]}return e}function A(e,t){var r=e._context.locale;if(!r)r==="en-US";var a=false;var n={};function o(e){var r=true;for(var i=0;i<t.length;i++){var o=t[i];if(!n[o]){if(e[o]){n[o]=e[o]}else r=false}}if(r)a=true}for(var l=0;l<2;l++){var s=e._context.locales;for(var u=0;u<2;u++){var c=(s[r]||{}).format;if(c){o(c);if(a)break}s=i.localeRegistry}var f=r.split("-")[0];if(a||f===r)break;r=f}if(!a)o(i.localeRegistry.en.format);return n}function L(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return a.locale(e)}y.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};y._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var a=this._modules||[];for(t=0;t<a.length;t++){var n=a[t].name;if(n===e)return true;var o=i.modules[n];if(o&&o.categories[e])return true}return false};y.cleanPlot=function(e,t,r,a,n){var i,o;var l=a._basePlotModules||[];for(i=0;i<l.length;i++){var s=l[i];if(s.clean){s.clean(e,t,r,a,n)}}var u=a._has&&a._has("gl");var c=t._has&&t._has("gl");if(u&&!c){if(a._glcontainer!==undefined){a._glcontainer.selectAll(".gl-canvas").remove();a._glcontainer.selectAll(".no-webgl").remove();a._glcanvas=null}}var f=!!a._infolayer;e:for(i=0;i<r.length;i++){var d=r[i],v=d.uid;for(o=0;o<e.length;o++){var p=e[o];if(v===p.uid)continue e}if(f){a._infolayer.select(".cb"+v).remove()}}if(a._zoomlayer){a._zoomlayer.selectAll(".select-outline").remove()}};y.linkSubplots=function(e,t,r,a){var n=a._plots||{};var i=t._plots={};var o=t._subplots;var l={_fullData:e,_fullLayout:t};var s=o.cartesian.concat(o.gl2d||[]);var u,c,d,v;for(u=0;u<s.length;u++){d=s[u];var p=n[d];var h=f.getFromId(l,d,"x");var g=f.getFromId(l,d,"y");var y;if(p){y=i[d]=p;if(y.xaxis.layer!==h.layer){y.xlines.attr("d",null);y.xaxislayer.selectAll("*").remove()}if(y.yaxis.layer!==g.layer){y.ylines.attr("d",null);y.yaxislayer.selectAll("*").remove()}}else{y=i[d]={};y.id=d}y.xaxis=h;y.yaxis=g;y._hasClipOnAxisFalse=false;for(c=0;c<e.length;c++){var m=e[c];if(m.xaxis===y.xaxis._id&&m.yaxis===y.yaxis._id&&m.cliponaxis===false){y._hasClipOnAxisFalse=true;break}}}var x=f.list(l,null,true);for(u=0;u<x.length;u++){v=x[u];var b=null;if(v.overlaying){b=f.getFromId(l,v.overlaying);if(b&&b.overlaying){v.overlaying=false;b=null}}v._mainAxis=b||v;if(b)v.domain=b.domain.slice();v._anchorAxis=v.anchor==="free"?null:f.getFromId(l,v.anchor)}};y.clearExpandedTraceDefaultColors=function(e){var t,r,a;function n(e,a,n,i){r[i]=a;r.length=i+1;if(e.valType==="color"&&e.dflt===undefined){t.push(r.join("."))}}r=[];t=e._module._colorAttrs;if(!t){e._module._colorAttrs=t=[];o.crawl(e._module.attributes,n)}for(a=0;a<t.length;a++){var i=s.nestedProperty(e,"_input."+t[a]);if(!i.get()){s.nestedProperty(e,t[a]).set(null)}}};y.supplyDataDefaults=function(e,t,r,a){var n=a._modules;var o=a._basePlotModules;var u=0;var c=0;var f,d,v;a._transformModules=[];function p(e){t.push(e);var r=e._module;if(!r)return;if(e.visible===true)s.pushUnique(n,r);s.pushUnique(o,e._module.basePlotModule);u++;if(e._input.visible!==false)c++}var g={};var m=[];var x=(r.template||{}).data||{};var b=l.traceTemplater(x);for(f=0;f<e.length;f++){v=e[f];d=b.newTrace(v);d.uid=a._traceUids[f];y.supplyTraceDefaults(v,d,c,a,f);d.uid=a._traceUids[f];d.index=f;d._input=v;d._expandedIndex=u;if(d.transforms&&d.transforms.length){var _=C(d,t,r,a);for(var w=0;w<_.length;w++){var k=_[w];var M={_template:d._template,type:d.type,uid:d.uid+w};y.supplyTraceDefaults(k,M,u,a,f);h(M,k);M.index=f;M._input=v;M._fullInput=d;M._expandedIndex=u;M._expandedInput=k;p(M)}}else{d._fullInput=d;d._expandedInput=d;p(d)}if(i.traceIs(d,"carpetAxis")){g[d.carpet]=d}if(i.traceIs(d,"carpetDependent")){m.push(f)}}for(f=0;f<m.length;f++){d=t[m[f]];if(!d.visible)continue;var T=g[d.carpet];d._carpet=T;if(!T||!T.visible){d.visible=false;continue}d.xaxis=T.xaxis;d.yaxis=T.yaxis}};y.supplyAnimationDefaults=function(e){e=e||{};var t;var r={};function a(t,a){return s.coerce(e||{},r,v,t,a)}a("mode");a("direction");a("fromcurrent");if(Array.isArray(e.frame)){r.frame=[];for(t=0;t<e.frame.length;t++){r.frame[t]=y.supplyAnimationFrameDefaults(e.frame[t]||{})}}else{r.frame=y.supplyAnimationFrameDefaults(e.frame||{})}if(Array.isArray(e.transition)){r.transition=[];for(t=0;t<e.transition.length;t++){r.transition[t]=y.supplyAnimationTransitionDefaults(e.transition[t]||{})}}else{r.transition=y.supplyAnimationTransitionDefaults(e.transition||{})}return r};y.supplyAnimationFrameDefaults=function(e){var t={};function r(r,a){return s.coerce(e||{},t,v.frame,r,a)}r("duration");r("redraw");return t};y.supplyAnimationTransitionDefaults=function(e){var t={};function r(r,a){return s.coerce(e||{},t,v.transition,r,a)}r("duration");r("easing");return t};y.supplyFrameDefaults=function(e){var t={};function r(r,a){return s.coerce(e,t,p,r,a)}r("group");r("name");r("traces");r("baseframe");r("data");r("layout");return t};y.supplyTraceDefaults=function(e,t,r,a,n){var o=a.colorway||u.defaults;var l=o[r%o.length];var c;function f(r,a){return s.coerce(e,t,y.attributes,r,a)}var d=f("visible");f("type");f("name",a._traceWord+" "+n);var v=y.getModule(t);t._module=v;if(v){var p=v.basePlotModule;var h=p.attr;var g=p.attributes;if(h&&g){var m=a._subplots;var x="";if(p.name!=="gl2d"||d){if(Array.isArray(h)){for(c=0;c<h.length;c++){var b=h[c];var _=s.coerce(e,t,g,b);if(m[b])s.pushUnique(m[b],_);x+=_}}else{x=s.coerce(e,t,g,h)}if(m[p.name]){s.pushUnique(m[p.name],x)}}}}if(d){f("customdata");f("ids");if(i.traceIs(t,"showLegend")){f("showlegend");f("legendgroup")}i.getComponentMethod("fx","supplyDefaults")(e,t,l,a);if(v){v.supplyDefaults(e,t,l,a);s.coerceHoverinfo(e,t,a)}if(!i.traceIs(t,"noOpacity"))f("opacity");if(i.traceIs(t,"notLegendIsolatable")){t.visible=!!t.visible}if(v&&v.selectPoints){f("selectedpoints")}y.supplyTransformDefaults(e,t,a)}return t};function S(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var a=m[t[r].type];if(a&&a.makesData)return true}}return false}y.supplyTransformDefaults=function(e,t,r){if(!(t._length||S(e)))return;var a=r._globalTransforms||[];var n=r._transformModules||[];if(!Array.isArray(e.transforms)&&a.length===0)return;var i=e.transforms||[],o=a.concat(i),l=t.transforms=[];for(var u=0;u<o.length;u++){var c=o[u],f=c.type,d=m[f],v;var p=!(c._module&&c._module===d),h=d&&typeof d.transform==="function";if(!d)s.warn("Unrecognized transform type "+f+".");if(d&&d.supplyDefaults&&(p||h)){v=d.supplyDefaults(c,t,r,e);v.type=f;v._module=d;s.pushUnique(n,d)}else{v=s.extendFlat({},c)}l.push(v)}};function C(e,t,r,a){var n=e.transforms,i=[e];for(var o=0;o<n.length;o++){var l=n[o],s=m[l.type];if(s&&s.transform){i=s.transform(i,{transform:l,fullTrace:e,fullData:t,layout:r,fullLayout:a,transformIndex:o})}}return i}y.supplyLayoutGlobalDefaults=function(e,t,r){function a(r,a){return s.coerce(e,t,y.layoutAttributes,r,a)}var n=e.template;if(s.isPlainObject(n)){t.template=n;t._template=n.layout;t._dataTemplate=n.data}var o=s.coerceFont(a,"font");a("title",t._dfltTitle.plot);s.coerceFont(a,"titlefont",{family:o.family,size:Math.round(o.size*1.4),color:o.color});a("autosize",!(e.width&&e.height));a("width");a("height");a("margin.l");a("margin.r");a("margin.t");a("margin.b");a("margin.pad");a("margin.autoexpand");if(e.width&&e.height)y.sanitizeMargins(t);i.getComponentMethod("grid","sizeDefaults")(e,t);a("paper_bgcolor");a("separators",r.decimal+r.thousands);a("hidesources");a("colorway");a("datarevision");i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar");i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,a)};y.plotAutoSize=function e(t,r,a){var i=t._context||{},o=i.frameMargins,l,u;var c=s.isPlotDiv(t);if(c)t.emit("plotly_autosize");if(i.fillFrame){l=window.innerWidth;u=window.innerHeight;document.body.style.overflow="hidden"}else if(n(o)&&o>0){var f=O(t._boundingBoxMargins),d=f.left+f.right,v=f.bottom+f.top,p=1-2*o;var h=a._container&&a._container.node?a._container.node().getBoundingClientRect():{width:a.width,height:a.height};l=Math.round(p*(h.width-d));u=Math.round(p*(h.height-v))}else{var g=c?window.getComputedStyle(t):{};l=parseFloat(g.width)||a.width;u=parseFloat(g.height)||a.height}var m=y.layoutAttributes.width.min,x=y.layoutAttributes.height.min;if(l<m)l=m;if(u<x)u=x;var b=!r.width&&Math.abs(a.width-l)>1,_=!r.height&&Math.abs(a.height-u)>1;if(_||b){if(b)a.width=l;if(_)a.height=u}if(!t._initialAutoSize){t._initialAutoSize={width:l,height:u}}y.sanitizeMargins(a)};function O(e){var t={left:0,right:0,bottom:0,top:0},r;if(e){for(r in e){if(e.hasOwnProperty(r)){t.left+=e[r].left||0;t.right+=e[r].right||0;t.bottom+=e[r].bottom||0;t.top+=e[r].top||0}}}return t}y.supplyLayoutModuleDefaults=function(e,t,r,a){var n=i.componentsRegistry;var o=t._basePlotModules;var l,u,c;var f=i.subplotsRegistry.cartesian;for(l in n){c=n[l];if(c.includeBasePlot){c.includeBasePlot(e,t)}}if(!o.length){o.push(f)}if(t._has("cartesian")){i.getComponentMethod("grid","contentDefaults")(e,t);f.finalizeSubplots(e,t)}for(var d in t._subplots){t._subplots[d].sort(s.subplotSort)}for(u=0;u<o.length;u++){c=o[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}var v=t._modules;for(u=0;u<v.length;u++){c=v[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}var p=t._transformModules;for(u=0;u<p.length;u++){c=p[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r,a)}}for(l in n){c=n[l];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}};y.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._geocontainer!==undefined)t._geocontainer.remove();if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}s.clearThrottle();delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.framework;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e.firstscatter;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._replotPending;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};y.style=function(e){var t=e._fullLayout._modules;var r=[];var a;for(a=0;a<t.length;a++){var n=t[a];if(n.style){s.pushUnique(r,n.style)}}for(a=0;a<r.length;a++){r[a](e)}};y.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width,r=e.height,a=e.margin,n=t-(a.l+a.r),i=r-(a.t+a.b),o;if(n<0){o=(t-1)/(a.l+a.r);a.l=Math.floor(o*a.l);a.r=Math.floor(o*a.r)}if(i<0){o=(r-1)/(a.t+a.b);a.t=Math.floor(o*a.t);a.b=Math.floor(o*a.b)}};y.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};y.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function z(e){if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}y.autoMargin=function(e,t,r){var a=e._fullLayout;z(a);var n=a._pushmargin;var i=a._pushmarginIds;if(a.margin.autoexpand!==false){if(!r){delete n[t];delete i[t]}else{var o=r.pad;if(o===undefined){var l=a.margin;o=Math.min(12,l.l,l.r,l.t,l.b)}if(r.l+r.r>a.width*.5)r.l=r.r=0;if(r.b+r.t>a.height*.5)r.b=r.t=0;var s=r.xl!==undefined?r.xl:r.x;var u=r.xr!==undefined?r.xr:r.x;var c=r.yt!==undefined?r.yt:r.y;var f=r.yb!==undefined?r.yb:r.y;n[t]={l:{val:s,size:r.l+o},r:{val:u,size:r.r+o},b:{val:f,size:r.b+o},t:{val:c,size:r.t+o}};i[t]=1}if(!a._replotting)y.doAutoMargin(e)}};y.doAutoMargin=function(e){var t=e._fullLayout;if(!t._size)t._size={};z(t);var r=t._size,a=JSON.stringify(r);var o=Math.max(t.margin.l||0,0);var l=Math.max(t.margin.r||0,0);var s=Math.max(t.margin.t||0,0);var u=Math.max(t.margin.b||0,0);var c=t._pushmargin;var f=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var d in c){if(!f[d])delete c[d]}c.base={l:{val:0,size:o},r:{val:1,size:l},t:{val:1,size:s},b:{val:0,size:u}};for(var v in c){var p=c[v].l||{},h=c[v].b||{},g=p.val,y=p.size,m=h.val,x=h.size;for(var b in c){if(n(y)&&c[b].r){var _=c[b].r.val,w=c[b].r.size;if(_>g){var k=(y*_+(w-t.width)*g)/(_-g),M=(w*(1-g)+(y-t.width)*(1-_))/(_-g);if(k>=0&&M>=0&&k+M>o+l){o=k;l=M}}}if(n(x)&&c[b].t){var T=c[b].t.val,A=c[b].t.size;if(T>m){var L=(x*T+(A-t.height)*m)/(T-m),S=(A*(1-m)+(x-t.height)*(1-T))/(T-m);if(L>=0&&S>=0&&L+S>u+s){u=L;s=S}}}}}}r.l=Math.round(o);r.r=Math.round(l);r.t=Math.round(s);r.b=Math.round(u);r.p=Math.round(t.margin.pad);r.w=Math.round(t.width)-r.l-r.r;r.h=Math.round(t.height)-r.t-r.b;if(!t._replotting&&a!=="{}"&&a!==JSON.stringify(t._size)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}return i.call("plot",e)}};y.graphJson=function(e,t,r,a,n){if(n&&t&&!e._fullData||n&&!t&&!e._fullLayout){y.supplyDefaults(e)}var i=n?e._fullData:e.data,o=n?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(e){if(typeof e==="function"){return null}if(s.isPlainObject(e)){var t={},a,n;for(a in e){if(typeof e[a]==="function"||["_","["].indexOf(a.charAt(0))!==-1){continue}if(r==="keepdata"){if(a.substr(a.length-3)==="src"){continue}}else if(r==="keepstream"){n=e[a+"src"];if(typeof n==="string"&&n.indexOf(":")>0){if(!s.isPlainObject(e.stream)){continue}}}else if(r!=="keepall"){n=e[a+"src"];if(typeof n==="string"&&n.indexOf(":")>0){continue}}t[a]=u(e[a])}return t}if(Array.isArray(e)){return e.map(u)}if(s.isJSDate(e))return s.ms2DateTimeLocal(+e);return e}var c={data:(i||[]).map(function(e){var r=u(e);if(t){delete r.fit}return r})};if(!t){c.layout=u(o)}if(e.framework&&e.framework.isPolar)c=e.framework.getConfig();if(l)c.frames=u(l);return a==="object"?c:JSON.stringify(c)};y.modifyFrames=function(e,t){var r,a,n;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){a=t[r];switch(a.type){case"replace":n=a.value;var l=(i[a.index]||{}).name;var s=n.name;i[a.index]=o[s]=n;if(s!==l){delete o[l];o[s]=n}break;case"insert":n=a.value;o[n.name]=n;i.splice(a.index,0,n);break;case"delete":n=i[a.index];delete o[n.name];i.splice(a.index,1);break}}return Promise.resolve()};y.computeFrame=function(e,t){var r=e._transitionData._frameHash;var a,n,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var l=r[t.toString()];if(!l){return false}var s=[l];var u=[l.name];while(l.baseframe&&(l=r[l.baseframe.toString()])){if(u.indexOf(l.name)!==-1)break;s.push(l);u.push(l.name)}var c={};while(l=s.pop()){if(l.layout){c.layout=y.extendLayout(c.layout,l.layout)}if(l.data){if(!c.data){c.data=[]}n=l.traces;if(!n){n=[];for(a=0;a<l.data.length;a++){n[a]=a}}if(!c.traces){c.traces=[]}for(a=0;a<l.data.length;a++){i=n[a];if(i===undefined||i===null){continue}o=c.traces.indexOf(i);if(o===-1){o=c.data.length;c.traces[o]=i}c.data[o]=y.extendTrace(c.data[o],l.data[a])}}}return c};y.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var a=0;a<r.length;a++){var n=r[a];if(n&&n.name){t[n.name]=n}}};y.extendObjectWithContainers=function(e,t,r){var a,n,i,o,l,u,c,f;var d=s.extendDeepNoArrays({},t||{});var v=s.expandObjectPaths(d);var p={};if(r&&r.length){for(i=0;i<r.length;i++){a=s.nestedProperty(v,r[i]);n=a.get();if(n===undefined){s.nestedProperty(p,r[i]).set(null)}else{a.set(null);s.nestedProperty(p,r[i]).set(n)}}}e=s.extendDeepNoArrays(e||{},v);if(r&&r.length){for(i=0;i<r.length;i++){l=s.nestedProperty(p,r[i]);c=l.get();if(!c)continue;u=s.nestedProperty(e,r[i]);f=u.get();if(!Array.isArray(f)){f=[];u.set(f)}for(o=0;o<c.length;o++){var h=c[o];if(h===null)f[o]=null;else{f[o]=y.extendObjectWithContainers(f[o],h)}}u.set(f)}}return e};y.dataArrayContainers=["transforms","dimensions"];y.layoutArrayContainers=i.layoutArrayContainers;y.extendTrace=function(e,t){return y.extendObjectWithContainers(e,t,y.dataArrayContainers)};y.extendLayout=function(e,t){return y.extendObjectWithContainers(e,t,y.layoutArrayContainers)};y.transition=function(e,t,r,a,n,o){var l,u;var c=Array.isArray(t)?t.length:0;var f=a.slice(0,c);var d=[];function v(){var a;for(a=0;a<f.length;a++){var n=f[a];var o=e._fullData[n];var l=o._module;if(!l)continue;if(l.animatable){d.push(n)}e.data[f[a]]=y.extendTrace(e.data[f[a]],t[a])}var u=s.expandObjectPaths(s.extendDeepNoArrays({},r));var c=/^[xy]axis[0-9]*$/;for(var v in u){if(!c.test(v))continue;delete u[v].range}y.extendLayout(e.layout,u);delete e.calcdata;y.supplyDefaults(e);y.doCalcdata(e);i.getComponentMethod("errorbars","calc")(e);return Promise.resolve()}function p(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function h(e){if(!e)return;while(e.length){e.shift()}}var g=false;function m(){e.emit("plotly_transitioning",[]);return new Promise(function(t){e._transitioning=true;if(o.duration>0){e._transitioningWithDuration=true}e._transitionData._interruptCallbacks.push(function(){g=true});if(n.redraw){e._transitionData._interruptCallbacks.push(function(){return i.call("redraw",e)})}e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var a=0;var l=0;function u(){a++;return function(){l++;if(!g&&l===a){x(t)}}}var c;var f;var v=e._fullLayout._basePlotModules;var p=false;if(r){for(f=0;f<v.length;f++){if(v[f].transitionAxes){var h=s.expandObjectPaths(r);p=v[f].transitionAxes(e,h,o,u)||p}}}if(p){c=s.extendFlat({},o);c.duration=0}else{c=o}for(f=0;f<v.length;f++){v[f].plot(e,d,c,u)}setTimeout(u())})}function x(t){if(!e._transitionData)return;h(e._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(n.redraw){return i.call("redraw",e)}}).then(function(){e._transitioning=false;e._transitioningWithDuration=false;e.emit("plotly_transitioned",[])}).then(t)}function b(){if(!e._transitionData)return;e._transitioning=false;return p(e._transitionData._interruptCallbacks)}for(l=0;l<f.length;l++){u=f[l];var _=e._fullData[u];var w=_._module;if(!w)continue}var k=[y.previousPromises,b,v,y.rehover,m];var M=s.syncOrAsync(k,e);if(!M||!M.then){M=Promise.resolve()}return M.then(function(){return e})};y.doCalcdata=function(e,t){var r=f.list(e),a=e._fullData,n=e._fullLayout;var l,s,u,d;var v=new Array(a.length);var p=(e.calcdata||[]).slice(0);e.calcdata=v;e.firstscatter=true;n._numBoxes=0;n._numViolins=0;n._violinScaleGroupStats={};e._hmpixcount=0;e._hmlumcount=0;n._piecolormap={};n._piecolorway=null;n._piedefaultcolorcount=0;for(u=0;u<a.length;u++){if(Array.isArray(t)&&t.indexOf(u)===-1){v[u]=p[u];continue}}for(u=0;u<a.length;u++){l=a[u];l._arrayAttrs=o.findArrayAttributes(l)}var h=n._subplots.polar||[];for(u=0;u<h.length;u++){r.push(n[h[u]].radialaxis,n[h[u]].angularaxis)}P(r);var g=false;for(u=0;u<a.length;u++){l=a[u];if(l.visible===true&&l.transforms){s=l._module;if(s&&s.calc){var y=s.calc(e,l);if(y[0]&&y[0].t&&y[0].t._scene){delete y[0].t._scene.dirty}}for(d=0;d<l.transforms.length;d++){var x=l.transforms[d];s=m[x.type];if(s&&s.calcTransform){l._hasCalcTransform=true;g=true;s.calcTransform(e,l,x)}}}}if(g)P(r);function b(t,r){l=a[t];s=l._module;if(!!s.isContainer!==r)return;var n=[];if(l.visible===true){var i=l.transforms||[];for(d=i.length-1;d>=0;d--){if(i[d].enabled){l._indexToPoints=i[d]._indexToPoints;break}}if(s&&s.calc){n=s.calc(e,l)}}if(!Array.isArray(n)||!n[0]){n=[{x:c,y:c}]}if(!n[0].t)n[0].t={};n[0].trace=l;v[t]=n}for(u=0;u<a.length;u++)b(u,true);for(u=0;u<a.length;u++)b(u,false);i.getComponentMethod("fx","calc")(e)};function P(e){for(var t=0;t<e.length;t++){e[t].clearCalc()}}y.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};y.generalUpdatePerTraceModule=function(e,t,r,a){var n=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var l=r[o],u=l[0].trace;if(u.visible){i[u.type]=i[u.type]||[];i[u.type].push(l)}}for(var c in n){if(!i[c]){var f=n[c][0],d=f[0].trace;d.visible=false;i[c]=[f]}}for(var v in i){var p=i[v];var h=p[0][0].trace._module;h.plot(e,t,s.filterVisible(p),a)}t.traceHash=i}},{"../components/color":50,"../constants/numerical":151,"../lib":169,"../plot_api/plot_schema":202,"../plot_api/plot_template":203,"../plots/cartesian/axis_ids":216,"../registry":261,"./animation_attributes":208,"./attributes":210,"./command":237,"./font_attributes":239,"./frame_attributes":240,"./layout_attributes":243,"./sort_modules":252,d3:15,"fast-isnumeric":18}],246:[function(e,t,r){"use strict";var a=e("../../../traces/scatter/attributes");var n=a.marker;t.exports={r:a.r,t:a.t,marker:{color:n.color,size:n.size,symbol:n.symbol,opacity:n.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":367}],247:[function(e,t,r){"use strict";var a=e("../../cartesian/layout_attributes");var n=e("../../../lib/extend").extendFlat;var i=e("../../../plot_api/edit_types").overrideAll;var o=n({},a.domain,{});function l(e,t){var r={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return n({},t,r)}t.exports=i({radialaxis:l("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:o,orientation:{valType:"number"}}),angularaxis:l("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:o}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":163,"../../../plot_api/edit_types":196,"../../cartesian/layout_attributes":225}],248:[function(e,t,r){"use strict";var a=t.exports=e("./micropolar");a.manager=e("./micropolar_manager")},{"./micropolar":249,"./micropolar_manager":250}],249:[function(e,t,r){var a=e("d3");var n=e("../../../lib");var i=n.extendDeepAll;var o=e("../../../constants/alignment").MID_SHIFT;var l=t.exports={version:"0.2.2"};l.Axis=function e(){var t={data:[],layout:{}},r={},n={};var s,u,c=a.dispatch("hover"),f,d;var v={};function p(e){u=e||u;var r=t.data;var c=t.layout;if(typeof u=="string"||u.nodeName)u=a.select(u);u.datum(r).each(function(e,t){var r=e.slice();n={data:l.util.cloneJson(r),layout:l.util.cloneJson(c)};var u=0;r.forEach(function(e,t){if(!e.color){e.color=c.defaultColorRange[u];u=(u+1)%c.defaultColorRange.length}if(!e.strokeColor){e.strokeColor=e.geometry==="LinePlot"?e.color:a.rgb(e.color).darker().toString()}n.data[t].color=e.color;n.data[t].strokeColor=e.strokeColor;n.data[t].strokeDash=e.strokeDash;n.data[t].strokeSize=e.strokeSize});var v=r.filter(function(e,t){var r=e.visible;return typeof r==="undefined"||r===true});var p=false;var h=v.map(function(e,t){p=p||typeof e.groupId!=="undefined";return e});if(p){var g=a.nest().key(function(e,t){return typeof e.groupId!="undefined"?e.groupId:"unstacked"}).entries(h);var y=[];var m=g.map(function(e,t){if(e.key==="unstacked")return e.values;else{var r=e.values[0].r.map(function(e,t){return 0});e.values.forEach(function(e,t,a){e.yStack=[r];y.push(r);r=l.util.sumArrays(e.r,r)});return e.values}});v=a.merge(m)}v.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t];e.r=Array.isArray(e.r[0])?e.r:[e.r]});var x=Math.min(c.width-c.margin.left-c.margin.right,c.height-c.margin.top-c.margin.bottom)/2;x=Math.max(10,x);var b=[c.margin.left+x,c.margin.top+x];var _;if(p){var w=a.max(l.util.sumArrays(l.util.arrayLast(v).r[0],l.util.arrayLast(y)));_=[0,w]}else _=a.extent(l.util.flattenArray(v.map(function(e,t){return e.r})));if(c.radialAxis.domain!=l.DATAEXTENT)_[0]=0;f=a.scale.linear().domain(c.radialAxis.domain!=l.DATAEXTENT&&c.radialAxis.domain?c.radialAxis.domain:_).range([0,x]);n.layout.radialAxis.domain=f.domain();var k=l.util.flattenArray(v.map(function(e,t){return e.t}));var M=typeof k[0]==="string";var T;if(M){k=l.util.deduplicate(k);T=k.slice();k=a.range(k.length);v=v.map(function(e,t){var r=e;e.t=[k];if(p)r.yStack=e.yStack;return r})}var A=v.filter(function(e,t){return e.geometry==="LinePlot"||e.geometry==="DotPlot"}).length===v.length;var L=c.needsEndSpacing===null?M||!A:c.needsEndSpacing;var S=c.angularAxis.domain&&c.angularAxis.domain!=l.DATAEXTENT&&!M&&c.angularAxis.domain[0]>=0;var C=S?c.angularAxis.domain:a.extent(k);var O=Math.abs(k[1]-k[0]);if(A&&!M)O=0;var z=C.slice();if(L&&M)z[1]+=O;var P=c.angularAxis.ticksCount||4;if(P>8)P=P/(P/8)+P%8;if(c.angularAxis.ticksStep){P=(z[1]-z[0])/P}var D=c.angularAxis.ticksStep||(z[1]-z[0])/(P*(c.minorTicks+1));if(T)D=Math.max(Math.round(D),1);if(!z[2])z[2]=D;var I=a.range.apply(this,z);I=I.map(function(e,t){return parseFloat(e.toPrecision(12))});d=a.scale.linear().domain(z.slice(0,2)).range(c.direction==="clockwise"?[0,360]:[360,0]);n.layout.angularAxis.domain=d.domain();n.layout.angularAxis.endPadding=L?O:0;s=a.select(this).select("svg.chart-root");if(typeof s==="undefined"||s.empty()){var E="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>";var N=(new DOMParser).parseFromString(E,"application/xml");var R=this.appendChild(this.ownerDocument.importNode(N.documentElement,true));s=a.select(R)}s.select(".guides-group").style({"pointer-events":"none"});s.select(".angular.axis-group").style({"pointer-events":"none"});s.select(".radial.axis-group").style({"pointer-events":"none"});var F=s.select(".chart-group");var B={fill:"none",stroke:c.tickColor};var j={"font-size":c.font.size,"font-family":c.font.family,fill:c.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+c.font.outlineColor}).join(",")};var q;if(c.showLegend){q=s.select(".legend-group").attr({transform:"translate("+[x,c.margin.top]+")"}).style({display:"block"});var H=v.map(function(e,t){var r=l.util.cloneJson(e);r.symbol=e.geometry==="DotPlot"?e.dotType||"circle":e.geometry!="LinePlot"?"square":"line";r.visibleInLegend=typeof e.visibleInLegend==="undefined"||e.visibleInLegend;r.color=e.geometry==="LinePlot"?e.strokeColor:e.color;return r});l.Legend().config({data:v.map(function(e,t){return e.name||"Element"+t}),legendConfig:i({},l.Legend.defaultConfig().legendConfig,{container:q,elements:H,reverseOrder:c.legend.reverseOrder})})();var V=q.node().getBBox();x=Math.min(c.width-V.width-c.margin.left-c.margin.right,c.height-c.margin.top-c.margin.bottom)/2;x=Math.max(10,x);b=[c.margin.left+x,c.margin.top+x];f.range([0,x]);n.layout.radialAxis.domain=f.domain();q.attr("transform","translate("+[b[0]+x,b[1]-x]+")")}else{q=s.select(".legend-group").style({display:"none"})}s.attr({width:c.width,height:c.height}).style({opacity:c.opacity});F.attr("transform","translate("+b+")").style({cursor:"crosshair"});var U=[(c.width-(c.margin.left+c.margin.right+x*2+(V?V.width:0)))/2,(c.height-(c.margin.top+c.margin.bottom+x*2))/2];U[0]=Math.max(0,U[0]);U[1]=Math.max(0,U[1]);s.select(".outer-group").attr("transform","translate("+U+")");if(c.title){var G=s.select("g.title-group text").style(j).text(c.title);var Z=G.node().getBBox();G.attr({x:b[0]-Z.width/2,y:b[1]-x-20})}var Y=s.select(".radial.axis-group");if(c.radialAxis.gridLinesVisible){var X=Y.selectAll("circle.grid-circle").data(f.ticks(5));X.enter().append("circle").attr({class:"grid-circle"}).style(B);X.attr("r",f);X.exit().remove()}Y.select("circle.outside-circle").attr({r:x}).style(B);var W=s.select("circle.background-circle").attr({r:x}).style({fill:c.backgroundColor,stroke:c.stroke});function Q(e,t){return d(e)%360+c.orientation}if(c.radialAxis.visible){var J=a.svg.axis().scale(f).ticks(5).tickSize(5);Y.call(J).attr({transform:"rotate("+c.radialAxis.orientation+")"});Y.selectAll(".domain").style(B);Y.selectAll("g>text").text(function(e,t){return this.textContent+c.radialAxis.ticksSuffix}).style(j).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){if(c.radialAxis.tickOrientation==="horizontal"){return"rotate("+-c.radialAxis.orientation+") translate("+[0,j["font-size"]]+")"}else return"translate("+[0,j["font-size"]]+")"}});Y.selectAll("g>line").style({stroke:"black"})}var $=s.select(".angular.axis-group").selectAll("g.angular-tick").data(I);var K=$.enter().append("g").classed("angular-tick",true);$.attr({transform:function(e,t){return"rotate("+Q(e,t)+")"}}).style({display:c.angularAxis.visible?"block":"none"});$.exit().remove();K.append("line").classed("grid-line",true).classed("major",function(e,t){return t%(c.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(c.minorTicks+1)==0)}).style(B);K.selectAll(".minor").style({stroke:c.minorTickColor});$.select("line.grid-line").attr({x1:c.tickLength?x-c.tickLength:0,x2:x}).style({display:c.angularAxis.gridLinesVisible?"block":"none"});K.append("text").classed("axis-text",true).style(j);var ee=$.select("text.axis-text").attr({x:x+c.labelOffset,dy:o+"em",transform:function(e,t){var r=Q(e,t);var a=x+c.labelOffset;var n=c.angularAxis.tickOrientation;if(n=="horizontal")return"rotate("+-r+" "+a+" 0)";else if(n=="radial")return r<270&&r>90?"rotate(180 "+a+" 0)":null;else return"rotate("+(r<=180&&r>0?-90:90)+" "+a+" 0)"}}).style({"text-anchor":"middle",display:c.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){if(t%(c.minorTicks+1)!=0)return"";if(T){return T[e]+c.angularAxis.ticksSuffix}else return e+c.angularAxis.ticksSuffix}).style(j);if(c.angularAxis.rewriteTicks)ee.text(function(e,t){if(t%(c.minorTicks+1)!=0)return"";return c.angularAxis.rewriteTicks(this.textContent,t)});var te=a.max(F.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));q.attr({transform:"translate("+[x+te,c.margin.top]+")"});var re=s.select("g.geometry-group").selectAll("g").size()>0;var ae=s.select("g.geometry-group").selectAll("g.geometry").data(v);ae.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}});ae.exit().remove();if(v[0]||re){var ne=[];v.forEach(function(e,t){var r={};r.radialScale=f;r.angularScale=d;r.container=ae.filter(function(e,r){return r==t});r.geometry=e.geometry;r.orientation=c.orientation;r.direction=c.direction;r.index=t;ne.push({data:e,geometryConfig:r})});var ie=a.nest().key(function(e,t){return typeof e.data.groupId!="undefined"||"unstacked"}).entries(ne);var oe=[];ie.forEach(function(e,t){if(e.key==="unstacked")oe=oe.concat(e.values.map(function(e,t){return[e]}));else oe.push(e.values)});oe.forEach(function(e,t){var r;if(Array.isArray(e))r=e[0].geometryConfig.geometry;else r=e.geometryConfig.geometry;var a=e.map(function(e,t){return i(l[r].defaultConfig(),e)});l[r]().config(a)()})}var le=s.select(".guides-group");var se=s.select(".tooltips-group");var ue=l.tooltipPanel().config({container:se,fontSize:8})();var ce=l.tooltipPanel().config({container:se,fontSize:8})();var fe=l.tooltipPanel().config({container:se,hasTick:true})();var de,ve;if(!M){var pe=le.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});F.on("mousemove.angular-guide",function(e,t){var r=l.util.getMousePos(W).angle;pe.attr({x2:-x,transform:"rotate("+r+")"}).style({opacity:.5});var a=(r+180+360-c.orientation)%360;de=d.invert(a);var n=l.util.convertToCartesian(x+12,r+180);ue.text(l.util.round(de)).move([n[0]+b[0],n[1]+b[1]])}).on("mouseout.angular-guide",function(e,t){le.select("line").style({opacity:0})})}var he=le.select("circle").style({stroke:"grey",fill:"none"});F.on("mousemove.radial-guide",function(e,t){var r=l.util.getMousePos(W).radius;he.attr({r:r}).style({opacity:.5});ve=f.invert(l.util.getMousePos(W).radius);var a=l.util.convertToCartesian(r,c.radialAxis.orientation);ce.text(l.util.round(ve)).move([a[0]+b[0],a[1]+b[1]])}).on("mouseout.radial-guide",function(e,t){he.style({opacity:0});fe.hide();ue.hide();ce.hide()});s.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,t){var r=a.select(this);var n=this.style.fill;var i="black";var o=this.style.opacity||1;r.attr({"data-opacity":o});if(n&&n!=="none"){r.attr({"data-fill":n});i=a.hsl(n).darker().toString();r.style({fill:i,opacity:1});var u={t:l.util.round(e[0]),r:l.util.round(e[1])};if(M)u.t=T[e[0]];var c="t: "+u.t+", r: "+u.r;var f=this.getBoundingClientRect();var d=s.node().getBoundingClientRect();var v=[f.left+f.width/2-U[0]-d.left,f.top+f.height/2-U[1]-d.top];fe.config({color:i}).text(c);fe.move(v)}else{n=this.style.stroke||"black";r.attr({"data-stroke":n});i=a.hsl(n).darker().toString();r.style({stroke:i,opacity:1})}}).on("mousemove.tooltip",function(e,t){if(a.event.which!=0)return false;if(a.select(this).attr("data-fill"))fe.show()}).on("mouseout.tooltip",function(e,t){fe.hide();var r=a.select(this);var n=r.attr("data-fill");if(n)r.style({fill:n,opacity:r.attr("data-opacity")});else r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})})});return v}v.render=function(e){p(e);return this};v.config=function(e){if(!arguments.length)return t;var r=l.util.cloneJson(e);r.data.forEach(function(e,r){if(!t.data[r])t.data[r]={};i(t.data[r],l.Axis.defaultConfig().data[0]);i(t.data[r],e)});i(t.layout,l.Axis.defaultConfig().layout);i(t.layout,r.layout);return this};v.getLiveConfig=function(){return n};v.getinputConfig=function(){return r};v.radialScale=function(e){return f};v.angularScale=function(e){return d};v.svg=function(){return s};a.rebind(v,c,"on");return v};l.Axis.defaultConfig=function(e,t){var r={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:true,opacity:1}],layout:{defaultColorRange:a.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:true,gridLinesVisible:true,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:true,gridLinesVisible:true,labelsVisible:true,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:true,legend:{reverseOrder:false},opacity:1}};return r};l.util={};l.DATAEXTENT="dataExtent";l.AREA="AreaChart";l.LINE="LinePlot";l.DOT="DotPlot";l.BAR="BarChart";l.util._override=function(e,t){for(var r in e)if(r in t)t[r]=e[r]};l.util._extend=function(e,t){for(var r in e)t[r]=e[r]};l.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)};l.util.dataFromEquation2=function(e,t){var r=t||6;var n=a.range(0,360+r,r).map(function(t,r){var a=t*Math.PI/180;var n=e(a);return[t,n]});return n};l.util.dataFromEquation=function(e,t,r){var n=t||6;var i=[],o=[];a.range(0,360+n,n).forEach(function(t,r){var a=t*Math.PI/180;var n=e(a);i.push(t);o.push(n)});var l={t:i,r:o};if(r)l.name=r;return l};l.util.ensureArray=function(e,t){if(typeof e==="undefined")return null;var r=[].concat(e);return a.range(t).map(function(e,t){return r[t]||r[0]})};l.util.fillArrays=function(e,t,r){t.forEach(function(t,a){e[t]=l.util.ensureArray(e[t],r)});return e};l.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))};l.util.validateKeys=function(e,t){if(typeof t==="string")t=t.split(".");var r=t.shift();return e[r]&&(!t.length||objHasKeys(e[r],t))};l.util.sumArrays=function(e,t){return a.zip(e,t).map(function(e,t){return a.sum(e)})};l.util.arrayLast=function(e){return e[e.length-1]};l.util.arrayEqual=function(e,t){var r=Math.max(e.length,t.length,1);while(r-- >=0&&e[r]===t[r]);return r===-2};l.util.flattenArray=function(e){var t=[];while(!l.util.arrayEqual(t,e)){t=e;e=[].concat.apply([],e)}return e};l.util.deduplicate=function(e){return e.filter(function(e,t,r){return r.indexOf(e)==t})};l.util.convertToCartesian=function(e,t){var r=t*Math.PI/180;var a=e*Math.cos(r);var n=e*Math.sin(r);return[a,n]};l.util.round=function(e,t){var r=t||2;var a=Math.pow(10,r);return Math.round(e*a)/a};l.util.getMousePos=function(e){var t=a.mouse(e.node());var r=t[0];var n=t[1];var i={};i.x=r;i.y=n;i.pos=t;i.angle=(Math.atan2(n,r)+Math.PI)*180/Math.PI;i.radius=Math.sqrt(r*r+n*n);return i};l.util.duplicatesCount=function(e){var t={},r;var a={};for(var n=0,i=e.length;n<i;n++){r=e[n];if(r in t){t[r]++;a[r]=t[r]}else{t[r]=1}}return a};l.util.duplicates=function(e){return Object.keys(l.util.duplicatesCount(e))};l.util.translator=function(e,t,r,a){if(a){var n=r.slice();r=t;t=n}var i=t.reduce(function(e,t){if(typeof e!="undefined")return e[t]},e);if(typeof i==="undefined")return;t.reduce(function(e,r,a){if(typeof e=="undefined")return;if(a===t.length-1)delete e[r];return e[r]},e);r.reduce(function(e,t,a){if(typeof e[t]==="undefined")e[t]={};if(a===r.length-1)e[t]=i;return e[t]},e)};l.PolyChart=function e(){var t=[l.PolyChart.defaultConfig()];var r=a.dispatch("hover");var n={solid:"none",dash:[5,2],dot:[2,5]};var o;function s(){var e=t[0].geometryConfig;var r=e.container;if(typeof r=="string")r=a.select(r);r.datum(t).each(function(t,r){var i=!!t[0].data.yStack;var o=t.map(function(e,t){if(i)return a.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]);else return a.zip(e.data.t[0],e.data.r[0])});var l=e.angularScale;var s=e.radialScale.domain()[0];var u={};u.bar=function(r,n,i){var o=t[i].data;var s=e.radialScale(r[1])-e.radialScale(0);var u=e.radialScale(r[2]||0);var c=o.barWidth;a.select(this).attr({class:"mark bar",d:"M"+[[s+u,-c/2],[s+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+l(t[0]))+")"}})};u.dot=function(e,r,n){var i=e[2]?[e[0],e[1]+e[2]]:e;var o=a.svg.symbol().size(t[n].data.dotSize).type(t[n].data.dotType)(e,r);a.select(this).attr({class:"mark dot",d:o,transform:function(e,t){var r=m(y(i));return"translate("+[r.x,r.y]+")"}})};var c=a.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});u.line=function(r,n,i){var l=r[2]?o[i].map(function(e,t){return[e[0],e[1]+e[2]]}):o[i];a.select(this).each(u["dot"]).style({opacity:function(e,r){return+t[i].data.dotVisible},fill:p.stroke(r,n,i)}).attr({class:"mark dot"});if(n>0)return;var s=a.select(this.parentNode).selectAll("path.line").data([0]);s.enter().insert("path");s.attr({class:"line",d:c(l),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return p.fill(r,n,i)},"fill-opacity":0,stroke:function(e,t){return p.stroke(r,n,i)},"stroke-width":function(e,t){return p["stroke-width"](r,n,i)},"stroke-dasharray":function(e,t){return p["stroke-dasharray"](r,n,i)},opacity:function(e,t){return p.opacity(r,n,i)},display:function(e,t){return p.display(r,n,i)}})};var f=e.angularScale.range();var d=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180;var v=a.svg.arc().startAngle(function(e){return-d/2}).endAngle(function(e){return d/2}).innerRadius(function(t){return e.radialScale(s+(t[2]||0))}).outerRadius(function(t){return e.radialScale(s+(t[2]||0))+e.radialScale(t[1])});u.arc=function(t,r,n){a.select(this).attr({class:"mark arc",d:v,transform:function(t,r){return"rotate("+(e.orientation+l(t[0])+90)+")"}})};var p={fill:function(e,r,a){return t[a].data.color},stroke:function(e,r,a){return t[a].data.strokeColor},"stroke-width":function(e,r,a){return t[a].data.strokeSize+"px"},"stroke-dasharray":function(e,r,a){return n[t[a].data.strokeDash]},opacity:function(e,r,a){return t[a].data.opacity},display:function(e,r,a){return typeof t[a].data.visible==="undefined"||t[a].data.visible?"block":"none"}};var h=a.select(this).selectAll("g.layer").data(o);h.enter().append("g").attr({class:"layer"});var g=h.selectAll("path.mark").data(function(e,t){return e});g.enter().append("path").attr({class:"mark"});g.style(p).each(u[e.geometryType]);g.exit().remove();h.exit().remove();function y(t,r){var a=e.radialScale(t[1]);var n=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:a,t:n}}function m(e){var t=e.r*Math.cos(e.t);var r=e.r*Math.sin(e.t);return{x:t,y:r}}})}s.config=function(e){if(!arguments.length)return t;e.forEach(function(e,r){if(!t[r])t[r]={};i(t[r],l.PolyChart.defaultConfig());i(t[r],e)});return this};s.getColorScale=function(){return o};a.rebind(s,r,"on");return s};l.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:false,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:true,visibleInLegend:true},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:a.scale.category20()}};return e};l.BarChart=function e(){return l.PolyChart()};l.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e};l.AreaChart=function e(){return l.PolyChart()};l.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e};l.DotPlot=function e(){return l.PolyChart()};l.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e};l.LinePlot=function e(){return l.PolyChart()};l.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e};l.Legend=function e(){var t=l.Legend.defaultConfig();var r=a.dispatch("hover");function n(){var e=t.legendConfig;var r=t.data.map(function(t,r){return[].concat(t).map(function(t,a){var n=i({},e.elements[r]);n.name=t;n.color=[].concat(e.elements[r].color)[a];return n})});var o=a.merge(r);o=o.filter(function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||typeof e.elements[r].visibleInLegend==="undefined")});if(e.reverseOrder)o=o.reverse();var l=e.container;if(typeof l=="string"||l.nodeName)l=a.select(l);var s=o.map(function(e,t){return e.color});var u=e.fontSize;var c=e.isContinuous==null?typeof o[0]==="number":e.isContinuous;var f=c?e.height:u*o.length;var d=l.classed("legend-group",true);var v=d.selectAll("svg").data([0]);var p=v.enter().append("svg").attr({width:300,height:f+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});p.append("g").classed("legend-axis",true);p.append("g").classed("legend-marks",true);var h=a.range(o.length);var g=a.scale[c?"linear":"ordinal"]().domain(h).range(s);var y=a.scale[c?"linear":"ordinal"]().domain(h)[c?"range":"rangePoints"]([0,f]);var m=function(e,t){var r=t*3;if(e==="line"){return"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z"}else if(a.svg.symbolTypes.indexOf(e)!=-1)return a.svg.symbol().type(e).size(r)();else return a.svg.symbol().type("square").size(r)()};if(c){var x=v.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(s);x.enter().append("stop");x.attr({offset:function(e,t){return t/(s.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}});v.append("rect").classed("legend-mark",true).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var b=v.select(".legend-marks").selectAll("path.legend-mark").data(o);b.enter().append("path").classed("legend-mark",true);b.attr({transform:function(e,t){return"translate("+[u/2,y(t)+u/2]+")"},d:function(e,t){var r=e.symbol;return m(r,u)},fill:function(e,t){return g(t)}});b.exit().remove()}var _=a.svg.axis().scale(y).orient("right");var w=v.select("g.legend-axis").attr({transform:"translate("+[c?e.colorBandWidth:u,u/2]+")"}).call(_);w.selectAll(".domain").style({fill:"none",stroke:"none"});w.selectAll("line").style({fill:"none",stroke:c?e.textColor:"none"});w.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(e,t){return o[t].name});return n}n.config=function(e){if(!arguments.length)return t;i(t,e);return this};a.rebind(n,r,"on");return n};l.Legend.defaultConfig=function(e,t){var r={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:false}};return r};l.tooltipPanel=function(){var e,t,r;var n={container:null,hasTick:false,fontSize:12,color:"white",padding:5};var o="tooltip-"+l.tooltipPanel.uid++;var s=10;var u=function(){e=n.container.selectAll("g."+o).data([0]);var a=e.enter().append("g").classed(o,true).style({"pointer-events":"none",display:"none"});r=a.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});t=a.append("text").attr({dx:n.padding+s,dy:+n.fontSize*.3});return u};u.text=function(i){var o=a.hsl(n.color).l;var l=o>=.5?"#aaa":"white";var c=o>=.5?"black":"white";var f=i||"";t.style({fill:c,"font-size":n.fontSize+"px"}).text(f);var d=n.padding;var v=t.node().getBBox();var p={fill:n.color,stroke:l,"stroke-width":"2px"};var h=v.width+d*2+s;var g=v.height+d*2;r.attr({d:"M"+[[s,-g/2],[s,-g/4],[n.hasTick?0:s,0],[s,g/4],[s,g/2],[h,g/2],[h,-g/2]].join("L")+"Z"}).style(p);e.attr({transform:"translate("+[s,-g/2+d*2]+")"});e.style({display:"block"});return u};u.move=function(t){if(!e)return;e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"});return u};u.hide=function(){if(!e)return;e.style({display:"none"});return u};u.show=function(){if(!e)return;e.style({display:"block"});return u};u.config=function(e){i(n,e);return u};return u};l.tooltipPanel.uid=1;l.adapter={};l.adapter.plotly=function e(){var t={};t.convert=function(e,t){var r={};if(e.data){r.data=e.data.map(function(e,r){var a=i({},e);var n=[[a,["marker","color"],["color"]],[a,["marker","opacity"],["opacity"]],[a,["marker","line","color"],["strokeColor"]],[a,["marker","line","dash"],["strokeDash"]],[a,["marker","line","width"],["strokeSize"]],[a,["marker","symbol"],["dotType"]],[a,["marker","size"],["dotSize"]],[a,["marker","barWidth"],["barWidth"]],[a,["line","interpolation"],["lineInterpolation"]],[a,["showlegend"],["visibleInLegend"]]];n.forEach(function(e,r){l.util.translator.apply(null,e.concat(t))});if(!t)delete a.marker;if(t)delete a.groupId;if(!t){if(a.type==="scatter"){if(a.mode==="lines")a.geometry="LinePlot";else if(a.mode==="markers")a.geometry="DotPlot";else if(a.mode==="lines+markers"){a.geometry="LinePlot";a.dotVisible=true}}else if(a.type==="area")a.geometry="AreaChart";else if(a.type==="bar")a.geometry="BarChart";delete a.mode;delete a.type}else{if(a.geometry==="LinePlot"){a.type="scatter";if(a.dotVisible===true){delete a.dotVisible;a.mode="lines+markers"}else a.mode="lines"}else if(a.geometry==="DotPlot"){a.type="scatter";a.mode="markers"}else if(a.geometry==="AreaChart")a.type="area";else if(a.geometry==="BarChart")a.type="bar";delete a.geometry}return a});if(!t&&e.layout&&e.layout.barmode==="stack"){var n=l.util.duplicates(r.data.map(function(e,t){return e.geometry}));r.data.forEach(function(e,t){var a=n.indexOf(e.geometry);if(a!=-1)r.data[t].groupId=a})}}if(e.layout){var o=i({},e.layout);var s=[[o,["plot_bgcolor"],["backgroundColor"]],[o,["showlegend"],["showLegend"]],[o,["radialaxis"],["radialAxis"]],[o,["angularaxis"],["angularAxis"]],[o.angularaxis,["showline"],["gridLinesVisible"]],[o.angularaxis,["showticklabels"],["labelsVisible"]],[o.angularaxis,["nticks"],["ticksCount"]],[o.angularaxis,["tickorientation"],["tickOrientation"]],[o.angularaxis,["ticksuffix"],["ticksSuffix"]],[o.angularaxis,["range"],["domain"]],[o.angularaxis,["endpadding"],["endPadding"]],[o.radialaxis,["showline"],["gridLinesVisible"]],[o.radialaxis,["tickorientation"],["tickOrientation"]],[o.radialaxis,["ticksuffix"],["ticksSuffix"]],[o.radialaxis,["range"],["domain"]],[o.angularAxis,["showline"],["gridLinesVisible"]],[o.angularAxis,["showticklabels"],["labelsVisible"]],[o.angularAxis,["nticks"],["ticksCount"]],[o.angularAxis,["tickorientation"],["tickOrientation"]],[o.angularAxis,["ticksuffix"],["ticksSuffix"]],[o.angularAxis,["range"],["domain"]],[o.angularAxis,["endpadding"],["endPadding"]],[o.radialAxis,["showline"],["gridLinesVisible"]],[o.radialAxis,["tickorientation"],["tickOrientation"]],[o.radialAxis,["ticksuffix"],["ticksSuffix"]],[o.radialAxis,["range"],["domain"]],[o.font,["outlinecolor"],["outlineColor"]],[o.legend,["traceorder"],["reverseOrder"]],[o,["labeloffset"],["labelOffset"]],[o,["defaultcolorrange"],["defaultColorRange"]]];s.forEach(function(e,r){l.util.translator.apply(null,e.concat(t))});if(!t){if(o.angularAxis&&typeof o.angularAxis.ticklen!=="undefined")o.tickLength=o.angularAxis.ticklen;if(o.angularAxis&&typeof o.angularAxis.tickcolor!=="undefined")o.tickColor=o.angularAxis.tickcolor}else{if(typeof o.tickLength!=="undefined"){o.angularaxis.ticklen=o.tickLength;delete o.tickLength}if(o.tickColor){o.angularaxis.tickcolor=o.tickColor;delete o.tickColor}}if(o.legend&&typeof o.legend.reverseOrder!="boolean"){o.legend.reverseOrder=o.legend.reverseOrder!="normal"}if(o.legend&&typeof o.legend.traceorder=="boolean"){o.legend.traceorder=o.legend.traceorder?"reversed":"normal";delete o.legend.reverseOrder}if(o.margin&&typeof o.margin.t!="undefined"){var u=["t","r","b","l","pad"];var c=["top","right","bottom","left","pad"];var f={};a.entries(o.margin).forEach(function(e,t){f[c[u.indexOf(e.key)]]=e.value});o.margin=f}if(t){delete o.needsEndSpacing;delete o.minorTickColor;delete o.minorTicks;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksStep;delete o.angularaxis.rewriteTicks;delete o.angularaxis.nticks;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksStep;delete o.radialaxis.rewriteTicks;delete o.radialaxis.nticks}r.layout=o}return r};return t}},{"../../../constants/alignment":148,"../../../lib":169,d3:15}],250:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../../lib");var i=e("../../../components/color");var o=e("./micropolar");var l=e("./undo_manager");var s=n.extendDeepAll;var u=t.exports={};u.framework=function(e){var t,r,n,i,c;var f=new l;function d(r,l){if(l)c=l;a.select(a.select(c).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove();t=!t?r:s(t,r);if(!n)n=o.Axis();i=o.adapter.plotly().convert(t);n.config(i).render(c);e.data=t.data;e.layout=t.layout;u.fillLayout(e);return t}d.isPolar=true;d.svg=function(){return n.svg()};d.getConfig=function(){return t};d.getLiveConfig=function(){return o.adapter.plotly().convert(n.getLiveConfig(),true)};d.getLiveScales=function(){return{t:n.angularScale(),r:n.radialScale()}};d.setUndoPoint=function(){var e=this;var a=o.util.cloneJson(t);(function(t,r){f.add({undo:function(){if(r)e(r)},redo:function(){e(t)}})})(a,r);r=o.util.cloneJson(a)};d.undo=function(){f.undo()};d.redo=function(){f.redo()};return d};u.fillLayout=function(e){var t=a.select(e).selectAll(".plot-container"),r=t.selectAll(".svg-container"),n=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:i.background,_container:t,_paperdiv:r,_paper:n};e._fullLayout=s(o,e.layout)}},{"../../../components/color":50,"../../../lib":169,"./micropolar":249,"./undo_manager":251,d3:15}],251:[function(e,t,r){"use strict";t.exports=function e(){var t=[],r=-1,a=false,n;function i(e,t){if(!e)return this;a=true;e[t]();a=false;return this}return{add:function(e){if(a)return this;t.splice(r+1,t.length-r);t.push(e);r=t.length-1;return this},setCallback:function(e){n=e},undo:function(){var e=t[r];if(!e)return this;i(e,"undo");r-=1;if(n)n(e.undo);return this},redo:function(){var e=t[r+1];if(!e)return this;i(e,"redo");r+=1;if(n)n(e.redo);return this},clear:function(){t=[];r=-1},hasUndo:function(){return r!==-1},hasRedo:function(){return r<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[r-1]},getIndex:function(){return r}}}},{}],252:[function(e,t,r){"use strict";function a(e,t){if(e==="splom")return-1;if(t==="splom")return 1;return 0}function n(e,t){return a(e.name,t.name)}t.exports={sortBasePlotModules:n,sortModules:a}},{}],253:[function(e,t,r){"use strict";var a=e("../lib");var n=e("../plot_api/plot_template");var i=e("./domain").defaults;t.exports=function e(t,r,o,l){var s=l.type;var u=l.attributes;var c=l.handleDefaults;var f=l.partition||"x";var d=r._subplots[s];var v=d.length;var p=v&&d[0].replace(/\d+$/,"");var h,g;function y(e,t){return a.coerce(h,g,u,e,t)}for(var m=0;m<v;m++){var x=d[m];if(t[x])h=t[x];else h=t[x]={};g=n.newContainer(r,x,p);var b={};b[f]=[m/v,(m+1)/v];i(g,r,y,b);l.id=x;c(h,g,y,l)}}},{"../lib":169,"../plot_api/plot_template":203,"./domain":238}],254:[function(e,t,r){"use strict";var a=e("./ternary");var n=e("../../plots/get_data").getSubplotCalcData;var i=e("../../lib").counterRegex;var o="ternary";r.name=o;r.attr="subplot";r.idRoot=o;r.idRegex=r.attrRegex=i(o);r.attributes=e("./layout/attributes");r.layoutAttributes=e("./layout/layout_attributes");r.supplyLayoutDefaults=e("./layout/defaults");r.plot=function e(t){var r=t._fullLayout;var i=t.calcdata;var l=r._subplots[o];for(var s=0;s<l.length;s++){var u=l[s],c=n(i,o,u),f=r[u]._subplot;if(!f){f=new a({id:u,graphDiv:t,container:r._ternarylayer.node()},r);r[u]._subplot=f}f.plot(c,r,t._promises)}};r.clean=function(e,t,r,a){var n=a._subplots[o]||[];for(var i=0;i<n.length;i++){var l=n[i];var s=a[l]._subplot;if(!t[l]&&!!s){s.plotContainer.remove();s.clipDef.remove();s.clipDefRelative.remove();s.layers["a-title"].remove();s.layers["b-title"].remove();s.layers["c-title"].remove()}}}},{"../../lib":169,"../../plots/get_data":241,"./layout/attributes":255,"./layout/defaults":258,"./layout/layout_attributes":259,"./ternary":260}],255:[function(e,t,r){"use strict";t.exports={subplot:{valType:"subplotid",dflt:"ternary",editType:"calc"}}},{}],256:[function(e,t,r){"use strict";var a=e("../../cartesian/layout_attributes");var n=e("../../../lib/extend").extendFlat;t.exports={title:a.title,titlefont:a.titlefont,color:a.color,tickmode:a.tickmode,nticks:n({},a.nticks,{dflt:6,min:1}),tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:a.ticks,ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,showtickprefix:a.showtickprefix,tickprefix:a.tickprefix,showticksuffix:a.showticksuffix,ticksuffix:a.ticksuffix,showexponent:a.showexponent,exponentformat:a.exponentformat,separatethousands:a.separatethousands,tickfont:a.tickfont,tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,hoverformat:a.hoverformat,showline:n({},a.showline,{dflt:true}),linecolor:a.linecolor,linewidth:a.linewidth,showgrid:n({},a.showgrid,{dflt:true}),gridcolor:a.gridcolor,gridwidth:a.gridwidth,layer:a.layer,min:{valType:"number",dflt:0,min:0}}},{"../../../lib/extend":163,"../../cartesian/layout_attributes":225}],257:[function(e,t,r){"use strict";var a=e("../../../lib");var n=e("./axis_attributes");var i=e("../../cartesian/tick_label_defaults");var o=e("../../cartesian/tick_mark_defaults");var l=e("../../cartesian/tick_value_defaults");var s=e("../../cartesian/line_grid_defaults");t.exports=function e(t,r,u){function c(e,i){return a.coerce(t,r,n,e,i)}r.type="linear";var f=c("color");var d=f!==n.color.dflt?f:u.font.color;var v=r._name,p=v.charAt(0).toUpperCase(),h="Component "+p;var g=c("title",h);r._hovertitle=g===h?g:p;a.coerceFont(c,"titlefont",{family:u.font.family,size:Math.round(u.font.size*1.2),color:d});c("min");l(t,r,c,"linear");i(t,r,c,"linear",{});o(t,r,c,{outerTicks:true});var y=c("showticklabels");if(y){a.coerceFont(c,"tickfont",{family:u.font.family,size:u.font.size,color:d});c("tickangle");c("tickformat")}s(t,r,c,{dfltColor:f,bgColor:u.bgColor,blend:60,showLine:true,showGrid:true,noZeroLine:true,attributes:n});c("hoverformat");c("layer")}},{"../../../lib":169,"../../cartesian/line_grid_defaults":227,"../../cartesian/tick_label_defaults":232,"../../cartesian/tick_mark_defaults":233,"../../cartesian/tick_value_defaults":234,"./axis_attributes":256}],258:[function(e,t,r){"use strict";var a=e("../../../components/color");var n=e("../../../plot_api/plot_template");var i=e("../../subplot_defaults");var o=e("./layout_attributes");var l=e("./axis_defaults");var s=["aaxis","baxis","caxis"];t.exports=function e(t,r,a){i(t,r,a,{type:"ternary",attributes:o,handleDefaults:u,font:r.font,paper_bgcolor:r.paper_bgcolor})};function u(e,t,r,i){var o=r("bgcolor");var u=r("sum");i.bgColor=a.combine(o,i.paper_bgcolor);var c,f,d;for(var v=0;v<s.length;v++){c=s[v];f=e[c]||{};d=n.newContainer(t,c);d._name=c;l(f,d,i)}var p=t.aaxis,h=t.baxis,g=t.caxis;if(p.min+h.min+g.min>=u){p.min=0;h.min=0;g.min=0;if(e.aaxis)delete e.aaxis.min;if(e.baxis)delete e.baxis.min;if(e.caxis)delete e.caxis.min}}},{"../../../components/color":50,"../../../plot_api/plot_template":203,"../../subplot_defaults":253,"./axis_defaults":257,"./layout_attributes":259}],259:[function(e,t,r){"use strict";var a=e("../../../components/color/attributes");var n=e("../../domain").attributes;var i=e("./axis_attributes");var o=e("../../../plot_api/edit_types").overrideAll;t.exports=o({domain:n({name:"ternary"}),bgcolor:{valType:"color",dflt:a.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i},"plot","from-root")},{"../../../components/color/attributes":49,"../../../plot_api/edit_types":196,"../../domain":238,"./axis_attributes":256}],260:[function(e,t,r){"use strict";var a=e("d3");var n=e("tinycolor2");var i=e("../../registry");var o=e("../../lib");var l=o._;var s=e("../../components/color");var u=e("../../components/drawing");var c=e("../cartesian/set_convert");var f=e("../../lib/extend").extendFlat;var d=e("../plots");var v=e("../cartesian/axes");var p=e("../../components/dragelement");var h=e("../../components/fx");var g=e("../../components/titles");var y=e("../cartesian/select").prepSelect;var m=e("../cartesian/select").clearSelect;var x=e("../cartesian/constants");function b(e,t){this.id=e.id;this.graphDiv=e.graphDiv;this.init(t);this.makeFramework(t)}t.exports=b;var _=b.prototype;_.init=function(e){this.container=e._ternarylayer;this.defs=e._defs;this.layoutId=e._uid;this.traceHash={};this.layers={}};_.plot=function(e,t){var r=this;var a=t[r.id];var n=t._size;r._hasClipOnAxisFalse=false;for(var i=0;i<e.length;i++){var o=e[i][0].trace;if(o.cliponaxis===false){r._hasClipOnAxisFalse=true;break}}r.updateLayers(a);r.adjustLayout(a,n);d.generalUpdatePerTraceModule(r.graphDiv,r,e,a);r.layers.plotbg.select("path").call(s.fill,a.bgcolor)};_.makeFramework=function(e){var t=this;var r=e[t.id];var a=t.clipId="clip"+t.layoutId+t.id;var n=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=o.ensureSingleById(e._clips,"clipPath",a,function(e){e.append("path").attr("d","M0,0Z")});t.clipDefRelative=o.ensureSingleById(e._clips,"clipPath",n,function(e){e.append("path").attr("d","M0,0Z")});t.plotContainer=o.ensureSingle(t.container,"g",t.id);t.updateLayers(r);u.setClipUrl(t.layers.backplot,a);u.setClipUrl(t.layers.grids,a)};_.updateLayers=function(e){var t=this;var r=t.layers;var n=["draglayer","plotbg","backplot","grids"];if(e.aaxis.layer==="below traces"){n.push("aaxis","aline")}if(e.baxis.layer==="below traces"){n.push("baxis","bline")}if(e.caxis.layer==="below traces"){n.push("caxis","cline")}n.push("frontplot");if(e.aaxis.layer==="above traces"){n.push("aaxis","aline")}if(e.baxis.layer==="above traces"){n.push("baxis","bline")}if(e.caxis.layer==="above traces"){n.push("caxis","cline")}var i=t.plotContainer.selectAll("g.toplevel").data(n,String);var o=["agrid","bgrid","cgrid"];i.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=a.select(this);r[e]=t;if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(e==="backplot"){t.append("g").classed("maplayer",true)}else if(e==="plotbg"){t.append("path").attr("d","M0,0Z")}else if(e==="aline"||e==="bline"||e==="cline"){t.append("path")}else if(e==="grids"){o.forEach(function(e){r[e]=t.append("g").classed("grid "+e,true);var a=e==="bgrid"?"x":"y";r[e].append("g").classed(a,true)})}});i.order()};var w=Math.sqrt(4/3);_.adjustLayout=function(e,t){var r=this,a=e.domain,n=(a.x[0]+a.x[1])/2,i=(a.y[0]+a.y[1])/2,o=a.x[1]-a.x[0],l=a.y[1]-a.y[0],d=o*t.w,v=l*t.h,p=e.sum,h=e.aaxis.min,g=e.baxis.min,y=e.caxis.min;var m,x,b,_,k,M;if(d>w*v){_=v;b=_*w}else{b=d;_=b/w}k=o*b/d;M=l*_/v;m=t.l+t.w*n-b/2;x=t.t+t.h*(1-i)-_/2;r.x0=m;r.y0=x;r.w=b;r.h=_;r.sum=p;r.xaxis={type:"linear",range:[h+2*y-p,p-h-2*g],domain:[n-k/2,n+k/2],_id:"x"};c(r.xaxis,r.graphDiv._fullLayout);r.xaxis.setScale();r.xaxis.isPtWithinRange=function(e){return e.a>=r.aaxis.range[0]&&e.a<=r.aaxis.range[1]&&e.b>=r.baxis.range[1]&&e.b<=r.baxis.range[0]&&e.c>=r.caxis.range[1]&&e.c<=r.caxis.range[0]};r.yaxis={type:"linear",range:[h,p-g-y],domain:[i-M/2,i+M/2],_id:"y"};c(r.yaxis,r.graphDiv._fullLayout);r.yaxis.setScale();r.yaxis.isPtWithinRange=function(){return true};var T=r.yaxis.domain[0];var A=r.aaxis=f({},e.aaxis,{visible:true,range:[h,p-g-y],side:"left",_counterangle:30,tickangle:(+e.aaxis.tickangle||0)-30,domain:[T,T+M*w],_axislayer:r.layers.aaxis,_gridlayer:r.layers.agrid,_pos:0,_id:"y",_length:b,_gridpath:"M0,0l"+_+",-"+b/2,automargin:false});c(A,r.graphDiv._fullLayout);A.setScale();var L=r.baxis=f({},e.baxis,{visible:true,range:[p-h-y,g],side:"bottom",_counterangle:30,domain:r.xaxis.domain,_axislayer:r.layers.baxis,_gridlayer:r.layers.bgrid,_counteraxis:r.aaxis,_pos:0,_id:"x",_length:b,_gridpath:"M0,0l-"+b/2+",-"+_,automargin:false});c(L,r.graphDiv._fullLayout);L.setScale();A._counteraxis=L;var S=r.caxis=f({},e.caxis,{visible:true,range:[p-h-g,y],side:"right",_counterangle:30,tickangle:(+e.caxis.tickangle||0)+30,domain:[T,T+M*w],_axislayer:r.layers.caxis,_gridlayer:r.layers.cgrid,_counteraxis:r.baxis,_pos:0,_id:"y",_length:b,_gridpath:"M0,0l-"+_+","+b/2,automargin:false});c(S,r.graphDiv._fullLayout);S.setScale();var C="M"+m+","+(x+_)+"h"+b+"l-"+b/2+",-"+_+"Z";r.clipDef.select("path").attr("d",C);r.layers.plotbg.select("path").attr("d",C);var O="M0,"+_+"h"+b+"l-"+b/2+",-"+_+"Z";r.clipDefRelative.select("path").attr("d",O);var z="translate("+m+","+x+")";r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",z);r.clipDefRelative.select("path").attr("transform",null);var P="translate("+(m-L._offset)+","+(x+_)+")";r.layers.baxis.attr("transform",P);r.layers.bgrid.attr("transform",P);var D="translate("+(m+b/2)+","+x+")rotate(30)translate(0,"+-A._offset+")";r.layers.aaxis.attr("transform",D);r.layers.agrid.attr("transform",D);var I="translate("+(m+b/2)+","+x+")rotate(-30)translate(0,"+-S._offset+")";r.layers.caxis.attr("transform",I);r.layers.cgrid.attr("transform",I);r.drawAxes(true);r.plotContainer.selectAll(".crisp").classed("crisp",false);r.layers.aline.select("path").attr("d",A.showline?"M"+m+","+(x+_)+"l"+b/2+",-"+_:"M0,0").call(s.stroke,A.linecolor||"#000").style("stroke-width",(A.linewidth||0)+"px");r.layers.bline.select("path").attr("d",L.showline?"M"+m+","+(x+_)+"h"+b:"M0,0").call(s.stroke,L.linecolor||"#000").style("stroke-width",(L.linewidth||0)+"px");r.layers.cline.select("path").attr("d",S.showline?"M"+(m+b/2)+","+x+"l"+b/2+","+_:"M0,0").call(s.stroke,S.linecolor||"#000").style("stroke-width",(S.linewidth||0)+"px");if(!r.graphDiv._context.staticPlot){r.initInteractions()}u.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId)};_.drawAxes=function(e){var t=this,r=t.graphDiv,a=t.id.substr(7)+"title",n=t.aaxis,i=t.baxis,o=t.caxis;v.doTicksSingle(r,n,true);v.doTicksSingle(r,i,true);v.doTicksSingle(r,o,true);if(e){var s=Math.max(n.showticklabels?n.tickfont.size/2:0,(o.showticklabels?o.tickfont.size*.75:0)+(o.ticks==="outside"?o.ticklen*.87:0));t.layers["a-title"]=g.draw(r,"a"+a,{propContainer:n,propName:t.id+".aaxis.title",placeholder:l(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-n.titlefont.size/3-s,"text-anchor":"middle"}});var u=(i.showticklabels?i.tickfont.size:0)+(i.ticks==="outside"?i.ticklen:0)+3;t.layers["b-title"]=g.draw(r,"b"+a,{propContainer:i,propName:t.id+".baxis.title",placeholder:l(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+i.titlefont.size*.83+u,"text-anchor":"middle"}});t.layers["c-title"]=g.draw(r,"c"+a,{propContainer:o,propName:t.id+".caxis.title",placeholder:l(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+o.titlefont.size*.83+u,"text-anchor":"middle"}})}};var k=x.MINZOOM/2+.87;var M="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z";var T="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z";var A="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z";var L="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z";var S=true;_.initInteractions=function(){var e=this,t=e.layers.plotbg.select("path").node(),r=e.graphDiv,a=r._fullLayout._zoomlayer;var c={element:t,gd:r,plotinfo:{xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(t,n,i){c.xaxes=[e.xaxis];c.yaxes=[e.yaxis];var o=r._fullLayout.dragmode;if(t.shiftKey){if(o==="pan")o="zoom";else o="pan"}if(o==="lasso")c.minDrag=1;else c.minDrag=undefined;if(o==="zoom"){c.moveFn=R;c.doneFn=F;D(t,n,i)}else if(o==="pan"){c.moveFn=j;c.doneFn=q;B();m(a)}else if(o==="select"||o==="lasso"){y(t,n,i,c,o)}},clickFn:function(t,a){C(r);if(t===2){var n={};n[e.id+".aaxis.min"]=0;n[e.id+".baxis.min"]=0;n[e.id+".caxis.min"]=0;r.emit("plotly_doubleclick",null);i.call("relayout",r,n)}h.click(r,a,e.id)}};var f,d,v,g,b,_,k,O,z,P;function D(r,i,o){var l=t.getBoundingClientRect();f=i-l.left;d=o-l.top;v={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]};b=v;g=e.aaxis.range[1]-v.a;_=n(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance();k="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z";O=false;z=a.append("path").attr("class","zoombox").attr("transform","translate("+e.x0+", "+e.y0+")").style({fill:_>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",k);P=a.append("path").attr("class","zoombox-corners").attr("transform","translate("+e.x0+", "+e.y0+")").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z");m(a)}function I(t,r){return 1-r/e.h}function E(t,r){return 1-(t+(e.h-r)/Math.sqrt(3))/e.w}function N(t,r){return(t-(e.h-r)/Math.sqrt(3))/e.w}function R(t,r){var a=f+t,n=d+r,i=Math.max(0,Math.min(1,I(f,d),I(a,n))),o=Math.max(0,Math.min(1,E(f,d),E(a,n))),l=Math.max(0,Math.min(1,N(f,d),N(a,n))),s=(i/2+l)*e.w,u=(1-i/2-o)*e.w,c=(s+u)/2,p=u-s,h=(1-i)*e.h,y=h-p/w;if(p<x.MINZOOM){b=v;z.attr("d",k);P.attr("d","M0,0Z")}else{b={a:v.a+i*g,b:v.b+o*g,c:v.c+l*g};z.attr("d",k+"M"+s+","+h+"H"+u+"L"+c+","+y+"L"+s+","+h+"Z");P.attr("d","M"+f+","+d+L+"M"+s+","+h+M+"M"+u+","+h+T+"M"+c+","+y+A)}if(!O){z.transition().style("fill",_>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);P.transition().style("opacity",1).duration(200);O=true}}function F(){C(r);if(b===v)return;var t={};t[e.id+".aaxis.min"]=b.a;t[e.id+".baxis.min"]=b.b;t[e.id+".caxis.min"]=b.c;i.call("relayout",r,t);if(S&&r.data&&r._context.showTips){o.notifier(l(r,"Double-click to zoom back out"),"long");S=false}}function B(){v={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]};b=v}function j(t,r){var a=t/e.xaxis._m,n=r/e.yaxis._m;b={a:v.a-n,b:v.b+(a+n)/2,c:v.c-(a-n)/2};var i=[b.a,b.b,b.c].sort(),o={a:i.indexOf(b.a),b:i.indexOf(b.b),c:i.indexOf(b.c)};if(i[0]<0){if(i[1]+i[0]/2<0){i[2]+=i[0]+i[1];i[0]=i[1]=0}else{i[2]+=i[0]/2;i[1]+=i[0]/2;i[0]=0}b={a:i[o.a],b:i[o.b],c:i[o.c]};r=(v.a-b.a)*e.yaxis._m;t=(v.c-b.c-v.b+b.b)*e.xaxis._m}var l="translate("+(e.x0+t)+","+(e.y0+r)+")";e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",l);var s="translate("+-t+","+-r+")";e.clipDefRelative.select("path").attr("transform",s);e.aaxis.range=[b.a,e.sum-b.b-b.c];e.baxis.range=[e.sum-b.a-b.c,b.b];e.caxis.range=[e.sum-b.a-b.b,b.c];e.drawAxes(false);e.plotContainer.selectAll(".crisp").classed("crisp",false);if(e._hasClipOnAxisFalse){e.plotContainer.select(".scatterlayer").selectAll(".trace").call(u.hideOutsideRangePoints,e)}}function q(){var t={};t[e.id+".aaxis.min"]=b.a;t[e.id+".baxis.min"]=b.b;t[e.id+".caxis.min"]=b.c;i.call("relayout",r,t)}t.onmousemove=function(a){h.hover(r,a,e.id);r._fullLayout._lasthover=t;r._fullLayout._hoversubplot=e.id};t.onmouseout=function(e){if(r._dragging)return;p.unhover(r,e)};p.init(c)};function C(e){a.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":50,"../../components/dragelement":72,"../../components/drawing":75,"../../components/fx":92,"../../components/titles":141,"../../lib":169,"../../lib/extend":163,"../../registry":261,"../cartesian/axes":213,"../cartesian/constants":218,"../cartesian/select":230,"../cartesian/set_convert":231,"../plots":245,d3:15,tinycolor2:33}],261:[function(e,t,r){"use strict";var a=e("./lib/loggers");var n=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var l=e("./lib/extend");var s=e("./plots/attributes");var u=e("./plots/layout_attributes");var c=l.extendFlat;var f=l.extendDeepAll;r.modules={};r.allCategories={};r.allTypes=[];r.subplotsRegistry={};r.transformsRegistry={};r.componentsRegistry={};r.layoutArrayContainers=[];r.layoutArrayRegexes=[];r.traceLayoutAttributes={};r.localeRegistry={};r.apiMethodRegistry={};r.register=function e(t){if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var a=0;a<t.length;a++){var n=t[a];if(!n){throw new Error("Invalid module was attempted to be registered!")}switch(n.moduleType){case"trace":d(n);break;case"transform":h(n);break;case"component":p(n);break;case"locale":g(n);break;case"apiMethod":var i=n.name;r.apiMethodRegistry[i]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};r.getModule=function(e){var t=r.modules[_(e)];if(!t)return false;return t._module};r.traceIs=function(e,t){e=_(e);if(e==="various")return false;var n=r.modules[e];if(!n){if(e&&e!=="area"){a.log("Unrecognized trace type "+e+".")}n=r.modules[s.type.dflt]}return!!n.categories[t]};r.getTransformIndices=function(e,t){var r=[];var a=e.transforms||[];for(var n=0;n<a.length;n++){if(a[n].type===t){r.push(n)}}return r};r.hasTransform=function(e,t){var r=e.transforms||[];for(var a=0;a<r.length;a++){if(r[a].type===t){return true}}return false};r.getComponentMethod=function(e,t){var a=r.componentsRegistry[e];if(!a)return n;return a[t]||n};r.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return r.apiMethodRegistry[e].apply(null,t)};function d(e){var t=e.name;var n=e.categories;var i=e.meta;if(r.modules[t]){a.log("Type "+t+" already registered");return}if(!r.subplotsRegistry[e.basePlotModule.name]){v(e.basePlotModule)}var o={};for(var l=0;l<n.length;l++){o[n[l]]=true;r.allCategories[n[l]]=true}r.modules[t]={_module:e,categories:o};if(i&&Object.keys(i).length){r.modules[t].meta=i}r.allTypes.push(t);for(var s in r.componentsRegistry){m(s,t)}if(e.layoutAttributes){c(r.traceLayoutAttributes,e.layoutAttributes)}}function v(e){var t=e.name;if(r.subplotsRegistry[t]){a.log("Plot type "+t+" already registered.");return}y(e);r.subplotsRegistry[t]=e;for(var n in r.componentsRegistry){b(n,e.name)}}function p(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;r.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(r.layoutArrayContainers,t)}y(e)}for(var a in r.modules){m(t,a)}for(var n in r.subplotsRegistry){b(t,n)}for(var o in r.transformsRegistry){x(t,o)}if(e.schema&&e.schema.layout){f(u,e.schema.layout)}}function h(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var n=typeof e.transform==="function";var i=typeof e.calcTransform==="function";if(!n&&!i){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(n&&i){a.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){a.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){a.log(t+" registered without a *supplyDefaults* method.")}r.transformsRegistry[e.name]=e;for(var l in r.componentsRegistry){x(l,e.name)}}function g(e){var t=e.name;var a=t.split("-")[0];var n=e.dictionary;var i=e.format;var o=n&&Object.keys(n).length;var l=i&&Object.keys(i).length;var s=r.localeRegistry;var u=s[t];if(!u)s[t]=u={};if(a!==t){var c=s[a];if(!c)s[a]=c={};if(o&&c.dictionary===u.dictionary){c.dictionary=n}if(l&&c.format===u.format){c.format=i}}if(o)u.dictionary=n;if(l)u.format=i}function y(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var a=0;a<t.length;a++){i(r.layoutArrayRegexes,t[a])}}}}function m(e,t){var a=r.componentsRegistry[e].schema;if(!a||!a.traces)return;var n=a.traces[t];if(n){f(r.modules[t]._module.attributes,n)}}function x(e,t){var a=r.componentsRegistry[e].schema;if(!a||!a.transforms)return;var n=a.transforms[t];if(n){f(r.transformsRegistry[t].attributes,n)}}function b(e,t){var a=r.componentsRegistry[e].schema;if(!a||!a.subplots)return;var n=r.subplotsRegistry[t];var i=n.layoutAttributes;var o=n.attr==="subplot"?n.name:n.attr;if(Array.isArray(o))o=o[0];var l=a.subplots[o];if(i&&l){f(i,l)}}function _(e){if(typeof e==="object")e=e.type;return e}},{"./lib/extend":163,"./lib/is_plain_object":171,"./lib/loggers":174,"./lib/noop":178,"./lib/push_unique":182,"./plots/attributes":210,"./plots/layout_attributes":243}],262:[function(e,t,r){"use strict";var a=e("../lib");var n=a.extendFlat;var i=a.extendDeep;function o(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:"",showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function l(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){if(t.framework&&t.framework.isPolar){t=t.framework.getConfig()}var a;var s=t.data;var u=t.layout;var c=i([],s);var f=i({},u,o(r.tileClass));var d=t._context||{};if(r.width)f.width=r.width;if(r.height)f.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){f.annotations=[];var v=Object.keys(f);for(a=0;a<v.length;a++){if(l(v[a])){f[v[a]].title=""}}for(a=0;a<c.length;a++){var p=c[a];p.showscale=false;if(p.marker)p.marker.showscale=false;if(p.type==="pie")p.textposition="none"}}if(Array.isArray(r.annotations)){for(a=0;a<r.annotations.length;a++){f.annotations.push(r.annotations[a])}}var h=Object.keys(f).filter(function(e){return e.match(/^scene\d*$/)});if(h.length){var g={};if(r.tileClass==="thumbnail"){g={title:"",showaxeslabels:false,showticklabels:false,linetickenable:false}}for(a=0;a<h.length;a++){var y=f[h[a]];if(!y.xaxis){y.xaxis={}}if(!y.yaxis){y.yaxis={}}if(!y.zaxis){y.zaxis={}}n(y.xaxis,g);n(y.yaxis,g);n(y.zaxis,g);y._scene=null}}var m=document.createElement("div");if(r.tileClass)m.className=r.tileClass;var x={gd:m,td:m,layout:f,data:c,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:d.mapboxAccessToken}};if(r.setBackground!=="transparent"){x.config.setBackground=r.setBackground||"opaque"}x.gd.defaultLayout=o(r.tileClass);return x}},{"../lib":169}],263:[function(e,t,r){"use strict";var a=e("../plot_api/to_image");var n=e("../lib");var i=e("./filesaver");function o(e,t){t=t||{};t.format=t.format||"png";return new Promise(function(r,o){if(e._snapshotInProgress){o(new Error("Snapshotting already in progress."))}if(n.isIE()&&t.format!=="svg"){o(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."))}e._snapshotInProgress=true;var l=a(e,t);var s=t.filename||e.fn||"newplot";s+="."+t.format;l.then(function(t){e._snapshotInProgress=false;return i(t,s)}).then(function(e){r(e)}).catch(function(t){e._snapshotInProgress=false;o(t)})})}t.exports=o},{"../lib":169,"../plot_api/to_image":206,"./filesaver":264}],264:[function(e,t,r){"use strict";var a=function(e,t){var r=document.createElement("a");var a="download"in r;var n=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);var i=new Promise(function(i,o){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){o(new Error("IE < 10 unsupported"))}if(n){document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/));i(t)}if(!t){t="download"}if(a){r.href=e;r.download=t;document.body.appendChild(r);r.click();document.body.removeChild(r);i(t)}if(typeof navigator!=="undefined"&&navigator.msSaveBlob){var l=e.split(/^data:image\/svg\+xml,/)[1];var s=decodeURIComponent(l);navigator.msSaveBlob(new Blob([s]),t);i(t)}o(new Error("download error"))});return i};t.exports=a},{}],265:[function(e,t,r){"use strict";r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){var t=e._fullLayout||{};var r=t._has&&t._has("polar");var a=!r&&e.data&&e.data[0]&&e.data[0].r;if(a)return;return function(){(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()})}}},{}],266:[function(e,t,r){"use strict";var a=e("./helpers");var n={getDelay:a.getDelay,getRedrawFunc:a.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=n},{"./cloneplot":262,"./download":263,"./helpers":265,"./svgtoimg":267,"./toimage":268,"./tosvg":269}],267:[function(e,t,r){"use strict";var a=e("../lib");var n=e("events").EventEmitter;function i(e){var t=e.emitter||new n;var r=new Promise(function(n,i){var o=window.Image;var l=e.svg;var s=e.format||"png";if(a.isIE()&&s!=="svg"){var u=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");i(u);if(!e.promise){return t.emit("error",u)}else{return r}}var c=e.canvas;var f=e.scale||1;var d=e.width||300;var v=e.height||150;var p=f*d;var h=f*v;var g=c.getContext("2d");var y=new o;var m="data:image/svg+xml,"+encodeURIComponent(l);c.width=p;c.height=h;y.onload=function(){var r;if(s!=="svg"){g.drawImage(y,0,0,p,h)}switch(s){case"jpeg":r=c.toDataURL("image/jpeg");break;case"png":r=c.toDataURL("image/png");break;case"webp":r=c.toDataURL("image/webp");break;case"svg":r=m;break;default:var a="Image format is not jpeg, png, svg or webp.";i(new Error(a));if(!e.promise){return t.emit("error",a)}}n(r);if(!e.promise){t.emit("success",r)}};y.onerror=function(r){i(r);if(!e.promise){return t.emit("error",r)}};y.src=m});if(e.promise){return r}return t}t.exports=i},{"../lib":169,events:17}],268:[function(e,t,r){"use strict";var a=e("events").EventEmitter;var n=e("../registry");var i=e("../lib");var o=e("./helpers");var l=e("./cloneplot");var s=e("./tosvg");var u=e("./svgtoimg");function c(e,t){var r=new a;var c=l(e,{format:"png"});var f=c.gd;f.style.position="absolute";f.style.left="-5000px";document.body.appendChild(f);function d(){var e=o.getDelay(f._fullLayout);setTimeout(function(){var e=s(f);var a=document.createElement("canvas");a.id=i.randstr();r=u({format:t.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:a,emitter:r,svg:e});r.clean=function(){if(f)document.body.removeChild(f)}},e)}var v=o.getRedrawFunc(f);n.call("plot",f,c.data,c.layout,c.config).then(v).then(d).catch(function(e){r.emit("error",e)});return r}t.exports=c},{"../lib":169,"../registry":261,"./cloneplot":262,"./helpers":265,"./svgtoimg":267,"./tosvg":269,events:17}],269:[function(e,t,r){"use strict";var a=e("d3");var n=e("../lib");var i=e("../components/drawing");var o=e("../components/color");var l=e("../constants/xmlns_namespaces");var s=/"/g;var u="TOBESTRIPPED";var c=new RegExp('("'+u+")|("+u+'")',"g");function f(e){var t=a.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function d(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,v){var p=t._fullLayout;var h=p._paper;var g=p._toppaper;var y=p.width;var m=p.height;var x;h.insert("rect",":first-child").call(i.setRect,0,0,y,m).call(o.fill,p.paper_bgcolor);var b=p._basePlotModules||[];for(x=0;x<b.length;x++){var _=b[x];if(_.toSVG)_.toSVG(t)}if(g){var w=g.node().childNodes;var k=Array.prototype.slice.call(w);for(x=0;x<k.length;x++){var M=k[x];if(M.childNodes.length)h.node().appendChild(M)}}if(p._draggers){p._draggers.remove()}h.node().style.background="";h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=a.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(s,u))}});h.selectAll(".point,.scatterpts").each(function(){var e=a.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(s,u))}});if(r==="pdf"||r==="eps"){h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}h.node().setAttributeNS(l.xmlns,"xmlns",l.svg);h.node().setAttributeNS(l.xmlns,"xmlns:xlink",l.xlink);if(r==="svg"&&v){h.attr("width",v*y);h.attr("height",v*m);h.attr("viewBox","0 0 "+y+" "+m)}var T=(new window.XMLSerializer).serializeToString(h.node());T=f(T);T=d(T);T=T.replace(c,"'");if(n.isIE()){T=T.replace(/"/gi,"'");T=T.replace(/(\('#)([^']*)('\))/gi,'("#$2")');T=T.replace(/(\\')/gi,'"')}return T}},{"../components/color":50,"../components/drawing":75,"../constants/xmlns_namespaces":153,"../lib":169,d3:15}],270:[function(e,t,r){"use strict";var a=e("../../lib").mergeArray;t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;a(r.text,t,"tx");a(r.hovertext,t,"htx");var i=r.marker;if(i){a(i.opacity,t,"mo");a(i.color,t,"mc");var o=i.line;if(o){a(o.color,t,"mlc");a(o.width,t,"mlw")}}}},{"../../lib":169}],271:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../components/colorscale/attributes");var i=e("../../components/colorbar/attributes");var o=e("../../plots/font_attributes");var l=e("../../lib/extend").extendFlat;var s=o({editType:"calc",arrayOk:true});var u=a.marker;var c=u.line;var f=l({},c.width,{dflt:0});var d=l({width:f,editType:"calc"},n("marker.line"));var v=l({line:d,editType:"calc"},n("marker"),{colorbar:i,opacity:{valType:"number",arrayOk:true,dflt:1,min:0,max:1,editType:"style"}});t.exports={x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,text:a.text,hovertext:a.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:true,editType:"calc"},textfont:l({},s,{}),insidetextfont:l({},s,{}),outsidetextfont:l({},s,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:l({},a.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:true,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:true,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:true,editType:"calc"},marker:v,selected:{marker:{opacity:a.selected.marker.opacity,color:a.selected.marker.color,editType:"style"},textfont:a.selected.textfont,editType:"style"},unselected:{marker:{opacity:a.unselected.marker.opacity,color:a.unselected.marker.color,editType:"style"},textfont:a.unselected.textfont,editType:"style"},r:a.r,t:a.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../lib/extend":163,"../../plots/font_attributes":239,"../scatter/attributes":367}],272:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib").isArrayOrTypedArray;var i=e("../../plots/cartesian/axes");var o=e("../../components/colorscale/has_colorscale");var l=e("../../components/colorscale/calc");var s=e("./arrays_to_calcdata");var u=e("../scatter/calc_selection");t.exports=function e(t,r){var c=i.getFromId(t,r.xaxis||"x"),f=i.getFromId(t,r.yaxis||"y"),d=r.orientation||(r.x&&!r.y?"h":"v"),v,p,h,g,y;if(d==="h"){v=c;h=c.makeCalcdata(r,"x");p=f.makeCalcdata(r,"y");y=r.xcalendar}else{v=f;h=f.makeCalcdata(r,"y");p=c.makeCalcdata(r,"x");y=r.ycalendar}var m=Math.min(p.length,h.length);var x=new Array(m);for(g=0;g<m;g++){x[g]={p:p[g],s:h[g]};if(r.ids){x[g].id=String(r.ids[g])}}var b=r.base,_;if(n(b)){for(g=0;g<Math.min(b.length,x.length);g++){_=v.d2c(b[g],0,y);if(a(_)){x[g].b=+_;x[g].hasB=1}else x[g].b=0}for(;g<x.length;g++){x[g].b=0}}else{_=v.d2c(b,0,y);var w=a(_);_=w?_:0;for(g=0;g<x.length;g++){x[g].b=_;if(w)x[g].hasB=1}}if(o(r,"marker")){l(r,r.marker.color,"marker","c")}if(o(r,"marker.line")){l(r,r.marker.line.color,"marker.line","c")}s(x,r);u(x,r);return x}},{"../../components/colorscale/calc":58,"../../components/colorscale/has_colorscale":64,"../../lib":169,"../../plots/cartesian/axes":213,"../scatter/calc_selection":369,"./arrays_to_calcdata":270,"fast-isnumeric":18}],273:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../components/color");var i=e("../../registry");var o=e("../scatter/xy_defaults");var l=e("../bar/style_defaults");var s=e("./attributes");t.exports=function e(t,r,u,c){function f(e,n){return a.coerce(t,r,s,e,n)}var d=a.coerceFont;var v=o(t,r,c,f);if(!v){r.visible=false;return}f("orientation",r.x&&!r.y?"h":"v");f("base");f("offset");f("width");f("text");f("hovertext");var p=f("textposition");var h=Array.isArray(p)||p==="auto",g=h||p==="inside",y=h||p==="outside";if(g||y){var m=d(f,"textfont",c.font);if(g)d(f,"insidetextfont",m);if(y)d(f,"outsidetextfont",m);f("constraintext");f("selected.textfont.color");f("unselected.textfont.color");f("cliponaxis")}l(t,r,f,u,c);var x=i.getComponentMethod("errorbars","supplyDefaults");x(t,r,n.defaultLine,{axis:"y"});x(t,r,n.defaultLine,{axis:"x",inherit:"y"});a.coerceSelectionMarkerOpacity(r,f)}},{"../../components/color":50,"../../lib":169,"../../registry":261,"../bar/style_defaults":283,"../scatter/xy_defaults":391,"./attributes":271}],274:[function(e,t,r){"use strict";var a=e("../../components/fx");var n=e("../../registry");var i=e("../../components/color");var o=e("../scatter/fill_hover_text");t.exports=function e(t,r,l,s){var u=t.cd;var c=u[0].trace;var f=u[0].t;var d=s==="closest";var v=t.maxHoverDistance;var p=t.maxSpikeDistance;var h,g,y,m,x,b,_;function w(e){return e[y]-e.w/2}function k(e){return e[y]+e.w/2}var M=d?w:function(e){return Math.min(w(e),e.p-f.bardelta/2)};var T=d?k:function(e){return Math.max(k(e),e.p+f.bardelta/2)};function A(e,t){return a.inbox(e-h,t-h,v+Math.min(1,Math.abs(t-e)/_)-1)}function L(e){return A(M(e),T(e))}function S(e){return A(w(e),k(e))}function C(e){return a.inbox(e.b-g,e[m]-g,v+(e[m]-g)/(e[m]-e.b)-1)}if(c.orientation==="h"){h=l;g=r;y="y";m="x";x=C;b=L}else{h=r;g=l;y="x";m="y";b=C;x=L}var O=t[y+"a"];var z=t[m+"a"];_=Math.abs(O.r2c(O.range[1])-O.r2c(O.range[0]));function P(e){return(x(e)+b(e))/2}var D=a.getDistanceFunction(s,x,b,P);a.getClosest(u,D,t);if(t.index===false)return;if(!d){M=function(e){return Math.min(w(e),e.p-f.bargroupwidth/2)};T=function(e){return Math.max(k(e),e.p+f.bargroupwidth/2)}}var I=t.index;var E=u[I];var N=E.mcc||c.marker.color;var R=E.mlcc||c.marker.line.color;var F=E.mlw||c.marker.line.width;if(i.opacity(N))t.color=N;else if(i.opacity(R)&&F)t.color=R;var B=c.base?E.b+E.s:E.s;t[m+"0"]=t[m+"1"]=z.c2p(E[m],true);t[m+"LabelVal"]=B;var j=f.extents[f.extents.round(E.p)];t[y+"0"]=O.c2p(d?M(E):j[0],true);t[y+"1"]=O.c2p(d?T(E):j[1],true);t[y+"LabelVal"]=E.p;t.spikeDistance=(C(E)+S(E))/2+p-v;t[y+"Spike"]=O.c2p(E.p,true);o(E,c,t);n.getComponentMethod("errorbars","hoverInfo")(E,c,t);return[t]}},{"../../components/color":50,"../../components/fx":92,"../../registry":261,"../scatter/fill_hover_text":374}],275:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.layoutAttributes=e("./layout_attributes");a.supplyDefaults=e("./defaults");a.supplyLayoutDefaults=e("./layout_defaults");a.calc=e("./calc");a.setPositions=e("./set_positions");a.colorbar=e("../scatter/marker_colorbar");a.arraysToCalcdata=e("./arrays_to_calcdata");a.plot=e("./plot");a.style=e("./style").style;a.styleOnSelect=e("./style").styleOnSelect;a.hoverPoints=e("./hover");a.selectPoints=e("./select");a.moduleType="trace";a.name="bar";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"../scatter/marker_colorbar":384,"./arrays_to_calcdata":270,"./attributes":271,"./calc":272,"./defaults":273,"./hover":274,"./layout_attributes":276,"./layout_defaults":277,"./plot":278,"./select":279,"./set_positions":280,"./style":282}],276:[function(e,t,r){"use strict";t.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],277:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../plots/cartesian/axes");var i=e("../../lib");var o=e("./layout_attributes");t.exports=function(e,t,r){function l(r,a){return i.coerce(e,t,o,r,a)}var s=false,u=false,c=false,f={};for(var d=0;d<r.length;d++){var v=r[d];if(a.traceIs(v,"bar"))s=true;else continue;if(e.barmode!=="overlay"&&e.barmode!=="stack"){var p=v.xaxis+v.yaxis;if(f[p])c=true;f[p]=true}if(v.visible&&v.type==="histogram"){var h=n.getFromId({_fullLayout:t},v[v.orientation==="v"?"xaxis":"yaxis"]);if(h.type!=="category")u=true}}if(!s)return;var g=l("barmode");if(g!=="overlay")l("barnorm");l("bargap",u&&!c?0:.2);l("bargroupgap")}},{"../../lib":169,"../../plots/cartesian/axes":213,"../../registry":261,"./layout_attributes":276}],278:[function(e,t,r){"use strict";var a=e("d3");var n=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../lib");var l=e("../../lib/svg_text_utils");var s=e("../../components/color");var u=e("../../components/drawing");var c=e("../../registry");var f=e("./attributes"),d=f.text,v=f.textposition,p=f.textfont,h=f.insidetextfont,g=f.outsidetextfont;var y=3;t.exports=function e(t,r,i,l){var f=r.xaxis;var d=r.yaxis;var v=t._fullLayout;var p=l.selectAll("g.trace.bars").data(i,function(e){return e[0].trace.uid});p.enter().append("g").attr("class","trace bars").append("g").attr("class","points");p.exit().remove();p.order();p.each(function(e){var i=e[0];var l=i.t;var c=i.trace;var p=a.select(this);if(!r.isRangePlot)i.node3=p;var h=l.poffset;var g=Array.isArray(h);var y=p.select("g.points").selectAll("g.point").data(o.identity);y.enter().append("g").classed("point",true);y.exit().remove();y.each(function(i,l){var p=a.select(this);var y=i.p+(g?h[l]:h),x=y+i.w,b=i.b,_=b+i.s;var w,k,M,T;if(c.orientation==="h"){M=d.c2p(y,true);T=d.c2p(x,true);w=f.c2p(b,true);k=f.c2p(_,true);i.ct=[k,(M+T)/2]}else{w=f.c2p(y,true);k=f.c2p(x,true);M=d.c2p(b,true);T=d.c2p(_,true);i.ct=[(w+k)/2,T]}if(!n(w)||!n(k)||!n(M)||!n(T)||w===k||M===T){p.remove();return}var A=(i.mlw+1||c.marker.line.width+1||(i.trace?i.trace.marker.line.width:0)+1)-1,L=a.round(A/2%1,2);function S(e){return v.bargap===0&&v.bargroupgap===0?a.round(Math.round(e)-L,2):e}function C(e,t){return Math.abs(e-t)>=2?S(e):e>t?Math.ceil(e):Math.floor(e)}if(!t._context.staticPlot){var O=s.opacity(i.mc||c.marker.color),z=O<1||A>.01?S:C;w=z(w,k);k=z(k,w);M=z(M,T);T=z(T,M)}o.ensureSingle(p,"path").style("vector-effect","non-scaling-stroke").attr("d","M"+w+","+M+"V"+T+"H"+k+"V"+M+"Z").call(u.setClipUrl,r.layerClipId);m(t,p,e,l,w,k,M,T);if(r.layerClipId){u.hideOutsideRangePoint(e[l],p.select("text"),f,d,c.xcalendar,c.ycalendar)}});var x=e[0].trace.cliponaxis===false;u.setClipUrl(p,x?null:r.layerClipId)});c.getComponentMethod("errorbars","plot")(p,r)};function m(e,t,r,a,n,i,s,c){var f;function d(t,r,a){var n=o.ensureSingle(t,"text").text(r).attr({class:"bartext bartext-"+f,transform:"","text-anchor":"middle","data-notex":1}).call(u.font,a).call(l.convertToTspans,e);return n}var v=r[0].trace,p=v.orientation;var h=w(v,a);f=k(v,a);if(!h||f==="none"){t.select("text").remove();return}var g=M(v,a,e._fullLayout.font),m=T(v,a,g),_=A(v,a,g);var L=e._fullLayout.barmode,S=L==="stack",C=L==="relative",O=S||C,z=r[a],P=!O||z._outmost,D=Math.abs(i-n)-2*y,I=Math.abs(c-s)-2*y,E,N,R,F;if(f==="outside"){if(!P)f="inside"}if(f==="auto"){if(P){f="inside";E=d(t,h,m);N=u.bBox(E.node()),R=N.width,F=N.height;var B=R>0&&F>0,j=R<=D&&F<=I,q=R<=I&&F<=D,H=p==="h"?D>=R*(I/F):I>=F*(D/R);if(B&&(j||q||H)){f="inside"}else{f="outside";E.remove();E=null}}else f="inside"}if(!E){E=d(t,h,f==="outside"?_:m);N=u.bBox(E.node()),R=N.width,F=N.height;if(R<=0||F<=0){E.remove();return}}var V,U;if(f==="outside"){U=v.constraintext==="both"||v.constraintext==="outside";V=b(n,i,s,c,N,p,U)}else{U=v.constraintext==="both"||v.constraintext==="inside";V=x(n,i,s,c,N,p,U)}E.attr("transform",V)}function x(e,t,r,a,n,i,o){var l=n.width,s=n.height,u=(n.left+n.right)/2,c=(n.top+n.bottom)/2,f=Math.abs(t-e),d=Math.abs(a-r),v,p,h,g;var m;if(f>2*y&&d>2*y){m=y;f-=2*m;d-=2*m}else m=0;var x,b;if(l<=f&&s<=d){x=false;b=1}else if(l<=d&&s<=f){x=true;b=1}else if(l<s===f<d){x=false;b=o?Math.min(f/l,d/s):1}else{x=true;b=o?Math.min(d/l,f/s):1}if(x)x=90;if(x){v=b*s;p=b*l}else{v=b*l;p=b*s}if(i==="h"){if(t<e){h=t+m+v/2;g=(r+a)/2}else{h=t-m-v/2;g=(r+a)/2}}else{if(a>r){h=(e+t)/2;g=a-m-p/2}else{h=(e+t)/2;g=a+m+p/2}}return _(u,c,h,g,b,x)}function b(e,t,r,a,n,i,o){var l=i==="h"?Math.abs(a-r):Math.abs(t-e),s;if(l>2*y){s=y}var u=1;if(o){u=i==="h"?Math.min(1,l/n.height):Math.min(1,l/n.width)}var c=(n.left+n.right)/2,f=(n.top+n.bottom)/2,d,v,p,h;d=u*n.width;v=u*n.height;if(i==="h"){if(t<e){p=t-s-d/2;h=(r+a)/2}else{p=t+s+d/2;h=(r+a)/2}}else{if(a>r){p=(e+t)/2;h=a+s+v/2}else{p=(e+t)/2;h=a-s-v/2}}return _(c,f,p,h,u,false)}function _(e,t,r,a,n,i){var o,l,s;if(n<1)o="scale("+n+") ";else{n=1;o=""}l=i?"rotate("+i+" "+e+" "+t+") ":"";var u=r-n*e,c=a-n*t;s="translate("+u+" "+c+")";return s+o+l}function w(e,t){var r=S(e.text,t);return C(d,r)}function k(e,t){var r=S(e.textposition,t);return O(v,r)}function M(e,t,r){return L(p,e.textfont,t,r)}function T(e,t,r){return L(h,e.insidetextfont,t,r)}function A(e,t,r){return L(g,e.outsidetextfont,t,r)}function L(e,t,r,a){t=t||{};var n=S(t.family,r),i=S(t.size,r),o=S(t.color,r);return{family:C(e.family,n,a.family),size:z(e.size,i,a.size),color:P(e.color,o,a.color)}}function S(e,t){var r;if(!Array.isArray(e))r=e;else if(t<e.length)r=e[t];return r}function C(e,t,r){if(typeof t==="string"){if(t||!e.noBlank)return t}else if(typeof t==="number"){if(!e.strict)return String(t)}return r!==undefined?r:e.dflt}function O(e,t,r){if(e.coerceNumber)t=+t;if(e.values.indexOf(t)!==-1)return t;return r!==undefined?r:e.dflt}function z(e,t,r){if(n(t)){t=+t;var a=e.min,i=e.max,o=a!==undefined&&t<a||i!==undefined&&t>i;if(!o)return t}return r!==undefined?r:e.dflt}function P(e,t,r){if(i(t).isValid())return t;return r!==undefined?r:e.dflt}},{"../../components/color":50,"../../components/drawing":75,"../../lib":169,"../../lib/svg_text_utils":190,"../../registry":261,"./attributes":271,d3:15,"fast-isnumeric":18,tinycolor2:33}],279:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=[];var l;if(r===false){for(l=0;l<a.length;l++){a[l].selected=0}}else{for(l=0;l<a.length;l++){var s=a[l];if(r.contains(s.ct)){o.push({pointNumber:l,x:n.c2d(s.x),y:i.c2d(s.y)});s.selected=1}else{s.selected=0}}}return o}},{}],280:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib").isArrayOrTypedArray;var i=e("../../constants/numerical").BADNUM;var o=e("../../registry");var l=e("../../plots/cartesian/axes");var s=e("./sieve.js");t.exports=function e(t,r){var a=r.xaxis,n=r.yaxis;var i=t._fullData,l=t.calcdata,s=[],c=[],f;for(f=0;f<i.length;f++){var d=i[f];if(d.visible===true&&o.traceIs(d,"bar")&&d.xaxis===a._id&&d.yaxis===n._id){if(d.orientation==="h"){s.push(l[f])}else{c.push(l[f])}}}u(t,a,n,c);u(t,n,a,s)};function u(e,t,r,a){if(!a.length)return;var n=e._fullLayout.barmode,i=n==="overlay",o=n==="group",l,s,u,v,p;if(i){c(e,t,r,a)}else if(o){l=[];s=[];for(u=0;u<a.length;u++){v=a[u];p=v[0].trace;if(p.offset===undefined)s.push(v);else l.push(v)}if(s.length){f(e,t,r,s)}if(l.length){c(e,t,r,l)}}else{l=[];s=[];for(u=0;u<a.length;u++){v=a[u];p=v[0].trace;if(p.base===undefined)s.push(v);else l.push(v)}if(s.length){d(e,t,r,s)}if(l.length){c(e,t,r,l)}}M(a,t)}function c(e,t,r,a){var n=e._fullLayout.barnorm,i=false,o=!n;for(var l=0;l<a.length;l++){var u=a[l];var c=new s([u],i,o);v(e,t,c);if(n){_(e,r,c);w(e,r,c)}else{x(e,r,c)}}}function f(e,t,r,a){var n=e._fullLayout,i=n.barnorm,o=false,l=!i,u=new s(a,o,l);p(e,t,u);if(i){_(e,r,u);w(e,r,u)}else{x(e,r,u)}}function d(e,t,r,a){var n=e._fullLayout,o=n.barmode,l=o==="stack",u=o==="relative",c=e._fullLayout.barnorm,f=u,d=!(c||l||u),p=new s(a,f,d);v(e,t,p);b(e,r,p);for(var h=0;h<a.length;h++){var g=a[h];for(var y=0;y<g.length;y++){var m=g[y];if(m.s===i)continue;var x=m.b+m.s===p.get(m.p,m.s);if(x)m._outmost=true}}if(c)w(e,r,p)}function v(e,t,r){var a=e._fullLayout,n=a.bargap,i=a.bargroupgap,o=r.minDiff,l=r.traces,s,u,c,f;var d=o*(1-n),v=d,p=v*(1-i);var m=-p/2;for(s=0;s<l.length;s++){u=l[s];c=u[0];f=c.t;f.barwidth=p;f.poffset=m;f.bargroupwidth=d;f.bardelta=o}r.binWidth=l[0][0].t.barwidth/100;h(r);g(e,t,r);y(e,t,r)}function p(e,t,r){var a=e._fullLayout,n=a.bargap,i=a.bargroupgap,o=r.positions,l=r.distinctPositions,s=r.minDiff,u=r.traces,c,f,d,v;var p=o.length!==l.length;var m=u.length,x=s*(1-n),b=p?x/m:x,_=b*(1-i);for(c=0;c<m;c++){f=u[c];d=f[0];var w=p?((2*c+1-m)*b-_)/2:-_/2;v=d.t;v.barwidth=_;v.poffset=w;v.bargroupwidth=x;v.bardelta=s}r.binWidth=u[0][0].t.barwidth/100;h(r);g(e,t,r);y(e,t,r,p)}function h(e){var t=e.traces,r,i,o,l,s,u;for(r=0;r<t.length;r++){i=t[r];o=i[0];l=o.trace;u=o.t;var c=l.offset,f=u.poffset,d;if(n(c)){d=c.slice(0,i.length);for(s=0;s<d.length;s++){if(!a(d[s])){d[s]=f}}for(s=d.length;s<i.length;s++){d.push(f)}u.poffset=d}else if(c!==undefined){u.poffset=c}var v=l.width,p=u.barwidth;if(n(v)){var h=v.slice(0,i.length);for(s=0;s<h.length;s++){if(!a(h[s]))h[s]=p}for(s=h.length;s<i.length;s++){h.push(p)}u.barwidth=h;if(c===undefined){d=[];for(s=0;s<i.length;s++){d.push(f+(p-h[s])/2)}u.poffset=d}}else if(v!==undefined){u.barwidth=v;if(c===undefined){u.poffset=f+(p-v)/2}}}}function g(e,t,r){var a=r.traces,n=k(t);for(var i=0;i<a.length;i++){var o=a[i],l=o[0].t,s=l.poffset,u=Array.isArray(s),c=l.barwidth,f=Array.isArray(c);for(var d=0;d<o.length;d++){var v=o[d];var p=v.w=f?c[d]:c;v[n]=v.p+(u?s[d]:s)+p/2}}}function y(e,t,r,a){var n=r.traces,i=r.distinctPositions,o=i[0],s=r.minDiff,u=s/2;l.minDtick(t,s,o,a);var c=Math.min.apply(Math,i)-u,f=Math.max.apply(Math,i)+u;for(var d=0;d<n.length;d++){var v=n[d],p=v[0],h=p.trace;if(h.width===undefined&&h.offset===undefined){continue}var g=p.t,y=g.poffset,m=g.barwidth,x=Array.isArray(y),b=Array.isArray(m);for(var _=0;_<v.length;_++){var w=v[_],k=x?y[_]:y,M=b?m[_]:m,T=w.p,A=T+k,L=A+M;c=Math.min(c,A);f=Math.max(f,L)}}l.expand(t,[c,f],{padded:false})}function m(e,t){if(a(e[0]))e[0]=Math.min(e[0],t);else e[0]=t;if(a(e[1]))e[1]=Math.max(e[1],t);else e[1]=t}function x(e,t,r){var n=r.traces,i=k(t),o=[null,null];for(var s=0;s<n.length;s++){var u=n[s];for(var c=0;c<u.length;c++){var f=u[c],d=f.b,v=d+f.s;f[i]=v;if(a(t.c2l(v)))m(o,v);if(f.hasB&&a(t.c2l(d)))m(o,d)}}l.expand(t,o,{tozero:true,padded:true})}function b(e,t,r){var n=e._fullLayout,o=n.barnorm,s=k(t),u=r.traces,c,f,d,v;var p=[null,null];for(c=0;c<u.length;c++){f=u[c];for(d=0;d<f.length;d++){v=f[d];if(v.s===i)continue;var h=r.put(v.p,v.b+v.s),g=h+v.b+v.s;v.b=h;v[s]=g;if(!o){if(a(t.c2l(g)))m(p,g);if(v.hasB&&a(t.c2l(h)))m(p,h)}}}if(!o)l.expand(t,p,{tozero:true,padded:true})}function _(e,t,r){var a=r.traces;for(var n=0;n<a.length;n++){var o=a[n];for(var l=0;l<o.length;l++){var s=o[l];if(s.s!==i)r.put(s.p,s.b+s.s)}}}function w(e,t,r){var n=r.traces,o=k(t),s=e._fullLayout.barnorm==="fraction"?1:100,u=s/1e9,c=t.l2c(t.c2l(0)),f=e._fullLayout.barmode==="stack"?s:c,d=[c,f],v=false;function p(e){if(a(t.c2l(e))&&(e<c-u||e>f+u||!a(c))){v=true;m(d,e)}}for(var h=0;h<n.length;h++){var g=n[h];for(var y=0;y<g.length;y++){var x=g[y];if(x.s===i)continue;var b=Math.abs(s/r.get(x.p,x.s));x.b*=b;x.s*=b;var _=x.b,w=_+x.s;x[o]=w;p(w);if(x.hasB)p(_)}}l.expand(t,d,{tozero:true,padded:v})}function k(e){return e._id.charAt(0)}function M(e,t){var r=t._id.charAt(0);var n={};var i=Infinity;var o=-Infinity;var l,s,u;for(l=0;l<e.length;l++){u=e[l];for(s=0;s<u.length;s++){var c=u[s].p;if(a(c)){i=Math.min(i,c);o=Math.max(o,c)}}}var f=1e4/(o-i);var d=n.round=function(e){return String(Math.round(f*(e-i)))};for(l=0;l<e.length;l++){u=e[l];u[0].t.extents=n;for(s=0;s<u.length;s++){var v=u[s];var p=v[r]-v.w/2;if(a(p)){var h=v[r]+v.w/2;var g=d(v.p);if(n[g]){n[g]=[Math.min(p,n[g][0]),Math.max(h,n[g][1])]}else{n[g]=[p,h]}}}}}},{"../../constants/numerical":151,"../../lib":169,"../../plots/cartesian/axes":213,"../../registry":261,"./sieve.js":281,"fast-isnumeric":18}],281:[function(e,t,r){"use strict";t.exports=i;var a=e("../../lib");var n=e("../../constants/numerical").BADNUM;function i(e,t,r){this.traces=e;this.separateNegativeValues=t;this.dontMergeOverlappingData=r;var i=Infinity;var o=[];for(var l=0;l<e.length;l++){var s=e[l];for(var u=0;u<s.length;u++){var c=s[u];if(c.p!==n)o.push(c.p)}if(s[0]&&s[0].width1){i=Math.min(s[0].width1,i)}}this.positions=o;var f=a.distinctVals(o);this.distinctPositions=f.vals;if(f.vals.length===1&&i!==Infinity)this.minDiff=i;else this.minDiff=Math.min(f.minDiff,i);this.binWidth=this.minDiff;this.bins={}}i.prototype.put=function e(t,r){var a=this.getLabel(t,r),n=this.bins[a]||0;this.bins[a]=n+r;return n};i.prototype.get=function e(t,r){var a=this.getLabel(t,r);return this.bins[a]||0};i.prototype.getLabel=function e(t,r){var a=r<0&&this.separateNegativeValues?"v":"^",n=this.dontMergeOverlappingData?t:Math.round(t/this.binWidth);return a+n}},{"../../constants/numerical":151,"../../lib":169}],282:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/drawing");var i=e("../../registry");function o(e,t){var r=t?t[0].node3:a.select(e).selectAll("g.trace.bars");var n=r.size();var o=e._fullLayout;r.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){if(o.barmode==="stack"&&n>1||o.bargap===0&&o.bargroupgap===0&&!e[0].trace.marker.line.width){a.select(this).attr("shape-rendering","crispEdges")}});r.selectAll("g.points").each(function(t){var r=a.select(this);var n=t[0].trace;l(r,n,e)});i.getComponentMethod("errorbars","style")(r)}function l(e,t,r){var i=e.selectAll("path");var o=e.selectAll("text");n.pointStyle(i,t,r);o.each(function(e){var r=a.select(this);var i;if(r.classed("bartext-inside")){i=t.insidetextfont}else if(r.classed("bartext-outside")){i=t.outsidetextfont}if(!i)i=t.textfont;function o(t){var r=i[t];return Array.isArray(r)?r[e.i]:r}n.font(r,o("family"),o("size"),o("color"))})}function s(e,t){var r=t[0].node3;var a=t[0].trace;if(a.selectedpoints){n.selectedPointStyle(r.selectAll("path"),a);n.selectedTextStyle(r.selectAll("text"),a)}else{l(r,a,e)}}t.exports={style:o,styleOnSelect:s}},{"../../components/drawing":75,"../../registry":261,d3:15}],283:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");t.exports=function e(t,r,o,l,s){o("marker.color",l);if(n(t,"marker")){i(t,r,s,o,{prefix:"marker.",cLetter:"c"})}o("marker.line.color",a.defaultLine);if(n(t,"marker.line")){i(t,r,s,o,{prefix:"marker.line.",cLetter:"c"})}o("marker.line.width");o("marker.opacity");o("selected.marker.color");o("unselected.marker.color")}},{"../../components/color":50,"../../components/colorscale/defaults":60,"../../components/colorscale/has_colorscale":64}],284:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../components/color/attributes");var i=e("../../lib/extend").extendFlat;var o=a.marker;var l=o.line;t.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:i({},a.text,{}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calcIfAutorange"},notched:{valType:"boolean",editType:"calcIfAutorange"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calcIfAutorange"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",false],dflt:"outliers",editType:"calcIfAutorange"},boxmean:{valType:"enumerated",values:[true,"sd",false],dflt:false,editType:"calcIfAutorange"},jitter:{valType:"number",min:0,max:1,editType:"calcIfAutorange"},pointpos:{valType:"number",min:-2,max:2,editType:"calcIfAutorange"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:i({},o.symbol,{arrayOk:false,editType:"plot"}),opacity:i({},o.opacity,{arrayOk:false,dflt:1,editType:"style"}),size:i({},o.size,{arrayOk:false,editType:"calcIfAutorange"}),color:i({},o.color,{arrayOk:false,editType:"style"}),line:{color:i({},l.color,{arrayOk:false,dflt:n.defaultLine,editType:"style"}),width:i({},l.width,{arrayOk:false,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,selected:{marker:a.selected.marker,editType:"style"},unselected:{marker:a.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":49,"../../lib/extend":163,"../scatter/attributes":367}],285:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=n._;var o=e("../../plots/cartesian/axes");t.exports=function e(t,r){var p=t._fullLayout;var h=o.getFromId(t,r.xaxis||"x");var g=o.getFromId(t,r.yaxis||"y");var y=[];var m=r.type==="violin"?"_numViolins":"_numBoxes";var x;var b,_;var w,k;if(r.orientation==="h"){b=h;_="x";w=g;k="y"}else{b=g;_="y";w=h;k="x"}var M=b.makeCalcdata(r,_);var T=l(r,k,w,M,p[m]);var A=n.distinctVals(T);var L=A.vals;var S=A.minDiff/2;var C=s(L,S);var O=L.length;var z=u(O);for(x=0;x<r._length;x++){var P=M[x];if(!a(P))continue;var D=n.findBin(T[x],C);if(D>=0&&D<O){var I={v:P,i:x};c(I,r,x);z[D].push(I)}}for(x=0;x<O;x++){if(z[x].length>0){var E=z[x].sort(d);var N=E.map(v);var R=N.length;var F={pos:L[x],pts:E};F.min=N[0];F.max=N[R-1];F.mean=n.mean(N,R);F.sd=n.stdev(N,R,F.mean);F.q1=n.interp(N,.25);F.med=n.interp(N,.5);F.q3=n.interp(N,.75);F.lf=Math.min(F.q1,N[Math.min(n.findBin(2.5*F.q1-1.5*F.q3,N,true)+1,R-1)]);F.uf=Math.max(F.q3,N[Math.max(n.findBin(2.5*F.q3-1.5*F.q1,N),0)]);F.lo=4*F.q1-3*F.q3;F.uo=4*F.q3-3*F.q1;var B=F.q3-F.q1;var j=1.57*B/Math.sqrt(R);F.ln=F.med-j;F.un=F.med+j;y.push(F)}}f(y,r);o.expand(b,M,{padded:true});if(y.length>0){y[0].t={num:p[m],dPos:S,posLetter:k,valLetter:_,labels:{med:i(t,"median:"),min:i(t,"min:"),q1:i(t,"q1:"),q3:i(t,"q3:"),max:i(t,"max:"),mean:r.boxmean==="sd"?i(t,"mean \xb1 \u03c3:"):i(t,"mean:"),lf:i(t,"lower fence:"),uf:i(t,"upper fence:")}};p[m]++;return y}else{return[{t:{empty:true}}]}};function l(e,t,r,i,o){if(t in e){return r.makeCalcdata(e,t)}var l;if(t+"0"in e){l=e[t+"0"]}else if("name"in e&&(r.type==="category"||a(e.name)&&["linear","log"].indexOf(r.type)!==-1||n.isDateTime(e.name)&&r.type==="date")){l=e.name}else{l=o}var s=r.d2c(l,0,e[t+"calendar"]);return i.map(function(){return s})}function s(e,t){var r=e.length;var a=new Array(r+1);for(var n=0;n<r;n++){a[n]=e[n]-t}a[r]=e[r-1]+t;return a}function u(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=[]}return t}function c(e,t,r){var a={text:"tx"};for(var n in a){if(Array.isArray(t[n])){e[a[n]]=t[n][r]}}}function f(e,t){if(n.isArrayOrTypedArray(t.selectedpoints)){for(var r=0;r<e.length;r++){var a=e[r].pts||[];var i={};for(var o=0;o<a.length;o++){i[a[o].i]=o}n.tagSelected(a,t,i)}}}function d(e,t){return e.v-t.v}function v(e){return e.v}},{"../../lib":169,"../../plots/cartesian/axes":213,"fast-isnumeric":18}],286:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../registry");var i=e("../../components/color");var o=e("./attributes");function l(e,t,r,n){function l(r,n){return a.coerce(e,t,o,r,n)}s(e,t,l,n);if(t.visible===false)return;l("line.color",(e.marker||{}).color||r);l("line.width");l("fillcolor",i.addOpacity(t.line.color,.5));l("whiskerwidth");l("boxmean");var c=l("notched",e.notchwidth!==undefined);if(c)l("notchwidth");u(e,t,l,{prefix:"box"})}function s(e,t,r,a){var i=r("y");var o=r("x");var l=o&&o.length;var s,u;if(i&&i.length){s="v";if(l){u=Math.min(o.length,i.length)}else{r("x0");u=i.length}}else if(l){s="h";r("y0");u=o.length}else{t.visible=false;return}t._length=u;var c=n.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y"],a);r("orientation",s)}function u(e,t,r,n){var i=n.prefix;var l=a.coerce2(e,t,o,"marker.outliercolor");var s=r("marker.line.outliercolor");var u=r(i+"points",l||s?"suspectedoutliers":undefined);if(u){r("jitter",u==="all"?.3:0);r("pointpos",u==="all"?-1.5:0);r("marker.symbol");r("marker.opacity");r("marker.size");r("marker.color",t.line.color);r("marker.line.color");r("marker.line.width");if(u==="suspectedoutliers"){r("marker.line.outliercolor",t.marker.color);r("marker.line.outlierwidth")}r("selected.marker.color");r("unselected.marker.color");r("selected.marker.size");r("unselected.marker.size");r("text")}else{delete t.marker}r("hoveron");a.coerceSelectionMarkerOpacity(t,r)}t.exports={supplyDefaults:l,handleSampleDefaults:s,handlePointsDefaults:u}},{"../../components/color":50,"../../lib":169,"../../registry":261,"./attributes":284}],287:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axes");var n=e("../../lib");var i=e("../../components/fx");var o=e("../../components/color");var l=e("../scatter/fill_hover_text");function s(e,t,r,a){var n=e.cd;var i=n[0].trace;var o=i.hoveron;var l=[];var s;if(o.indexOf("boxes")!==-1){l=l.concat(u(e,t,r,a))}if(o.indexOf("points")!==-1){s=c(e,t,r)}if(a==="closest"){if(s)return[s];return l}if(s){l.push(s);return l}return l}function u(e,t,r,l){var s=e.cd;var u=e.xa;var c=e.ya;var f=s[0].trace;var d=s[0].t;var v=f.type==="violin";var p=[];var h,g,y,m,x,b,_,w,k,M,T;var A=d.bdPos;var L=d.wHover;var S=function(e){return e.pos+d.bPos-b};if(v&&f.side!=="both"){if(f.side==="positive"){k=function(e){var t=S(e);return i.inbox(t,t+L,M)}}if(f.side==="negative"){k=function(e){var t=S(e);return i.inbox(t-L,t,M)}}}else{k=function(e){var t=S(e);return i.inbox(t-L,t+L,M)}}var C;if(v){C=function(e){return i.inbox(e.span[0]-x,e.span[1]-x,M)}}else{C=function(e){return i.inbox(e.min-x,e.max-x,M)}}if(f.orientation==="h"){x=t;b=r;_=C;w=k;h="y";y=c;g="x";m=u}else{x=r;b=t;_=k;w=C;h="x";y=u;g="y";m=c}var O=Math.min(1,A/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));M=e.maxHoverDistance-O;T=e.maxSpikeDistance-O;function z(e){return(_(e)+w(e))/2}var P=i.getDistanceFunction(l,_,w,z);i.getClosest(s,P,e);if(e.index===false)return[];var D=s[e.index];var I=f.line.color;var E=(f.marker||{}).color;if(o.opacity(I)&&f.line.width)e.color=I;else if(o.opacity(E)&&f.boxpoints)e.color=E;else e.color=f.fillcolor;e[h+"0"]=y.c2p(D.pos+d.bPos-A,true);e[h+"1"]=y.c2p(D.pos+d.bPos+A,true);e[h+"LabelVal"]=D.pos;var N=h+"Spike";e.spikeDistance=z(D)*T/M;e[N]=y.c2p(D.pos,true);var R={};var F=["med","min","q1","q3","max"];if(f.boxmean||(f.meanline||{}).visible){F.push("mean")}if(f.boxpoints||f.points){F.push("lf","uf")}for(var B=0;B<F.length;B++){var j=F[B];if(!(j in D)||D[j]in R)continue;R[D[j]]=true;var q=D[j];var H=m.c2p(q,true);var V=n.extendFlat({},e);V[g+"0"]=V[g+"1"]=H;V[g+"LabelVal"]=q;V[g+"Label"]=(d.labels?d.labels[j]+" ":"")+a.hoverLabelText(m,q);if(j==="mean"&&"sd"in D&&f.boxmean==="sd"){V[g+"err"]=D.sd}e.name="";e.spikeDistance=undefined;e[N]=undefined;p.push(V)}return p}function c(e,t,r){var a=e.cd;var o=e.xa;var s=e.ya;var u=a[0].trace;var c=o.c2p(t);var f=s.c2p(r);var d;var v=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(o.c2p(e.x)-c)-t,1-3/t)};var p=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(s.c2p(e.y)-f)-t,1-3/t)};var h=i.quadrature(v,p);var g=false;var y,m;for(var x=0;x<a.length;x++){y=a[x];for(var b=0;b<(y.pts||[]).length;b++){m=y.pts[b];var _=h(m);if(_<=e.distance){e.distance=_;g=[x,b]}}}if(!g)return false;y=a[g[0]];m=y.pts[g[1]];var w=o.c2p(m.x,true);var k=s.c2p(m.y,true);var M=m.mrc||1;d=n.extendFlat({},e,{index:m.i,color:(u.marker||{}).color,name:u.name,x0:w-M,x1:w+M,xLabelVal:m.x,y0:k-M,y1:k+M,yLabelVal:m.y,spikeDistance:e.distance});var T=u.orientation==="h"?"y":"x";var A=u.orientation==="h"?s:o;d[T+"Spike"]=A.c2p(y.pos,true);l(m,u,d);return d}t.exports={hoverPoints:s,hoverOnBoxes:u,hoverOnPoints:c}},{"../../components/color":50,"../../components/fx":92,"../../lib":169,"../../plots/cartesian/axes":213,"../scatter/fill_hover_text":374}],288:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.layoutAttributes=e("./layout_attributes");a.supplyDefaults=e("./defaults").supplyDefaults;a.supplyLayoutDefaults=e("./layout_defaults").supplyLayoutDefaults;a.calc=e("./calc");a.setPositions=e("./set_positions").setPositions;a.plot=e("./plot").plot;a.style=e("./style").style;a.styleOnSelect=e("./style").styleOnSelect;a.hoverPoints=e("./hover").hoverPoints;a.selectPoints=e("./select");a.moduleType="trace";a.name="box";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"./attributes":284,"./calc":285,"./defaults":286,"./hover":287,"./layout_attributes":289,"./layout_defaults":290,"./plot":291,"./select":292,"./set_positions":293,"./style":294}],289:[function(e,t,r){"use strict";t.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],290:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("./layout_attributes");function o(e,t,r,n,i){var o;var l=i+"Layout";for(var s=0;s<r.length;s++){if(a.traceIs(r[s],l)){o=true;break}}if(!o)return;n(i+"mode");n(i+"gap");n(i+"groupgap")}function l(e,t,r){function a(r,a){return n.coerce(e,t,i,r,a)}o(e,t,r,a,"box")}t.exports={supplyLayoutDefaults:l,_supply:o}},{"../../lib":169,"../../registry":261,"./layout_attributes":289}],291:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../lib");var i=e("../../components/drawing");var o=5;var l=.01;function s(e,t,r,n){var i=e._fullLayout;var o=t.xaxis;var l=t.yaxis;var s=n.selectAll("g.trace.boxes").data(r,function(e){return e[0].trace.uid});s.enter().append("g").attr("class","trace boxes");s.exit().remove();s.order();s.each(function(e){var r=e[0];var n=r.t;var s=r.trace;var d=a.select(this);if(!t.isRangePlot)r.node3=d;var v=i._numBoxes;var p=1-i.boxgap;var h=i.boxmode==="group"&&v>1;var g=n.dPos*p*(1-i.boxgroupgap)/(h?v:1);var y=h?2*n.dPos*(-.5+(n.num+.5)/v)*p:0;var m=g*s.whiskerwidth;if(s.visible!==true||n.empty){d.remove();return}var x,b;if(s.orientation==="h"){x=l;b=o}else{x=o;b=l}n.bPos=y;n.bdPos=g;n.wdPos=m;n.wHover=n.dPos*(h?p/v:1);u(d,{pos:x,val:b},s,n);c(d,{x:o,y:l},s,n);f(d,{pos:x,val:b},s,n)})}function u(e,t,r,i){var o=t.pos;var l=t.val;var s=i.bPos;var u=i.wdPos||0;var c=i.bPosPxOffset||0;var f=r.whiskerwidth||0;var d=r.notched||false;var v=d?1-2*r.notchwidth:1;var p;var h;if(Array.isArray(i.bdPos)){p=i.bdPos[0];h=i.bdPos[1]}else{p=i.bdPos;h=i.bdPos}var g=e.selectAll("path.box").data(r.type!=="violin"||r.box?n.identity:[]);g.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");g.exit().remove();g.each(function(e){var t=e.pos;var i=o.c2p(t+s,true)+c;var g=o.c2p(t+s-p,true)+c;var y=o.c2p(t+s+h,true)+c;var m=o.c2p(t+s-u,true)+c;var x=o.c2p(t+s+u,true)+c;var b=o.c2p(t+s-p*v,true)+c;var _=o.c2p(t+s+h*v,true)+c;var w=l.c2p(e.q1,true);var k=l.c2p(e.q3,true);var M=n.constrain(l.c2p(e.med,true),Math.min(w,k)+1,Math.max(w,k)-1);var T=e.lf===undefined||r.boxpoints===false;var A=l.c2p(T?e.min:e.lf,true);var L=l.c2p(T?e.max:e.uf,true);var S=l.c2p(e.ln,true);var C=l.c2p(e.un,true);if(r.orientation==="h"){a.select(this).attr("d","M"+M+","+b+"V"+_+"M"+w+","+g+"V"+y+(d?"H"+S+"L"+M+","+_+"L"+C+","+y:"")+"H"+k+"V"+g+(d?"H"+C+"L"+M+","+b+"L"+S+","+g:"")+"Z"+"M"+w+","+i+"H"+A+"M"+k+","+i+"H"+L+(f===0?"":"M"+A+","+m+"V"+x+"M"+L+","+m+"V"+x))}else{a.select(this).attr("d","M"+b+","+M+"H"+_+"M"+g+","+w+"H"+y+(d?"V"+S+"L"+_+","+M+"L"+y+","+C:"")+"V"+k+"H"+g+(d?"V"+C+"L"+b+","+M+"L"+g+","+S:"")+"Z"+"M"+i+","+w+"V"+A+"M"+i+","+k+"V"+L+(f===0?"":"M"+m+","+A+"H"+x+"M"+m+","+L+"H"+x))}})}function c(e,t,r,a){var s=t.x;var u=t.y;var c=a.bdPos;var f=a.bPos;var d=r.boxpoints||r.points;n.seedPseudoRandom();var v=function(e){e.forEach(function(e){e.t=a;e.trace=r});return e};var p=e.selectAll("g.points").data(d?v:[]);p.enter().append("g").attr("class","points");p.exit().remove();var h=p.selectAll("path").data(function(e){var t;var a=d==="all"?e.pts:e.pts.filter(function(t){return t.v<e.lf||t.v>e.uf});var i=Math.max((e.max-e.min)/10,e.q3-e.q1);var s=i*1e-9;var u=i*l;var v=[];var p=0;var h;if(r.jitter){if(i===0){p=1;v=new Array(a.length);for(t=0;t<a.length;t++){v[t]=1}}else{for(t=0;t<a.length;t++){var g=Math.max(0,t-o);var y=a[g].v;var m=Math.min(a.length-1,t+o);var x=a[m].v;if(d!=="all"){if(a[t].v<e.lf)x=Math.min(x,e.lf);else y=Math.max(y,e.uf)}var b=Math.sqrt(u*(m-g)/(x-y+s))||0;b=n.constrain(Math.abs(b),0,1);v.push(b);p=Math.max(b,p)}}h=r.jitter*2/(p||1)}for(t=0;t<a.length;t++){var _=a[t];var w=_.v;var k=r.jitter?h*v[t]*(n.pseudoRandom()-.5):0;var M=e.pos+f+c*(r.pointpos+k);if(r.orientation==="h"){_.y=M;_.x=w}else{_.x=M;_.y=w}if(d==="suspectedoutliers"&&w<e.uo&&w>e.lo){_.so=true}}return a});h.enter().append("path").classed("point",true);h.exit().remove();h.call(i.translatePoints,s,u)}function f(e,t,r,i){var o=t.pos;var l=t.val;var s=i.bPos;var u=i.bPosPxOffset||0;var c=r.boxmean||(r.meanline||{}).visible;var f;var d;if(Array.isArray(i.bdPos)){f=i.bdPos[0];d=i.bdPos[1]}else{f=i.bdPos;d=i.bdPos}var v=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box&&r.meanline?n.identity:[]);v.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});v.exit().remove();v.each(function(e){var t=o.c2p(e.pos+s,true)+u;var n=o.c2p(e.pos+s-f,true)+u;var i=o.c2p(e.pos+s+d,true)+u;var v=l.c2p(e.mean,true);var p=l.c2p(e.mean-e.sd,true);var h=l.c2p(e.mean+e.sd,true);if(r.orientation==="h"){a.select(this).attr("d","M"+v+","+n+"V"+i+(c==="sd"?"m0,0L"+p+","+t+"L"+v+","+n+"L"+h+","+t+"Z":""))}else{a.select(this).attr("d","M"+n+","+v+"H"+i+(c==="sd"?"m0,0L"+t+","+p+"L"+n+","+v+"L"+t+","+h+"Z":""))}})}t.exports={plot:s,plotBoxAndWhiskers:u,plotPoints:c,plotBoxMean:f}},{"../../components/drawing":75,"../../lib":169,d3:15}],292:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.cd;var n=t.xaxis;var i=t.yaxis;var o=[];var l,s;if(r===false){for(l=0;l<a.length;l++){for(s=0;s<(a[l].pts||[]).length;s++){a[l].pts[s].selected=0}}}else{for(l=0;l<a.length;l++){for(s=0;s<(a[l].pts||[]).length;s++){var u=a[l].pts[s];var c=n.c2p(u.x);var f=i.c2p(u.y);if(r.contains([c,f])){o.push({pointNumber:u.i,x:n.c2d(u.x),y:i.c2d(u.y)});u.selected=1}else{u.selected=0}}}}return o}},{}],293:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axes");var n=e("../../lib");var i=["v","h"];function o(e,t){var r=e.calcdata;var a=t.xaxis;var n=t.yaxis;for(var o=0;o<i.length;o++){var s=i[o];var u=s==="h"?n:a;var c=[];var f=0;var d=0;for(var v=0;v<r.length;v++){var p=r[v];var h=p[0].t;var g=p[0].trace;if(g.visible===true&&(g.type==="box"||g.type==="candlestick")&&!h.empty&&(g.orientation||"v")===s&&g.xaxis===a._id&&g.yaxis===n._id){c.push(v);if(g.boxpoints){f=Math.max(f,g.jitter-g.pointpos-1);d=Math.max(d,g.jitter+g.pointpos-1)}}}l("box",e,c,u,[f,d])}}function l(e,t,r,i,o){var l=t.calcdata;var s=t._fullLayout;var u=[];var c=e==="violin"?"_numViolins":"_numBoxes";var f,d,v;for(f=0;f<r.length;f++){v=l[r[f]];for(d=0;d<v.length;d++){u.push(v[d].pos)}}if(!u.length)return;var p=n.distinctVals(u);var h=p.minDiff/2;if(u.length===p.vals.length){s[c]=1}a.minDtick(i,p.minDiff,p.vals[0],true);for(f=0;f<r.length;f++){v=l[r[f]];v[0].t.dPos=h}var g=s[e+"gap"];var y=s[e+"groupgap"];var m=(1-g)*(1-y)*h/s[c];a.expand(i,p.vals,{vpadminus:h+o[0]*m,vpadplus:h+o[1]*m})}t.exports={setPositions:o,setPositionOffset:l}},{"../../lib":169,"../../plots/cartesian/axes":213}],294:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/color");var i=e("../../components/drawing");function o(e,t){var r=t?t[0].node3:a.select(e).selectAll("g.trace.boxes");r.style("opacity",function(e){return e[0].trace.opacity});r.each(function(t){var r=a.select(this);var o=t[0].trace;var l=o.line.width;function s(e,t,r,a){e.style("stroke-width",t+"px").call(n.stroke,r).call(n.fill,a)}var u=r.selectAll("path.box");if(o.type==="candlestick"){u.each(function(e){var t=a.select(this);var r=o[e.dir];s(t,r.line.width,r.line.color,r.fillcolor);t.style("opacity",o.selectedpoints&&!e.selected?.3:1)})}else{s(u,l,o.line.color,o.fillcolor);r.selectAll("path.mean").style({"stroke-width":l,"stroke-dasharray":2*l+"px,"+l+"px"}).call(n.stroke,o.line.color);var c=r.selectAll("path.point");i.pointStyle(c,o,e)}})}function l(e,t){var r=t[0].node3;var a=t[0].trace;var n=r.selectAll("path.point");if(a.selectedpoints){i.selectedPointStyle(n,a)}else{i.pointStyle(n,a,e)}}t.exports={style:o,styleOnSelect:l}},{"../../components/color":50,"../../components/drawing":75,d3:15}],295:[function(e,t,r){"use strict";var a=e("../heatmap/attributes");var n=e("../scatter/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/colorbar/attributes");var l=e("../../components/drawing/attributes").dash;var s=e("../../plots/font_attributes");var u=e("../../lib/extend").extendFlat;var c=e("../../constants/filter_ops");var f=c.COMPARISON_OPS2;var d=c.INTERVAL_OPS;var v=n.line;t.exports=u({z:a.z,x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,text:a.text,transpose:a.transpose,xtype:a.xtype,ytype:a.ytype,zhoverformat:a.zhoverformat,connectgaps:a.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"contours.start":undefined,"contours.end":undefined,"contours.size":undefined}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":false}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:true,editType:"plot"},showlabels:{valType:"boolean",dflt:false,editType:"plot"},labelfont:s({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(f).concat(d),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:false}},line:{color:u({},v.color,{editType:"style+colorbars"}),width:u({},v.width,{editType:"style+colorbars"}),dash:l,smoothing:u({},v.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:false,editTypeOverride:"calc"}),{colorbar:o})},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../components/drawing/attributes":74,"../../constants/filter_ops":149,"../../lib/extend":163,"../../plots/font_attributes":239,"../heatmap/attributes":317,"../scatter/attributes":367}],296:[function(e,t,r){"use strict";var a=e("../heatmap/calc");var n=e("./set_contours");t.exports=function e(t,r){var i=a(t,r);n(r);return i}},{"../heatmap/calc":318,"./set_contours":314}],297:[function(e,t,r){"use strict";t.exports=function(e,t,r,a){var n,i,o;var l=e[0];var s=l.x.length;var u=l.y.length;var c=l.z;var f=a.contours;var d=-Infinity;var v=Infinity;for(n=0;n<u;n++){v=Math.min(v,c[n][0]);v=Math.min(v,c[n][s-1]);d=Math.max(d,c[n][0]);d=Math.max(d,c[n][s-1])}for(n=1;n<s-1;n++){v=Math.min(v,c[0][n]);v=Math.min(v,c[u-1][n]);d=Math.max(d,c[0][n]);d=Math.max(d,c[u-1][n])}l.prefixBoundary=false;switch(t){case">":if(f.value>d){l.prefixBoundary=true}break;case"<":if(f.value<v){l.prefixBoundary=true}break;case"[]":i=Math.min.apply(null,f.value);o=Math.max.apply(null,f.value);if(o<v||i>d){l.prefixBoundary=true}break;case"][":i=Math.min.apply(null,f.value);o=Math.max.apply(null,f.value);if(i<v&&o>d){l.prefixBoundary=true}break}}},{}],298:[function(e,t,r){"use strict";var a=e("../../components/colorbar/draw");var n=e("./make_color_map");var i=e("./end_plus");t.exports=function e(t,r){var o=r[0].trace,l="cb"+o.uid;t._fullLayout._infolayer.selectAll("."+l).remove();if(!o.showscale)return;var s=a(t,l);r[0].t.cb=s;var u=o.contours,c=o.line,f=u.size||1,d=u.coloring;var v=n(o,{isColorbar:true});if(d==="heatmap"){s.filllevels({start:o.zmin,end:o.zmax,size:(o.zmax-o.zmin)/254})}s.fillcolor(d==="fill"||d==="heatmap"?v:"").line({color:d==="lines"?v:c.color,width:u.showlines!==false?c.width:0,dash:c.dash}).levels({start:u.start,end:i(u),size:f}).options(o.colorbar)()}},{"../../components/colorbar/draw":55,"./end_plus":306,"./make_color_map":311}],299:[function(e,t,r){"use strict";t.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],300:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("./label_defaults");var i=e("../../components/color");var o=i.addOpacity;var l=i.opacity;var s=e("../../constants/filter_ops");var u=s.CONSTRAINT_REDUCTION;var c=s.COMPARISON_OPS2;t.exports=function e(t,r,a,i,s,c){var d=r.contours;var v,p,h;var g=a("contours.operation");d._operation=u[g];f(a,d);if(g==="="){v=d.showlines=true}else{v=a("contours.showlines");h=a("fillcolor",o((t.line||{}).color||s,.5))}if(v){var y=h&&l(h)?o(r.fillcolor,1):s;p=a("line.color",y);a("line.width",2);a("line.dash")}a("line.smoothing");n(a,i,p,c)};function f(e,t){var r;if(c.indexOf(t.operation)===-1){e("contours.value",[0,1]);if(!Array.isArray(t.value)){if(a(t.value)){r=parseFloat(t.value);t.value=[r,r+1]}}else if(t.value.length>2){t.value=t.value.slice(2)}else if(t.length===0){t.value=[0,1]}else if(t.length<2){r=parseFloat(t.value[0]);t.value=[r,r+1]}else{t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]}}else{e("contours.value",0);if(!a(t.value)){if(Array.isArray(t.value)){t.value=parseFloat(t.value[0])}else{t.value=0}}}}},{"../../components/color":50,"../../constants/filter_ops":149,"./label_defaults":310,"fast-isnumeric":18}],301:[function(e,t,r){"use strict";var a=e("../../constants/filter_ops");var n=e("fast-isnumeric");t.exports={"[]":o("[]"),"][":o("]["),">":l(">"),"<":l("<"),"=":l("=")};function i(e,t){var r=Array.isArray(t);var i;function o(e){return n(e)?+e:null}if(a.COMPARISON_OPS2.indexOf(e)!==-1){i=r?o(t[0]):o(t)}else if(a.INTERVAL_OPS.indexOf(e)!==-1){i=r?[o(t[0]),o(t[1])]:[o(t),o(t)]}else if(a.SET_OPS.indexOf(e)!==-1){i=r?t.map(o):[o(t)]}return i}function o(e){return function(t){t=i(e,t);var r=Math.min(t[0],t[1]);var a=Math.max(t[0],t[1]);return{start:r,end:a,size:a-r}}}function l(e){return function(t){t=i(e,t);return{start:t,end:Infinity,size:Infinity}}}},{"../../constants/filter_ops":149,"fast-isnumeric":18}],302:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n){var i=n("contours.start");var o=n("contours.end");var l=i===false||o===false;var s=a("contours.size");var u;if(l)u=r.autocontour=true;else u=a("autocontour",false);if(u||!s)a("ncontours")}},{}],303:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function(e,t){var r,i,o;var l=function(e){return e.reverse()};var s=function(e){return e};switch(t){case"=":case"<":return e;case">":if(e.length!==1){a.warn("Contour data invalid for the specified inequality operation.")}i=e[0];for(r=0;r<i.edgepaths.length;r++){i.edgepaths[r]=l(i.edgepaths[r])}for(r=0;r<i.paths.length;r++){i.paths[r]=l(i.paths[r])}return e;case"][":var u=l;l=s;s=u;case"[]":if(e.length!==2){a.warn("Contour data invalid for the specified inequality range operation.")}i=n(e[0]);o=n(e[1]);for(r=0;r<i.edgepaths.length;r++){i.edgepaths[r]=l(i.edgepaths[r])}for(r=0;r<i.paths.length;r++){i.paths[r]=l(i.paths[r])}while(o.edgepaths.length){i.edgepaths.push(s(o.edgepaths.shift()))}while(o.paths.length){i.paths.push(s(o.paths.shift()))}return[i]}};function n(e){return a.extendFlat({},e,{edgepaths:a.extendDeep([],e.edgepaths),paths:a.extendDeep([],e.paths)})}},{"../../lib":169}],304:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../heatmap/xyz_defaults");var i=e("./constraint_defaults");var o=e("./contours_defaults");var l=e("./style_defaults");var s=e("./attributes");t.exports=function e(t,r,u,c){function f(e,n){return a.coerce(t,r,s,e,n)}function d(e){return a.coerce2(t,r,s,e)}var v=n(t,r,f,c);if(!v){r.visible=false;return}f("text");var p=f("contours.type")==="constraint";f("connectgaps",a.isArray1D(r.z));if(!p)delete r.showlegend;if(p){i(t,r,f,c,u)}else{o(t,r,f,d);l(t,r,f,c)}}},{"../../lib":169,"../heatmap/xyz_defaults":332,"./attributes":295,"./constraint_defaults":300,"./contours_defaults":302,"./style_defaults":316}],305:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./constraint_mapping");var i=e("./end_plus");t.exports=function e(t,r,o){var l=t.type==="constraint"?n[t._operation](t.value):t;var s=l.size;var u=[];var c=i(l);var f=o.trace._carpetTrace;var d=f?{xaxis:f.aaxis,yaxis:f.baxis,x:o.a,y:o.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:o.x,y:o.y};for(var v=l.start;v<c;v+=s){u.push(a.extendFlat({level:v,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},d));if(u.length>1e3){a.warn("Too many contours, clipping at 1000",t);break}}return u}},{"../../lib":169,"./constraint_mapping":301,"./end_plus":306}],306:[function(e,t,r){"use strict";t.exports=function e(t){return t.end+t.size/1e6}},{}],307:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./constants");t.exports=function e(t,r,n){var i,o,s,u,c;r=r||.01;n=n||.01;for(s=0;s<t.length;s++){u=t[s];for(c=0;c<u.starts.length;c++){o=u.starts[c];l(u,o,"edge",r,n)}i=0;while(Object.keys(u.crossings).length&&i<1e4){i++;o=Object.keys(u.crossings)[0].split(",").map(Number);l(u,o,undefined,r,n)}if(i===1e4)a.log("Infinite loop in contour?")}};function i(e,t,r,a){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<a}function o(e,t){var r=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+a*a)}function l(e,t,r,l,c){var f=t.join(",");var d=f;var v=e.crossings[d];var p=s(v,r,t);var h=[u(e,t,[-p[0],-p[1]])];var g=p.join(",");var y=e.z.length;var m=e.z[0].length;var x;for(x=0;x<1e4;x++){if(v>20){v=n.CHOOSESADDLE[v][(p[0]||p[1])<0?0:1];e.crossings[d]=n.SADDLEREMAINDER[v]}else{delete e.crossings[d]}p=n.NEWDELTA[v];if(!p){a.log("Found bad marching index:",v,t,e.level);break}h.push(u(e,t,p));t[0]+=p[0];t[1]+=p[1];if(i(h[h.length-1],h[h.length-2],l,c))h.pop();d=t.join(",");var b=p[0]&&(t[0]<0||t[0]>m-2)||p[1]&&(t[1]<0||t[1]>y-2),_=d===f&&p.join(",")===g;if(_||r&&b)break;v=e.crossings[d]}if(x===1e4){a.log("Infinite loop in contour?")}var w=i(h[0],h[h.length-1],l,c);var k=0;var M=.2*e.smoothing;var T=[];var A=0;var L,S,C,O,z,P,D,I,E,N,R;for(x=1;x<h.length;x++){D=o(h[x],h[x-1]);k+=D;T.push(D)}var F=k/T.length*M;function B(e){return h[e%h.length]}for(x=h.length-2;x>=A;x--){L=T[x];if(L<F){C=0;for(S=x-1;S>=A;S--){if(L+T[S]<F){L+=T[S]}else break}if(w&&x===h.length-2){for(C=0;C<S;C++){if(L+T[C]<F){L+=T[C]}else break}}z=x-S+C+1;P=Math.floor((x+S+C+2)/2);if(!w&&x===h.length-2)O=h[h.length-1];else if(!w&&S===-1)O=h[0];else if(z%2)O=B(P);else{O=[(B(P)[0]+B(P+1)[0])/2,(B(P)[1]+B(P+1)[1])/2]}h.splice(S+1,x-S+1,O);x=S+1;if(C)A=C;if(w){if(x===h.length-2)h[C]=h[h.length-1];else if(x===0)h[h.length-1]=h[0]}}}h.splice(0,A);for(x=0;x<h.length;x++)h[x].length=2;if(h.length<2)return;else if(w){h.pop();e.paths.push(h)}else{if(!r){a.log("Unclosed interior contour?",e.level,f,h.join("L"))}var j=false;for(I=0;I<e.edgepaths.length;I++){N=e.edgepaths[I];if(!j&&i(N[0],h[h.length-1],l,c)){h.pop();j=true;var q=false;for(E=0;E<e.edgepaths.length;E++){R=e.edgepaths[E];if(i(R[R.length-1],h[0],l,c)){q=true;h.shift();e.edgepaths.splice(I,1);if(E===I){e.paths.push(h.concat(R))}else{if(E>I)E--;e.edgepaths[E]=R.concat(h,N)}break}}if(!q){e.edgepaths[I]=h.concat(N)}}}for(I=0;I<e.edgepaths.length;I++){if(j)break;N=e.edgepaths[I];if(i(N[N.length-1],h[0],l,c)){h.shift();e.edgepaths[I]=N.concat(h);j=true}}if(!j)e.edgepaths.push(h)}}function s(e,t,r){var a=0,i=0;if(e>20&&t){if(e===208||e===1114){a=r[0]===0?1:-1}else{i=r[1]===0?1:-1}}else if(n.BOTTOMSTART.indexOf(e)!==-1)i=1;else if(n.LEFTSTART.indexOf(e)!==-1)a=1;else if(n.TOPSTART.indexOf(e)!==-1)i=-1;else a=-1;return[a,i]}function u(e,t,r){var a=t[0]+Math.max(r[0],0),n=t[1]+Math.max(r[1],0),i=e.z[n][a],o=e.xaxis,l=e.yaxis;if(r[1]){var s=(e.level-i)/(e.z[n][a+1]-i);return[o.c2p((1-s)*e.x[a]+s*e.x[a+1],true),l.c2p(e.y[n],true),a+s,n]}else{var u=(e.level-i)/(e.z[n+1][a]-i);return[o.c2p(e.x[a],true),l.c2p((1-u)*e.y[n]+u*e.y[n+1],true),a,n+u]}}},{"../../lib":169,"./constants":299}],308:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("../heatmap/hover");t.exports=function e(t,r,i,o,l){var s=n(t,r,i,o,l,true);if(s){s.forEach(function(e){var t=e.trace;if(t.contours.type==="constraint"){if(t.fillcolor&&a.opacity(t.fillcolor)){e.color=a.addOpacity(t.fillcolor,1)}else if(t.contours.showlines&&a.opacity(t.line.color)){e.color=a.addOpacity(t.line.color,1)}}})}return s}},{"../../components/color":50,"../heatmap/hover":324}],309:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.calc=e("./calc");a.plot=e("./plot").plot;a.style=e("./style");a.colorbar=e("./colorbar");a.hoverPoints=e("./hover");a.moduleType="trace";a.name="contour";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","2dMap","contour","showLegend"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"./attributes":295,"./calc":296,"./colorbar":298,"./defaults":304,"./hover":308,"./plot":313,"./style":315}],310:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r,n,i){if(!i)i={};var o=t("contours.showlabels");if(o){var l=r.font;a.coerceFont(t,"contours.labelfont",{family:l.family,size:l.size,color:n});t("contours.labelformat")}if(i.hasHover!==false)t("zhoverformat")}},{"../../lib":169}],311:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/colorscale");var i=e("./end_plus");t.exports=function e(t){var r=t.contours,o=r.start,l=i(r),s=r.size||1,u=Math.floor((l-o)/s)+1,c=r.coloring==="lines"?0:1;if(!isFinite(s)){s=1;u=1}var f=t.colorscale,d=f.length;var v=new Array(d),p=new Array(d);var h,g;if(r.coloring==="heatmap"){if(t.zauto&&t.autocontour===false){t.zmin=o-s/2;t.zmax=t.zmin+u*s}for(g=0;g<d;g++){h=f[g];v[g]=h[0]*(t.zmax-t.zmin)+t.zmin;p[g]=h[1]}var y=a.extent([t.zmin,t.zmax,r.start,r.start+s*(u-1)]),m=y[t.zmin<t.zmax?0:1],x=y[t.zmin<t.zmax?1:0];if(m!==t.zmin){v.splice(0,0,m);p.splice(0,0,Range[0])}if(x!==t.zmax){v.push(x);p.push(p[p.length-1])}}else{for(g=0;g<d;g++){h=f[g];v[g]=(h[0]*(u+c-1)-c/2)*s+o;p[g]=h[1]}}return n.makeColorScaleFunc({domain:v,range:p},{noNumericCheck:true})}},{"../../components/colorscale":65,"./end_plus":306,d3:15}],312:[function(e,t,r){"use strict";var a=e("./constants");t.exports=function e(t){var r=t[0].z,i=r.length,o=r[0].length,l=i===2||o===2,s,u,c,f,d,v,p,h,g;for(u=0;u<i-1;u++){f=[];if(u===0)f=f.concat(a.BOTTOMSTART);if(u===i-2)f=f.concat(a.TOPSTART);for(s=0;s<o-1;s++){c=f.slice();if(s===0)c=c.concat(a.LEFTSTART);if(s===o-2)c=c.concat(a.RIGHTSTART);d=s+","+u;v=[[r[u][s],r[u][s+1]],[r[u+1][s],r[u+1][s+1]]];for(g=0;g<t.length;g++){h=t[g];p=n(h.level,v);if(!p)continue;h.crossings[d]=p;if(c.indexOf(p)!==-1){h.starts.push([s,u]);if(l&&c.indexOf(p,c.indexOf(p)+1)!==-1){h.starts.push([s,u])}}}}}};function n(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var a=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;if(e>a)return r===5?713:1114;return r===5?104:208}return r===15?0:r}},{"./constants":299}],313:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../lib");var i=e("../../components/drawing");var o=e("../../lib/svg_text_utils");var l=e("../../plots/cartesian/axes");var s=e("../../plots/cartesian/set_convert");var u=e("../../plots/get_data").getUidsFromCalcData;var c=e("../heatmap/plot");var f=e("./make_crossings");var d=e("./find_all_paths");var v=e("./empty_pathinfo");var p=e("./convert_to_constraints");var h=e("./close_boundaries");var g=e("./constants");var y=g.LABELOPTIMIZER;r.plot=function e(t,r,n,i){var o=u(n);i.selectAll("g.contour").each(function(e){if(!o[e.trace.uid]){a.select(this).remove()}});for(var l=0;l<n.length;l++){m(t,r,n[l],i)}};function m(e,t,a,i){var o=a[0].trace;var l=a[0].x;var s=a[0].y;var u=o.contours;var g="contour"+o.uid;var y=t.xaxis;var m=t.yaxis;var _=e._fullLayout;var w=v(u,t,a[0]);var M=n.ensureSingle(i,"g","heatmapcoloring");var A=[];if(u.coloring==="heatmap"){if(o.zauto&&o.autocontour===false){o._input.zmin=o.zmin=u.start-u.size/2;o._input.zmax=o.zmax=o.zmin+w.length*u.size}A=[a]}c(e,t,A,M);f(w);d(w);var L=y.c2p(l[0],true),S=y.c2p(l[l.length-1],true),C=m.c2p(s[0],true),O=m.c2p(s[s.length-1],true),z=[[L,O],[S,O],[S,C],[L,C]];var P=w;if(u.type==="constraint"){P=p(w,u._operation);h(P,u._operation,z,o)}var D=r.makeContourGroup(i,a,g);x(D,z,u);b(D,P,z,u);k(D,w,e,a[0],u,z);T(D,t,_._clips,a[0],z)}r.makeContourGroup=function(e,t,r){var a=e.selectAll("g.contour."+r).data(t);a.enter().append("g").classed("contour",true).classed(r,true);a.exit().remove();return a};function x(e,t,r){var a=n.ensureSingle(e,"g","contourbg");var i=a.selectAll("path").data(r.coloring==="fill"?[0]:[]);i.enter().append("path");i.exit().remove();i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function b(e,t,r,i){var o=n.ensureSingle(e,"g","contourfill");var l=o.selectAll("path").data(i.coloring==="fill"||i.type==="constraint"&&i._operation!=="="?t:[]);l.enter().append("path");l.exit().remove();l.each(function(e){var t=w(e,r);if(!t)a.select(this).remove();else a.select(this).attr("d",t).style("stroke","none")})}function _(e,t){var r=e.prefixBoundary;if(r===undefined){var a=Math.min(e.z[0][0],e.z[0][1]);r=!e.edgepaths.length&&a>e.level}if(r){return"M"+t.join("L")+"Z"}return""}function w(e,t){var r=_(e,t),a=0,o=e.edgepaths.map(function(e,t){return t}),l=true,s,u,c,f,d,v;function p(e){return Math.abs(e[1]-t[0][1])<.01}function h(e){return Math.abs(e[1]-t[2][1])<.01}function g(e){return Math.abs(e[0]-t[0][0])<.01}function y(e){return Math.abs(e[0]-t[2][0])<.01}while(o.length){v=i.smoothopen(e.edgepaths[a],e.smoothing);r+=l?v:v.replace(/^M/,"L");o.splice(o.indexOf(a),1);s=e.edgepaths[a][e.edgepaths[a].length-1];f=-1;for(c=0;c<4;c++){if(!s){n.log("Missing end?",a,e);break}if(p(s)&&!y(s))u=t[1];else if(g(s))u=t[0];else if(h(s))u=t[3];else if(y(s))u=t[2];for(d=0;d<e.edgepaths.length;d++){var m=e.edgepaths[d][0];if(Math.abs(s[0]-u[0])<.01){if(Math.abs(s[0]-m[0])<.01&&(m[1]-s[1])*(u[1]-m[1])>=0){u=m;f=d}}else if(Math.abs(s[1]-u[1])<.01){if(Math.abs(s[1]-m[1])<.01&&(m[0]-s[0])*(u[0]-m[0])>=0){u=m;f=d}}else{n.log("endpt to newendpt is not vert. or horz.",s,u,m)}}s=u;if(f>=0)break;r+="L"+u}if(f===e.edgepaths.length){n.log("unclosed perimeter path");break}a=f;l=o.indexOf(a)===-1;if(l){a=o[0];r+="Z"}}for(a=0;a<e.paths.length;a++){r+=i.smoothclosed(e.paths[a],e.smoothing)}return r}function k(e,t,o,l,s,u){var c=n.ensureSingle(e,"g","contourlines");var f=s.showlines!==false;var d=s.showlabels;var v=f&&d;var p=r.createLines(c,f||d,t);var h=r.createLineClip(c,v,o._fullLayout._clips,l.trace.uid);var y=e.selectAll("g.contourlabels").data(d?[0]:[]);y.exit().remove();y.enter().append("g").classed("contourlabels",true);if(d){var m=[u];var x=[];n.clearLocationCache();var b=r.labelFormatter(s,l.t.cb,o._fullLayout);var _=i.tester.append("text").attr("data-notex",1).call(i.font,s.labelfont);var w=t[0].xaxis._length;var k=t[0].yaxis._length;var M={left:Math.max(u[0][0],0),right:Math.min(u[2][0],w),top:Math.max(u[0][1],0),bottom:Math.min(u[2][1],k)};M.middle=(M.top+M.bottom)/2;M.center=(M.left+M.right)/2;var T=Math.sqrt(w*w+k*k);var A=g.LABELDISTANCE*T/Math.max(1,t.length/g.LABELINCREASE);p.each(function(e){var t=r.calcTextOpts(e.level,b,_,o);a.select(this).selectAll("path").each(function(){var e=this;var a=n.getVisibleSegment(e,M,t.height/2);if(!a)return;if(a.len<(t.width+t.height)*g.LABELMIN)return;var i=Math.min(Math.ceil(a.len/A),g.LABELMAX);for(var o=0;o<i;o++){var l=r.findBestTextLocation(e,a,t,x,M);if(!l)break;r.addLabelData(l,t,x,m)}})});_.remove();r.drawLabels(y,x,o,h,v?m:null)}if(d&&!f)p.remove()}r.createLines=function(e,t,r){var a=r[0].smoothing;var n=e.selectAll("g.contourlevel").data(t?r:[]);n.exit().remove();n.enter().append("g").classed("contourlevel",true);if(t){var o=n.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths});o.exit().remove();o.enter().append("path").classed("openline",true);o.attr("d",function(e){return i.smoothopen(e,a)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var l=n.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths});l.exit().remove();l.enter().append("path").classed("closedline",true);l.attr("d",function(e){return i.smoothclosed(e,a)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return n};r.createLineClip=function(e,t,r,a){var n=t?"clipline"+a:null;var o=r.selectAll("#"+n).data(t?[0]:[]);o.exit().remove();o.enter().append("clipPath").classed("contourlineclip",true).attr("id",n);i.setClipUrl(e,n);return o};r.labelFormatter=function(e,t,r){if(e.labelformat){return r._d3locale.numberFormat(e.labelformat)}else{var a;if(t){a=t.axis}else{a={type:"linear",_id:"ycontour",showexponent:"all"};if(e.type==="constraint"){var n=e.value;if(Array.isArray(n)){a.range=[n[0],n[n.length-1]]}else a.range=[n,n]}else{a.range=[e.start,e.end];a.nticks=(e.end-e.start)/e.size}if(a.range[0]===a.range[1]){a.range[1]+=a.range[0]||1}if(!a.nticks)a.nticks=1e3;s(a,r);l.prepTicks(a);a._tmin=null;a._tmax=null}return function(e){return l.tickText(a,e).text}}};r.calcTextOpts=function(e,t,r,a){var n=t(e);r.text(n).call(o.convertToTspans,a);var l=i.bBox(r.node(),true);return{text:n,width:l.width,height:l.height,level:e,dy:(l.top+l.bottom)/2}};r.findBestTextLocation=function(e,t,r,a,i){var o=r.width;var l,s,u,c,f;if(t.isClosed){s=t.len/y.INITIALSEARCHPOINTS;l=t.min+s/2;u=t.max}else{s=(t.len-o)/(y.INITIALSEARCHPOINTS+1);l=t.min+s+o/2;u=t.max-(s+o)/2}var d=Infinity;for(var v=0;v<y.ITERATIONS;v++){for(var p=l;p<u;p+=s){var h=n.getTextLocation(e,t.total,p,o);var g=M(h,r,a,i);if(g<d){d=g;f=h;c=p}}if(d>y.MAXCOST*2)break;if(v)s/=2;l=c-s/2;u=l+s*1.5}if(d<=y.MAXCOST)return f};function M(e,t,r,a){var i=t.width/2;var o=t.height/2;var l=e.x;var s=e.y;var u=e.theta;var c=Math.cos(u)*i;var f=Math.sin(u)*i;var d=(l>a.center?a.right-l:l-a.left)/(c+Math.abs(Math.sin(u)*o));var v=(s>a.middle?a.bottom-s:s-a.top)/(Math.abs(f)+Math.cos(u)*o);if(d<1||v<1)return Infinity;var p=y.EDGECOST*(1/(d-1)+1/(v-1));p+=y.ANGLECOST*u*u;var h=l-c;var g=s-f;var m=l+c;var x=s+f;for(var b=0;b<r.length;b++){var _=r[b];var w=Math.cos(_.theta)*_.width/2;var k=Math.sin(_.theta)*_.width/2;var M=n.segmentDistance(h,g,m,x,_.x-w,_.y-k,_.x+w,_.y+k)*2/(t.height+_.height);var T=_.level===t.level;var A=T?y.SAMELEVELDISTANCE:1;if(M<=A)return Infinity;var L=y.NEIGHBORCOST*(T?y.SAMELEVELFACTOR:1);p+=L/(M-A)}return p}r.addLabelData=function(e,t,r,a){var n=t.width/2;var i=t.height/2;var o=e.x;var l=e.y;var s=e.theta;var u=Math.sin(s);var c=Math.cos(s);var f=n*c;var d=i*u;var v=n*u;var p=-i*c;var h=[[o-f-d,l-v-p],[o+f-d,l+v-p],[o+f+d,l+v+p],[o-f+d,l-v+p]];r.push({text:t.text,x:o,y:l,dy:t.dy,theta:s,level:t.level,width:t.width,height:t.height});a.push(h)};r.drawLabels=function(e,t,r,i,l){var s=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});s.exit().remove();s.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy;var n=e.y-Math.cos(e.theta)*e.dy;a.select(this).text(e.text).attr({x:t,y:n,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+n+")"}).call(o.convertToTspans,r)});if(l){var u="";for(var c=0;c<l.length;c++){u+="M"+l[c].join("L")+"Z"}var f=n.ensureSingle(i,"path","");f.attr("d",u)}};function T(e,t,r,a,o){var l="clip"+a.trace.uid;var s=r.selectAll("#"+l).data(a.trace.connectgaps?[]:[0]);s.enter().append("clipPath").classed("contourclip",true).attr("id",l);s.exit().remove();if(a.trace.connectgaps===false){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:a.x,y:a.y,z:A(a),smoothing:0};f([u]);d([u]);var c=w(u,o);var v=n.ensureSingle(s,"path","");v.attr("d",c)}else l=null;e.call(i.setClipUrl,l);t.plot.selectAll(".hm"+a.trace.uid).call(i.setClipUrl,l)}function A(e){var t=e.trace._emptypoints,r=[],a=e.z.length,n=e.z[0].length,i,o=[],l;for(i=0;i<n;i++)o.push(1);for(i=0;i<a;i++)r.push(o.slice());for(i=0;i<t.length;i++){l=t[i];r[l[0]][l[1]]=0}e.zmask=r;return r}},{"../../components/drawing":75,"../../lib":169,"../../lib/svg_text_utils":190,"../../plots/cartesian/axes":213,"../../plots/cartesian/set_convert":231,"../../plots/get_data":241,"../heatmap/plot":329,"./close_boundaries":297,"./constants":299,"./convert_to_constraints":303,"./empty_pathinfo":305,"./find_all_paths":307,"./make_crossings":312,d3:15}],314:[function(e,t,r){"use strict";var a=e("../../plots/cartesian/axes");var n=e("../../lib");t.exports=function e(t){var r=t.contours;if(t.autocontour){var o=t.zmin;var l=t.zmax;if(o===undefined||l===undefined){o=n.aggNums(Math.min,null,t._z);l=n.aggNums(Math.max,null,t._z)}var s=i(o,l,t.ncontours);r.size=s.dtick;r.start=a.tickFirst(s);s.range.reverse();r.end=a.tickFirst(s);if(r.start===o)r.start+=r.size;if(r.end===l)r.end-=r.size;if(r.start>r.end){r.start=r.end=(r.start+r.end)/2}if(!t._input.contours)t._input.contours={};n.extendFlat(t._input.contours,{start:r.start,end:r.end,size:r.size});t._input.autocontour=true}else if(r.type!=="constraint"){var u=r.start,c=r.end,f=t._input.contours;if(u>c){r.start=f.start=c;c=r.end=f.end=u;u=r.start}if(!(r.size>0)){var d;if(u===c)d=1;else d=i(u,c,t.ncontours).dtick;f.size=r.size=d}}};function i(e,t,r){var n={type:"linear",range:[e,t]};a.autoTicks(n,(t-e)/(r||15));return n}},{"../../lib":169,"../../plots/cartesian/axes":213}],315:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/drawing");var i=e("../heatmap/style");var o=e("./make_color_map");t.exports=function e(t){var r=a.select(t).selectAll("g.contour");r.style("opacity",function(e){return e.trace.opacity});r.each(function(e){var t=a.select(this);var r=e.trace;var i=r.contours;var l=r.line;var s=i.size||1;var u=i.start;var c=i.type==="constraint";var f=!c&&i.coloring==="lines";var d=!c&&i.coloring==="fill";var v=f||d?o(r):null;t.selectAll("g.contourlevel").each(function(e){a.select(this).selectAll("path").call(n.lineGroupStyle,l.width,f?v(e.level):l.color,l.dash)});var p=i.labelfont;t.selectAll("g.contourlabels text").each(function(e){n.font(a.select(this),{family:p.family,size:p.size,color:p.color||(f?v(e.level):l.color)})});if(c){t.selectAll("g.contourfill path").style("fill",r.fillcolor)}else if(d){var h;t.selectAll("g.contourfill path").style("fill",function(e){if(h===undefined)h=e.level;return v(e.level+.5*s)});if(h===undefined)h=u;t.selectAll("g.contourbg path").style("fill",v(h-.5*s))}});i(t)}},{"../../components/drawing":75,"../heatmap/style":330,"./make_color_map":311,d3:15}],316:[function(e,t,r){"use strict";var a=e("../../components/colorscale/defaults");var n=e("./label_defaults");t.exports=function e(t,r,i,o,l){var s=i("contours.coloring");var u;var c="";if(s==="fill")u=i("contours.showlines");if(u!==false){if(s!=="lines")c=i("line.color","#000");i("line.width",.5);i("line.dash")}if(s!=="none"){a(t,r,o,i,{prefix:"",cLetter:"z"})}i("line.smoothing");n(i,o,c,l)}},{"../../components/colorscale/defaults":60,"./label_defaults":310}],317:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../components/colorscale/attributes");var i=e("../../components/colorbar/attributes");var o=e("../../lib/extend").extendFlat;t.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},a.x,{impliedEdits:{xtype:"array"}}),x0:o({},a.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},a.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},a.y,{impliedEdits:{ytype:"array"}}),y0:o({},a.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},a.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:false,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",false],dflt:false,editType:"calc"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},n("",{cLetter:"z",autoColorDflt:false}),{colorbar:i})},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../lib/extend":163,"../scatter/attributes":367}],318:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../histogram2d/calc");var l=e("../../components/colorscale/calc");var s=e("./convert_column_xyz");var u=e("./max_row_length");var c=e("./clean_2d_array");var f=e("./interp2d");var d=e("./find_empties");var v=e("./make_bound_array");t.exports=function e(t,r){var p=i.getFromId(t,r.xaxis||"x"),h=i.getFromId(t,r.yaxis||"y"),g=a.traceIs(r,"contour"),y=a.traceIs(r,"histogram"),m=a.traceIs(r,"gl2d"),x=g?"best":r.zsmooth,b,_,w,k,M,T,A,L,S;p._minDtick=0;h._minDtick=0;if(y){S=o(t,r);b=S.x;_=S.x0;w=S.dx;k=S.y;M=S.y0;T=S.dy;A=S.z}else{var C=r.z;if(n.isArray1D(C)){s(r,p,h,"x","y",["z"]);b=r._x;k=r._y;C=r._z}else{b=r.x?p.makeCalcdata(r,"x"):[];k=r.y?h.makeCalcdata(r,"y"):[]}_=r.x0||0;w=r.dx||1;M=r.y0||0;T=r.dy||1;A=c(C,r.transpose);if(g||r.connectgaps){r._emptypoints=d(A);f(A,r._emptypoints)}}function O(e){x=r._input.zsmooth=r.zsmooth=false;n.warn('cannot use zsmooth: "fast": '+e)}if(x==="fast"){if(p.type==="log"||h.type==="log"){O("log axis found")}else if(!y){if(b.length){var z=(b[b.length-1]-b[0])/(b.length-1),P=Math.abs(z/100);for(L=0;L<b.length-1;L++){if(Math.abs(b[L+1]-b[L]-z)>P){O("x scale is not linear");break}}}if(k.length&&x==="fast"){var D=(k[k.length-1]-k[0])/(k.length-1),I=Math.abs(D/100);for(L=0;L<k.length-1;L++){if(Math.abs(k[L+1]-k[L]-D)>I){O("y scale is not linear");break}}}}}var E=u(A);var N=r.xtype==="scaled"?"":b;var R=v(r,N,_,w,E,p);var F=r.ytype==="scaled"?"":k;var B=v(r,F,M,T,A.length,h);if(!m){i.expand(p,R);i.expand(h,B)}var j={x:R,y:B,z:A,text:r._text||r.text};if(N&&N.length===R.length-1)j.xCenter=N;if(F&&F.length===B.length-1)j.yCenter=F;if(y){j.xRanges=S.xRanges;j.yRanges=S.yRanges;j.pts=S.pts}if(!g||r.contours.type!=="constraint"){l(r,A,"","z")}if(g&&r.contours&&r.contours.coloring==="heatmap"){var q={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};j.xfill=v(q,N,_,w,E,p);j.yfill=v(q,F,M,T,A.length,h)}return[j]}},{"../../components/colorscale/calc":58,"../../lib":169,"../../plots/cartesian/axes":213,"../../registry":261,"../histogram2d/calc":346,"./clean_2d_array":319,"./convert_column_xyz":321,"./find_empties":323,"./interp2d":326,"./make_bound_array":327,"./max_row_length":328}],319:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports=function e(t,r){var n,i,o,l,s,u;function c(e){if(!a(e))return undefined;return+e}if(r){n=0;for(s=0;s<t.length;s++)n=Math.max(n,t[s].length);if(n===0)return false;o=function(e){return e.length};l=function(e,t,r){return e[r][t]}}else{n=t.length;o=function(e,t){return e[t].length};l=function(e,t,r){return e[t][r]}}var f=new Array(n);for(s=0;s<n;s++){i=o(t,s);f[s]=new Array(i);for(u=0;u<i;u++)f[s][u]=c(l(t,s,u))}return f}},{"fast-isnumeric":18}],320:[function(e,t,r){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],321:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../constants/numerical").BADNUM;t.exports=function e(t,r,i,o,l,s){var u=t._length;var c=t[o].slice(0,u);var f=t[l].slice(0,u);var d=t.text;var v=d!==undefined&&a.isArray1D(d);var p=t[o+"calendar"];var h=t[l+"calendar"];var g,y,m,x,b;for(g=0;g<u;g++){c[g]=r.d2c(c[g],0,p);f[g]=i.d2c(f[g],0,h)}var _=a.distinctVals(c),w=_.vals,k=a.distinctVals(f),M=k.vals,T=[];for(g=0;g<s.length;g++){T[g]=a.init2dArray(M.length,w.length)}var A,L,S;if(v)S=a.init2dArray(M.length,w.length);for(g=0;g<u;g++){if(c[g]!==n&&f[g]!==n){A=a.findBin(c[g]+_.minDiff/2,w);L=a.findBin(f[g]+k.minDiff/2,M);for(y=0;y<s.length;y++){b=s[y];m=t[b];x=T[y];x[L][A]=m[g]}if(v)S[L][A]=d[g]}}t["_"+o]=w;t["_"+l]=M;for(y=0;y<s.length;y++){t["_"+s[y]]=T[y]}if(v)t._text=S}},{"../../constants/numerical":151,"../../lib":169}],322:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./xyz_defaults");var i=e("./style_defaults");var o=e("../../components/colorscale/defaults");var l=e("./attributes");t.exports=function e(t,r,s,u){function c(e,n){return a.coerce(t,r,l,e,n)}var f=n(t,r,c,u);if(!f){r.visible=false;return}c("text");i(t,r,c,u);c("connectgaps",a.isArray1D(r.z)&&r.zsmooth!==false);o(t,r,u,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":60,"../../lib":169,"./attributes":317,"./style_defaults":331,"./xyz_defaults":332}],323:[function(e,t,r){"use strict";var a=e("./max_row_length");t.exports=function e(t){var r=[],n={},i=[],o=t[0],l=[],s=[0,0,0],u=a(t),c,f,d,v,p,h,g,y;for(f=0;f<t.length;f++){c=l;l=o;o=t[f+1]||[];for(d=0;d<u;d++){if(l[d]===undefined){h=(l[d-1]!==undefined?1:0)+(l[d+1]!==undefined?1:0)+(c[d]!==undefined?1:0)+(o[d]!==undefined?1:0);if(h){if(f===0)h++;if(d===0)h++;if(f===t.length-1)h++;if(d===l.length-1)h++;if(h<4){n[[f,d]]=[f,d,h]}r.push([f,d,h])}else i.push([f,d])}}}while(i.length){g={};y=false;for(p=i.length-1;p>=0;p--){v=i[p];f=v[0];d=v[1];h=((n[[f-1,d]]||s)[2]+(n[[f+1,d]]||s)[2]+(n[[f,d-1]]||s)[2]+(n[[f,d+1]]||s)[2])/20;if(h){g[v]=[f,d,h];i.splice(p,1);y=true}}if(!y){throw"findEmpties iterated with no new neighbors"}for(v in g){n[v]=g[v];r.push(g[v])}}return r.sort(function(e,t){return t[2]-e[2]})}},{"./max_row_length":328}],324:[function(e,t,r){"use strict";var a=e("../../components/fx");var n=e("../../lib");var i=e("../../plots/cartesian/axes");t.exports=function e(t,r,o,l,s,u){var c=t.cd[0];var f=c.trace;var d=t.xa;var v=t.ya;var p=c.x;var h=c.y;var g=c.z;var y=c.xCenter;var m=c.yCenter;var x=c.zmask;var b=[f.zmin,f.zmax];var _=f.zhoverformat;var w=p;var k=h;var M,T,A,L;if(t.index!==false){try{A=Math.round(t.index[1]);L=Math.round(t.index[0])}catch(e){n.error("Error hovering on heatmap, "+"pointNumber must be [row,col], found:",t.index);return}if(A<0||A>=g[0].length||L<0||L>g.length){return}}else if(a.inbox(r-p[0],r-p[p.length-1],0)>0||a.inbox(o-h[0],o-h[h.length-1],0)>0){return}else{if(u){var S;w=[2*p[0]-p[1]];for(S=1;S<p.length;S++){w.push((p[S]+p[S-1])/2)}w.push([2*p[p.length-1]-p[p.length-2]]);k=[2*h[0]-h[1]];for(S=1;S<h.length;S++){k.push((h[S]+h[S-1])/2)}k.push([2*h[h.length-1]-h[h.length-2]])}A=Math.max(0,Math.min(w.length-2,n.findBin(r,w)));L=Math.max(0,Math.min(k.length-2,n.findBin(o,k)))}var C=d.c2p(p[A]),O=d.c2p(p[A+1]),z=v.c2p(h[L]),P=v.c2p(h[L+1]);if(u){O=C;M=p[A];P=z;T=h[L]}else{M=y?y[A]:(p[A]+p[A+1])/2;T=m?m[L]:(h[L]+h[L+1])/2;if(f.zsmooth){C=O=d.c2p(M);z=P=v.c2p(T)}}var D=g[L][A];if(x&&!x[L][A])D=undefined;var I;if(Array.isArray(c.text)&&Array.isArray(c.text[L])){I=c.text[L][A]}var E;var N={type:"linear",range:b,hoverformat:_,_separators:d._separators,_numFormat:d._numFormat};var R=i.tickText(N,D,"hover");E=R.text;return[n.extendFlat(t,{index:[L,A],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:C,x1:O,y0:z,y1:P,xLabelVal:M,yLabelVal:T,zLabelVal:D,zLabel:E,text:I})]}},{"../../components/fx":92,"../../lib":169,"../../plots/cartesian/axes":213}],325:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.calc=e("./calc");a.plot=e("./plot");a.colorbar=e("./colorbar");a.style=e("./style");a.hoverPoints=e("./hover");a.moduleType="trace";a.name="heatmap";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","2dMap"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"./attributes":317,"./calc":318,"./colorbar":320,"./defaults":322,"./hover":324,"./plot":329,"./style":330}],326:[function(e,t,r){"use strict";var a=e("../../lib");var n=.01;var i=[[-1,0],[1,0],[0,-1],[0,1]];function o(e){return.5-.25*Math.min(1,e*.5)}t.exports=function e(t,r){var i=1;var s;l(t,r);for(s=0;s<r.length;s++){if(r[s][2]<4)break}r=r.slice(s);for(s=0;s<100&&i>n;s++){i=l(t,r,o(i))}if(i>n){a.log("interp2d didn't converge quickly",i)}return t};function l(e,t,r){var a=0,n,o,l,s,u,c,f,d,v,p,h,g,y;for(s=0;s<t.length;s++){n=t[s];o=n[0];l=n[1];h=e[o][l];p=0;v=0;for(u=0;u<4;u++){c=i[u];f=e[o+c[0]];if(!f)continue;d=f[l+c[1]];if(d!==undefined){if(p===0){g=y=d}else{g=Math.min(g,d);y=Math.max(y,d)}v++;p+=d}}if(v===0){throw"iterateInterp2d order is wrong: no defined neighbors"}e[o][l]=p/v;if(h===undefined){if(v<4)a=1}else{e[o][l]=(1+r)*e[o][l]-r*h;if(y>g){a=Math.max(a,Math.abs(e[o][l]-h)/(y-g))}}}return a}},{"../../lib":169}],327:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,i,o,l,s){var u=[],c=a.traceIs(t,"contour"),f=a.traceIs(t,"histogram"),d=a.traceIs(t,"gl2d"),v,p,h;var g=n(r)&&r.length>1;if(g&&!f&&s.type!=="category"){var y=r.length;if(y<=l){if(c||d)u=r.slice(0,l);else if(l===1){u=[r[0]-.5,r[0]+.5]}else{u=[1.5*r[0]-.5*r[1]];for(h=1;h<y;h++){u.push((r[h-1]+r[h])*.5)}u.push(1.5*r[y-1]-.5*r[y-2])}if(y<l){var m=u[u.length-1],x=m-u[u.length-2];for(h=y;h<l;h++){m+=x;u.push(m)}}}else{return c?r.slice(0,l):r.slice(0,l+1)}}else{p=o||1;var b=t[s._id.charAt(0)+"calendar"];if(f||s.type==="category")v=s.r2c(i,0,b)||0;else if(n(r)&&r.length===1)v=r[0];else if(i===undefined)v=0;else v=s.d2c(i,0,b);for(h=c||d?0:-.5;h<l;h++){u.push(v+p*h)}}return u}},{"../../lib":169,"../../registry":261}],328:[function(e,t,r){"use strict";t.exports=function e(t){var r=0;for(var a=0;a<t.length;a++){r=Math.max(r,t[a].length)}return r}},{}],329:[function(e,t,r){"use strict";var a=e("d3");var n=e("tinycolor2");var i=e("../../registry");var o=e("../../lib");var l=e("../../components/colorscale");var s=e("../../constants/xmlns_namespaces");var u=e("../../plots/get_data").getUidsFromCalcData;var c=e("./max_row_length");t.exports=function(e,t,r,n){var i=u(r);n.selectAll(".hm > image").each(function(e){var t=e.trace||{};if(!i[t.uid]){a.select(this.parentNode).remove()}});for(var o=0;o<r.length;o++){f(e,t,r[o],n)}};function f(e,t,r,a){var u=r[0];var f=u.trace;var h=t.xaxis;var g=t.yaxis;var y="hm"+f.uid;var m=u.z;var x=u.x;var b=u.y;var _=u.xCenter;var w=u.yCenter;var k=i.traceIs(f,"contour");var M=k?"best":f.zsmooth;var T=m.length;var A=c(m);var L=false;var S=false;var C,O,z,P,D,I;I=0;while(C===undefined&&I<x.length-1){C=h.c2p(x[I]);I++}I=x.length-1;while(O===undefined&&I>0){O=h.c2p(x[I]);I--}if(O<C){z=O;O=C;C=z;L=true}I=0;while(P===undefined&&I<b.length-1){P=g.c2p(b[I]);I++}I=b.length-1;while(D===undefined&&I>0){D=g.c2p(b[I]);I--}if(D<P){z=P;P=D;D=z;S=true}if(k){_=x;w=b;x=u.xfill;b=u.yfill}if(M!=="fast"){var E=M==="best"?0:.5;C=Math.max(-E*h._length,C);O=Math.min((1+E)*h._length,O);P=Math.max(-E*g._length,P);D=Math.min((1+E)*g._length,D)}var N=Math.round(O-C),R=Math.round(D-P);var F=N<=0||R<=0;var B=a.selectAll("g.hm."+y).data(F?[]:[0]);B.enter().append("g").classed("hm",true).classed(y,true);B.exit().remove();if(F)return;var j,q;if(M==="fast"){j=A;q=T}else{j=N;q=R}var H=document.createElement("canvas");H.width=j;H.height=q;var V=H.getContext("2d");var U=l.makeColorScaleFunc(l.extractScale(f.colorscale,f.zmin,f.zmax),{noNumericCheck:true,returnArray:true});var G,Z;if(M==="fast"){G=L?function(e){return A-1-e}:o.identity;Z=S?function(e){return T-1-e}:o.identity}else{G=function(e){return o.constrain(Math.round(h.c2p(x[e])-C),0,N)};Z=function(e){return o.constrain(Math.round(g.c2p(b[e])-P),0,R)}}var Y=Z(0);var X=[Y,Y];var W=L?0:1;var Q=S?0:1;var J=0;var $=0;var K=0;var ee=0;var te,re,ae,ne,ie,oe;function le(e,t){if(e!==undefined){var r=U(e);r[0]=Math.round(r[0]);r[1]=Math.round(r[1]);r[2]=Math.round(r[2]);J+=t;$+=r[0]*t;K+=r[1]*t;ee+=r[2]*t;return r}return[0,0,0,0]}function se(e,t,r,a){var n=e[r.bin0];if(n===undefined)return le(undefined,1);var i=e[r.bin1],o=t[r.bin0],l=t[r.bin1],s=i-n||0,u=o-n||0,c;if(i===undefined){if(l===undefined)c=0;else if(o===undefined)c=2*(l-n);else c=(2*l-o-n)*2/3}else if(l===undefined){if(o===undefined)c=0;else c=(2*n-i-o)*2/3}else if(o===undefined)c=(2*l-i-n)*2/3;else c=l+n-i-o;return le(n+r.frac*s+a.frac*(u+r.frac*c))}if(M){var ue=0,ce;try{ce=new Uint8Array(N*R*4)}catch(e){ce=new Array(N*R*4)}if(M==="best"){var fe=_||x;var de=w||b;var ve=new Array(fe.length);var pe=new Array(de.length);var he=new Array(N);var ge=_?v:d;var ye=w?v:d;var me,xe,be;for(I=0;I<fe.length;I++)ve[I]=Math.round(h.c2p(fe[I])-C);for(I=0;I<de.length;I++)pe[I]=Math.round(g.c2p(de[I])-P);for(I=0;I<N;I++)he[I]=ge(I,ve);for(re=0;re<R;re++){me=ye(re,pe);xe=m[me.bin0];be=m[me.bin1];for(I=0;I<N;I++,ue+=4){oe=se(xe,be,he[I],me);p(ce,ue,oe)}}}else{for(re=0;re<T;re++){ie=m[re];X=Z(re);for(I=0;I<N;I++){oe=le(ie[I],1);ue=(X*N+G(I))*4;p(ce,ue,oe)}}}var _e=V.createImageData(N,R);try{_e.data.set(ce)}catch(e){var we=_e.data,ke=we.length;for(re=0;re<ke;re++){we[re]=ce[re]}}V.putImageData(_e,0,0)}else{var Me=f.xgap;var Te=f.ygap;var Ae=Math.floor(Me/2);var Le=Math.floor(Te/2);for(re=0;re<T;re++){ie=m[re];X.reverse();X[Q]=Z(re+1);if(X[0]===X[1]||X[0]===undefined||X[1]===undefined){continue}ae=G(0);te=[ae,ae];for(I=0;I<A;I++){te.reverse();te[W]=G(I+1);if(te[0]===te[1]||te[0]===undefined||te[1]===undefined){continue}ne=ie[I];oe=le(ne,(te[1]-te[0])*(X[1]-X[0]));V.fillStyle="rgba("+oe.join(",")+")";V.fillRect(te[0]+Ae,X[0]+Le,te[1]-te[0]-Me,X[1]-X[0]-Te)}}}$=Math.round($/J);K=Math.round(K/J);ee=Math.round(ee/J);var Se=n("rgb("+$+","+K+","+ee+")");e._hmpixcount=(e._hmpixcount||0)+J;e._hmlumcount=(e._hmlumcount||0)+J*Se.getLuminance();var Ce=B.selectAll("image").data(r);Ce.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"});Ce.attr({height:R,width:N,x:C,y:P,"xlink:href":H.toDataURL("image/png")});Ce.exit().remove()}function d(e,t){var r=t.length-2;var a=o.constrain(o.findBin(e,t),0,r);var n=t[a];var i=t[a+1];var l=o.constrain(a+(e-n)/(i-n)-.5,0,r);var s=Math.round(l);var u=Math.abs(l-s);if(!l||l===r||!u){return{bin0:s,bin1:s,frac:0}}return{bin0:s,frac:u,bin1:Math.round(s+u/(l-s))}}function v(e,t){var r=t.length-1;var a=o.constrain(o.findBin(e,t),0,r);var n=t[a];var i=t[a+1];var l=(e-n)/(i-n)||0;if(l<=0){return{bin0:a,bin1:a,frac:0}}if(l<.5){return{bin0:a,bin1:a+1,frac:l}}return{bin0:a+1,bin1:a,frac:1-l}}function p(e,t,r){e[t]=r[0];e[t+1]=r[1];e[t+2]=r[2];e[t+3]=Math.round(r[3]*255)}},{"../../components/colorscale":65,"../../constants/xmlns_namespaces":153,"../../lib":169,"../../plots/get_data":241,"../../registry":261,"./max_row_length":328,d3:15,tinycolor2:33}],330:[function(e,t,r){"use strict";var a=e("d3");t.exports=function e(t){a.select(t).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})}},{d3:15}],331:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=a("zsmooth");if(n===false){a("xgap");a("ygap")}a("zhoverformat")}},{}],332:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../../registry");t.exports=function e(t,r,a,s,u,c){var f=a("z");u=u||"x";c=c||"y";var d,v;if(f===undefined||!f.length)return 0;if(n.isArray1D(t.z)){d=a(u);v=a(c);if(!(d&&d.length&&v&&v.length))return 0;r._length=Math.min(d.length,v.length,f.length)}else{d=o(u,a);v=o(c,a);if(!l(f))return 0;a("transpose");r._length=null}var p=i.getComponentMethod("calendars","handleTraceDefaults");p(t,r,[u,c],s);return true};function o(e,t){var r=t(e),a=r?t(e+"type","array"):"scaled";if(a==="scaled"){t(e+"0");t("d"+e)}return r}function l(e){var t=true,r=false,i=false,o;for(var l=0;l<e.length;l++){o=e[l];if(!n.isArrayOrTypedArray(o)){t=false;break}if(o.length>0)r=true;for(var s=0;s<o.length;s++){if(a(o[s])){i=true;break}}}return t&&r&&i}},{"../../lib":169,"../../registry":261,"fast-isnumeric":18}],333:[function(e,t,r){"use strict";var a=e("../bar/attributes");t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:a.text,orientation:a.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:false,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},autobinx:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"xbins.start":undefined,"xbins.end":undefined,"xbins.size":undefined}},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x"),autobiny:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"ybins.start":undefined,"ybins.end":undefined,"ybins.size":undefined}},nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y"),marker:a.marker,selected:a.selected,unselected:a.unselected,_deprecated:{bardir:a._deprecated.bardir}};function n(e){var t={};t["autobin"+e]=false;var r={};r["^autobin"+e]=false;return{start:{valType:"any",dflt:null,editType:"calc",impliedEdits:r},end:{valType:"any",dflt:null,editType:"calc",impliedEdits:r},size:{valType:"any",dflt:null,editType:"calc",impliedEdits:r},editType:"calc",impliedEdits:t}}},{"../bar/attributes":271}],334:[function(e,t,r){"use strict";t.exports=function e(t,r){var a=t.length,n=0;for(var i=0;i<a;i++){if(r[i]){t[i]/=r[i];n+=t[i]}else t[i]=null}return n}},{}],335:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n){a("histnorm");n.forEach(function(e){a(e+"bins.start");a(e+"bins.end");a(e+"bins.size");var t=a("autobin"+e);if(t!==false)a("nbins"+e)});return r}},{}],336:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports={count:function(e,t,r){r[e]++;return 1},sum:function(e,t,r,n){var i=n[t];if(a(i)){i=Number(i);r[e]+=i;return i}return 0},avg:function(e,t,r,n,i){var o=n[t];if(a(o)){o=Number(o);r[e]+=o;i[e]++}return 0},min:function(e,t,r,n){var i=n[t];if(a(i)){i=Number(i);if(!a(r[e])){r[e]=i;return i}else if(r[e]>i){var o=i-r[e];r[e]=i;return o}}return 0},max:function(e,t,r,n){var i=n[t];if(a(i)){i=Number(i);if(!a(r[e])){r[e]=i;return i}else if(r[e]<i){var o=i-r[e];r[e]=i;return o}}return 0}}},{"fast-isnumeric":18}],337:[function(e,t,r){"use strict";var a=e("../../constants/numerical");var n=a.ONEAVGYEAR;var i=a.ONEAVGMONTH;var o=a.ONEDAY;var l=a.ONEHOUR;var s=a.ONEMIN;var u=a.ONESEC;var c=e("../../plots/cartesian/axes").tickIncrement;t.exports=function e(t,r,a,i,l){var s=-1.1*r;var u=-.1*r;var d=t-u;var v=a[0];var p=a[1];var h=Math.min(f(v+u,v+d,i,l),f(p+u,p+d,i,l));var g=Math.min(f(v+s,v+u,i,l),f(p+s,p+u,i,l));var y,m;if(h>g&&g<Math.abs(p-v)/4e3){y=h;m=false}else{y=Math.min(h,g);m=true}if(i.type==="date"&&y>o){var x=y===n?1:6;var b=y===n?"M12":"M1";return function(e,r){var a=i.c2d(e,n,l);var o=a.indexOf("-",x);if(o>0)a=a.substr(0,o);var s=i.d2c(a,0,l);if(s<e){var u=c(s,b,false,l);if((s+u)/2<e+t)s=u}if(r&&m){return c(s,b,true,l)}return s}}return function(e,r){var a=y*Math.round(e/y);if(a+y/10<e&&a+y*.9<e+t){a+=y}if(r&&m){a-=y}return a}};function f(e,t,r,a){if(e*t<=0)return Infinity;var n=Math.abs(t-e);var i=r.type==="date";var o=d(n,i);for(var l=0;l<10;l++){var s=d(o*80,i);if(o===s)break;if(v(s,e,t,i,r,a))o=s;else break}return o}function d(e,t){if(t&&e>u){if(e>o){if(e>n*1.1)return n;if(e>i*1.1)return i;return o}if(e>l)return l;if(e>s)return s;return u}return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function v(e,t,r,a,i,l){if(a&&e>o){var s=p(t,i,l);var u=p(r,i,l);var c=e===n?0:1;return s[c]!==u[c]}return Math.floor(r/e)-Math.floor(t/e)>.1}function p(e,t,r){var a=t.c2d(e,n,r).split("-");if(a[0]===""){a.unshift();a[0]="-"+a[0]}return a}},{"../../constants/numerical":151,"../../plots/cartesian/axes":213}],338:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../bar/arrays_to_calcdata");var l=e("./bin_functions");var s=e("./norm_functions");var u=e("./average");var c=e("./clean_bins");var f=e("../../constants/numerical").ONEAVGMONTH;var d=e("./bin_label_vals");t.exports=function e(t,r){if(r.visible!==true)return;var f=[];var p=[];var h=i.getFromId(t,r.orientation==="h"?r.yaxis||"y":r.xaxis||"x");var g=r.orientation==="h"?"y":"x";var y={x:"y",y:"x"}[g];var x=r[g+"calendar"];var b=r.cumulative;var _;c(r,h,g);var w=v(t,r,h,g);var k=w[0];var M=w[1];var T=typeof k.size==="string";var A=[];var L=T?A:k;var S=[];var C=[];var O=[];var z=0;var P=r.histnorm;var D=r.histfunc;var I=P.indexOf("density")!==-1;var E,N,R;if(b.enabled&&I){P=P.replace(/ ?density$/,"");I=false}var F=D==="max"||D==="min";var B=F?null:0;var j=l.count;var q=s[P];var H=false;var V=function(e){return h.r2c(e,0,x)};var U;if(n.isArrayOrTypedArray(r[y])&&D!=="count"){U=r[y];H=D==="avg";j=l[D]}_=V(k.start);N=V(k.end)+(_-i.tickIncrement(_,k.size,false,x))/1e6;while(_<N&&f.length<1e6){E=i.tickIncrement(_,k.size,false,x);f.push((_+E)/2);p.push(B);O.push([]);A.push(_);if(I)S.push(1/(E-_));if(H)C.push(0);if(E<=_)break;_=E}A.push(_);if(!T&&h.type==="date"){L={start:V(L.start),end:V(L.end),size:L.size}}var G=p.length;var Z=true;var Y=Infinity;var X=Infinity;var W={};for(_=0;_<M.length;_++){var Q=M[_];R=n.findBin(Q,L);if(R>=0&&R<G){z+=j(R,_,p,U,C);if(Z&&O[R].length&&Q!==M[O[R][0]]){Z=false}O[R].push(_);W[_]=R;Y=Math.min(Y,Q-A[R]);X=Math.min(X,A[R+1]-Q)}}var J;if(!Z){J=d(Y,X,A,h,x)}if(H)z=u(p,C);if(q)q(p,z,S);if(b.enabled)m(p,b.direction,b.currentbin);var $=Math.min(f.length,p.length);var K=[];var ee=0;var te=$-1;for(_=0;_<$;_++){if(p[_]){ee=_;break}}for(_=$-1;_>=ee;_--){if(p[_]){te=_;break}}for(_=ee;_<=te;_++){if(a(f[_])&&a(p[_])){var re={p:f[_],s:p[_],b:0};if(!b.enabled){re.pts=O[_];if(Z){re.p0=re.p1=O[_].length?M[O[_][0]]:f[_]}else{re.p0=J(A[_]);re.p1=J(A[_+1],true)}}K.push(re)}}if(K.length===1){K[0].width1=i.tickIncrement(K[0].p,k.size,false,x)-K[0].p}o(K,r);if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(K,r,W)}return K};function v(e,t,r,n,o){var l=n+"bins";var s=e._fullLayout.barmode==="overlay";var u,c,f,d,v;if(t._autoBinFinished){delete t._autoBinFinished}else{var y=s?[t]:h(e,t);var m=[];var x=Infinity;var b=Infinity;var _=-Infinity;var w="autobin"+n;for(u=0;u<y.length;u++){c=y[u];v=c._pos0=r.makeCalcdata(c,n);var k=c[l];if(c[w]||!k||k.start===null||k.end===null){f=c[n+"calendar"];var M=c.cumulative;k=i.autoBin(v,r,c["nbins"+n],false,f);if(s&&k._dataSpan===0&&r.type!=="category"){if(o)return[k,v,true];k=p(e,t,r,n,l)}if(M.enabled&&M.currentbin!=="include"){if(M.direction==="decreasing"){b=Math.min(b,r.r2c(k.start,0,f)-k.size)}else{_=Math.max(_,r.r2c(k.end,0,f)+k.size)}}m.push(c)}else if(!d){d={size:k.size,start:r.r2c(k.start,0,f),end:r.r2c(k.end,0,f)}}x=g(x,k.size);b=Math.min(b,r.r2c(k.start,0,f));_=Math.max(_,r.r2c(k.end,0,f));if(u)c._autoBinFinished=1}if(d&&a(d.size)&&a(x)){if(x>d.size/1.9)x=d.size;else x=d.size/Math.ceil(d.size/x);var T=d.start+(d.size-x)/2;b=T-x*Math.ceil((T-b)/x)}for(u=0;u<m.length;u++){c=m[u];f=c[n+"calendar"];c._input[l]=c[l]={start:r.c2r(b,0,f),end:r.c2r(_,0,f),size:x};c._input[w]=c[w]}}v=t._pos0;delete t._pos0;return[t[l],v]}function p(e,t,r,a,i){var o=h(e,t);var l=false;var s=Infinity;var u=[t];var c,f;for(c=0;c<o.length;c++){f=o[c];if(f===t)l=true;else if(!l){s=Math.min(s,f[i].size)}else{var d=v(e,f,r,a,true);var p=d[0];var g=d[2];f._autoBinFinished=1;f._pos0=d[1];if(g){u.push(f)}else{s=Math.min(s,p.size)}}}var y=new Array(u.length);for(c=0;c<u.length;c++){var m=u[c]._pos0;for(var x=0;x<m.length;x++){if(m[x]!==undefined){y[c]=m[x];break}}}if(!isFinite(s)){s=n.distinctVals(y).minDiff}for(c=0;c<u.length;c++){f=u[c];var b=f[a+"calendar"];f._input[i]=f[i]={start:r.c2r(y[c]-s/2,0,b),end:r.c2r(y[c]+s/2,0,b),size:s}}return t[i]}function h(e,t){var r=t.xaxis;var a=t.yaxis;var n=t.orientation;var i=[];var o=e._fullData;for(var l=0;l<o.length;l++){var s=o[l];if(s.type==="histogram"&&s.visible===true&&s.orientation===n&&s.xaxis===r&&s.yaxis===a){i.push(s)}}return i}function g(e,t){if(e===Infinity)return t;var r=y(e);var a=y(t);return a<r?t:e}function y(e){if(a(e))return e;if(typeof e==="string"&&e.charAt(0)==="M"){return f*+e.substr(1)}return Infinity}function m(e,t,r){var a,n,i;function o(t){i=e[t];e[t]/=2}function l(t){n=e[t];e[t]=i+n/2;i+=n}if(r==="half"){if(t==="increasing"){o(0);for(a=1;a<e.length;a++){l(a)}}else{o(e.length-1);for(a=e.length-2;a>=0;a--){l(a)}}}else if(t==="increasing"){for(a=1;a<e.length;a++){e[a]+=e[a-1]}if(r==="exclude"){e.unshift(0);e.pop()}}else{for(a=e.length-2;a>=0;a--){e[a]+=e[a+1]}if(r==="exclude"){e.push(0);e.shift()}}}},{"../../constants/numerical":151,"../../lib":169,"../../plots/cartesian/axes":213,"../bar/arrays_to_calcdata":270,"./average":334,"./bin_functions":336,"./bin_label_vals":337,"./clean_bins":339,"./norm_functions":344,"fast-isnumeric":18}],339:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib").cleanDate;var i=e("../../constants/numerical");var o=i.ONEDAY;var l=i.BADNUM;t.exports=function e(t,r,i){var s=r.type,u=i+"bins",c=t[u];if(!c)c=t[u]={};var f=s==="date"?function(e){return e||e===0?n(e,l,c.calendar):null}:function(e){return a(e)?Number(e):null};c.start=f(c.start);c.end=f(c.end);var d=s==="date"?o:1,v=c.size;if(a(v)){c.size=v>0?Number(v):d}else if(typeof v!=="string"){c.size=d}else{var p=v.charAt(0),h=v.substr(1);h=a(h)?Number(h):0;if(h<=0||!(s==="date"&&p==="M"&&h===Math.round(h))){c.size=d}}var g="autobin"+i;if(typeof t[g]!=="boolean"){t[g]=t._fullInput[g]=t._input[g]=!((c.start||c.start===0)&&(c.end||c.end===0))}if(!t[g]){delete t["nbins"+i];delete t._fullInput["nbins"+i]}}},{"../../constants/numerical":151,"../../lib":169,"fast-isnumeric":18}],340:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../lib");var i=e("../../components/color");var o=e("./bin_defaults");var l=e("../bar/style_defaults");var s=e("./attributes");t.exports=function e(t,r,u,c){function f(e,a){return n.coerce(t,r,s,e,a)}var d=f("x");var v=f("y");var p=f("cumulative.enabled");if(p){f("cumulative.direction");f("cumulative.currentbin")}f("text");var h=f("orientation",v&&!d?"h":"v");var g=h==="v"?"x":"y";var y=h==="v"?"y":"x";var m=d&&v?Math.min(d.length&&v.length):(r[g]||[]).length;if(!m){r.visible=false;return}r._length=m;var x=a.getComponentMethod("calendars","handleTraceDefaults");x(t,r,["x","y"],c);var b=r[y];if(b)f("histfunc");o(t,r,f,[g]);l(t,r,f,u,c);var _=a.getComponentMethod("errorbars","supplyDefaults");_(t,r,i.defaultLine,{axis:"y"});_(t,r,i.defaultLine,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,f)}},{"../../components/color":50,"../../lib":169,"../../registry":261,"../bar/style_defaults":283,"./attributes":333,"./bin_defaults":335}],341:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){t.x="xVal"in r?r.xVal:r.x;t.y="yVal"in r?r.yVal:r.y;if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(!(a.cumulative||{}).enabled){var o=Array.isArray(i)?n[0].pts[i[0]][i[1]]:n[i].pts;t.pointNumbers=o;t.binNumber=t.pointNumber;delete t.pointNumber;delete t.pointIndex;var l;if(a._indexToPoints){l=[];for(var s=0;s<o.length;s++){l=l.concat(a._indexToPoints[o[s]])}}else{l=o}t.pointIndices=l}return t}},{}],342:[function(e,t,r){"use strict";var a=e("../bar/hover");var n=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,i,o){var l=a(t,r,i,o);if(!l)return;t=l[0];var s=t.cd[t.index];var u=t.cd[0].trace;if(!u.cumulative.enabled){var c=u.orientation==="h"?"y":"x";t[c+"Label"]=n(t[c+"a"],s.p0,s.p1)}return l}},{"../../plots/cartesian/axes":213,"../bar/hover":274}],343:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.layoutAttributes=e("../bar/layout_attributes");a.supplyDefaults=e("./defaults");a.supplyLayoutDefaults=e("../bar/layout_defaults");a.calc=e("./calc");a.setPositions=e("../bar/set_positions");a.plot=e("../bar/plot");a.layerName="barlayer";a.style=e("../bar/style").style;a.styleOnSelect=e("../bar/style").styleOnSelect;a.colorbar=e("../scatter/marker_colorbar");a.hoverPoints=e("./hover");a.selectPoints=e("../bar/select");a.eventData=e("./event_data");a.moduleType="trace";a.name="histogram";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"../bar/layout_attributes":276,"../bar/layout_defaults":277,"../bar/plot":278,"../bar/select":279,"../bar/set_positions":280,"../bar/style":282,"../scatter/marker_colorbar":384,"./attributes":333,"./calc":338,"./defaults":340,"./event_data":341,"./hover":342}],344:[function(e,t,r){"use strict";t.exports={percent:function(e,t){var r=e.length,a=100/t;for(var n=0;n<r;n++)e[n]*=a},probability:function(e,t){var r=e.length;for(var a=0;a<r;a++)e[a]/=t},density:function(e,t,r,a){var n=e.length;a=a||1;for(var i=0;i<n;i++)e[i]*=r[i]*a},"probability density":function(e,t,r,a){var n=e.length;if(a)t/=a;for(var i=0;i<n;i++)e[i]*=r[i]/t}}},{}],345:[function(e,t,r){"use strict";var a=e("../histogram/attributes");var n=e("../heatmap/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/colorbar/attributes");var l=e("../../lib/extend").extendFlat;t.exports=l({x:a.x,y:a.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:a.histnorm,histfunc:a.histfunc,autobinx:a.autobinx,nbinsx:a.nbinsx,xbins:a.xbins,autobiny:a.autobiny,nbinsy:a.nbinsy,ybins:a.ybins,xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,zhoverformat:n.zhoverformat},i("",{cLetter:"z",autoColorDflt:false}),{colorbar:o})},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../lib/extend":163,"../heatmap/attributes":317,"../histogram/attributes":333}],346:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../histogram/bin_functions");var o=e("../histogram/norm_functions");var l=e("../histogram/average");var s=e("../histogram/clean_bins");var u=e("../histogram/bin_label_vals");t.exports=function e(t,r){var s=n.getFromId(t,r.xaxis||"x");var u=r.x?s.makeCalcdata(r,"x"):[];var p=n.getFromId(t,r.yaxis||"y");var h=r.y?p.makeCalcdata(r,"y"):[];var g=r.xcalendar;var y=r.ycalendar;var m=function(e){return s.r2c(e,0,g)};var x=function(e){return p.r2c(e,0,y)};var b=function(e){return s.c2r(e,0,g)};var _=function(e){return p.c2r(e,0,y)};var w,k,M,T;var A=r._length;if(u.length>A)u.splice(A,u.length-A);if(h.length>A)h.splice(A,h.length-A);c(r,"x",u,s,m,b,g);c(r,"y",h,p,x,_,y);var L=[];var S=[];var C=[];var O=typeof r.xbins.size==="string";var z=typeof r.ybins.size==="string";var P=[];var D=[];var I=O?P:r.xbins;var E=z?D:r.ybins;var N=0;var R=[];var F=[];var B=r.histnorm;var j=r.histfunc;var q=B.indexOf("density")!==-1;var H=j==="max"||j==="min";var V=H?null:0;var U=i.count;var G=o[B];var Z=false;var Y=[];var X=[];var W="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";if(W&&j!=="count"){Z=j==="avg";U=i[j]}var Q=r.xbins,J=m(Q.start),$=m(Q.end)+(J-n.tickIncrement(J,Q.size,false,g))/1e6;for(w=J;w<$;w=n.tickIncrement(w,Q.size,false,g)){S.push(V);P.push(w);if(Z)C.push(0)}P.push(w);var K=S.length;var ee=m(r.xbins.start);var te=(w-ee)/K;var re=b(ee+te/2);Q=r.ybins;J=x(Q.start);$=x(Q.end)+(J-n.tickIncrement(J,Q.size,false,y))/1e6;for(w=J;w<$;w=n.tickIncrement(w,Q.size,false,y)){L.push(S.slice());D.push(w);var ae=new Array(K);for(k=0;k<K;k++)ae[k]=[];F.push(ae);if(Z)R.push(C.slice())}D.push(w);var ne=L.length;var ie=x(r.ybins.start);var oe=(w-ie)/ne;var le=_(ie+oe/2);if(q){Y=f(S.length,I,te,O);X=f(L.length,E,oe,z)}if(!O&&s.type==="date")I=d(m,I);if(!z&&p.type==="date")E=d(x,E);var se=true;var ue=true;var ce=new Array(K);var fe=new Array(ne);var de=Infinity;var ve=Infinity;var pe=Infinity;var he=Infinity;for(w=0;w<A;w++){var ge=u[w];var ye=h[w];M=a.findBin(ge,I);T=a.findBin(ye,E);if(M>=0&&M<K&&T>=0&&T<ne){N+=U(M,w,L[T],W,R[T]);F[T][M].push(w);if(se){if(ce[M]===undefined)ce[M]=ge;else if(ce[M]!==ge)se=false}if(ue){if(fe[M]===undefined)fe[M]=ye;else if(fe[M]!==ye)ue=false}de=Math.min(de,ge-P[M]);ve=Math.min(ve,P[M+1]-ge);pe=Math.min(pe,ye-D[T]);he=Math.min(he,D[T+1]-ye)}}if(Z){for(T=0;T<ne;T++)N+=l(L[T],R[T])}if(G){for(T=0;T<ne;T++)G(L[T],N,Y,X[T])}return{x:u,xRanges:v(P,se&&ce,de,ve,s,g),x0:re,dx:te,y:h,yRanges:v(D,ue&&fe,pe,he,p,y),y0:le,dy:oe,z:L,pts:F}};function c(e,t,r,a,i,o,l){var u=t+"bins";var c="autobin"+t;var f=e[u];s(e,a,t);if(e[c]||!f||f.start===null||f.end===null){f=n.autoBin(r,a,e["nbins"+t],"2d",l);if(e.type==="histogram2dcontour"){f.start=o(n.tickIncrement(i(f.start),f.size,true,l));f.end=o(n.tickIncrement(i(f.end),f.size,false,l))}e._input[u]=e[u]=f;e._input[c]=e[c]}}function f(e,t,r,a){var n=new Array(e);var i;if(a){for(i=0;i<e;i++)n[i]=1/(t[i+1]-t[i])}else{var o=1/r;for(i=0;i<e;i++)n[i]=o}return n}function d(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function v(e,t,r,a,n,i){var o;var l=e.length-1;var s=new Array(l);if(t){for(o=0;o<l;o++)s[o]=[t[o],t[o]]}else{var c=u(r,a,e,n,i);for(o=0;o<l;o++)s[o]=[c(e[o]),c(e[o+1],true)]}return s}},{"../../lib":169,"../../plots/cartesian/axes":213,"../histogram/average":334,"../histogram/bin_functions":336,"../histogram/bin_label_vals":337,"../histogram/clean_bins":339,"../histogram/norm_functions":344}],347:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./sample_defaults");var i=e("../heatmap/style_defaults");var o=e("../../components/colorscale/defaults");var l=e("./attributes");t.exports=function e(t,r,s,u){function c(e,n){return a.coerce(t,r,l,e,n)}n(t,r,c,u);if(r.visible===false)return;i(t,r,c,u);o(t,r,u,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":60,"../../lib":169,"../heatmap/style_defaults":331,"./attributes":345,"./sample_defaults":350}],348:[function(e,t,r){"use strict";var a=e("../heatmap/hover");var n=e("../../plots/cartesian/axes").hoverLabelText;t.exports=function e(t,r,i,o,l,s){var u=a(t,r,i,o,l,s);if(!u)return;t=u[0];var c=t.index;var f=c[0];var d=c[1];var v=t.cd[0];var p=v.xRanges[d];var h=v.yRanges[f];t.xLabel=n(t.xa,p[0],p[1]);t.yLabel=n(t.ya,h[0],h[1]);return u}},{"../../plots/cartesian/axes":213,"../heatmap/hover":324}],349:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.calc=e("../heatmap/calc");a.plot=e("../heatmap/plot");a.layerName="heatmaplayer";a.colorbar=e("../heatmap/colorbar");a.style=e("../heatmap/style");a.hoverPoints=e("./hover");a.eventData=e("../histogram/event_data");a.moduleType="trace";a.name="histogram2d";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","2dMap","histogram"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"../heatmap/calc":318,"../heatmap/colorbar":320,"../heatmap/plot":329,"../heatmap/style":330,"../histogram/event_data":341,"./attributes":345,"./defaults":347,"./hover":348}],350:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../histogram/bin_defaults");t.exports=function e(t,r,i,o){var l=i("x");var s=i("y");if(!(l&&l.length&&s&&s.length)){r.visible=false;return}r._length=Math.min(l.length,s.length);var u=a.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],o);var c=i("z")||i("marker.color");if(c)i("histfunc");var f=["x","y"];n(t,r,i,f)}},{"../../registry":261,"../histogram/bin_defaults":335}],351:[function(e,t,r){"use strict";var a=e("../histogram2d/attributes");var n=e("../contour/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/colorbar/attributes");var l=e("../../lib/extend").extendFlat;t.exports=l({x:a.x,y:a.y,z:a.z,marker:a.marker,histnorm:a.histnorm,histfunc:a.histfunc,autobinx:a.autobinx,nbinsx:a.nbinsx,xbins:a.xbins,autobiny:a.autobiny,nbinsy:a.nbinsy,ybins:a.ybins,autocontour:n.autocontour,ncontours:n.ncontours,contours:n.contours,line:n.line,zhoverformat:a.zhoverformat},i("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:o})},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../lib/extend":163,"../contour/attributes":295,"../histogram2d/attributes":345}],352:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../histogram2d/sample_defaults");var i=e("../contour/contours_defaults");var o=e("../contour/style_defaults");var l=e("./attributes");t.exports=function e(t,r,s,u){function c(e,n){return a.coerce(t,r,l,e,n)}function f(e){return a.coerce2(t,r,l,e)}n(t,r,c,u);if(r.visible===false)return;i(t,r,c,f);o(t,r,c,u)}},{"../../lib":169,"../contour/contours_defaults":302,"../contour/style_defaults":316,"../histogram2d/sample_defaults":350,"./attributes":351}],353:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.calc=e("../contour/calc");a.plot=e("../contour/plot").plot;a.layerName="contourlayer";a.style=e("../contour/style");a.colorbar=e("../contour/colorbar");a.hoverPoints=e("../contour/hover");a.moduleType="trace";a.name="histogram2dcontour";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","2dMap","contour","histogram"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"../contour/calc":296,"../contour/colorbar":298,"../contour/hover":308,"../contour/plot":313,"../contour/style":315,"./attributes":351,"./defaults":352}],354:[function(e,t,r){"use strict";var a=e("../../components/color/attributes");var n=e("../../plots/font_attributes");var i=e("../../plots/attributes");var o=e("../../plots/domain").attributes;var l=e("../../lib/extend").extendFlat;var s=n({editType:"calc",colorEditType:"style"});t.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:a.defaultLine,arrayOk:true,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:true,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:l({},i.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:true,editType:"calc"},textfont:l({},s,{}),insidetextfont:l({},s,{}),outsidetextfont:l({},s,{}),domain:o({name:"pie",trace:true,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:true,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:true,editType:"calc"}}},{"../../components/color/attributes":49,"../../lib/extend":163,"../../plots/attributes":210,"../../plots/domain":238,"../../plots/font_attributes":239}],355:[function(e,t,r){"use strict";var a=e("../../registry");var n=e("../../plots/get_data").getModuleCalcData;r.name="pie";r.plot=function(e){var t=a.getModule("pie");var r=n(e.calcdata,t)[0];if(r.length)t.plot(e,r)};r.clean=function(e,t,r,a){var n=a._has&&a._has("pie");var i=t._has&&t._has("pie");if(n&&!i){a._pielayer.selectAll("g.trace").remove()}}},{"../../plots/get_data":241,"../../registry":261}],356:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib").isArrayOrTypedArray;var i=e("tinycolor2");var o=e("../../components/color");var l=e("./helpers");t.exports=function e(t,r){var s=r.values;var f=n(s)&&s.length;var d=r.labels;var v=r.marker.colors||[];var p=[];var h=t._fullLayout;var g=h.colorway;var y=h._piecolormap;var m={};var x=0;var b=h.hiddenlabels||[];var _,w,k,M,T;if(!h._piecolorway&&g!==o.defaults){h._piecolorway=c(g)}if(r.dlabel){d=new Array(s.length);for(_=0;_<s.length;_++){d[_]=String(r.label0+_*r.dlabel)}}function A(e,t){if(!e)return false;e=i(e);if(!e.isValid())return false;e=o.addOpacity(e,e.getAlpha());if(!y[t])y[t]=e;return e}var L=(f?s:d).length;for(_=0;_<L;_++){if(f){w=s[_];if(!a(w))continue;w=+w;if(w<0)continue}else w=1;k=d[_];if(k===undefined||k==="")k=_;k=String(k);var S=m[k];if(S===undefined){m[k]=p.length;M=b.indexOf(k)!==-1;if(!M)x+=w;p.push({v:w,label:k,color:A(v[_]),i:_,pts:[_],hidden:M})}else{T=p[S];T.v+=w;T.pts.push(_);if(!T.hidden)x+=w;if(T.color===false&&v[_]){T.color=A(v[_],k)}}}if(r.sort)p.sort(function(e,t){return t.v-e.v});for(_=0;_<p.length;_++){T=p[_];if(T.color===false){if(y[T.label]){T.color=y[T.label]}else{y[T.label]=T.color=u(h._piedefaultcolorcount,h._piecolorway);h._piedefaultcolorcount++}}}if(p[0])p[0].vTotal=x;if(r.textinfo&&r.textinfo!=="none"){var C=r.textinfo.indexOf("label")!==-1;var O=r.textinfo.indexOf("text")!==-1;var z=r.textinfo.indexOf("value")!==-1;var P=r.textinfo.indexOf("percent")!==-1;var D=h.separators;var I;for(_=0;_<p.length;_++){T=p[_];I=C?[T.label]:[];if(O){var E=l.getFirstFilled(r.text,T.pts);if(E)I.push(E)}if(z)I.push(l.formatPieValue(T.v,D));if(P)I.push(l.formatPiePercent(T.v/x,D));T.text=I.join("<br>")}}return p};var s;function u(e,t){if(!s){var r=o.defaults;s=c(r)}var a=t||s;return a[e%a.length]}function c(e){var t;var r=e.slice();for(t=0;t<e.length;t++){r.push(i(e[t]).lighten(20).toHexString())}for(t=0;t<e.length;t++){r.push(i(e[t]).darken(20).toHexString())}return r}},{"../../components/color":50,"../../lib":169,"./helpers":359,"fast-isnumeric":18,tinycolor2:33}],357:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./attributes");var i=e("../../plots/domain").defaults;t.exports=function e(t,r,o,l){function s(e,i){return a.coerce(t,r,n,e,i)}var u=a.coerceFont;var c;var f=s("values");var d=a.isArrayOrTypedArray(f);var v=s("labels");if(Array.isArray(v)){c=v.length;if(d)c=Math.min(c,f.length)}else if(d){c=f.length;s("label0");s("dlabel")}if(!c){r.visible=false;return}r._length=c;var p=s("marker.line.width");if(p)s("marker.line.color");s("marker.colors");s("scalegroup");var h=s("text");var g=s("textinfo",Array.isArray(h)?"text+percent":"percent");s("hovertext");if(g&&g!=="none"){var y=s("textposition"),m=Array.isArray(y)||y==="auto",x=m||y==="inside",b=m||y==="outside";if(x||b){var _=u(s,"textfont",l.font);if(x)u(s,"insidetextfont",_);if(b)u(s,"outsidetextfont",_)}}i(r,l,s);s("hole");s("sort");s("direction");s("rotation");s("pull")}},{"../../lib":169,"../../plots/domain":238,"./attributes":354}],358:[function(e,t,r){"use strict";var a=e("../../components/fx/helpers").appendArrayMultiPointValues;t.exports=function e(t,r){var n={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,v:t.v};if(t.pts.length===1)n.pointNumber=n.i=t.pts[0];a(n,r,t.pts);return n}},{"../../components/fx/helpers":89}],359:[function(e,t,r){"use strict";var a=e("../../lib");r.formatPiePercent=function e(t,r){var n=(t*100).toPrecision(3);if(n.lastIndexOf(".")!==-1){n=n.replace(/[.]?0+$/,"")}return a.numSeparate(n,r)+"%"};r.formatPieValue=function e(t,r){var n=t.toPrecision(10);if(n.lastIndexOf(".")!==-1){n=n.replace(/[.]?0+$/,"")}return a.numSeparate(n,r)};r.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var a=0;a<r.length;a++){var n=t[r[a]];if(n||n===0)return n}};r.castOption=function e(t,a){if(Array.isArray(t))return r.getFirstFilled(t,a);else if(t)return t}},{"../../lib":169}],360:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.supplyLayoutDefaults=e("./layout_defaults");a.layoutAttributes=e("./layout_attributes");a.calc=e("./calc");a.plot=e("./plot");a.style=e("./style");a.styleOne=e("./style_one");a.moduleType="trace";a.name="pie";a.basePlotModule=e("./base_plot");a.categories=["pie","showLegend"];a.meta={};t.exports=a},{"./attributes":354,"./base_plot":355,"./calc":356,"./defaults":357,"./layout_attributes":361,"./layout_defaults":362,"./plot":363,"./style":364,"./style_one":365}],361:[function(e,t,r){"use strict";t.exports={hiddenlabels:{valType:"data_array",editType:"calc"}}},{}],362:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./layout_attributes");t.exports=function e(t,r){function i(e,i){return a.coerce(t,r,n,e,i)}i("hiddenlabels")}},{"../../lib":169,"./layout_attributes":361}],363:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/fx");var i=e("../../components/color");var o=e("../../components/drawing");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("./helpers");var c=e("./event_data");t.exports=function e(t,r){var y=t._fullLayout;h(r,y._size);var m=y._pielayer.selectAll("g.trace").data(r);m.enter().append("g").attr({"stroke-linejoin":"round",class:"trace"});m.exit().remove();m.order();m.each(function(e){var r=a.select(this);var h=e[0];var m=h.trace;g(e);r.each(function(){var r=a.select(this).selectAll("g.slice").data(e);r.enter().append("g").classed("slice",true);r.exit().remove();var g=[[[],[]],[[],[]]];var x=false;r.each(function(e){if(e.hidden){a.select(this).selectAll("path,g").remove();return}e.pointNumber=e.i;e.curveNumber=m.index;g[e.pxmid[1]<0?0:1][e.pxmid[0]<0?0:1].push(e);var r=h.cx;var i=h.cy;var p=a.select(this);var b=p.selectAll("path.surface").data([e]);var _=false;var w=false;function k(){var o=t._fullLayout;var l=t._fullData[m.index];if(t._dragging||o.hovermode===false)return;var s=l.hoverinfo;if(Array.isArray(s)){s=n.castHoverinfo({hoverinfo:[u.castOption(s,e.pts)],_module:m._module},o,0)}if(s==="all")s="label+text+value+percent+name";if(s!=="none"&&s!=="skip"&&s){var f=d(e,h);var v=r+e.pxmid[0]*(1-f);var p=i+e.pxmid[1]*(1-f);var g=y.separators;var x=[];if(s.indexOf("label")!==-1)x.push(e.label);if(s.indexOf("text")!==-1){var b=u.castOption(l.hovertext||l.text,e.pts);if(b)x.push(b)}if(s.indexOf("value")!==-1)x.push(u.formatPieValue(e.v,g));if(s.indexOf("percent")!==-1)x.push(u.formatPiePercent(e.v/h.vTotal,g));var k=m.hoverlabel;var M=k.font;n.loneHover({x0:v-f*h.r,x1:v+f*h.r,y:p,text:x.join("<br>"),name:s.indexOf("name")!==-1?l.name:undefined,idealAlign:e.pxmid[0]<0?"left":"right",color:u.castOption(k.bgcolor,e.pts)||e.color,borderColor:u.castOption(k.bordercolor,e.pts),fontFamily:u.castOption(M.family,e.pts),fontSize:u.castOption(M.size,e.pts),fontColor:u.castOption(M.color,e.pts)},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:t});_=true}t.emit("plotly_hover",{points:[c(e,l)],event:a.event});w=true}function M(r){var i=t._fullLayout;var o=t._fullData[m.index];if(w){r.originalEvent=a.event;t.emit("plotly_unhover",{points:[c(e,o)],event:a.event});w=false}if(_){n.loneUnhover(i._hoverlayer.node());_=false}}function T(){var r=t._fullLayout;var i=t._fullData[m.index];if(t._dragging||r.hovermode===false)return;t._hoverdata=[c(e,i)];n.click(t,a.event)}b.enter().append("path").classed("surface",true).style({"pointer-events":"all"});p.select("path.textline").remove();p.on("mouseover",k).on("mouseout",M).on("click",T);if(m.pull){var A=+u.castOption(m.pull,e.pts)||0;if(A>0){r+=A*e.pxmid[0];i+=A*e.pxmid[1]}}e.cxFinal=r;e.cyFinal=i;function L(t,r,a,n){return"a"+n*h.r+","+n*h.r+" 0 "+e.largeArc+(a?" 1 ":" 0 ")+n*(r[0]-t[0])+","+n*(r[1]-t[1])}var S=m.hole;if(e.v===h.vTotal){var C="M"+(r+e.px0[0])+","+(i+e.px0[1])+L(e.px0,e.pxmid,true,1)+L(e.pxmid,e.px0,true,1)+"Z";if(S){b.attr("d","M"+(r+S*e.px0[0])+","+(i+S*e.px0[1])+L(e.px0,e.pxmid,false,S)+L(e.pxmid,e.px0,false,S)+"Z"+C)}else b.attr("d",C)}else{var O=L(e.px0,e.px1,true,1);if(S){var z=1-S;b.attr("d","M"+(r+S*e.px1[0])+","+(i+S*e.px1[1])+L(e.px1,e.px0,false,S)+"l"+z*e.px0[0]+","+z*e.px0[1]+O+"Z")}else{b.attr("d","M"+r+","+i+"l"+e.px0[0]+","+e.px0[1]+O+"Z")}}var P=u.castOption(m.textposition,e.pts);var D=p.selectAll("g.slicetext").data(e.text&&P!=="none"?[0]:[]);D.enter().append("g").classed("slicetext",true);D.exit().remove();D.each(function(){var n=l.ensureSingle(a.select(this),"text","",function(e){e.attr("data-notex",1)});n.text(e.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,P==="outside"?m.outsidetextfont:m.insidetextfont).call(s.convertToTspans,t);var u=o.bBox(n.node());var c;if(P==="outside"){c=v(u,e)}else{c=f(u,e,h);if(P==="auto"&&c.scale<1){n.call(o.font,m.outsidetextfont);if(m.outsidetextfont.family!==m.insidetextfont.family||m.outsidetextfont.size!==m.insidetextfont.size){u=o.bBox(n.node())}c=v(u,e)}}var d=r+e.pxmid[0]*c.rCenter+(c.x||0);var p=i+e.pxmid[1]*c.rCenter+(c.y||0);if(c.outside){e.yLabelMin=p-u.height/2;e.yLabelMid=p;e.yLabelMax=p+u.height/2;e.labelExtraX=0;e.labelExtraY=0;x=true}n.attr("transform","translate("+d+","+p+")"+(c.scale<1?"scale("+c.scale+")":"")+(c.rotate?"rotate("+c.rotate+")":"")+"translate("+-(u.left+u.right)/2+","+-(u.top+u.bottom)/2+")")})});if(x)p(g,m);r.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=a.select(this);var r=t.select("g.slicetext text");r.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+r.attr("transform"));var n=e.cxFinal+e.pxmid[0];var o=e.cyFinal+e.pxmid[1];var l="M"+n+","+o;var s=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var u=e.labelExtraX*e.pxmid[1]/e.pxmid[0];var c=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);if(Math.abs(u)>Math.abs(c)){l+="l"+c*e.pxmid[0]/e.pxmid[1]+","+c+"H"+(n+e.labelExtraX+s)}else{l+="l"+e.labelExtraX+","+u+"v"+(c-u)+"h"+s}}else{l+="V"+(e.yLabelMid+e.labelExtraY)+"h"+s}t.append("path").classed("textline",true).call(i.stroke,m.outsidetextfont.color).attr({"stroke-width":Math.min(2,m.outsidetextfont.size/8),d:l,fill:"none"})}})})});setTimeout(function(){m.selectAll("tspan").each(function(){var e=a.select(this);if(e.attr("dy"))e.attr("dy",e.attr("dy"))})},0)};function f(e,t,r){var a=Math.sqrt(e.width*e.width+e.height*e.height);var n=e.width/e.height;var i=Math.PI*Math.min(t.v/r.vTotal,.5);var o=1-r.trace.hole;var l=d(t,r),s={scale:l*r.r*2/a,rCenter:1-l,rotate:0};if(s.scale>=1)return s;var u=n+1/(2*Math.tan(i));var c=r.r*Math.min(1/(Math.sqrt(u*u+.5)+u),o/(Math.sqrt(n*n+o/2)+n));var f={scale:c*2/e.height,rCenter:Math.cos(c/r.r)-c*n/r.r,rotate:(180/Math.PI*t.midangle+720)%180-90};var v=1/n;var p=v+1/(2*Math.tan(i));var h=r.r*Math.min(1/(Math.sqrt(p*p+.5)+p),o/(Math.sqrt(v*v+o/2)+v));var g={scale:h*2/e.width,rCenter:Math.cos(h/r.r)-h/n/r.r,rotate:(180/Math.PI*t.midangle+810)%180-90};var y=g.scale>f.scale?g:f;if(s.scale<1&&y.scale>s.scale)return y;return s}function d(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var r=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(r)),(1-t.trace.hole)/2)}function v(e,t){var r=t.pxmid[0];var a=t.pxmid[1];var n=e.width/2;var i=e.height/2;if(r<0)n*=-1;if(a<0)i*=-1;return{scale:1,rCenter:1,rotate:0,x:n+Math.abs(i)*(n>0?1:-1)/2,y:i/(1+r*r/(a*a)),outside:true}}function p(e,t){var r,a,n,i,o,l,s,c,f,d,v,p,h;function g(e,t){return e.pxmid[1]-t.pxmid[1]}function y(e,t){return t.pxmid[1]-e.pxmid[1]}function m(e,r){if(!r)r={};var n=r.labelExtraY+(a?r.yLabelMax:r.yLabelMin);var c=a?e.yLabelMin:e.yLabelMax;var f=a?e.yLabelMax:e.yLabelMin;var v=e.cyFinal+o(e.px0[1],e.px1[1]);var p=n-c;var h,g,y,m,x,b;if(p*s>0)e.labelExtraY=p;if(!Array.isArray(t.pull))return;for(g=0;g<d.length;g++){y=d[g];if(y===e||(u.castOption(t.pull,e.pts)||0)>=(u.castOption(t.pull,y.pts)||0)){continue}if((e.pxmid[1]-y.pxmid[1])*s>0){m=y.cyFinal+o(y.px0[1],y.px1[1]);p=m-c-e.labelExtraY;if(p*s>0)e.labelExtraY+=p}else if((f+e.labelExtraY-v)*s>0){h=3*l*Math.abs(g-d.indexOf(e));x=y.cxFinal+i(y.px0[0],y.px1[0]);b=x+h-(e.cxFinal+e.pxmid[0])-e.labelExtraX;if(b*l>0)e.labelExtraX+=b}}}for(a=0;a<2;a++){n=a?g:y;o=a?Math.max:Math.min;s=a?1:-1;for(r=0;r<2;r++){i=r?Math.max:Math.min;l=r?1:-1;c=e[a][r];c.sort(n);f=e[1-a][r];d=f.concat(c);p=[];for(v=0;v<c.length;v++){if(c[v].yLabelMid!==undefined)p.push(c[v])}h=false;for(v=0;a&&v<f.length;v++){if(f[v].yLabelMid!==undefined){h=f[v];break}}for(v=0;v<p.length;v++){var x=v&&p[v-1];if(h&&!v)x=h;m(p[v],x)}}}}function h(e,t){var r=[];var a,n,i,o,l,s,u,c,f;for(i=0;i<e.length;i++){l=e[i][0];s=l.trace;a=t.w*(s.domain.x[1]-s.domain.x[0]);n=t.h*(s.domain.y[1]-s.domain.y[0]);u=s.pull;if(Array.isArray(u)){u=0;for(o=0;o<s.pull.length;o++){if(s.pull[o]>u)u=s.pull[o]}}l.r=Math.min(a,n)/(2+2*u);l.cx=t.l+t.w*(s.domain.x[1]+s.domain.x[0])/2;l.cy=t.t+t.h*(2-s.domain.y[1]-s.domain.y[0])/2;if(s.scalegroup&&r.indexOf(s.scalegroup)===-1){r.push(s.scalegroup)}}for(o=0;o<r.length;o++){f=Infinity;c=r[o];for(i=0;i<e.length;i++){l=e[i][0];if(l.trace.scalegroup===c){f=Math.min(f,l.r*l.r/l.vTotal)}}for(i=0;i<e.length;i++){l=e[i][0];if(l.trace.scalegroup===c){l.r=Math.sqrt(f*l.vTotal)}}}}function g(e){var t=e[0];var r=t.trace;var a=r.rotation*Math.PI/180;var n=2*Math.PI/t.vTotal;var i="px0";var o="px1";var l,s,u;if(r.direction==="counterclockwise"){for(l=0;l<e.length;l++){if(!e[l].hidden)break}if(l===e.length)return;a+=n*e[l].v;n*=-1;i="px1";o="px0"}function c(e){return[t.r*Math.sin(e),-t.r*Math.cos(e)]}u=c(a);for(l=0;l<e.length;l++){s=e[l];if(s.hidden)continue;s[i]=u;a+=n*s.v/2;s.pxmid=c(a);s.midangle=a;a+=n*s.v/2;u=c(a);s[o]=u;s.largeArc=s.v>t.vTotal/2?1:0}}},{"../../components/color":50,"../../components/drawing":75,"../../components/fx":92,"../../lib":169,"../../lib/svg_text_utils":190,"./event_data":358,"./helpers":359,d3:15}],364:[function(e,t,r){"use strict";var a=e("d3");var n=e("./style_one");t.exports=function e(t){t._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0];var r=t.trace;var i=a.select(this);i.style({opacity:r.opacity});i.selectAll("path.surface").each(function(e){a.select(this).call(n,e,r)})})}},{"./style_one":365,d3:15}],365:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("./helpers").castOption;t.exports=function e(t,r,i){var o=i.marker.line;var l=n(o.color,r.pts)||a.defaultLine;var s=n(o.width,r.pts)||0;t.style({"stroke-width":s}).call(a.fill,r.color).call(a.stroke,l)}},{"../../components/color":50,"./helpers":359}],366:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r){for(var n=0;n<t.length;n++)t[n].i=n;a.mergeArray(r.text,t,"tx");a.mergeArray(r.hovertext,t,"htx");a.mergeArray(r.customdata,t,"data");a.mergeArray(r.textposition,t,"tp");if(r.textfont){a.mergeArray(r.textfont.size,t,"ts");a.mergeArray(r.textfont.color,t,"tc");a.mergeArray(r.textfont.family,t,"tf")}var i=r.marker;if(i){a.mergeArray(i.size,t,"ms");a.mergeArray(i.opacity,t,"mo");a.mergeArray(i.symbol,t,"mx");a.mergeArray(i.color,t,"mc");var o=i.line;if(i.line){a.mergeArray(o.color,t,"mlc");a.mergeArray(o.width,t,"mlw")}var l=i.gradient;if(l&&l.type!=="none"){a.mergeArray(l.type,t,"mgt");a.mergeArray(l.color,t,"mgc")}}}},{"../../lib":169}],367:[function(e,t,r){"use strict";var a=e("../../components/colorscale/attributes");var n=e("../../components/colorbar/attributes");var i=e("../../plots/font_attributes");var o=e("../../components/drawing/attributes").dash;var l=e("../../components/drawing");var s=e("./constants");var u=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:u({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:n,line:u({width:{valType:"number",min:0,arrayOk:true,editType:"style"},editType:"calc"},a("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},a("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:i({editType:"calc",colorEditType:"style",arrayOk:true}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../components/drawing":75,"../../components/drawing/attributes":74,"../../lib/extend":163,"../../plots/font_attributes":239,"./constants":372}],368:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../../lib").isArrayOrTypedArray;var i=e("../../plots/cartesian/axes");var o=e("../../constants/numerical").BADNUM;var l=e("./subtypes");var s=e("./colorscale_calc");var u=e("./arrays_to_calcdata");var c=e("./calc_selection");function f(e,t){var r=i.getFromId(e,t.xaxis||"x");var n=i.getFromId(e,t.yaxis||"y");var l=r.makeCalcdata(t,"x");var f=n.makeCalcdata(t,"y");var p=t._length;var h=new Array(p);var g=v(t,p);d(e,t,r,n,l,f,g);for(var y=0;y<p;y++){h[y]=a(l[y])&&a(f[y])?{x:l[y],y:f[y]}:{x:o,y:o};if(t.ids){h[y].id=String(t.ids[y])}}u(h,t);s(t);c(h,t);e.firstscatter=false;return h}function d(e,t,r,a,n,o,s){var u=t._length;r._minDtick=0;a._minDtick=0;var c={padded:true};var f={padded:true};if(s){c.ppad=f.ppad=s}if((t.fill==="tozerox"||t.fill==="tonextx"&&e.firstscatter)&&(n[0]!==n[u-1]||o[0]!==o[u-1])){c.tozero=true}else if(!(t.error_y||{}).visible&&(["tonexty","tozeroy"].indexOf(t.fill)!==-1||!l.hasMarkers(t)&&!l.hasText(t))){c.padded=false;c.ppad=0}if((t.fill==="tozeroy"||t.fill==="tonexty"&&e.firstscatter)&&(n[0]!==n[u-1]||o[0]!==o[u-1])){f.tozero=true}else if(["tonextx","tozerox"].indexOf(t.fill)!==-1){f.padded=false}i.expand(r,n,c);i.expand(a,o,f)}function v(e,t){if(!l.hasMarkers(e))return;var r=e.marker;var a=1.6*(e.marker.sizeref||1);var o;if(e.marker.sizemode==="area"){o=function(e){return Math.max(Math.sqrt((e||0)/a),3)}}else{o=function(e){return Math.max((e||0)/a,3)}}if(n(r.size)){var s={type:"linear"};i.setConvert(s);var u=s.makeCalcdata(e.marker,"size");var c=new Array(t);for(var f=0;f<t;f++){c[f]=o(u[f])}return c}else{return o(r.size)}}t.exports={calc:f,calcMarkerSize:v,calcAxisExpansion:d}},{"../../constants/numerical":151,"../../lib":169,"../../plots/cartesian/axes":213,"./arrays_to_calcdata":366,"./calc_selection":369,"./colorscale_calc":371,"./subtypes":389,"fast-isnumeric":18}],369:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r){if(a.isArrayOrTypedArray(r.selectedpoints)){a.tagSelected(t,r)}}},{"../../lib":169}],370:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var a=t[r];if(a.type!=="scatter")continue;var n=a.fill;if(n==="none"||n==="toself")continue;a.opacity=undefined;if(n==="tonexty"||n==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===a.xaxis&&o.yaxis===a.yaxis){o.opacity=undefined;break}}}}}},{}],371:[function(e,t,r){"use strict";var a=e("../../components/colorscale/has_colorscale");var n=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t){if(i.hasLines(t)&&a(t,"line")){n(t,t.line.color,"line","c")}if(i.hasMarkers(t)){if(a(t,"marker")){n(t,t.marker.color,"marker","c")}if(a(t,"marker.line")){n(t,t.marker.line.color,"marker.line","c")}}}},{"../../components/colorscale/calc":58,"../../components/colorscale/has_colorscale":64,"./subtypes":389}],372:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],373:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../registry");var i=e("./attributes");var o=e("./constants");var l=e("./subtypes");var s=e("./xy_defaults");var u=e("./marker_defaults");var c=e("./line_defaults");var f=e("./line_shape_defaults");var d=e("./text_defaults");var v=e("./fillcolor_defaults");t.exports=function e(t,r,p,h){function g(e,n){return a.coerce(t,r,i,e,n)}var y=s(t,r,h,g),m=y<o.PTS_LINESONLY?"lines+markers":"lines";if(!y){r.visible=false;return}g("text");g("hovertext");g("mode",m);if(l.hasLines(r)){c(t,r,p,h,g);f(t,r,g);g("connectgaps");g("line.simplify")}if(l.hasMarkers(r)){u(t,r,p,h,g,{gradient:true})}if(l.hasText(r)){d(t,r,h,g)}var x=[];if(l.hasMarkers(r)||l.hasText(r)){g("cliponaxis");g("marker.maxdisplayed");x.push("points")}g("fill");if(r.fill!=="none"){v(t,r,p,g);if(!l.hasLines(r))f(t,r,g)}if(r.fill==="tonext"||r.fill==="toself"){x.push("fills")}g("hoveron",x.join("+")||"points");var b=n.getComponentMethod("errorbars","supplyDefaults");b(t,r,p,{axis:"y"});b(t,r,p,{axis:"x",inherit:"y"});a.coerceSelectionMarkerOpacity(r,g)}},{"../../lib":169,"../../registry":261,"./attributes":367,"./constants":372,"./fillcolor_defaults":375,"./line_defaults":379,"./line_shape_defaults":381,"./marker_defaults":385,"./subtypes":389,"./text_defaults":390,"./xy_defaults":391}],374:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function e(t,r,i){var o=Array.isArray(i)?function(e){i.push(e)}:function(e){i.text=e};var l=a.extractOption(t,r,"htx","hovertext");if(n(l))return o(l);var s=a.extractOption(t,r,"tx","text");if(n(s))return o(s)};function n(e){return e||e===0}},{"../../lib":169}],375:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,i,o){var l=false;if(r.marker){var s=r.marker.color,u=(r.marker.line||{}).color;if(s&&!n(s)){l=s}else if(u&&!n(u)){l=u}}o("fillcolor",a.addOpacity((r.line||{}).color||l||i,.5))}},{"../../components/color":50,"../../lib":169}],376:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("./subtypes");t.exports=function e(t,r){var i,o;if(t.mode==="lines"){i=t.line.color;return i&&a.opacity(i)?i:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var l=r.mcc||(t.marker||{}).color,s=r.mlcc||((t.marker||{}).line||{}).color;o=l&&a.opacity(l)?l:s&&a.opacity(s)&&(r.mlw||((t.marker||{}).line||{}).width)?s:"";if(o){if(a.opacity(o)<.3){return a.addOpacity(o,.3)}else return o}else{i=(t.line||{}).color;return i&&a.opacity(i)&&n.hasLines(t)&&t.line.width?i:t.fillcolor}}}},{"../../components/color":50,"./subtypes":389}],377:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../components/fx");var i=e("../../registry");var o=e("./get_trace_color");var l=e("../../components/color");var s=e("./fill_hover_text");t.exports=function e(t,r,u,c){var f=t.cd;var d=f[0].trace;var v=t.xa;var p=t.ya;var h=v.c2p(r);var g=p.c2p(u);var y=[h,g];var m=d.hoveron||"";var x=d.mode.indexOf("markers")!==-1?3:.5;if(m.indexOf("points")!==-1){var b=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(v.c2p(e.x)-h);var n=a<t?r*a/t:a-t+r;return n};var _=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var a=Math.abs(p.c2p(e.y)-g);return a<t?r*a/t:a-t+r};var w=function(e){var t=Math.max(x,e.mrc||0);var r=v.c2p(e.x)-h;var a=p.c2p(e.y)-g;return Math.max(Math.sqrt(r*r+a*a)-t,1-x/t)};var k=n.getDistanceFunction(c,b,_,w);n.getClosest(f,k,t);if(t.index!==false){var M=f[t.index];var T=v.c2p(M.x,true);var A=p.c2p(M.y,true);var L=M.mrc||1;a.extendFlat(t,{color:o(d,M),x0:T-L,x1:T+L,xLabelVal:M.x,y0:A-L,y1:A+L,yLabelVal:M.y,spikeDistance:w(M)});s(M,d,t);i.getComponentMethod("errorbars","hoverInfo")(M,d,t);return[t]}}if(m.indexOf("fills")!==-1&&d._polygons){var S=d._polygons;var C=[];var O=false;var z=Infinity;var P=-Infinity;var D=Infinity;var I=-Infinity;var E,N,R,F,B,j,q,H,V;for(E=0;E<S.length;E++){R=S[E];if(R.contains(y)){O=!O;C.push(R);D=Math.min(D,R.ymin);I=Math.max(I,R.ymax)}}if(O){D=Math.max(D,0);I=Math.min(I,p._length);var U=(D+I)/2;for(E=0;E<C.length;E++){F=C[E].pts;for(N=1;N<F.length;N++){H=F[N-1][1];V=F[N][1];if(H>U!==V>=U){j=F[N-1][0];q=F[N][0];if(V-H){B=j+(q-j)*(U-H)/(V-H);z=Math.min(z,B);P=Math.max(P,B)}}}}z=Math.max(z,0);P=Math.min(P,v._length);var G=l.defaultLine;if(l.opacity(d.fillcolor))G=d.fillcolor;else if(l.opacity((d.line||{}).color)){G=d.line.color}a.extendFlat(t,{distance:t.maxHoverDistance,x0:z,x1:P,y0:U,y1:U,color:G});delete t.index;if(d.text&&!Array.isArray(d.text)){t.text=String(d.text)}else t.text=d.name;return[t]}}}},{"../../components/color":50,"../../components/fx":92,"../../lib":169,"../../registry":261,"./fill_hover_text":374,"./get_trace_color":376}],378:[function(e,t,r){"use strict";var a={};var n=e("./subtypes");a.hasLines=n.hasLines;a.hasMarkers=n.hasMarkers;a.hasText=n.hasText;a.isBubble=n.isBubble;a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.cleanData=e("./clean_data");a.calc=e("./calc").calc;a.arraysToCalcdata=e("./arrays_to_calcdata");a.plot=e("./plot");a.colorbar=e("./marker_colorbar");a.style=e("./style").style;a.styleOnSelect=e("./style").styleOnSelect;a.hoverPoints=e("./hover");a.selectPoints=e("./select");a.animatable=true;a.moduleType="trace";a.name="scatter";a.basePlotModule=e("../../plots/cartesian");a.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"];a.meta={};t.exports=a},{"../../plots/cartesian":224,"./arrays_to_calcdata":366,"./attributes":367,"./calc":368,"./clean_data":370,"./defaults":373,"./hover":377,"./marker_colorbar":384,"./plot":386,"./select":387,"./style":388,"./subtypes":389}],379:[function(e,t,r){"use strict";var a=e("../../lib").isArrayOrTypedArray;var n=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");t.exports=function e(t,r,o,l,s,u){var c=(t.marker||{}).color;s("line.color",o);if(n(t,"line")){i(t,r,l,s,{prefix:"line.",cLetter:"c"})}else{var f=(a(c)?false:c)||o;s("line.color",f)}s("line.width");if(!(u||{}).noDash)s("line.dash")}},{"../../components/colorscale/defaults":60,"../../components/colorscale/has_colorscale":64,"../../lib":169}],380:[function(e,t,r){"use strict";var a=e("../../constants/numerical").BADNUM;var n=e("../../lib");var i=n.segmentsIntersect;var o=n.constrain;var l=e("./constants");t.exports=function e(t,r){var s=r.xaxis;var u=r.yaxis;var c=r.simplify;var f=r.connectGaps;var d=r.baseTolerance;var v=r.shape;var p=v==="linear";var h=[];var g=l.minTolerance;var y=new Array(t.length);var m=0;var x;var b,_,w,k;var M;var T;var A;var L;var S,C,O,z;var P,D,I;if(!c){d=g=-1}function E(e){var r=t[e];if(!r)return false;var n=s.c2p(r.x);var i=u.c2p(r.y);if(n===a||i===a)return r.intoCenter||false;return[n,i]}function N(e,t,r,a){var n=r-e;var i=a-t;var o=.5-e;var l=.5-t;var s=n*n+i*i;var u=n*o+i*l;if(u>0&&u<s){var c=o*i-l*n;if(c*c<s)return true}}var R,F;function B(e,t){var r=e[0]/s._length;var a=e[1]/u._length;var n=Math.max(0,-r,r-1,-a,a-1);if(n&&R!==undefined&&N(r,a,R,F)){n=0}if(n&&t&&N(r,a,t[0]/s._length,t[1]/u._length)){n=0}return(1+l.toleranceGrowth*n)*d}function j(e,t){var r=e[0]-t[0];var a=e[1]-t[1];return Math.sqrt(r*r+a*a)}var q=l.maxScreensAway;var H=-s._length*q;var V=s._length*(1+q);var U=-u._length*q;var G=u._length*(1+q);var Z=[[H,U,V,U],[V,U,V,G],[V,G,H,G],[H,G,H,U]];var Y,X,W,Q,J,$;function K(e,t){var r=[];var a=0;for(var n=0;n<4;n++){var o=Z[n];var l=i(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);if(l&&(!a||Math.abs(l.x-r[0][0])>1||Math.abs(l.y-r[0][1])>1)){l=[l.x,l.y];if(a&&j(l,e)<j(r[0],e))r.unshift(l);else r.push(l);a++}}return r}function ee(e){if(e[0]<H||e[0]>V||e[1]<U||e[1]>G){return[o(e[0],H,V),o(e[1],U,G)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===H||e[0]===V))return true;if(e[1]===t[1]&&(e[1]===U||e[1]===G))return true}function re(e,t){var r=[];var a=ee(e);var n=ee(t);if(a&&n&&te(a,n))return r;if(a)r.push(a);if(n)r.push(n);return r}function ae(e,t,r){return function(a,i){var o=ee(a);var l=ee(i);var s=[];if(o&&l&&te(o,l))return s;if(o)s.push(o);if(l)s.push(l);var u=2*n.constrain((a[e]+i[e])/2,t,r)-((o||a)[e]+(l||i)[e]);if(u){var c;if(o&&l){c=u>0===o[e]>l[e]?o:l}else c=o||l;c[e]+=u}return s}}var ne;if(v==="linear"||v==="spline"){ne=K}else if(v==="hv"||v==="vh"){ne=re}else if(v==="hvh")ne=ae(0,H,V);else if(v==="vhv")ne=ae(1,U,G);function ie(e,t){var r=t[0]-e[0];var a=(t[1]-e[1])/r;var n=(e[1]*t[0]-t[1]*e[0])/r;if(n>0)return[a>0?H:V,G];else return[a>0?V:H,U]}function oe(e){var t=e[0];var r=e[1];var a=t===y[m-1][0];var n=r===y[m-1][1];if(a&&n)return;if(m>1){var i=t===y[m-2][0];var o=r===y[m-2][1];if(a&&(t===H||t===V)&&i){if(o)m--;else y[m-1]=e}else if(n&&(r===U||r===G)&&o){if(i)m--;else y[m-1]=e}else y[m++]=e}else y[m++]=e}function le(e){if(y[m-1][0]!==e[0]&&y[m-1][1]!==e[1]){oe([W,Q])}oe(e);J=null;W=Q=0}function se(e){R=e[0]/s._length;F=e[1]/u._length;Y=e[0]<H?H:e[0]>V?V:0;X=e[1]<U?U:e[1]>G?G:0;if(Y||X){if(!m){y[m++]=[Y||e[0],X||e[1]]}else if(J){var t=ne(J,e);if(t.length>1){le(t[0]);y[m++]=t[1]}}else{$=ne(y[m-1],e)[0];y[m++]=$}var r=y[m-1];if(Y&&X&&(r[0]!==Y||r[1]!==X)){if(J){if(W!==Y&&Q!==X){if(W&&Q){oe(ie(J,e))}else{oe([W||Y,Q||X])}}else if(W&&Q){oe([W,Q])}}oe([Y,X])}else if(W-Y&&Q-X){oe([Y||W,X||Q])}J=e;W=Y;Q=X}else{if(J){le(ne(J,e)[0])}y[m++]=e}}for(x=0;x<t.length;x++){b=E(x);if(!b)continue;m=0;J=null;se(b);for(x++;x<t.length;x++){w=E(x);if(!w){if(f)continue;else break}if(!p){se(w);continue}var ue=E(x+1);S=j(w,b);if(S<B(w,ue)*g)continue;A=[(w[0]-b[0])/S,(w[1]-b[1])/S];k=b;C=S;O=P=D=0;T=false;_=w;for(x++;x<t.length;x++){M=ue;ue=E(x+1);if(!M){if(f)continue;else break}L=[M[0]-b[0],M[1]-b[1]];I=L[0]*A[1]-L[1]*A[0];P=Math.min(P,I);D=Math.max(D,I);if(D-P>B(M,ue))break;_=M;z=L[0]*A[0]+L[1]*A[1];if(z>C){C=z;w=M;T=false}else if(z<O){O=z;k=M;T=true}}if(T){se(w);if(_!==k)se(k)}else{if(k!==b)se(k);if(_!==w)se(w)}se(_);if(x>=t.length||!M)break;se(M);b=M}if(J)oe([W||J[0],Q||J[1]]);h.push(y.slice(0,m))}return h}},{"../../constants/numerical":151,"../../lib":169,"./constants":372}],381:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n=a("line.shape");if(n==="spline")a("line.smoothing")}},{}],382:[function(e,t,r){"use strict";t.exports=function e(t,r,a){var n,i;var o=null;for(i=0;i<a.length;++i){n=a[i][0].trace;if(n.visible===true){n._nexttrace=null;if(["tonextx","tonexty","tonext"].indexOf(n.fill)!==-1){n._prevtrace=o;if(o){o._nexttrace=n}}o=n}else{n._prevtrace=n._nexttrace=null}}}},{}],383:[function(e,t,r){"use strict";var a=e("fast-isnumeric");t.exports=function e(t){var r=t.marker,n=r.sizeref||1,i=r.sizemin||0;var o=r.sizemode==="area"?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=o(e/2);return a(t)&&t>0?Math.max(t,i):0}}},{"fast-isnumeric":18}],384:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],385:[function(e,t,r){"use strict";var a=e("../../components/color");var n=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");var o=e("./subtypes");t.exports=function e(t,r,l,s,u,c){var f=o.isBubble(t),d=(t.line||{}).color,v;c=c||{};if(d)l=d;u("marker.symbol");u("marker.opacity",f?.7:1);u("marker.size");u("marker.color",l);if(n(t,"marker")){i(t,r,s,u,{prefix:"marker.",cLetter:"c"})}if(!c.noSelect){u("selected.marker.color");u("unselected.marker.color");u("selected.marker.size");u("unselected.marker.size")}if(!c.noLine){if(d&&!Array.isArray(d)&&r.marker.color!==d){v=d}else if(f)v=a.background;else v=a.defaultLine;u("marker.line.color",v);if(n(t,"marker.line")){i(t,r,s,u,{prefix:"marker.line.",cLetter:"c"})}u("marker.line.width",f?1:0)}if(f){u("marker.sizeref");u("marker.sizemin");u("marker.sizemode")}if(c.gradient){var p=u("marker.gradient.type");if(p!=="none"){u("marker.gradient.color")}}}},{"../../components/color":50,"../../components/colorscale/defaults":60,"../../components/colorscale/has_colorscale":64,"./subtypes":389}],386:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../registry");var i=e("../../lib");var o=e("../../components/drawing");var l=e("./subtypes");var s=e("./line_points");var u=e("./link_traces");var c=e("../../lib/polygon").tester;t.exports=function e(t,r,n,i,o,l){var s,c,v,p;var h=!o;var g=!!o&&o.duration>0;v=i.selectAll("g.trace").data(n,function(e){return e[0].trace.uid});v.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);u(t,r,n);f(t,i,r);for(s=0,c={};s<n.length;s++){c[n[s][0].trace.uid]=s}i.selectAll("g.trace").sort(function(e,t){var r=c[e[0].trace.uid];var a=c[t[0].trace.uid];return r>a?1:-1});if(g){if(l){p=l()}var y=a.transition().duration(o.duration).ease(o.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()});y.each(function(){i.selectAll("g.trace").each(function(e,a){d(t,a,r,e,n,this,o)})})}else{i.selectAll("g.trace").each(function(e,a){d(t,a,r,e,n,this,o)})}if(h){v.exit().remove()}i.selectAll("path:not([d])").remove()};function f(e,t,r){var n;t.selectAll("g.trace").each(function(e){var t=a.select(this);n=e[0].trace;if(n._nexttrace){n._nextFill=t.select(".js-fill.js-tonext");if(!n._nextFill.size()){var i=":first-child";if(t.select(".js-fill.js-tozero").size()){i+=" + *"}n._nextFill=t.insert("path",i).attr("class","js-fill js-tonext")}}else{t.selectAll(".js-fill.js-tonext").remove();n._nextFill=null}if(n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace)){n._ownFill=t.select(".js-fill.js-tozero");if(!n._ownFill.size()){n._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero")}}else{t.selectAll(".js-fill.js-tozero").remove();n._ownFill=null}t.selectAll(".js-fill").call(o.setClipUrl,r.layerClipId)})}function d(e,t,r,u,f,d,p){var h,g;v(e,t,r,u,f);var y=!!p&&p.duration>0;function m(e){return y?e.transition():e}var x=r.xaxis,b=r.yaxis;var _=u[0].trace,w=_.line,k=a.select(d);n.getComponentMethod("errorbars","plot")(k,r,p);if(_.visible!==true)return;m(k).style("opacity",_.opacity);var M,T;var A=_.fill.charAt(_.fill.length-1);if(A!=="x"&&A!=="y")A="";if(!r.isRangePlot)u[0].node3=k;var L="";var S=[];var C=_._prevtrace;if(C){L=C._prevRevpath||"";T=C._nextFill;S=C._polygons}var O,z,P="",D="",I,E,N,R,F,B,j;var q=[],H=i.noop;M=_._ownFill;if(l.hasLines(_)||_.fill!=="none"){if(T){T.datum(u)}if(["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1){I=o.steps(w.shape);E=o.steps(w.shape.split("").reverse().join(""))}else if(w.shape==="spline"){I=E=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return o.smoothclosed(e.slice(1),w.smoothing)}else{return o.smoothopen(e,w.smoothing)}}}else{I=E=function(e){return"M"+e.join("L")}}N=function(e){return E(e.reverse())};q=s(u,{xaxis:x,yaxis:b,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify});j=_._polygons=new Array(q.length);for(g=0;g<q.length;g++){_._polygons[g]=c(q[g])}if(q.length){R=q[0][0];F=q[q.length-1];B=F[F.length-1]}H=function(e){return function(t){O=I(t);z=N(t);if(!P){P=O;D=z}else if(A){P+="L"+O.substr(1);D=z+("L"+D.substr(1))}else{P+="Z"+O;D=z+"Z"+D}if(l.hasLines(_)&&t.length>1){var r=a.select(this);r.datum(u);if(e){m(r.style("opacity",0).attr("d",O).call(o.lineGroupStyle)).style("opacity",1)}else{var n=m(r);n.attr("d",O);o.singleLineStyle(u,n)}}}}}var V=k.selectAll(".js-line").data(q);m(V.exit()).style("opacity",0).remove();V.each(H(false));V.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(H(true));o.setClipUrl(V,r.layerClipId);function U(e){m(e).attr("d","M0,0Z")}if(q.length){if(M){if(R&&B){if(A){if(A==="y"){R[1]=B[1]=b.c2p(0,true)}else if(A==="x"){R[0]=B[0]=x.c2p(0,true)}m(M).attr("d","M"+B+"L"+R+"L"+P.substr(1)).call(o.singleFillStyle)}else{m(M).attr("d",P+"Z").call(o.singleFillStyle)}}}else if(T){if(_.fill.substr(0,6)==="tonext"&&P&&L){if(_.fill==="tonext"){m(T).attr("d",P+"Z"+L+"Z").call(o.singleFillStyle)}else{m(T).attr("d",P+"L"+L.substr(1)+"Z").call(o.singleFillStyle)}_._polygons=_._polygons.concat(S)}else{U(T);_._polygons=null}}_._prevRevpath=D;_._prevPolygons=j}else{if(M)U(M);else if(T)U(T);_._polygons=_._prevRevpath=_._prevPolygons=null}function G(e){return e.filter(function(e){return e.vis})}function Z(e){return e.id}function Y(e){if(e.ids){return Z}}function X(){return false}function W(t){var n,s,u;var c=t[0].trace;var f=a.select(this);var d=l.hasMarkers(c);var v=l.hasText(c);var p=Y(c);var h=X;var g=X;if(d){h=c.marker.maxdisplayed||c._needsCull?G:i.identity}if(v){g=c.marker.maxdisplayed||c._needsCull?G:i.identity}s=f.selectAll("path.point");n=s.data(h,p);var _=n.enter().append("path").classed("point",true);if(y){_.call(o.pointStyle,c,e).call(o.translatePoints,x,b).style("opacity",0).transition().style("opacity",1)}n.order();var w;if(d){w=o.makePointStyleFns(c)}n.each(function(t){var n=a.select(this);var i=m(n);u=o.translatePoint(t,i,x,b);if(u){o.singlePointStyle(t,i,c,w,e);if(r.layerClipId){o.hideOutsideRangePoint(t,i,x,b,c.xcalendar,c.ycalendar)}if(c.customdata){n.classed("plotly-customdata",t.data!==null&&t.data!==undefined)}}else{i.remove()}});if(y){n.exit().transition().style("opacity",0).remove()}else{n.exit().remove()}s=f.selectAll("g");n=s.data(g,p);n.enter().append("g").classed("textpoint",true).append("text");n.order();n.each(function(e){var t=a.select(this);var n=m(t.select("text"));u=o.translatePoint(e,n,x,b);if(u){if(r.layerClipId){o.hideOutsideRangePoint(e,t,x,b,c.xcalendar,c.ycalendar)}}else{t.remove()}});n.selectAll("text").call(o.textPointStyle,c,e).each(function(e){var t=x.c2p(e.x);var r=b.c2p(e.y);a.select(this).selectAll("tspan.line").each(function(){m(a.select(this)).attr({x:t,y:r})})});n.exit().remove()}var Q=k.selectAll(".points");h=Q.data([u]);Q.each(W);h.enter().append("g").classed("points",true).each(W);h.exit().remove();h.each(function(e){var t=e[0].trace.cliponaxis===false;o.setClipUrl(a.select(this),t?null:r.layerClipId)})}function v(e,t,r,n,o){var s=r.xaxis,u=r.yaxis,c=a.extent(i.simpleMap(s.range,s.r2c)),f=a.extent(i.simpleMap(u.range,u.r2c));var d=n[0].trace;if(!l.hasMarkers(d))return;var v=d.marker.maxdisplayed;if(v===0)return;var p=n.filter(function(e){return e.x>=c[0]&&e.x<=c[1]&&e.y>=f[0]&&e.y<=f[1]}),h=Math.ceil(p.length/v),g=0;o.forEach(function(e,r){var a=e[0].trace;if(l.hasMarkers(a)&&a.marker.maxdisplayed>0&&r<t){g++}});var y=Math.round(g*h/3+Math.floor(g/3)*h/7.1);n.forEach(function(e){delete e.vis});p.forEach(function(e,t){if(Math.round((t+y)%h)===0)e.vis=true})}},{"../../components/drawing":75,"../../lib":169,"../../lib/polygon":181,"../../registry":261,"./line_points":380,"./link_traces":382,"./subtypes":389,d3:15}],387:[function(e,t,r){"use strict";var a=e("./subtypes");t.exports=function e(t,r){var n=t.cd,i=t.xaxis,o=t.yaxis,l=[],s=n[0].trace,u,c,f,d;var v=!a.hasMarkers(s)&&!a.hasText(s);if(v)return[];if(r===false){for(u=0;u<n.length;u++){n[u].selected=0}}else{for(u=0;u<n.length;u++){c=n[u];f=i.c2p(c.x);d=o.c2p(c.y);if(r.contains([f,d])){l.push({pointNumber:u,x:i.c2d(c.x),y:o.c2d(c.y)});c.selected=1}else{c.selected=0}}}return l}},{"./subtypes":389}],388:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/drawing");var i=e("../../registry");function o(e,t){var r=t?t[0].node3:a.select(e).selectAll("g.trace.scatter");r.style("opacity",function(e){return e[0].trace.opacity});r.selectAll("g.points").each(function(t){var r=a.select(this);var n=t.trace||t[0].trace;l(r,n,e)});r.selectAll("g.trace path.js-line").call(n.lineGroupStyle);r.selectAll("g.trace path.js-fill").call(n.fillGroupStyle);i.getComponentMethod("errorbars","style")(r)}function l(e,t,r){n.pointStyle(e.selectAll("path.point"),t,r);n.textPointStyle(e.selectAll("text"),t,r)}function s(e,t){var r=t[0].node3;var a=t[0].trace;if(a.selectedpoints){n.selectedPointStyle(r.selectAll("path.point"),a);n.selectedTextStyle(r.selectAll("text"),a)}else{l(r,a,e)}}t.exports={style:o,stylePoints:l,styleOnSelect:s}},{"../../components/drawing":75,"../../registry":261,d3:15}],389:[function(e,t,r){"use strict";var a=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return a.isPlainObject(e.marker)&&a.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":169}],390:[function(e,t,r){"use strict";var a=e("../../lib");t.exports=function(e,t,r,n,i){i=i||{};n("textposition");a.coerceFont(n,"textfont",r.font);if(!i.noSelect){n("selected.textfont.color");n("unselected.textfont.color")}}},{"../../lib":169}],391:[function(e,t,r){"use strict";var a=e("../../registry");t.exports=function e(t,r,n,i){var o,l=i("x"),s=i("y");var u=a.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);if(l){if(s){o=Math.min(l.length,s.length)}else{o=l.length;i("y0");i("dy")}}else{if(!s)return 0;o=r.y.length;i("x0");i("dx")}r._length=o;return o}},{"../../registry":261}],392:[function(e,t,r){"use strict";var a=e("../scatter/attributes");var n=e("../../plots/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/colorbar/attributes");var l=e("../../components/drawing/attributes").dash;var s=e("../../lib/extend").extendFlat;var u=a.marker,c=a.line,f=u.line;t.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:s({},a.mode,{dflt:"markers"}),text:s({},a.text,{}),hovertext:s({},a.hovertext,{}),line:{color:c.color,width:c.width,dash:l,shape:s({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:a.connectgaps,cliponaxis:a.cliponaxis,fill:s({},a.fill,{values:["none","toself","tonext"]}),fillcolor:a.fillcolor,marker:s({symbol:u.symbol,opacity:u.opacity,maxdisplayed:u.maxdisplayed,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,line:s({width:f.width,editType:"calc"},i("marker.line")),gradient:u.gradient,editType:"calc"},i("marker"),{colorbar:o}),textfont:a.textfont,textposition:a.textposition,selected:a.selected,unselected:a.unselected,hoverinfo:s({},n.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:a.hoveron}},{"../../components/colorbar/attributes":51,"../../components/colorscale/attributes":57,"../../components/drawing/attributes":74,"../../lib/extend":163,"../../plots/attributes":210,"../scatter/attributes":367}],393:[function(e,t,r){"use strict";var a=e("fast-isnumeric");var n=e("../scatter/colorscale_calc");var i=e("../scatter/arrays_to_calcdata");var o=e("../scatter/calc_selection");var l=e("../scatter/calc").calcMarkerSize;var s=["a","b","c"];var u={a:["b","c"],b:["a","c"],c:["a","b"]};t.exports=function e(t,r){var c=t._fullLayout[r.subplot];var f=c.sum;var d=r.sum||f;var v={a:r.a,b:r.b,c:r.c};var p,h,g,y,m,x;for(p=0;p<s.length;p++){g=s[p];if(v[g])continue;m=v[u[g][0]];x=v[u[g][1]];y=new Array(m.length);for(h=0;h<m.length;h++){y[h]=d-m[h]-x[h]}v[g]=y}var b=r._length;var _=new Array(b);var w,k,M,T,A,L;for(p=0;p<b;p++){w=v.a[p];k=v.b[p];M=v.c[p];if(a(w)&&a(k)&&a(M)){w=+w;k=+k;M=+M;T=f/(w+k+M);if(T!==1){w*=T;k*=T;M*=T}L=w;A=M-k;_[p]={x:A,y:L,a:w,b:k,c:M}}else _[p]={x:false,y:false}}l(r,b);n(r);i(_,r);o(_,r);return _}},{"../scatter/arrays_to_calcdata":366,"../scatter/calc":368,"../scatter/calc_selection":369,"../scatter/colorscale_calc":371,"fast-isnumeric":18}],394:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../scatter/constants");var i=e("../scatter/subtypes");var o=e("../scatter/marker_defaults");var l=e("../scatter/line_defaults");var s=e("../scatter/line_shape_defaults");var u=e("../scatter/text_defaults");var c=e("../scatter/fillcolor_defaults");var f=e("./attributes");t.exports=function e(t,r,d,v){function p(e,n){return a.coerce(t,r,f,e,n)}var h=p("a"),g=p("b"),y=p("c"),m;if(h){m=h.length;if(g){m=Math.min(m,g.length);if(y)m=Math.min(m,y.length)}else if(y)m=Math.min(m,y.length);else m=0}else if(g&&y){m=Math.min(g.length,y.length)}if(!m){r.visible=false;return}r._length=m;p("sum");p("text");p("hovertext");var x=m<n.PTS_LINESONLY?"lines+markers":"lines";p("mode",x);if(i.hasLines(r)){l(t,r,d,v,p);s(t,r,p);p("connectgaps")}if(i.hasMarkers(r)){o(t,r,d,v,p,{gradient:true})}if(i.hasText(r)){u(t,r,v,p)}var b=[];if(i.hasMarkers(r)||i.hasText(r)){p("cliponaxis");p("marker.maxdisplayed");b.push("points")}p("fill");if(r.fill!=="none"){c(t,r,d,p);if(!i.hasLines(r))s(t,r,p)}if(r.fill==="tonext"||r.fill==="toself"){b.push("fills")}p("hoveron",b.join("+")||"points");a.coerceSelectionMarkerOpacity(r,p)}},{"../../lib":169,"../scatter/constants":372,"../scatter/fillcolor_defaults":375,"../scatter/line_defaults":379,"../scatter/line_shape_defaults":381,"../scatter/marker_defaults":385,"../scatter/subtypes":389,"../scatter/text_defaults":390,"./attributes":392}],395:[function(e,t,r){"use strict";t.exports=function e(t,r,a,n,i){if(r.xa)t.xaxis=r.xa;if(r.ya)t.yaxis=r.ya;if(n[i]){var o=n[i];t.a=o.a;t.b=o.b;t.c=o.c}else{t.a=r.a;t.b=r.b;t.c=r.c}return t}},{}],396:[function(e,t,r){"use strict";var a=e("../scatter/hover");var n=e("../../plots/cartesian/axes");t.exports=function e(t,r,i,o){var l=a(t,r,i,o);if(!l||l[0].index===false)return;var s=l[0];if(s.index===undefined){var u=1-s.y0/t.ya._length,c=t.xa._length,f=c*u/2,d=c-f;s.x0=Math.max(Math.min(s.x0,d),f);s.x1=Math.max(Math.min(s.x1,d),f);return l}var v=s.cd[s.index];s.a=v.a;s.b=v.b;s.c=v.c;s.xLabelVal=undefined;s.yLabelVal=undefined;var p=s.trace;var h=s.subplot;var g=v.hi||p.hoverinfo;var y=g.split("+");var m=[];function x(e,t){m.push(e._hovertitle+": "+n.tickText(e,t,"hover").text)}if(y.indexOf("all")!==-1)y=["a","b","c"];if(y.indexOf("a")!==-1)x(h.aaxis,v.a);if(y.indexOf("b")!==-1)x(h.baxis,v.b);if(y.indexOf("c")!==-1)x(h.caxis,v.c);s.extraText=m.join("<br>");return l}},{"../../plots/cartesian/axes":213,"../scatter/hover":377}],397:[function(e,t,r){"use strict";var a={};a.attributes=e("./attributes");a.supplyDefaults=e("./defaults");a.colorbar=e("../scatter/marker_colorbar");a.calc=e("./calc");a.plot=e("./plot");a.style=e("../scatter/style").style;a.styleOnSelect=e("../scatter/style").styleOnSelect;a.hoverPoints=e("./hover");a.selectPoints=e("../scatter/select");a.eventData=e("./event_data");a.moduleType="trace";a.name="scatterternary";a.basePlotModule=e("../../plots/ternary");a.categories=["ternary","symbols","showLegend","scatter-like"];a.meta={};t.exports=a},{"../../plots/ternary":254,"../scatter/marker_colorbar":384,"../scatter/select":387,"../scatter/style":388,"./attributes":392,"./calc":393,"./defaults":394,"./event_data":395,"./hover":396,"./plot":398}],398:[function(e,t,r){"use strict";var a=e("../scatter/plot");t.exports=function e(t,r,n){var i=r.plotContainer;i.select(".scatterlayer").selectAll("*").remove();var o={xaxis:r.xaxis,yaxis:r.yaxis,plot:i,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null};var l=r.layers.frontplot.select("g.scatterlayer");a(t,o,n,l)}},{"../scatter/plot":386}],399:[function(e,t,r){"use strict";var a=e("../box/attributes");var n=e("../../lib/extend").extendFlat;t.exports={y:a.y,x:a.x,x0:a.x0,y0:a.y0,name:a.name,orientation:n({},a.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:a.fillcolor,points:n({},a.boxpoints,{}),jitter:n({},a.jitter,{}),pointpos:n({},a.pointpos,{}),marker:a.marker,text:a.text,box:{visible:{valType:"boolean",dflt:false,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:false,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"plot"},selected:a.selected,unselected:a.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":163,"../box/attributes":284}],400:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../box/calc");var o=e("./helpers");var l=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){var l=i(t,r);if(l[0].t.empty)return l;var s=t._fullLayout;var f=n.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]);var d=s._violinScaleGroupStats;var v=r.scalegroup;var p=d[v];if(!p){p=d[v]={maxWidth:0,maxCount:0}}for(var h=0;h<l.length;h++){var g=l[h];var y=g.pts.map(o.extractVal);var m=g.bandwidth=u(r,g,y);var x=g.span=c(r,g,f,m);var b=x[1]-x[0];var _=Math.ceil(b/(m/3));var w=b/_;if(!isFinite(w)||!isFinite(_)){a.error("Something went wrong with computing the violin span");l[0].t.empty=true;return l}var k=o.makeKDE(g,r,y);g.density=new Array(_);for(var M=0,T=x[0];T<x[1]+w/2;M++,T+=w){var A=k(T);p.maxWidth=Math.max(p.maxWidth,A);g.density[M]={v:A,t:T}}n.expand(f,x,{padded:true});p.maxCount=Math.max(p.maxCount,y.length)}l[0].t.labels.kde=a._(t,"kde:");return l};function s(e,t,r){var a=Math.min(t,r/1.349);return 1.059*a*Math.pow(e,-.2)}function u(e,t,r){var n=t.max-t.min;if(!n)return 1;if(e.bandwidth){return Math.max(e.bandwidth,n/1e4)}else{var i=r.length;var o=a.stdev(r,i-1,t.mean);return Math.max(s(i,o,t.q3-t.q1),n/100)}}function c(e,t,r,a){var i=e.spanmode;var o=e.span||[];var s=[t.min,t.max];var u=[t.min-2*a,t.max+2*a];var c;function f(a){var n=o[a];var i=r.d2c(n,0,e[t.valLetter+"calendar"]);return i===l?u[a]:i}if(i==="soft"){c=u}else if(i==="hard"){c=s}else{c=[f(0),f(1)]}var d={type:"linear",range:c};n.setConvert(d);d.cleanRange();return c}},{"../../constants/numerical":151,"../../lib":169,"../../plots/cartesian/axes":213,"../box/calc":285,"./helpers":402}],401:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../components/color");var i=e("../box/defaults");var o=e("./attributes");t.exports=function e(t,r,l,s){function u(e,n){return a.coerce(t,r,o,e,n)}function c(e,n){return a.coerce2(t,r,o,e,n)}i.handleSampleDefaults(t,r,u,s);if(r.visible===false)return;u("bandwidth");u("scalegroup",r.name);u("scalemode");u("side");var f=u("span");var d;if(Array.isArray(f))d="manual";u("spanmode",d);var v=u("line.color",(t.marker||{}).color||l);var p=u("line.width");var h=u("fillcolor",n.addOpacity(r.line.color,.5));i.handlePointsDefaults(t,r,u,{prefix:""});var g=c("box.width");var y=c("box.fillcolor",h);var m=c("box.line.color",v);var x=c("box.line.width",p);var b=u("box.visible",Boolean(g||y||m||x));if(!b)delete r.box;var _=c("meanline.color",v);var w=c("meanline.width",p);var k=u("meanline.visible",Boolean(_||w));if(!k)delete r.meanline}},{"../../components/color":50,"../../lib":169,"../box/defaults":286,"./attributes":399}],402:[function(e,t,r){"use strict";var a=e("../../lib");var n={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};r.makeKDE=function(e,t,r){var a=r.length;var i=n.gaussian;var o=e.bandwidth;var l=1/(a*o);return function(e){var t=0;for(var n=0;n<a;n++){t+=i((e-r[n])/o)}return l*t}};r.getPositionOnKdePath=function(e,t,r){var n,i;if(t.orientation==="h"){n="y";i="x"}else{n="x";i="y"}var o=a.findPointOnPath(e.path,r,i,{pathLength:e.pathLength});var l=e.posCenterPx;var s=o[n];var u=t.side==="both"?2*l-s:l;return[s,u]};r.getKdeValue=function(e,t,a){var n=e.pts.map(r.extractVal);var i=r.makeKDE(e,t,n);return i(a)/e.posDensityScale};r.extractVal=function(e){return e.v}},{"../../lib":169}],403:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("../../plots/cartesian/axes");var i=e("../box/hover");var o=e("./helpers");t.exports=function e(t,r,l,s,u){var c=t.cd;var f=c[0].trace;var d=f.hoveron;var v=d.indexOf("violins")!==-1;var p=d.indexOf("kde")!==-1;var h=[];var g;var y;if(v||p){var m=i.hoverOnBoxes(t,r,l,s);if(v){h=h.concat(m)}if(p&&m.length>0){var x=t.xa;var b=t.ya;var _,w,k,M,T;if(f.orientation==="h"){T=r;_="y";k=b;w="x";M=x}else{T=l;_="x";k=x;w="y";M=b}var A=c[t.index];if(T>=A.span[0]&&T<=A.span[1]){var L=a.extendFlat({},t);var S=M.c2p(T,true);var C=o.getKdeValue(A,f,T);var O=o.getPositionOnKdePath(A,f,S);var z=k._offset;var P=k._length;L[_+"0"]=O[0];L[_+"1"]=O[1];L[w+"0"]=L[w+"1"]=S;L[w+"Label"]=w+": "+n.hoverLabelText(M,T)+", "+c[0].t.labels.kde+" "+C.toFixed(3);L.spikeDistance=m[0].spikeDistance;var D=_+"Spike";L[D]=m[0][D];m[0].spikeDistance=undefined;m[0][D]=undefined;h.push(L);y={stroke:t.color};y[_+"1"]=a.constrain(z+O[0],z,z+P);y[_+"2"]=a.constrain(z+O[1],z,z+P);y[w+"1"]=y[w+"2"]=M._offset+S}}}if(d.indexOf("points")!==-1){g=i.hoverOnPoints(t,r,l)}var I=u.selectAll(".violinline-"+f.uid).data(y?[0]:[]);I.enter().append("line").classed("violinline-"+f.uid,true).attr("stroke-width",1.5);I.exit().remove();I.attr(y);if(s==="closest"){if(g)return[g];return h}if(g){h.push(g);return h}return h}},{"../../lib":169,"../../plots/cartesian/axes":213,"../box/hover":287,"./helpers":402}],404:[function(e,t,r){"use strict";t.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),setPositions:e("./set_positions"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":224,"../box/select":292,"../scatter/style":388,"./attributes":399,"./calc":400,"./defaults":401,"./hover":403,"./layout_attributes":405,"./layout_defaults":406,"./plot":407,"./set_positions":408,"./style":409}],405:[function(e,t,r){"use strict";var a=e("../box/layout_attributes");var n=e("../../lib").extendFlat;t.exports={violinmode:n({},a.boxmode,{}),violingap:n({},a.boxgap,{}),violingroupgap:n({},a.boxgroupgap,{})}},{"../../lib":169,"../box/layout_attributes":289}],406:[function(e,t,r){"use strict";var a=e("../../lib");var n=e("./layout_attributes");var i=e("../box/layout_defaults");t.exports=function e(t,r,o){function l(e,i){return a.coerce(t,r,n,e,i)}i._supply(t,r,o,l,"violin")}},{"../../lib":169,"../box/layout_defaults":290,"./layout_attributes":405}],407:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../lib");var i=e("../../components/drawing");var o=e("../box/plot");var l=e("../scatter/line_points");var s=e("./helpers");t.exports=function e(t,r,u,c){var f=t._fullLayout;var d=r.xaxis;var v=r.yaxis;function p(e){var t=l(e,{xaxis:d,yaxis:v,connectGaps:true,baseTolerance:.75,shape:"spline",simplify:true});return i.smoothopen(t[0],1)}var h=c.selectAll("g.trace.violins").data(u,function(e){return e[0].trace.uid});h.enter().append("g").attr("class","trace violins");h.exit().remove();h.order();h.each(function(e){var t=e[0];var i=t.t;var l=t.trace;var u=a.select(this);if(!r.isRangePlot)t.node3=u;var c=f._numViolins;var h=f.violinmode==="group"&&c>1;var g=1-f.violingap;var y=i.bdPos=i.dPos*g*(1-f.violingroupgap)/(h?c:1);var m=i.bPos=h?2*i.dPos*(-.5+(i.num+.5)/c)*g:0;i.wHover=i.dPos*(h?g/c:1);if(l.visible!==true||i.empty){a.select(this).remove();return}var x=r[i.valLetter+"axis"];var b=r[i.posLetter+"axis"];var _=l.side==="both";var w=_||l.side==="positive";var k=_||l.side==="negative";var M=f._violinScaleGroupStats[l.scalegroup];var T=u.selectAll("path.violin").data(n.identity);T.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");T.exit().remove();T.each(function(e){var t=a.select(this);var r=e.density;var n=r.length;var o=e.pos+m;var s=b.c2p(o);var u;switch(l.scalemode){case"width":u=M.maxWidth/y;break;case"count":u=M.maxWidth/y*(M.maxCount/e.pts.length);break}var c,f,d;var v,h,g,T;if(w){g=new Array(n);for(v=0;v<n;v++){T=g[v]={};T[i.posLetter]=o+r[v].v/u;T[i.valLetter]=r[v].t}c=p(g)}if(k){g=new Array(n);for(h=0,v=n-1;h<n;h++,v--){T=g[h]={};T[i.posLetter]=o-r[v].v/u;T[i.valLetter]=r[v].t}f=p(g)}if(_){d=c+"L"+f.substr(1)+"Z"}else{var A=[s,x.c2p(r[0].t)];var L=[s,x.c2p(r[n-1].t)];if(l.orientation==="h"){A.reverse();L.reverse()}if(w){d="M"+A+"L"+c.substr(1)+"L"+L}else{d="M"+L+"L"+f.substr(1)+"L"+A}}t.attr("d",d);e.posCenterPx=s;e.posDensityScale=u*y;e.path=t.node();e.pathLength=e.path.getTotalLength()/(_?2:1)});var A=l.box||{};var L=A.width;var S=(A.line||{}).width;var C;var O;if(_){C=y*L;O=0}else if(w){C=[0,y*L/2];O=-S}else{C=[y*L/2,0];O=S}o.plotBoxAndWhiskers(u,{pos:b,val:x},l,{bPos:m,bdPos:C,bPosPxOffset:O});o.plotBoxMean(u,{pos:b,val:x},l,{bPos:m,bdPos:C,bPosPxOffset:O});var z;if(!(l.box||{}).visible&&(l.meanline||{}).visible){z=n.identity}var P=u.selectAll("path.meanline").data(z||[]);P.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");P.exit().remove();P.each(function(e){var t=x.c2p(e.mean,true);var r=s.getPositionOnKdePath(e,l,t);a.select(this).attr("d",l.orientation==="h"?"M"+t+","+r[0]+"V"+r[1]:"M"+r[0]+","+t+"H"+r[1])});o.plotPoints(u,{x:d,y:v},l,i)})}},{"../../components/drawing":75,"../../lib":169,"../box/plot":291,"../scatter/line_points":380,"./helpers":402,d3:15}],408:[function(e,t,r){"use strict";var a=e("../box/set_positions").setPositionOffset;var n=["v","h"];t.exports=function e(t,r){var i=t.calcdata;var o=r.xaxis;var l=r.yaxis;for(var s=0;s<n.length;s++){var u=n[s];var c=u==="h"?l:o;var f=[];var d=0;var v=0;for(var p=0;p<i.length;p++){var h=i[p];var g=h[0].t;var y=h[0].trace;if(y.visible===true&&y.type==="violin"&&!g.empty&&y.orientation===u&&y.xaxis===o._id&&y.yaxis===l._id){f.push(p);if(y.points!==false){d=Math.max(d,y.jitter-y.pointpos-1);v=Math.max(v,y.jitter+y.pointpos-1)}}}a("violin",t,f,c,[d,v])}}},{"../box/set_positions":293}],409:[function(e,t,r){"use strict";var a=e("d3");var n=e("../../components/color");var i=e("../scatter/style").stylePoints;t.exports=function e(t,r){var o=r?r[0].node3:a.select(t).selectAll("g.trace.violins");o.style("opacity",function(e){return e[0].trace.opacity});o.each(function(e){var r=e[0].trace;var o=a.select(this);var l=r.box||{};var s=l.line||{};var u=r.meanline||{};var c=u.width;o.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(n.stroke,r.line.color).call(n.fill,r.fillcolor);o.selectAll("path.box").style("stroke-width",s.width+"px").call(n.stroke,s.color).call(n.fill,l.fillcolor);var f={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};o.selectAll("path.mean").style(f).call(n.stroke,u.color);o.selectAll("path.meanline").style(f).call(n.stroke,u.color);i(o,r,t)})}},{"../../components/color":50,"../scatter/style":388,d3:15}]},{},[11])(11)});