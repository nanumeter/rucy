/**
* plotly.js (gl2d - minified) v1.39.1
* Copyright 2012-2018, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var e,t,r;return function(){function e(t,r,n){function a(o,s){if(!r[o]){if(!t[o]){var l=typeof require=="function"&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[o]={exports:{}};t[o][0].call(f.exports,function(e){var r=t[o][1][e];return a(r?r:e)},f,f.exports,e,t,r,n)}return r[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<n.length;o++)a(n[o]);return a}return e}()({1:[function(e,t,r){"use strict";var n=e("../src/lib");var a={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(o,a[i])}},{"../src/lib":445}],2:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:1e3,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:1e3,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"}}},{}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/contourgl")},{"../src/traces/contourgl":557}],4:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":427}],5:[function(e,t,r){"use strict";t.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":572}],6:[function(e,t,r){"use strict";var n=e("./core");n.register([e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./contourgl"),e("./parcoords")]);t.exports=n},{"./contourgl":3,"./core":4,"./heatmapgl":5,"./parcoords":7,"./pointcloud":8,"./scattergl":9,"./splom":10}],7:[function(e,t,r){"use strict";t.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":585}],8:[function(e,t,r){"use strict";t.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":595}],9:[function(e,t,r){"use strict";t.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":627}],10:[function(e,t,r){"use strict";t.exports=e("../src/traces/splom")},{"../src/traces/splom":631}],11:[function(e,t,r){"use strict";var n=e("css-font");var a=e("pick-by-alias");var i=e("regl");var o=e("gl-util/context");var s=e("es6-weak-map");var l=e("color-normalize");var u=e("font-atlas");var f=e("typedarray-pool");var c=e("parse-rect");var h=e("is-plain-obj");var d=e("parse-unit");var v=e("to-px");var p=e("detect-kerning");var g=e("object-assign");var m=e("font-measure");var y=e("flatten-vertex-data");var b=new s;var x=false;if(document.body){var _=document.body.appendChild(document.createElement("div"));_.style.font="italic small-caps bold condensed 16px/2 cursive";if(getComputedStyle(_).fontStretch){x=true}document.body.removeChild(_)}var w=function e(t){if(A(t)){t={regl:t};this.gl=t.regl._gl}else{this.gl=o(t)}this.shader=b.get(this.gl);if(!this.shader){this.regl=t.regl||i({gl:this.gl})}else{this.regl=this.shader.regl}this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});if(!this.shader){this.shader=this.createShader();b.set(this.gl,this.shader)}this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(h(t)?t:{})};w.prototype.createShader=function e(){var t=this.regl;var r=t({blend:{enable:true,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:false},depth:{enable:false},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(e,t){return[t.atlas.width,t.atlas.height]},atlasDim:function(e,t){return[t.atlas.cols,t.atlas.rows]},atlas:function(e,t){return t.atlas.texture},charStep:function(e,t){return t.atlas.step},em:function(e,t){return t.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(!w.normalViewport?"vec2 positionOffset = vec2(positionOffset.x,- positionOffset.y);":"")+"\n\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\t"+(w.normalViewport?"position.y = 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});var n={};return{regl:t,draw:r,atlas:n}};w.prototype.update=function e(t){var r=this;if(typeof t==="string"){t={text:t}}else if(!t){return}t=a(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},true);if(t.opacity!=null){if(Array.isArray(t.opacity)){this.opacity=t.opacity.map(function(e){return parseFloat(e)})}else{this.opacity=parseFloat(t.opacity)}}if(t.viewport!=null){this.viewport=c(t.viewport);if(w.normalViewport){this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height}this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]}if(this.viewport==null){this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight};this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]}if(t.kerning!=null){this.kerning=t.kerning}if(t.offset!=null){if(typeof t.offset==="number"){t.offset=[t.offset,0]}this.positionOffset=y(t.offset)}if(t.direction){this.direction=t.direction}if(t.range){this.range=t.range;this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])];this.translate=[-t.range[0],-t.range[1]]}if(t.scale){this.scale=t.scale}if(t.translate){this.translate=t.translate}if(!this.scale){this.scale=[1/this.viewport.width,1/this.viewport.height]}if(!this.translate){this.translate=[0,0]}if(!this.font.length&&!t.font){t.font=w.baseFontSize+"px sans-serif"}var i=false,o=false;if(t.font){(Array.isArray(t.font)?t.font:[t.font]).forEach(function(e,t){if(typeof e==="string"){try{e=n.parse(e)}catch(t){e=n.parse(w.baseFontSize+"px "+e)}}else{e=n.parse(n.stringify(e))}var a=n.stringify({size:w.baseFontSize,family:e.family,stretch:x?e.stretch:undefined,variant:e.variant,weight:e.weight,style:e.style});var s=d(e.size);var l=Math.round(s[0]*v(s[1]));if(l!==r.fontSize[t]){o=true;r.fontSize[t]=l}if(!r.font[t]||a!=r.font[t].baseString){i=true;r.font[t]=w.fonts[a];if(!r.font[t]){var u=e.family.join(", ");var f=[e.style];if(e.style!=e.variant){f.push(e.variant)}if(e.variant!=e.weight){f.push(e.weight)}if(x&&e.weight!=e.stretch){f.push(e.stretch)}r.font[t]={baseString:a,family:u,weight:e.weight,stretch:e.stretch,style:e.style,variant:e.variant,width:{},kerning:{},metrics:m(u,{origin:"top",fontSize:w.baseFontSize,fontStyle:f.join(" ")})};w.fonts[a]=r.font[t]}}})}if(i||o){this.font.forEach(function(e,a){var i=n.stringify({size:r.fontSize[a],family:e.family,stretch:x?e.stretch:undefined,variant:e.variant,weight:e.weight,style:e.style});r.fontAtlas[a]=r.shader.atlas[i];if(!r.fontAtlas[a]){var o=e.metrics;r.shader.atlas[i]=r.fontAtlas[a]={fontString:i,step:Math.ceil(r.fontSize[a]*o.bottom*.5)*2,em:r.fontSize[a],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}if(t.text==null){t.text=r.text}})}if(typeof t.text==="string"&&t.position&&t.position.length>2){var s=Array(t.position.length*.5);for(var h=0;h<s.length;h++){s[h]=t.text}t.text=s}var b;if(t.text!=null||i){this.textOffsets=[0];if(Array.isArray(t.text)){this.count=t.text[0].length;this.counts=[this.count];for(var _=1;_<t.text.length;_++){r.textOffsets[_]=r.textOffsets[_-1]+t.text[_-1].length;r.count+=t.text[_].length;r.counts.push(t.text[_].length)}this.text=t.text.join("")}else{this.text=t.text;this.count=this.text.length;this.counts=[this.count]}b=[];this.font.forEach(function(e,t){w.atlasContext.font=e.baseString;var n=r.fontAtlas[t];for(var a=0;a<r.text.length;a++){var i=r.text.charAt(a);if(n.ids[i]==null){n.ids[i]=n.chars.length;n.chars.push(i);b.push(i)}if(e.width[i]==null){e.width[i]=w.atlasContext.measureText(i).width/w.baseFontSize;if(r.kerning){var o=[];for(var s in e.width){o.push(s+i,i+s)}g(e.kerning,p(e.family,{pairs:o}))}}}})}if(t.position){if(t.position.length>2){var A=!t.position[0].length;var k=f.mallocFloat(this.count*2);for(var T=0,M=0;T<this.counts.length;T++){var E=r.counts[T];if(A){for(var C=0;C<E;C++){k[M++]=t.position[T*2];k[M++]=t.position[T*2+1]}}else{for(var S=0;S<E;S++){k[M++]=t.position[T][0];k[M++]=t.position[T][1]}}}if(this.position.call){this.position({type:"float",data:k})}else{this.position=this.regl.buffer({type:"float",data:k})}f.freeFloat(k)}else{if(this.position.destroy){this.position.destroy()}this.position={constant:t.position}}}if(t.text||i){var L=f.mallocUint8(this.count);var O=f.mallocFloat(this.count*2);this.textWidth=[];for(var I=0,D=0;I<this.counts.length;I++){var R=r.counts[I];var P=r.font[I]||r.font[0];var z=r.fontAtlas[I]||r.fontAtlas[0];for(var F=0;F<R;F++){var B=r.text.charAt(D);var N=r.text.charAt(D-1);L[D]=z.ids[B];O[D*2]=P.width[B];if(F){var j=O[D*2-2];var U=O[D*2];var V=O[D*2-1];var H=V+j*.5+U*.5;if(r.kerning){var q=P.kerning[N+B];if(q){H+=q*.001}}O[D*2+1]=H}else{O[D*2+1]=O[D*2]*.5}D++}r.textWidth.push(!O.length?0:O[D*2-2]*.5+O[D*2-1])}if(!t.align){t.align=this.align}this.charBuffer({data:L,type:"uint8",usage:"stream"});this.sizeBuffer({data:O,type:"float",usage:"stream"});f.freeUint8(L);f.freeFloat(O);if(b.length){this.font.forEach(function(e,t){var n=r.fontAtlas[t];var a=n.step;var i=Math.floor(w.maxAtlasSize/a);var o=Math.min(i,n.chars.length);var s=Math.ceil(n.chars.length/o);var l=o*a;var f=s*a;n.width=l;n.height=f;n.rows=s;n.cols=o;if(!n.em){return}n.texture({data:u({canvas:w.atlasCanvas,font:n.fontString,chars:n.chars,shape:[l,f],step:[a,a]})})})}}if(t.align){this.align=t.align;this.alignOffset=this.textWidth.map(function(e,t){var n=!Array.isArray(r.align)?r.align:r.align.length>1?r.align[t]:r.align[0];if(typeof n==="number"){return n}switch(n){case"right":case"end":return-e;case"center":case"centre":case"middle":return-e*.5}return 0})}if(this.baseline==null&&t.baseline==null){t.baseline=0}if(t.baseline!=null){this.baseline=t.baseline;if(!Array.isArray(this.baseline)){this.baseline=[this.baseline]}this.baselineOffset=this.baseline.map(function(e,t){var n=(r.font[t]||r.font[0]).metrics;var a=0;a+=n.bottom*.5;if(typeof e==="number"){a+=e-n.baseline}else{a+=-n[e]}if(!w.normalViewport){a*=-1}return a})}if(t.color!=null){if(!t.color){t.color="transparent"}if(typeof t.color==="string"||!isNaN(t.color)){this.color=l(t.color,"uint8")}else{var G;if(typeof t.color[0]==="number"&&t.color.length>this.counts.length){var X=t.color.length;G=f.mallocUint8(X);var W=(t.color.subarray||t.color.slice).bind(t.color);for(var Y=0;Y<X;Y+=4){G.set(l(W(Y,Y+4),"uint8"),Y)}}else{var Z=t.color.length;G=f.mallocUint8(Z*4);for(var J=0;J<Z;J++){G.set(l(t.color[J]||0,"uint8"),J*4)}}this.color=G}}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var Q=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Q){var $=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array($);for(var K=0;K<this.batch.length;K++){r.batch[K]={count:r.counts.length>1?r.counts[K]:r.counts[0],offset:r.textOffsets.length>1?r.textOffsets[K]:r.textOffsets[0],color:!r.color?[0,0,0,255]:r.color.length<=4?r.color:r.color.subarray(K*4,K*4+4),opacity:Array.isArray(r.opacity)?r.opacity[K]:r.opacity,baseline:r.baselineOffset[K]!=null?r.baselineOffset[K]:r.baselineOffset[0],align:!r.align?0:r.alignOffset[K]!=null?r.alignOffset[K]:r.alignOffset[0],atlas:r.fontAtlas[K]||r.fontAtlas[0],positionOffset:r.positionOffset.length>2?r.positionOffset.subarray(K*2,K*2+2):r.positionOffset}}}else{if(this.count){this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]}else{this.batch=[]}}}};w.prototype.destroy=function e(){};w.prototype.kerning=true;w.prototype.position={constant:new Float32Array(2)};w.prototype.translate=null;w.prototype.scale=null;w.prototype.font=null;w.prototype.text="";w.prototype.positionOffset=[0,0];w.prototype.opacity=1;w.prototype.color=new Uint8Array([0,0,0,255]);w.prototype.alignOffset=[0,0];w.normalViewport=false;w.maxAtlasSize=1024;w.atlasCanvas=document.createElement("canvas");w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:false});w.baseFontSize=64;w.fonts={};function A(e){return typeof e==="function"&&e._gl&&e.prop&&e.texture&&e.buffer}t.exports=w},{"color-normalize":12,"css-font":74,"detect-kerning":88,"es6-weak-map":146,"flatten-vertex-data":15,"font-atlas":153,"font-measure":154,"gl-util/context":191,"is-plain-obj":211,"object-assign":223,"parse-rect":226,"parse-unit":228,"pick-by-alias":232,regl:260,"to-px":287,"typedarray-pool":291}],12:[function(e,t,r){"use strict";var n=e("color-rgba");var a=e("clamp");var i=e("dtype");t.exports=function e(t,r){if(r==="float"||!r)r="array";if(r==="uint")r="uint8";if(r==="uint_clamped")r="uint8_clamped";var o=i(r);var s=new o(4);if(t instanceof o){if(Array.isArray(t)){return t.slice()}s.set(t);return s}var e=r!=="uint8"&&r!=="uint8_clamped";if(t instanceof Uint8Array||t instanceof Uint8ClampedArray){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]!=null?t[3]:255;if(e){s[0]/=255;s[1]/=255;s[2]/=255;s[3]/=255}return s}if(!t.length||typeof t==="string"){t=n(t);t[0]/=255;t[1]/=255;t[2]/=255}if(!e){s[0]=a(Math.round(t[0]*255),0,255);s[1]=a(Math.round(t[1]*255),0,255);s[2]=a(Math.round(t[2]*255),0,255);s[3]=t[3]==null?255:a(Math.floor(t[3]*255),0,255)}else{s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]!=null?t[3]:1}return s}},{clamp:59,"color-rgba":14,dtype:91}],13:[function(e,t,r){(function(r){"use strict";var n=e("color-name");var a=e("is-plain-obj");var i=e("defined");t.exports=s;var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function s(e){var t,s=[],l=1,u;if(typeof e==="string"){if(n[e]){s=n[e].slice();u="rgb"}else if(e==="transparent"){l=0;u="rgb";s=[0,0,0]}else if(/^#[A-Fa-f0-9]+$/.test(e)){var f=e.slice(1);var c=f.length;var h=c<=4;l=1;if(h){s=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)];if(c===4){l=parseInt(f[3]+f[3],16)/255}}else{s=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)];if(c===8){l=parseInt(f[6]+f[7],16)/255}}if(!s[0])s[0]=0;if(!s[1])s[1]=0;if(!s[2])s[2]=0;u="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var d=t[1];var f=d.replace(/a$/,"");u=f;var c=f==="cmyk"?4:f==="gray"?1:3;s=t[2].trim().split(/\s*,\s*/).map(function(e,t){if(/%$/.test(e)){if(t===c)return parseFloat(e)/100;if(f==="rgb")return parseFloat(e)*255/100;return parseFloat(e)}else if(f[t]==="h"){if(/deg$/.test(e)){return parseFloat(e)}else if(o[e]!==undefined){return o[e]}}return parseFloat(e)});if(d===f)s.push(1);l=s[c]===undefined?1:s[c];s=s.slice(0,c)}else if(e.length>10&&/[0-9](?:\s|\/)/.test(e)){s=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)});u=e.match(/([a-z])/ig).join("").toLowerCase()}}else if(!isNaN(e)){u="rgb";s=[e>>>16,(e&65280)>>>8,e&255]}else if(a(e)){var v=i(e.r,e.red,e.R,null);if(v!==null){u="rgb";s=[v,i(e.g,e.green,e.G),i(e.b,e.blue,e.B)]}else{u="hsl";s=[i(e.h,e.hue,e.H),i(e.s,e.saturation,e.S),i(e.l,e.lightness,e.L,e.b,e.brightness)]}l=i(e.a,e.alpha,e.opacity,1);if(e.opacity!=null)l/=100}else if(Array.isArray(e)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){s=[e[0],e[1],e[2]];u="rgb";l=e.length===4?e[3]:1}return{space:u,values:s,alpha:l}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"color-name":63,defined:87,"is-plain-obj":211}],14:[function(e,t,r){"use strict";var n=e("color-parse");var a=e("color-space/hsl");var i=e("clamp");t.exports=function e(t){var r,o,s;var l=n(t);if(!l.space)return[];r=Array(3);r[0]=i(l.values[0],0,255);r[1]=i(l.values[1],0,255);r[2]=i(l.values[2],0,255);if(l.space[0]==="h"){r=a.rgb(r)}r.push(i(l.alpha,0,1));return r}},{clamp:59,"color-parse":13,"color-space/hsl":67}],15:[function(e,t,r){var n=e("dtype");t.exports=a;function a(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");r=+(r||0)|0;if(Array.isArray(e)&&(e[0]&&typeof e[0][0]==="number")){var a=e[0].length;var i=e.length*a;var o,s,l,u;if(!t||typeof t==="string"){t=new(n(t||"float32"))(i+r)}var f=t.length-r;if(i!==f){throw new Error("source length "+i+" ("+a+"x"+e.length+")"+" does not match destination length "+f)}for(o=0,l=r;o<e.length;o++){for(s=0;s<a;s++){t[l++]=e[o][s]===null?NaN:e[o][s]}}}else{if(!t||typeof t==="string"){var c=n(t||"float32");if(Array.isArray(e)||t==="array"){t=new c(e.length+r);for(o=0,l=r,u=t.length;l<u;l++,o++){t[l]=e[o]===null?NaN:e[o]}}else{if(r===0){t=new c(e)}else{t=new c(e.length+r);t.set(e,r)}}}else{t.set(e,r)}}return t}},{dtype:91}],16:[function(e,t,r){t.exports=n;function n(e){var t=0;var r=0;var n=0;var a=0;return e.map(function(e){e=e.slice();var i=e[0];var o=i.toUpperCase();if(i!=o){e[0]=o;switch(i){case"a":e[6]+=n;e[7]+=a;break;case"v":e[1]+=a;break;case"h":e[1]+=n;break;default:for(var s=1;s<e.length;){e[s++]+=n;e[s++]+=a}}}switch(o){case"Z":n=t;a=r;break;case"H":n=e[1];break;case"V":a=e[1];break;case"M":n=t=e[1];a=r=e[2];break;default:n=e[e.length-2];a=e[e.length-1]}return e})}},{}],17:[function(e,t,r){var n=e("pad-left");t.exports=a;function a(e,t,r){t=typeof t==="number"?t:1;r=r||": ";var a=e.split(/\r?\n/);var i=String(a.length+t-1).length;return a.map(function(e,a){var o=a+t;var s=String(o).length;var l=n(o,i-s);return l+r+e}).join("\n")}},{"pad-left":224}],18:[function(e,t,r){"use strict";t.exports=n;function n(e,t){if(!e||e.length==null)throw Error("Argument should be an array");if(t==null)t=1;else t=Math.floor(t);var r=Array(t*2);for(var n=0;n<t;n++){var a=-Infinity,i=Infinity,o=n,s=e.length;for(;o<s;o+=t){if(e[o]>a)a=e[o];if(e[o]<i)i=e[o]}r[n]=i;r[t+n]=a}return r}},{}],19:[function(e,t,r){"use strict";var n=e("array-bounds");t.exports=a;function a(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");if(t==null)t=1;if(r==null)r=n(e,t);for(var a=0;a<t;a++){var i=r[t+a],o=r[a],s=a,l=e.length;if(i===Infinity&&o===-Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===i?1:e[s]===o?0:.5}}else if(i===Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===i?1:0}}else if(o===-Infinity){for(s=a;s<l;s+=t){e[s]=e[s]===o?0:1}}else{var u=i-o;for(s=a;s<l;s+=t){e[s]=u===0?.5:(e[s]-o)/u}}}return e}},{"array-bounds":18}],20:[function(e,t,r){t.exports=function e(t,r){var n=typeof t==="number",a=typeof r==="number";if(n&&!a){r=t;t=0}else if(!n&&!a){t=0;r=0}t=t|0;r=r|0;var i=r-t;if(i<0)throw new Error("array length must be positive");var o=new Array(i);for(var s=0,l=t;s<i;s++,l++)o[s]=l;return o}},{}],21:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t){return 0}var r=e.length;var n=t.length;for(var a=0,i=Math.min(r,n);a<i;++a){if(e[a]!==t[a]){r=e[a];n=t[a];break}}if(r<n){return-1}if(n<r){return 1}return 0}function a(e){if(r.Buffer&&typeof r.Buffer.isBuffer==="function"){return r.Buffer.isBuffer(e)}return!!(e!=null&&e._isBuffer)}var i=e("util/");var o=Object.prototype.hasOwnProperty;var s=Array.prototype.slice;var l=function(){return function e(){}.name==="foo"}();function u(e){return Object.prototype.toString.call(e)}function f(e){if(a(e)){return false}if(typeof r.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(e)}if(!e){return false}if(e instanceof DataView){return true}if(e.buffer&&e.buffer instanceof ArrayBuffer){return true}return false}var c=t.exports=y;var h=/\s*function\s+([^\(\s]*)\s*/;function d(e){if(!i.isFunction(e)){return}if(l){return e.name}var t=e.toString();var r=t.match(h);return r&&r[1]}c.AssertionError=function e(t){this.name="AssertionError";this.actual=t.actual;this.expected=t.expected;this.operator=t.operator;if(t.message){this.message=t.message;this.generatedMessage=false}else{this.message=g(this);this.generatedMessage=true}var r=t.stackStartFunction||m;if(Error.captureStackTrace){Error.captureStackTrace(this,r)}else{var n=new Error;if(n.stack){var a=n.stack;var i=d(r);var o=a.indexOf("\n"+i);if(o>=0){var s=a.indexOf("\n",o+1);a=a.substring(s+1)}this.stack=a}}};i.inherits(c.AssertionError,Error);function v(e,t){if(typeof e==="string"){return e.length<t?e:e.slice(0,t)}else{return e}}function p(e){if(l||!i.isFunction(e)){return i.inspect(e)}var t=d(e);var r=t?": "+t:"";return"[Function"+r+"]"}function g(e){return v(p(e.actual),128)+" "+e.operator+" "+v(p(e.expected),128)}function m(e,t,r,n,a){throw new c.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:a})}c.fail=m;function y(e,t){if(!e)m(e,true,t,"==",c.ok)}c.ok=y;c.equal=function e(t,r,n){if(t!=r)m(t,r,n,"==",c.equal)};c.notEqual=function e(t,r,n){if(t==r){m(t,r,n,"!=",c.notEqual)}};c.deepEqual=function e(t,r,n){if(!b(t,r,false)){m(t,r,n,"deepEqual",c.deepEqual)}};c.deepStrictEqual=function e(t,r,n){if(!b(t,r,true)){m(t,r,n,"deepStrictEqual",c.deepStrictEqual)}};function b(e,t,r,o){if(e===t){return true}else if(a(e)&&a(t)){return n(e,t)===0}else if(i.isDate(e)&&i.isDate(t)){return e.getTime()===t.getTime()}else if(i.isRegExp(e)&&i.isRegExp(t)){return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase}else if((e===null||typeof e!=="object")&&(t===null||typeof t!=="object")){return r?e===t:e==t}else if(f(e)&&f(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array)){return n(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}else if(a(e)!==a(t)){return false}else{o=o||{actual:[],expected:[]};var s=o.actual.indexOf(e);if(s!==-1){if(s===o.expected.indexOf(t)){return true}}o.actual.push(e);o.expected.push(t);return _(e,t,r,o)}}function x(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function _(e,t,r,n){if(e===null||e===undefined||t===null||t===undefined)return false;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return false;var a=x(e);var o=x(t);if(a&&!o||!a&&o)return false;if(a){e=s.call(e);t=s.call(t);return b(e,t,r)}var l=M(e);var u=M(t);var f,c;if(l.length!==u.length)return false;l.sort();u.sort();for(c=l.length-1;c>=0;c--){if(l[c]!==u[c])return false}for(c=l.length-1;c>=0;c--){f=l[c];if(!b(e[f],t[f],r,n))return false}return true}c.notDeepEqual=function e(t,r,n){if(b(t,r,false)){m(t,r,n,"notDeepEqual",c.notDeepEqual)}};c.notDeepStrictEqual=w;function w(e,t,r){if(b(e,t,true)){m(e,t,r,"notDeepStrictEqual",w)}}c.strictEqual=function e(t,r,n){if(t!==r){m(t,r,n,"===",c.strictEqual)}};c.notStrictEqual=function e(t,r,n){if(t===r){m(t,r,n,"!==",c.notStrictEqual)}};function A(e,t){if(!e||!t){return false}if(Object.prototype.toString.call(t)=="[object RegExp]"){return t.test(e)}try{if(e instanceof t){return true}}catch(e){}if(Error.isPrototypeOf(t)){return false}return t.call({},e)===true}function k(e){var t;try{e()}catch(e){t=e}return t}function T(e,t,r,n){var a;if(typeof t!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof r==="string"){n=r;r=null}a=k(t);n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:".");if(e&&!a){m(a,r,"Missing expected exception"+n)}var o=typeof n==="string";var s=!e&&i.isError(a);var l=!e&&a&&!r;if(s&&o&&A(a,r)||l){m(a,r,"Got unwanted exception"+n)}if(e&&a&&r&&!A(a,r)||!e&&a){throw a}}c.throws=function(e,t,r){T(true,e,t,r)};c.doesNotThrow=function(e,t,r){T(false,e,t,r)};c.ifError=function(e){if(e)throw e};var M=Object.keys||function(e){var t=[];for(var r in e){if(o.call(e,r))t.push(r)}return t}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"util/":298}],22:[function(e,t,r){t.exports=function e(t){return atob(t)}},{}],23:[function(e,t,r){"use strict";r.byteLength=f;r.toByteArray=c;r.fromByteArray=v;var n=[];var a=[];var i=typeof Uint8Array!=="undefined"?Uint8Array:Array;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var s=0,l=o.length;s<l;++s){n[s]=o[s];a[o.charCodeAt(s)]=s}a["-".charCodeAt(0)]=62;a["_".charCodeAt(0)]=63;function u(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}return e[t-2]==="="?2:e[t-1]==="="?1:0}function f(e){return e.length*3/4-u(e)}function c(e){var t,r,n,o,s;var l=e.length;o=u(e);s=new i(l*3/4-o);r=o>0?l-4:l;var f=0;for(t=0;t<r;t+=4){n=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)];s[f++]=n>>16&255;s[f++]=n>>8&255;s[f++]=n&255}if(o===2){n=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4;s[f++]=n&255}else if(o===1){n=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2;s[f++]=n>>8&255;s[f++]=n&255}return s}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[e&63]}function d(e,t,r){var n;var a=[];for(var i=t;i<r;i+=3){n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);a.push(h(n))}return a.join("")}function v(e){var t;var r=e.length;var a=r%3;var i="";var o=[];var s=16383;for(var l=0,u=r-a;l<u;l+=s){o.push(d(e,l,l+s>u?u:l+s))}if(a===1){t=e[r-1];i+=n[t>>2];i+=n[t<<4&63];i+="=="}else if(a===2){t=(e[r-2]<<8)+e[r-1];i+=n[t>>10];i+=n[t>>4&63];i+=n[t<<2&63];i+="="}o.push(i);return o.join("")}},{}],24:[function(e,t,r){"use strict";var n=e("./lib/rationalize");t.exports=a;function a(e,t){return n(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}},{"./lib/rationalize":34}],25:[function(e,t,r){"use strict";t.exports=n;function n(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}},{}],26:[function(e,t,r){"use strict";var n=e("./lib/rationalize");t.exports=a;function a(e,t){return n(e[0].mul(t[1]),e[1].mul(t[0]))}},{"./lib/rationalize":34}],27:[function(e,t,r){"use strict";var n=e("./is-rat");var a=e("./lib/is-bn");var i=e("./lib/num-to-bn");var o=e("./lib/str-to-bn");var s=e("./lib/rationalize");var l=e("./div");t.exports=u;function u(e,t){if(n(e)){if(t){return l(e,u(t))}return[e[0].clone(),e[1].clone()]}var r=0;var f,c;if(a(e)){f=e.clone()}else if(typeof e==="string"){f=o(e)}else if(e===0){return[i(0),i(1)]}else if(e===Math.floor(e)){f=i(e)}else{while(e!==Math.floor(e)){e=e*Math.pow(2,256);r-=256}f=i(e)}if(n(t)){f.mul(t[1]);c=t[0].clone()}else if(a(t)){c=t.clone()}else if(typeof t==="string"){c=o(t)}else if(!t){c=i(1)}else if(t===Math.floor(t)){c=i(t)}else{while(t!==Math.floor(t)){t=t*Math.pow(2,256);r+=256}c=i(t)}if(r>0){f=f.ushln(r)}else if(r<0){c=c.ushln(-r)}return s(f,c)}},{"./div":26,"./is-rat":28,"./lib/is-bn":32,"./lib/num-to-bn":33,"./lib/rationalize":34,"./lib/str-to-bn":35}],28:[function(e,t,r){"use strict";var n=e("./lib/is-bn");t.exports=a;function a(e){return Array.isArray(e)&&e.length===2&&n(e[0])&&n(e[1])}},{"./lib/is-bn":32}],29:[function(e,t,r){"use strict";var n=e("bn.js");t.exports=a;function a(e){return e.cmp(new n(0))}},{"bn.js":43}],30:[function(e,t,r){"use strict";var n=e("./bn-sign");t.exports=a;function a(e){var t=e.length;var r=e.words;var a=0;if(t===1){a=r[0]}else if(t===2){a=r[0]+r[1]*67108864}else{for(var i=0;i<t;i++){var o=r[i];a+=o*Math.pow(67108864,i)}}return n(e)*a}},{"./bn-sign":29}],31:[function(e,t,r){"use strict";var n=e("double-bits");var a=e("bit-twiddle").countTrailingZeros;t.exports=i;function i(e){var t=a(n.lo(e));if(t<32){return t}var r=a(n.hi(e));if(r>20){return 52}return r+32}},{"bit-twiddle":41,"double-bits":89}],32:[function(e,t,r){"use strict";var n=e("bn.js");t.exports=a;function a(e){return e&&typeof e==="object"&&Boolean(e.words)}},{"bn.js":43}],33:[function(e,t,r){"use strict";var n=e("bn.js");var a=e("double-bits");t.exports=i;function i(e){var t=a.exponent(e);if(t<52){return new n(e)}else{return new n(e*Math.pow(2,52-t)).ushln(t-52)}}},{"bn.js":43,"double-bits":89}],34:[function(e,t,r){"use strict";var n=e("./num-to-bn");var a=e("./bn-sign");t.exports=i;function i(e,t){var r=a(e);var i=a(t);if(r===0){return[n(0),n(1)]}if(i===0){return[n(0),n(0)]}if(i<0){e=e.neg();t=t.neg()}var o=e.gcd(t);if(o.cmpn(1)){return[e.div(o),t.div(o)]}return[e,t]}},{"./bn-sign":29,"./num-to-bn":33}],35:[function(e,t,r){"use strict";var n=e("bn.js");t.exports=a;function a(e){return new n(e)}},{"bn.js":43}],36:[function(e,t,r){"use strict";var n=e("./lib/rationalize");t.exports=a;function a(e,t){return n(e[0].mul(t[0]),e[1].mul(t[1]))}},{"./lib/rationalize":34}],37:[function(e,t,r){"use strict";var n=e("./lib/bn-sign");t.exports=a;function a(e){return n(e[0])*n(e[1])}},{"./lib/bn-sign":29}],38:[function(e,t,r){"use strict";var n=e("./lib/rationalize");t.exports=a;function a(e,t){return n(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}},{"./lib/rationalize":34}],39:[function(e,t,r){"use strict";var n=e("./lib/bn-to-num");var a=e("./lib/ctz");t.exports=i;function i(e){var t=e[0];var r=e[1];if(t.cmpn(0)===0){return 0}var i=t.abs().divmod(r.abs());var o=i.div;var s=n(o);var l=i.mod;var u=t.negative!==r.negative?-1:1;if(l.cmpn(0)===0){return u*s}if(s){var f=a(s)+4;var c=n(l.ushln(f).divRound(r));return u*(s+c*Math.pow(2,-f))}else{var h=r.bitLength()-l.bitLength()+53;var c=n(l.ushln(h).divRound(r));if(h<1023){return u*c*Math.pow(2,-h)}c*=Math.pow(2,-1023);return u*c*Math.pow(2,1023-h)}}},{"./lib/bn-to-num":30,"./lib/ctz":31}],40:[function(e,t,r){"use strict";function n(e,t,r,n,a,i){var o=["function ",e,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",a?".get(m)":"[m]"];if(i){if(t.indexOf("c")<0){o.push(";if(x===y){return m}else if(x<=y){")}else{o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")}}else{o.push(";if(",t,"){i=m;")}if(r){o.push("l=m+1}else{h=m-1}")}else{o.push("h=m-1}else{l=m+1}")}o.push("}");if(i){o.push("return -1};")}else{o.push("return i};")}return o.join("")}function a(e,t,r,a){var i=new Function([n("A","x"+e+"y",t,["y"],false,a),n("B","x"+e+"y",t,["y"],true,a),n("P","c(x,y)"+e+"0",t,["y","c"],false,a),n("Q","c(x,y)"+e+"0",t,["y","c"],true,a),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""));return i()}t.exports={ge:a(">=",false,"GE"),gt:a(">",false,"GT"),lt:a("<",true,"LT"),le:a("<=",true,"LE"),eq:a("-",true,"EQ",true)}},{}],41:[function(e,t,r){"use strict";"use restrict";var n=32;r.INT_BITS=n;r.INT_MAX=2147483647;r.INT_MIN=-1<<n-1;r.sign=function(e){return(e>0)-(e<0)};r.abs=function(e){var t=e>>n-1;return(e^t)-t};r.min=function(e,t){return t^(e^t)&-(e<t)};r.max=function(e,t){return e^(e^t)&-(e<t)};r.isPow2=function(e){return!(e&e-1)&&!!e};r.log2=function(e){var t,r;t=(e>65535)<<4;e>>>=t;r=(e>255)<<3;e>>>=r;t|=r;r=(e>15)<<2;e>>>=r;t|=r;r=(e>3)<<1;e>>>=r;t|=r;return t|e>>1};r.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};r.popCount=function(e){e=e-(e>>>1&1431655765);e=(e&858993459)+(e>>>2&858993459);return(e+(e>>>4)&252645135)*16843009>>>24};function a(e){var t=32;e&=-e;if(e)t--;if(e&65535)t-=16;if(e&16711935)t-=8;if(e&252645135)t-=4;if(e&858993459)t-=2;if(e&1431655765)t-=1;return t}r.countTrailingZeros=a;r.nextPow2=function(e){e+=e===0;--e;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e+1};r.prevPow2=function(e){e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;return e-(e>>>1)};r.parity=function(e){e^=e>>>16;e^=e>>>8;e^=e>>>4;e&=15;return 27030>>>e&1};var i=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,a=7;for(r>>>=1;r;r>>>=1){n<<=1;n|=r&1;--a}e[t]=n<<a&255}})(i);r.reverse=function(e){return i[e&255]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]};r.interleave2=function(e,t){e&=65535;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t&=65535;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1};r.deinterleave2=function(e,t){e=e>>>t&1431655765;e=(e|e>>>1)&858993459;e=(e|e>>>2)&252645135;e=(e|e>>>4)&16711935;e=(e|e>>>16)&65535;return e<<16>>16};r.interleave3=function(e,t,r){e&=1023;e=(e|e<<16)&4278190335;e=(e|e<<8)&251719695;e=(e|e<<4)&3272356035;e=(e|e<<2)&1227133513;t&=1023;t=(t|t<<16)&4278190335;t=(t|t<<8)&251719695;t=(t|t<<4)&3272356035;t=(t|t<<2)&1227133513;e|=t<<1;r&=1023;r=(r|r<<16)&4278190335;r=(r|r<<8)&251719695;r=(r|r<<4)&3272356035;r=(r|r<<2)&1227133513;return e|r<<2};r.deinterleave3=function(e,t){e=e>>>t&1227133513;e=(e|e>>>2)&3272356035;e=(e|e>>>4)&251719695;e=(e|e>>>8)&4278190335;e=(e|e>>>16)&1023;return e<<22>>22};r.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>a(e)+1}},{}],42:[function(e,t,r){"use strict";var n=e("clamp");t.exports=i;var a=1e20;function i(e,t){if(!t)t={};var r=t.cutoff==null?.25:t.cutoff;var i=t.radius==null?8:t.radius;var s=t.channel||0;var l,u,f,c,h,d,v,p,g,m,y;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");l=t.width,u=t.height;c=e;if(!t.stride)d=Math.floor(e.length/l/u);else d=t.stride}else{if(window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement){p=e;v=p.getContext("2d");l=p.width,u=p.height;g=v.getImageData(0,0,l,u);c=g.data;d=4}else if(window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D){p=e.canvas;v=e;l=p.width,u=p.height;g=v.getImageData(0,0,l,u);c=g.data;d=4}else if(window.ImageData&&e instanceof window.ImageData){g=e;l=e.width,u=e.height;c=g.data;d=4}}f=Math.max(l,u);if(window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array){h=c;c=Array(l*u);for(m=0,y=h.length;m<y;m++){c[m]=h[m*d+s]/255}}else{if(d!==1)throw Error("Raw data can have only 1 value per pixel")}var b=Array(l*u);var x=Array(l*u);var _=Array(f);var w=Array(f);var A=Array(f+1);var k=Array(f);for(m=0,y=l*u;m<y;m++){var T=c[m];b[m]=T===1?0:T===0?a:Math.pow(Math.max(0,.5-T),2);x[m]=T===1?a:T===0?0:Math.pow(Math.max(0,T-.5),2)}o(b,l,u,_,w,k,A);o(x,l,u,_,w,k,A);var M=window.Float32Array?new Float32Array(l*u):new Array(l*u);for(m=0,y=l*u;m<y;m++){M[m]=n(1-((b[m]-x[m])/i+r),0,1)}return M}function o(e,t,r,n,a,i,o){for(var l=0;l<t;l++){for(var u=0;u<r;u++){n[u]=e[u*t+l]}s(n,a,i,o,r);for(u=0;u<r;u++){e[u*t+l]=a[u]}}for(u=0;u<r;u++){for(l=0;l<t;l++){n[l]=e[u*t+l]}s(n,a,i,o,t);for(l=0;l<t;l++){e[u*t+l]=Math.sqrt(a[l])}}}function s(e,t,r,n,i){r[0]=0;n[0]=-a;n[1]=+a;for(var o=1,s=0;o<i;o++){var l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s]);while(l<=n[s]){s--;l=(e[o]+o*o-(e[r[s]]+r[s]*r[s]))/(2*o-2*r[s])}s++;r[s]=o;n[s]=l;n[s+1]=+a}for(o=0,s=0;o<i;o++){while(n[s+1]<o)s++;t[o]=(o-r[s])*(o-r[s])+e[r[s]]}}},{clamp:59}],43:[function(e,t,r){(function(t,r){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof t==="object"){t.exports=i}else{r.BN=i}i.BN=i;i.wordSize=26;var o;try{o=e("buffer").Buffer}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,r,a){if(typeof t==="number"){return this._initNumber(t,r,a)}if(typeof t==="object"){return this._initArray(t,r,a)}if(r==="hex"){r=16}n(r===(r|0)&&r>=2&&r<=36);t=t.toString().replace(/\s+/g,"");var i=0;if(t[0]==="-"){i++}if(r===16){this._parseHex(t,i)}else{this._parseBase(t,r,i)}if(t[0]==="-"){this.negative=1}this.strip();if(a!=="le")return;this._initArray(this.toArray(),r,a)};i.prototype._initNumber=function e(t,r,a){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{n(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(a!=="le")return;this._initArray(this.toArray(),r,a)};i.prototype._initArray=function e(t,r,a){n(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var o,s;var l=0;if(a==="be"){for(i=t.length-1,o=0;i>=0;i-=3){s=t[i]|t[i-1]<<8|t[i-2]<<16;this.words[o]|=s<<l&67108863;this.words[o+1]=s>>>26-l&67108863;l+=24;if(l>=26){l-=26;o++}}}else if(a==="le"){for(i=0,o=0;i<t.length;i+=3){s=t[i]|t[i+1]<<8|t[i+2]<<16;this.words[o]|=s<<l&67108863;this.words[o+1]=s>>>26-l&67108863;l+=24;if(l>=26){l-=26;o++}}}return this.strip()};function s(e,t,r){var n=0;var a=Math.min(e.length,r);for(var i=t;i<a;i++){var o=e.charCodeAt(i)-48;n<<=4;if(o>=49&&o<=54){n|=o-49+10}else if(o>=17&&o<=22){n|=o-17+10}else{n|=o&15}}return n}i.prototype._parseHex=function e(t,r){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var n=0;n<this.length;n++){this.words[n]=0}var a,i;var o=0;for(n=t.length-6,a=0;n>=r;n-=6){i=s(t,n,n+6);this.words[a]|=i<<o&67108863;this.words[a+1]|=i>>>26-o&4194303;o+=24;if(o>=26){o-=26;a++}}if(n+6!==r){i=s(t,r,n+6);this.words[a]|=i<<o&67108863;this.words[a+1]|=i>>>26-o&4194303}this.strip()};function l(e,t,r,n){var a=0;var i=Math.min(e.length,r);for(var o=t;o<i;o++){var s=e.charCodeAt(o)-48;a*=n;if(s>=49){a+=s-49+10}else if(s>=17){a+=s-17+10}else{a+=s}}return a}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var a=0,i=1;i<=67108863;i*=r){a++}a--;i=i/r|0;var o=t.length-n;var s=o%a;var u=Math.min(o,o-s)+n;var f=0;for(var c=n;c<u;c+=a){f=l(t,c,c+a,r);this.imuln(i);if(this.words[0]+f<67108864){this.words[0]+=f}else{this._iaddn(f)}}if(s!==0){var h=1;f=l(t,c,t.length,r);for(c=0;c<s;c++){h*=r}this.imuln(h);if(this.words[0]+f<67108864){this.words[0]+=f}else{this._iaddn(f)}}};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype.strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};i.prototype.inspect=function e(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,r){t=t||10;r=r|0||1;var a;if(t===16||t==="hex"){a="";var i=0;var o=0;for(var s=0;s<this.length;s++){var l=this.words[s];var h=((l<<i|o)&16777215).toString(16);o=l>>>24-i&16777215;if(o!==0||s!==this.length-1){a=u[6-h.length]+h+a}else{a=h+a}i+=2;if(i>=26){i-=26;s--}}if(o!==0){a=o.toString(16)+a}while(a.length%r!==0){a="0"+a}if(this.negative!==0){a="-"+a}return a}if(t===(t|0)&&t>=2&&t<=36){var d=f[t];var v=c[t];a="";var p=this.clone();p.negative=0;while(!p.isZero()){var g=p.modn(v).toString(t);p=p.idivn(v);if(!p.isZero()){a=u[d-g.length]+g+a}else{a=g+a}}if(this.isZero()){a="0"+a}while(a.length%r!==0){a="0"+a}if(this.negative!==0){a="-"+a}return a}n(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){n(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16)};i.prototype.toBuffer=function e(t,r){n(typeof o!=="undefined");return this.toArrayLike(o,t,r)};i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};i.prototype.toArrayLike=function e(t,r,a){var i=this.byteLength();var o=a||Math.max(1,i);n(i<=o,"byte array longer than desired length");n(o>0,"Requested array length <= 0");this.strip();var s=r==="le";var l=new t(o);var u,f;var c=this.clone();if(!s){for(f=0;f<o-i;f++){l[f]=0}for(f=0;!c.isZero();f++){u=c.andln(255);c.iushrn(8);l[o-f-1]=u}}else{for(f=0;!c.isZero();f++){u=c.andln(255);c.iushrn(8);l[f]=u}for(;f<o;f++){l[f]=0}}return l};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function h(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var a=r%26;t[r]=(e.words[n]&1<<a)>>>a}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this.strip()};i.prototype.ior=function e(t){n((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this.strip()};i.prototype.iand=function e(t){n((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var a=0;a<n.length;a++){this.words[a]=r.words[a]^n.words[a]}if(this!==r){for(;a<r.length;a++){this.words[a]=r.words[a]}}this.length=r.length;return this.strip()};i.prototype.ixor=function e(t){n((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){n(typeof t==="number"&&t>=0);var r=Math.ceil(t/26)|0;var a=t%26;this._expand(r);if(a>0){r--}for(var i=0;i<r;i++){this.words[i]=~this.words[i]&67108863}if(a>0){this.words[i]=~this.words[i]&67108863>>26-a}return this.strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,r){n(typeof t==="number"&&t>=0);var a=t/26|0;var i=t%26;this._expand(a+1);if(r){this.words[a]=this.words[a]|1<<i}else{this.words[a]=this.words[a]&~(1<<i)}return this.strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,a;if(this.length>t.length){n=this;a=t}else{n=t;a=this}var i=0;for(var o=0;o<a.length;o++){r=(n.words[o]|0)+(a.words[o]|0)+i;this.words[o]=r&67108863;i=r>>>26}for(;i!==0&&o<n.length;o++){r=(n.words[o]|0)+i;this.words[o]=r&67108863;i=r>>>26}this.length=n.length;if(i!==0){this.words[this.length]=i;this.length++}else if(n!==this){for(;o<n.length;o++){this.words[o]=n.words[o]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var a,i;if(n>0){a=this;i=t}else{a=t;i=this}var o=0;for(var s=0;s<i.length;s++){r=(a.words[s]|0)-(i.words[s]|0)+o;o=r>>26;this.words[s]=r&67108863}for(;o!==0&&s<a.length;s++){r=(a.words[s]|0)+o;o=r>>26;this.words[s]=r&67108863}if(o===0&&s<a.length&&a!==this){for(;s<a.length;s++){this.words[s]=a.words[s]}}this.length=Math.max(this.length,s);if(a!==this){this.negative=1}return this.strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var a=e.words[0]|0;var i=t.words[0]|0;var o=a*i;var s=o&67108863;var l=o/67108864|0;r.words[0]=s;for(var u=1;u<n;u++){var f=l>>>26;var c=l&67108863;var h=Math.min(u,t.length-1);for(var d=Math.max(0,u-e.length+1);d<=h;d++){var v=u-d|0;a=e.words[v]|0;i=t.words[d]|0;o=a*i+c;f+=o/67108864|0;c=o&67108863}r.words[u]=c|0;l=f|0}if(l!==0){r.words[u]=l|0}else{r.length--}return r.strip()}var v=function e(t,r,n){var a=t.words;var i=r.words;var o=n.words;var s=0;var l;var u;var f;var c=a[0]|0;var h=c&8191;var d=c>>>13;var v=a[1]|0;var p=v&8191;var g=v>>>13;var m=a[2]|0;var y=m&8191;var b=m>>>13;var x=a[3]|0;var _=x&8191;var w=x>>>13;var A=a[4]|0;var k=A&8191;var T=A>>>13;var M=a[5]|0;var E=M&8191;var C=M>>>13;var S=a[6]|0;var L=S&8191;var O=S>>>13;var I=a[7]|0;var D=I&8191;var R=I>>>13;var P=a[8]|0;var z=P&8191;var F=P>>>13;var B=a[9]|0;var N=B&8191;var j=B>>>13;var U=i[0]|0;var V=U&8191;var H=U>>>13;var q=i[1]|0;var G=q&8191;var X=q>>>13;var W=i[2]|0;var Y=W&8191;var Z=W>>>13;var J=i[3]|0;var Q=J&8191;var $=J>>>13;var K=i[4]|0;var ee=K&8191;var te=K>>>13;var re=i[5]|0;var ne=re&8191;var ae=re>>>13;var ie=i[6]|0;var oe=ie&8191;var se=ie>>>13;var le=i[7]|0;var ue=le&8191;var fe=le>>>13;var ce=i[8]|0;var he=ce&8191;var de=ce>>>13;var ve=i[9]|0;var pe=ve&8191;var ge=ve>>>13;n.negative=t.negative^r.negative;n.length=19;l=Math.imul(h,V);u=Math.imul(h,H);u=u+Math.imul(d,V)|0;f=Math.imul(d,H);var me=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(me>>>26)|0;me&=67108863;l=Math.imul(p,V);u=Math.imul(p,H);u=u+Math.imul(g,V)|0;f=Math.imul(g,H);l=l+Math.imul(h,G)|0;u=u+Math.imul(h,X)|0;u=u+Math.imul(d,G)|0;f=f+Math.imul(d,X)|0;var ye=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(ye>>>26)|0;ye&=67108863;l=Math.imul(y,V);u=Math.imul(y,H);u=u+Math.imul(b,V)|0;f=Math.imul(b,H);l=l+Math.imul(p,G)|0;u=u+Math.imul(p,X)|0;u=u+Math.imul(g,G)|0;f=f+Math.imul(g,X)|0;l=l+Math.imul(h,Y)|0;u=u+Math.imul(h,Z)|0;u=u+Math.imul(d,Y)|0;f=f+Math.imul(d,Z)|0;var be=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(be>>>26)|0;be&=67108863;l=Math.imul(_,V);u=Math.imul(_,H);u=u+Math.imul(w,V)|0;f=Math.imul(w,H);l=l+Math.imul(y,G)|0;u=u+Math.imul(y,X)|0;u=u+Math.imul(b,G)|0;f=f+Math.imul(b,X)|0;l=l+Math.imul(p,Y)|0;u=u+Math.imul(p,Z)|0;u=u+Math.imul(g,Y)|0;f=f+Math.imul(g,Z)|0;l=l+Math.imul(h,Q)|0;u=u+Math.imul(h,$)|0;u=u+Math.imul(d,Q)|0;f=f+Math.imul(d,$)|0;var xe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(xe>>>26)|0;xe&=67108863;l=Math.imul(k,V);u=Math.imul(k,H);u=u+Math.imul(T,V)|0;f=Math.imul(T,H);l=l+Math.imul(_,G)|0;u=u+Math.imul(_,X)|0;u=u+Math.imul(w,G)|0;f=f+Math.imul(w,X)|0;l=l+Math.imul(y,Y)|0;u=u+Math.imul(y,Z)|0;u=u+Math.imul(b,Y)|0;f=f+Math.imul(b,Z)|0;l=l+Math.imul(p,Q)|0;u=u+Math.imul(p,$)|0;u=u+Math.imul(g,Q)|0;f=f+Math.imul(g,$)|0;l=l+Math.imul(h,ee)|0;u=u+Math.imul(h,te)|0;u=u+Math.imul(d,ee)|0;f=f+Math.imul(d,te)|0;var _e=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(_e>>>26)|0;_e&=67108863;l=Math.imul(E,V);u=Math.imul(E,H);u=u+Math.imul(C,V)|0;f=Math.imul(C,H);l=l+Math.imul(k,G)|0;u=u+Math.imul(k,X)|0;u=u+Math.imul(T,G)|0;f=f+Math.imul(T,X)|0;l=l+Math.imul(_,Y)|0;u=u+Math.imul(_,Z)|0;u=u+Math.imul(w,Y)|0;f=f+Math.imul(w,Z)|0;l=l+Math.imul(y,Q)|0;u=u+Math.imul(y,$)|0;u=u+Math.imul(b,Q)|0;f=f+Math.imul(b,$)|0;l=l+Math.imul(p,ee)|0;u=u+Math.imul(p,te)|0;u=u+Math.imul(g,ee)|0;f=f+Math.imul(g,te)|0;l=l+Math.imul(h,ne)|0;u=u+Math.imul(h,ae)|0;u=u+Math.imul(d,ne)|0;f=f+Math.imul(d,ae)|0;var we=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(we>>>26)|0;we&=67108863;l=Math.imul(L,V);u=Math.imul(L,H);u=u+Math.imul(O,V)|0;f=Math.imul(O,H);l=l+Math.imul(E,G)|0;u=u+Math.imul(E,X)|0;u=u+Math.imul(C,G)|0;f=f+Math.imul(C,X)|0;l=l+Math.imul(k,Y)|0;u=u+Math.imul(k,Z)|0;u=u+Math.imul(T,Y)|0;f=f+Math.imul(T,Z)|0;l=l+Math.imul(_,Q)|0;u=u+Math.imul(_,$)|0;u=u+Math.imul(w,Q)|0;f=f+Math.imul(w,$)|0;l=l+Math.imul(y,ee)|0;u=u+Math.imul(y,te)|0;u=u+Math.imul(b,ee)|0;f=f+Math.imul(b,te)|0;l=l+Math.imul(p,ne)|0;u=u+Math.imul(p,ae)|0;u=u+Math.imul(g,ne)|0;f=f+Math.imul(g,ae)|0;l=l+Math.imul(h,oe)|0;u=u+Math.imul(h,se)|0;u=u+Math.imul(d,oe)|0;f=f+Math.imul(d,se)|0;var Ae=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;l=Math.imul(D,V);u=Math.imul(D,H);u=u+Math.imul(R,V)|0;f=Math.imul(R,H);l=l+Math.imul(L,G)|0;u=u+Math.imul(L,X)|0;u=u+Math.imul(O,G)|0;f=f+Math.imul(O,X)|0;l=l+Math.imul(E,Y)|0;u=u+Math.imul(E,Z)|0;u=u+Math.imul(C,Y)|0;f=f+Math.imul(C,Z)|0;l=l+Math.imul(k,Q)|0;u=u+Math.imul(k,$)|0;u=u+Math.imul(T,Q)|0;f=f+Math.imul(T,$)|0;l=l+Math.imul(_,ee)|0;u=u+Math.imul(_,te)|0;u=u+Math.imul(w,ee)|0;f=f+Math.imul(w,te)|0;l=l+Math.imul(y,ne)|0;u=u+Math.imul(y,ae)|0;u=u+Math.imul(b,ne)|0;f=f+Math.imul(b,ae)|0;l=l+Math.imul(p,oe)|0;u=u+Math.imul(p,se)|0;u=u+Math.imul(g,oe)|0;f=f+Math.imul(g,se)|0;l=l+Math.imul(h,ue)|0;u=u+Math.imul(h,fe)|0;u=u+Math.imul(d,ue)|0;f=f+Math.imul(d,fe)|0;var ke=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(ke>>>26)|0;ke&=67108863;l=Math.imul(z,V);u=Math.imul(z,H);u=u+Math.imul(F,V)|0;f=Math.imul(F,H);l=l+Math.imul(D,G)|0;u=u+Math.imul(D,X)|0;u=u+Math.imul(R,G)|0;f=f+Math.imul(R,X)|0;l=l+Math.imul(L,Y)|0;u=u+Math.imul(L,Z)|0;u=u+Math.imul(O,Y)|0;f=f+Math.imul(O,Z)|0;l=l+Math.imul(E,Q)|0;u=u+Math.imul(E,$)|0;u=u+Math.imul(C,Q)|0;f=f+Math.imul(C,$)|0;l=l+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;u=u+Math.imul(T,ee)|0;f=f+Math.imul(T,te)|0;l=l+Math.imul(_,ne)|0;u=u+Math.imul(_,ae)|0;u=u+Math.imul(w,ne)|0;f=f+Math.imul(w,ae)|0;l=l+Math.imul(y,oe)|0;u=u+Math.imul(y,se)|0;u=u+Math.imul(b,oe)|0;f=f+Math.imul(b,se)|0;l=l+Math.imul(p,ue)|0;u=u+Math.imul(p,fe)|0;u=u+Math.imul(g,ue)|0;f=f+Math.imul(g,fe)|0;l=l+Math.imul(h,he)|0;u=u+Math.imul(h,de)|0;u=u+Math.imul(d,he)|0;f=f+Math.imul(d,de)|0;var Te=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Te>>>26)|0;Te&=67108863;l=Math.imul(N,V);u=Math.imul(N,H);u=u+Math.imul(j,V)|0;f=Math.imul(j,H);l=l+Math.imul(z,G)|0;u=u+Math.imul(z,X)|0;u=u+Math.imul(F,G)|0;f=f+Math.imul(F,X)|0;l=l+Math.imul(D,Y)|0;u=u+Math.imul(D,Z)|0;u=u+Math.imul(R,Y)|0;f=f+Math.imul(R,Z)|0;l=l+Math.imul(L,Q)|0;u=u+Math.imul(L,$)|0;u=u+Math.imul(O,Q)|0;f=f+Math.imul(O,$)|0;l=l+Math.imul(E,ee)|0;u=u+Math.imul(E,te)|0;u=u+Math.imul(C,ee)|0;f=f+Math.imul(C,te)|0;l=l+Math.imul(k,ne)|0;u=u+Math.imul(k,ae)|0;u=u+Math.imul(T,ne)|0;f=f+Math.imul(T,ae)|0;l=l+Math.imul(_,oe)|0;u=u+Math.imul(_,se)|0;u=u+Math.imul(w,oe)|0;f=f+Math.imul(w,se)|0;l=l+Math.imul(y,ue)|0;u=u+Math.imul(y,fe)|0;u=u+Math.imul(b,ue)|0;f=f+Math.imul(b,fe)|0;l=l+Math.imul(p,he)|0;u=u+Math.imul(p,de)|0;u=u+Math.imul(g,he)|0;f=f+Math.imul(g,de)|0;l=l+Math.imul(h,pe)|0;u=u+Math.imul(h,ge)|0;u=u+Math.imul(d,pe)|0;f=f+Math.imul(d,ge)|0;var Me=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Me>>>26)|0;Me&=67108863;l=Math.imul(N,G);u=Math.imul(N,X);u=u+Math.imul(j,G)|0;f=Math.imul(j,X);l=l+Math.imul(z,Y)|0;u=u+Math.imul(z,Z)|0;u=u+Math.imul(F,Y)|0;f=f+Math.imul(F,Z)|0;l=l+Math.imul(D,Q)|0;u=u+Math.imul(D,$)|0;u=u+Math.imul(R,Q)|0;f=f+Math.imul(R,$)|0;l=l+Math.imul(L,ee)|0;u=u+Math.imul(L,te)|0;u=u+Math.imul(O,ee)|0;f=f+Math.imul(O,te)|0;l=l+Math.imul(E,ne)|0;u=u+Math.imul(E,ae)|0;u=u+Math.imul(C,ne)|0;f=f+Math.imul(C,ae)|0;l=l+Math.imul(k,oe)|0;u=u+Math.imul(k,se)|0;u=u+Math.imul(T,oe)|0;f=f+Math.imul(T,se)|0;l=l+Math.imul(_,ue)|0;u=u+Math.imul(_,fe)|0;u=u+Math.imul(w,ue)|0;f=f+Math.imul(w,fe)|0;l=l+Math.imul(y,he)|0;u=u+Math.imul(y,de)|0;u=u+Math.imul(b,he)|0;f=f+Math.imul(b,de)|0;l=l+Math.imul(p,pe)|0;u=u+Math.imul(p,ge)|0;u=u+Math.imul(g,pe)|0;f=f+Math.imul(g,ge)|0;var Ee=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;l=Math.imul(N,Y);u=Math.imul(N,Z);u=u+Math.imul(j,Y)|0;f=Math.imul(j,Z);l=l+Math.imul(z,Q)|0;u=u+Math.imul(z,$)|0;u=u+Math.imul(F,Q)|0;f=f+Math.imul(F,$)|0;l=l+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;u=u+Math.imul(R,ee)|0;f=f+Math.imul(R,te)|0;l=l+Math.imul(L,ne)|0;u=u+Math.imul(L,ae)|0;u=u+Math.imul(O,ne)|0;f=f+Math.imul(O,ae)|0;l=l+Math.imul(E,oe)|0;u=u+Math.imul(E,se)|0;u=u+Math.imul(C,oe)|0;f=f+Math.imul(C,se)|0;l=l+Math.imul(k,ue)|0;u=u+Math.imul(k,fe)|0;u=u+Math.imul(T,ue)|0;f=f+Math.imul(T,fe)|0;l=l+Math.imul(_,he)|0;u=u+Math.imul(_,de)|0;u=u+Math.imul(w,he)|0;f=f+Math.imul(w,de)|0;l=l+Math.imul(y,pe)|0;u=u+Math.imul(y,ge)|0;u=u+Math.imul(b,pe)|0;f=f+Math.imul(b,ge)|0;var Ce=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;l=Math.imul(N,Q);u=Math.imul(N,$);u=u+Math.imul(j,Q)|0;f=Math.imul(j,$);l=l+Math.imul(z,ee)|0;u=u+Math.imul(z,te)|0;u=u+Math.imul(F,ee)|0;f=f+Math.imul(F,te)|0;l=l+Math.imul(D,ne)|0;u=u+Math.imul(D,ae)|0;u=u+Math.imul(R,ne)|0;f=f+Math.imul(R,ae)|0;l=l+Math.imul(L,oe)|0;u=u+Math.imul(L,se)|0;u=u+Math.imul(O,oe)|0;f=f+Math.imul(O,se)|0;l=l+Math.imul(E,ue)|0;u=u+Math.imul(E,fe)|0;u=u+Math.imul(C,ue)|0;f=f+Math.imul(C,fe)|0;l=l+Math.imul(k,he)|0;u=u+Math.imul(k,de)|0;u=u+Math.imul(T,he)|0;f=f+Math.imul(T,de)|0;l=l+Math.imul(_,pe)|0;u=u+Math.imul(_,ge)|0;u=u+Math.imul(w,pe)|0;f=f+Math.imul(w,ge)|0;var Se=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Se>>>26)|0;Se&=67108863;l=Math.imul(N,ee);u=Math.imul(N,te);u=u+Math.imul(j,ee)|0;f=Math.imul(j,te);l=l+Math.imul(z,ne)|0;u=u+Math.imul(z,ae)|0;u=u+Math.imul(F,ne)|0;f=f+Math.imul(F,ae)|0;l=l+Math.imul(D,oe)|0;u=u+Math.imul(D,se)|0;u=u+Math.imul(R,oe)|0;f=f+Math.imul(R,se)|0;l=l+Math.imul(L,ue)|0;u=u+Math.imul(L,fe)|0;u=u+Math.imul(O,ue)|0;f=f+Math.imul(O,fe)|0;l=l+Math.imul(E,he)|0;u=u+Math.imul(E,de)|0;u=u+Math.imul(C,he)|0;f=f+Math.imul(C,de)|0;l=l+Math.imul(k,pe)|0;u=u+Math.imul(k,ge)|0;u=u+Math.imul(T,pe)|0;f=f+Math.imul(T,ge)|0;var Le=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Le>>>26)|0;Le&=67108863;l=Math.imul(N,ne);u=Math.imul(N,ae);u=u+Math.imul(j,ne)|0;f=Math.imul(j,ae);l=l+Math.imul(z,oe)|0;u=u+Math.imul(z,se)|0;u=u+Math.imul(F,oe)|0;f=f+Math.imul(F,se)|0;l=l+Math.imul(D,ue)|0;u=u+Math.imul(D,fe)|0;u=u+Math.imul(R,ue)|0;f=f+Math.imul(R,fe)|0;l=l+Math.imul(L,he)|0;u=u+Math.imul(L,de)|0;u=u+Math.imul(O,he)|0;f=f+Math.imul(O,de)|0;l=l+Math.imul(E,pe)|0;u=u+Math.imul(E,ge)|0;u=u+Math.imul(C,pe)|0;f=f+Math.imul(C,ge)|0;var Oe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;l=Math.imul(N,oe);u=Math.imul(N,se);u=u+Math.imul(j,oe)|0;f=Math.imul(j,se);l=l+Math.imul(z,ue)|0;u=u+Math.imul(z,fe)|0;u=u+Math.imul(F,ue)|0;f=f+Math.imul(F,fe)|0;l=l+Math.imul(D,he)|0;u=u+Math.imul(D,de)|0;u=u+Math.imul(R,he)|0;f=f+Math.imul(R,de)|0;l=l+Math.imul(L,pe)|0;u=u+Math.imul(L,ge)|0;u=u+Math.imul(O,pe)|0;f=f+Math.imul(O,ge)|0;var Ie=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;l=Math.imul(N,ue);u=Math.imul(N,fe);u=u+Math.imul(j,ue)|0;f=Math.imul(j,fe);l=l+Math.imul(z,he)|0;u=u+Math.imul(z,de)|0;u=u+Math.imul(F,he)|0;f=f+Math.imul(F,de)|0;l=l+Math.imul(D,pe)|0;u=u+Math.imul(D,ge)|0;u=u+Math.imul(R,pe)|0;f=f+Math.imul(R,ge)|0;var De=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(De>>>26)|0;De&=67108863;l=Math.imul(N,he);u=Math.imul(N,de);u=u+Math.imul(j,he)|0;f=Math.imul(j,de);l=l+Math.imul(z,pe)|0;u=u+Math.imul(z,ge)|0;u=u+Math.imul(F,pe)|0;f=f+Math.imul(F,ge)|0;var Re=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Re>>>26)|0;Re&=67108863;l=Math.imul(N,pe);u=Math.imul(N,ge);u=u+Math.imul(j,pe)|0;f=Math.imul(j,ge);var Pe=(s+l|0)+((u&8191)<<13)|0;s=(f+(u>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;o[0]=me;o[1]=ye;o[2]=be;o[3]=xe;o[4]=_e;o[5]=we;o[6]=Ae;o[7]=ke;o[8]=Te;o[9]=Me;o[10]=Ee;o[11]=Ce;o[12]=Se;o[13]=Le;o[14]=Oe;o[15]=Ie;o[16]=De;o[17]=Re;o[18]=Pe;if(s!==0){o[19]=s;n.length++}return n};if(!Math.imul){v=d}function p(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var a=0;for(var i=0;i<r.length-1;i++){var o=a;a=0;var s=n&67108863;var l=Math.min(i,t.length-1);for(var u=Math.max(0,i-e.length+1);u<=l;u++){var f=i-u;var c=e.words[f]|0;var h=t.words[u]|0;var d=c*h;var v=d&67108863;o=o+(d/67108864|0)|0;v=v+s|0;s=v&67108863;o=o+(v>>>26)|0;a+=o>>>26;o&=67108863}r.words[i]=s;n=o;o=a}if(n!==0){r.words[i]=n}else{r.length--}return r.strip()}function g(e,t,r){var n=new m;return n.mulp(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var a=this.length+t.length;if(this.length===10&&t.length===10){n=v(this,t,r)}else if(a<63){n=d(this,t,r)}else if(a<1024){n=p(this,t,r)}else{n=g(this,t,r)}return n};function m(e,t){this.x=e;this.y=t}m.prototype.makeRBT=function e(t){var r=new Array(t);var n=i.prototype._countBits(t)-1;for(var a=0;a<t;a++){r[a]=this.revBin(a,n,t)}return r};m.prototype.revBin=function e(t,r,n){if(t===0||t===n-1)return t;var a=0;for(var i=0;i<r;i++){a|=(t&1)<<r-i-1;t>>=1}return a};m.prototype.permute=function e(t,r,n,a,i,o){for(var s=0;s<o;s++){a[s]=r[t[s]];i[s]=n[t[s]]}};m.prototype.transform=function e(t,r,n,a,i,o){this.permute(o,t,r,n,a,i);for(var s=1;s<i;s<<=1){var l=s<<1;var u=Math.cos(2*Math.PI/l);var f=Math.sin(2*Math.PI/l);for(var c=0;c<i;c+=l){var h=u;var d=f;for(var v=0;v<s;v++){var p=n[c+v];var g=a[c+v];var m=n[c+v+s];var y=a[c+v+s];var b=h*m-d*y;y=h*y+d*m;m=b;n[c+v]=p+m;a[c+v]=g+y;n[c+v+s]=p-m;a[c+v+s]=g-y;if(v!==l){b=u*h-f*d;d=u*d+f*h;h=b}}}}};m.prototype.guessLen13b=function e(t,r){var n=Math.max(r,t)|1;var a=n&1;var i=0;for(n=n/2|0;n;n=n>>>1){i++}return 1<<i+1+a};m.prototype.conjugate=function e(t,r,n){if(n<=1)return;for(var a=0;a<n/2;a++){var i=t[a];t[a]=t[n-a-1];t[n-a-1]=i;i=r[a];r[a]=-r[n-a-1];r[n-a-1]=-i}};m.prototype.normalize13b=function e(t,r){var n=0;for(var a=0;a<r/2;a++){var i=Math.round(t[2*a+1]/r)*8192+Math.round(t[2*a]/r)+n;t[a]=i&67108863;if(i<67108864){n=0}else{n=i/67108864|0}}return t};m.prototype.convert13b=function e(t,r,a,i){var o=0;for(var s=0;s<r;s++){o=o+(t[s]|0);a[2*s]=o&8191;o=o>>>13;a[2*s+1]=o&8191;o=o>>>13}for(s=2*r;s<i;++s){a[s]=0}n(o===0);n((o&~8191)===0)};m.prototype.stub=function e(t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=0}return r};m.prototype.mulp=function e(t,r,n){var a=2*this.guessLen13b(t.length,r.length);var i=this.makeRBT(a);var o=this.stub(a);var s=new Array(a);var l=new Array(a);var u=new Array(a);var f=new Array(a);var c=new Array(a);var h=new Array(a);var d=n.words;d.length=a;this.convert13b(t.words,t.length,s,a);this.convert13b(r.words,r.length,f,a);this.transform(s,o,l,u,a,i);this.transform(f,o,c,h,a,i);for(var v=0;v<a;v++){var p=l[v]*c[v]-u[v]*h[v];u[v]=l[v]*h[v]+u[v]*c[v];l[v]=p}this.conjugate(l,u,a);this.transform(l,u,d,o,a,i);this.conjugate(d,o,a);this.normalize13b(d,a);n.negative=t.negative^r.negative;n.length=t.length+r.length;return n.strip()};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return g(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){n(typeof t==="number");n(t<67108864);var r=0;for(var a=0;a<this.length;a++){var i=(this.words[a]|0)*t;var o=(i&67108863)+(r&67108863);r>>=26;r+=i/67108864|0;r+=o>>>26;this.words[a]=o&67108863}if(r!==0){this.words[a]=r;this.length++}return this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=h(t);if(r.length===0)return new i(1);var n=this;for(var a=0;a<r.length;a++,n=n.sqr()){if(r[a]!==0)break}if(++a<r.length){for(var o=n.sqr();a<r.length;a++,o=o.sqr()){if(r[a]===0)continue;n=n.mul(o)}}return n};i.prototype.iushln=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;var i=67108863>>>26-r<<26-r;var o;if(r!==0){var s=0;for(o=0;o<this.length;o++){var l=this.words[o]&i;var u=(this.words[o]|0)-l<<r;this.words[o]=u|s;s=l>>>26-r}if(s){this.words[o]=s;this.length++}}if(a!==0){for(o=this.length-1;o>=0;o--){this.words[o+a]=this.words[o]}for(o=0;o<a;o++){this.words[o]=0}this.length+=a}return this.strip()};i.prototype.ishln=function e(t){n(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,r,a){n(typeof t==="number"&&t>=0);var i;if(r){i=(r-r%26)/26}else{i=0}var o=t%26;var s=Math.min((t-o)/26,this.length);var l=67108863^67108863>>>o<<o;var u=a;i-=s;i=Math.max(0,i);if(u){for(var f=0;f<s;f++){u.words[f]=this.words[f]}u.length=s}if(s===0){}else if(this.length>s){this.length-=s;for(f=0;f<this.length;f++){this.words[f]=this.words[f+s]}}else{this.words[0]=0;this.length=1}var c=0;for(f=this.length-1;f>=0&&(c!==0||f>=i);f--){var h=this.words[f]|0;this.words[f]=c<<26-o|h>>>o;c=h&l}if(u&&c!==0){u.words[u.length++]=c}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};i.prototype.ishrn=function e(t,r,a){n(this.negative===0);return this.iushrn(t,r,a)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;var i=1<<r;if(this.length<=a)return false;var o=this.words[a];return!!(o&i)};i.prototype.imaskn=function e(t){n(typeof t==="number"&&t>=0);var r=t%26;var a=(t-r)/26;n(this.negative===0,"imaskn works only with positive numbers");if(this.length<=a){return this}if(r!==0){a++}this.length=Math.min(a,this.length);if(r!==0){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){n(typeof t==="number");n(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){n(typeof t==="number");n(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var r=0;r<this.length&&this.words[r]<0;r++){this.words[r]+=67108864;this.words[r+1]-=1}}return this.strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,r,a){var i=t.length+a;var o;this._expand(i);var s;var l=0;for(o=0;o<t.length;o++){s=(this.words[o+a]|0)+l;var u=(t.words[o]|0)*r;s-=u&67108863;l=(s>>26)-(u/67108864|0);this.words[o+a]=s&67108863}for(;o<this.length-a;o++){s=(this.words[o+a]|0)+l;l=s>>26;this.words[o+a]=s&67108863}if(l===0)return this.strip();n(l===-1);l=0;for(o=0;o<this.length;o++){s=-(this.words[o]|0)+l;l=s>>26;this.words[o]=s&67108863}this.negative=1;return this.strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var a=this.clone();var o=t;var s=o.words[o.length-1]|0;var l=this._countBits(s);n=26-l;if(n!==0){o=o.ushln(n);a.iushln(n);s=o.words[o.length-1]|0}var u=a.length-o.length;var f;if(r!=="mod"){f=new i(null);f.length=u+1;f.words=new Array(f.length);for(var c=0;c<f.length;c++){f.words[c]=0}}var h=a.clone()._ishlnsubmul(o,1,u);if(h.negative===0){a=h;if(f){f.words[u]=1}}for(var d=u-1;d>=0;d--){var v=(a.words[o.length+d]|0)*67108864+(a.words[o.length+d-1]|0);v=Math.min(v/s|0,67108863);a._ishlnsubmul(o,v,d);while(a.negative!==0){v--;a.negative=0;a._ishlnsubmul(o,1,d);if(!a.isZero()){a.negative^=1}}if(f){f.words[d]=v}}if(f){f.strip()}a.strip();if(r!=="div"&&n!==0){a.iushrn(n)}return{div:f||null,mod:a}};i.prototype.divmod=function e(t,r,a){n(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var o,s,l;if(this.negative!==0&&t.negative===0){l=this.neg().divmod(t,r);if(r!=="mod"){o=l.div.neg()}if(r!=="div"){s=l.mod.neg();if(a&&s.negative!==0){s.iadd(t)}}return{div:o,mod:s}}if(this.negative===0&&t.negative!==0){l=this.divmod(t.neg(),r);if(r!=="mod"){o=l.div.neg()}return{div:o,mod:l.mod}}if((this.negative&t.negative)!==0){l=this.neg().divmod(t.neg(),r);if(r!=="div"){s=l.mod.neg();if(a&&s.negative!==0){s.isub(t)}}return{div:l.div,mod:s}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(r==="div"){return{div:this.divn(t.words[0]),mod:null}}if(r==="mod"){return{div:null,mod:new i(this.modn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}}return this._wordDiv(t,r)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var a=t.ushrn(1);var i=t.andln(1);var o=n.cmp(a);if(o<0||i===1&&o===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modn=function e(t){n(t<=67108863);var r=(1<<26)%t;var a=0;for(var i=this.length-1;i>=0;i--){a=(r*a+(this.words[i]|0))%t}return a};i.prototype.idivn=function e(t){n(t<=67108863);var r=0;for(var a=this.length-1;a>=0;a--){var i=(this.words[a]|0)+r*67108864;this.words[a]=i/t|0;r=i%t}return this.strip()};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){n(t.negative===0);n(!t.isZero());var r=this;var a=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var o=new i(1);var s=new i(0);var l=new i(0);var u=new i(1);var f=0;while(r.isEven()&&a.isEven()){r.iushrn(1);a.iushrn(1);++f}var c=a.clone();var h=r.clone();while(!r.isZero()){for(var d=0,v=1;(r.words[0]&v)===0&&d<26;++d,v<<=1);if(d>0){r.iushrn(d);while(d-- >0){if(o.isOdd()||s.isOdd()){o.iadd(c);s.isub(h)}o.iushrn(1);s.iushrn(1)}}for(var p=0,g=1;(a.words[0]&g)===0&&p<26;++p,g<<=1);if(p>0){a.iushrn(p);while(p-- >0){if(l.isOdd()||u.isOdd()){l.iadd(c);u.isub(h)}l.iushrn(1);u.iushrn(1)}}if(r.cmp(a)>=0){r.isub(a);o.isub(l);s.isub(u)}else{a.isub(r);l.isub(o);u.isub(s)}}return{a:l,b:u,gcd:a.iushln(f)}};i.prototype._invmp=function e(t){n(t.negative===0);n(!t.isZero());var r=this;var a=t.clone();if(r.negative!==0){r=r.umod(t)}else{r=r.clone()}var o=new i(1);var s=new i(0);var l=a.clone();while(r.cmpn(1)>0&&a.cmpn(1)>0){for(var u=0,f=1;(r.words[0]&f)===0&&u<26;++u,f<<=1);if(u>0){r.iushrn(u);while(u-- >0){if(o.isOdd()){o.iadd(l)}o.iushrn(1)}}for(var c=0,h=1;(a.words[0]&h)===0&&c<26;++c,h<<=1);if(c>0){a.iushrn(c);while(c-- >0){if(s.isOdd()){s.iadd(l)}s.iushrn(1)}}if(r.cmp(a)>=0){r.isub(a);o.isub(s)}else{a.isub(r);s.isub(o)}}var d;if(r.cmpn(1)===0){d=o}else{d=s}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var a=0;r.isEven()&&n.isEven();a++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var i=r.cmp(n);if(i<0){var o=r;r=n;n=o}else if(i===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(a)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){n(typeof t==="number");var r=t%26;var a=(t-r)/26;var i=1<<r;if(this.length<=a){this._expand(a+1);this.words[a]|=i;return this}var o=i;for(var s=a;o!==0&&s<this.length;s++){var l=this.words[s]|0;l+=o;o=l>>>26;l&=67108863;this.words[s]=l}if(o!==0){this.words[s]=o;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var a;if(this.length>1){a=1}else{if(r){t=-t}n(t<=67108863,"Number is too big");var i=this.words[0]|0;a=i===t?0:i<t?-1:1}if(this.negative!==0)return-a|0;return a};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var a=this.words[n]|0;var i=t.words[n]|0;if(a===i)continue;if(a<i){r=-1}else if(a>i){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new k(t)};i.prototype.toRed=function e(t){n(!this.red,"Already a number in reduction context");n(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){n(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){n(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){n(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){n(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){n(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){n(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){n(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){n(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){n(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){n(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){n(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){n(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){n(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){n(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){n(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}b.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};b.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var a=n<this.n?-1:r.ucmp(this.p);if(a===0){r.words[0]=0;r.length=1}else if(a>0){r.isub(this.p)}else{r.strip()}return r};b.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};b.prototype.imulK=function e(t){return t.imul(this.k)};function x(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(x,b);x.prototype.split=function e(t,r){var n=4194303;var a=Math.min(t.length,9);for(var i=0;i<a;i++){r.words[i]=t.words[i]}r.length=a;if(t.length<=9){t.words[0]=0;t.length=1;return}var o=t.words[9];r.words[r.length++]=o&n;for(i=10;i<t.length;i++){var s=t.words[i]|0;t.words[i-10]=(s&n)<<4|o>>>22;o=s}o>>>=22;t.words[i-10]=o;if(o===0&&t.length>10){t.length-=10}else{t.length-=9}};x.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var a=t.words[n]|0;r+=a*977;t.words[n]=r&67108863;r=a*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(_,b);function w(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(w,b);function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(A,b);A.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var a=(t.words[n]|0)*19+r;var i=a&67108863;a>>>=26;t.words[n]=i;r=a}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(y[t])return y[t];var e;if(t==="k256"){e=new x}else if(t==="p224"){e=new _}else if(t==="p192"){e=new w}else if(t==="p25519"){e=new A}else{throw new Error("Unknown prime "+t)}y[t]=e;return e};function k(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{n(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}k.prototype._verify1=function e(t){n(t.negative===0,"red works only with positives");n(t.red,"red works only with red numbers")};k.prototype._verify2=function e(t,r){n((t.negative|r.negative)===0,"red works only with positives");n(t.red&&t.red===r.red,"red works only with red numbers")};k.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);return t.umod(this.m)._forceRed(this)};k.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};k.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};k.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};k.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};k.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};k.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};k.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};k.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};k.prototype.isqr=function e(t){return this.imul(t,t.clone())};k.prototype.sqr=function e(t){return this.mul(t,t)};k.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var r=this.m.andln(3);n(r%2===1);if(r===3){var a=this.m.add(new i(1)).iushrn(2);return this.pow(t,a)}var o=this.m.subn(1);var s=0;while(!o.isZero()&&o.andln(1)===0){s++;o.iushrn(1)}n(!o.isZero());var l=new i(1).toRed(this);var u=l.redNeg();var f=this.m.subn(1).iushrn(1);var c=this.m.bitLength();c=new i(2*c*c).toRed(this);while(this.pow(c,f).cmp(u)!==0){c.redIAdd(u)}var h=this.pow(c,o);var d=this.pow(t,o.addn(1).iushrn(1));var v=this.pow(t,o);var p=s;while(v.cmp(l)!==0){var g=v;for(var m=0;g.cmp(l)!==0;m++){g=g.redSqr()}n(m<p);var y=this.pow(h,new i(1).iushln(p-m-1));d=d.redMul(y);h=y.redSqr();v=v.redMul(h);p=m}return d};k.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};k.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var a=new Array(1<<n);a[0]=new i(1).toRed(this);a[1]=t;for(var o=2;o<a.length;o++){a[o]=this.mul(a[o-1],t)}var s=a[0];var l=0;var u=0;var f=r.bitLength()%26;if(f===0){f=26}for(o=r.length-1;o>=0;o--){var c=r.words[o];for(var h=f-1;h>=0;h--){var d=c>>h&1;if(s!==a[0]){s=this.sqr(s)}if(d===0&&l===0){u=0;continue}l<<=1;l|=d;u++;if(u!==n&&(o!==0||h!==0))continue;s=this.mul(s,a[l]);u=0;l=0}f=26}return s};k.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};k.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new T(t)};function T(e){k.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}a(T,k);T.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};T.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};T.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var a=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var i=n.isub(a).iushrn(this.shift);var o=i;if(i.cmp(this.m)>=0){o=i.isub(this.m)}else if(i.cmpn(0)<0){o=i.iadd(this.m)}return o._forceRed(this)};T.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var a=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var o=n.isub(a).iushrn(this.shift);var s=o;if(o.cmp(this.m)>=0){s=o.isub(this.m)}else if(o.cmpn(0)<0){s=o.iadd(this.m)}return s._forceRed(this)};T.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(typeof t==="undefined"||t,this)},{buffer:51}],44:[function(e,t,r){"use strict";t.exports=d;var n=e("typedarray-pool");var a=e("./lib/sweep");var i=e("./lib/intersect");function o(e,t){for(var r=0;r<e;++r){if(!(t[r]<=t[r+e])){return true}}return false}function s(e,t,r,n){var a=0;var i=0;for(var s=0,l=e.length;s<l;++s){var u=e[s];if(o(t,u)){continue}for(var f=0;f<2*t;++f){r[a++]=u[f]}n[i++]=s}return i}function l(e,t,r,o){var l=e.length;var u=t.length;if(l<=0||u<=0){return}var f=e[0].length>>>1;if(f<=0){return}var c;var h=n.mallocDouble(2*f*l);var d=n.mallocInt32(l);l=s(e,f,h,d);if(l>0){if(f===1&&o){a.init(l);c=a.sweepComplete(f,r,0,l,h,d,0,l,h,d)}else{var v=n.mallocDouble(2*f*u);var p=n.mallocInt32(u);u=s(t,f,v,p);if(u>0){a.init(l+u);if(f===1){c=a.sweepBipartite(f,r,0,l,h,d,0,u,v,p)}else{c=i(f,r,o,l,h,d,u,v,p)}n.free(v);n.free(p)}}n.free(h);n.free(d)}return c}var u;function f(e,t){u.push([e,t])}function c(e){u=[];l(e,e,f,true);return u}function h(e,t){u=[];l(e,t,f,false);return u}function d(e,t,r){var n;switch(arguments.length){case 1:return c(e);case 2:if(typeof t==="function"){return l(e,e,t,true)}else{return h(e,t)}case 3:return l(e,t,r,false);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":46,"./lib/sweep":50,"typedarray-pool":291}],45:[function(e,t,r){"use strict";var n="d";var a="ax";var i="vv";var o="fp";var s="es";var l="rs";var u="re";var f="rb";var c="ri";var h="rp";var d="bs";var v="be";var p="bb";var g="bi";var m="bp";var y="rv";var b="Q";var x=[n,a,i,l,u,f,c,d,v,p,g];function _(e,t,r){var o="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(r?"Full":"");var _=["function ",o,"(",x.join(),"){","var ",s,"=2*",n,";"];var w="for(var i="+l+","+h+"="+s+"*"+l+";"+"i<"+u+";"+"++i,"+h+"+="+s+"){"+"var x0="+f+"["+a+"+"+h+"],"+"x1="+f+"["+a+"+"+h+"+"+n+"],"+"xi="+c+"[i];";var A="for(var j="+d+","+m+"="+s+"*"+d+";"+"j<"+v+";"+"++j,"+m+"+="+s+"){"+"var y0="+p+"["+a+"+"+m+"],"+(r?"y1="+p+"["+a+"+"+m+"+"+n+"],":"")+"yi="+g+"[j];";if(e){_.push(w,b,":",A)}else{_.push(A,b,":",w)}if(r){_.push("if(y1<x0||x1<y0)continue;")}else if(t){_.push("if(y0<=x0||x1<y0)continue;")}else{_.push("if(y0<x0||x1<y0)continue;")}_.push("for(var k="+a+"+1;k<"+n+";++k){"+"var r0="+f+"[k+"+h+"],"+"r1="+f+"[k+"+n+"+"+h+"],"+"b0="+p+"[k+"+m+"],"+"b1="+p+"[k+"+n+"+"+m+"];"+"if(r1<b0||b1<r0)continue "+b+";}"+"var "+y+"="+i+"(");if(t){_.push("yi,xi")}else{_.push("xi,yi")}_.push(");if("+y+"!==void 0)return "+y+";}}}");return{name:o,code:_.join("")}}function w(e){var t="bruteForce"+(e?"Full":"Partial");var r=[];var n=x.slice();if(!e){n.splice(3,0,o)}var a=["function "+t+"("+n.join()+"){"];function i(t,n){var i=_(t,n,e);r.push(i.code);a.push("return "+i.name+"("+x.join()+");")}a.push("if("+u+"-"+l+">"+v+"-"+d+"){");if(e){i(true,false);a.push("}else{");i(false,false)}else{a.push("if("+o+"){");i(true,true);a.push("}else{");i(true,false);a.push("}}else{if("+o+"){");i(false,true);a.push("}else{");i(false,false);a.push("}")}a.push("}}return "+t);var s=r.join("")+a.join("");var f=new Function(s);return f()}r.partial=w(false);r.full=w(true)},{}],46:[function(e,t,r){"use strict";t.exports=S;var n=e("typedarray-pool");var a=e("bit-twiddle");var i=e("./brute");var o=i.partial;var s=i.full;var l=e("./sweep");var u=e("./median");var f=e("./partition");var c=128;var h=1<<22;var d=1<<22;var v=f("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]);var p=f("lo===p0",["p0"]);var g=f("lo<p0",["p0"]);var m=f("hi<=p0",["p0"]);var y=f("lo<=p0&&p0<=hi",["p0"]);var b=f("lo<p0&&p0<=hi",["p0"]);var x=6;var _=2;var w=1024;var A=n.mallocInt32(w);var k=n.mallocDouble(w);function T(e,t){var r=8*a.log2(t+1)*(e+1)|0;var i=a.nextPow2(x*r);if(A.length<i){n.free(A);A=n.mallocInt32(i)}var o=a.nextPow2(_*r);if(k<o){n.free(k);k=n.mallocDouble(o)}}function M(e,t,r,n,a,i,o,s,l){var u=x*e;A[u]=t;A[u+1]=r;A[u+2]=n;A[u+3]=a;A[u+4]=i;A[u+5]=o;var f=_*e;k[f]=s;k[f+1]=l}function E(e,t,r,n,a,i,o,s,l,u,f){var c=2*e;var h=l*c;var d=u[h+t];e:for(var v=a,p=a*c;v<i;++v,p+=c){var g=o[p+t];var m=o[p+t+e];if(d<g||m<d){continue}if(n&&d===g){continue}var y=s[v];for(var b=t+1;b<e;++b){var g=o[p+b];var m=o[p+b+e];var x=u[h+b];var _=u[h+b+e];if(m<x||_<g){continue e}}var w;if(n){w=r(f,y)}else{w=r(y,f)}if(w!==void 0){return w}}}function C(e,t,r,n,a,i,o,s,l,u){var f=2*e;var c=s*f;var h=l[c+t];e:for(var d=n,v=n*f;d<a;++d,v+=f){var p=o[d];if(p===u){continue}var g=i[v+t];var m=i[v+t+e];if(h<g||m<h){continue}for(var y=t+1;y<e;++y){var g=i[v+y];var m=i[v+y+e];var b=l[c+y];var x=l[c+y+e];if(m<b||x<g){continue e}}var _=r(p,u);if(_!==void 0){return _}}}function S(e,t,r,n,a,i,f,w,S){T(e,n+f);var L=0;var O=2*e;var I;M(L++,0,0,n,0,f,r?16:0,-Infinity,Infinity);if(!r){M(L++,0,0,f,0,n,1,-Infinity,Infinity)}while(L>0){L-=1;var D=L*x;var R=A[D];var P=A[D+1];var z=A[D+2];var F=A[D+3];var B=A[D+4];var N=A[D+5];var j=L*_;var U=k[j];var V=k[j+1];var H=N&1;var q=!!(N&16);var G=a;var X=i;var W=w;var Y=S;if(H){G=w;X=S;W=a;Y=i}if(N&2){z=g(e,R,P,z,G,X,V);if(P>=z){continue}}if(N&4){P=m(e,R,P,z,G,X,U);if(P>=z){continue}}var Z=z-P;var J=B-F;if(q){if(e*Z*(Z+J)<d){I=l.scanComplete(e,R,t,P,z,G,X,F,B,W,Y);if(I!==void 0){return I}continue}}else{if(e*Math.min(Z,J)<c){I=o(e,R,t,H,P,z,G,X,F,B,W,Y);if(I!==void 0){return I}continue}else if(e*Z*J<h){I=l.scanBipartite(e,R,t,H,P,z,G,X,F,B,W,Y);if(I!==void 0){return I}continue}}var Q=v(e,R,P,z,G,X,U,V);if(P<Q){if(e*(Q-P)<c){I=s(e,R+1,t,P,Q,G,X,F,B,W,Y);if(I!==void 0){return I}}else if(R===e-2){if(H){I=l.sweepBipartite(e,t,F,B,W,Y,P,Q,G,X)}else{I=l.sweepBipartite(e,t,P,Q,G,X,F,B,W,Y)}if(I!==void 0){return I}}else{M(L++,R+1,P,Q,F,B,H,-Infinity,Infinity);M(L++,R+1,F,B,P,Q,H^1,-Infinity,Infinity)}}if(Q<z){var $=u(e,R,F,B,W,Y);var K=W[O*$+R];var ee=p(e,R,$,B,W,Y,K);if(ee<B){M(L++,R,Q,z,ee,B,(H|4)+(q?16:0),K,V)}if(F<$){M(L++,R,Q,z,F,$,(H|2)+(q?16:0),U,K)}if($+1===ee){if(q){I=C(e,R,t,Q,z,G,X,$,W,Y[$])}else{I=E(e,R,t,H,Q,z,G,X,$,W,Y[$])}if(I!==void 0){return I}}else if($<ee){var te;if(q){te=y(e,R,Q,z,G,X,K);if(Q<te){var re=p(e,R,Q,te,G,X,K);if(R===e-2){if(Q<re){I=l.sweepComplete(e,t,Q,re,G,X,$,ee,W,Y);if(I!==void 0){return I}}if(re<te){I=l.sweepBipartite(e,t,re,te,G,X,$,ee,W,Y);if(I!==void 0){return I}}}else{if(Q<re){M(L++,R+1,Q,re,$,ee,16,-Infinity,Infinity)}if(re<te){M(L++,R+1,re,te,$,ee,0,-Infinity,Infinity);M(L++,R+1,$,ee,re,te,1,-Infinity,Infinity)}}}}else{if(H){te=b(e,R,Q,z,G,X,K)}else{te=y(e,R,Q,z,G,X,K)}if(Q<te){if(R===e-2){if(H){I=l.sweepBipartite(e,t,$,ee,W,Y,Q,te,G,X)}else{I=l.sweepBipartite(e,t,Q,te,G,X,$,ee,W,Y)}}else{M(L++,R+1,Q,te,$,ee,H,-Infinity,Infinity);M(L++,R+1,$,ee,Q,te,H^1,-Infinity,Infinity)}}}}}}}},{"./brute":45,"./median":47,"./partition":48,"./sweep":50,"bit-twiddle":41,"typedarray-pool":291}],47:[function(e,t,r){"use strict";t.exports=s;var n=e("./partition");var a=n("lo<p0",["p0"]);var i=8;function o(e,t,r,n,a,i){var o=2*e;var s=o*(r+1)+t;for(var l=r+1;l<n;++l,s+=o){var u=a[s];for(var f=l,c=o*(l-1);f>r&&a[c+t]>u;--f,c-=o){var h=c;var d=c+o;for(var v=0;v<o;++v,++h,++d){var p=a[h];a[h]=a[d];a[d]=p}var g=i[f];i[f]=i[f-1];i[f-1]=g}}}function s(e,t,r,n,s,l){if(n<=r+1){return r}var u=r;var f=n;var c=n+r>>>1;var h=2*e;var d=c;var v=s[h*c+t];while(u<f){if(f-u<i){o(e,t,u,f,s,l);v=s[h*c+t];break}var p=f-u;var g=Math.random()*p+u|0;var m=s[h*g+t];var y=Math.random()*p+u|0;var b=s[h*y+t];var x=Math.random()*p+u|0;var _=s[h*x+t];if(m<=b){if(_>=b){d=y;v=b}else if(m>=_){d=g;v=m}else{d=x;v=_}}else{if(b>=_){d=y;v=b}else if(_>=m){d=g;v=m}else{d=x;v=_}}var w=h*(f-1);var A=h*d;for(var k=0;k<h;++k,++w,++A){var T=s[w];s[w]=s[A];s[A]=T}var M=l[f-1];l[f-1]=l[d];l[d]=M;d=a(e,t,u,f-1,s,l,v);var w=h*(f-1);var A=h*d;for(var k=0;k<h;++k,++w,++A){var T=s[w];s[w]=s[A];s[A]=T}var M=l[f-1];l[f-1]=l[d];l[d]=M;if(c<d){f=d-1;while(u<f&&s[h*(f-1)+t]===v){f-=1}f+=1}else if(d<c){u=d+1;while(u<f&&s[h*u+t]===v){u+=1}}else{break}}return a(e,t,r,c,s,l,s[h*c+t])}},{"./partition":48}],48:[function(e,t,r){"use strict";t.exports=a;var n="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function a(e,t){var r="abcdef".split("").concat(t);var a=[];if(e.indexOf("lo")>=0){a.push("lo=e[k+n]")}if(e.indexOf("hi")>=0){a.push("hi=e[k+o]")}r.push(n.replace("_",a.join()).replace("$",e));return Function.apply(void 0,r)}},{}],49:[function(e,t,r){"use strict";t.exports=a;var n=32;function a(e,t){if(t<=4*n){i(0,t-1,e)}else{h(0,t-1,e)}}function i(e,t,r){var n=2*(e+1);for(var a=e+1;a<=t;++a){var i=r[n++];var o=r[n++];var s=a;var l=n-2;while(s-- >e){var u=r[l-2];var f=r[l-1];if(u<i){break}else if(u===i&&f<o){break}r[l]=u;r[l+1]=f;l-=2}r[l]=i;r[l+1]=o}}function o(e,t,r){e*=2;t*=2;var n=r[e];var a=r[e+1];r[e]=r[t];r[e+1]=r[t+1];r[t]=n;r[t+1]=a}function s(e,t,r){e*=2;t*=2;r[e]=r[t];r[e+1]=r[t+1]}function l(e,t,r,n){e*=2;t*=2;r*=2;var a=n[e];var i=n[e+1];n[e]=n[t];n[e+1]=n[t+1];n[t]=n[r];n[t+1]=n[r+1];n[r]=a;n[r+1]=i}function u(e,t,r,n,a){e*=2;t*=2;a[e]=a[t];a[t]=r;a[e+1]=a[t+1];a[t+1]=n}function f(e,t,r){e*=2;t*=2;var n=r[e],a=r[t];if(n<a){return false}else if(n===a){return r[e+1]>r[t+1]}return true}function c(e,t,r,n){e*=2;var a=n[e];if(a<t){return true}else if(a===t){return n[e+1]<r}return false}function h(e,t,r){var a=(t-e+1)/6|0,d=e+a,v=t-a,p=e+t>>1,g=p-a,m=p+a,y=d,b=g,x=p,_=m,w=v,A=e+1,k=t-1,T=0;if(f(y,b,r)){T=y;y=b;b=T}if(f(_,w,r)){T=_;_=w;w=T}if(f(y,x,r)){T=y;y=x;x=T}if(f(b,x,r)){T=b;b=x;x=T}if(f(y,_,r)){T=y;y=_;_=T}if(f(x,_,r)){T=x;x=_;_=T}if(f(b,w,r)){T=b;b=w;w=T}if(f(b,x,r)){T=b;b=x;x=T}if(f(_,w,r)){T=_;_=w;w=T}var M=r[2*b];var E=r[2*b+1];var C=r[2*_];var S=r[2*_+1];var L=2*y;var O=2*x;var I=2*w;var D=2*d;var R=2*p;var P=2*v;for(var z=0;z<2;++z){var F=r[L+z];var B=r[O+z];var N=r[I+z];r[D+z]=F;r[R+z]=B;r[P+z]=N}s(g,e,r);s(m,t,r);for(var j=A;j<=k;++j){if(c(j,M,E,r)){if(j!==A){o(j,A,r)}++A}else{if(!c(j,C,S,r)){while(true){if(!c(k,C,S,r)){if(--k<j){break}continue}else{if(c(k,M,E,r)){l(j,A,k,r);++A;--k}else{o(j,k,r);--k}break}}}}}u(e,A-1,M,E,r);u(t,k+1,C,S,r);if(A-2-e<=n){i(e,A-2,r)}else{h(e,A-2,r)}if(t-(k+2)<=n){i(k+2,t,r)}else{h(k+2,t,r)}if(k-A<=n){i(A,k,r)}else{h(A,k,r)}}},{}],50:[function(e,t,r){"use strict";t.exports={init:p,sweepBipartite:y,sweepComplete:b,scanBipartite:x,scanComplete:_};var n=e("typedarray-pool");var a=e("bit-twiddle");var i=e("./sort");var o=1<<28;var s=1024;var l=n.mallocInt32(s);var u=n.mallocInt32(s);var f=n.mallocInt32(s);var c=n.mallocInt32(s);var h=n.mallocInt32(s);var d=n.mallocInt32(s);var v=n.mallocDouble(s*8);function p(e){var t=a.nextPow2(e);if(l.length<t){n.free(l);l=n.mallocInt32(t)}if(u.length<t){n.free(u);u=n.mallocInt32(t)}if(f.length<t){n.free(f);f=n.mallocInt32(t)}if(c.length<t){n.free(c);c=n.mallocInt32(t)}if(h.length<t){n.free(h);h=n.mallocInt32(t)}if(d.length<t){n.free(d);d=n.mallocInt32(t)}var r=8*t;if(v.length<r){n.free(v);v=n.mallocDouble(r)}}function g(e,t,r,n){var a=t[n];var i=e[r-1];e[a]=i;t[i]=a}function m(e,t,r,n){e[r]=n;t[n]=r}function y(e,t,r,n,a,s,h,d,p,y){var b=0;var x=2*e;var _=e-1;var w=x-1;for(var A=r;A<n;++A){var k=s[A];var T=x*A;v[b++]=a[T+_];v[b++]=-(k+1);v[b++]=a[T+w];v[b++]=k}for(var A=h;A<d;++A){var k=y[A]+o;var M=x*A;v[b++]=p[M+_];v[b++]=-k;v[b++]=p[M+w];v[b++]=k}var E=b>>>1;i(v,E);var C=0;var S=0;for(var A=0;A<E;++A){var L=v[2*A+1]|0;if(L>=o){L=L-o|0;g(f,c,S--,L)}else if(L>=0){g(l,u,C--,L)}else if(L<=-o){L=-L-o|0;for(var O=0;O<C;++O){var I=t(l[O],L);if(I!==void 0){return I}}m(f,c,S++,L)}else{L=-L-1|0;for(var O=0;O<S;++O){var I=t(L,f[O]);if(I!==void 0){return I}}m(l,u,C++,L)}}}function b(e,t,r,n,a,o,s,p,y,b){var x=0;var _=2*e;var w=e-1;var A=_-1;for(var k=r;k<n;++k){var T=o[k]+1<<1;var M=_*k;v[x++]=a[M+w];v[x++]=-T;v[x++]=a[M+A];v[x++]=T}for(var k=s;k<p;++k){var T=b[k]+1<<1;var E=_*k;v[x++]=y[E+w];v[x++]=-T|1;v[x++]=y[E+A];v[x++]=T|1}var C=x>>>1;i(v,C);var S=0;var L=0;var O=0;for(var k=0;k<C;++k){var I=v[2*k+1]|0;var D=I&1;if(k<C-1&&I>>1===v[2*k+3]>>1){D=2;k+=1}if(I<0){var R=-(I>>1)-1;for(var P=0;P<O;++P){var z=t(h[P],R);if(z!==void 0){return z}}if(D!==0){for(var P=0;P<S;++P){var z=t(l[P],R);if(z!==void 0){return z}}}if(D!==1){for(var P=0;P<L;++P){var z=t(f[P],R);if(z!==void 0){return z}}}if(D===0){m(l,u,S++,R)}else if(D===1){m(f,c,L++,R)}else if(D===2){m(h,d,O++,R)}}else{var R=(I>>1)-1;if(D===0){g(l,u,S--,R)}else if(D===1){g(f,c,L--,R)}else if(D===2){g(h,d,O--,R)}}}}function x(e,t,r,n,a,s,f,c,h,d,p,y){var b=0;var x=2*e;var _=t;var w=t+e;var A=1;var k=1;if(n){k=o}else{A=o}for(var T=a;T<s;++T){var M=T+A;var E=x*T;v[b++]=f[E+_];v[b++]=-M;v[b++]=f[E+w];v[b++]=M}for(var T=h;T<d;++T){var M=T+k;var C=x*T;v[b++]=p[C+_];v[b++]=-M}var S=b>>>1;i(v,S);var L=0;for(var T=0;T<S;++T){var O=v[2*T+1]|0;if(O<0){var M=-O;var I=false;if(M>=o){I=!n;M-=o}else{I=!!n;M-=1}if(I){m(l,u,L++,M)}else{var D=y[M];var R=x*M;var P=p[R+t+1];var z=p[R+t+1+e];e:for(var F=0;F<L;++F){var B=l[F];var N=x*B;if(z<f[N+t+1]||f[N+t+1+e]<P){continue}for(var j=t+2;j<e;++j){if(p[R+j+e]<f[N+j]||f[N+j+e]<p[R+j]){continue e}}var U=c[B];var V;if(n){V=r(D,U)}else{V=r(U,D)}if(V!==void 0){return V}}}}else{g(l,u,L--,O-A)}}}function _(e,t,r,n,a,s,u,f,c,h,d){var p=0;var g=2*e;var m=t;var y=t+e;for(var b=n;b<a;++b){var x=b+o;var _=g*b;v[p++]=s[_+m];v[p++]=-x;v[p++]=s[_+y];v[p++]=x}for(var b=f;b<c;++b){var x=b+1;var w=g*b;v[p++]=h[w+m];v[p++]=-x}var A=p>>>1;i(v,A);var k=0;for(var b=0;b<A;++b){var T=v[2*b+1]|0;if(T<0){var x=-T;if(x>=o){l[k++]=x-o}else{x-=1;var M=d[x];var E=g*x;var C=h[E+t+1];var S=h[E+t+1+e];e:for(var L=0;L<k;++L){var O=l[L];var I=u[O];if(I===M){break}var D=g*O;if(S<s[D+t+1]||s[D+t+1+e]<C){continue}for(var R=t+2;R<e;++R){if(h[E+R+e]<s[D+R]||s[D+R+e]<h[E+R]){continue e}}var P=r(I,M);if(P!==void 0){return P}}}}else{var x=T-o;for(var L=k-1;L>=0;--L){if(l[L]===x){for(var R=L+1;R<k;++R){l[R-1]=l[R]}break}}--k}}}},{"./sort":49,"bit-twiddle":41,"typedarray-pool":291}],51:[function(e,t,r){},{}],52:[function(e,t,r){"use strict";var n=e("base64-js");var a=e("ieee754");r.Buffer=l;r.SlowBuffer=y;r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i;l.TYPED_ARRAY_SUPPORT=o();if(!l.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function o(){try{var e=new Uint8Array(1);e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return e.foo()===42}catch(e){return false}}Object.defineProperty(l.prototype,"parent",{get:function(){if(!(this instanceof l)){return undefined}return this.buffer}});Object.defineProperty(l.prototype,"offset",{get:function(){if(!(this instanceof l)){return undefined}return this.byteOffset}});function s(e){if(e>i){throw new RangeError("Invalid typed array length")}var t=new Uint8Array(e);t.__proto__=l.prototype;return t}function l(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return h(e)}return u(e,t,r)}if(typeof Symbol!=="undefined"&&Symbol.species&&l[Symbol.species]===l){Object.defineProperty(l,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}l.poolSize=8192;function u(e,t,r){if(typeof e==="number"){throw new TypeError('"value" argument must not be a number')}if(Q(e)||e&&Q(e.buffer)){return p(e,t,r)}if(typeof e==="string"){return d(e,t)}return g(e)}l.from=function(e,t,r){return u(e,t,r)};l.prototype.__proto__=Uint8Array.prototype;l.__proto__=Uint8Array;function f(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('"size" argument must not be negative')}}function c(e,t,r){f(e);if(e<=0){return s(e)}if(t!==undefined){return typeof r==="string"?s(e).fill(t,r):s(e).fill(t)}return s(e)}l.alloc=function(e,t,r){return c(e,t,r)};function h(e){f(e);return s(e<0?0:m(e)|0)}l.allocUnsafe=function(e){return h(e)};l.allocUnsafeSlow=function(e){return h(e)};function d(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!l.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}var r=b(e,t)|0;var n=s(r);var a=n.write(e,t);if(a!==r){n=n.slice(0,a)}return n}function v(e){var t=e.length<0?0:m(e.length)|0;var r=s(t);for(var n=0;n<t;n+=1){r[n]=e[n]&255}return r}function p(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}var n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}n.__proto__=l.prototype;return n}function g(e){if(l.isBuffer(e)){var t=m(e.length)|0;var r=s(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e){if(ArrayBuffer.isView(e)||"length"in e){if(typeof e.length!=="number"||$(e.length)){return s(0)}return v(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return v(e.data)}}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function m(e){if(e>=i){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+i.toString(16)+" bytes")}return e|0}function y(e){if(+e!=e){e=0}return l.alloc(+e)}l.isBuffer=function e(t){return t!=null&&t._isBuffer===true};l.compare=function e(t,r){if(!l.isBuffer(t)||!l.isBuffer(r)){throw new TypeError("Arguments must be Buffers")}if(t===r)return 0;var n=t.length;var a=r.length;for(var i=0,o=Math.min(n,a);i<o;++i){if(t[i]!==r[i]){n=t[i];a=r[i];break}}if(n<a)return-1;if(a<n)return 1;return 0};l.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};l.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return l.alloc(0)}var n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}var a=l.allocUnsafe(r);var i=0;for(n=0;n<t.length;++n){var o=t[n];if(ArrayBuffer.isView(o)){o=l.from(o)}if(!l.isBuffer(o)){throw new TypeError('"list" argument must be an Array of Buffers')}o.copy(a,i);i+=o.length}return a};function b(e,t){if(l.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||Q(e)){return e.byteLength}if(typeof e!=="string"){e=""+e}var r=e.length;if(r===0)return 0;var n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case undefined:return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Z(e).length;default:if(n)return X(e).length;t=(""+t).toLowerCase();n=true}}}l.byteLength=b;function x(e,t,r){var n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return z(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return L(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}l.prototype._isBuffer=true;function _(e,t,r){var n=e[t];e[t]=e[r];e[r]=n}l.prototype.swap16=function e(){var t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var r=0;r<t;r+=2){_(this,r,r+1)}return this};l.prototype.swap32=function e(){var t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var r=0;r<t;r+=4){_(this,r,r+3);_(this,r+1,r+2)}return this};l.prototype.swap64=function e(){var t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var r=0;r<t;r+=8){_(this,r,r+7);_(this,r+1,r+6);_(this,r+2,r+5);_(this,r+3,r+4)}return this};l.prototype.toString=function e(){var t=this.length;if(t===0)return"";if(arguments.length===0)return O(this,0,t);return x.apply(this,arguments)};l.prototype.toLocaleString=l.prototype.toString;l.prototype.equals=function e(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return l.compare(this,t)===0};l.prototype.inspect=function e(){var t="";var n=r.INSPECT_MAX_BYTES;if(this.length>0){t=this.toString("hex",0,n).match(/.{2}/g).join(" ");if(this.length>n)t+=" ... "}return"<Buffer "+t+">"};l.prototype.compare=function e(t,r,n,a,i){if(!l.isBuffer(t)){throw new TypeError("Argument must be a Buffer")}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(a===undefined){a=0}if(i===undefined){i=this.length}if(r<0||n>t.length||a<0||i>this.length){throw new RangeError("out of range index")}if(a>=i&&r>=n){return 0}if(a>=i){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;a>>>=0;i>>>=0;if(this===t)return 0;var o=i-a;var s=n-r;var u=Math.min(o,s);var f=this.slice(a,i);var c=t.slice(r,n);for(var h=0;h<u;++h){if(f[h]!==c[h]){o=f[h];s=c[h];break}}if(o<s)return-1;if(s<o)return 1;return 0};function w(e,t,r,n,a){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if($(r)){r=a?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(a)return-1;else r=e.length-1}else if(r<0){if(a)r=0;else return-1}if(typeof t==="string"){t=l.from(t,n)}if(l.isBuffer(t)){if(t.length===0){return-1}return A(e,t,r,n,a)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(a){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return A(e,[t],r,n,a)}throw new TypeError("val must be string, number or Buffer")}function A(e,t,r,n,a){var i=1;var o=e.length;var s=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}i=2;o/=2;s/=2;r/=2}}function l(e,t){if(i===1){return e[t]}else{return e.readUInt16BE(t*i)}}var u;if(a){var f=-1;for(u=r;u<o;u++){if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1)f=u;if(u-f+1===s)return f*i}else{if(f!==-1)u-=u-f;f=-1}}}else{if(r+s>o)r=o-s;for(u=r;u>=0;u--){var c=true;for(var h=0;h<s;h++){if(l(e,u+h)!==l(t,h)){c=false;break}}if(c)return u}}return-1}l.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};l.prototype.indexOf=function e(t,r,n){return w(this,t,r,n,true)};l.prototype.lastIndexOf=function e(t,r,n){return w(this,t,r,n,false)};function k(e,t,r,n){r=Number(r)||0;var a=e.length-r;if(!n){n=a}else{n=Number(n);if(n>a){n=a}}var i=t.length;if(n>i/2){n=i/2}for(var o=0;o<n;++o){var s=parseInt(t.substr(o*2,2),16);if($(s))return o;e[r+o]=s}return o}function T(e,t,r,n){return J(X(t,e.length-r),e,r,n)}function M(e,t,r,n){return J(W(t),e,r,n)}function E(e,t,r,n){return M(e,t,r,n)}function C(e,t,r,n){return J(Z(t),e,r,n)}function S(e,t,r,n){return J(Y(t,e.length-r),e,r,n)}l.prototype.write=function e(t,r,n,a){if(r===undefined){a="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){a=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(a===undefined)a="utf8"}else{a=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var i=this.length-r;if(n===undefined||n>i)n=i;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!a)a="utf8";var o=false;for(;;){switch(a){case"hex":return k(this,t,r,n);case"utf8":case"utf-8":return T(this,t,r,n);case"ascii":return M(this,t,r,n);case"latin1":case"binary":return E(this,t,r,n);case"base64":return C(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase();o=true}}};l.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(e,t,r){if(t===0&&r===e.length){return n.fromByteArray(e)}else{return n.fromByteArray(e.slice(t,r))}}function O(e,t,r){r=Math.min(e.length,r);var n=[];var a=t;while(a<r){var i=e[a];var o=null;var s=i>239?4:i>223?3:i>191?2:1;if(a+s<=r){var l,u,f,c;switch(s){case 1:if(i<128){o=i}break;case 2:l=e[a+1];if((l&192)===128){c=(i&31)<<6|l&63;if(c>127){o=c}}break;case 3:l=e[a+1];u=e[a+2];if((l&192)===128&&(u&192)===128){c=(i&15)<<12|(l&63)<<6|u&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:l=e[a+1];u=e[a+2];f=e[a+3];if((l&192)===128&&(u&192)===128&&(f&192)===128){c=(i&15)<<18|(l&63)<<12|(u&63)<<6|f&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;s=1}else if(o>65535){o-=65536;n.push(o>>>10&1023|55296);o=56320|o&1023}n.push(o);a+=s}return D(n)}var I=4096;function D(e){var t=e.length;if(t<=I){return String.fromCharCode.apply(String,e)}var r="";var n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=I))}return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a]&127)}return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a){n+=String.fromCharCode(e[a])}return n}function z(e,t,r){var n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;var a="";for(var i=t;i<r;++i){a+=G(e[i])}return a}function F(e,t,r){var n=e.slice(t,r);var a="";for(var i=0;i<n.length;i+=2){a+=String.fromCharCode(n[i]+n[i+1]*256)}return a}l.prototype.slice=function e(t,r){var n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;var a=this.subarray(t,r);a.__proto__=l.prototype;return a};function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}return a};l.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){B(t,r,this.length)}var a=this[t+--r];var i=1;while(r>0&&(i*=256)){a+=this[t+--r]*i}return a};l.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);return this[t]};l.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]|this[t+1]<<8};l.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]<<8|this[t+1]};l.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};l.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};l.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var a=this[t];var i=1;var o=0;while(++o<r&&(i*=256)){a+=this[t+o]*i}i*=128;if(a>=i)a-=Math.pow(2,8*r);return a};l.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);var a=r;var i=1;var o=this[t+--a];while(a>0&&(i*=256)){o+=this[t+--a]*i}i*=128;if(o>=i)o-=Math.pow(2,8*r);return o};l.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};l.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);var n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};l.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);var n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};l.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};l.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};l.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return a.read(this,t,true,23,4)};l.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return a.read(this,t,false,23,4)};l.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return a.read(this,t,true,52,8)};l.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return a.read(this,t,false,52,8)};function N(e,t,r,n,a,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;N(this,t,r,n,i,0)}var o=1;var s=0;this[r]=t&255;while(++s<n&&(o*=256)){this[r+s]=t/o&255}return r+n};l.prototype.writeUIntBE=function e(t,r,n,a){t=+t;r=r>>>0;n=n>>>0;if(!a){var i=Math.pow(2,8*n)-1;N(this,t,r,n,i,0)}var o=n-1;var s=1;this[r+o]=t&255;while(--o>=0&&(s*=256)){this[r+o]=t/s&255}return r+n};l.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,1,255,0);this[r]=t&255;return r+1};l.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};l.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};l.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};l.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};l.prototype.writeIntLE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);N(this,t,r,n,i-1,-i)}var o=0;var s=1;var l=0;this[r]=t&255;while(++o<n&&(s*=256)){if(t<0&&l===0&&this[r+o-1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};l.prototype.writeIntBE=function e(t,r,n,a){t=+t;r=r>>>0;if(!a){var i=Math.pow(2,8*n-1);N(this,t,r,n,i-1,-i)}var o=n-1;var s=1;var l=0;this[r+o]=t&255;while(--o>=0&&(s*=256)){if(t<0&&l===0&&this[r+o+1]!==0){l=1}this[r+o]=(t/s>>0)-l&255}return r+n};l.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};l.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};l.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};l.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};l.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)N(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function j(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,i){t=+t;r=r>>>0;if(!i){j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38)}a.write(e,t,r,n,23,4);return r+4}l.prototype.writeFloatLE=function e(t,r,n){return U(this,t,r,true,n)};l.prototype.writeFloatBE=function e(t,r,n){return U(this,t,r,false,n)};function V(e,t,r,n,i){t=+t;r=r>>>0;if(!i){j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308)}a.write(e,t,r,n,52,8);return r+8}l.prototype.writeDoubleLE=function e(t,r,n){return V(this,t,r,true,n)};l.prototype.writeDoubleBE=function e(t,r,n){return V(this,t,r,false,n)};l.prototype.copy=function e(t,r,n,a){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!a&&a!==0)a=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(a>0&&a<n)a=n;if(a===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");if(a>this.length)a=this.length;if(t.length-r<a-n){a=t.length-r+n}var i=a-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,a)}else if(this===t&&n<r&&r<a){for(var o=i-1;o>=0;--o){t[o+r]=this[o+n]}}else{Uint8Array.prototype.set.call(t,this.subarray(n,a),r)}return i};l.prototype.fill=function e(t,r,n,a){if(typeof t==="string"){if(typeof r==="string"){a=r;r=0;n=this.length}else if(typeof n==="string"){a=n;n=this.length}if(a!==undefined&&typeof a!=="string"){throw new TypeError("encoding must be a string")}if(typeof a==="string"&&!l.isEncoding(a)){throw new TypeError("Unknown encoding: "+a)}if(t.length===1){var i=t.charCodeAt(0);if(a==="utf8"&&i<128||a==="latin1"){t=i}}}else if(typeof t==="number"){t=t&255}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;var o;if(typeof t==="number"){for(o=r;o<n;++o){this[o]=t}}else{var s=l.isBuffer(t)?t:new l(t,a);var u=s.length;if(u===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(o=0;o<n-r;++o){this[o+r]=s[o%u]}}return this};var H=/[^+/0-9A-Za-z-_]/g;function q(e){e=e.split("=")[0];e=e.trim().replace(H,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function G(e){if(e<16)return"0"+e.toString(16);return e.toString(16)}function X(e,t){t=t||Infinity;var r;var n=e.length;var a=null;var i=[];for(var o=0;o<n;++o){r=e.charCodeAt(o);if(r>55295&&r<57344){if(!a){if(r>56319){if((t-=3)>-1)i.push(239,191,189);continue}else if(o+1===n){if((t-=3)>-1)i.push(239,191,189);continue}a=r;continue}if(r<56320){if((t-=3)>-1)i.push(239,191,189);a=r;continue}r=(a-55296<<10|r-56320)+65536}else if(a){if((t-=3)>-1)i.push(239,191,189)}a=null;if(r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return i}function W(e){var t=[];for(var r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function Y(e,t){var r,n,a;var i=[];for(var o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o);n=r>>8;a=r%256;i.push(a);i.push(n)}return i}function Z(e){return n.toByteArray(q(e))}function J(e,t,r,n){for(var a=0;a<n;++a){if(a+r>=t.length||a>=e.length)break;t[a+r]=e[a]}return a}function Q(e){return e instanceof ArrayBuffer||e!=null&&e.constructor!=null&&e.constructor.name==="ArrayBuffer"&&typeof e.byteLength==="number"}function $(e){return e!==e}},{"base64-js":23,ieee754:203}],53:[function(e,t,r){"use strict";var n=e("./lib/monotone");var a=e("./lib/triangulation");var i=e("./lib/delaunay");var o=e("./lib/filter");t.exports=c;function s(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function l(e,t){return e[0]-t[0]||e[1]-t[1]}function u(e){return e.map(s).sort(l)}function f(e,t,r){if(t in e){return e[t]}return r}function c(e,t,r){if(!Array.isArray(t)){r=t||{};t=[]}else{r=r||{};t=t||[]}var s=!!f(r,"delaunay",true);var l=!!f(r,"interior",true);var c=!!f(r,"exterior",true);var h=!!f(r,"infinity",false);if(!l&&!c||e.length===0){return[]}var d=n(e,t);if(s||l!==c||h){var v=a(e.length,u(t));for(var p=0;p<d.length;++p){var g=d[p];v.addTriangle(g[0],g[1],g[2])}if(s){i(e,v)}if(!c){return o(v,-1)}else if(!l){return o(v,1,h)}else if(h){return o(v,0,h)}else{return v.cells()}}else{return d}}},{"./lib/delaunay":54,"./lib/filter":55,"./lib/monotone":56,"./lib/triangulation":57}],54:[function(e,t,r){"use strict";var n=e("robust-in-sphere")[4];var a=e("binary-search-bounds");t.exports=o;function i(e,t,r,a,i,o){var s=t.opposite(a,i);if(s<0){return}if(i<a){var l=a;a=i;i=l;l=o;o=s;s=l}if(t.isConstraint(a,i)){return}if(n(e[a],e[i],e[o],e[s])<0){r.push(a,i)}}function o(e,t){var r=[];var a=e.length;var o=t.stars;for(var s=0;s<a;++s){var l=o[s];for(var u=1;u<l.length;u+=2){var f=l[u];if(f<s){continue}if(t.isConstraint(s,f)){continue}var c=l[u-1],h=-1;for(var d=1;d<l.length;d+=2){if(l[d-1]===f){h=l[d];break}}if(h<0){continue}if(n(e[s],e[f],e[c],e[h])<0){r.push(s,f)}}}while(r.length>0){var f=r.pop();var s=r.pop();var c=-1,h=-1;var l=o[s];for(var v=1;v<l.length;v+=2){var p=l[v-1];var g=l[v];if(p===f){h=g}else if(g===f){c=p}}if(c<0||h<0){continue}if(n(e[s],e[f],e[c],e[h])>=0){continue}t.flip(s,f);i(e,t,r,c,s,h);i(e,t,r,s,h,c);i(e,t,r,h,f,c);i(e,t,r,f,c,h)}}},{"binary-search-bounds":58,"robust-in-sphere":262}],55:[function(e,t,r){"use strict";var n=e("binary-search-bounds");t.exports=u;function a(e,t,r,n,a,i,o){this.cells=e;this.neighbor=t;this.flags=n;this.constraint=r;this.active=a;this.next=i;this.boundary=o}var i=a.prototype;function o(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}i.locate=function(){var e=[0,0,0];return function(t,r,a){var i=t,s=r,l=a;if(r<a){if(r<t){i=r;s=a;l=t}}else if(a<t){i=a;s=t;l=r}if(i<0){return-1}e[0]=i;e[1]=s;e[2]=l;return n.eq(this.cells,e,o)}}();function s(e,t){var r=e.cells();var n=r.length;for(var i=0;i<n;++i){var s=r[i];var l=s[0],u=s[1],f=s[2];if(u<f){if(u<l){s[0]=u;s[1]=f;s[2]=l}}else if(f<l){s[0]=f;s[1]=l;s[2]=u}}r.sort(o);var c=new Array(n);for(var i=0;i<c.length;++i){c[i]=0}var h=[];var d=[];var v=new Array(3*n);var p=new Array(3*n);var g=null;if(t){g=[]}var m=new a(r,v,p,c,h,d,g);for(var i=0;i<n;++i){var s=r[i];for(var y=0;y<3;++y){var l=s[y],u=s[(y+1)%3];var b=v[3*i+y]=m.locate(u,l,e.opposite(u,l));var x=p[3*i+y]=e.isConstraint(l,u);if(b<0){if(x){d.push(i)}else{h.push(i);c[i]=1}if(t){g.push([u,l,-1])}}}}return m}function l(e,t,r){var n=0;for(var a=0;a<e.length;++a){if(t[a]===r){e[n++]=e[a]}}e.length=n;return e}function u(e,t,r){var n=s(e,r);if(t===0){if(r){return n.cells.concat(n.boundary)}else{return n.cells}}var a=1;var i=n.active;var o=n.next;var u=n.flags;var f=n.cells;var c=n.constraint;var h=n.neighbor;while(i.length>0||o.length>0){while(i.length>0){var d=i.pop();if(u[d]===-a){continue}u[d]=a;var v=f[d];for(var p=0;p<3;++p){var g=h[3*d+p];if(g>=0&&u[g]===0){if(c[3*d+p]){o.push(g)}else{i.push(g);u[g]=a}}}}var m=o;o=i;i=m;o.length=0;a=-a}var y=l(f,u,t);if(r){return y.concat(n.boundary)}return y}},{"binary-search-bounds":58}],56:[function(e,t,r){"use strict";var n=e("binary-search-bounds");var a=e("robust-orientation")[3];var i=0;var o=1;var s=2;t.exports=g;function l(e,t,r,n,a){this.a=e;this.b=t;this.idx=r;this.lowerIds=n;this.upperIds=a}function u(e,t,r,n){this.a=e;this.b=t;this.type=r;this.idx=n}function f(e,t){var r=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;if(r){return r}if(e.type!==i){r=a(e.a,e.b,t.b);if(r){return r}}return e.idx-t.idx}function c(e,t){return a(e.a,e.b,t)}function h(e,t,r,i,o){var s=n.lt(t,i,c);var l=n.gt(t,i,c);for(var u=s;u<l;++u){var f=t[u];var h=f.lowerIds;var d=h.length;while(d>1&&a(r[h[d-2]],r[h[d-1]],i)>0){e.push([h[d-1],h[d-2],o]);d-=1}h.length=d;h.push(o);var v=f.upperIds;var d=v.length;while(d>1&&a(r[v[d-2]],r[v[d-1]],i)<0){e.push([v[d-2],v[d-1],o]);d-=1}v.length=d;v.push(o)}}function d(e,t){var r;if(e.a[0]<t.a[0]){r=a(e.a,e.b,t.a)}else{r=a(t.b,t.a,e.a)}if(r){return r}if(t.b[0]<e.b[0]){r=a(e.a,e.b,t.b)}else{r=a(t.b,t.a,e.b)}return r||e.idx-t.idx}function v(e,t,r){var a=n.le(e,r,d);var i=e[a];var o=i.upperIds;var s=o[o.length-1];i.upperIds=[s];e.splice(a+1,0,new l(r.a,r.b,r.idx,[s],o))}function p(e,t,r){var a=r.a;r.a=r.b;r.b=a;var i=n.eq(e,r,d);var o=e[i];var s=e[i-1];s.upperIds=o.upperIds;e.splice(i,1)}function g(e,t){var r=e.length;var n=t.length;var a=[];for(var c=0;c<r;++c){a.push(new u(e[c],null,i,c))}for(var c=0;c<n;++c){var d=t[c];var g=e[d[0]];var m=e[d[1]];if(g[0]<m[0]){a.push(new u(g,m,s,c),new u(m,g,o,c))}else if(g[0]>m[0]){a.push(new u(m,g,s,c),new u(g,m,o,c))}}a.sort(f);var y=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52);var b=[new l([y,1],[y,0],-1,[],[],[],[])];var x=[];for(var c=0,_=a.length;c<_;++c){var w=a[c];var A=w.type;if(A===i){h(x,b,e,w.a,w.idx)}else if(A===s){v(b,e,w)}else{p(b,e,w)}}return x}},{"binary-search-bounds":58,"robust-orientation":263}],57:[function(e,t,r){"use strict";var n=e("binary-search-bounds");t.exports=s;function a(e,t){this.stars=e;this.edges=t}var i=a.prototype;function o(e,t,r){for(var n=1,a=e.length;n<a;n+=2){if(e[n-1]===t&&e[n]===r){e[n-1]=e[a-2];e[n]=e[a-1];e.length=a-2;return}}}i.isConstraint=function(){var e=[0,0];function t(e,t){return e[0]-t[0]||e[1]-t[1]}return function(r,a){e[0]=Math.min(r,a);e[1]=Math.max(r,a);return n.eq(this.edges,e,t)>=0}}();i.removeTriangle=function(e,t,r){var n=this.stars;o(n[e],t,r);o(n[t],r,e);o(n[r],e,t)};i.addTriangle=function(e,t,r){var n=this.stars;n[e].push(t,r);n[t].push(r,e);n[r].push(e,t)};i.opposite=function(e,t){var r=this.stars[t];for(var n=1,a=r.length;n<a;n+=2){if(r[n]===e){return r[n-1]}}return-1};i.flip=function(e,t){var r=this.opposite(e,t);var n=this.opposite(t,e);this.removeTriangle(e,t,r);this.removeTriangle(t,e,n);this.addTriangle(e,n,r);this.addTriangle(t,r,n)};i.edges=function(){var e=this.stars;var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;i+=2){t.push([a[i],a[i+1]])}}return t};i.cells=function(){var e=this.stars;var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;i+=2){var s=a[i];var l=a[i+1];if(r<Math.min(s,l)){t.push([r,s,l])}}}return t};function s(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=[]}return new a(r,t)}},{"binary-search-bounds":58}],58:[function(e,t,r){"use strict";function n(e,t,r,n,a){var i=["function ",e,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];if(a){if(t.indexOf("c")<0){i.push(";if(x===y){return m}else if(x<=y){")}else{i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")}}else{i.push(";if(",t,"){i=m;")}if(r){i.push("l=m+1}else{h=m-1}")}else{i.push("h=m-1}else{l=m+1}")}i.push("}");if(a){i.push("return -1};")}else{i.push("return i};")}return i.join("")}function a(e,t,r,a){var i=new Function([n("A","x"+e+"y",t,["y"],a),n("P","c(x,y)"+e+"0",t,["y","c"],a),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""));return i()}t.exports={ge:a(">=",false,"GE"),gt:a(">",false,"GT"),lt:a("<",true,"LT"),le:a("<=",true,"LE"),eq:a("-",true,"EQ",true)}},{}],59:[function(e,t,r){t.exports=n;function n(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}},{}],60:[function(e,t,r){"use strict";t.exports=k;var n=e("union-find");var a=e("box-intersect");var i=e("robust-segment-intersect");var o=e("big-rat");var s=e("big-rat/cmp");var l=e("big-rat/to-float");var u=e("rat-vec");var f=e("nextafter");var c=e("./lib/rat-seg-intersect");function h(e){var t=l(e);return[f(t,-Infinity),f(t,Infinity)]}function d(e,t){var r=new Array(t.length);for(var n=0;n<t.length;++n){var a=t[n];var i=e[a[0]];var o=e[a[1]];r[n]=[f(Math.min(i[0],o[0]),-Infinity),f(Math.min(i[1],o[1]),-Infinity),f(Math.max(i[0],o[0]),Infinity),f(Math.max(i[1],o[1]),Infinity)]}return r}function v(e){var t=new Array(e.length);for(var r=0;r<e.length;++r){var n=e[r];t[r]=[f(n[0],-Infinity),f(n[1],-Infinity),f(n[0],Infinity),f(n[1],Infinity)]}return t}function p(e,t,r){var n=[];a(r,function(r,a){var o=t[r];var s=t[a];if(o[0]===s[0]||o[0]===s[1]||o[1]===s[0]||o[1]===s[1]){return}var l=e[o[0]];var u=e[o[1]];var f=e[s[0]];var c=e[s[1]];if(i(l,u,f,c)){n.push([r,a])}});return n}function g(e,t,r,n){var o=[];a(r,n,function(r,n){var a=t[r];if(a[0]===n||a[1]===n){return}var s=e[n];var l=e[a[0]];var u=e[a[1]];if(i(l,u,s,s)){o.push([r,n])}});return o}function m(e,t,r,n,a){var i,f;var h=e.map(function(e){return[o(e[0]),o(e[1])]});for(i=0;i<r.length;++i){var d=r[i];f=d[0];var v=d[1];var p=t[f];var g=t[v];var m=c(u(e[p[0]]),u(e[p[1]]),u(e[g[0]]),u(e[g[1]]));if(!m){continue}var y=e.length;e.push([l(m[0]),l(m[1])]);h.push(m);n.push([f,y],[v,y])}n.sort(function(e,t){if(e[0]!==t[0]){return e[0]-t[0]}var r=h[e[1]];var n=h[t[1]];return s(r[0],n[0])||s(r[1],n[1])});for(i=n.length-1;i>=0;--i){var b=n[i];f=b[0];var x=t[f];var _=x[0];var w=x[1];var A=e[_];var k=e[w];if((A[0]-k[0]||A[1]-k[1])<0){var T=_;_=w;w=T}x[0]=_;var M=x[1]=b[1];var E;if(a){E=x[2]}while(i>0&&n[i-1][0]===f){var b=n[--i];var C=b[1];if(a){t.push([M,C,E])}else{t.push([M,C])}M=C}if(a){t.push([M,w,E])}else{t.push([M,w])}}return h}function y(e,t,r){var i=t.length;var o=new n(i);var s=[];for(var l=0;l<t.length;++l){var u=t[l];var c=h(u[0]);var d=h(u[1]);s.push([f(c[0],-Infinity),f(d[0],-Infinity),f(c[1],Infinity),f(d[1],Infinity)])}a(s,function(e,t){o.link(e,t)});var v=true;var p=new Array(i);for(var l=0;l<i;++l){var g=o.find(l);if(g!==l){v=false;e[g]=[Math.min(e[l][0],e[g][0]),Math.min(e[l][1],e[g][1])]}}if(v){return null}var m=0;for(var l=0;l<i;++l){var g=o.find(l);if(g===l){p[l]=m;e[m++]=e[l]}else{p[l]=-1}}e.length=m;for(var l=0;l<i;++l){if(p[l]<0){p[l]=p[o.find(l)]}}return p}function b(e,t){return e[0]-t[0]||e[1]-t[1]}function x(e,t){var r=e[0]-t[0]||e[1]-t[1];if(r){return r}if(e[2]<t[2]){return-1}else if(e[2]>t[2]){return 1}return 0}function _(e,t,r){if(e.length===0){return}if(t){for(var n=0;n<e.length;++n){var a=e[n];var i=t[a[0]];var o=t[a[1]];a[0]=Math.min(i,o);a[1]=Math.max(i,o)}}else{for(var n=0;n<e.length;++n){var a=e[n];var i=a[0];var o=a[1];a[0]=Math.min(i,o);a[1]=Math.max(i,o)}}if(r){e.sort(x)}else{e.sort(b)}var s=1;for(var n=1;n<e.length;++n){var l=e[n-1];var u=e[n];if(u[0]===l[0]&&u[1]===l[1]&&(!r||u[2]===l[2])){continue}e[s++]=u}e.length=s}function w(e,t,r){var n=y(e,[],v(e));_(t,n,r);return!!n}function A(e,t,r){var n=d(e,t);var a=p(e,t,n);var i=v(e);var o=g(e,t,n,i);var s=m(e,t,a,o,r);var l=y(e,s,i);_(t,l,r);if(!l){return a.length>0||o.length>0}return true}function k(e,t,r){var n;if(r){n=t;var a=new Array(t.length);for(var i=0;i<t.length;++i){var o=t[i];a[i]=[o[0],o[1],r[i]]}t=a}var s=w(e,t,!!r);while(A(e,t,!!r)){s=true}if(!!r&&s){n.length=0;r.length=0;for(var i=0;i<t.length;++i){var o=t[i];n.push([o[0],o[1]]);r.push(o[2])}}return s}},{"./lib/rat-seg-intersect":61,"big-rat":27,"big-rat/cmp":25,"big-rat/to-float":39,"box-intersect":44,nextafter:221,"rat-vec":251,"robust-segment-intersect":266,"union-find":292}],61:[function(e,t,r){"use strict";t.exports=c;var n=e("big-rat/mul");var a=e("big-rat/div");var i=e("big-rat/sub");var o=e("big-rat/sign");var s=e("rat-vec/sub");var l=e("rat-vec/add");var u=e("rat-vec/muls");function f(e,t){return i(n(e[0],t[1]),n(e[1],t[0]))}function c(e,t,r,n){var i=s(t,e);var c=s(n,r);var h=f(i,c);if(o(h)===0){return null}var d=s(e,r);var v=f(c,d);var p=a(v,h);var g=u(i,p);var m=l(e,g);return m}},{"big-rat/div":26,"big-rat/mul":36,"big-rat/sign":37,"big-rat/sub":38,"rat-vec/add":250,"rat-vec/muls":252,"rat-vec/sub":253}],62:[function(e,t,r){"use strict";var n=e("clamp");t.exports=a;t.exports.to=a;t.exports.from=i;function a(e,t){if(t==null)t=true;var r=e[0],a=e[1],i=e[2],o=e[3];if(o==null)o=t?1:255;if(t){r*=255;a*=255;i*=255;o*=255}r=n(r,0,255)&255;a=n(a,0,255)&255;i=n(i,0,255)&255;o=n(o,0,255)&255;var s=r*16777216+(a<<16)+(i<<8)+o;return s}function i(e,t){e=+e;var r=e>>>24;var n=(e&16711680)>>>16;var a=(e&65280)>>>8;var i=e&255;if(t===false)return[r,n,a,i];return[r/255,n/255,a/255,i/255]}},{clamp:59}],63:[function(e,t,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],64:[function(e,t,r){"use strict";var n=e("color-rgba");var a=e("clamp");var i=e("dtype");t.exports=function e(t,r){if(r==="float"||!r)r="array";if(r==="uint")r="uint8";if(r==="uint_clamped")r="uint8_clamped";var o=i(r);var s=new o(4);if(t instanceof o){if(Array.isArray(t)){return t.slice()}s.set(t);return s}var e=r!=="uint8"&&r!=="uint8_clamped";if(t instanceof Uint8Array||t instanceof Uint8ClampedArray){s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]!=null?t[3]:255;if(e){s[0]/=255;s[1]/=255;s[2]/=255;s[3]/=255}return s}if(!t.length||typeof t==="string"){t=n(t);t[0]/=255;t[1]/=255;t[2]/=255}if(!e){s[0]=a(Math.round(t[0]*255),0,255);s[1]=a(Math.round(t[1]*255),0,255);s[2]=a(Math.round(t[2]*255),0,255);s[3]=t[3]==null?255:a(Math.floor(t[3]*255),0,255)}else{s[0]=t[0];s[1]=t[1];s[2]=t[2];s[3]=t[3]!=null?t[3]:1}return s}},{clamp:59,"color-rgba":66,dtype:91}],65:[function(e,t,r){(function(r){"use strict";var n=e("color-name");var a=e("is-plain-obj");var i=e("defined");t.exports=s;var o={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function s(e){var t,s=[],l=1,u;if(typeof e==="string"){if(n[e]){s=n[e].slice();u="rgb"}else if(e==="transparent"){l=0;u="rgb";s=[0,0,0]}else if(/^#[A-Fa-f0-9]+$/.test(e)){var f=e.slice(1);var c=f.length;var h=c<=4;l=1;if(h){s=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)];if(c===4){l=parseInt(f[3]+f[3],16)/255}}else{s=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)];if(c===8){l=parseInt(f[6]+f[7],16)/255}}if(!s[0])s[0]=0;if(!s[1])s[1]=0;if(!s[2])s[2]=0;u="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var d=t[1];var f=d.replace(/a$/,"");u=f;var c=f==="cmyk"?4:f==="gray"?1:3;s=t[2].trim().split(/\s*,\s*/).map(function(e,t){if(/%$/.test(e)){if(t===c)return parseFloat(e)/100;if(f==="rgb")return parseFloat(e)*255/100;return parseFloat(e)}else if(f[t]==="h"){if(/deg$/.test(e)){return parseFloat(e)}else if(o[e]!==undefined){return o[e]}}return parseFloat(e)});if(d===f)s.push(1);l=s[c]===undefined?1:s[c];s=s.slice(0,c)}else if(e.length>10&&/[0-9](?:\s|\/)/.test(e)){s=e.match(/([0-9]+)/g).map(function(e){return parseFloat(e)});u=e.match(/([a-z])/ig).join("").toLowerCase()}}else if(typeof e==="number"){u="rgb";s=[e>>>16,(e&65280)>>>8,e&255]}else if(a(e)){var v=i(e.r,e.red,e.R,null);if(v!==null){u="rgb";s=[v,i(e.g,e.green,e.G),i(e.b,e.blue,e.B)]}else{u="hsl";s=[i(e.h,e.hue,e.H),i(e.s,e.saturation,e.S),i(e.l,e.lightness,e.L,e.b,e.brightness)]}l=i(e.a,e.alpha,e.opacity,1);if(e.opacity!=null)l/=100}else if(Array.isArray(e)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){s=[e[0],e[1],e[2]];u="rgb";l=e.length===4?e[3]:1}return{space:u,values:s,alpha:l}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"color-name":63,defined:87,"is-plain-obj":211}],66:[function(e,t,r){"use strict";var n=e("color-parse");var a=e("color-space/hsl");var i=e("clamp");t.exports=function e(t){var r,o,s;if(typeof t!=="string")throw Error("Argument should be a string");var l=n(t);if(!l.space)return[];r=Array(3);r[0]=i(l.values[0],0,255);r[1]=i(l.values[1],0,255);r[2]=i(l.values[2],0,255);if(l.space[0]==="h"){r=a.rgb(r)}r.push(i(l.alpha,0,1));return r}},{clamp:59,"color-parse":65,"color-space/hsl":67}],67:[function(e,t,r){"use strict";var n=e("./rgb");t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a,i,o,s,l;if(r===0){l=n*255;return[l,l,l]}if(n<.5){i=n*(1+r)}else{i=n+r-n*r}a=2*n-i;s=[0,0,0];for(var u=0;u<3;u++){o=t+1/3*-(u-1);if(o<0){o++}else if(o>1){o--}if(6*o<1){l=a+(i-a)*6*o}else if(2*o<1){l=i}else if(3*o<2){l=a+(i-a)*(2/3-o)*6}else{l=a}s[u]=l*255}return s}};n.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=i-a,s,l,u;if(i===a){s=0}else if(t===i){s=(r-n)/o}else if(r===i){s=2+(n-t)/o}else if(n===i){s=4+(t-r)/o}s=Math.min(s*60,360);if(s<0){s+=360}u=(a+i)/2;if(i===a){l=0}else if(u<=.5){l=o/(i+a)}else{l=o/(2-i-a)}return[s,l*100,u*100]}},{"./rgb":68}],68:[function(e,t,r){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],69:[function(e,t,r){"use strict";t.exports=u;var n=e("robust-orientation");var a=e("signum");var i=e("two-sum");var o=e("robust-product");var s=e("robust-sum");function l(e,t,r){var n=i(e[0],-t[0]);var a=i(e[1],-t[1]);var l=i(r[0],-t[0]);var u=i(r[1],-t[1]);var f=s(o(n,l),o(a,u));return f[f.length-1]>=0}function u(e,t,r,i){var o=n(t,r,i);if(o===0){var s=a(n(e,t,r));var u=a(n(e,t,i));if(s===u){if(s===0){var f=l(e,t,r);var c=l(e,t,i);if(f===c){return 0}else if(f){return 1}else{return-1}}return 0}else if(u===0){if(s>0){return-1}else if(l(e,t,i)){return-1}else{return 1}}else if(s===0){if(u>0){return 1}else if(l(e,t,r)){return 1}else{return-1}}return a(u-s)}var h=n(e,t,r);if(h>0){if(o>0&&n(e,t,i)>0){return 1}return-1}else if(h<0){if(o>0||n(e,t,i)>0){return 1}return-1}else{var d=n(e,t,i);if(d>0){return 1}else{if(l(e,t,r)){return 1}else{return-1}}}}},{"robust-orientation":263,"robust-product":264,"robust-sum":268,signum:269,"two-sum":290}],70:[function(e,t,r){t.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],71:[function(e,t,r){t.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],72:[function(e,t,r){t.exports=["normal","italic","oblique"]},{}],73:[function(e,t,r){t.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],74:[function(e,t,r){"use strict";t.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":76,"./stringify":77}],75:[function(e,t,r){"use strict";var n=e("css-font-size-keywords");t.exports={isSize:function e(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||n.indexOf(t)!==-1}}},{"css-font-size-keywords":70}],76:[function(e,t,r){"use strict";var n=e("unquote");var a=e("css-global-keywords");var i=e("css-system-font-keywords");var o=e("css-font-weight-keywords");var s=e("css-font-style-keywords");var l=e("css-font-stretch-keywords");var u=e("string-split-by");var f=e("./lib/util").isSize;t.exports=h;var c=h.cache={};function h(e){if(typeof e!=="string")throw new Error("Font argument must be a string.");if(c[e])return c[e];if(e===""){throw new Error("Cannot parse an empty string.")}if(i.indexOf(e)!==-1){return c[e]={system:e}}var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]};var r=u(e,/\s+/);var h;while(h=r.shift()){if(a.indexOf(h)!==-1){["style","variant","weight","stretch"].forEach(function(e){t[e]=h});return c[e]=t}if(s.indexOf(h)!==-1){t.style=h;continue}if(h==="normal"||h==="small-caps"){t.variant=h;continue}if(l.indexOf(h)!==-1){t.stretch=h;continue}if(o.indexOf(h)!==-1){t.weight=h;continue}if(f(h)){var v=u(h,"/");t.size=v[0];if(v[1]!=null){t.lineHeight=d(v[1])}else if(r[0]==="/"){r.shift();t.lineHeight=d(r.shift())}if(!r.length){throw new Error("Missing required font-family.")}t.family=u(r.join(" "),/\s*,\s*/).map(n);return c[e]=t}throw new Error("Unknown or unsupported font token: "+h)}throw new Error("Missing required font-size.")}function d(e){var t=parseFloat(e);if(t.toString()===e){return t}return e}},{"./lib/util":75,"css-font-stretch-keywords":71,"css-font-style-keywords":72,"css-font-weight-keywords":73,"css-global-keywords":78,"css-system-font-keywords":79,"string-split-by":277,unquote:294}],77:[function(e,t,r){"use strict";var n=e("pick-by-alias");var a=e("./lib/util").isSize;var i=v(e("css-global-keywords"));var o=v(e("css-system-font-keywords"));var s=v(e("css-font-weight-keywords"));var l=v(e("css-font-style-keywords"));var u=v(e("css-font-stretch-keywords"));var f={normal:1,"small-caps":1};var c={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};var h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};t.exports=function e(t){t=n(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(t.system){if(t.system)d(t.system,o);return t.system}d(t.style,l);d(t.variant,f);d(t.weight,s);d(t.stretch,u);if(t.size==null)t.size=h.size;if(typeof t.size==="number")t.size+="px";if(!a)throw Error("Bad size value `"+t.size+"`");if(!t.family)t.family=h.family;if(Array.isArray(t.family)){if(!t.family.length)t.family=[h.family];t.family=t.family.map(function(e){return c[e]?e:'"'+e+'"'}).join(", ")}var r=[];r.push(t.style);if(t.variant!==t.style)r.push(t.variant);if(t.weight!==t.variant&&t.weight!==t.style)r.push(t.weight);if(t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style)r.push(t.stretch);r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""==="1"?"":"/"+t.lineHeight));r.push(t.family);return r.filter(Boolean).join(" ")};function d(e,t){if(e&&!t[e]&&!i[e])throw Error("Unknown keyword `"+e+"`");return e}function v(e){var t={};for(var r=0;r<e.length;r++){t[e[r]]=1}return t}},{"./lib/util":75,"css-font-stretch-keywords":71,"css-font-style-keywords":72,"css-font-weight-keywords":73,"css-global-keywords":78,"css-system-font-keywords":79,"pick-by-alias":232}],78:[function(e,t,r){t.exports=["inherit","initial","unset"]},{}],79:[function(e,t,r){t.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],80:[function(e,t,r){"use strict";var n=e("./lib/thunk.js");function a(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.pre=null;this.body=null;this.post=null;this.debug=false}function i(e){var t=new a;t.pre=e.pre;t.body=e.body;t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if(o==="array"||typeof o==="object"&&o.blockIndices){t.argTypes[i]="array";t.arrayArgs.push(i);t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0);t.shimArgs.push("array"+i);if(i<t.pre.args.length&&t.pre.args[i].count>0){throw new Error("cwise: pre() block may not reference array args")}if(i<t.post.args.length&&t.post.args[i].count>0){throw new Error("cwise: post() block may not reference array args")}}else if(o==="scalar"){t.scalarArgs.push(i);t.shimArgs.push("scalar"+i)}else if(o==="index"){t.indexArgs.push(i);if(i<t.pre.args.length&&t.pre.args[i].count>0){throw new Error("cwise: pre() block may not reference array index")}if(i<t.body.args.length&&t.body.args[i].lvalue){throw new Error("cwise: body() block may not write to array index")}if(i<t.post.args.length&&t.post.args[i].count>0){throw new Error("cwise: post() block may not reference array index")}}else if(o==="shape"){t.shapeArgs.push(i);if(i<t.pre.args.length&&t.pre.args[i].lvalue){throw new Error("cwise: pre() block may not write to array shape")}if(i<t.body.args.length&&t.body.args[i].lvalue){throw new Error("cwise: body() block may not write to array shape")}if(i<t.post.args.length&&t.post.args[i].lvalue){throw new Error("cwise: post() block may not write to array shape")}}else if(typeof o==="object"&&o.offset){t.argTypes[i]="offset";t.offsetArgs.push({array:o.array,offset:o.offset});t.offsetArgIndex.push(i)}else{throw new Error("cwise: Unknown argument type "+r[i])}}if(t.arrayArgs.length<=0){throw new Error("cwise: No array arguments specified")}if(t.pre.args.length>r.length){throw new Error("cwise: Too many arguments in pre() block")}if(t.body.args.length>r.length){throw new Error("cwise: Too many arguments in body() block")}if(t.post.args.length>r.length){throw new Error("cwise: Too many arguments in post() block")}t.debug=!!e.printCode||!!e.debug;t.funcName=e.funcName||"cwise";t.blockSize=e.blockSize||64;return n(t)}t.exports=i},{"./lib/thunk.js":82}],81:[function(e,t,r){"use strict";var n=e("uniq");function a(e,t,r){var n=e.length,a=t.arrayArgs.length,i=t.indexArgs.length>0,o=[],s=[],l=0,u=0,f,c;for(f=0;f<n;++f){s.push(["i",f,"=0"].join(""))}for(c=0;c<a;++c){for(f=0;f<n;++f){u=l;l=e[f];if(f===0){s.push(["d",c,"s",f,"=t",c,"p",l].join(""))}else{s.push(["d",c,"s",f,"=(t",c,"p",l,"-s",u,"*t",c,"p",u,")"].join(""))}}}if(s.length>0){o.push("var "+s.join(","))}for(f=n-1;f>=0;--f){l=e[f];o.push(["for(i",f,"=0;i",f,"<s",l,";++i",f,"){"].join(""))}o.push(r);for(f=0;f<n;++f){u=l;l=e[f];for(c=0;c<a;++c){o.push(["p",c,"+=d",c,"s",f].join(""))}if(i){if(f>0){o.push(["index[",u,"]-=s",u].join(""))}o.push(["++index[",l,"]"].join(""))}o.push("}")}return o.join("\n")}function i(e,t,r,n){var i=t.length,o=r.arrayArgs.length,s=r.blockSize,l=r.indexArgs.length>0,u=[];for(var f=0;f<o;++f){u.push(["var offset",f,"=p",f].join(""))}for(var f=e;f<i;++f){u.push(["for(var j"+f+"=SS[",t[f],"]|0;j",f,">0;){"].join(""));u.push(["if(j",f,"<",s,"){"].join(""));u.push(["s",t[f],"=j",f].join(""));u.push(["j",f,"=0"].join(""));u.push(["}else{s",t[f],"=",s].join(""));u.push(["j",f,"-=",s,"}"].join(""));if(l){u.push(["index[",t[f],"]=j",f].join(""))}}for(var f=0;f<o;++f){var c=["offset"+f];for(var h=e;h<i;++h){c.push(["j",h,"*t",f,"p",t[h]].join(""))}u.push(["p",f,"=(",c.join("+"),")"].join(""))}u.push(a(t,r,n));for(var f=e;f<i;++f){u.push("}")}return u.join("\n")}function o(e){var t=0,r=e[0].length;while(t<r){for(var n=1;n<e.length;++n){if(e[n][t]!==e[0][t]){return t}}++t}return t}function s(e,t,r){var n=e.body;var a=[];var i=[];for(var o=0;o<e.args.length;++o){var s=e.args[o];if(s.count<=0){continue}var l=new RegExp(s.name,"g");var u="";var f=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var c=t.offsetArgIndex.indexOf(o);var h=t.offsetArgs[c];f=h.array;u="+q"+c;case"array":u="p"+f+u;var d="l"+o;var v="a"+f;if(t.arrayBlockIndices[f]===0){if(s.count===1){if(r[f]==="generic"){if(s.lvalue){a.push(["var ",d,"=",v,".get(",u,")"].join(""));n=n.replace(l,d);i.push([v,".set(",u,",",d,")"].join(""))}else{n=n.replace(l,[v,".get(",u,")"].join(""))}}else{n=n.replace(l,[v,"[",u,"]"].join(""))}}else if(r[f]==="generic"){a.push(["var ",d,"=",v,".get(",u,")"].join(""));n=n.replace(l,d);if(s.lvalue){i.push([v,".set(",u,",",d,")"].join(""))}}else{a.push(["var ",d,"=",v,"[",u,"]"].join(""));n=n.replace(l,d);if(s.lvalue){i.push([v,"[",u,"]=",d].join(""))}}}else{var p=[s.name],g=[u];for(var m=0;m<Math.abs(t.arrayBlockIndices[f]);m++){p.push("\\s*\\[([^\\]]+)\\]");g.push("$"+(m+1)+"*t"+f+"b"+m)}l=new RegExp(p.join(""),"g");u=g.join("+");if(r[f]==="generic"){throw new Error("cwise: Generic arrays not supported in combination with blocks!")}else{n=n.replace(l,[v,"[",u,"]"].join(""))}}break;case"scalar":n=n.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}function l(e){var t=new Array(e.length);var r=true;for(var n=0;n<e.length;++n){var a=e[n];var i=a.match(/\d+/);if(!i){i=""}else{i=i[0]}if(a.charAt(0)===0){t[n]="u"+a.charAt(1)+i}else{t[n]=a.charAt(0)+i}if(n>0){r=r&&t[n]===t[n-1]}}if(r){return t[0]}return t.join("")}function u(e,t){var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0;var u=new Array(e.arrayArgs.length);var f=new Array(e.arrayArgs.length);for(var c=0;c<e.arrayArgs.length;++c){f[c]=t[2*c];u[c]=t[2*c+1]}var h=[],d=[];var v=[],p=[];var g=[];for(var c=0;c<e.arrayArgs.length;++c){if(e.arrayBlockIndices[c]<0){v.push(0);p.push(r);h.push(r);d.push(r+e.arrayBlockIndices[c])}else{v.push(e.arrayBlockIndices[c]);p.push(e.arrayBlockIndices[c]+r);h.push(0);d.push(e.arrayBlockIndices[c])}var m=[];for(var y=0;y<u[c].length;y++){if(v[c]<=u[c][y]&&u[c][y]<p[c]){m.push(u[c][y]-v[c])}}g.push(m)}var b=["SS"];var x=["'use strict'"];var _=[];for(var y=0;y<r;++y){_.push(["s",y,"=SS[",y,"]"].join(""))}for(var c=0;c<e.arrayArgs.length;++c){b.push("a"+c);b.push("t"+c);b.push("p"+c);for(var y=0;y<r;++y){_.push(["t",c,"p",y,"=t",c,"[",v[c]+y,"]"].join(""))}for(var y=0;y<Math.abs(e.arrayBlockIndices[c]);++y){_.push(["t",c,"b",y,"=t",c,"[",h[c]+y,"]"].join(""))}}for(var c=0;c<e.scalarArgs.length;++c){b.push("Y"+c)}if(e.shapeArgs.length>0){_.push("shape=SS.slice(0)")}if(e.indexArgs.length>0){var w=new Array(r);for(var c=0;c<r;++c){w[c]="0"}_.push(["index=[",w.join(","),"]"].join(""))}for(var c=0;c<e.offsetArgs.length;++c){var A=e.offsetArgs[c];var k=[];for(var y=0;y<A.offset.length;++y){if(A.offset[y]===0){continue}else if(A.offset[y]===1){k.push(["t",A.array,"p",y].join(""))}else{k.push([A.offset[y],"*t",A.array,"p",y].join(""))}}if(k.length===0){_.push("q"+c+"=0")}else{_.push(["q",c,"=",k.join("+")].join(""))}}var T=n([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));_=_.concat(T);if(_.length>0){x.push("var "+_.join(","))}for(var c=0;c<e.arrayArgs.length;++c){x.push("p"+c+"|=0")}if(e.pre.body.length>3){x.push(s(e.pre,e,f))}var M=s(e.body,e,f);var E=o(g);if(E<r){x.push(i(E,g[0],e,M))}else{x.push(a(g[0],e,M))}if(e.post.body.length>3){x.push(s(e.post,e,f))}if(e.debug){console.log("-----Generated cwise routine for ",t,":\n"+x.join("\n")+"\n----------")}var C=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",E,l(f)].join("");var S=new Function(["function ",C,"(",b.join(","),"){",x.join("\n"),"} return ",C].join(""));return S()}t.exports=u},{uniq:293}],82:[function(e,t,r){"use strict";var n=e("./compile.js");function a(e){var t=["'use strict'","var CACHED={}"];var r=[];var a=e.funcName+"_cwise_thunk";t.push(["return function ",a,"(",e.shimArgs.join(","),"){"].join(""));var i=[];var o=[];var s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")];var l=[],u=[];for(var f=0;f<e.arrayArgs.length;++f){var c=e.arrayArgs[f];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join(""));i.push("t"+c);i.push("r"+c);o.push("t"+c);o.push("r"+c+".join()");s.push("array"+c+".data");s.push("array"+c+".stride");s.push("array"+c+".offset|0");if(f>0){l.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[f])));u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[f])+"]")}}if(e.arrayArgs.length>1){t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')");t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {");t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')");t.push("}")}for(var f=0;f<e.scalarArgs.length;++f){s.push("scalar"+e.scalarArgs[f])}r.push(["type=[",o.join(","),"].join()"].join(""));r.push("proc=CACHED[type]");t.push("var "+r.join(","));t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join(""));if(e.debug){console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------")}var h=new Function("compile",t.join("\n"));return h(n.bind(undefined,e))}t.exports=a},{"./compile.js":81}],83:[function(e,t,r){t.exports=e("cwise-compiler")},{"cwise-compiler":80}],84:[function(e,t,r){"use strict";var n=e("es5-ext/object/copy"),a=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/valid-callable"),o=e("es5-ext/object/map"),s=e("es5-ext/object/valid-callable"),l=e("es5-ext/object/valid-value"),u=Function.prototype.bind,f=Object.defineProperty,c=Object.prototype.hasOwnProperty,h;h=function(e,t,r){var a=l(t)&&s(t.value),i;i=n(t);delete i.writable;delete i.value;i.get=function(){if(!r.overwriteDefinition&&c.call(this,e))return a;t.value=u.call(a,r.resolveContext?r.resolveContext(this):this);f(this,e,t);return this[e]};return i};t.exports=function(e){var t=a(arguments[1]);if(t.resolveContext!=null)i(t.resolveContext);return o(e,function(e,r){return h(r,e,t)})}},{"es5-ext/object/copy":111,"es5-ext/object/map":120,"es5-ext/object/normalize-options":121,"es5-ext/object/valid-callable":125,"es5-ext/object/valid-value":127}],85:[function(e,t,r){"use strict";var n=e("es5-ext/object/assign"),a=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/is-callable"),o=e("es5-ext/string/#/contains"),s;s=t.exports=function(e,t){var r,i,s,l,u;if(arguments.length<2||typeof e!=="string"){l=t;t=e;e=null}else{l=arguments[2]}if(e==null){r=s=true;i=false}else{r=o.call(e,"c");i=o.call(e,"e");s=o.call(e,"w")}u={value:t,configurable:r,enumerable:i,writable:s};return!l?u:n(a(l),u)};s.gs=function(e,t,r){var s,l,u,f;if(typeof e!=="string"){u=r;r=t;t=e;e=null}else{u=arguments[3]}if(t==null){t=undefined}else if(!i(t)){u=t;t=r=undefined}else if(r==null){r=undefined}else if(!i(r)){u=r;r=undefined}if(e==null){s=true;l=false}else{s=o.call(e,"c");l=o.call(e,"e")}f={get:t,set:r,configurable:s,enumerable:l};return!u?f:n(a(u),f)}},{"es5-ext/object/assign":108,"es5-ext/object/is-callable":114,"es5-ext/object/normalize-options":121,"es5-ext/string/#/contains":128}],86:[function(t,r,n){!function(){var t={version:"3.5.17"};var n=[].slice,a=function(e){return n.call(e)};var i=this.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function s(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i){try{a(i.documentElement.childNodes)[0].nodeType}catch(e){a=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(i){try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var l=this.Element.prototype,u=l.setAttribute,f=l.setAttributeNS,c=this.CSSStyleDeclaration.prototype,h=c.setProperty;l.setAttribute=function(e,t){u.call(this,e,t+"")};l.setAttributeNS=function(e,t,r){f.call(this,e,t,r+"")};c.setProperty=function(e,t,r){h.call(this,e,t+"",r)}}}t.ascending=d;function d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};t.min=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&a>i)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&a>i)a=i}return a};t.max=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&i>a)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>a)a=i}return a};t.extent=function(e,t){var r=-1,n=e.length,a,i,o;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=o=i;break}while(++r<n)if((i=e[r])!=null){if(a>i)a=i;if(o<i)o=i}}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=o=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null){if(a>i)a=i;if(o<i)o=i}}return[a,o]};function v(e){return e===null?NaN:+e}function p(e){return!isNaN(e)}t.sum=function(e,t){var r=0,n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(p(a=+e[i]))r+=a}else{while(++i<n)if(p(a=+t.call(e,e[i],i)))r+=a}return r};t.mean=function(e,t){var r=0,n=e.length,a,i=-1,o=n;if(arguments.length===1){while(++i<n)if(p(a=v(e[i])))r+=a;else--o}else{while(++i<n)if(p(a=v(t.call(e,e[i],i))))r+=a;else--o}if(o)return r/o};t.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),a=+e[n-1],i=r-n;return i?a+i*(e[n]-a):a};t.median=function(e,r){var n=[],a=e.length,i,o=-1;if(arguments.length===1){while(++o<a)if(p(i=v(e[o])))n.push(i)}else{while(++o<a)if(p(i=v(r.call(e,e[o],o))))n.push(i)}if(n.length)return t.quantile(n.sort(d),.5)};t.variance=function(e,t){var r=e.length,n=0,a,i,o=0,s=-1,l=0;if(arguments.length===1){while(++s<r){if(p(a=v(e[s]))){i=a-n;n+=i/++l;o+=i*(a-n)}}}else{while(++s<r){if(p(a=v(t.call(e,e[s],s)))){i=a-n;n+=i/++l;o+=i*(a-n)}}}if(l>1)return o/(l-1)};t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};function g(e){return{left:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)<0)n=i+1;else a=i}return n},right:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)>0)a=i;else n=i+1}return n}}}var m=g(d);t.bisectLeft=m.left;t.bisect=t.bisectRight=m.right;t.bisector=function(e){return g(e.length===1?function(t,r){return d(e(t),r)}:e)};t.shuffle=function(e,t,r){if((n=arguments.length)<3){r=e.length;if(n<2)t=0}var n=r-t,a,i;while(n){i=Math.random()*n--|0;a=e[n+t],e[n+t]=e[i+t],e[i+t]=a}return e};t.permute=function(e,t){var r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n};t.pairs=function(e){var t=0,r=e.length-1,n,a=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[n=a,a=e[++t]];return i};t.transpose=function(e){if(!(o=e.length))return[];for(var r=-1,n=t.min(e,y),a=new Array(n);++r<n;){for(var i=-1,o,s=a[r]=new Array(o);++i<o;){s[i]=e[i][r]}}return a};function y(e){return e.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(e){var t=[];for(var r in e)t.push(r);return t};t.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};t.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};t.merge=function(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i};var b=Math.abs;t.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var n=[],a=x(b(r)),i=-1,o;e*=a,t*=a,r*=a;if(r<0)while((o=e+r*++i)>t)n.push(o/a);else while((o=e+r*++i)<t)n.push(o/a);return n};function x(e){var t=1;while(e*t%1)t*=10;return t}function _(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}t.map=function(e,t){var r=new w;if(e instanceof w){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var n=-1,a=e.length,i;if(arguments.length===1)while(++n<a)r.set(n,e[n]);else while(++n<a)r.set(t.call(e,i=e[n],n),i)}else{for(var o in e)r.set(o,e[o])}return r};function w(){this._=Object.create(null)}var A="__proto__",k="\0";_(w,{has:E,get:function(e){return this._[T(e)]},set:function(e,t){return this._[T(e)]=t},remove:C,keys:S,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:M(t),value:this._[t]});return e},size:L,empty:O,forEach:function(e){for(var t in this._)e.call(this,M(t),this._[t])}});function T(e){return(e+="")===A||e[0]===k?k+e:e}function M(e){return(e+="")[0]===k?e.slice(1):e}function E(e){return T(e)in this._}function C(e){return(e=T(e))in this._&&delete this._[e]}function S(){var e=[];for(var t in this._)e.push(M(t));return e}function L(){var e=0;for(var t in this._)++e;return e}function O(){for(var e in this._)return false;return true}t.nest=function(){var e={},r=[],n=[],a,i;function o(t,n,s){if(s>=r.length)return i?i.call(e,n):a?n.sort(a):n;var l=-1,u=n.length,f=r[s++],c,h,d,v=new w,p;while(++l<u){if(p=v.get(c=f(h=n[l]))){p.push(h)}else{v.set(c,[h])}}if(t){h=t();d=function(e,r){h.set(e,o(t,r,s))}}else{h={};d=function(e,r){h[e]=o(t,r,s)}}v.forEach(d);return h}function s(e,t){if(t>=r.length)return e;var a=[],i=n[t++];e.forEach(function(e,r){a.push({key:e,values:s(r,t)})});return i?a.sort(function(e,t){return i(e.key,t.key)}):a}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(t.map,e,0),0)};e.key=function(t){r.push(t);return e};e.sortKeys=function(t){n[r.length-1]=t;return e};e.sortValues=function(t){a=t;return e};e.rollup=function(t){i=t;return e};return e};t.set=function(e){var t=new I;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t};function I(){this._=Object.create(null)}_(I,{has:E,add:function(e){this._[T(e+="")]=true;return e},remove:C,values:S,size:L,empty:O,forEach:function(e){for(var t in this._)e.call(this,M(t))}});t.behavior={};function D(e){return e}t.rebind=function(e,t){var r=1,n=arguments.length,a;while(++r<n)e[a=arguments[r]]=R(e,t,t[a]);return e};function R(e,t,r){return function(){var n=r.apply(t,arguments);return n===t?e:n}}function P(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=z.length;r<n;++r){var a=z[r]+t;if(a in e)return a}}var z=["webkit","ms","moz","Moz","o","O"];function F(){}t.dispatch=function(){var e=new B,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=N(e);return e};function B(){}B.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0){n=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function N(e){var t=[],r=new w;function n(){var r=t,n=-1,a=r.length,i;while(++n<a)if(i=r[n].on)i.apply(this,arguments);return e}n.on=function(n,a){var i=r.get(n),o;if(arguments.length<2)return i&&i.on;if(i){i.on=null;t=t.slice(0,o=t.indexOf(i)).concat(t.slice(o+1));r.remove(n)}if(a)t.push(r.set(n,{on:a}));return e};return n}t.event=null;function j(){t.event.preventDefault()}function U(){var e=t.event,r;while(r=e.sourceEvent)e=r;return e}function V(e){var r=new B,n=0,a=arguments.length;while(++n<a)r[arguments[n]]=N(r);r.of=function(n,a){return function(i){try{var o=i.sourceEvent=t.event;i.target=e;t.event=i;r[i.type].apply(n,a)}finally{t.event=o}}};return r}t.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var q={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function G(e){q(e,Z);return e}var X=function(e,t){return t.querySelector(e)},W=function(e,t){return t.querySelectorAll(e)},Y=function(e,t){var r=e.matches||e[P(e,"matchesSelector")];Y=function(e,t){return r.call(e,t)};return Y(e,t)};if(typeof Sizzle==="function"){X=function(e,t){return Sizzle(e,t)[0]||null};W=Sizzle;Y=Sizzle.matchesSelector}t.selection=function(){return t.select(i.documentElement)};var Z=t.selection.prototype=[];Z.select=function(e){var t=[],r,n,a,i;e=J(e);for(var o=-1,s=this.length;++o<s;){t.push(r=[]);r.parentNode=(a=this[o]).parentNode;for(var l=-1,u=a.length;++l<u;){if(i=a[l]){r.push(n=e.call(i,i.__data__,l,o));if(n&&"__data__"in i)n.__data__=i.__data__}else{r.push(null)}}}return G(t)};function J(e){return typeof e==="function"?e:function(){return X(e,this)}}Z.selectAll=function(e){var t=[],r,n;e=Q(e);for(var i=-1,o=this.length;++i<o;){for(var s=this[i],l=-1,u=s.length;++l<u;){if(n=s[l]){t.push(r=a(e.call(n,n.__data__,l,i)));r.parentNode=n}}}return G(t)};function Q(e){return typeof e==="function"?e:function(){return W(e,this)}}var $="http://www.w3.org/1999/xhtml";var K={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return K.hasOwnProperty(r)?{space:K[r],local:e}:e}};Z.attr=function(e,r){if(arguments.length<2){if(typeof e==="string"){var n=this.node();e=t.ns.qualify(e);return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(r in e)this.each(ee(r,e[r]));return this}return this.each(ee(e,r))};function ee(e,r){e=t.ns.qualify(e);function n(){this.removeAttribute(e)}function a(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,r)}function o(){this.setAttributeNS(e.space,e.local,r)}function s(){var t=r.apply(this,arguments);if(t==null)this.removeAttribute(e);else this.setAttribute(e,t)}function l(){var t=r.apply(this,arguments);if(t==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,t)}return r==null?e.local?a:n:typeof r==="function"?e.local?l:s:e.local?o:i}function te(e){return e.trim().replace(/\s+/g," ")}Z.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),n=(e=ne(e)).length,a=-1;if(t=r.classList){while(++a<n)if(!t.contains(e[a]))return false}else{t=r.getAttribute("class");while(++a<n)if(!re(e[a]).test(t))return false}return true}for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))};function re(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ne(e){return(e+"").trim().split(/^|\s+/)}function ae(e,t){e=ne(e).map(ie);var r=e.length;function n(){var n=-1;while(++n<r)e[n](this,t)}function a(){var n=-1,a=t.apply(this,arguments);while(++n<r)e[n](this,a)}return typeof t==="function"?a:n}function ie(e){var t=re(e);return function(r,n){if(a=r.classList)return n?a.add(e):a.remove(e);var a=r.getAttribute("class")||"";if(n){t.lastIndex=0;if(!t.test(a))r.setAttribute("class",te(a+" "+e))}else{r.setAttribute("class",te(a.replace(t," ")))}}}Z.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.each(oe(r,e[r],t));return this}if(n<2){var a=this.node();return s(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(oe(e,t,r))};function oe(e,t,r){function n(){this.style.removeProperty(e)}function a(){this.style.setProperty(e,t,r)}function i(){var n=t.apply(this,arguments);if(n==null)this.style.removeProperty(e);else this.style.setProperty(e,n,r)}return t==null?n:typeof t==="function"?i:a}Z.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))};function se(e,t){function r(){delete this[e]}function n(){this[e]=t}function a(){var r=t.apply(this,arguments);if(r==null)delete this[e];else this[e]=r}return t==null?r:typeof t==="function"?a:n}Z.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};Z.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};Z.append=function(e){e=le(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function le(e){function r(){var t=this.ownerDocument,r=this.namespaceURI;return r===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(r,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=t.ns.qualify(e)).local?n:r}Z.insert=function(e,t){e=le(e);t=J(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};Z.remove=function(){return this.each(ue)};function ue(){var e=this.parentNode;if(e)e.removeChild(this)}Z.data=function(e,t){var r=-1,n=this.length,a,i;if(!arguments.length){e=new Array(n=(a=this[0]).length);while(++r<n){if(i=a[r]){e[r]=i.__data__}}return e}function o(e,r){var n,a=e.length,i=r.length,o=Math.min(a,i),f=new Array(i),c=new Array(i),h=new Array(a),d,v;if(t){var p=new w,g=new Array(a),m;for(n=-1;++n<a;){if(d=e[n]){if(p.has(m=t.call(d,d.__data__,n))){h[n]=d}else{p.set(m,d)}g[n]=m}}for(n=-1;++n<i;){if(!(d=p.get(m=t.call(r,v=r[n],n)))){c[n]=fe(v)}else if(d!==true){f[n]=d;d.__data__=v}p.set(m,true)}for(n=-1;++n<a;){if(n in g&&p.get(g[n])!==true){h[n]=e[n]}}}else{for(n=-1;++n<o;){d=e[n];v=r[n];if(d){d.__data__=v;f[n]=d}else{c[n]=fe(v)}}for(;n<i;++n){c[n]=fe(r[n])}for(;n<a;++n){h[n]=e[n]}}c.update=f;c.parentNode=f.parentNode=h.parentNode=e.parentNode;s.push(c);l.push(f);u.push(h)}var s=ve([]),l=G([]),u=G([]);if(typeof e==="function"){while(++r<n){o(a=this[r],e.call(a,a.parentNode.__data__,r))}}else{while(++r<n){o(a=this[r],e)}}l.enter=function(){return s};l.exit=function(){return u};return l};function fe(e){return{__data__:e}}Z.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};Z.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return G(t)};function ce(e){return function(){return Y(this,e)}}Z.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],n=r.length-1,a=r[n],i;--n>=0;){if(i=r[n]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}}}return this};Z.sort=function(e){e=he.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function he(e){if(!arguments.length)e=d;return function(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}}Z.each=function(e){return de(this,function(t,r,n){e.call(t,t.__data__,r,n)})};function de(e,t){for(var r=0,n=e.length;r<n;r++){for(var a=e[r],i=0,o=a.length,s;i<o;i++){if(s=a[i])t(s,i,r)}}return e}Z.call=function(e){var t=a(arguments);e.apply(t[0]=this,t);return this};Z.empty=function(){return!this.node()};Z.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}}return null};Z.size=function(){var e=0;de(this,function(){++e});return e};function ve(e){q(e,pe);return e}var pe=[];t.selection.enter=ve;t.selection.enter.prototype=pe;pe.append=Z.append;pe.empty=Z.empty;pe.node=Z.node;pe.call=Z.call;pe.size=Z.size;pe.select=function(e){var t=[],r,n,a,i,o;for(var s=-1,l=this.length;++s<l;){a=(i=this[s]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,f=i.length;++u<f;){if(o=i[u]){r.push(a[u]=n=e.call(i.parentNode,o.__data__,u,s));n.__data__=o.__data__}else{r.push(null)}}}return G(t)};pe.insert=function(e,t){if(arguments.length<2)t=ge(this);return Z.insert.call(this,e,t)};function ge(e){var t,r;return function(n,a,i){var o=e[i].update,s=o.length,l;if(i!=r)r=i,t=0;if(a>=t)t=a+1;while(!(l=o[t])&&++t<s);return l}}t.select=function(e){var t;if(typeof e==="string"){t=[X(e,i)];t.parentNode=i.documentElement}else{t=[e];t.parentNode=o(e)}return G([t])};t.selectAll=function(e){var t;if(typeof e==="string"){t=a(W(e,i));t.parentNode=i.documentElement}else{t=a(e);t.parentNode=null}return G([t])};Z.on=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(r in e)this.each(me(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=false}return this.each(me(e,t,r))};function me(e,r,n){var i="__on"+e,o=e.indexOf("."),s=be;if(o>0)e=e.slice(0,o);var l=ye.get(e);if(l)e=l,s=xe;function u(){var t=this[i];if(t){this.removeEventListener(e,t,t.$);delete this[i]}}function f(){var t=s(r,a(arguments));u.call(this);this.addEventListener(e,this[i]=t,t.$=n);t._=r}function c(){var r=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),n;for(var a in this){if(n=a.match(r)){var i=this[a];this.removeEventListener(n[1],i,i.$);delete this[a]}}}return o?r?f:u:r?F:c}var ye=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(i){ye.forEach(function(e){if("on"+e in i)ye.remove(e)})}function be(e,r){return function(n){var a=t.event;t.event=n;r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=a}}}function xe(e,t){var r=be(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(n.compareDocumentPosition(t)&8)){r.call(t,e)}}}var _e,we=0;function Ae(e){var r=".dragsuppress-"+ ++we,n="click"+r,a=t.select(s(e)).on("touchmove"+r,j).on("dragstart"+r,j).on("selectstart"+r,j);if(_e==null){_e="onselectstart"in e?false:P(e.style,"userSelect")}if(_e){var i=o(e).style,l=i[_e];i[_e]="none"}return function(e){a.on(r,null);if(_e)i[_e]=l;if(e){var t=function(){a.on(n,null)};a.on(n,function(){j();t()},true);setTimeout(t,0)}}}t.mouse=function(e){return Te(e,U())};var ke=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Te(e,r){if(r.changedTouches)r=r.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();if(ke<0){var i=s(e);if(i.scrollX||i.scrollY){n=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();ke=!(o.f||o.e);n.remove()}}if(ke)a.x=r.pageX,a.y=r.pageY;else a.x=r.clientX,a.y=r.clientY;a=a.matrixTransform(e.getScreenCTM().inverse());return[a.x,a.y]}var l=e.getBoundingClientRect();return[r.clientX-l.left-e.clientLeft,r.clientY-l.top-e.clientTop]}t.touch=function(e,t,r){if(arguments.length<3)r=t,t=U().changedTouches;if(t)for(var n=0,a=t.length,i;n<a;++n){if((i=t[n]).identifier===r){return Te(e,i)}}};t.behavior.drag=function(){var e=V(i,"drag","dragstart","dragend"),r=null,n=o(F,t.mouse,s,"mousemove","mouseup"),a=o(Me,t.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",a)}function o(n,a,i,o,s){return function(){var l=this,u=t.event.target.correspondingElement||t.event.target,f=l.parentNode,c=e.of(l,arguments),h=0,d=n(),v=".drag"+(d==null?"":"-"+d),p,g=t.select(i(u)).on(o+v,b).on(s+v,x),m=Ae(u),y=a(f,d);if(r){p=r.apply(l,arguments);p=[p.x-y[0],p.y-y[1]]}else{p=[0,0]}c({type:"dragstart"});function b(){var e=a(f,d),t,r;if(!e)return;t=e[0]-y[0];r=e[1]-y[1];h|=t|r;y=e;c({type:"drag",x:e[0]+p[0],y:e[1]+p[1],dx:t,dy:r})}function x(){if(!a(f,d))return;g.on(o+v,null).on(s+v,null);m(h);c({type:"dragend"})}}}i.origin=function(e){if(!arguments.length)return r;r=e;return i};return t.rebind(i,e,"on")};function Me(){return t.event.changedTouches[0].identifier}t.touches=function(e,t){if(arguments.length<2)t=U().touches;return t?a(t).map(function(t){var r=Te(e,t);r.identifier=t.identifier;return r}):[]};var Ee=1e-6,Ce=Ee*Ee,Se=Math.PI,Le=2*Se,Oe=Le-Ee,Ie=Se/2,De=Se/180,Re=180/Se;function Pe(e){return e>0?1:e<0?-1:0}function ze(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Fe(e){return e>1?0:e<-1?Se:Math.acos(e)}function Be(e){return e>1?Ie:e<-1?-Ie:Math.asin(e)}function Ne(e){return((e=Math.exp(e))-1/e)/2}function je(e){return((e=Math.exp(e))+1/e)/2}function Ue(e){return((e=Math.exp(2*e))-1)/(e+1)}function Ve(e){return(e=Math.sin(e/2))*e}var He=Math.SQRT2,qe=2,Ge=4;t.interpolateZoom=function(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],s=t[2],l=i-r,u=o-n,f=l*l+u*u,c,h;if(f<Ce){h=Math.log(s/a)/He;c=function(e){return[r+e*l,n+e*u,a*Math.exp(He*e*h)]}}else{var d=Math.sqrt(f),v=(s*s-a*a+Ge*f)/(2*a*qe*d),p=(s*s-a*a-Ge*f)/(2*s*qe*d),g=Math.log(Math.sqrt(v*v+1)-v),m=Math.log(Math.sqrt(p*p+1)-p);h=(m-g)/He;c=function(e){var t=e*h,i=je(g),o=a/(qe*d)*(i*Ue(He*t+g)-Ne(g));return[r+o*l,n+o*u,a*i/je(He*t+g)]}}c.duration=h*1e3;return c};t.behavior.zoom=function(){var e={x:0,y:0,k:1},r,n,a,o=[960,500],l=Xe,u=250,f=0,c="mousedown.zoom",h="mousemove.zoom",d="mouseup.zoom",v,p="touchstart.zoom",g,m=V(w,"zoomstart","zoom","zoomend"),y,b,x,_;if(!Ye){Ye="onwheel"in i?(We=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(We=function(){return t.event.wheelDelta},"mousewheel"):(We=function(){return-t.event.detail},"MozMousePixelScroll")}function w(e){e.on(c,I).on(Ye+".zoom",R).on("dblclick.zoom",P).on(p,D)}w.event=function(r){r.each(function(){var r=m.of(this,arguments),a=e;if(Il){t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};S(r)}).tween("zoom:zoom",function(){var i=o[0],s=o[1],l=n?n[0]:i/2,u=n?n[1]:s/2,f=t.interpolateZoom([(l-e.x)/e.k,(u-e.y)/e.k,i/e.k],[(l-a.x)/a.k,(u-a.y)/a.k,i/a.k]);return function(t){var n=f(t),a=i/n[2];this.__chart__=e={x:l-n[0]*a,y:u-n[1]*a,k:a};L(r)}}).each("interrupt.zoom",function(){O(r)}).each("end.zoom",function(){O(r)})}else{this.__chart__=e;S(r);L(r);O(r)}})};w.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};C();return w};w.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};T(+t);C();return w};w.scaleExtent=function(e){if(!arguments.length)return l;l=e==null?Xe:[+e[0],+e[1]];return w};w.center=function(e){if(!arguments.length)return a;a=e&&[+e[0],+e[1]];return w};w.size=function(e){if(!arguments.length)return o;o=e&&[+e[0],+e[1]];return w};w.duration=function(e){if(!arguments.length)return u;u=+e;return w};w.x=function(t){if(!arguments.length)return b;b=t;y=t.copy();e={x:0,y:0,k:1};return w};w.y=function(t){if(!arguments.length)return _;_=t;x=t.copy();e={x:0,y:0,k:1};return w};function A(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function k(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function T(t){e.k=Math.max(l[0],Math.min(l[1],t))}function M(t,r){r=k(r);e.x+=t[0]-r[0];e.y+=t[1]-r[1]}function E(r,a,i,o){r.__chart__={x:e.x,y:e.y,k:e.k};T(Math.pow(2,o));M(n=a,i);r=t.select(r);if(u>0)r=r.transition().duration(u);r.call(w.event)}function C(){if(b)b.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert));if(_)_.domain(x.range().map(function(t){return(t-e.y)/e.k}).map(x.invert))}function S(e){if(!f++)e({type:"zoomstart"})}function L(t){C();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function O(e){if(!--f)e({type:"zoomend"}),n=null}function I(){var e=this,r=m.of(e,arguments),n=0,a=t.select(s(e)).on(h,l).on(d,u),i=A(t.mouse(e)),o=Ae(e);El.call(e);S(r);function l(){n=1;M(t.mouse(e),i);L(r)}function u(){a.on(h,null).on(d,null);o(n);O(r)}}function D(){var r=this,n=m.of(r,arguments),a={},i=0,o,s=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+s,u="touchend"+s,f=[],h=t.select(r),d=Ae(r);y();S(n);h.on(c,null).on(p,y);function v(){var n=t.touches(r);o=e.k;n.forEach(function(e){if(e.identifier in a)a[e.identifier]=A(e)});return n}function y(){var n=t.event.target;t.select(n).on(l,b).on(u,x);f.push(n);var o=t.event.changedTouches;for(var s=0,c=o.length;s<c;++s){a[o[s].identifier]=null}var h=v(),d=Date.now();if(h.length===1){if(d-g<500){var p=h[0];E(r,p,a[p.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);j()}g=d}else if(h.length>1){var p=h[0],m=h[1],y=p[0]-m[0],_=p[1]-m[1];i=y*y+_*_}}function b(){var e=t.touches(r),s,l,u,f;El.call(r);for(var c=0,h=e.length;c<h;++c,f=null){u=e[c];if(f=a[u.identifier]){if(l)break;s=u,l=f}}if(f){var d=(d=u[0]-s[0])*d+(d=u[1]-s[1])*d,v=i&&Math.sqrt(d/i);s=[(s[0]+u[0])/2,(s[1]+u[1])/2];l=[(l[0]+f[0])/2,(l[1]+f[1])/2];T(v*o)}g=null;M(s,l);L(n)}function x(){if(t.event.touches.length){var e=t.event.changedTouches;for(var r=0,i=e.length;r<i;++r){delete a[e[r].identifier]}for(var o in a){return void v()}}t.selectAll(f).on(s,null);h.on(c,I).on(p,D);d();O(n)}}function R(){var i=m.of(this,arguments);if(v)clearTimeout(v);else El.call(this),r=A(n=a||t.mouse(this)),S(i);v=setTimeout(function(){v=null;O(i)},50);j();T(Math.pow(2,We()*.002)*e.k);M(n,r);L(i)}function P(){var r=t.mouse(this),n=Math.log(e.k)/Math.LN2;E(this,r,A(r),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return t.rebind(w,m,"on")};var Xe=[0,Infinity],We,Ye;t.color=Ze;function Ze(){}Ze.prototype.toString=function(){return this.rgb()+""};t.hsl=Je;function Je(e,t,r){return this instanceof Je?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.s,e.l):yt(""+e,bt,Je):new Je(e,t,r)}var Qe=Je.prototype=new Ze;Qe.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Je(this.h,this.s,this.l/e)};Qe.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Je(this.h,this.s,e*this.l)};Qe.rgb=function(){return $e(this.h,this.s,this.l)};function $e(e,t,r){var n,a;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;a=r<=.5?r*(1+t):r+t-r*t;n=2*r-a;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(a-n)*e/60;if(e<180)return a;if(e<240)return n+(a-n)*(240-e)/60;return n}function o(e){return Math.round(i(e)*255)}return new dt(o(e+120),o(e),o(e-120))}t.hcl=Ke;function Ke(e,r,n){return this instanceof Ke?void(this.h=+e,this.c=+r,this.l=+n):arguments.length<2?e instanceof Ke?new Ke(e.h,e.c,e.l):e instanceof rt?ut(e.l,e.a,e.b):ut((e=xt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ke(e,r,n)}var et=Ke.prototype=new Ze;et.brighter=function(e){return new Ke(this.h,this.c,Math.min(100,this.l+nt*(arguments.length?e:1)))};et.darker=function(e){return new Ke(this.h,this.c,Math.max(0,this.l-nt*(arguments.length?e:1)))};et.rgb=function(){return tt(this.h,this.c,this.l).rgb()};function tt(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new rt(r,Math.cos(e*=De)*t,Math.sin(e)*t)}t.lab=rt;function rt(e,t,r){return this instanceof rt?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof rt?new rt(e.l,e.a,e.b):e instanceof Ke?tt(e.h,e.c,e.l):xt((e=dt(e)).r,e.g,e.b):new rt(e,t,r)}var nt=18;var at=.95047,it=1,ot=1.08883;var st=rt.prototype=new Ze;st.brighter=function(e){return new rt(Math.min(100,this.l+nt*(arguments.length?e:1)),this.a,this.b)};st.darker=function(e){return new rt(Math.max(0,this.l-nt*(arguments.length?e:1)),this.a,this.b)};st.rgb=function(){return lt(this.l,this.a,this.b)};function lt(e,t,r){var n=(e+16)/116,a=n+t/500,i=n-r/200;a=ft(a)*at;n=ft(n)*it;i=ft(i)*ot;return new dt(ht(3.2404542*a-1.5371385*n-.4985314*i),ht(-.969266*a+1.8760108*n+.041556*i),ht(.0556434*a-.2040259*n+1.0572252*i))}function ut(e,t,r){return e>0?new Ke(Math.atan2(r,t)*Re,Math.sqrt(t*t+r*r),e):new Ke(NaN,NaN,e)}function ft(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ht(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}t.rgb=dt;function dt(e,t,r){return this instanceof dt?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof dt?new dt(e.r,e.g,e.b):yt(""+e,dt,$e):new dt(e,t,r)}function vt(e){return new dt(e>>16,e>>8&255,e&255)}function pt(e){return vt(e)+""}var gt=dt.prototype=new Ze;gt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,a=30;if(!t&&!r&&!n)return new dt(a,a,a);if(t&&t<a)t=a;if(r&&r<a)r=a;if(n&&n<a)n=a;return new dt(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))};gt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new dt(e*this.r,e*this.g,e*this.b)};gt.hsl=function(){return bt(this.r,this.g,this.b)};gt.toString=function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)};function mt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function yt(e,t,r){var n=0,a=0,i=0,o,s,l;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(wt(s[0]),wt(s[1]),wt(s[2]))}}}if(l=At.get(e)){return t(l.r,l.g,l.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(l=parseInt(e.slice(1),16))){if(e.length===4){n=(l&3840)>>4;n=n>>4|n;a=l&240;a=a>>4|a;i=l&15;i=i<<4|i}else if(e.length===7){n=(l&16711680)>>16;a=(l&65280)>>8;i=l&255}}return t(n,a,i)}function bt(e,t,r){var n=Math.min(e/=255,t/=255,r/=255),a=Math.max(e,t,r),i=a-n,o,s,l=(a+n)/2;if(i){s=l<.5?i/(a+n):i/(2-a-n);if(e==a)o=(t-r)/i+(t<r?6:0);else if(t==a)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;s=l>0&&l<1?0:o}return new Je(o,s,l)}function xt(e,t,r){e=_t(e);t=_t(t);r=_t(r);var n=ct((.4124564*e+.3575761*t+.1804375*r)/at),a=ct((.2126729*e+.7151522*t+.072175*r)/it),i=ct((.0193339*e+.119192*t+.9503041*r)/ot);return rt(116*a-16,500*(n-a),200*(a-i))}function _t(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var At=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});At.forEach(function(e,t){At.set(e,vt(t))});function kt(e){return typeof e==="function"?e:function(){return e}}t.functor=kt;t.xhr=Tt(D);function Tt(e){return function(t,r,n){if(arguments.length===2&&typeof r==="function")n=r,r=null;return Mt(t,r,e,n)}}function Mt(e,r,n,i){var o={},s=t.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,f=null;if(this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(e))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=c:u.onreadystatechange=function(){u.readyState>3&&c()};function c(){var e=u.status,t;if(!e&&Ct(u)||e>=200&&e<300||e===304){try{t=n.call(o,u)}catch(e){s.error.call(o,e);return}s.load.call(o,t)}else{s.error.call(o,u)}}u.onprogress=function(e){var r=t.event;t.event=e;try{s.progress.call(o,u)}finally{t.event=r}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return l[e];if(t==null)delete l[e];else l[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return r;r=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return f;f=e;return o};o.response=function(e){n=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(a(arguments)))}});o.send=function(t,n,a){if(arguments.length===2&&typeof n==="function")a=n,n=null;u.open(t,e,true);if(r!=null&&!("accept"in l))l["accept"]=r+",*/*";if(u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);if(r!=null&&u.overrideMimeType)u.overrideMimeType(r);if(f!=null)u.responseType=f;if(a!=null)o.on("error",a).on("load",function(e){a(null,e)});s.beforesend.call(o,u);u.send(n==null?null:n);return o};o.abort=function(){u.abort();return o};t.rebind(o,s,"on");return i==null?o:o.get(Et(i))}function Et(e){return e.length===1?function(t,r){e(t==null?r:null)}:e}function Ct(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}t.dsv=function(e,t){var r=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function a(e,r,n){if(arguments.length<3)n=r,r=null;var a=Mt(e,t,r==null?i:o(r),n);a.row=function(e){return arguments.length?a.response((r=e)==null?i:o(e)):r};return a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}a.parse=function(e,t){var r;return a.parseRows(e,function(e,n){if(r)return r(e,n-1);var a=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,r){return t(a(e),r)}:a})};a.parseRows=function(e,t){var r={},a={},i=[],o=e.length,s=0,l=0,u,f;function c(){if(s>=o)return a;if(f)return f=false,r;var t=s;if(e.charCodeAt(t)===34){var i=t;while(i++<o){if(e.charCodeAt(i)===34){if(e.charCodeAt(i+1)!==34)break;++i}}s=i+2;var l=e.charCodeAt(i+1);if(l===13){f=true;if(e.charCodeAt(i+2)===10)++s}else if(l===10){f=true}return e.slice(t+1,i).replace(/""/g,'"')}while(s<o){var l=e.charCodeAt(s++),u=1;if(l===10)f=true;else if(l===13){f=true;if(e.charCodeAt(s)===10)++s,++u}else if(l!==n)continue;return e.slice(t,s-u)}return e.slice(t)}while((u=c())!==a){var h=[];while(u!==r&&u!==a){h.push(u);u=c()}if(t&&(h=t(h,l++))==null)continue;i.push(h)}return i};a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var r=new I,n=[];t.forEach(function(e){for(var t in e){if(!r.has(t)){n.push(r.add(t))}}});return[n.map(l).join(e)].concat(t.map(function(t){return n.map(function(e){return l(t[e])}).join(e)})).join("\n")};a.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(l).join(e)}function l(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var St,Lt,Ot,It,Dt=this[P(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){Rt.apply(this,arguments)};function Rt(e,t,r){var n=arguments.length;if(n<2)t=0;if(n<3)r=Date.now();var a=r+t,i={c:e,t:a,n:null};if(Lt)Lt.n=i;else St=i;Lt=i;if(!Ot){It=clearTimeout(It);Ot=1;Dt(Pt)}return i}function Pt(){var e=zt(),t=Ft()-e;if(t>24){if(isFinite(t)){clearTimeout(It);It=setTimeout(Pt,t)}Ot=0}else{Ot=1;Dt(Pt)}}t.timer.flush=function(){zt();Ft()};function zt(){var e=Date.now(),t=St;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Ft(){var e,t=St,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:St=t.n}}Lt=e;return r}function Bt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Nt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(jt);t.formatPrefix=function(e,r){var n=0;if(e=+e){if(e<0)e*=-1;if(r)e=t.round(e,Bt(e,r));n=1+Math.floor(1e-12+Math.log(e)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return Nt[8+n/3]};function jt(e,t){var r=Math.pow(10,b(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function Ut(e){var r=e.decimal,n=e.thousands,a=e.grouping,i=e.currency,o=a&&n?function(e,t){var r=e.length,i=[],o=0,s=a[0],l=0;while(r>0&&s>0){if(l+s+1>t)s=Math.max(1,t-l);i.push(e.substring(r-=s,r+s));if((l+=s+1)>t)break;s=a[o=(o+1)%a.length]}return i.reverse().join(n)}:D;return function(e){var n=Vt.exec(e),a=n[1]||" ",s=n[2]||">",l=n[3]||"-",u=n[4]||"",f=n[5],c=+n[6],h=n[7],d=n[8],v=n[9],p=1,g="",m="",y=false,b=true;if(d)d=+d.substring(1);if(f||a==="0"&&s==="="){f=a="0";s="="}switch(v){case"n":h=true;v="g";break;case"%":p=100;m="%";v="f";break;case"p":p=100;m="%";v="r";break;case"b":case"o":case"x":case"X":if(u==="#")g="0"+v.toLowerCase();case"c":b=false;case"d":y=true;d=0;break;case"s":p=-1;v="r";break}if(u==="$")g=i[0],m=i[1];if(v=="r"&&!d)v="g";if(d!=null){if(v=="g")d=Math.max(1,Math.min(21,d));else if(v=="e"||v=="f")d=Math.max(0,Math.min(20,d))}v=Ht.get(v)||qt;var x=f&&h;return function(e){var n=m;if(y&&e%1)return"";var i=e<0||e===0&&1/e<0?(e=-e,"-"):l==="-"?"":l;if(p<0){var u=t.formatPrefix(e,d);e=u.scale(e);n=u.symbol+m}else{e*=p}e=v(e,d);var _=e.lastIndexOf("."),w,A;if(_<0){var k=b?e.lastIndexOf("e"):-1;if(k<0)w=e,A="";else w=e.substring(0,k),A=e.substring(k)}else{w=e.substring(0,_);A=r+e.substring(_+1)}if(!f&&h)w=o(w,Infinity);var T=g.length+w.length+A.length+(x?0:i.length),M=T<c?new Array(T=c-T+1).join(a):"";if(x)w=o(M+w,M.length?c-A.length:Infinity);i+=g;e=w+A;return(s==="<"?i+e+M:s===">"?M+i+e:s==="^"?M.substring(0,T>>=1)+i+e+M.substring(T):i+(x?e:M+e))+n}}}var Vt=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ht=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,r){return(e=t.round(e,Bt(e,r))).toFixed(Math.max(0,Math.min(20,Bt(e*(1+1e-15),r))))}});function qt(e){return e+""}var Gt=t.time={},Xt=Date;function Wt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Wt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Yt.setUTCDate.apply(this._,arguments)},setDay:function(){Yt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Yt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Yt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Yt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Yt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Yt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Yt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Yt.setTime.apply(this._,arguments)}};var Yt=Date.prototype;function Zt(e,t,r){function n(t){var r=e(t),n=i(r,1);return t-r<n-t?r:n}function a(r){t(r=e(new Xt(r-1)),1);return r}function i(e,r){t(e=new Xt(+e),r);return e}function o(e,n,i){var o=a(e),s=[];if(i>1){while(o<n){if(!(r(o)%i))s.push(new Date(+o));t(o,1)}}else{while(o<n)s.push(new Date(+o)),t(o,1)}return s}function s(e,t,r){try{Xt=Wt;var n=new Wt;n._=e;return o(n,t,r)}finally{Xt=Date}}e.floor=e;e.round=n;e.ceil=a;e.offset=i;e.range=o;var l=e.utc=Jt(e);l.floor=l;l.round=Jt(n);l.ceil=Jt(a);l.offset=Jt(i);l.range=s;return e}function Jt(e){return function(t,r){try{Xt=Wt;var n=new Wt;n._=t;return e(n,r)._}finally{Xt=Date}}}Gt.year=Zt(function(e){e=Gt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Gt.years=Gt.year.range;Gt.years.utc=Gt.year.utc.range;Gt.day=Zt(function(e){var t=new Xt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Gt.days=Gt.day.range;Gt.days.utc=Gt.day.utc.range;Gt.dayOfYear=function(e){var t=Gt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var r=Gt[e]=Zt(function(e){(e=Gt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)-(r!==t)});Gt[e+"s"]=r.range;Gt[e+"s"].utc=r.utc.range;Gt[e+"OfYear"]=function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)}});Gt.week=Gt.sunday;Gt.weeks=Gt.sunday.range;Gt.weeks.utc=Gt.sunday.utc.range;Gt.weekOfYear=Gt.sundayOfYear;function Qt(e){var r=e.dateTime,n=e.date,a=e.time,i=e.periods,o=e.days,s=e.shortDays,l=e.months,u=e.shortMonths;function f(e){var t=e.length;function r(r){var n=[],a=-1,i=0,o,s,l;while(++a<t){if(e.charCodeAt(a)===37){n.push(e.slice(i,a));if((s=$t[o=e.charAt(++a)])!=null)o=e.charAt(++a);if(l=_[o])o=l(r,s==null?o==="e"?" ":"0":s);n.push(o);i=a+1}}n.push(e.slice(i,a));return n.join("")}r.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=c(r,e,t,0);if(n!=t.length)return null;if("p"in r)r.H=r.H%12+r.p*12;var a=r.Z!=null&&Xt!==Wt,i=new(a?Wt:Xt);if("j"in r)i.setFullYear(r.y,0,r.j);else if("W"in r||"U"in r){if(!("w"in r))r.w="W"in r?1:0;i.setFullYear(r.y,0,1);i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+r.W*7-(i.getDay()+5)%7:r.w+r.U*7-(i.getDay()+6)%7)}else i.setFullYear(r.y,r.m,r.d);i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L);return a?i._:i};r.toString=function(){return e};return r}function c(e,t,r,n){var a,i,o,s=0,l=t.length,u=r.length;while(s<l){if(n>=u)return-1;a=t.charCodeAt(s++);if(a===37){o=t.charAt(s++);i=w[o in $t?t.charAt(s++):o];if(!i||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++)){return-1}}return n}f.utc=function(e){var t=f(e);function r(e){try{Xt=Wt;var r=new Xt;r._=e;return t(r)}finally{Xt=Date}}r.parse=function(e){try{Xt=Wt;var r=t.parse(e);return r&&r._}finally{Xt=Date}};r.toString=t.toString;return r};f.multi=f.utc.multi=xr;var h=t.map(),d=rr(o),v=nr(o),p=rr(s),g=nr(s),m=rr(l),y=nr(l),b=rr(u),x=nr(u);i.forEach(function(e,t){h.set(e.toLowerCase(),t)});var _={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:f(r),d:function(e,t){return tr(e.getDate(),t,2)},e:function(e,t){return tr(e.getDate(),t,2)},H:function(e,t){return tr(e.getHours(),t,2)},I:function(e,t){return tr(e.getHours()%12||12,t,2)},j:function(e,t){return tr(1+Gt.dayOfYear(e),t,3)},L:function(e,t){return tr(e.getMilliseconds(),t,3)},m:function(e,t){return tr(e.getMonth()+1,t,2)},M:function(e,t){return tr(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return tr(e.getSeconds(),t,2)},U:function(e,t){return tr(Gt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return tr(Gt.mondayOfYear(e),t,2)},x:f(n),X:f(a),y:function(e,t){return tr(e.getFullYear()%100,t,2)},Y:function(e,t){return tr(e.getFullYear()%1e4,t,4)},Z:yr,"%":function(){return"%"}};var w={a:A,A:k,b:T,B:M,c:E,d:hr,e:hr,H:vr,I:vr,j:dr,L:mr,m:cr,M:pr,p:L,S:gr,U:ir,w:ar,W:or,x:C,X:S,y:lr,Y:sr,Z:ur,"%":br};function A(e,t,r){p.lastIndex=0;var n=p.exec(t.slice(r));return n?(e.w=g.get(n[0].toLowerCase()),r+n[0].length):-1}function k(e,t,r){d.lastIndex=0;var n=d.exec(t.slice(r));return n?(e.w=v.get(n[0].toLowerCase()),r+n[0].length):-1}function T(e,t,r){b.lastIndex=0;var n=b.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1}function M(e,t,r){m.lastIndex=0;var n=m.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1}function E(e,t,r){return c(e,_.c.toString(),t,r)}function C(e,t,r){return c(e,_.x.toString(),t,r)}function S(e,t,r){return c(e,_.X.toString(),t,r)}function L(e,t,r){var n=h.get(t.slice(r,r+=2).toLowerCase());return n==null?-1:(e.p=n,r)}return f}var $t={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,er=/^%/;function tr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function rr(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function nr(e){var t=new w,r=-1,n=e.length;while(++r<n)t.set(e[r].toLowerCase(),r);return t}function ar(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ir(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r));return n?(e.U=+n[0],r+n[0].length):-1}function or(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r));return n?(e.W=+n[0],r+n[0].length):-1}function sr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function lr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.y=fr(+n[0]),r+n[0].length):-1}function ur(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function fr(e){return e+(e>68?1900:2e3)}function cr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function hr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function dr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+3));return n?(e.j=+n[0],r+n[0].length):-1}function vr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function pr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function mr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",n=b(t)/60|0,a=b(t)%60;return r+tr(n,"0",2)+tr(a,"0",2)}function br(e,t,r){er.lastIndex=0;var n=er.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xr(e){var t=e.length,r=-1;while(++r<t)e[r][0]=this(e[r][0]);return function(t){var r=0,n=e[r];while(!n[1](t))n=e[++r];return n[0](t)}}t.locale=function(e){return{numberFormat:Ut(e),timeFormat:Qt(e)}};var _r=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=_r.numberFormat;t.geo={};function wr(){}wr.prototype={s:0,t:0,add:function(e){kr(e,this.t,Ar);kr(Ar.s,this.s,this);if(this.s)this.t+=Ar.t;else this.s=Ar.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ar=new wr;function kr(e,t,r){var n=r.s=e+t,a=n-e,i=n-a;r.t=e-i+(t-a)}t.geo.stream=function(e,t){if(e&&Mr.hasOwnProperty(e.type)){Mr[e.type](e,t)}else{Tr(e,t)}};function Tr(e,t){if(e&&Er.hasOwnProperty(e.type)){Er[e.type](e,t)}}var Mr={Feature:function(e,t){Tr(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,a=r.length;while(++n<a)Tr(r[n].geometry,t)}};var Er={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cr(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Cr(r[n],t,0)},Polygon:function(e,t){Sr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Sr(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,n=-1,a=r.length;while(++n<a)Tr(r[n],t)}};function Cr(e,t,r){var n=-1,a=e.length-r,i;t.lineStart();while(++n<a)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Sr(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)Cr(e[r],t,1);t.polygonEnd()}t.geo.area=function(e){Lr=0;t.geo.stream(e,Ir);return Lr};var Lr,Or=new wr;var Ir={sphere:function(){Lr+=4*Se},point:F,lineStart:F,lineEnd:F,polygonStart:function(){Or.reset();Ir.lineStart=Dr},polygonEnd:function(){var e=2*Or;Lr+=e<0?4*Se+e:e;Ir.lineStart=Ir.lineEnd=Ir.point=F}};function Dr(){var e,t,r,n,a;Ir.point=function(o,s){Ir.point=i;r=(e=o)*De,n=Math.cos(s=(t=s)*De/2+Se/4),a=Math.sin(s)};function i(e,t){e*=De;t=t*De/2+Se/4;var i=e-r,o=i>=0?1:-1,s=o*i,l=Math.cos(t),u=Math.sin(t),f=a*u,c=n*l+f*Math.cos(s),h=f*o*Math.sin(s);Or.add(Math.atan2(h,c));r=e,n=l,a=u}Ir.lineEnd=function(){i(e,t)}}function Rr(e){var t=e[0],r=e[1],n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Br(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Nr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function jr(e){return[Math.atan2(e[1],e[0]),Be(e[2])]}function Ur(e,t){return b(e[0]-t[0])<Ee&&b(e[1]-t[1])<Ee}t.geo.bounds=function(){var e,r,n,a,i,o,s,l,u,f,c;var h={point:d,lineStart:p,lineEnd:g,polygonStart:function(){h.point=m;h.lineStart=y;h.lineEnd=x;u=0;Ir.polygonStart()},polygonEnd:function(){Ir.polygonEnd();h.point=d;h.lineStart=p;h.lineEnd=g;if(Or<0)e=-(n=180),r=-(a=90);else if(u>Ee)a=90;else if(u<-Ee)r=-90;c[0]=e,c[1]=n}};function d(t,i){f.push(c=[e=t,n=t]);if(i<r)r=i;if(i>a)a=i}function v(t,o){var s=Rr([t*De,o*De]);if(l){var u=zr(l,s),f=[u[1],-u[0],0],c=zr(f,u);Nr(c);c=jr(c);var h=t-i,v=h>0?1:-1,p=c[0]*Re*v,g=b(h)>180;if(g^(v*i<p&&p<v*t)){var m=c[1]*Re;if(m>a)a=m}else if(p=(p+360)%360-180,g^(v*i<p&&p<v*t)){var m=-c[1]*Re;if(m<r)r=m}else{if(o<r)r=o;if(o>a)a=o}if(g){if(t<i){if(_(e,t)>_(e,n))n=t}else{if(_(t,n)>_(e,n))e=t}}else{if(n>=e){if(t<e)e=t;if(t>n)n=t}else{if(t>i){if(_(e,t)>_(e,n))n=t}else{if(_(t,n)>_(e,n))e=t}}}}else{d(t,o)}l=s,i=t}function p(){h.point=v}function g(){c[0]=e,c[1]=n;h.point=d;l=null}function m(e,t){if(l){var r=e-i;u+=b(r)>180?r+(r>0?360:-360):r}else o=e,s=t;Ir.point(e,t);v(e,t)}function y(){Ir.lineStart()}function x(){m(o,s);Ir.lineEnd();if(b(u)>Ee)e=-(n=180);c[0]=e,c[1]=n;l=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function A(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){a=n=-(e=r=Infinity);f=[];t.geo.stream(i,h);var o=f.length;if(o){f.sort(w);for(var s=1,l=f[0],u,d=[l];s<o;++s){u=f[s];if(A(u[0],l)||A(u[1],l)){if(_(l[0],u[1])>_(l[0],l[1]))l[1]=u[1];if(_(u[0],l[1])>_(l[0],l[1]))l[0]=u[0]}else{d.push(l=u)}}var v=-Infinity,p;for(var o=d.length-1,s=0,l=d[o],u;s<=o;l=u,++s){u=d[s];if((p=_(l[1],u[0]))>v)v=p,e=u[0],n=l[1]}}f=c=null;return e===Infinity||r===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,r],[n,a]]}}();t.geo.centroid=function(e){Vr=Hr=qr=Gr=Xr=Wr=Yr=Zr=Jr=Qr=$r=0;t.geo.stream(e,Kr);var r=Jr,n=Qr,a=$r,i=r*r+n*n+a*a;if(i<Ce){r=Wr,n=Yr,a=Zr;if(Hr<Ee)r=qr,n=Gr,a=Xr;i=r*r+n*n+a*a;if(i<Ce)return[NaN,NaN]}return[Math.atan2(n,r)*Re,Be(a/Math.sqrt(i))*Re]};var Vr,Hr,qr,Gr,Xr,Wr,Yr,Zr,Jr,Qr,$r;var Kr={sphere:F,point:en,lineStart:rn,lineEnd:nn,polygonStart:function(){Kr.lineStart=an},polygonEnd:function(){Kr.lineStart=rn}};function en(e,t){e*=De;var r=Math.cos(t*=De);tn(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function tn(e,t,r){++Vr;qr+=(e-qr)/Vr;Gr+=(t-Gr)/Vr;Xr+=(r-Xr)/Vr}function rn(){var e,t,r;Kr.point=function(a,i){a*=De;var o=Math.cos(i*=De);e=o*Math.cos(a);t=o*Math.sin(a);r=Math.sin(i);Kr.point=n;tn(e,t,r)};function n(n,a){n*=De;var i=Math.cos(a*=De),o=i*Math.cos(n),s=i*Math.sin(n),l=Math.sin(a),u=Math.atan2(Math.sqrt((u=t*l-r*s)*u+(u=r*o-e*l)*u+(u=e*s-t*o)*u),e*o+t*s+r*l);Hr+=u;Wr+=u*(e+(e=o));Yr+=u*(t+(t=s));Zr+=u*(r+(r=l));tn(e,t,r)}}function nn(){Kr.point=en}function an(){var e,t,r,n,a;Kr.point=function(o,s){e=o,t=s;Kr.point=i;o*=De;var l=Math.cos(s*=De);r=l*Math.cos(o);n=l*Math.sin(o);a=Math.sin(s);tn(r,n,a)};Kr.lineEnd=function(){i(e,t);Kr.lineEnd=nn;Kr.point=en};function i(e,t){e*=De;var i=Math.cos(t*=De),o=i*Math.cos(e),s=i*Math.sin(e),l=Math.sin(t),u=n*l-a*s,f=a*o-r*l,c=r*s-n*o,h=Math.sqrt(u*u+f*f+c*c),d=r*o+n*s+a*l,v=h&&-Fe(d)/h,p=Math.atan2(h,d);Jr+=v*u;Qr+=v*f;$r+=v*c;Hr+=p;Wr+=p*(r+(r=o));Yr+=p*(n+(n=s));Zr+=p*(a+(a=l));tn(r,n,a)}}function on(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}if(e.invert&&t.invert)r.invert=function(r,n){return r=t.invert(r,n),r&&e.invert(r[0],r[1])};return r}function sn(){return true}function ln(e,t,r,n,a){var i=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],n=e[t];if(Ur(r,n)){a.lineStart();for(var s=0;s<t;++s)a.point((r=e[s])[0],r[1]);a.lineEnd();return}var l=new fn(r,e,null,true),u=new fn(r,null,l,false);l.o=u;i.push(l);o.push(u);l=new fn(n,e,null,false);u=new fn(n,null,l,true);l.o=u;i.push(l);o.push(u)});o.sort(t);un(i);un(o);if(!i.length)return;for(var s=0,l=r,u=o.length;s<u;++s){o[s].e=l=!l}var f=i[0],c,h;while(1){var d=f,v=true;while(d.v)if((d=d.n)===f)return;c=d.z;a.lineStart();do{d.v=d.o.v=true;if(d.e){if(v){for(var s=0,u=c.length;s<u;++s)a.point((h=c[s])[0],h[1])}else{n(d.x,d.n.x,1,a)}d=d.n}else{if(v){c=d.p.z;for(var s=c.length-1;s>=0;--s)a.point((h=c[s])[0],h[1])}else{n(d.x,d.p.x,-1,a)}d=d.p}d=d.o;c=d.z;v=!v}while(!d.v);a.lineEnd()}}function un(e){if(!(t=e.length))return;var t,r=0,n=e[0],a;while(++r<t){n.n=a=e[r];a.p=n;n=a}n.n=a=e[0];a.p=n}function fn(e,t,r,n){this.x=e;this.z=t;this.o=r;this.e=n;this.v=false;this.n=this.p=null}function cn(e,r,n,a){return function(i,o){var s=r(o),l=i.invert(a[0],a[1]);var u={point:f,lineStart:h,lineEnd:d,polygonStart:function(){u.point=x;u.lineStart=_;u.lineEnd=w;v=[];y=[]},polygonEnd:function(){u.point=f;u.lineStart=h;u.lineEnd=d;v=t.merge(v);var e=bn(l,y);if(v.length){if(!m)o.polygonStart(),m=true;ln(v,vn,e,n,o)}else if(e){if(!m)o.polygonStart(),m=true;o.lineStart();n(null,null,1,o);o.lineEnd()}if(m)o.polygonEnd(),m=false;v=y=null},sphere:function(){o.polygonStart();o.lineStart();n(null,null,1,o);o.lineEnd();o.polygonEnd()}};function f(t,r){var n=i(t,r);if(e(t=n[0],r=n[1]))o.point(t,r)}function c(e,t){var r=i(e,t);s.point(r[0],r[1])}function h(){u.point=c;s.lineStart()}function d(){u.point=f;s.lineEnd()}var v;var p=dn(),g=r(p),m=false,y,b;function x(e,t){b.push([e,t]);var r=i(e,t);g.point(r[0],r[1])}function _(){g.lineStart();b=[]}function w(){x(b[0][0],b[0][1]);g.lineEnd();var e=g.clean(),t=p.buffer(),r,n=t.length;b.pop();y.push(b);b=null;if(!n)return;if(e&1){r=t[0];var n=r.length-1,a=-1,i;if(n>0){if(!m)o.polygonStart(),m=true;o.lineStart();while(++a<n)o.point((i=r[a])[0],i[1]);o.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));v.push(t.filter(hn))}return u}}function hn(e){return e.length>1}function dn(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:F,buffer:function(){var r=e;e=[];t=null;return r},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function vn(e,t){return((e=e.x)[0]<0?e[1]-Ie-Ee:Ie-e[1])-((t=t.x)[0]<0?t[1]-Ie-Ee:Ie-t[1])}var pn=cn(sn,gn,yn,[-Se,-Se/2]);function gn(e){var t=NaN,r=NaN,n=NaN,a;return{lineStart:function(){e.lineStart();a=1},point:function(i,o){var s=i>0?Se:-Se,l=b(i-t);if(b(l-Se)<Ee){e.point(t,r=(r+o)/2>0?Ie:-Ie);e.point(n,r);e.lineEnd();e.lineStart();e.point(s,r);e.point(i,r);a=0}else if(n!==s&&l>=Se){if(b(t-n)<Ee)t-=n*Ee;if(b(i-s)<Ee)i-=s*Ee;r=mn(t,r,i,o);e.point(n,r);e.lineEnd();e.lineStart();e.point(s,r);a=0}e.point(t=i,r=o);n=s},lineEnd:function(){e.lineEnd();t=r=NaN},clean:function(){return 2-a}}}function mn(e,t,r,n){var a,i,o=Math.sin(e-r);return b(o)>Ee?Math.atan((Math.sin(t)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+n)/2}function yn(e,t,r,n){var a;if(e==null){a=r*Ie;n.point(-Se,a);n.point(0,a);n.point(Se,a);n.point(Se,0);n.point(Se,-a);n.point(0,-a);n.point(-Se,-a);n.point(-Se,0);n.point(-Se,a)}else if(b(e[0]-t[0])>Ee){var i=e[0]<t[0]?Se:-Se;a=r*i/2;n.point(-i,a);n.point(0,a);n.point(i,a)}else{n.point(t[0],t[1])}}function bn(e,t){var r=e[0],n=e[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Or.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],f=u.length;if(!f)continue;var c=u[0],h=c[0],d=c[1]/2+Se/4,v=Math.sin(d),p=Math.cos(d),g=1;while(true){if(g===f)g=0;e=u[g];var m=e[0],y=e[1]/2+Se/4,b=Math.sin(y),x=Math.cos(y),_=m-h,w=_>=0?1:-1,A=w*_,k=A>Se,T=v*b;Or.add(Math.atan2(T*w*Math.sin(A),p*x+T*Math.cos(A)));i+=k?_+w*Le:_;if(k^h>=r^m>=r){var M=zr(Rr(c),Rr(e));Nr(M);var E=zr(a,M);Nr(E);var C=(k^_>=0?-1:1)*Be(E[2]);if(n>C||n===C&&(M[0]||M[1])){o+=k^_>=0?1:-1}}if(!g++)break;h=m,v=b,p=x,c=e}}return(i<-Ee||i<Ee&&Or<-Ee)^o&1}function xn(e){var t=Math.cos(e),r=t>0,n=b(t)>Ee,a=na(e,6*De);return cn(i,o,a,r?[0,-e]:[-Se,e-Se]);function i(e,r){return Math.cos(e)*Math.cos(r)>t}function o(e){var t,a,o,u,f;return{lineStart:function(){u=o=false;f=1},point:function(c,h){var d=[c,h],v,p=i(c,h),g=r?p?0:l(c,h):p?l(c+(c<0?Se:-Se),h):0;if(!t&&(u=o=p))e.lineStart();if(p!==o){v=s(t,d);if(Ur(t,v)||Ur(d,v)){d[0]+=Ee;d[1]+=Ee;p=i(d[0],d[1])}}if(p!==o){f=0;if(p){e.lineStart();v=s(d,t);e.point(v[0],v[1])}else{v=s(t,d);e.point(v[0],v[1]);e.lineEnd()}t=v}else if(n&&t&&r^p){var m;if(!(g&a)&&(m=s(d,t,true))){f=0;if(r){e.lineStart();e.point(m[0][0],m[0][1]);e.point(m[1][0],m[1][1]);e.lineEnd()}else{e.point(m[1][0],m[1][1]);e.lineEnd();e.lineStart();e.point(m[0][0],m[0][1])}}}if(p&&(!t||!Ur(t,d))){e.point(d[0],d[1])}t=d,o=p,a=g},lineEnd:function(){if(o)e.lineEnd();t=null},clean:function(){return f|(u&&o)<<1}}}function s(e,r,n){var a=Rr(e),i=Rr(r);var o=[1,0,0],s=zr(a,i),l=Pr(s,s),u=s[0],f=l-u*u;if(!f)return!n&&e;var c=t*l/f,h=-t*u/f,d=zr(o,s),v=Br(o,c),p=Br(s,h);Fr(v,p);var g=d,m=Pr(v,g),y=Pr(g,g),x=m*m-y*(Pr(v,v)-1);if(x<0)return;var _=Math.sqrt(x),w=Br(g,(-m-_)/y);Fr(w,v);w=jr(w);if(!n)return w;var A=e[0],k=r[0],T=e[1],M=r[1],E;if(k<A)E=A,A=k,k=E;var C=k-A,S=b(C-Se)<Ee,L=S||C<Ee;if(!S&&M<T)E=T,T=M,M=E;if(L?S?T+M>0^w[1]<(b(w[0]-A)<Ee?T:M):T<=w[1]&&w[1]<=M:C>Se^(A<=w[0]&&w[0]<=k)){var O=Br(g,(-m+_)/y);Fr(O,v);return[w,jr(O)]}}function l(t,n){var a=r?e:Se-e,i=0;if(t<-a)i|=1;else if(t>a)i|=2;if(n<-a)i|=4;else if(n>a)i|=8;return i}}function _n(e,t,r,n){return function(a){var i=a.a,o=a.b,s=i.x,l=i.y,u=o.x,f=o.y,c=0,h=1,d=u-s,v=f-l,p;p=e-s;if(!d&&p>0)return;p/=d;if(d<0){if(p<c)return;if(p<h)h=p}else if(d>0){if(p>h)return;if(p>c)c=p}p=r-s;if(!d&&p<0)return;p/=d;if(d<0){if(p>h)return;if(p>c)c=p}else if(d>0){if(p<c)return;if(p<h)h=p}p=t-l;if(!v&&p>0)return;p/=v;if(v<0){if(p<c)return;if(p<h)h=p}else if(v>0){if(p>h)return;if(p>c)c=p}p=n-l;if(!v&&p<0)return;p/=v;if(v<0){if(p>h)return;if(p>c)c=p}else if(v>0){if(p<c)return;if(p<h)h=p}if(c>0)a.a={x:s+c*d,y:l+c*v};if(h<1)a.b={x:s+h*d,y:l+h*v};return a}}var wn=1e9;t.geo.clipExtent=function(){var e,t,r,n,a,i,o={stream:function(e){if(a)a.valid=false;a=i(e);a.valid=true;return a},extent:function(s){if(!arguments.length)return[[e,t],[r,n]];i=An(e=+s[0][0],t=+s[0][1],r=+s[1][0],n=+s[1][1]);if(a)a.valid=false,a=null;return o}};return o.extent([[0,0],[960,500]])};function An(e,r,n,a){return function(l){var u=l,f=dn(),c=_n(e,r,n,a),h,d,v;var p={point:b,lineStart:C,lineEnd:S,polygonStart:function(){l=f;h=[];d=[];E=true},polygonEnd:function(){l=u;h=t.merge(h);var r=g([e,a]),n=E&&r,i=h.length;if(n||i){l.polygonStart();if(n){l.lineStart();m(null,null,1,l);l.lineEnd()}if(i){ln(h,o,r,m,l)}l.polygonEnd()}h=d=v=null}};function g(e){var t=0,r=d.length,n=e[1];for(var a=0;a<r;++a){for(var i=1,o=d[a],s=o.length,l=o[0],u;i<s;++i){u=o[i];if(l[1]<=n){if(u[1]>n&&ze(l,u,e)>0)++t}else{if(u[1]<=n&&ze(l,u,e)<0)--t}l=u}}return t!==0}function m(t,o,l,u){var f=0,c=0;if(t==null||(f=i(t,l))!==(c=i(o,l))||s(t,o)<0^l>0){do{u.point(f===0||f===3?e:n,f>1?a:r)}while((f=(f+l+4)%4)!==c)}else{u.point(o[0],o[1])}}function y(t,i){return e<=t&&t<=n&&r<=i&&i<=a}function b(e,t){if(y(e,t))l.point(e,t)}var x,_,w,A,k,T,M,E;function C(){p.point=L;if(d)d.push(v=[]);M=true;T=false;A=k=NaN}function S(){if(h){L(x,_);if(w&&T)f.rejoin();h.push(f.buffer())}p.point=b;if(T)l.lineEnd()}function L(e,t){e=Math.max(-wn,Math.min(wn,e));t=Math.max(-wn,Math.min(wn,t));var r=y(e,t);if(d)v.push([e,t]);if(M){x=e,_=t,w=r;M=false;if(r){l.lineStart();l.point(e,t)}}else{if(r&&T)l.point(e,t);else{var n={a:{x:A,y:k},b:{x:e,y:t}};if(c(n)){if(!T){l.lineStart();l.point(n.a.x,n.a.y)}l.point(n.b.x,n.b.y);if(!r)l.lineEnd();E=false}else if(r){l.lineStart();l.point(e,t);E=false}}}A=e,k=t,T=r}return p};function i(t,a){return b(t[0]-e)<Ee?a>0?0:3:b(t[0]-n)<Ee?a>0?2:1:b(t[1]-r)<Ee?a>0?1:0:a>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var r=i(e,1),n=i(t,1);return r!==n?r-n:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function kn(e){var t=0,r=Se/3,n=Zn(e),a=n(t,r);a.parallels=function(e){if(!arguments.length)return[t/Se*180,r/Se*180];return n(t=e[0]*Se/180,r=e[1]*Se/180)};return a}function Tn(e,t){var r=Math.sin(e),n=(r+Math.sin(t))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(e,t){var r=Math.sqrt(a-2*n*Math.sin(t))/n;return[r*Math.sin(e*=n),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/n,Be((a-(e*e+r*r)*n*n)/(2*n))]};return o}(t.geo.conicEqualArea=function(){return kn(Tn)}).raw=Tn;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var e=t.geo.albers();var r=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var a,i={point:function(e,t){a=[e,t]}},o,s,l;function u(e){var t=e[0],r=e[1];a=null;(o(t,r),a)||(s(t,r),a)||l(t,r);return a}u.invert=function(t){var a=e.scale(),i=e.translate(),o=(t[0]-i[0])/a,s=(t[1]-i[1])/a;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?r:s>=.166&&s<.234&&o>=-.214&&o<-.115?n:e).invert(t)};u.stream=function(t){var a=e.stream(t),i=r.stream(t),o=n.stream(t);return{point:function(e,t){a.point(e,t);i.point(e,t);o.point(e,t)},sphere:function(){a.sphere();i.sphere();o.sphere()},lineStart:function(){a.lineStart();i.lineStart();o.lineStart()},lineEnd:function(){a.lineEnd();i.lineEnd();o.lineEnd()},polygonStart:function(){a.polygonStart();i.polygonStart();o.polygonStart()},polygonEnd:function(){a.polygonEnd();i.polygonEnd();o.polygonEnd()}}};u.precision=function(t){if(!arguments.length)return e.precision();e.precision(t);r.precision(t);n.precision(t);return u};u.scale=function(t){if(!arguments.length)return e.scale();e.scale(t);r.scale(t*.35);n.scale(t);return u.translate(e.translate())};u.translate=function(t){if(!arguments.length)return e.translate();var a=e.scale(),f=+t[0],c=+t[1];o=e.translate(t).clipExtent([[f-.455*a,c-.238*a],[f+.455*a,c+.238*a]]).stream(i).point;s=r.translate([f-.307*a,c+.201*a]).clipExtent([[f-.425*a+Ee,c+.12*a+Ee],[f-.214*a-Ee,c+.234*a-Ee]]).stream(i).point;l=n.translate([f-.205*a,c+.212*a]).clipExtent([[f-.214*a+Ee,c+.166*a+Ee],[f-.115*a-Ee,c+.234*a-Ee]]).stream(i).point;return u};return u.scale(1070)};var Mn,En,Cn={point:F,lineStart:F,lineEnd:F,polygonStart:function(){En=0;Cn.lineStart=Sn},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=F;Mn+=b(En/2)}};function Sn(){var e,t,r,n;Cn.point=function(i,o){Cn.point=a;e=r=i,t=n=o};function a(e,t){En+=n*e-r*t;r=e,n=t}Cn.lineEnd=function(){a(e,t)}}var Ln,On,In,Dn;var Rn={point:Pn,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function Pn(e,t){if(e<Ln)Ln=e;if(e>In)In=e;if(t<On)On=t;if(t>Dn)Dn=t}function zn(){var e=Fn(4.5),t=[];var r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=o;r.point=n},pointRadius:function(t){e=Fn(t);return r},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function n(r,n){t.push("M",r,",",n,e)}function a(e,n){t.push("M",e,",",n);r.point=i}function i(e,r){t.push("L",e,",",r)}function o(){r.point=n}function s(){t.push("Z")}return r}function Fn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Bn={point:Nn,lineStart:jn,lineEnd:Un,polygonStart:function(){Bn.lineStart=Vn},polygonEnd:function(){Bn.point=Nn;Bn.lineStart=jn;Bn.lineEnd=Un}};function Nn(e,t){qr+=e;Gr+=t;++Xr}function jn(){var e,t;Bn.point=function(n,a){Bn.point=r;Nn(e=n,t=a)};function r(r,n){var a=r-e,i=n-t,o=Math.sqrt(a*a+i*i);Wr+=o*(e+r)/2;Yr+=o*(t+n)/2;Zr+=o;Nn(e=r,t=n)}}function Un(){Bn.point=Nn}function Vn(){var e,t,r,n;Bn.point=function(i,o){Bn.point=a;Nn(e=r=i,t=n=o)};function a(e,t){var a=e-r,i=t-n,o=Math.sqrt(a*a+i*i);Wr+=o*(r+e)/2;Yr+=o*(n+t)/2;Zr+=o;o=n*e-r*t;Jr+=o*(r+e);Qr+=o*(n+t);$r+=o*3;Nn(r=e,n=t)}Bn.lineEnd=function(){a(e,t)}}function Hn(e){var t=4.5;var r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=o;r.point=n},pointRadius:function(e){t=e;return r},result:F};function n(r,n){e.moveTo(r+t,n);e.arc(r,n,t,0,Le)}function a(t,n){e.moveTo(t,n);r.point=i}function i(t,r){e.lineTo(t,r)}function o(){r.point=n}function s(){e.closePath()}return r}function qn(e){var t=.5,r=Math.cos(30*De),n=16;function a(e){return(n?o:i)(e)}function i(t){return Wn(t,function(r,n){r=e(r,n);t.point(r[0],r[1])})}function o(t){var r,a,i,o,l,u,f,c,h,d,v,p,g;var m={point:y,lineStart:b,lineEnd:_,polygonStart:function(){t.polygonStart();m.lineStart=w},polygonEnd:function(){t.polygonEnd();m.lineStart=b}};function y(r,n){r=e(r,n);t.point(r[0],r[1])}function b(){h=NaN;m.point=x;t.lineStart()}function x(r,a){var i=Rr([r,a]),o=e(r,a);s(h,d,c,v,p,g,h=o[0],d=o[1],c=r,v=i[0],p=i[1],g=i[2],n,t);t.point(h,d)}function _(){m.point=y;t.lineEnd()}function w(){b();m.point=A;m.lineEnd=k}function A(e,t){x(r=e,a=t),i=h,o=d,l=v,u=p,f=g;m.point=x}function k(){s(h,d,c,v,p,g,i,o,r,l,u,f,n,t);m.lineEnd=_;_()}return m}function s(n,a,i,o,l,u,f,c,h,d,v,p,g,m){var y=f-n,x=c-a,_=y*y+x*x;if(_>4*t&&g--){var w=o+d,A=l+v,k=u+p,T=Math.sqrt(w*w+A*A+k*k),M=Math.asin(k/=T),E=b(b(k)-1)<Ee||b(i-h)<Ee?(i+h)/2:Math.atan2(A,w),C=e(E,M),S=C[0],L=C[1],O=S-n,I=L-a,D=x*O-y*I;if(D*D/_>t||b((y*O+x*I)/_-.5)>.3||o*d+l*v+u*p<r){s(n,a,i,o,l,u,S,L,E,w/=T,A/=T,k,g,m);m.point(S,L);s(S,L,E,w,A,k,f,c,h,d,v,p,g,m)}}}a.precision=function(e){if(!arguments.length)return Math.sqrt(t);n=(t=e*e)>0&&16;return a};return a}t.geo.path=function(){var e=4.5,r,n,a,i,o;function s(r){if(r){if(typeof e==="function")i.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=a(i);t.geo.stream(r,o)}return i.result()}s.area=function(e){Mn=0;t.geo.stream(e,a(Cn));return Mn};s.centroid=function(e){qr=Gr=Xr=Wr=Yr=Zr=Jr=Qr=$r=0;t.geo.stream(e,a(Bn));return $r?[Jr/$r,Qr/$r]:Zr?[Wr/Zr,Yr/Zr]:Xr?[qr/Xr,Gr/Xr]:[NaN,NaN]};s.bounds=function(e){In=Dn=-(Ln=On=Infinity);t.geo.stream(e,a(Rn));return[[Ln,On],[In,Dn]]};s.projection=function(e){if(!arguments.length)return r;a=(r=e)?e.stream||Gn(e):D;return l()};s.context=function(t){if(!arguments.length)return n;i=(n=t)==null?new zn:new Hn(t);if(typeof e!=="function")i.pointRadius(e);return l()};s.pointRadius=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:(i.pointRadius(+t),+t);return s};function l(){o=null;return s}return s.projection(t.geo.albersUsa()).context(null)};function Gn(e){var t=qn(function(t,r){return e([t*Re,r*Re])});return function(e){return Jn(t(e))}}t.geo.transform=function(e){return{stream:function(t){var r=new Xn(t);for(var n in e)r[n]=e[n];return r}}};function Xn(e){this.stream=e}Xn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Wn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}t.geo.projection=Yn;t.geo.projectionMutator=Zn;function Yn(e){return Zn(function(){return e})()}function Zn(e){var r,n,a,i=qn(function(e,t){e=r(e,t);return[e[0]*o+v,p-e[1]*o]}),o=150,s=480,l=250,u=0,f=0,c=0,h=0,d=0,v,p,g=pn,m=D,y=null,b=null,x;function _(e){e=a(e[0]*De,e[1]*De);return[e[0]*o+v,p-e[1]*o]}function w(e){e=a.invert((e[0]-v)/o,(p-e[1])/o);return e&&[e[0]*Re,e[1]*Re]}_.stream=function(e){if(x)x.valid=false;x=Jn(g(n,i(m(e))));x.valid=true;return x};_.clipAngle=function(e){if(!arguments.length)return y;g=e==null?(y=e,pn):xn((y=+e)*De);return k()};_.clipExtent=function(e){if(!arguments.length)return b;b=e;m=e?An(e[0][0],e[0][1],e[1][0],e[1][1]):D;return k()};_.scale=function(e){if(!arguments.length)return o;o=+e;return A()};_.translate=function(e){if(!arguments.length)return[s,l];s=+e[0];l=+e[1];return A()};_.center=function(e){if(!arguments.length)return[u*Re,f*Re];u=e[0]%360*De;f=e[1]%360*De;return A()};_.rotate=function(e){if(!arguments.length)return[c*Re,h*Re,d*Re];c=e[0]%360*De;h=e[1]%360*De;d=e.length>2?e[2]%360*De:0;return A()};t.rebind(_,i,"precision");function A(){a=on(n=Kn(c,h,d),r);var e=r(u,f);v=s-e[0]*o;p=l+e[1]*o;return k()}function k(){if(x)x.valid=false,x=null;return _}return function(){r=e.apply(this,arguments);_.invert=r.invert&&w;return A()}}function Jn(e){return Wn(e,function(t,r){e.point(t*De,r*De)})}function Qn(e,t){return[e,t]}(t.geo.equirectangular=function(){return Yn(Qn)}).raw=Qn.invert=Qn;t.geo.rotation=function(e){e=Kn(e[0]%360*De,e[1]*De,e.length>2?e[2]*De:0);function t(t){t=e(t[0]*De,t[1]*De);return t[0]*=Re,t[1]*=Re,t}t.invert=function(t){t=e.invert(t[0]*De,t[1]*De);return t[0]*=Re,t[1]*=Re,t};return t};function $n(e,t){return[e>Se?e-Le:e<-Se?e+Le:e,t]}$n.invert=Qn;function Kn(e,t,r){return e?t||r?on(ta(e),ra(t,r)):ta(e):t||r?ra(t,r):$n}function ea(e){return function(t,r){return t+=e,[t>Se?t-Le:t<-Se?t+Le:t,r]}}function ta(e){var t=ea(e);t.invert=ea(-e);return t}function ra(e,t){var r=Math.cos(e),n=Math.sin(e),a=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,l=Math.sin(e)*o,u=Math.sin(t),f=u*r+s*n;return[Math.atan2(l*a-f*i,s*r-u*n),Be(f*a+l*i)]}o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,l=Math.sin(e)*o,u=Math.sin(t),f=u*a-l*i;return[Math.atan2(l*a+u*i,s*r+f*n),Be(f*r-s*n)]};return o}t.geo.circle=function(){var e=[0,0],t,r=6,n;function a(){var t=typeof e==="function"?e.apply(this,arguments):e,r=Kn(-t[0]*De,-t[1]*De,0).invert,a=[];n(null,null,1,{point:function(e,t){a.push(e=r(e,t));e[0]*=Re,e[1]*=Re}});return{type:"Polygon",coordinates:[a]}}a.origin=function(t){if(!arguments.length)return e;e=t;return a};a.angle=function(e){if(!arguments.length)return t;n=na((t=+e)*De,r*De);return a};a.precision=function(e){if(!arguments.length)return r;n=na(t*De,(r=+e)*De);return a};return a.angle(90)};function na(e,t){var r=Math.cos(e),n=Math.sin(e);return function(a,i,o,s){var l=o*t;if(a!=null){a=aa(r,a);i=aa(r,i);if(o>0?a<i:a>i)a+=o*Le}else{a=e+o*Le;i=e-.5*l}for(var u,f=a;o>0?f>i:f<i;f-=l){s.point((u=jr([r,-n*Math.cos(f),-n*Math.sin(f)]))[0],u[1])}}}function aa(e,t){var r=Rr(t);r[0]-=e;Nr(r);var n=Fe(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-Ee)%(2*Math.PI)}t.geo.distance=function(e,t){var r=(t[0]-e[0])*De,n=e[1]*De,a=t[1]*De,i=Math.sin(r),o=Math.cos(r),s=Math.sin(n),l=Math.cos(n),u=Math.sin(a),f=Math.cos(a),c;return Math.atan2(Math.sqrt((c=f*i)*c+(c=l*u-s*f*o)*c),s*u+l*f*o)};t.geo.graticule=function(){var e,r,n,a,i,o,s,l,u=10,f=u,c=90,h=360,d,v,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(a/c)*c,n,c).map(p).concat(t.range(Math.ceil(l/h)*h,s,h).map(g)).concat(t.range(Math.ceil(r/u)*u,e,u).filter(function(e){return b(e%c)>Ee}).map(d)).concat(t.range(Math.ceil(o/f)*f,i,f).filter(function(e){return b(e%h)>Ee}).map(v))}y.lines=function(){return x().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(g(s).slice(1),p(n).reverse().slice(1),g(l).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[a,l],[n,s]];a=+e[0][0],n=+e[1][0];l=+e[0][1],s=+e[1][1];if(a>n)e=a,a=n,n=e;if(l>s)e=l,l=s,s=e;return y.precision(m)};y.minorExtent=function(t){if(!arguments.length)return[[r,o],[e,i]];r=+t[0][0],e=+t[1][0];o=+t[0][1],i=+t[1][1];if(r>e)t=r,r=e,e=t;if(o>i)t=o,o=i,i=t;return y.precision(m)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[c,h];c=+e[0],h=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[u,f];u=+e[0],f=+e[1];return y};y.precision=function(t){if(!arguments.length)return m;m=+t;d=ia(o,i,90);v=oa(r,e,m);p=ia(l,s,90);g=oa(a,n,m);return y};return y.majorExtent([[-180,-90+Ee],[180,90-Ee]]).minorExtent([[-180,-80-Ee],[180,80+Ee]])};function ia(e,r,n){var a=t.range(e,r-Ee,n).concat(r);return function(e){return a.map(function(t){return[e,t]})}}function oa(e,r,n){var a=t.range(e,r-Ee,n).concat(r);return function(e){return a.map(function(t){return[t,e]})}}function sa(e){return e.source}function la(e){return e.target}t.geo.greatArc=function(){var e=sa,r,n=la,a;function i(){return{type:"LineString",coordinates:[r||e.apply(this,arguments),a||n.apply(this,arguments)]}}i.distance=function(){return t.geo.distance(r||e.apply(this,arguments),a||n.apply(this,arguments))};i.source=function(t){if(!arguments.length)return e;e=t,r=typeof t==="function"?null:t;return i};i.target=function(e){if(!arguments.length)return n;n=e,a=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};t.geo.interpolate=function(e,t){return ua(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function ua(e,t,r,n){var a=Math.cos(t),i=Math.sin(t),o=Math.cos(n),s=Math.sin(n),l=a*Math.cos(e),u=a*Math.sin(e),f=o*Math.cos(r),c=o*Math.sin(r),h=2*Math.asin(Math.sqrt(Ve(n-t)+a*o*Ve(r-e))),d=1/Math.sin(h);var v=h?function(e){var t=Math.sin(e*=h)*d,r=Math.sin(h-e)*d,n=r*l+t*f,a=r*u+t*c,o=r*i+t*s;return[Math.atan2(a,n)*Re,Math.atan2(o,Math.sqrt(n*n+a*a))*Re]}:function(){return[e*Re,t*Re]};v.distance=h;return v}t.geo.length=function(e){fa=0;t.geo.stream(e,ca);return fa};var fa;var ca={sphere:F,point:F,lineStart:ha,lineEnd:F,polygonStart:F,polygonEnd:F};function ha(){var e,t,r;ca.point=function(a,i){e=a*De,t=Math.sin(i*=De),r=Math.cos(i);ca.point=n};ca.lineEnd=function(){ca.point=ca.lineEnd=F};function n(n,a){var i=Math.sin(a*=De),o=Math.cos(a),s=b((n*=De)-e),l=Math.cos(s);fa+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*i-t*o*l)*s),t*i+r*o*l);e=n,t=i,r=o}}function da(e,t){function r(t,r){var n=Math.cos(t),a=Math.cos(r),i=e(n*a);return[i*a*Math.sin(t),i*Math.sin(r)]}r.invert=function(e,r){var n=Math.sqrt(e*e+r*r),a=t(n),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(e*i,n*o),Math.asin(n&&r*i/n)]};return r}var va=da(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Yn(va)}).raw=va;var pa=da(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},D);(t.geo.azimuthalEquidistant=function(){return Yn(pa)}).raw=pa;function ga(e,t){var r=Math.cos(e),n=function(e){return Math.tan(Se/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;if(!a)return ba;function o(e,t){if(i>0){if(t<-Ie+Ee)t=-Ie+Ee}else{if(t>Ie-Ee)t=Ie-Ee}var r=i/Math.pow(n(t),a);return[r*Math.sin(a*e),i-r*Math.cos(a*e)]}o.invert=function(e,t){var r=i-t,n=Pe(a)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Ie]};return o}(t.geo.conicConformal=function(){return kn(ga)}).raw=ga;function ma(e,t){var r=Math.cos(e),n=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/n+e;if(b(n)<Ee)return Qn;function i(e,t){var r=a-t;return[r*Math.sin(n*e),a-r*Math.cos(n*e)]}i.invert=function(e,t){var r=a-t;return[Math.atan2(e,r)/n,a-Pe(n)*Math.sqrt(e*e+r*r)]};return i}(t.geo.conicEquidistant=function(){return kn(ma)}).raw=ma;var ya=da(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Yn(ya)}).raw=ya;function ba(e,t){return[e,Math.log(Math.tan(Se/4+t/2))]}ba.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ie]};function xa(e){var t=Yn(e),r=t.scale,n=t.translate,a=t.clipExtent,i;t.scale=function(){var e=r.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.translate=function(){var e=n.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=a.apply(t,arguments);if(o===t){if(i=e==null){var s=Se*r(),l=n();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else if(i){o=null}return o};return t.clipExtent(null)}(t.geo.mercator=function(){return xa(ba)}).raw=ba;var _a=da(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Yn(_a)}).raw=_a;var wa=da(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Yn(wa)}).raw=wa;function Aa(e,t){return[Math.log(Math.tan(Se/4+t/2)),-e]}Aa.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ie]};(t.geo.transverseMercator=function(){var e=xa(Aa),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=Aa;t.geom={};function ka(e){return e[0]}function Ta(e){return e[1]}t.geom.hull=function(e){var t=ka,r=Ta;if(arguments.length)return n(e);function n(e){if(e.length<3)return[];var n=kt(t),a=kt(r),i,o=e.length,s=[],l=[];for(i=0;i<o;i++){s.push([+n.call(this,e[i],i),+a.call(this,e[i],i),i])}s.sort(Ea);for(i=0;i<o;i++)l.push([s[i][0],-s[i][1]]);var u=Ma(s),f=Ma(l);var c=f[0]===u[0],h=f[f.length-1]===u[u.length-1],d=[];for(i=u.length-1;i>=0;--i)d.push(e[s[u[i]][2]]);for(i=+c;i<f.length-h;++i)d.push(e[s[f[i]][2]]);return d}n.x=function(e){return arguments.length?(t=e,n):t};n.y=function(e){return arguments.length?(r=e,n):r};return n};function Ma(e){var t=e.length,r=[0,1],n=2;for(var a=2;a<t;a++){while(n>1&&ze(e[r[n-2]],e[r[n-1]],e[a])<=0)--n;r[n++]=a}return r.slice(0,n)}function Ea(e,t){return e[0]-t[0]||e[1]-t[1]}t.geom.polygon=function(e){q(e,Ca);return e};var Ca=t.geom.polygon.prototype=[];Ca.area=function(){var e=-1,t=this.length,r,n=this[t-1],a=0;while(++e<t){r=n;n=this[e];a+=r[1]*n[0]-r[0]*n[1]}return a*.5};Ca.centroid=function(e){var t=-1,r=this.length,n=0,a=0,i,o=this[r-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];s=i[0]*o[1]-o[0]*i[1];n+=(i[0]+o[0])*s;a+=(i[1]+o[1])*s}return[n*e,a*e]};Ca.clip=function(e){var t,r=Oa(e),n=-1,a=this.length-Oa(this),i,o,s=this[a-1],l,u,f;while(++n<a){t=e.slice();e.length=0;l=this[n];u=t[(o=t.length-r)-1];i=-1;while(++i<o){f=t[i];if(Sa(f,s,l)){if(!Sa(u,s,l)){e.push(La(u,f,s,l))}e.push(f)}else if(Sa(u,s,l)){e.push(La(u,f,s,l))}u=f}if(r)e.push(e[0]);s=l}return e};function Sa(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function La(e,t,r,n){var a=e[0],i=r[0],o=t[0]-a,s=n[0]-i,l=e[1],u=r[1],f=t[1]-l,c=n[1]-u,h=(s*(l-u)-c*(a-i))/(c*o-s*f);return[a+h*o,l+h*f]}function Oa(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Ia,Da,Ra,Pa=[],za,Fa,Ba=[];function Na(){oi(this);this.edge=this.site=this.circle=null}function ja(e){var t=Pa.pop()||new Na;t.site=e;return t}function Ua(e){Qa(e);Ra.remove(e);Pa.push(e);oi(e)}function Va(e){var t=e.circle,r=t.x,n=t.cy,a={x:r,y:n},i=e.P,o=e.N,s=[e];Ua(e);var l=i;while(l.circle&&b(r-l.circle.x)<Ee&&b(n-l.circle.cy)<Ee){i=l.P;s.unshift(l);Ua(l);l=i}s.unshift(l);Qa(l);var u=o;while(u.circle&&b(r-u.circle.x)<Ee&&b(n-u.circle.cy)<Ee){o=u.N;s.push(u);Ua(u);u=o}s.push(u);Qa(u);var f=s.length,c;for(c=1;c<f;++c){u=s[c];l=s[c-1];ni(u.edge,l.site,u.site,a)}l=s[0];u=s[f-1];u.edge=ti(l.site,u.site,null,a);Ja(l);Ja(u)}function Ha(e){var t=e.x,r=e.y,n,a,i,o,s=Ra._;while(s){i=qa(s,r)-t;if(i>Ee)s=s.L;else{o=t-Ga(s,r);if(o>Ee){if(!s.R){n=s;break}s=s.R}else{if(i>-Ee){n=s.P;a=s}else if(o>-Ee){n=s;a=s.N}else{n=a=s}break}}}var l=ja(e);Ra.insert(n,l);if(!n&&!a)return;if(n===a){Qa(n);a=ja(n.site);Ra.insert(l,a);l.edge=a.edge=ti(n.site,l.site);Ja(n);Ja(a);return}if(!a){l.edge=ti(n.site,l.site);return}Qa(n);Qa(a);var u=n.site,f=u.x,c=u.y,h=e.x-f,d=e.y-c,v=a.site,p=v.x-f,g=v.y-c,m=2*(h*g-d*p),y=h*h+d*d,b=p*p+g*g,x={x:(g*y-d*b)/m+f,y:(h*b-p*y)/m+c};ni(a.edge,u,v,x);l.edge=ti(u,e,null,x);a.edge=ti(e,v,null,x);Ja(n);Ja(a)}function qa(e,t){var r=e.site,n=r.x,a=r.y,i=a-t;if(!i)return n;var o=e.P;if(!o)return-Infinity;r=o.site;var s=r.x,l=r.y,u=l-t;if(!u)return s;var f=s-n,c=1/i-1/u,h=f/u;if(c)return(-h+Math.sqrt(h*h-2*c*(f*f/(-2*u)-l+u/2+a-i/2)))/c+n;return(n+s)/2}function Ga(e,t){var r=e.N;if(r)return qa(r,t);var n=e.site;return n.y===t?n.x:Infinity}function Xa(e){this.site=e;this.edges=[]}Xa.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Ya);return e.length};function Wa(e){var t=e[0][0],r=e[1][0],n=e[0][1],a=e[1][1],i,o,s,l,u=Da,f=u.length,c,h,d,v,p,g;while(f--){c=u[f];if(!c||!c.prepare())continue;d=c.edges;v=d.length;h=0;while(h<v){g=d[h].end(),s=g.x,l=g.y;p=d[++h%v].start(),i=p.x,o=p.y;if(b(s-i)>Ee||b(l-o)>Ee){d.splice(h,0,new ai(ri(c.site,g,b(s-t)<Ee&&a-l>Ee?{x:t,y:b(i-t)<Ee?o:a}:b(l-a)<Ee&&r-s>Ee?{x:b(o-a)<Ee?i:r,y:a}:b(s-r)<Ee&&l-n>Ee?{x:r,y:b(i-r)<Ee?o:n}:b(l-n)<Ee&&s-t>Ee?{x:b(o-n)<Ee?i:t,y:n}:null),c.site,null));++v}}}}function Ya(e,t){return t.angle-e.angle}function Za(){oi(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ja(e){var t=e.P,r=e.N;if(!t||!r)return;var n=t.site,a=e.site,i=r.site;if(n===i)return;var o=a.x,s=a.y,l=n.x-o,u=n.y-s,f=i.x-o,c=i.y-s;var h=2*(l*c-u*f);if(h>=-Ce)return;var d=l*l+u*u,v=f*f+c*c,p=(c*d-u*v)/h,g=(l*v-f*d)/h,c=g+s;var m=Ba.pop()||new Za;m.arc=e;m.site=a;m.x=p+o;m.y=c+Math.sqrt(p*p+g*g);m.cy=c;e.circle=m;var y=null,b=Fa._;while(b){if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(b.L)b=b.L;else{y=b.P;break}}else{if(b.R)b=b.R;else{y=b;break}}}Fa.insert(y,m);if(!y)za=m}function Qa(e){var t=e.circle;if(t){if(!t.P)za=t.N;Fa.remove(t);Ba.push(t);oi(t);e.circle=null}}function $a(e){var t=Ia,r=_n(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,a;while(n--){a=t[n];if(!Ka(a,e)||!r(a)||b(a.a.x-a.b.x)<Ee&&b(a.a.y-a.b.y)<Ee){a.a=a.b=null;t.splice(n,1)}}}function Ka(e,t){var r=e.b;if(r)return true;var n=e.a,a=t[0][0],i=t[1][0],o=t[0][1],s=t[1][1],l=e.l,u=e.r,f=l.x,c=l.y,h=u.x,d=u.y,v=(f+h)/2,p=(c+d)/2,g,m;if(d===c){if(v<a||v>=i)return;if(f>h){if(!n)n={x:v,y:o};else if(n.y>=s)return;r={x:v,y:s}}else{if(!n)n={x:v,y:s};else if(n.y<o)return;r={x:v,y:o}}}else{g=(f-h)/(d-c);m=p-g*v;if(g<-1||g>1){if(f>h){if(!n)n={x:(o-m)/g,y:o};else if(n.y>=s)return;r={x:(s-m)/g,y:s}}else{if(!n)n={x:(s-m)/g,y:s};else if(n.y<o)return;r={x:(o-m)/g,y:o}}}else{if(c<d){if(!n)n={x:a,y:g*a+m};else if(n.x>=i)return;r={x:i,y:g*i+m}}else{if(!n)n={x:i,y:g*i+m};else if(n.x<a)return;r={x:a,y:g*a+m}}}}e.a=n;e.b=r;return true}function ei(e,t){this.l=e;this.r=t;this.a=this.b=null}function ti(e,t,r,n){var a=new ei(e,t);Ia.push(a);if(r)ni(a,e,t,r);if(n)ni(a,t,e,n);Da[e.i].edges.push(new ai(a,e,t));Da[t.i].edges.push(new ai(a,t,e));return a}function ri(e,t,r){var n=new ei(e,null);n.a=t;n.b=r;Ia.push(n);return n}function ni(e,t,r,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=r}else if(e.l===r){e.b=n}else{e.a=n}}function ai(e,t,r){var n=e.a,a=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}ai.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ii(){this._=null}function oi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ii.prototype={insert:function(e,t){var r,n,a;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=ui(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){n=r.U;if(r===n.L){a=n.R;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.R){si(this,r);e=r;r=e.U}r.C=false;n.C=true;li(this,n)}}else{a=n.L;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.L){li(this,r);e=r;r=e.U}r.C=false;n.C=true;si(this,n)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,n=e.L,a=e.R,i,o;if(!n)i=a;else if(!a)i=n;else i=ui(a);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(n&&a){o=i.C;i.C=e.C;i.L=n;n.U=i;if(i!==a){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=a;a.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;si(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;li(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;si(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;li(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;si(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;li(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function si(e,t){var r=t,n=t.R,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.R=n.L;if(r.R)r.R.U=r;n.L=r}function li(e,t){var r=t,n=t.L,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.L=n.R;if(r.L)r.L.U=r;n.R=r}function ui(e){while(e.L)e=e.L;return e}function fi(e,t){var r=e.sort(ci).pop(),n,a,i;Ia=[];Da=new Array(e.length);Ra=new ii;Fa=new ii;while(true){i=za;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==n||r.y!==a){Da[r.i]=new Xa(r);Ha(r);n=r.x,a=r.y}r=e.pop()}else if(i){Va(i.arc)}else{break}}if(t)$a(t),Wa(t);var o={cells:Da,edges:Ia};Ra=Fa=Ia=Da=null;return o}function ci(e,t){return t.y-e.y||t.x-e.x}t.geom.voronoi=function(e){var t=ka,r=Ta,n=t,a=r,i=hi;if(e)return o(e);function o(e){var t=new Array(e.length),r=i[0][0],n=i[0][1],a=i[1][0],o=i[1][1];fi(s(e),i).cells.forEach(function(i,s){var l=i.edges,u=i.site,f=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=n&&u.y<=o?[[r,o],[a,o],[a,n],[r,n]]:[];f.point=e[s]});return t}function s(e){return e.map(function(e,t){return{x:Math.round(n(e,t)/Ee)*Ee,y:Math.round(a(e,t)/Ee)*Ee,i:t}})}o.links=function(e){return fi(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];fi(s(e)).cells.forEach(function(r,n){var a=r.site,i=r.edges.sort(Ya),o=-1,s=i.length,l,u,f=i[s-1].edge,c=f.l===a?f.r:f.l;while(++o<s){l=f;u=c;f=i[o].edge;c=f.l===a?f.r:f.l;if(n<u.i&&n<c.i&&di(a,u,c)<0){t.push([e[n],e[u.i],e[c.i]])}}});return t};o.x=function(e){return arguments.length?(n=kt(t=e),o):t};o.y=function(e){return arguments.length?(a=kt(r=e),o):r};o.clipExtent=function(e){if(!arguments.length)return i===hi?null:i;i=e==null?hi:e;return o};o.size=function(e){if(!arguments.length)return i===hi?null:i&&i[1];return o.clipExtent(e&&[[0,0],e])};return o};var hi=[[-1e6,-1e6],[1e6,1e6]];function di(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)};t.geom.quadtree=function(e,t,r,n,a){var i=ka,o=Ta,s;if(s=arguments.length){i=vi;o=pi;if(s===3){a=r;n=t;r=t=0}return l(e)}function l(e){var l,u=kt(i),f=kt(o),c,h,d,v,p,g,m,y;if(t!=null){p=t,g=r,m=n,y=a}else{m=y=-(p=g=Infinity);c=[],h=[];v=e.length;if(s)for(d=0;d<v;++d){l=e[d];if(l.x<p)p=l.x;if(l.y<g)g=l.y;if(l.x>m)m=l.x;if(l.y>y)y=l.y;c.push(l.x);h.push(l.y)}else for(d=0;d<v;++d){var x=+u(l=e[d],d),_=+f(l,d);if(x<p)p=x;if(_<g)g=_;if(x>m)m=x;if(_>y)y=_;c.push(x);h.push(_)}}var w=m-p,A=y-g;if(w>A)y=g+w;else m=p+A;function k(e,t,r,n,a,i,o,s){if(isNaN(r)||isNaN(n))return;if(e.leaf){var l=e.x,u=e.y;if(l!=null){if(b(l-r)+b(u-n)<.01){T(e,t,r,n,a,i,o,s)}else{var f=e.point;e.x=e.y=e.point=null;T(e,f,l,u,a,i,o,s);T(e,t,r,n,a,i,o,s)}}else{e.x=r,e.y=n,e.point=t}}else{T(e,t,r,n,a,i,o,s)}}function T(e,t,r,n,a,i,o,s){var l=(a+o)*.5,u=(i+s)*.5,f=r>=l,c=n>=u,h=c<<1|f;e.leaf=false;e=e.nodes[h]||(e.nodes[h]=gi());if(f)a=l;else o=l;if(c)i=u;else s=u;k(e,t,r,n,a,i,o,s)}var M=gi();M.add=function(e){k(M,e,+u(e,++d),+f(e,d),p,g,m,y)};M.visit=function(e){mi(e,M,p,g,m,y)};M.find=function(e){return yi(M,e[0],e[1],p,g,m,y)};d=-1;if(t==null){while(++d<v){k(M,e[d],c[d],h[d],p,g,m,y)}--d}else e.forEach(M.add);c=h=e=l=null;return M}l.x=function(e){return arguments.length?(i=e,l):i};l.y=function(e){return arguments.length?(o=e,l):o};l.extent=function(e){if(!arguments.length)return t==null?null:[[t,r],[n,a]];if(e==null)t=r=n=a=null;else t=+e[0][0],r=+e[0][1],n=+e[1][0],a=+e[1][1];return l};l.size=function(e){if(!arguments.length)return t==null?null:[n-t,a-r];if(e==null)t=r=n=a=null;else t=r=0,n=+e[0],a=+e[1];return l};return l};function vi(e){return e.x}function pi(e){return e.y}function gi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function mi(e,t,r,n,a,i){if(!e(t,r,n,a,i)){var o=(r+a)*.5,s=(n+i)*.5,l=t.nodes;if(l[0])mi(e,l[0],r,n,o,s);if(l[1])mi(e,l[1],o,n,a,s);if(l[2])mi(e,l[2],r,s,o,i);if(l[3])mi(e,l[3],o,s,a,i)}}function yi(e,t,r,n,a,i,o){var s=Infinity,l;(function e(u,f,c,h,d){if(f>i||c>o||h<n||d<a)return;if(v=u.point){var v,p=t-u.x,g=r-u.y,m=p*p+g*g;if(m<s){var y=Math.sqrt(s=m);n=t-y,a=r-y;i=t+y,o=r+y;l=v}}var b=u.nodes,x=(f+h)*.5,_=(c+d)*.5,w=t>=x,A=r>=_;for(var k=A<<1|w,T=k+4;k<T;++k){if(u=b[k&3])switch(k&3){case 0:e(u,f,c,x,_);break;case 1:e(u,x,c,h,_);break;case 2:e(u,f,_,x,d);break;case 3:e(u,x,_,h,d);break}}})(e,n,a,i,o);return l}t.interpolateRgb=bi;function bi(e,r){e=t.rgb(e);r=t.rgb(r);var n=e.r,a=e.g,i=e.b,o=r.r-n,s=r.g-a,l=r.b-i;return function(e){return"#"+mt(Math.round(n+o*e))+mt(Math.round(a+s*e))+mt(Math.round(i+l*e))}}t.interpolateObject=xi;function xi(e,t){var r={},n={},a;for(a in e){if(a in t){r[a]=Ti(e[a],t[a])}else{n[a]=e[a]}}for(a in t){if(!(a in e)){n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}t.interpolateNumber=_i;function _i(e,t){e=+e,t=+t;return function(r){return e*(1-r)+t*r}}t.interpolateString=wi;function wi(e,t){var r=Ai.lastIndex=ki.lastIndex=0,n,a,i,o=-1,s=[],l=[];e=e+"",t=t+"";while((n=Ai.exec(e))&&(a=ki.exec(t))){if((i=a.index)>r){i=t.slice(r,i);if(s[o])s[o]+=i;else s[++o]=i}if((n=n[0])===(a=a[0])){if(s[o])s[o]+=a;else s[++o]=a}else{s[++o]=null;l.push({i:o,x:_i(n,a)})}r=ki.lastIndex}if(r<t.length){i=t.slice(r);if(s[o])s[o]+=i;else s[++o]=i}return s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var r=0,n;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}var Ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ki=new RegExp(Ai.source,"g");t.interpolate=Ti;function Ti(e,r){var n=t.interpolators.length,a;while(--n>=0&&!(a=t.interpolators[n](e,r)));return a}t.interpolators=[function(e,t){var r=typeof t;return(r==="string"?At.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?bi:wi:t instanceof Ze?bi:Array.isArray(t)?Mi:r==="object"&&isNaN(t)?xi:_i)(e,t)}];t.interpolateArray=Mi;function Mi(e,t){var r=[],n=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)r.push(Ti(e[s],t[s]));for(;s<a;++s)n[s]=e[s];for(;s<i;++s)n[s]=t[s];return function(e){for(s=0;s<o;++s)n[s]=r[s](e);return n}}var Ei=function(){return D};var Ci=t.map({linear:Ei,poly:zi,quad:function(){return Di},cubic:function(){return Ri},sin:function(){return Fi},exp:function(){return Bi},circle:function(){return Ni},elastic:ji,back:Ui,bounce:function(){return Vi}});var Si=t.map({in:D,out:Oi,"in-out":Ii,"out-in":function(e){return Ii(Oi(e))}});t.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";r=Ci.get(r)||Ei;a=Si.get(a)||D;return Li(a(r.apply(null,n.call(arguments,1))))};function Li(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Oi(e){return function(t){return 1-e(1-t)}}function Ii(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Di(e){return e*e}function Ri(e){return e*e*e}function Pi(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function zi(e){return function(t){return Math.pow(t,e)}}function Fi(e){return 1-Math.cos(e*Ie)}function Bi(e){return Math.pow(2,10*(e-1))}function Ni(e){return 1-Math.sqrt(1-e*e)}function ji(e,t){var r;if(arguments.length<2)t=.45;if(arguments.length)r=t/Le*Math.asin(1/e);else e=1,r=t/4;return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-r)*Le/t)}}function Ui(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Vi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}t.interpolateHcl=Hi;function Hi(e,r){e=t.hcl(e);r=t.hcl(r);var n=e.h,a=e.c,i=e.l,o=r.h-n,s=r.c-a,l=r.l-i;if(isNaN(s))s=0,a=isNaN(a)?r.c:a;if(isNaN(o))o=0,n=isNaN(n)?r.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(n+o*e,a+s*e,i+l*e)+""}}t.interpolateHsl=qi;function qi(e,r){e=t.hsl(e);r=t.hsl(r);var n=e.h,a=e.s,i=e.l,o=r.h-n,s=r.s-a,l=r.l-i;if(isNaN(s))s=0,a=isNaN(a)?r.s:a;if(isNaN(o))o=0,n=isNaN(n)?r.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return $e(n+o*e,a+s*e,i+l*e)+""}}t.interpolateLab=Gi;function Gi(e,r){e=t.lab(e);r=t.lab(r);var n=e.l,a=e.a,i=e.b,o=r.l-n,s=r.a-a,l=r.b-i;return function(e){return lt(n+o*e,a+s*e,i+l*e)+""}}t.interpolateRound=Xi;function Xi(e,t){t-=e;return function(r){return Math.round(e+t*r)}}t.transform=function(e){var r=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Wi(t?t.matrix:Qi)})(e)};function Wi(e){var t=[e.a,e.b],r=[e.c,e.d],n=Zi(t),a=Yi(t,r),i=Zi(Ji(r,t,-a))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;a*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Re;this.translate=[e.e,e.f];this.scale=[n,i];this.skew=i?Math.atan2(a,i)*Re:0}Wi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Yi(e,t){return e[0]*t[0]+e[1]*t[1]}function Zi(e){var t=Math.sqrt(Yi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Ji(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Qi={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=no;function $i(e){return e.length?e.pop()+",":""}function Ki(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:_i(e[0],t[0])},{i:a-2,x:_i(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function eo(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push($i(r)+"rotate(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"rotate("+t+")")}}function to(e,t,r,n){if(e!==t){n.push({i:r.push($i(r)+"skewX(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"skewX("+t+")")}}function ro(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push($i(r)+"scale(",null,",",null,")");n.push({i:a-4,x:_i(e[0],t[0])},{i:a-2,x:_i(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push($i(r)+"scale("+t+")")}}function no(e,r){var n=[],a=[];e=t.transform(e),r=t.transform(r);Ki(e.translate,r.translate,n,a);eo(e.rotate,r.rotate,n,a);to(e.skew,r.skew,n,a);ro(e.scale,r.scale,n,a);e=r=null;return function(e){var t=-1,r=a.length,i;while(++t<r)n[(i=a[t]).i]=i.x(e);return n.join("")}}function ao(e,t){t=(t-=e=+e)||1/t;return function(r){return(r-e)/t}}function io(e,t){t=(t-=e=+e)||1/t;return function(r){return Math.max(0,Math.min(1,(r-e)/t))}}t.layout={};t.layout.bundle=function(){return function(e){var t=[],r=-1,n=e.length;while(++r<n)t.push(oo(e[r]));return t}};function oo(e){var t=e.source,r=e.target,n=lo(t,r),a=[t];while(t!==n){t=t.parent;a.push(t)}var i=a.length;while(r!==n){a.splice(i,0,r);r=r.parent}return a}function so(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function lo(e,t){if(e===t)return e;var r=so(e),n=so(t),a=r.pop(),i=n.pop(),o=null;while(a===i){o=a;a=r.pop();i=n.pop()}return o}t.layout.chord=function(){var e={},r,n,a,i,o=0,s,l,u;function f(){var e={},f=[],h=t.range(i),d=[],v,p,g,m,y;r=[];n=[];v=0,m=-1;while(++m<i){p=0,y=-1;while(++y<i){p+=a[m][y]}f.push(p);d.push(t.range(i));v+=p}if(s){h.sort(function(e,t){return s(f[e],f[t])})}if(l){d.forEach(function(e,t){e.sort(function(e,r){return l(a[t][e],a[t][r])})})}v=(Le-o*i)/v;p=0,m=-1;while(++m<i){g=p,y=-1;while(++y<i){var b=h[m],x=d[b][y],_=a[b][x],w=p,A=p+=_*v;e[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:A,value:_}}n[b]={index:b,startAngle:g,endAngle:p,value:f[b]};p+=o}m=-1;while(++m<i){y=m-1;while(++y<i){var k=e[m+"-"+y],T=e[y+"-"+m];if(k.value||T.value){r.push(k.value<T.value?{source:T,target:k}:{source:k,target:T})}}}if(u)c()}function c(){r.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(t){if(!arguments.length)return a;i=(a=t)&&a.length;r=n=null;return e};e.padding=function(t){if(!arguments.length)return o;o=t;r=n=null;return e};e.sortGroups=function(t){if(!arguments.length)return s;s=t;r=n=null;return e};e.sortSubgroups=function(t){if(!arguments.length)return l;l=t;r=null;return e};e.sortChords=function(t){if(!arguments.length)return u;u=t;if(r)c();return e};e.chords=function(){if(!r)f();return r};e.groups=function(){if(!n)f();return n};return e};t.layout.force=function(){var e={},r=t.dispatch("start","tick","end"),n,a=[1,1],i,o,s=.9,l=po,u=go,f=-30,c=mo,h=.1,d=.64,v=[],p=[],g,m,y;function b(e){return function(t,r,n,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,s=a-r,l=i*i+o*o;if(s*s/d<l){if(l<c){var u=t.charge/l;e.px-=i*u;e.py-=o*u}return true}if(t.point&&l&&l<c){var u=t.pointCharge/l;e.px-=i*u;e.py-=o*u}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){n=null;r.end({type:"end",alpha:o=0});return true}var e=v.length,i=p.length,l,u,c,d,x,_,w,A,k;for(u=0;u<i;++u){c=p[u];d=c.source;x=c.target;A=x.x-d.x;k=x.y-d.y;if(_=A*A+k*k){_=o*m[u]*((_=Math.sqrt(_))-g[u])/_;A*=_;k*=_;x.x-=A*(w=d.weight+x.weight?d.weight/(d.weight+x.weight):.5);x.y-=k*w;d.x+=A*(w=1-w);d.y+=k*w}}if(w=o*h){A=a[0]/2;k=a[1]/2;u=-1;if(w)while(++u<e){c=v[u];c.x+=(A-c.x)*w;c.y+=(k-c.y)*w}}if(f){vo(l=t.geom.quadtree(v),o,y);u=-1;while(++u<e){if(!(c=v[u]).fixed){l.visit(b(c))}}}u=-1;while(++u<e){c=v[u];if(c.fixed){c.x=c.px;c.y=c.py}else{c.x-=(c.px-(c.px=c.x))*s;c.y-=(c.py-(c.py=c.y))*s}}r.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return v;v=t;return e};e.links=function(t){if(!arguments.length)return p;p=t;return e};e.size=function(t){if(!arguments.length)return a;a=t;return e};e.linkDistance=function(t){if(!arguments.length)return l;l=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return s;s=+t;return e};e.charge=function(t){if(!arguments.length)return f;f=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(c);c=t*t;return e};e.gravity=function(t){if(!arguments.length)return h;h=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(d);d=t*t;return e};e.alpha=function(t){if(!arguments.length)return o;t=+t;if(o){if(t>0){o=t}else{n.c=null,n.t=NaN,n=null;r.end({type:"end",alpha:o=0})}}else if(t>0){r.start({type:"start",alpha:o=t});n=Rt(e.tick)}return e};e.start=function(){var t,r=v.length,n=p.length,i=a[0],o=a[1],s,c;for(t=0;t<r;++t){(c=v[t]).index=t;c.weight=0}for(t=0;t<n;++t){c=p[t];if(typeof c.source=="number")c.source=v[c.source];if(typeof c.target=="number")c.target=v[c.target];++c.source.weight;++c.target.weight}for(t=0;t<r;++t){c=v[t];if(isNaN(c.x))c.x=h("x",i);if(isNaN(c.y))c.y=h("y",o);if(isNaN(c.px))c.px=c.x;if(isNaN(c.py))c.py=c.y}g=[];if(typeof l==="function")for(t=0;t<n;++t)g[t]=+l.call(this,p[t],t);else for(t=0;t<n;++t)g[t]=l;m=[];if(typeof u==="function")for(t=0;t<n;++t)m[t]=+u.call(this,p[t],t);else for(t=0;t<n;++t)m[t]=u;y=[];if(typeof f==="function")for(t=0;t<r;++t)y[t]=+f.call(this,v[t],t);else for(t=0;t<r;++t)y[t]=f;function h(e,a){if(!s){s=new Array(r);for(l=0;l<r;++l){s[l]=[]}for(l=0;l<n;++l){var i=p[l];s[i.source.index].push(i.target);s[i.target.index].push(i.source)}}var o=s[t],l=-1,u=o.length,f;while(++l<u)if(!isNaN(f=o[l][e]))return f;return Math.random()*a}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!i)i=t.behavior.drag().origin(D).on("dragstart.force",uo).on("drag.force",x).on("dragend.force",fo);if(!arguments.length)return i;this.on("mouseover.force",co).on("mouseout.force",ho).call(i)};function x(r){r.px=t.event.x,r.py=t.event.y;e.resume()}return t.rebind(e,r,"on")};function uo(e){e.fixed|=2}function fo(e){e.fixed&=~6}function co(e){e.fixed|=4;e.px=e.x,e.py=e.y}function ho(e){e.fixed&=~4}function vo(e,t,r){var n=0,a=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,s=-1,l;while(++s<o){l=i[s];if(l==null)continue;vo(l,t,r);e.charge+=l.charge;n+=l.charge*l.cx;a+=l.charge*l.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;n+=u*e.point.x;a+=u*e.point.y}e.cx=n/e.charge;e.cy=a/e.charge}var po=20,go=1,mo=Infinity;t.layout.hierarchy=function(){var e=Ao,t=_o,r=wo;function n(a){var i=[a],o=[],s;a.depth=0;while((s=i.pop())!=null){o.push(s);if((u=t.call(n,s,s.depth))&&(l=u.length)){var l,u,f;while(--l>=0){i.push(f=u[l]);f.parent=s;f.depth=s.depth+1}if(r)s.value=0;s.children=u}else{if(r)s.value=+r.call(n,s,s.depth)||0;delete s.children}}xo(a,function(t){var n,a;if(e&&(n=t.children))n.sort(e);if(r&&(a=t.parent))a.value+=t.value});return o}n.sort=function(t){if(!arguments.length)return e;e=t;return n};n.children=function(e){if(!arguments.length)return t;t=e;return n};n.value=function(e){if(!arguments.length)return r;r=e;return n};n.revalue=function(e){if(r){bo(e,function(e){if(e.children)e.value=0});xo(e,function(e){var t;if(!e.children)e.value=+r.call(n,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return n};function yo(e,r){t.rebind(e,r,"sort","children","value");e.nodes=e;e.links=ko;return e}function bo(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((a=e.children)&&(n=a.length)){var n,a;while(--n>=0)r.push(a[n])}}}function xo(e,t){var r=[e],n=[];while((e=r.pop())!=null){n.push(e);if((o=e.children)&&(i=o.length)){var a=-1,i,o;while(++a<i)r.push(o[a])}}while((e=n.pop())!=null){t(e)}}function _o(e){return e.children}function wo(e){return e.value}function Ao(e,t){return t.value-e.value}function ko(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function n(e,t,r,a){var i=e.children;e.x=t;e.y=e.depth*a;e.dx=r;e.dy=a;if(i&&(s=i.length)){var o=-1,s,l,u;r=e.value?r/e.value:0;while(++o<s){n(l=i[o],t,u=l.value*r,a);t+=u}}}function a(e){var t=e.children,r=0;if(t&&(i=t.length)){var n=-1,i;while(++n<i)r=Math.max(r,a(t[n]))}return 1+r}function i(t,i){var o=e.call(this,t,i);n(o[0],0,r[0],r[1]/a(o[0]));return o}i.size=function(e){if(!arguments.length)return r;r=e;return i};return yo(i,e)};t.layout.pie=function(){var e=Number,r=To,n=0,a=Le,i=0;function o(s){var l=s.length,u=s.map(function(t,r){return+e.call(o,t,r)}),f=+(typeof n==="function"?n.apply(this,arguments):n),c=(typeof a==="function"?a.apply(this,arguments):a)-f,h=Math.min(Math.abs(c)/l,+(typeof i==="function"?i.apply(this,arguments):i)),d=h*(c<0?-1:1),v=t.sum(u),p=v?(c-l*d)/v:0,g=t.range(l),m=[],y;if(r!=null)g.sort(r===To?function(e,t){return u[t]-u[e]}:function(e,t){return r(s[e],s[t])});g.forEach(function(e){m[e]={data:s[e],value:y=u[e],startAngle:f,endAngle:f+=y*p+d,padAngle:h}});return m}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return r;r=e;return o};o.startAngle=function(e){if(!arguments.length)return n;n=e;return o};o.endAngle=function(e){if(!arguments.length)return a;a=e;return o};o.padAngle=function(e){if(!arguments.length)return i;i=e;return o};return o};var To={};t.layout.stack=function(){var e=D,r=Oo,n=Io,a=Co,i=Mo,o=Eo;function s(l,u){if(!(p=l.length))return l;var f=l.map(function(t,r){return e.call(s,t,r)});var c=f.map(function(e){return e.map(function(e,t){return[i.call(s,e,t),o.call(s,e,t)]})});var h=r.call(s,c,u);f=t.permute(f,h);c=t.permute(c,h);var d=n.call(s,c,u);var v=f[0].length,p,g,m,y;for(m=0;m<v;++m){a.call(s,f[0][m],y=d[m],c[0][m][1]);for(g=1;g<p;++g){a.call(s,f[g][m],y+=c[g-1][m][1],c[g][m][1])}}return l}s.values=function(t){if(!arguments.length)return e;e=t;return s};s.order=function(e){if(!arguments.length)return r;r=typeof e==="function"?e:So.get(e)||Oo;return s};s.offset=function(e){if(!arguments.length)return n;n=typeof e==="function"?e:Lo.get(e)||Io;return s};s.x=function(e){if(!arguments.length)return i;i=e;return s};s.y=function(e){if(!arguments.length)return o;o=e;return s};s.out=function(e){if(!arguments.length)return a;a=e;return s};return s};function Mo(e){return e.x}function Eo(e){return e.y}function Co(e,t,r){e.y0=t;e.y=r}var So=t.map({"inside-out":function(e){var r=e.length,n,a,i=e.map(Do),o=e.map(Ro),s=t.range(r).sort(function(e,t){return i[e]-i[t]}),l=0,u=0,f=[],c=[];for(n=0;n<r;++n){a=s[n];if(l<u){l+=o[a];f.push(a)}else{u+=o[a];c.push(a)}}return c.reverse().concat(f)},reverse:function(e){return t.range(e.length).reverse()},default:Oo});var Lo=t.map({silhouette:function(e){var t=e.length,r=e[0].length,n=[],a=0,i,o,s,l=[];for(o=0;o<r;++o){for(i=0,s=0;i<t;i++)s+=e[i][o][1];if(s>a)a=s;n.push(s)}for(o=0;o<r;++o){l[o]=(a-n[o])/2}return l},wiggle:function(e){var t=e.length,r=e[0],n=r.length,a,i,o,s,l,u,f,c,h,d=[];d[0]=c=h=0;for(i=1;i<n;++i){for(a=0,s=0;a<t;++a)s+=e[a][i][1];for(a=0,l=0,f=r[i][0]-r[i-1][0];a<t;++a){for(o=0,u=(e[a][i][1]-e[a][i-1][1])/(2*f);o<a;++o){u+=(e[o][i][1]-e[o][i-1][1])/f}l+=u*e[a][i][1]}d[i]=c-=s?l/s*f:0;if(c<h)h=c}for(i=0;i<n;++i)d[i]-=h;return d},expand:function(e){var t=e.length,r=e[0].length,n=1/t,a,i,o,s=[];for(i=0;i<r;++i){for(a=0,o=0;a<t;a++)o+=e[a][i][1];if(o)for(a=0;a<t;a++)e[a][i][1]/=o;else for(a=0;a<t;a++)e[a][i][1]=n}for(i=0;i<r;++i)s[i]=0;return s},zero:Io});function Oo(e){return t.range(e.length)}function Io(e){var t=-1,r=e[0].length,n=[];while(++t<r)n[t]=0;return n}function Do(e){var t=1,r=0,n=e[0][1],a,i=e.length;for(;t<i;++t){if((a=e[t][1])>n){r=t;n=a}}return r}function Ro(e){return e.reduce(Po,0)}function Po(e,t){return e+t[1]}t.layout.histogram=function(){var e=true,r=Number,n=Bo,a=zo;function i(i,o){var s=[],l=i.map(r,this),u=n.call(this,l,o),f=a.call(this,u,l,o),c,o=-1,h=l.length,d=f.length-1,v=e?1:1/h,p;while(++o<d){c=s[o]=[];c.dx=f[o+1]-(c.x=f[o]);c.y=0}if(d>0){o=-1;while(++o<h){p=l[o];if(p>=u[0]&&p<=u[1]){c=s[t.bisect(f,p,1,d)-1];c.y+=v;c.push(i[o])}}}return s}i.value=function(e){if(!arguments.length)return r;r=e;return i};i.range=function(e){if(!arguments.length)return n;n=kt(e);return i};i.bins=function(e){if(!arguments.length)return a;a=typeof e==="number"?function(t){return Fo(t,e)}:kt(e);return i};i.frequency=function(t){if(!arguments.length)return e;e=!!t;return i};return i};function zo(e,t){return Fo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Fo(e,t){var r=-1,n=+e[0],a=(e[1]-n)/t,i=[];while(++r<=t)i[r]=a*r+n;return i}function Bo(e){return[t.min(e),t.max(e)]}t.layout.pack=function(){var e=t.layout.hierarchy().sort(No),r=0,n=[1,1],a;function i(t,i){var o=e.call(this,t,i),s=o[0],l=n[0],u=n[1],f=a==null?Math.sqrt:typeof a==="function"?a:function(){return a};s.x=s.y=0;xo(s,function(e){e.r=+f(e.value)});xo(s,Ho);if(r){var c=r*(a?1:Math.max(2*s.r/l,2*s.r/u))/2;xo(s,function(e){e.r+=c});xo(s,Ho);xo(s,function(e){e.r-=c})}Xo(s,l/2,u/2,a?1:1/Math.max(2*s.r/l,2*s.r/u));return o}i.size=function(e){if(!arguments.length)return n;n=e;return i};i.radius=function(e){if(!arguments.length)return a;a=e==null||typeof e==="function"?e:+e;return i};i.padding=function(e){if(!arguments.length)return r;r=+e;return i};return yo(i,e)};function No(e,t){return e.value-t.value}function jo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function Uo(e,t){e._pack_next=t;t._pack_prev=e}function Vo(e,t){var r=t.x-e.x,n=t.y-e.y,a=e.r+t.r;return.999*a*a>r*r+n*n}function Ho(e){if(!(t=e.children)||!(h=t.length))return;var t,r=Infinity,n=-Infinity,a=Infinity,i=-Infinity,o,s,l,u,f,c,h;function d(e){r=Math.min(e.x-e.r,r);n=Math.max(e.x+e.r,n);a=Math.min(e.y-e.r,a);i=Math.max(e.y+e.r,i)}t.forEach(qo);o=t[0];o.x=-o.r;o.y=0;d(o);if(h>1){s=t[1];s.x=s.r;s.y=0;d(s);if(h>2){l=t[2];Wo(o,s,l);d(l);jo(o,l);o._pack_prev=l;jo(l,s);s=o._pack_next;for(u=3;u<h;u++){Wo(o,s,l=t[u]);var v=0,p=1,g=1;for(f=s._pack_next;f!==s;f=f._pack_next,p++){if(Vo(f,l)){v=1;break}}if(v==1){for(c=o._pack_prev;c!==f._pack_prev;c=c._pack_prev,g++){if(Vo(c,l)){break}}}if(v){if(p<g||p==g&&s.r<o.r)Uo(o,s=f);else Uo(o=c,s);u--}else{jo(o,l);s=l;d(l)}}}}var m=(r+n)/2,y=(a+i)/2,b=0;for(u=0;u<h;u++){l=t[u];l.x-=m;l.y-=y;b=Math.max(b,l.r+Math.sqrt(l.x*l.x+l.y*l.y))}e.r=b;t.forEach(Go)}function qo(e){e._pack_next=e._pack_prev=e}function Go(e){delete e._pack_next;delete e._pack_prev}function Xo(e,t,r,n){var a=e.children;e.x=t+=n*e.x;e.y=r+=n*e.y;e.r*=n;if(a){var i=-1,o=a.length;while(++i<o)Xo(a[i],t,r,n)}}function Wo(e,t,r){var n=e.r+r.r,a=t.x-e.x,i=t.y-e.y;if(n&&(a||i)){var o=t.r+r.r,s=a*a+i*i;o*=o;n*=n;var l=.5+(n-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(n+s)-(n-=s)*n-o*o))/(2*s);r.x=e.x+l*a+u*i;r.y=e.y+l*i-u*a}else{r.x=e.x+n;r.y=e.y}}t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Yo,n=[1,1],a=null;function i(t,i){var u=e.call(this,t,i),c=u[0],h=o(c);xo(h,s),h.parent.m=-h.z;bo(h,l);if(a)bo(c,f);else{var d=c,v=c,p=c;bo(c,function(e){if(e.x<d.x)d=e;if(e.x>v.x)v=e;if(e.depth>p.depth)p=e});var g=r(d,v)/2-d.x,m=n[0]/(v.x+r(v,d)/2+g),y=n[1]/(p.depth||1);bo(c,function(e){e.x=(e.x+g)*m;e.y=e.depth*y})}return u}function o(e){var t={A:null,children:[e]},r=[t],n;while((n=r.pop())!=null){for(var a=n.children,i,o=0,s=a.length;o<s;++o){r.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function s(e){var t=e.children,n=e.parent.children,a=e.i?n[e.i-1]:null;if(t.length){$o(e);var i=(t[0].z+t[t.length-1].z)/2;if(a){e.z=a.z+r(e._,a._);e.m=e.z-i}else{e.z=i}}else if(a){e.z=a.z+r(e._,a._)}e.parent.A=u(e,a,e.parent.A||n[0])}function l(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function u(e,t,n){if(t){var a=e,i=e,o=t,s=a.parent.children[0],l=a.m,u=i.m,f=o.m,c=s.m,h;while(o=Jo(o),a=Zo(a),o&&a){s=Zo(s);i=Jo(i);i.a=e;h=o.z+f-a.z-l+r(o._,a._);if(h>0){Qo(Ko(o,e,n),e,h);l+=h;u+=h}f+=o.m;l+=a.m;c+=s.m;u+=i.m}if(o&&!Jo(i)){i.t=o;i.m+=f-u}if(a&&!Zo(s)){s.t=a;s.m+=l-c;n=e}}return n}function f(e){e.x*=n[0];e.y=e.depth*n[1]}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return a?null:n;a=(n=e)==null?f:null;return i};i.nodeSize=function(e){if(!arguments.length)return a?n:null;a=(n=e)==null?null:f;return i};return yo(i,e)};function Yo(e,t){return e.parent==t.parent?1:2}function Zo(e){var t=e.children;return t.length?t[0]:e.t}function Jo(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Qo(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function $o(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function Ko(e,t,r){return e.a.parent===t.parent?e.a:r}t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Yo,n=[1,1],a=false;function i(t,i){var o=e.call(this,t,i),s=o[0],l,u=0;xo(s,function(e){var t=e.children;if(t&&t.length){e.x=ts(t);e.y=es(t)}else{e.x=l?u+=r(e,l):0;e.y=0;l=e}});var f=rs(s),c=ns(s),h=f.x-r(f,c)/2,d=c.x+r(c,f)/2;xo(s,a?function(e){e.x=(e.x-s.x)*n[0];e.y=(s.y-e.y)*n[1]}:function(e){e.x=(e.x-h)/(d-h)*n[0];e.y=(1-(s.y?e.y/s.y:1))*n[1]});return o}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return a?null:n;a=(n=e)==null;return i};i.nodeSize=function(e){if(!arguments.length)return a?n:null;a=(n=e)!=null;return i};return yo(i,e)};function es(e){return 1+t.max(e,function(e){return e.y})}function ts(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function rs(e){var t=e.children;return t&&t.length?rs(t[0]):e}function ns(e){var t=e.children,r;return t&&(r=t.length)?ns(t[r-1]):e}t.layout.treemap=function(){var e=t.layout.hierarchy(),r=Math.round,n=[1,1],a=null,i=as,o=false,s,l="squarify",u=.5*(1+Math.sqrt(5));function f(e,t){var r=-1,n=e.length,a,i;while(++r<n){i=(a=e[r]).value*(t<0?0:t);a.area=isNaN(i)||i<=0?0:i}}function c(e){var t=e.children;if(t&&t.length){var r=i(e),n=[],a=t.slice(),o,s=Infinity,u,h=l==="slice"?r.dx:l==="dice"?r.dy:l==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),p;f(a,r.dx*r.dy/e.value);n.area=0;while((p=a.length)>0){n.push(o=a[p-1]);n.area+=o.area;if(l!=="squarify"||(u=d(n,h))<=s){a.pop();s=u}else{n.area-=n.pop().area;v(n,h,r,false);h=Math.min(r.dx,r.dy);n.length=n.area=0;s=Infinity}}if(n.length){v(n,h,r,true);n.length=n.area=0}t.forEach(c)}}function h(e){var t=e.children;if(t&&t.length){var r=i(e),n=t.slice(),a,o=[];f(n,r.dx*r.dy/e.value);o.area=0;while(a=n.pop()){o.push(a);o.area+=a.area;if(a.z!=null){v(o,a.z?r.dx:r.dy,r,!n.length);o.length=o.area=0}}t.forEach(h)}}function d(e,t){var r=e.area,n,a=0,i=Infinity,o=-1,s=e.length;while(++o<s){if(!(n=e[o].area))continue;if(n<i)i=n;if(n>a)a=n}r*=r;t*=t;return r?Math.max(t*a*u/r,r/(t*i*u)):Infinity}function v(e,t,n,a){var i=-1,o=e.length,s=n.x,l=n.y,u=t?r(e.area/t):0,f;if(t==n.dx){if(a||u>n.dy)u=n.dy;while(++i<o){f=e[i];f.x=s;f.y=l;f.dy=u;s+=f.dx=Math.min(n.x+n.dx-s,u?r(f.area/u):0)}f.z=true;f.dx+=n.x+n.dx-s;n.y+=u;n.dy-=u}else{if(a||u>n.dx)u=n.dx;while(++i<o){f=e[i];f.x=s;f.y=l;f.dx=u;l+=f.dy=Math.min(n.y+n.dy-l,u?r(f.area/u):0)}f.z=false;f.dy+=n.y+n.dy-l;n.x+=u;n.dx-=u}}function p(t){var r=s||e(t),a=r[0];a.x=a.y=0;if(a.value)a.dx=n[0],a.dy=n[1];else a.dx=a.dy=0;if(s)e.revalue(a);f([a],a.dx*a.dy/a.value);(s?h:c)(a);if(o)s=r;return r}p.size=function(e){if(!arguments.length)return n;n=e;return p};p.padding=function(e){if(!arguments.length)return a;function t(t){var r=e.call(p,t,t.depth);return r==null?as(t):is(t,typeof r==="number"?[r,r,r,r]:r)}function r(t){return is(t,e)}var n;i=(a=e)==null?as:(n=typeof e)==="function"?t:n==="number"?(e=[e,e,e,e],r):r;return p};p.round=function(e){if(!arguments.length)return r!=Number;r=e?Math.round:Number;return p};p.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return p};p.ratio=function(e){if(!arguments.length)return u;u=e;return p};p.mode=function(e){if(!arguments.length)return l;l=e+"";return p};return yo(p,e)};function as(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function is(e,t){var r=e.x+t[3],n=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(a<0){r+=a/2;a=0}if(i<0){n+=i/2;i=0}return{x:r,y:n,dx:a,dy:i}}t.random={normal:function(e,t){var r=arguments.length;if(r<2)t=1;if(r<1)e=0;return function(){var r,n,a;do{r=Math.random()*2-1;n=Math.random()*2-1;a=r*r+n*n}while(!a||a>1);return e+t*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(e){return function(){for(var t=0,r=0;r<e;r++)t+=Math.random();return t}}};t.scale={};function os(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function ss(e){return e.rangeExtent?e.rangeExtent():os(e.range())}function ls(e,t,r,n){var a=r(e[0],e[1]),i=n(t[0],t[1]);return function(e){return i(a(e))}}function us(e,t){var r=0,n=e.length-1,a=e[r],i=e[n],o;if(i<a){o=r,r=n,n=o;o=a,a=i,i=o}e[r]=t.floor(a);e[n]=t.ceil(i);return e}function fs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cs}var cs={floor:D,ceil:D};function hs(e,r,n,a){var i=[],o=[],s=0,l=Math.min(e.length,r.length)-1;if(e[l]<e[0]){e=e.slice().reverse();r=r.slice().reverse()}while(++s<=l){i.push(n(e[s-1],e[s]));o.push(a(r[s-1],r[s]))}return function(r){var n=t.bisect(e,r,1,l)-1;return o[n](i[n](r))}}t.scale.linear=function(){return ds([0,1],[0,1],Ti,false)};function ds(e,t,r,n){var a,i;function o(){var o=Math.min(e.length,t.length)>2?hs:ls,l=n?io:ao;a=o(e,t,l,r);i=o(t,e,l,Ti);return s}function s(e){return a(e)}s.invert=function(e){return i(e)};s.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};s.range=function(e){if(!arguments.length)return t;t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(Xi)};s.clamp=function(e){if(!arguments.length)return n;n=e;return o()};s.interpolate=function(e){if(!arguments.length)return r;r=e;return o()};s.ticks=function(t){return ms(e,t)};s.tickFormat=function(t,r){return ys(e,t,r)};s.nice=function(t){ps(e,t);return o()};s.copy=function(){return ds(e,t,r,n)};return o()}function vs(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function ps(e,t){us(e,fs(gs(e,t)[2]));us(e,fs(gs(e,t)[2]));return e}function gs(e,t){if(t==null)t=10;var r=os(e),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),i=t/n*a;if(i<=.15)a*=10;else if(i<=.35)a*=5;else if(i<=.75)a*=2;r[0]=Math.ceil(r[0]/a)*a;r[1]=Math.floor(r[1]/a)*a+a*.5;r[2]=a;return r}function ms(e,r){return t.range.apply(t,gs(e,r))}function ys(e,r,n){var a=gs(e,r);if(n){var i=Vt.exec(n);i.shift();if(i[8]==="s"){var o=t.formatPrefix(Math.max(b(a[0]),b(a[1])));if(!i[7])i[7]="."+xs(o.scale(a[2]));i[8]="f";n=t.format(i.join(""));return function(e){return n(o.scale(e))+o.symbol}}if(!i[7])i[7]="."+_s(i[8],a);n=i.join("")}else{n=",."+xs(a[2])+"f"}return t.format(n)}var bs={s:1,g:1,p:1,r:1,e:1};function xs(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function _s(e,t){var r=xs(t[2]);return e in bs?Math.abs(r-xs(Math.max(b(t[0]),b(t[1]))))+ +(e!=="e"):r-(e==="%")*2}t.scale.log=function(){return ws(t.scale.linear().domain([0,1]),10,true,[1,10])};function ws(e,r,n,a){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(r)}function o(e){return n?Math.pow(r,e):-Math.pow(r,-e)}function s(t){return e(i(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){if(!arguments.length)return a;n=t[0]>=0;e.domain((a=t.map(Number)).map(i));return s};s.base=function(t){if(!arguments.length)return r;r=+t;e.domain(a.map(i));return s};s.nice=function(){var t=us(a.map(i),n?Math:ks);e.domain(t);a=t.map(o);return s};s.ticks=function(){var e=os(a),t=[],s=e[0],l=e[1],u=Math.floor(i(s)),f=Math.ceil(i(l)),c=r%1?2:r;if(isFinite(f-u)){if(n){for(;u<f;u++)for(var h=1;h<c;h++)t.push(o(u)*h);t.push(o(u))}else{t.push(o(u));for(;u++<f;)for(var h=c-1;h>0;h--)t.push(o(u)*h)}for(u=0;t[u]<s;u++){}for(f=t.length;t[f-1]>l;f--){}t=t.slice(u,f)}return t};s.tickFormat=function(e,n){if(!arguments.length)return As;if(arguments.length<2)n=As;else if(typeof n!=="function")n=t.format(n);var a=Math.max(1,r*e/s.ticks().length);return function(e){var t=e/o(Math.round(i(e)));if(t*r<r-.5)t*=r;return t<=a?n(e):""}};s.copy=function(){return ws(e.copy(),r,n,a)};return vs(s,e)}var As=t.format(".0e"),ks={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return Ts(t.scale.linear(),1,[0,1])};function Ts(e,t,r){var n=Ms(t),a=Ms(1/t);function i(t){return e(n(t))}i.invert=function(t){return a(e.invert(t))};i.domain=function(t){if(!arguments.length)return r;e.domain((r=t.map(Number)).map(n));return i};i.ticks=function(e){return ms(r,e)};i.tickFormat=function(e,t){return ys(r,e,t)};i.nice=function(e){return i.domain(ps(r,e))};i.exponent=function(o){if(!arguments.length)return t;n=Ms(t=o);a=Ms(1/t);e.domain(r.map(n));return i};i.copy=function(){return Ts(e.copy(),t,r)};return vs(i,e)}function Ms(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Es([],{t:"range",a:[[]]})};function Es(e,r){var n,a,i;function o(t){return a[((n.get(t)||(r.t==="range"?n.set(t,e.push(t)):NaN))-1)%a.length]}function s(r,n){return t.range(e.length).map(function(e){return r+n*e})}o.domain=function(t){if(!arguments.length)return e;e=[];n=new w;var a=-1,i=t.length,s;while(++a<i)if(!n.has(s=t[a]))n.set(s,e.push(s));return o[r.t].apply(o,r.a)};o.range=function(e){if(!arguments.length)return a;a=e;i=0;r={t:"range",a:arguments};return o};o.rangePoints=function(t,n){if(arguments.length<2)n=0;var l=t[0],u=t[1],f=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+n);a=s(l+f*n/2,f);i=0;r={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(t,n){if(arguments.length<2)n=0;var l=t[0],u=t[1],f=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+n)|0;a=s(l+Math.round(f*n/2+(u-l-(e.length-1+n)*f)/2),f);i=0;r={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(t,n,l){if(arguments.length<2)n=0;if(arguments.length<3)l=n;var u=t[1]<t[0],f=t[u-0],c=t[1-u],h=(c-f)/(e.length-n+2*l);a=s(f+h*l,h);if(u)a.reverse();i=h*(1-n);r={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(t,n,l){if(arguments.length<2)n=0;if(arguments.length<3)l=n;var u=t[1]<t[0],f=t[u-0],c=t[1-u],h=Math.floor((c-f)/(e.length-n+2*l));a=s(f+Math.round((c-f-(e.length-n)*h)/2),h);if(u)a.reverse();i=Math.round(h*(1-n));r={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return os(r.a[0])};o.copy=function(){return Es(e,r)};return o.domain(e)}t.scale.category10=function(){return t.scale.ordinal().range(Cs)};t.scale.category20=function(){return t.scale.ordinal().range(Ss)};t.scale.category20b=function(){return t.scale.ordinal().range(Ls)};t.scale.category20c=function(){return t.scale.ordinal().range(Os)};var Cs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pt);var Ss=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pt);var Ls=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pt);var Os=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pt);t.scale.quantile=function(){return Is([],[])};function Is(e,r){var n;function a(){var a=0,o=r.length;n=[];while(++a<o)n[a-1]=t.quantile(e,a/o);return i}function i(e){if(!isNaN(e=+e))return r[t.bisect(n,e)]}i.domain=function(t){if(!arguments.length)return e;e=t.map(v).filter(p).sort(d);return a()};i.range=function(e){if(!arguments.length)return r;r=e;return a()};i.quantiles=function(){return n};i.invertExtent=function(t){t=r.indexOf(t);return t<0?[NaN,NaN]:[t>0?n[t-1]:e[0],t<n.length?n[t]:e[e.length-1]]};i.copy=function(){return Is(e,r)};return a()}t.scale.quantize=function(){return Ds(0,1,[0,1])};function Ds(e,t,r){var n,a;function i(t){return r[Math.max(0,Math.min(a,Math.floor(n*(t-e))))]}function o(){n=r.length/(t-e);a=r.length-1;return i}i.domain=function(r){if(!arguments.length)return[e,t];e=+r[0];t=+r[r.length-1];return o()};i.range=function(e){if(!arguments.length)return r;r=e;return o()};i.invertExtent=function(t){t=r.indexOf(t);t=t<0?NaN:t/n+e;return[t,t+1/n]};i.copy=function(){return Ds(e,t,r)};return o()}t.scale.threshold=function(){return Rs([.5],[0,1])};function Rs(e,r){function n(n){if(n<=n)return r[t.bisect(e,n)]}n.domain=function(t){if(!arguments.length)return e;e=t;return n};n.range=function(e){if(!arguments.length)return r;r=e;return n};n.invertExtent=function(t){t=r.indexOf(t);return[e[t-1],e[t]]};n.copy=function(){return Rs(e,r)};return n}t.scale.identity=function(){return Ps([0,1])};function Ps(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(r){if(!arguments.length)return e;e=r.map(t);return t};t.ticks=function(t){return ms(e,t)};t.tickFormat=function(t,r){return ys(e,t,r)};t.copy=function(){return Ps(e)};return t}t.svg={};function zs(){return 0}t.svg.arc=function(){var e=Bs,t=Ns,r=zs,n=Fs,a=js,i=Us,o=Vs;function s(){var s=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),f=a.apply(this,arguments)-Ie,c=i.apply(this,arguments)-Ie,h=Math.abs(c-f),d=f>c?0:1;if(u<s)v=u,u=s,s=v;if(h>=Oe)return l(u,d)+(s?l(s,1-d):"")+"Z";var v,p,g,m,y=0,b=0,x,_,w,A,k,T,M,E,C=[];if(m=(+o.apply(this,arguments)||0)/2){g=n===Fs?Math.sqrt(s*s+u*u):+n.apply(this,arguments);if(!d)b*=-1;if(u)b=Be(g/u*Math.sin(m));if(s)y=Be(g/s*Math.sin(m))}if(u){x=u*Math.cos(f+b);_=u*Math.sin(f+b);w=u*Math.cos(c-b);A=u*Math.sin(c-b);var S=Math.abs(c-f-2*b)<=Se?0:1;if(b&&Hs(x,_,w,A)===d^S){var L=(f+c)/2;x=u*Math.cos(L);_=u*Math.sin(L);w=A=null}}else{x=_=0}if(s){k=s*Math.cos(c-y);T=s*Math.sin(c-y);M=s*Math.cos(f+y);E=s*Math.sin(f+y);var O=Math.abs(f-c+2*y)<=Se?0:1;if(y&&Hs(k,T,M,E)===1-d^O){var I=(f+c)/2;k=s*Math.cos(I);T=s*Math.sin(I);M=E=null}}else{k=T=0}if(h>Ee&&(v=Math.min(Math.abs(u-s)/2,+r.apply(this,arguments)))>.001){p=s<u^d?0:1;var D=v,R=v;if(h<Se){var P=M==null?[k,T]:w==null?[x,_]:La([x,_],[M,E],[w,A],[k,T]),z=x-P[0],F=_-P[1],B=w-P[0],N=A-P[1],j=1/Math.sin(Math.acos((z*B+F*N)/(Math.sqrt(z*z+F*F)*Math.sqrt(B*B+N*N)))/2),U=Math.sqrt(P[0]*P[0]+P[1]*P[1]);R=Math.min(v,(s-U)/(j-1));D=Math.min(v,(u-U)/(j+1))}if(w!=null){var V=qs(M==null?[k,T]:[M,E],[x,_],u,D,d),H=qs([w,A],[k,T],u,D,d);if(v===D){C.push("M",V[0],"A",D,",",D," 0 0,",p," ",V[1],"A",u,",",u," 0 ",1-d^Hs(V[1][0],V[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",D,",",D," 0 0,",p," ",H[0])}else{C.push("M",V[0],"A",D,",",D," 0 1,",p," ",H[0])}}else{C.push("M",x,",",_)}if(M!=null){var q=qs([x,_],[M,E],s,-R,d),G=qs([k,T],w==null?[x,_]:[w,A],s,-R,d);if(v===R){C.push("L",G[0],"A",R,",",R," 0 0,",p," ",G[1],"A",s,",",s," 0 ",d^Hs(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-d," ",q[1],"A",R,",",R," 0 0,",p," ",q[0])}else{C.push("L",G[0],"A",R,",",R," 0 0,",p," ",q[0])}}else{C.push("L",k,",",T)}}else{C.push("M",x,",",_);if(w!=null)C.push("A",u,",",u," 0 ",S,",",d," ",w,",",A);C.push("L",k,",",T);if(M!=null)C.push("A",s,",",s," 0 ",O,",",1-d," ",M,",",E)}C.push("Z");return C.join("")}function l(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length)return e;e=kt(t);return s};s.outerRadius=function(e){if(!arguments.length)return t;t=kt(e);return s};s.cornerRadius=function(e){if(!arguments.length)return r;r=kt(e);return s};s.padRadius=function(e){if(!arguments.length)return n;n=e==Fs?Fs:kt(e);return s};s.startAngle=function(e){if(!arguments.length)return a;a=kt(e);return s};s.endAngle=function(e){if(!arguments.length)return i;i=kt(e);return s};s.padAngle=function(e){if(!arguments.length)return o;o=kt(e);return s};s.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Ie;return[Math.cos(n)*r,Math.sin(n)*r]};return s};var Fs="auto";function Bs(e){return e.innerRadius}function Ns(e){return e.outerRadius}function js(e){return e.startAngle}function Us(e){return e.endAngle}function Vs(e){return e&&e.padAngle}function Hs(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function qs(e,t,r,n,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?n:-n)/Math.sqrt(i*i+o*o),l=s*o,u=-s*i,f=e[0]+l,c=e[1]+u,h=t[0]+l,d=t[1]+u,v=(f+h)/2,p=(c+d)/2,g=h-f,m=d-c,y=g*g+m*m,b=r-n,x=f*d-h*c,_=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*m-g*_)/y,A=(-x*g-m*_)/y,k=(x*m+g*_)/y,T=(-x*g+m*_)/y,M=w-v,E=A-p,C=k-v,S=T-p;if(M*M+E*E>C*C+S*S)w=k,A=T;return[[w-l,A-u],[w*r/b,A*r/b]]}function Gs(e){var t=ka,r=Ta,n=sn,a=Ws,i=a.key,o=.7;function s(i){var s=[],l=[],u=-1,f=i.length,c,h=kt(t),d=kt(r);function v(){s.push("M",a(e(l),o))}while(++u<f){if(n.call(this,c=i[u],u)){l.push([+h.call(this,c,u),+d.call(this,c,u)])}else if(l.length){v();l=[]}}if(l.length)v();return s.length?s.join(""):null}s.x=function(e){if(!arguments.length)return t;t=e;return s};s.y=function(e){if(!arguments.length)return r;r=e;return s};s.defined=function(e){if(!arguments.length)return n;n=e;return s};s.interpolate=function(e){if(!arguments.length)return i;if(typeof e==="function")i=a=e;else i=(a=Xs.get(e)||Ws).key;return s};s.tension=function(e){if(!arguments.length)return o;o=e;return s};return s}t.svg.line=function(){return Gs(D)};var Xs=t.map({linear:Ws,"linear-closed":Ys,step:Zs,"step-before":Js,"step-after":Qs,basis:nl,"basis-open":al,"basis-closed":il,bundle:ol,cardinal:el,"cardinal-open":$s,"cardinal-closed":Ks,monotone:pl});Xs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ws(e){return e.length>1?e.join("L"):e+"Z"}function Ys(e){return e.join("L")+"Z"}function Zs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(r>1)a.push("H",n[0]);return a.join("")}function Js(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function Qs(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function $s(e,t){return e.length<4?Ws(e):e[1]+tl(e.slice(1,-1),rl(e,t))}function Ks(e,t){return e.length<3?Ys(e):e[0]+tl((e.push(e[0]),e),rl([e[e.length-2]].concat(e,[e[1]]),t))}function el(e,t){return e.length<3?Ws(e):e[0]+tl(e,rl(e,t))}function tl(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ws(e)}var r=e.length!=t.length,n="",a=e[0],i=e[1],o=t[0],s=o,l=1;if(r){n+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];a=e[1];l=2}if(t.length>1){s=t[1];i=e[l];l++;n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++){i=e[l];s=t[u];n+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}}if(r){var f=e[l];n+="Q"+(i[0]+s[0]*2/3)+","+(i[1]+s[1]*2/3)+","+f[0]+","+f[1]}return n}function rl(e,t){var r=[],n=(1-t)/2,a,i=e[0],o=e[1],s=1,l=e.length;while(++s<l){a=i;i=o;o=e[s];r.push([n*(o[0]-a[0]),n*(o[1]-a[1])])}return r}function nl(e){if(e.length<3)return Ws(e);var t=1,r=e.length,n=e[0],a=n[0],i=n[1],o=[a,a,a,(n=e[1])[0]],s=[i,i,i,n[1]],l=[a,",",i,"L",sl(fl,o),",",sl(fl,s)];e.push(e[r-1]);while(++t<=r){n=e[t];o.shift();o.push(n[0]);s.shift();s.push(n[1]);cl(l,o,s)}e.pop();l.push("L",n);return l.join("")}function al(e){if(e.length<4)return Ws(e);var t=[],r=-1,n=e.length,a,i=[0],o=[0];while(++r<3){a=e[r];i.push(a[0]);o.push(a[1])}t.push(sl(fl,i)+","+sl(fl,o));--r;while(++r<n){a=e[r];i.shift();i.push(a[0]);o.shift();o.push(a[1]);cl(t,i,o)}return t.join("")}function il(e){var t,r=-1,n=e.length,a=n+4,i,o=[],s=[];while(++r<4){i=e[r%n];o.push(i[0]);s.push(i[1])}t=[sl(fl,o),",",sl(fl,s)];--r;while(++r<a){i=e[r%n];o.shift();o.push(i[0]);s.shift();s.push(i[1]);cl(t,o,s)}return t.join("")}function ol(e,t){var r=e.length-1;if(r){var n=e[0][0],a=e[0][1],i=e[r][0]-n,o=e[r][1]-a,s=-1,l,u;while(++s<=r){l=e[s];u=s/r;l[0]=t*l[0]+(1-t)*(n+u*i);l[1]=t*l[1]+(1-t)*(a+u*o)}}return nl(e)}function sl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ll=[0,2/3,1/3,0],ul=[0,1/3,2/3,0],fl=[0,1/6,2/3,1/6];function cl(e,t,r){e.push("C",sl(ll,t),",",sl(ll,r),",",sl(ul,t),",",sl(ul,r),",",sl(fl,t),",",sl(fl,r))}function hl(e,t){return(t[1]-e[1])/(t[0]-e[0])}function dl(e){var t=0,r=e.length-1,n=[],a=e[0],i=e[1],o=n[0]=hl(a,i);while(++t<r){n[t]=(o+(o=hl(a=i,i=e[t+1])))/2}n[t]=o;return n}function vl(e){var t=[],r,n,a,i,o=dl(e),s=-1,l=e.length-1;while(++s<l){r=hl(e[s],e[s+1]);if(b(r)<Ee){o[s]=o[s+1]=0}else{n=o[s]/r;a=o[s+1]/r;i=n*n+a*a;if(i>9){i=r*3/Math.sqrt(i);o[s]=i*n;o[s+1]=i*a}}}s=-1;while(++s<=l){i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([i||0,o[s]*i||0])}return t}function pl(e){return e.length<3?Ws(e):e[0]+tl(e,vl(e))}t.svg.line.radial=function(){var e=Gs(gl);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function gl(e){var t,r=-1,n=e.length,a,i;while(++r<n){t=e[r];a=t[0];i=t[1]-Ie;t[0]=a*Math.cos(i);t[1]=a*Math.sin(i)}return e}function ml(e){var t=ka,r=ka,n=0,a=Ta,i=sn,o=Ws,s=o.key,l=o,u="L",f=.7;function c(s){var c=[],h=[],d=[],v=-1,p=s.length,g,m=kt(t),y=kt(n),b=t===r?function(){return _}:kt(r),x=n===a?function(){return w}:kt(a),_,w;function A(){c.push("M",o(e(d),f),u,l(e(h.reverse()),f),"Z")}while(++v<p){if(i.call(this,g=s[v],v)){h.push([_=+m.call(this,g,v),w=+y.call(this,g,v)]);d.push([+b.call(this,g,v),+x.call(this,g,v)])}else if(h.length){A();h=[];d=[]}}if(h.length)A();return c.length?c.join(""):null}c.x=function(e){if(!arguments.length)return r;t=r=e;return c};c.x0=function(e){if(!arguments.length)return t;t=e;return c};c.x1=function(e){if(!arguments.length)return r;r=e;return c};c.y=function(e){if(!arguments.length)return a;n=a=e;return c};c.y0=function(e){if(!arguments.length)return n;n=e;return c};c.y1=function(e){if(!arguments.length)return a;a=e;return c};c.defined=function(e){if(!arguments.length)return i;i=e;return c};c.interpolate=function(e){if(!arguments.length)return s;if(typeof e==="function")s=o=e;else s=(o=Xs.get(e)||Ws).key;l=o.reverse||o;u=o.closed?"M":"L";return c};c.tension=function(e){if(!arguments.length)return f;f=e;return c};return c}Js.reverse=Qs;Qs.reverse=Js;t.svg.area=function(){return ml(D)};t.svg.area.radial=function(){var e=ml(gl);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};t.svg.chord=function(){var e=sa,t=la,r=yl,n=js,a=Us;function i(r,n){var a=o(this,e,r,n),i=o(this,t,r,n);return"M"+a.p0+l(a.r,a.p1,a.a1-a.a0)+(s(a,i)?u(a.r,a.p1,a.r,a.p0):u(a.r,a.p1,i.r,i.p0)+l(i.r,i.p1,i.a1-i.a0)+u(i.r,i.p1,a.r,a.p0))+"Z"}function o(e,t,i,o){var s=t.call(e,i,o),l=r.call(e,s,o),u=n.call(e,s,o)-Ie,f=a.call(e,s,o)-Ie;return{r:l,a0:u,a1:f,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(f),l*Math.sin(f)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function l(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Se)+",1 "+t}function u(e,t,r,n){return"Q 0,0 "+n}i.radius=function(e){if(!arguments.length)return r;r=kt(e);return i};i.source=function(t){if(!arguments.length)return e;e=kt(t);return i};i.target=function(e){if(!arguments.length)return t;t=kt(e);return i};i.startAngle=function(e){if(!arguments.length)return n;n=kt(e);return i};i.endAngle=function(e){if(!arguments.length)return a;a=kt(e);return i};return i};function yl(e){return e.radius}t.svg.diagonal=function(){var e=sa,t=la,r=bl;function n(n,a){var i=e.call(this,n,a),o=t.call(this,n,a),s=(i.y+o.y)/2,l=[i,{x:i.x,y:s},{x:o.x,y:s},o];l=l.map(r);return"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}n.source=function(t){if(!arguments.length)return e;e=kt(t);return n};n.target=function(e){if(!arguments.length)return t;t=kt(e);return n};n.projection=function(e){if(!arguments.length)return r;r=e;return n};return n};function bl(e){return[e.x,e.y]}t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=bl,n=e.projection;e.projection=function(e){return arguments.length?n(xl(r=e)):r};return e};function xl(e){return function(){var t=e.apply(this,arguments),r=t[0],n=t[1]-Ie;return[r*Math.cos(n),r*Math.sin(n)]}}t.svg.symbol=function(){var e=wl,t=_l;function r(r,n){return(kl.get(e.call(this,r,n))||Al)(t.call(this,r,n))}r.type=function(t){if(!arguments.length)return e;e=kt(t);return r};r.size=function(e){if(!arguments.length)return t;t=kt(e);return r};return r};function _l(){return 64}function wl(){return"circle"}function Al(e){var t=Math.sqrt(e/Se);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var kl=t.map({circle:Al,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ml)),r=t*Ml;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Tl),r=t*Tl/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});t.svg.symbolTypes=kl.keys();var Tl=Math.sqrt(3),Ml=Math.tan(30*De);Z.transition=function(e){var t=Il||++Ol,r=zl(e),n=[],a,i,o=Dl||{time:Date.now(),ease:Pi,delay:0,duration:250};for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var u=this[s],f=-1,c=u.length;++f<c;){if(i=u[f])Fl(i,f,r,t,o);a.push(i)}}return Sl(n,r,t)};Z.interrupt=function(e){return this.each(e==null?El:Cl(zl(e)))};var El=Cl(zl());function Cl(e){return function(){var t,r,n;if((t=this[e])&&(n=t[r=t.active])){n.timer.c=null;n.timer.t=NaN;if(--t.count)delete t[r];else delete this[e];t.active+=.5;n.event&&n.event.interrupt.call(this,this.__data__,n.index)}}}function Sl(e,t,r){q(e,Ll);e.namespace=t;e.id=r;return e}var Ll=[],Ol=0,Il,Dl;Ll.call=Z.call;Ll.empty=Z.empty;Ll.node=Z.node;Ll.size=Z.size;t.transition=function(e,r){return e&&e.transition?Il?e.transition(r):e:t.selection().transition(e)};t.transition.prototype=Ll;Ll.select=function(e){var t=this.id,r=this.namespace,n=[],a,i,o;e=J(e);for(var s=-1,l=this.length;++s<l;){n.push(a=[]);for(var u=this[s],f=-1,c=u.length;++f<c;){if((o=u[f])&&(i=e.call(o,o.__data__,f,s))){if("__data__"in o)i.__data__=o.__data__;Fl(i,f,r,t,o[r][t]);a.push(i)}else{a.push(null)}}}return Sl(n,r,t)};Ll.selectAll=function(e){var t=this.id,r=this.namespace,n=[],a,i,o,s,l;e=Q(e);for(var u=-1,f=this.length;++u<f;){for(var c=this[u],h=-1,d=c.length;++h<d;){if(o=c[h]){l=o[r][t];i=e.call(o,o.__data__,h,u);n.push(a=[]);for(var v=-1,p=i.length;++v<p;){if(s=i[v])Fl(s,v,r,t,l);a.push(s)}}}}return Sl(n,r,t)};Ll.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=ce(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var n=this[i],s=0,l=n.length;s<l;s++){if((a=n[s])&&e.call(a,a.__data__,s,i)){r.push(a)}}}return Sl(t,this.namespace,this.id)};Ll.tween=function(e,t){var r=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][r].tween.get(e);return de(this,t==null?function(t){t[n][r].tween.remove(e)}:function(a){a[n][r].tween.set(e,t)})};function Rl(e,t,r,n){var a=e.id,i=e.namespace;return de(e,typeof r==="function"?function(e,o,s){e[i][a].tween.set(t,n(r.call(e,e.__data__,o,s)))}:(r=n(r),function(e){e[i][a].tween.set(t,r)}))}Ll.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var n=e=="transform"?no:Ti,a=t.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}function s(e){return e==null?i:(e+="",function(){var t=this.getAttribute(a),r;return t!==e&&(r=n(t,e),function(e){this.setAttribute(a,r(e))})})}function l(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(a.space,a.local),r;return t!==e&&(r=n(t,e),function(e){this.setAttributeNS(a.space,a.local,r(e))})})}return Rl(this,"attr."+e,r,a.local?l:s)};Ll.attrTween=function(e,r){var n=t.ns.qualify(e);function a(e,t){var a=r.call(this,e,t,this.getAttribute(n));return a&&function(e){this.setAttribute(n,a(e))}}function i(e,t){var a=r.call(this,e,t,this.getAttributeNS(n.space,n.local));return a&&function(e){this.setAttributeNS(n.space,n.local,a(e))}}return this.tween("attr."+e,n.local?i:a)};Ll.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.style(r,e[r],t);return this}r=""}function a(){this.style.removeProperty(e)}function i(t){return t==null?a:(t+="",function(){var n=s(this).getComputedStyle(this,null).getPropertyValue(e),a;return n!==t&&(a=Ti(n,t),function(t){this.style.setProperty(e,a(t),r)})})}return Rl(this,"style."+e,t,i)};Ll.styleTween=function(e,t,r){if(arguments.length<3)r="";function n(n,a){var i=t.call(this,n,a,s(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),r)}}return this.tween("style."+e,n)};Ll.text=function(e){return Rl(this,"text",e,Pl)};function Pl(e){if(e==null)e="";return function(){this.textContent=e}}Ll.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})};Ll.ease=function(e){var r=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][r].ease;if(typeof e!=="function")e=t.ease.apply(t,arguments);return de(this,function(t){t[n][r].ease=e})};Ll.delay=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].delay;return de(this,typeof e==="function"?function(n,a,i){n[r][t].delay=+e.call(n,n.__data__,a,i)}:(e=+e,function(n){n[r][t].delay=e}))};Ll.duration=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].duration;return de(this,typeof e==="function"?function(n,a,i){n[r][t].duration=Math.max(1,e.call(n,n.__data__,a,i))}:(e=Math.max(1,e),function(n){n[r][t].duration=e}))};Ll.each=function(e,r){var n=this.id,a=this.namespace;if(arguments.length<2){var i=Dl,o=Il;try{Il=n;de(this,function(t,r,i){Dl=t[a][n];e.call(t,t.__data__,r,i)})}finally{Dl=i;Il=o}}else{de(this,function(i){var o=i[a][n];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,r)})}return this};Ll.transition=function(){var e=this.id,t=++Ol,r=this.namespace,n=[],a,i,o,s;for(var l=0,u=this.length;l<u;l++){n.push(a=[]);for(var i=this[l],f=0,c=i.length;f<c;f++){if(o=i[f]){s=o[r][e];Fl(o,f,r,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}a.push(o)}}return Sl(n,r,t)};function zl(e){return e==null?"__transition__":"__transition_"+e+"__"}function Fl(e,t,r,n,a){var i=e[r]||(e[r]={active:0,count:0}),o=i[n],s,l,u,f,c;function h(e){var t=o.delay;l.t=t+s;if(t<=e)return d(e-t);l.c=d}function d(r){var a=i.active,h=i[a];if(h){h.timer.c=null;h.timer.t=NaN;--i.count;delete i[a];h.event&&h.event.interrupt.call(e,e.__data__,h.index)}for(var d in i){if(+d<n){var p=i[d];p.timer.c=null;p.timer.t=NaN;--i.count;delete i[d]}}l.c=v;Rt(function(){if(l.c&&v(r||1)){l.c=null;l.t=NaN}return 1},0,s);i.active=n;o.event&&o.event.start.call(e,e.__data__,t);c=[];o.tween.forEach(function(r,n){if(n=n.call(e,e.__data__,t)){c.push(n)}});f=o.ease;u=o.duration}function v(a){var s=a/u,l=f(s),h=c.length;while(h>0){c[--h].call(e,l)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--i.count)delete i[n];else delete e[r];return 1}}if(!o){s=a.time;l=Rt(h,0,s);o=i[n]={tween:new w,time:s,timer:l,delay:a.delay,duration:a.duration,ease:a.ease,index:t};a=null;++i.count}}t.svg.axis=function(){var e=t.scale.linear(),r=Bl,n=6,i=6,o=3,s=[10],l=null,u;function f(a){a.each(function(){var a=t.select(this);var f=this.__chart__||e,c=this.__chart__=e.copy();var h=l==null?c.ticks?c.ticks.apply(c,s):c.domain():l,d=u==null?c.tickFormat?c.tickFormat.apply(c,s):D:u,v=a.selectAll(".tick").data(h,c),p=v.enter().insert("g",".domain").attr("class","tick").style("opacity",Ee),g=t.transition(v.exit()).style("opacity",Ee).remove(),m=t.transition(v.order()).style("opacity",1),y=Math.max(n,0)+o,b;var x=ss(c),_=a.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),t.transition(_));p.append("line");p.append("text");var A=p.select("line"),k=m.select("line"),T=v.select("text").text(d),M=p.select("text"),E=m.select("text"),C=r==="top"||r==="left"?-1:1,S,L,O,I;if(r==="bottom"||r==="top"){b=jl,S="x",O="y",L="x2",I="y2";T.attr("dy",C<0?"0em":".71em").style("text-anchor","middle");w.attr("d","M"+x[0]+","+C*i+"V0H"+x[1]+"V"+C*i)}else{b=Ul,S="y",O="x",L="y2",I="x2";T.attr("dy",".32em").style("text-anchor",C<0?"end":"start");w.attr("d","M"+C*i+","+x[0]+"H0V"+x[1]+"H"+C*i)}A.attr(I,C*n);M.attr(O,C*y);k.attr(L,0).attr(I,C*n);E.attr(S,0).attr(O,C*y);if(c.rangeBand){var R=c,P=R.rangeBand()/2;f=c=function(e){return R(e)+P}}else if(f.rangeBand){f=c}else{g.call(b,c,f)}p.call(b,f,c);m.call(b,c,c)})}f.scale=function(t){if(!arguments.length)return e;e=t;return f};f.orient=function(e){if(!arguments.length)return r;r=e in Nl?e+"":Bl;return f};f.ticks=function(){if(!arguments.length)return s;s=a(arguments);return f};f.tickValues=function(e){if(!arguments.length)return l;l=e;return f};f.tickFormat=function(e){if(!arguments.length)return u;u=e;return f};f.tickSize=function(e){var t=arguments.length;if(!t)return n;n=+e;i=+arguments[t-1];return f};f.innerTickSize=function(e){if(!arguments.length)return n;n=+e;return f};f.outerTickSize=function(e){if(!arguments.length)return i;i=+e;return f};f.tickPadding=function(e){if(!arguments.length)return o;o=+e;return f};f.tickSubdivide=function(){return arguments.length&&f};return f};var Bl="bottom",Nl={top:1,right:1,bottom:1,left:1};function jl(e,t,r){e.attr("transform",function(e){var n=t(e);return"translate("+(isFinite(n)?n:r(e))+",0)"})}function Ul(e,t,r){e.attr("transform",function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:r(e))+")"})}t.svg.brush=function(){var e=V(h,"brushstart","brush","brushend"),r=null,n=null,a=[0,0],i=[0,0],o,l,u=true,f=true,c=Hl[0];function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g);var a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(c,D);i.exit().remove();i.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Vl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",h.empty()?"none":null);var o=t.transition(e),s=t.transition(a),l;if(r){l=ss(r);s.attr("x",l[0]).attr("width",l[1]-l[0]);v(o)}if(n){l=ss(n);s.attr("y",l[0]).attr("height",l[1]-l[0]);p(o)}d(o)})}h.event=function(r){r.each(function(){var r=e.of(this,arguments),n={x:a,y:i,i:o,j:l},s=this.__chart__||n;this.__chart__=n;if(Il){t.select(this).transition().each("start.brush",function(){o=s.i;l=s.j;a=s.x;i=s.y;r({type:"brushstart"})}).tween("brush:brush",function(){var e=Mi(a,n.x),t=Mi(i,n.y);o=l=null;return function(o){a=n.x=e(o);i=n.y=t(o);r({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i;l=n.j;r({type:"brush",mode:"resize"});r({type:"brushend"})})}else{r({type:"brushstart"});r({type:"brush",mode:"resize"});r({type:"brushend"})}})};function d(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+a[+/e$/.test(e)]+","+i[+/^s/.test(e)]+")"})}function v(e){e.select(".extent").attr("x",a[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function p(e){e.select(".extent").attr("y",i[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function g(){var c=this,g=t.select(t.event.target),m=e.of(c,arguments),y=t.select(c),b=g.datum(),x=!/^(n|s)$/.test(b)&&r,_=!/^(e|w)$/.test(b)&&n,w=g.classed("extent"),A=Ae(c),k,T=t.mouse(c),M;var E=t.select(s(c)).on("keydown.brush",L).on("keyup.brush",O);if(t.event.changedTouches){E.on("touchmove.brush",I).on("touchend.brush",R)}else{E.on("mousemove.brush",I).on("mouseup.brush",R)}y.interrupt().selectAll("*").interrupt();if(w){T[0]=a[0]-T[0];T[1]=i[0]-T[1]}else if(b){var C=+/w$/.test(b),S=+/^n/.test(b);M=[a[1-C]-T[0],i[1-S]-T[1]];T[0]=a[C];T[1]=i[S]}else if(t.event.altKey)k=T.slice();y.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",g.style("cursor"));m({type:"brushstart"});I();function L(){if(t.event.keyCode==32){if(!w){k=null;T[0]-=a[1];T[1]-=i[1];w=2}j()}}function O(){if(t.event.keyCode==32&&w==2){T[0]+=a[1];T[1]+=i[1];w=0;j()}}function I(){var e=t.mouse(c),o=false;if(M){e[0]+=M[0];e[1]+=M[1]}if(!w){if(t.event.altKey){if(!k)k=[(a[0]+a[1])/2,(i[0]+i[1])/2];T[0]=a[+(e[0]<k[0])];T[1]=i[+(e[1]<k[1])]}else k=null}if(x&&D(e,r,0)){v(y);o=true}if(_&&D(e,n,1)){p(y);o=true}if(o){d(y);m({type:"brush",mode:w?"move":"resize"})}}function D(e,t,r){var n=ss(t),s=n[0],c=n[1],h=T[r],d=r?i:a,v=d[1]-d[0],p,g;if(w){s-=h;c-=v+h}p=(r?f:u)?Math.max(s,Math.min(c,e[r])):e[r];if(w){g=(p+=h)+v}else{if(k)h=Math.max(s,Math.min(c,2*k[r]-p));if(h<p){g=p;p=h}else{g=h}}if(d[0]!=p||d[1]!=g){if(r)l=null;else o=null;d[0]=p;d[1]=g;return true}}function R(){I();y.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null);t.select("body").style("cursor",null);E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);A();m({type:"brushend"})}}h.x=function(e){if(!arguments.length)return r;r=e;c=Hl[!r<<1|!n];return h};h.y=function(e){if(!arguments.length)return n;n=e;c=Hl[!r<<1|!n];return h};h.clamp=function(e){if(!arguments.length)return r&&n?[u,f]:r?u:n?f:null;if(r&&n)u=!!e[0],f=!!e[1];else if(r)u=!!e;else if(n)f=!!e;return h};h.extent=function(e){var t,s,u,f,c;if(!arguments.length){if(r){if(o){t=o[0],s=o[1]}else{t=a[0],s=a[1];if(r.invert)t=r.invert(t),s=r.invert(s);if(s<t)c=t,t=s,s=c}}if(n){if(l){u=l[0],f=l[1]}else{u=i[0],f=i[1];if(n.invert)u=n.invert(u),f=n.invert(f);if(f<u)c=u,u=f,f=c}}return r&&n?[[t,u],[s,f]]:r?[t,s]:n&&[u,f]}if(r){t=e[0],s=e[1];if(n)t=t[0],s=s[0];o=[t,s];if(r.invert)t=r(t),s=r(s);if(s<t)c=t,t=s,s=c;if(t!=a[0]||s!=a[1])a=[t,s]}if(n){u=e[0],f=e[1];if(r)u=u[1],f=f[1];l=[u,f];if(n.invert)u=n(u),f=n(f);if(f<u)c=u,u=f,f=c;if(u!=i[0]||f!=i[1])i=[u,f]}return h};h.clear=function(){if(!h.empty()){a=[0,0],i=[0,0];o=l=null}return h};h.empty=function(){return!!r&&a[0]==a[1]||!!n&&i[0]==i[1]};return t.rebind(h,e,"on")};var Vl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Hl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var ql=Gt.format=_r.timeFormat;var Gl=ql.utc;var Xl=Gl("%Y-%m-%dT%H:%M:%S.%LZ");ql.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Wl:Xl;function Wl(e){return e.toISOString()}Wl.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Wl.toString=Xl.toString;Gt.second=Zt(function(e){return new Xt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Gt.seconds=Gt.second.range;Gt.seconds.utc=Gt.second.utc.range;Gt.minute=Zt(function(e){return new Xt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Gt.minutes=Gt.minute.range;Gt.minutes.utc=Gt.minute.utc.range;Gt.hour=Zt(function(e){var t=e.getTimezoneOffset()/60;return new Xt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Gt.hours=Gt.hour.range;Gt.hours.utc=Gt.hour.utc.range;Gt.month=Zt(function(e){e=Gt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Gt.months=Gt.month.range;Gt.months.utc=Gt.month.utc.range;function Yl(e,r,n){function a(t){return e(t)}a.invert=function(t){return Zl(e.invert(t))};a.domain=function(t){if(!arguments.length)return e.domain().map(Zl);e.domain(t);return a};function i(e,n){var a=e[1]-e[0],i=a/n,o=t.bisect(Jl,i);return o==Jl.length?[r.year,gs(e.map(function(e){return e/31536e6}),n)[2]]:!o?[Kl,gs(e,n)[2]]:r[i/Jl[o-1]<Jl[o]/i?o-1:o]}a.nice=function(e,t){var r=a.domain(),n=os(r),o=e==null?i(n,10):typeof e==="number"&&i(n,e);if(o)e=o[0],t=o[1];function s(r){return!isNaN(r)&&!e.range(r,Zl(+r+1),t).length}return a.domain(us(r,t>1?{floor:function(t){while(s(t=e.floor(t)))t=Zl(t-1);return t},ceil:function(t){while(s(t=e.ceil(t)))t=Zl(+t+1);return t}}:e))};a.ticks=function(e,t){var r=os(a.domain()),n=e==null?i(r,10):typeof e==="number"?i(r,e):!e.range&&[{range:e},t];if(n)e=n[0],t=n[1];return e.range(r[0],Zl(+r[1]+1),t<1?1:t)};a.tickFormat=function(){return n};a.copy=function(){return Yl(e.copy(),r,n)};return vs(a,e)}function Zl(e){return new Date(e)}var Jl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Ql=[[Gt.second,1],[Gt.second,5],[Gt.second,15],[Gt.second,30],[Gt.minute,1],[Gt.minute,5],[Gt.minute,15],[Gt.minute,30],[Gt.hour,1],[Gt.hour,3],[Gt.hour,6],[Gt.hour,12],[Gt.day,1],[Gt.day,2],[Gt.week,1],[Gt.month,1],[Gt.month,3],[Gt.year,1]];var $l=ql.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",sn]]);var Kl={range:function(e,r,n){return t.range(Math.ceil(e/n)*n,+r,n).map(Zl)},floor:D,ceil:D};Ql.year=Gt.year;Gt.scale=function(){return Yl(t.scale.linear(),Ql,$l)};var eu=Ql.map(function(e){return[e[0].utc,e[1]]});var tu=Gl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",sn]]);eu.year=Gt.year.utc;Gt.scale.utc=function(){return Yl(t.scale.linear(),eu,tu)};t.text=Tt(function(e){return e.responseText});t.json=function(e,t){return Mt(e,"application/json",ru,t)};function ru(e){return JSON.parse(e.responseText)}t.html=function(e,t){return Mt(e,"text/html",nu,t)};function nu(e){var t=i.createRange();t.selectNode(i.body);return t.createContextualFragment(e.responseText)}t.xml=Tt(function(e){return e.responseXML});if(typeof e==="function"&&e.amd)this.d3=t,e(t);else if(typeof r==="object"&&r.exports)r.exports=t;else this.d3=t}()},{}],87:[function(e,t,r){t.exports=function(){for(var e=0;e<arguments.length;e++){if(arguments[e]!==undefined)return arguments[e]}}},{}],88:[function(e,t,r){"use strict";t.exports=o;var n=o.canvas=document.createElement("canvas");var a=n.getContext("2d");var i=s([32,126]);o.createPairs=s;o.ascii=i;function o(e,t){if(Array.isArray(e))e=e.join(", ");var r={},n,o=16,l=.05;if(t){if(t.length===2&&typeof t[0]==="number"){n=s(t)}else if(Array.isArray(t)){n=t}else{if(t.o)n=s(t.o);else if(t.pairs)n=t.pairs;if(t.fontSize)o=t.fontSize;if(t.threshold!=null)l=t.threshold}}if(!n)n=i;a.font=o+"px "+e;for(var u=0;u<n.length;u++){var f=n[u];var c=a.measureText(f[0]).width+a.measureText(f[1]).width;var h=a.measureText(f).width;if(Math.abs(c-h)>o*l){var d=(h-c)/o;r[f]=d*1e3}}return r}function s(e){var t=[];for(var r=e[0];r<=e[1];r++){var n=String.fromCharCode(r);for(var a=e[0];a<e[1];a++){var i=String.fromCharCode(a);var o=n+i;t.push(o)}}return t}},{}],89:[function(e,t,r){(function(e){var r=false;if(typeof Float64Array!=="undefined"){var n=new Float64Array(1),a=new Uint32Array(n.buffer);n[0]=1;r=true;if(a[1]===1072693248){t.exports=function e(t){n[0]=t;return[a[0],a[1]]};function i(e,t){a[0]=e;a[1]=t;return n[0]}t.exports.pack=i;function o(e){n[0]=e;return a[0]}t.exports.lo=o;function s(e){n[0]=e;return a[1]}t.exports.hi=s}else if(a[0]===1072693248){t.exports=function e(t){n[0]=t;return[a[1],a[0]]};function l(e,t){a[1]=e;a[0]=t;return n[0]}t.exports.pack=l;function u(e){n[0]=e;return a[1]}t.exports.lo=u;function f(e){n[0]=e;return a[0]}t.exports.hi=f}else{r=false}}if(!r){var c=new e(8);t.exports=function e(t){c.writeDoubleLE(t,0,true);return[c.readUInt32LE(0,true),c.readUInt32LE(4,true)]};function h(e,t){c.writeUInt32LE(e,0,true);c.writeUInt32LE(t,4,true);return c.readDoubleLE(0,true)}t.exports.pack=h;function d(e){c.writeDoubleLE(e,0,true);return c.readUInt32LE(0,true)}t.exports.lo=d;function v(e){c.writeDoubleLE(e,0,true);return c.readUInt32LE(4,true)}t.exports.hi=v}t.exports.sign=function(e){return t.exports.hi(e)>>>31};t.exports.exponent=function(e){var r=t.exports.hi(e);return(r<<1>>>21)-1023};t.exports.fraction=function(e){var r=t.exports.lo(e);var n=t.exports.hi(e);var a=n&(1<<20)-1;if(n&2146435072){a+=1<<20}return[r,a]};t.exports.denormalized=function(e){var r=t.exports.hi(e);return!(r&2146435072)}}).call(this,e("buffer").Buffer)},{buffer:52}],90:[function(e,t,r){var n=e("abs-svg-path");var a=e("normalize-svg-path");var i={M:"moveTo",C:"bezierCurveTo"};t.exports=function(e,t){e.beginPath();a(n(t)).forEach(function(t){var r=t[0];var n=t.slice(1);e[i[r]].apply(e,n)});e.closePath()}},{"abs-svg-path":16,"normalize-svg-path":222}],91:[function(e,t,r){t.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],92:[function(e,t,r){"use strict";function n(e,t,r){var a=e[r]|0;if(a<=0){return[]}var i=new Array(a),o;if(r===e.length-1){for(o=0;o<a;++o){i[o]=t}}else{for(o=0;o<a;++o){i[o]=n(e,t,r+1)}}return i}function a(e,t){var r,n;r=new Array(e);for(n=0;n<e;++n){r[n]=t}return r}function i(e,t){if(typeof t==="undefined"){t=0}switch(typeof e){case"number":if(e>0){return a(e|0,t)}break;case"object":if(typeof e.length==="number"){return n(e,t,0)}break}return[]}t.exports=i},{}],93:[function(e,t,r){"use strict";t.exports=n;t.exports.default=n;function n(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,s=a(e,0,i,r,true),l=[];if(!s)return l;var u,f,h,d,v,p,g;if(n)s=c(e,t,s,r);if(e.length>80*r){u=h=e[0];f=d=e[1];for(var m=r;m<i;m+=r){v=e[m];p=e[m+1];if(v<u)u=v;if(p<f)f=p;if(v>h)h=v;if(p>d)d=p}g=Math.max(h-u,d-f);g=g!==0?1/g:0}o(s,l,r,u,f,g);return l}function a(e,t,r,n,a){var i,o;if(a===O(e,t,r,n)>0){for(i=t;i<r;i+=n)o=C(i,e[i],e[i+1],o)}else{for(i=r-n;i>=t;i-=n)o=C(i,e[i],e[i+1],o)}if(o&&w(o,o.next)){S(o);o=o.next}return o}function i(e,t){if(!e)return e;if(!t)t=e;var r=e,n;do{n=false;if(!r.steiner&&(w(r,r.next)||_(r.prev,r,r.next)===0)){S(r);r=t=r.prev;if(r===r.next)break;n=true}else{r=r.next}}while(n||r!==t);return t}function o(e,t,r,n,a,c,h){if(!e)return;if(!h&&c)p(e,n,a,c);var d=e,v,g;while(e.prev!==e.next){v=e.prev;g=e.next;if(c?l(e,n,a,c):s(e)){t.push(v.i/r);t.push(e.i/r);t.push(g.i/r);S(e);e=g.next;d=g.next;continue}e=g;if(e===d){if(!h){o(i(e),t,r,n,a,c,1)}else if(h===1){e=u(e,t,r);o(e,t,r,n,a,c,2)}else if(h===2){f(e,t,r,n,a,c)}break}}}function s(e){var t=e.prev,r=e,n=e.next;if(_(t,r,n)>=0)return false;var a=e.next.next;while(a!==e.prev){if(b(t.x,t.y,r.x,r.y,n.x,n.y,a.x,a.y)&&_(a.prev,a,a.next)>=0)return false;a=a.next}return true}function l(e,t,r,n){var a=e.prev,i=e,o=e.next;if(_(a,i,o)>=0)return false;var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,f=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y;var c=m(s,l,t,r,n),h=m(u,f,t,r,n);var d=e.prevZ,v=e.nextZ;while(d&&d.z>=c&&v&&v.z<=h){if(d!==e.prev&&d!==e.next&&b(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return false;d=d.prevZ;if(v!==e.prev&&v!==e.next&&b(a.x,a.y,i.x,i.y,o.x,o.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return false;v=v.nextZ}while(d&&d.z>=c){if(d!==e.prev&&d!==e.next&&b(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return false;d=d.prevZ}while(v&&v.z<=h){if(v!==e.prev&&v!==e.next&&b(a.x,a.y,i.x,i.y,o.x,o.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return false;v=v.nextZ}return true}function u(e,t,r){var n=e;do{var a=n.prev,i=n.next.next;if(!w(a,i)&&A(a,n,n.next,i)&&T(a,i)&&T(i,a)){t.push(a.i/r);t.push(n.i/r);t.push(i.i/r);S(n);S(n.next);n=e=i}n=n.next}while(n!==e);return n}function f(e,t,r,n,a,s){var l=e;do{var u=l.next.next;while(u!==l.prev){if(l.i!==u.i&&x(l,u)){var f=E(l,u);l=i(l,l.next);f=i(f,f.next);o(l,t,r,n,a,s);o(f,t,r,n,a,s);return}u=u.next}l=l.next}while(l!==e)}function c(e,t,r,n){var o=[],s,l,u,f,c;for(s=0,l=t.length;s<l;s++){u=t[s]*n;f=s<l-1?t[s+1]*n:e.length;c=a(e,u,f,n,false);if(c===c.next)c.steiner=true;o.push(y(c))}o.sort(h);for(s=0;s<o.length;s++){d(o[s],r);r=i(r,r.next)}return r}function h(e,t){return e.x-t.x}function d(e,t){t=v(e,t);if(t){var r=E(t,e);i(r,r.next)}}function v(e,t){var r=t,n=e.x,a=e.y,i=-Infinity,o;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>i){i=s;if(s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(n===i)return o.prev;var l=o,u=o.x,f=o.y,c=Infinity,h;r=o.next;while(r!==l){if(n>=r.x&&r.x>=u&&n!==r.x&&b(a<f?n:i,a,u,f,a<f?i:n,a,r.x,r.y)){h=Math.abs(a-r.y)/(n-r.x);if((h<c||h===c&&r.x>o.x)&&T(r,e)){o=r;c=h}}r=r.next}return o}function p(e,t,r,n){var a=e;do{if(a.z===null)a.z=m(a.x,a.y,t,r,n);a.prevZ=a.prev;a.nextZ=a.next;a=a.next}while(a!==e);a.prevZ.nextZ=null;a.prevZ=null;g(a)}function g(e){var t,r,n,a,i,o,s,l,u=1;do{r=e;e=null;i=null;o=0;while(r){o++;n=r;s=0;for(t=0;t<u;t++){s++;n=n.nextZ;if(!n)break}l=u;while(s>0||l>0&&n){if(s!==0&&(l===0||!n||r.z<=n.z)){a=r;r=r.nextZ;s--}else{a=n;n=n.nextZ;l--}if(i)i.nextZ=a;else e=a;a.prevZ=i;i=a}r=n}i.nextZ=null;u*=2}while(o>1);return e}function m(e,t,r,n,a){e=32767*(e-r)*a;t=32767*(t-n)*a;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function y(e){var t=e,r=e;do{if(t.x<r.x)r=t;t=t.next}while(t!==e);return r}function b(e,t,r,n,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(i-s)-(a-o)*(n-s)>=0}function x(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!k(e,t)&&T(e,t)&&T(t,e)&&M(e,t)}function _(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,r,n){if(w(e,t)&&w(r,n)||w(e,n)&&w(r,t))return true;return _(e,t,r)>0!==_(e,t,n)>0&&_(r,n,e)>0!==_(r,n,t)>0}function k(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&A(r,r.next,e,t))return true;r=r.next}while(r!==e);return false}function T(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0}function M(e,t){var r=e,n=false,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do{if(r.y>i!==r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x)n=!n;r=r.next}while(r!==e);return n}function E(e,t){var r=new L(e.i,e.x,e.y),n=new L(t.i,t.x,t.y),a=e.next,i=t.prev;e.next=t;t.prev=e;r.next=a;a.prev=r;n.next=r;r.prev=n;i.next=n;n.prev=i;return n}function C(e,t,r,n){var a=new L(e,t,r);if(!n){a.prev=a;a.next=a}else{a.next=n.next;a.prev=n;n.next.prev=a;n.next=a}return a}function S(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function L(e,t,r){this.i=e;this.x=t;this.y=r;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}n.deviation=function(e,t,r,n){var a=t&&t.length;var i=a?t[0]*r:e.length;var o=Math.abs(O(e,0,i,r));if(a){for(var s=0,l=t.length;s<l;s++){var u=t[s]*r;var f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(O(e,u,f,r))}}var c=0;for(s=0;s<n.length;s+=3){var h=n[s]*r;var d=n[s+1]*r;var v=n[s+2]*r;c+=Math.abs((e[h]-e[v])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[v+1]-e[h+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function O(e,t,r,n){var a=0;for(var i=t,o=r-n;i<r;i+=n){a+=(e[o]-e[i])*(e[i+1]+e[o+1]);o=i}return a}n.flatten=function(e){var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0;for(var a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++){for(var o=0;o<t;o++)r.vertices.push(e[a][i][o])}if(a>0){n+=e[a-1].length;r.holes.push(n)}}return r}},{}],94:[function(e,t,r){"use strict";t.exports=a;var n=e("uniq");function a(e,t){var r=e.length;if(typeof t!=="number"){t=0;for(var a=0;a<r;++a){var i=e[a];t=Math.max(t,i[0],i[1])}t=(t|0)+1}t=t|0;var o=new Array(t);for(var a=0;a<t;++a){o[a]=[]}for(var a=0;a<r;++a){var i=e[a];o[i[0]].push(i[1]);o[i[1]].push(i[0])}for(var s=0;s<t;++s){n(o[s],function(e,t){return e-t})}return o}},{uniq:293}],95:[function(e,t,r){"use strict";var n=e("../../object/valid-value");t.exports=function(){n(this).length=0;return this}},{"../../object/valid-value":127}],96:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":97,"./shim":98}],97:[function(e,t,r){"use strict";t.exports=function(){var e=Array.from,t,r;if(typeof e!=="function")return false;t=["raz","dwa"];r=e(t);return Boolean(r&&r!==t&&r[1]==="dwa")}},{}],98:[function(e,t,r){"use strict";var n=e("es6-symbol").iterator,a=e("../../function/is-arguments"),i=e("../../function/is-function"),o=e("../../number/to-pos-integer"),s=e("../../object/valid-callable"),l=e("../../object/valid-value"),u=e("../../object/is-value"),f=e("../../string/is-string"),c=Array.isArray,h=Function.prototype.call,d={configurable:true,enumerable:true,writable:true,value:null},v=Object.defineProperty;t.exports=function(e){var t=arguments[1],r=arguments[2],p,g,m,y,b,x,_,w,A,k;e=Object(l(e));if(u(t))s(t);if(!this||this===Array||!i(this)){if(!t){if(a(e)){b=e.length;if(b!==1)return Array.apply(null,e);y=new Array(1);y[0]=e[0];return y}if(c(e)){y=new Array(b=e.length);for(g=0;g<b;++g)y[g]=e[g];return y}}y=[]}else{p=this}if(!c(e)){if((A=e[n])!==undefined){_=s(A).call(e);if(p)y=new p;w=_.next();g=0;while(!w.done){k=t?h.call(t,r,w.value,g):w.value;if(p){d.value=k;v(y,g,d)}else{y[g]=k}w=_.next();++g}b=g}else if(f(e)){b=e.length;if(p)y=new p;for(g=0,m=0;g<b;++g){k=e[g];if(g+1<b){x=k.charCodeAt(0);if(x>=55296&&x<=56319)k+=e[++g]}k=t?h.call(t,r,k,m):k;if(p){d.value=k;v(y,m,d)}else{y[m]=k}++m}b=m}}if(b===undefined){b=o(e.length);if(p)y=new p(b);for(g=0;g<b;++g){k=t?h.call(t,r,e[g],g):e[g];if(p){d.value=k;v(y,g,d)}else{y[g]=k}}}if(p){d.value=null;y.length=b}return y}},{"../../function/is-arguments":99,"../../function/is-function":100,"../../number/to-pos-integer":106,"../../object/is-value":116,"../../object/valid-callable":125,"../../object/valid-value":127,"../../string/is-string":131,"es6-symbol":141}],99:[function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call(function(){return arguments}());t.exports=function(e){return n.call(e)===a}},{}],100:[function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call(e("./noop"));t.exports=function(e){return typeof e==="function"&&n.call(e)===a}},{"./noop":101}],101:[function(e,t,r){"use strict";t.exports=function(){}},{}],102:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":103,"./shim":104}],103:[function(e,t,r){"use strict";t.exports=function(){var e=Math.sign;if(typeof e!=="function")return false;return e(10)===1&&e(-20)===-1}},{}],104:[function(e,t,r){"use strict";t.exports=function(e){e=Number(e);if(isNaN(e)||e===0)return e;return e>0?1:-1}},{}],105:[function(e,t,r){"use strict";var n=e("../math/sign"),a=Math.abs,i=Math.floor;t.exports=function(e){if(isNaN(e))return 0;e=Number(e);if(e===0||!isFinite(e))return e;return n(e)*i(a(e))}},{"../math/sign":102}],106:[function(e,t,r){"use strict";var n=e("./to-integer"),a=Math.max;t.exports=function(e){return a(0,n(e))}},{"./to-integer":105}],107:[function(e,t,r){"use strict";var n=e("./valid-callable"),a=e("./valid-value"),i=Function.prototype.bind,o=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(r,u){var f,c=arguments[2],h=arguments[3];r=Object(a(r));n(u);f=s(r);if(h){f.sort(typeof h==="function"?i.call(h,r):undefined)}if(typeof e!=="function")e=f[e];return o.call(e,f,function(e,n){if(!l.call(r,e))return t;return o.call(u,c,r[e],e,r,n)})}}},{"./valid-callable":125,"./valid-value":127}],108:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":109,"./shim":110}],109:[function(e,t,r){"use strict";t.exports=function(){var e=Object.assign,t;if(typeof e!=="function")return false;t={foo:"raz"};e(t,{bar:"dwa"},{trzy:"trzy"});return t.foo+t.bar+t.trzy==="razdwatrzy"}},{}],110:[function(e,t,r){"use strict";var n=e("../keys"),a=e("../valid-value"),i=Math.max;t.exports=function(e,t){var r,o,s=i(arguments.length,2),l;e=Object(a(e));l=function(n){try{e[n]=t[n]}catch(e){if(!r)r=e}};for(o=1;o<s;++o){t=arguments[o];n(t).forEach(l)}if(r!==undefined)throw r;return e}},{"../keys":117,"../valid-value":127}],111:[function(e,t,r){"use strict";var n=e("../array/from"),a=e("./assign"),i=e("./valid-value");t.exports=function(e){var t=Object(i(e)),r=arguments[1],o=Object(arguments[2]);if(t!==e&&!r)return t;var s={};if(r){n(r,function(t){if(o.ensure||t in e)s[t]=e[t]})}else{a(s,e)}return s}},{"../array/from":96,"./assign":108,"./valid-value":127}],112:[function(e,t,r){"use strict";var n=Object.create,a;if(!e("./set-prototype-of/is-implemented")()){a=e("./set-prototype-of/shim")}t.exports=function(){var e,t,r;if(!a)return n;if(a.level!==1)return n;e={};t={};r={configurable:false,enumerable:false,writable:true,value:undefined};Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if(e==="__proto__"){t[e]={configurable:true,enumerable:false,writable:true,value:undefined};return}t[e]=r});Object.defineProperties(e,t);Object.defineProperty(a,"nullPolyfill",{configurable:false,enumerable:false,writable:false,value:e});return function(t,r){return n(t===null?e:t,r)}}()},{"./set-prototype-of/is-implemented":123,"./set-prototype-of/shim":124}],113:[function(e,t,r){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":107}],114:[function(e,t,r){"use strict";t.exports=function(e){return typeof e==="function"}},{}],115:[function(e,t,r){"use strict";var n=e("./is-value");var a={function:true,object:true};t.exports=function(e){return n(e)&&a[typeof e]||false}},{"./is-value":116}],116:[function(e,t,r){"use strict";var n=e("../function/noop")();t.exports=function(e){return e!==n&&e!==null}},{"../function/noop":101}],117:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":118,"./shim":119}],118:[function(e,t,r){"use strict";t.exports=function(){try{Object.keys("primitive");return true}catch(e){return false}}},{}],119:[function(e,t,r){"use strict";var n=e("../is-value");var a=Object.keys;t.exports=function(e){return a(n(e)?Object(e):e)}},{"../is-value":116}],120:[function(e,t,r){"use strict";var n=e("./valid-callable"),a=e("./for-each"),i=Function.prototype.call;t.exports=function(e,t){var r={},o=arguments[2];n(t);a(e,function(e,n,a,s){r[n]=i.call(t,o,e,n,a,s)});return r}},{"./for-each":113,"./valid-callable":125}],121:[function(e,t,r){"use strict";var n=e("./is-value");var a=Array.prototype.forEach,i=Object.create;var o=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=i(null);a.call(arguments,function(e){if(!n(e))return;o(Object(e),t)});return t}},{"./is-value":116}],122:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":123,"./shim":124}],123:[function(e,t,r){"use strict";var n=Object.create,a=Object.getPrototypeOf,i={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;if(typeof e!=="function")return false;return a(e(t(null),i))===i}},{}],124:[function(e,t,r){"use strict";var n=e("../is-object"),a=e("../valid-value"),i=Object.prototype.isPrototypeOf,o=Object.defineProperty,s={configurable:true,enumerable:false,writable:true,value:undefined},l;l=function(e,t){a(e);if(t===null||n(t))return e;throw new TypeError("Prototype must be null or an object")};t.exports=function(e){var t,r;if(!e)return null;if(e.level===2){if(e.set){r=e.set;t=function(e,t){r.call(l(e,t),t);return e}}else{t=function(e,t){l(e,t).__proto__=t;return e}}}else{t=function e(t,r){var n;l(t,r);n=i.call(e.nullPolyfill,t);if(n)delete e.nullPolyfill.__proto__;if(r===null)r=e.nullPolyfill;t.__proto__=r;if(n)o(e.nullPolyfill,"__proto__",s);return t}}return Object.defineProperty(t,"level",{configurable:false,enumerable:false,writable:false,value:e.level})}(function(){var e=Object.create(null),t={},r,n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{r=n.set;r.call(e,t)}catch(e){}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}e.__proto__=t;if(Object.getPrototypeOf(e)===t)return{level:2};e={};e.__proto__=t;if(Object.getPrototypeOf(e)===t)return{level:1};return false}());e("../create")},{"../create":112,"../is-object":115,"../valid-value":127}],125:[function(e,t,r){"use strict";t.exports=function(e){if(typeof e!=="function")throw new TypeError(e+" is not a function");return e}},{}],126:[function(e,t,r){"use strict";var n=e("./is-object");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},{"./is-object":115}],127:[function(e,t,r){"use strict";var n=e("./is-value");t.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":116}],128:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":129,"./shim":130}],129:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){if(typeof n.contains!=="function")return false;return n.contains("dwa")===true&&n.contains("foo")===false}},{}],130:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],131:[function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call("");t.exports=function(e){return typeof e==="string"||e&&typeof e==="object"&&(e instanceof String||n.call(e)===a)||false}},{}],132:[function(e,t,r){"use strict";var n=Object.create(null),a=Math.random;t.exports=function(){var e;do{e=a().toString(36).slice(2)}while(n[e]);return e}},{}],133:[function(e,t,r){"use strict";var n=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/string/#/contains"),i=e("d"),o=e("es6-symbol"),s=e("./");var l=Object.defineProperty,u;u=t.exports=function(e,t){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");s.call(this,e);if(!t)t="value";else if(a.call(t,"key+value"))t="key+value";else if(a.call(t,"key"))t="key";else t="value";l(this,"__kind__",i("",t))};if(n)n(u,s);delete u.prototype.constructor;u.prototype=Object.create(s.prototype,{_resolve:i(function(e){if(this.__kind__==="value")return this.__list__[e];if(this.__kind__==="key+value")return[e,this.__list__[e]];return e})});l(u.prototype,o.toStringTag,i("c","Array Iterator"))},{"./":136,d:85,"es5-ext/object/set-prototype-of":122,"es5-ext/string/#/contains":128,"es6-symbol":141}],134:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/valid-callable"),i=e("es5-ext/string/is-string"),o=e("./get");var s=Array.isArray,l=Function.prototype.call,u=Array.prototype.some;t.exports=function(e,t){var r,f=arguments[2],c,h,d,v,p,g,m;if(s(e)||n(e))r="array";else if(i(e))r="string";else e=o(e);a(t);h=function(){d=true};if(r==="array"){u.call(e,function(e){l.call(t,f,e,h);return d});return}if(r==="string"){p=e.length;for(v=0;v<p;++v){g=e[v];if(v+1<p){m=g.charCodeAt(0);if(m>=55296&&m<=56319)g+=e[++v]}l.call(t,f,g,h);if(d)break}return}c=e.next();while(!c.done){l.call(t,f,c.value,h);if(d)return;c=e.next()}}},{"./get":135,"es5-ext/function/is-arguments":99,"es5-ext/object/valid-callable":125,"es5-ext/string/is-string":131}],135:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),a=e("es5-ext/string/is-string"),i=e("./array"),o=e("./string"),s=e("./valid-iterable"),l=e("es6-symbol").iterator;t.exports=function(e){if(typeof s(e)[l]==="function")return e[l]();if(n(e))return new i(e);if(a(e))return new o(e);return new i(e)}},{"./array":133,"./string":138,"./valid-iterable":139,"es5-ext/function/is-arguments":99,"es5-ext/string/is-string":131,"es6-symbol":141}],136:[function(e,t,r){"use strict";var n=e("es5-ext/array/#/clear"),a=e("es5-ext/object/assign"),i=e("es5-ext/object/valid-callable"),o=e("es5-ext/object/valid-value"),s=e("d"),l=e("d/auto-bind"),u=e("es6-symbol");var f=Object.defineProperty,c=Object.defineProperties,h;t.exports=h=function(e,t){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");c(this,{__list__:s("w",o(e)),__context__:s("w",t),__nextIndex__:s("w",0)});if(!t)return;i(t.on);t.on("_add",this._onAdd);t.on("_delete",this._onDelete);t.on("_clear",this._onClear)};delete h.prototype.constructor;c(h.prototype,a({_next:s(function(){var e;if(!this.__list__)return undefined;if(this.__redo__){e=this.__redo__.shift();if(e!==undefined)return e}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind();return undefined}),next:s(function(){return this._createResult(this._next())}),_createResult:s(function(e){if(e===undefined)return{done:true,value:undefined};return{done:false,value:this._resolve(e)}}),_resolve:s(function(e){return this.__list__[e]}),_unBind:s(function(){this.__list__=null;delete this.__redo__;if(!this.__context__)return;this.__context__.off("_add",this._onAdd);this.__context__.off("_delete",this._onDelete);this.__context__.off("_clear",this._onClear);this.__context__=null}),toString:s(function(){return"[object "+(this[u.toStringTag]||"Object")+"]"})},l({_onAdd:s(function(e){if(e>=this.__nextIndex__)return;++this.__nextIndex__;if(!this.__redo__){f(this,"__redo__",s("c",[e]));return}this.__redo__.forEach(function(t,r){if(t>=e)this.__redo__[r]=++t},this);this.__redo__.push(e)}),_onDelete:s(function(e){var t;if(e>=this.__nextIndex__)return;--this.__nextIndex__;if(!this.__redo__)return;t=this.__redo__.indexOf(e);if(t!==-1)this.__redo__.splice(t,1);this.__redo__.forEach(function(t,r){if(t>e)this.__redo__[r]=--t},this)}),_onClear:s(function(){if(this.__redo__)n.call(this.__redo__);this.__nextIndex__=0})})));f(h.prototype,u.iterator,s(function(){return this}))},{d:85,"d/auto-bind":84,"es5-ext/array/#/clear":95,"es5-ext/object/assign":108,"es5-ext/object/valid-callable":125,"es5-ext/object/valid-value":127,"es6-symbol":141}],137:[function(e,t,r){"use strict";var n=e("es5-ext/function/is-arguments"),a=e("es5-ext/object/is-value"),i=e("es5-ext/string/is-string");var o=e("es6-symbol").iterator,s=Array.isArray;t.exports=function(e){if(!a(e))return false;if(s(e))return true;if(i(e))return true;if(n(e))return true;return typeof e[o]==="function"}},{"es5-ext/function/is-arguments":99,"es5-ext/object/is-value":116,"es5-ext/string/is-string":131,"es6-symbol":141}],138:[function(e,t,r){"use strict";var n=e("es5-ext/object/set-prototype-of"),a=e("d"),i=e("es6-symbol"),o=e("./");var s=Object.defineProperty,l;l=t.exports=function(e){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");e=String(e);o.call(this,e);s(this,"__length__",a("",e.length))};if(n)n(l,o);delete l.prototype.constructor;l.prototype=Object.create(o.prototype,{_next:a(function(){if(!this.__list__)return undefined;if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind();return undefined}),_resolve:a(function(e){var t=this.__list__[e],r;if(this.__nextIndex__===this.__length__)return t;r=t.charCodeAt(0);if(r>=55296&&r<=56319)return t+this.__list__[this.__nextIndex__++];return t})});s(l.prototype,i.toStringTag,a("c","String Iterator"))},{"./":136,d:85,"es5-ext/object/set-prototype-of":122,"es6-symbol":141}],139:[function(e,t,r){"use strict";var n=e("./is-iterable");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":137}],140:[function(t,r,n){(function(a,i){(function(t,a){typeof n==="object"&&typeof r!=="undefined"?r.exports=a():typeof e==="function"&&e.amd?e(a):t.ES6Promise=a()})(this,function(){"use strict";function e(e){return typeof e==="function"||typeof e==="object"&&e!==null}function r(e){return typeof e==="function"}var n=undefined;if(!Array.isArray){n=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{n=Array.isArray}var o=n;var s=0;var l=undefined;var u=undefined;var f=function e(t,r){A[s]=t;A[s+1]=r;s+=2;if(s===2){if(u){u(k)}else{M()}}};function c(e){u=e}function h(e){f=e}var d=typeof window!=="undefined"?window:undefined;var v=d||{};var p=v.MutationObserver||v.WebKitMutationObserver;var g=typeof self==="undefined"&&typeof a!=="undefined"&&{}.toString.call(a)==="[object process]";var m=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function y(){return function(){return a.nextTick(k)}}function b(){return function(){l(k)}}function x(){var e=0;var t=new p(k);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function _(){var e=new MessageChannel;e.port1.onmessage=k;return function(){return e.port2.postMessage(0)}}function w(){var e=setTimeout;return function(){return e(k,1)}}var A=new Array(1e3);function k(){for(var e=0;e<s;e+=2){var t=A[e];var r=A[e+1];t(r);A[e]=undefined;A[e+1]=undefined}s=0}function T(){try{var e=t;var r=e("vertx");l=r.runOnLoop||r.runOnContext;return b()}catch(e){return w()}}var M=undefined;if(g){M=y()}else if(p){M=x()}else if(m){M=_()}else if(d===undefined&&typeof t==="function"){M=T()}else{M=w()}function E(e,t){var r=arguments;var n=this;var a=new this.constructor(L);if(a[S]===undefined){te(a)}var i=n._state;if(i){(function(){var e=r[i-1];f(function(){return Q(i,a,e,n._result)})})()}else{X(n,a,e,t)}return a}function C(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(L);V(r,e);return r}var S=Math.random().toString(36).substring(16);function L(){}var O=void 0;var I=1;var D=2;var R=new Y;function P(){return new TypeError("You cannot resolve a promise with itself")}function z(){return new TypeError("A promises callback cannot return that same promise.")}function F(e){try{return e.then}catch(e){R.error=e;return R}}function B(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function N(e,t,r){f(function(e){var n=false;var a=B(r,t,function(r){if(n){return}n=true;if(t!==r){V(e,r)}else{q(e,r)}},function(t){if(n){return}n=true;G(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&a){n=true;G(e,a)}},e)}function j(e,t){if(t._state===I){q(e,t._result)}else if(t._state===D){G(e,t._result)}else{X(t,undefined,function(t){return V(e,t)},function(t){return G(e,t)})}}function U(e,t,n){if(t.constructor===e.constructor&&n===E&&t.constructor.resolve===C){j(e,t)}else{if(n===R){G(e,R.error)}else if(n===undefined){q(e,t)}else if(r(n)){N(e,t,n)}else{q(e,t)}}}function V(t,r){if(t===r){G(t,P())}else if(e(r)){U(t,r,F(r))}else{q(t,r)}}function H(e){if(e._onerror){e._onerror(e._result)}W(e)}function q(e,t){if(e._state!==O){return}e._result=t;e._state=I;if(e._subscribers.length!==0){f(W,e)}}function G(e,t){if(e._state!==O){return}e._state=D;e._result=t;f(H,e)}function X(e,t,r,n){var a=e._subscribers;var i=a.length;e._onerror=null;a[i]=t;a[i+I]=r;a[i+D]=n;if(i===0&&e._state){f(W,e)}}function W(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,a=undefined,i=e._result;for(var o=0;o<t.length;o+=3){n=t[o];a=t[o+r];if(n){Q(r,n,a,i)}else{a(i)}}e._subscribers.length=0}function Y(){this.error=null}var Z=new Y;function J(e,t){try{return e(t)}catch(e){Z.error=e;return Z}}function Q(e,t,n,a){var i=r(n),o=undefined,s=undefined,l=undefined,u=undefined;if(i){o=J(n,a);if(o===Z){u=true;s=o.error;o=null}else{l=true}if(t===o){G(t,z());return}}else{o=a;l=true}if(t._state!==O){}else if(i&&l){V(t,o)}else if(u){G(t,s)}else if(e===I){q(t,o)}else if(e===D){G(t,o)}}function $(e,t){try{t(function t(r){V(e,r)},function t(r){G(e,r)})}catch(t){G(e,t)}}var K=0;function ee(){return K++}function te(e){e[S]=K++;e._state=undefined;e._result=undefined;e._subscribers=[]}function re(e,t){this._instanceConstructor=e;this.promise=new e(L);if(!this.promise[S]){te(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){q(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){q(this.promise,this._result)}}}else{G(this.promise,ne())}}function ne(){return new Error("Array Methods must be provided an Array")}re.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===O&&r<e;r++){this._eachEntry(t[r],r)}};re.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===C){var a=F(e);if(a===E&&e._state!==O){this._settledAt(e._state,t,e._result)}else if(typeof a!=="function"){this._remaining--;this._result[t]=e}else if(r===ue){var i=new r(L);U(i,e,a);this._willSettleAt(i,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(n(e),t)}};re.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===O){this._remaining--;if(e===D){G(n,r)}else{this._result[t]=r}}if(this._remaining===0){q(n,this._result)}};re.prototype._willSettleAt=function(e,t){var r=this;X(e,undefined,function(e){return r._settledAt(I,t,e)},function(e){return r._settledAt(D,t,e)})};function ae(e){return new re(this,e).promise}function ie(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var a=e.length;for(var i=0;i<a;i++){t.resolve(e[i]).then(r,n)}})}}function oe(e){var t=this;var r=new t(L);G(r,e);return r}function se(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function le(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ue(e){this[S]=ee();this._result=this._state=undefined;this._subscribers=[];if(L!==e){typeof e!=="function"&&se();this instanceof ue?$(this,e):le()}}ue.all=ae;ue.race=ie;ue.resolve=C;ue.reject=oe;ue._setScheduler=c;ue._setAsap=h;ue._asap=f;ue.prototype={constructor:ue,then:E,catch:function e(t){return this.then(null,t)}};function fe(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ue}fe();ue.polyfill=fe;ue.Promise=ue;return ue})}).call(this,t("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:248}],141:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":142,"./polyfill":144}],142:[function(e,t,r){"use strict";var n={object:true,symbol:true};t.exports=function(){var e;if(typeof Symbol!=="function")return false;e=Symbol("test symbol");try{String(e)}catch(e){return false}if(!n[typeof Symbol.iterator])return false;if(!n[typeof Symbol.toPrimitive])return false;if(!n[typeof Symbol.toStringTag])return false;return true}},{}],143:[function(e,t,r){"use strict";t.exports=function(e){if(!e)return false;if(typeof e==="symbol")return true;if(!e.constructor)return false;if(e.constructor.name!=="Symbol")return false;return e[e.constructor.toStringTag]==="Symbol"}},{}],144:[function(e,t,r){"use strict";var n=e("d"),a=e("./validate-symbol"),i=Object.create,o=Object.defineProperties,s=Object.defineProperty,l=Object.prototype,u,f,c,h=i(null),d;if(typeof Symbol==="function"){u=Symbol;try{String(u());d=true}catch(e){}}var v=function(){var e=i(null);return function(t){var r=0,a,i;while(e[t+(r||"")])++r;t+=r||"";e[t]=true;a="@@"+t;s(l,a,n.gs(null,function(e){if(i)return;i=true;s(this,a,n(e));i=false}));return a}}();c=function e(t){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return f(t)};t.exports=f=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");if(d)return u(t);r=i(c.prototype);t=t===undefined?"":String(t);return o(r,{__description__:n("",t),__name__:n("",v(t))})};o(f,{for:n(function(e){if(h[e])return h[e];return h[e]=f(String(e))}),keyFor:n(function(e){var t;a(e);for(t in h)if(h[t]===e)return t}),hasInstance:n("",u&&u.hasInstance||f("hasInstance")),isConcatSpreadable:n("",u&&u.isConcatSpreadable||f("isConcatSpreadable")),iterator:n("",u&&u.iterator||f("iterator")),match:n("",u&&u.match||f("match")),replace:n("",u&&u.replace||f("replace")),search:n("",u&&u.search||f("search")),species:n("",u&&u.species||f("species")),split:n("",u&&u.split||f("split")),toPrimitive:n("",u&&u.toPrimitive||f("toPrimitive")),toStringTag:n("",u&&u.toStringTag||f("toStringTag")),unscopables:n("",u&&u.unscopables||f("unscopables"))});o(c.prototype,{constructor:n(f),toString:n("",function(){return this.__name__})});o(f.prototype,{toString:n(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:n(function(){return a(this)})});s(f.prototype,f.toPrimitive,n("",function(){var e=a(this);if(typeof e==="symbol")return e;return e.toString()}));s(f.prototype,f.toStringTag,n("c","Symbol"));s(c.prototype,f.toStringTag,n("c",f.prototype[f.toStringTag]));s(c.prototype,f.toPrimitive,n("c",f.prototype[f.toPrimitive]))},{"./validate-symbol":145,d:85}],145:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":143}],146:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":147,"./polyfill":149}],147:[function(e,t,r){"use strict";t.exports=function(){var e,t;if(typeof WeakMap!=="function")return false;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return false}if(String(e)!=="[object WeakMap]")return false;if(typeof e.set!=="function")return false;if(e.set({},1)!==e)return false;if(typeof e.delete!=="function")return false;if(typeof e.has!=="function")return false;if(e.get(t)!=="one")return false;return true}},{}],148:[function(e,t,r){"use strict";t.exports=function(){if(typeof WeakMap!=="function")return false;return Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],149:[function(e,t,r){"use strict";var n=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-object"),i=e("es5-ext/object/valid-value"),o=e("es5-ext/string/random-uniq"),s=e("d"),l=e("es6-iterator/get"),u=e("es6-iterator/for-of"),f=e("es6-symbol").toStringTag,c=e("./is-native-implemented"),h=Array.isArray,d=Object.defineProperty,v=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf,g;t.exports=g=function(){var e=arguments[0],t;if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");if(c&&n&&WeakMap!==g){t=n(new WeakMap,p(this))}else{t=this}if(e!=null){if(!h(e))e=l(e)}d(t,"__weakMapData__",s("c","$weakMap$"+o()));if(!e)return t;u(e,function(e){i(e);t.set(e[0],e[1])});return t};if(c){if(n)n(g,WeakMap);g.prototype=Object.create(WeakMap.prototype,{constructor:s(g)})}Object.defineProperties(g.prototype,{delete:s(function(e){if(v.call(a(e),this.__weakMapData__)){delete e[this.__weakMapData__];return true}return false}),get:s(function(e){if(v.call(a(e),this.__weakMapData__)){return e[this.__weakMapData__]}}),has:s(function(e){return v.call(a(e),this.__weakMapData__)}),set:s(function(e,t){d(a(e),this.__weakMapData__,s("c",t));return this}),toString:s(function(){return"[object WeakMap]"})});d(g.prototype,f,s("c","WeakMap"))},{"./is-native-implemented":148,d:85,"es5-ext/object/set-prototype-of":122,"es5-ext/object/valid-object":126,"es5-ext/object/valid-value":127,"es5-ext/string/random-uniq":132,"es6-iterator/for-of":134,"es6-iterator/get":135,"es6-symbol":141}],150:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,r,n,i,l,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var f=new Error('Uncaught, unspecified "error" event. ('+t+")");f.context=t;throw f}}}r=this._events[e];if(s(r))return false;if(a(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1);r.apply(this,i)}}else if(o(r)){i=Array.prototype.slice.call(arguments,1);u=r.slice();n=u.length;for(l=0;l<n;l++)u[l].apply(this,i)}return true};n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,a(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!s(this._maxListeners)){r=this._maxListeners}else{r=n.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!a(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var r,n,i,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];i=r.length;n=-1;if(r===t||a(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(r)){for(s=i;s-- >0;){if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(a(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(a(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function a(e){return typeof e==="function"}function i(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function s(e){return e===void 0}},{}],151:[function(e,t,r){"use strict";function n(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&n(r))return false}else if(t!=="number")return false;return e-e<1}},{}],152:[function(e,t,r){var n=e("dtype");t.exports=a;function a(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");r=+(r||0)|0;if(Array.isArray(e)&&Array.isArray(e[0])){var a=e[0].length;var i=e.length*a;if(!t||typeof t==="string"){t=new(n(t||"float32"))(i+r)}var o=t.length-r;if(i!==o){throw new Error("source length "+i+" ("+a+"x"+e.length+")"+" does not match destination length "+o)}for(var s=0,l=r;s<e.length;s++){for(var u=0;u<a;u++){t[l++]=e[s][u]}}}else{if(!t||typeof t==="string"){var f=n(t||"float32");if(r===0){t=new f(e)}else{t=new f(e.length+r);t.set(e,r)}}else{t.set(e,r)}}return t}},{dtype:91}],153:[function(e,t,r){"use strict";var n=e("css-font/stringify");var a=[32,126];t.exports=i;function i(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512];var r=e.canvas||document.createElement("canvas");var i=e.font;var o=typeof e.step==="number"?[e.step,e.step]:e.step||[32,32];var s=e.chars||a;if(i&&typeof i!=="string")i=n(i);if(!Array.isArray(s)){s=String(s).split("")}else if(s.length===2&&typeof s[0]==="number"&&typeof s[1]==="number"){var l=[];for(var u=s[0],f=0;u<=s[1];u++){l[f++]=String.fromCharCode(u)}s=l}t=t.slice();r.width=t[0];r.height=t[1];var c=r.getContext("2d");c.fillStyle="#000";c.fillRect(0,0,r.width,r.height);c.font=i;c.textAlign="center";c.textBaseline="middle";c.fillStyle="#fff";var h=o[0]/2;var d=o[1]/2;for(var u=0;u<s.length;u++){c.fillText(s[u],h,d);if((h+=o[0])>t[0]-o[0]/2)h=o[0]/2,d+=o[1]}return r}},{"css-font/stringify":77}],154:[function(e,t,r){"use strict";t.exports=n;n.canvas=document.createElement("canvas");n.cache={};function n(e,t){if(!t)t={};if(typeof e==="string"||Array.isArray(e)){t.family=e}var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var s=t.size||t.fontSize||t.em||48;var l=t.weight||t.fontWeight||"";var u=t.style||t.fontStyle||"";var e=[u,l,s].join(" ")+"px "+r;var f=t.origin||"top";if(n.cache[r]){if(s<=n.cache[r].em){return a(n.cache[r],f)}}var c=t.canvas||n.canvas;var h=c.getContext("2d");var d={upper:t.upper!==undefined?t.upper:"H",lower:t.lower!==undefined?t.lower:"x",descent:t.descent!==undefined?t.descent:"p",ascent:t.ascent!==undefined?t.ascent:"h",tittle:t.tittle!==undefined?t.tittle:"i",overshoot:t.overshoot!==undefined?t.overshoot:"O"};var v=Math.ceil(s*1.5);c.height=v;c.width=v*.5;h.font=e;var p="H";var g={top:0};h.clearRect(0,0,v,v);h.textBaseline="top";h.fillStyle="black";h.fillText(p,0,0);var m=i(h.getImageData(0,0,v,v));h.clearRect(0,0,v,v);h.textBaseline="bottom";h.fillText(p,0,v);var y=i(h.getImageData(0,0,v,v));g.lineHeight=g.bottom=v-y+m;h.clearRect(0,0,v,v);h.textBaseline="alphabetic";h.fillText(p,0,v);var b=i(h.getImageData(0,0,v,v));var x=v-b-1+m;g.baseline=g.alphabetic=x;h.clearRect(0,0,v,v);h.textBaseline="middle";h.fillText(p,0,v*.5);var _=i(h.getImageData(0,0,v,v));g.median=g.middle=v-_-1+m-v*.5;h.clearRect(0,0,v,v);h.textBaseline="hanging";h.fillText(p,0,v*.5);var w=i(h.getImageData(0,0,v,v));g.hanging=v-w-1+m-v*.5;h.clearRect(0,0,v,v);h.textBaseline="ideographic";h.fillText(p,0,v);var A=i(h.getImageData(0,0,v,v));g.ideographic=v-A-1+m;if(d.upper){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.upper,0,0);g.upper=i(h.getImageData(0,0,v,v));g.capHeight=g.baseline-g.upper}if(d.lower){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.lower,0,0);g.lower=i(h.getImageData(0,0,v,v));g.xHeight=g.baseline-g.lower}if(d.tittle){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.tittle,0,0);g.tittle=i(h.getImageData(0,0,v,v))}if(d.ascent){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.ascent,0,0);g.ascent=i(h.getImageData(0,0,v,v))}if(d.descent){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.descent,0,0);g.descent=o(h.getImageData(0,0,v,v))}if(d.overshoot){h.clearRect(0,0,v,v);h.textBaseline="top";h.fillText(d.overshoot,0,0);var k=o(h.getImageData(0,0,v,v));g.overshoot=k-x}for(var T in g){g[T]/=s}g.em=s;n.cache[r]=g;return a(g,f)}function a(e,t){var r={};if(typeof t==="string")t=e[t];for(var n in e){if(n==="em")continue;r[n]=e[n]-t}return r}function i(e){var t=e.height;var r=e.data;for(var n=3;n<r.length;n+=4){if(r[n]!==0){return Math.floor((n-3)*.25/t)}}}function o(e){var t=e.height;var r=e.data;for(var n=r.length-1;n>0;n-=4){if(r[n]!==0){return Math.floor((n-3)*.25/t)}}}},{}],155:[function(e,t,r){"use strict";t.exports=b;var n=0;var a=1;function i(e,t,r,n,a,i){this._color=e;this.key=t;this.value=r;this.left=n;this.right=a;this._count=i}function o(e){return new i(e._color,e.key,e.value,e.left,e.right,e._count)}function s(e,t){return new i(e,t.key,t.value,t.left,t.right,t._count)}function l(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function u(e,t){this._compare=e;this.root=t}var f=u.prototype;Object.defineProperty(f,"keys",{get:function(){var e=[];this.forEach(function(t,r){e.push(t)});return e}});Object.defineProperty(f,"values",{get:function(){var e=[];this.forEach(function(t,r){e.push(r)});return e}});Object.defineProperty(f,"length",{get:function(){if(this.root){return this.root._count}return 0}});f.insert=function(e,t){var r=this._compare;var o=this.root;var f=[];var c=[];while(o){var h=r(e,o.key);f.push(o);c.push(h);if(h<=0){o=o.left}else{o=o.right}}f.push(new i(n,e,t,null,null,1));for(var d=f.length-2;d>=0;--d){var o=f[d];if(c[d]<=0){f[d]=new i(o._color,o.key,o.value,f[d+1],o.right,o._count+1)}else{f[d]=new i(o._color,o.key,o.value,o.left,f[d+1],o._count+1)}}for(var d=f.length-1;d>1;--d){var v=f[d-1];var o=f[d];if(v._color===a||o._color===a){break}var p=f[d-2];if(p.left===v){if(v.left===o){var g=p.right;if(g&&g._color===n){v._color=a;p.right=s(a,g);p._color=n;d-=1}else{p._color=n;p.left=v.right;v._color=a;v.right=p;f[d-2]=v;f[d-1]=o;l(p);l(v);if(d>=3){var m=f[d-3];if(m.left===p){m.left=v}else{m.right=v}}break}}else{var g=p.right;if(g&&g._color===n){v._color=a;p.right=s(a,g);p._color=n;d-=1}else{v.right=o.left;p._color=n;p.left=o.right;o._color=a;o.left=v;o.right=p;f[d-2]=o;f[d-1]=v;l(p);l(v);l(o);if(d>=3){var m=f[d-3];if(m.left===p){m.left=o}else{m.right=o}}break}}}else{if(v.right===o){var g=p.left;if(g&&g._color===n){v._color=a;p.left=s(a,g);p._color=n;d-=1}else{p._color=n;p.right=v.left;v._color=a;v.left=p;f[d-2]=v;f[d-1]=o;l(p);l(v);if(d>=3){var m=f[d-3];if(m.right===p){m.right=v}else{m.left=v}}break}}else{var g=p.left;if(g&&g._color===n){v._color=a;p.left=s(a,g);p._color=n;d-=1}else{v.left=o.right;p._color=n;p.right=o.left;o._color=a;o.right=v;o.left=p;f[d-2]=o;f[d-1]=v;l(p);l(v);l(o);if(d>=3){var m=f[d-3];if(m.right===p){m.right=o}else{m.left=o}}break}}}}f[0]._color=a;return new u(r,f[0])};function c(e,t){if(t.left){var r=c(e,t.left);if(r){return r}}var r=e(t.key,t.value);if(r){return r}if(t.right){return c(e,t.right)}}function h(e,t,r,n){var a=t(e,n.key);if(a<=0){if(n.left){var i=h(e,t,r,n.left);if(i){return i}}var i=r(n.key,n.value);if(i){return i}}if(n.right){return h(e,t,r,n.right)}}function d(e,t,r,n,a){var i=r(e,a.key);var o=r(t,a.key);var s;if(i<=0){if(a.left){s=d(e,t,r,n,a.left);if(s){return s}}if(o>0){s=n(a.key,a.value);if(s){return s}}}if(o>0&&a.right){return d(e,t,r,n,a.right)}}f.forEach=function e(t,r,n){if(!this.root){return}switch(arguments.length){case 1:return c(t,this.root);break;case 2:return h(r,this._compare,t,this.root);break;case 3:if(this._compare(r,n)>=0){return}return d(r,n,this._compare,t,this.root);break}};Object.defineProperty(f,"begin",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.left}return new v(this,e)}});Object.defineProperty(f,"end",{get:function(){var e=[];var t=this.root;while(t){e.push(t);t=t.right}return new v(this,e)}});f.at=function(e){if(e<0){return new v(this,[])}var t=this.root;var r=[];while(true){r.push(t);if(t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e){return new v(this,r)}e-=1;if(t.right){if(e>=t.right._count){break}t=t.right}else{break}}return new v(this,[])};f.ge=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<=0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};f.gt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i<0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};f.lt=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>0){a=n.length}if(i<=0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};f.le=function(e){var t=this._compare;var r=this.root;var n=[];var a=0;while(r){var i=t(e,r.key);n.push(r);if(i>=0){a=n.length}if(i<0){r=r.left}else{r=r.right}}n.length=a;return new v(this,n)};f.find=function(e){var t=this._compare;var r=this.root;var n=[];while(r){var a=t(e,r.key);n.push(r);if(a===0){return new v(this,n)}if(a<=0){r=r.left}else{r=r.right}}return new v(this,[])};f.remove=function(e){var t=this.find(e);if(t){return t.remove()}return this};f.get=function(e){var t=this._compare;var r=this.root;while(r){var n=t(e,r.key);if(n===0){return r.value}if(n<=0){r=r.left}else{r=r.right}}return};function v(e,t){this.tree=e;this._stack=t}var p=v.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(p,"node",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1]}return null},enumerable:true});p.clone=function(){return new v(this.tree,this._stack.slice())};function g(e,t){e.key=t.key;e.value=t.value;e.left=t.left;e.right=t.right;e._color=t._color;e._count=t._count}function m(e){var t,r,i,u;for(var f=e.length-1;f>=0;--f){t=e[f];if(f===0){t._color=a;return}r=e[f-1];if(r.left===t){i=r.right;if(i.right&&i.right._color===n){i=r.right=o(i);u=i.right=o(i.right);r.right=i.left;i.left=r;i.right=u;i._color=r._color;t._color=a;r._color=a;u._color=a;l(r);l(i);if(f>1){var c=e[f-2];if(c.left===r){c.left=i}else{c.right=i}}e[f-1]=i;return}else if(i.left&&i.left._color===n){i=r.right=o(i);u=i.left=o(i.left);r.right=u.left;i.left=u.right;u.left=r;u.right=i;u._color=r._color;r._color=a;i._color=a;t._color=a;l(r);l(i);l(u);if(f>1){var c=e[f-2];if(c.left===r){c.left=u}else{c.right=u}}e[f-1]=u;return}if(i._color===a){if(r._color===n){r._color=a;r.right=s(n,i);return}else{r.right=s(n,i);continue}}else{i=o(i);r.right=i.left;i.left=r;i._color=r._color;r._color=n;l(r);l(i);if(f>1){var c=e[f-2];if(c.left===r){c.left=i}else{c.right=i}}e[f-1]=i;e[f]=r;if(f+1<e.length){e[f+1]=t}else{e.push(t)}f=f+2}}else{i=r.left;if(i.left&&i.left._color===n){i=r.left=o(i);u=i.left=o(i.left);r.left=i.right;i.right=r;i.left=u;i._color=r._color;t._color=a;r._color=a;u._color=a;l(r);l(i);if(f>1){var c=e[f-2];if(c.right===r){c.right=i}else{c.left=i}}e[f-1]=i;return}else if(i.right&&i.right._color===n){i=r.left=o(i);u=i.right=o(i.right);r.left=u.right;i.right=u.left;u.right=r;u.left=i;u._color=r._color;r._color=a;i._color=a;t._color=a;l(r);l(i);l(u);if(f>1){var c=e[f-2];if(c.right===r){c.right=u}else{c.left=u}}e[f-1]=u;return}if(i._color===a){if(r._color===n){r._color=a;r.left=s(n,i);return}else{r.left=s(n,i);continue}}else{i=o(i);r.left=i.right;i.right=r;i._color=r._color;r._color=n;l(r);l(i);if(f>1){var c=e[f-2];if(c.right===r){c.right=i}else{c.left=i}}e[f-1]=i;e[f]=r;if(f+1<e.length){e[f+1]=t}else{e.push(t)}f=f+2}}}}p.remove=function(){var e=this._stack;if(e.length===0){return this.tree}var t=new Array(e.length);var r=e[e.length-1];t[t.length-1]=new i(r._color,r.key,r.value,r.left,r.right,r._count);for(var o=e.length-2;o>=0;--o){var r=e[o];if(r.left===e[o+1]){t[o]=new i(r._color,r.key,r.value,t[o+1],r.right,r._count)}else{t[o]=new i(r._color,r.key,r.value,r.left,t[o+1],r._count)}}r=t[t.length-1];if(r.left&&r.right){var s=t.length;r=r.left;while(r.right){t.push(r);r=r.right}var l=t[s-1];t.push(new i(r._color,l.key,l.value,r.left,r.right,r._count));t[s-1].key=r.key;t[s-1].value=r.value;for(var o=t.length-2;o>=s;--o){r=t[o];t[o]=new i(r._color,r.key,r.value,r.left,t[o+1],r._count)}t[s-1].left=t[s]}r=t[t.length-1];if(r._color===n){var f=t[t.length-2];if(f.left===r){f.left=null}else if(f.right===r){f.right=null}t.pop();for(var o=0;o<t.length;++o){t[o]._count--}return new u(this.tree._compare,t[0])}else{if(r.left||r.right){if(r.left){g(r,r.left)}else if(r.right){g(r,r.right)}r._color=a;for(var o=0;o<t.length-1;++o){t[o]._count--}return new u(this.tree._compare,t[0])}else if(t.length===1){return new u(this.tree._compare,null)}else{for(var o=0;o<t.length;++o){t[o]._count--}var c=t[t.length-2];m(t);if(c.left===r){c.left=null}else{c.right=null}}}return new u(this.tree._compare,t[0])};Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].key}return},enumerable:true});Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0){return this._stack[this._stack.length-1].value}return},enumerable:true});Object.defineProperty(p,"index",{get:function(){var e=0;var t=this._stack;if(t.length===0){var r=this.tree.root;if(r){return r._count}return 0}else if(t[t.length-1].left){e=t[t.length-1].left._count}for(var n=t.length-2;n>=0;--n){if(t[n+1]===t[n].right){++e;if(t[n].left){e+=t[n].left._count}}}return e},enumerable:true});p.next=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.right){t=t.right;while(t){e.push(t);t=t.left}}else{e.pop();while(e.length>0&&e[e.length-1].right===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(p,"hasNext",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].right){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].left===e[t]){return true}}return false}});p.update=function(e){var t=this._stack;if(t.length===0){throw new Error("Can't update empty node!")}var r=new Array(t.length);var n=t[t.length-1];r[r.length-1]=new i(n._color,n.key,e,n.left,n.right,n._count);for(var a=t.length-2;a>=0;--a){n=t[a];if(n.left===t[a+1]){r[a]=new i(n._color,n.key,n.value,r[a+1],n.right,n._count)}else{r[a]=new i(n._color,n.key,n.value,n.left,r[a+1],n._count)}}return new u(this.tree._compare,r[0])};p.prev=function(){var e=this._stack;if(e.length===0){return}var t=e[e.length-1];if(t.left){t=t.left;while(t){e.push(t);t=t.right}}else{e.pop();while(e.length>0&&e[e.length-1].left===t){t=e[e.length-1];e.pop()}}};Object.defineProperty(p,"hasPrev",{get:function(){var e=this._stack;if(e.length===0){return false}if(e[e.length-1].left){return true}for(var t=e.length-1;t>0;--t){if(e[t-1].right===e[t]){return true}}return false}});function y(e,t){if(e<t){return-1}if(e>t){return 1}return 0}function b(e){return new u(e||y,null)}},{}],156:[function(e,t,r){var n=7;var a=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];var i=607/128;var o=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function s(e){if(e<0)return Number("0/0");var t=o[0];for(var r=o.length-1;r>0;--r)t+=o[r]/(e+r);var n=e+i+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(n)-n+Math.log(t)-Math.log(e)}t.exports=function e(t){if(t<.5){return Math.PI/(Math.sin(Math.PI*t)*e(1-t))}else if(t>100)return Math.exp(s(t));else{t-=1;var r=a[0];for(var i=1;i<n+2;i++){r+=a[i]/(t+i)}var o=t+n+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*r}};t.exports.log=s},{}],157:[function(e,t,r){t.exports=n;function n(e,t){if(typeof e!=="string"){throw new TypeError("must specify type string")}t=t||{};if(typeof document==="undefined"&&!t.canvas){return null}var r=t.canvas||document.createElement("canvas");if(typeof t.width==="number"){r.width=t.width}if(typeof t.height==="number"){r.height=t.height}var n=t;var a;try{var i=[e];if(e.indexOf("webgl")===0){i.push("experimental-"+e)}for(var o=0;o<i.length;o++){a=r.getContext(i[o],n);if(a)return a}}catch(e){a=null}return a||null}},{}],158:[function(e,t,r){"use strict";var n=e("typedarray-pool");var a=e("ndarray-ops");var i=e("ndarray");var o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(e,t,r,n,a){this.gl=e;this.type=t;this.handle=r;this.length=n;this.usage=a}var l=s.prototype;l.bind=function(){this.gl.bindBuffer(this.type,this.handle)};l.unbind=function(){this.gl.bindBuffer(this.type,null)};l.dispose=function(){this.gl.deleteBuffer(this.handle)};function u(e,t,r,n,a,i){var o=a.length*a.BYTES_PER_ELEMENT;if(i<0){e.bufferData(t,a,n);return o}if(o+i>r){throw new Error("gl-buffer: If resizing buffer, must not specify offset")}e.bufferSubData(t,i,a);return r}function f(e,t){var r=n.malloc(e.length,t);var a=e.length;for(var i=0;i<a;++i){r[i]=e[i]}return r}function c(e,t){var r=1;for(var n=t.length-1;n>=0;--n){if(t[n]!==r){return false}r*=e[n]}return true}l.update=function(e,t){if(typeof t!=="number"){t=-1}this.bind();if(typeof e==="object"&&typeof e.shape!=="undefined"){var r=e.dtype;if(o.indexOf(r)<0){r="float32"}if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){var s=gl.getExtension("OES_element_index_uint");if(s&&r!=="uint16"){r="uint32"}else{r="uint16"}}if(r===e.dtype&&c(e.shape,e.stride)){if(e.offset===0&&e.data.length===e.shape[0]){this.length=u(this.gl,this.type,this.length,this.usage,e.data,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t)}}else{var l=n.malloc(e.size,r);var h=i(l,e.shape);a.assign(h,e);if(t<0){this.length=u(this.gl,this.type,this.length,this.usage,l,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,l.subarray(0,e.size),t)}n.free(l)}}else if(Array.isArray(e)){var d;if(this.type===this.gl.ELEMENT_ARRAY_BUFFER){d=f(e,"uint16")}else{d=f(e,"float32")}if(t<0){this.length=u(this.gl,this.type,this.length,this.usage,d,t)}else{this.length=u(this.gl,this.type,this.length,this.usage,d.subarray(0,e.length),t)}n.free(d)}else if(typeof e==="object"&&typeof e.length==="number"){this.length=u(this.gl,this.type,this.length,this.usage,e,t)}else if(typeof e==="number"||e===undefined){if(t>=0){throw new Error("gl-buffer: Cannot specify offset when resizing buffer")}e=e|0;if(e<=0){e=1}this.gl.bufferData(this.type,e|0,this.usage);this.length=e}else{throw new Error("gl-buffer: Invalid data type")}};function h(e,t,r,n){r=r||e.ARRAY_BUFFER;n=n||e.DYNAMIC_DRAW;if(r!==e.ARRAY_BUFFER&&r!==e.ELEMENT_ARRAY_BUFFER){throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER")}if(n!==e.DYNAMIC_DRAW&&n!==e.STATIC_DRAW&&n!==e.STREAM_DRAW){throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW")}var a=e.createBuffer();var i=new s(e,r,a,0,n);i.update(t);return i}t.exports=h},{ndarray:220,"ndarray-ops":219,"typedarray-pool":291}],159:[function(e,t,r){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],160:[function(e,t,r){var n=e("./1.0/numbers");t.exports=function e(t){return n[t]}},{"./1.0/numbers":159}],161:[function(e,t,r){"use strict";t.exports=g;var n=e("iota-array");var a=e("gl-shader");var i=e("gl-buffer");var o=e("ndarray");var s=e("surface-nets");var l=e("cdt2d");var u=e("clean-pslg");var f=e("binary-search-bounds");var c=e("./lib/shaders");function h(e,t,r,n,a,i,o,s){this.plot=e;this.shader=t;this.fillShader=r;this.positionBuffer=n;this.colorBuffer=a;this.idBuffer=i;this.fillPositionBuffer=o;this.fillColorBuffer=s;this.fillVerts=0;this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.numVertices=0;this.lineWidth=1}var d=h.prototype;var v=[1,0,0,0,0,1,1,0,1,1,0,1];d.draw=function(){var e=[1,0,0,0,1,0,0,0,1];var t=[0,0];return function(){var r=this.plot;var n=this.shader;var a=this.fillShader;var i=this.bounds;var o=this.numVertices;var s=this.fillVerts;var l,u;var f=r.gl;var c=r.viewBox;var h=r.dataBox;var d=i[2]-i[0];var v=i[3]-i[1];var p=h[2]-h[0];var g=h[3]-h[1];e[0]=2*d/p;e[4]=2*v/g;e[6]=2*(i[0]-h[0])/p-1;e[7]=2*(i[1]-h[1])/g-1;t[0]=c[2]-c[0];t[1]=c[3]-c[1];if(s>0){a.bind();l=a.uniforms;l.viewTransform=e;l.screenShape=t;u=n.attributes;this.fillPositionBuffer.bind();u.position.pointer();this.fillColorBuffer.bind();u.color.pointer(f.UNSIGNED_BYTE,true);f.drawArrays(f.TRIANGLES,0,s)}if(o>0){n.bind();var m=this.lineWidth*r.pixelRatio;l=n.uniforms;l.viewTransform=e;l.screenShape=t;l.lineWidth=m;l.pointSize=1e3;u=n.attributes;this.positionBuffer.bind();u.position.pointer(f.FLOAT,false,16,0);u.tangent.pointer(f.FLOAT,false,16,8);this.colorBuffer.bind();u.color.pointer(f.UNSIGNED_BYTE,true);f.drawArrays(f.TRIANGLES,0,o);l.lineWidth=0;l.pointSize=m;this.positionBuffer.bind();u.position.pointer(f.FLOAT,false,16*3,0);u.tangent.pointer(f.FLOAT,false,16*3,8);this.colorBuffer.bind();u.color.pointer(f.UNSIGNED_BYTE,true,4*3,0);f.drawArrays(f.POINTS,0,o/3)}}}();d.drawPick=function(){return function(e){return e}}();d.pick=function(e,t,r){return null};function p(e,t){var r=Math.floor(t);if(r<0){return e[0]}else if(r>=e.length-1){return e[e.length-1]}var n=t-r;return(1-n)*e[r]+n*e[r+1]}d.update=function(e){e=e||{};var t=e.shape||[0,0];var r=e.x||n(t[0]);var a=e.y||n(t[1]);var i=e.z||new Float32Array(t[0]*t[1]);var c=e.levels||[];var h=e.levelColors||[];var d=this.bounds;var g=d[0]=r[0];var m=d[1]=a[0];var y=d[2]=r[r.length-1];var b=d[3]=a[a.length-1];if(g===y){d[2]+=1;y+=1}if(m===b){d[3]+=1;b+=1}var x=1/(y-g);var _=1/(b-m);this.lineWidth=e.lineWidth||1;var w=o(i,t);var A=[];var k=[];var T=[];var M=[];var E=[[0,0],[t[0]-1,0],[0,t[1]-1],[t[0]-1,t[1]-1]];function C(e,t,r,n){var a=n-r;if(Math.abs(a)<1e-6){return t}return Math.floor(t)+Math.max(.001,Math.min(.999,(e-r)/a))}for(var S=0;S<c.length;++S){var L=c[S];if(S>0&&L===c[S-1]){continue}var O=s(w,L);var I=255*h[4*S]|0;var D=255*h[4*S+1]|0;var R=255*h[4*S+2]|0;var P=255*h[4*S+3]|0;var z=O.cells;var F=O.positions;var B=Array(F.length);for(var N=0;N<B.length;++N){B[N]=0}for(N=0;N<z.length;++N){var j=z[N];B[j[0]]+=1;B[j[1]]+=1}for(N=0;N<B.length;++N){var U=B[N];if(U===0){continue}var V=F[N];B[N]=E.length;E.push(V);if(U>1){continue}var H=V[0];var q=V[1];var G=w.get(Math.floor(H),Math.floor(q));var X=w.get(Math.floor(H),Math.ceil(q));var W=w.get(Math.ceil(H),Math.floor(q));var Y=w.get(Math.ceil(H),Math.ceil(q));var Z;if(Math.floor(V[0])===0&&G<=L!==X<L){Z=[0,C(L,V[1],G,X)]}else if(Math.ceil(V[0])===t[0]-1&&W<=L!==Y<L){Z=[t[0]-1,C(L,V[1],W,Y)]}else if(Math.floor(V[1])===0&&G<=L!==W<L){Z=[C(L,V[0],G,W),0]}else if(Math.ceil(V[1])===t[1]-1&&X<=L!==Y<L){Z=[C(L,V[0],X,Y),t[1]-1]}if(Z){z.push([N,F.length]);B.push(E.length);F.push(Z)}}for(N=0;N<z.length;++N){var J=z[N];var Q=F[J[0]];var $=F[J[1]];M.push([B[J[0]],B[J[1]]]);var K=Math.round(Q[0])+t[0]*Math.round(Q[1]);var ee=p(r,Q[0]);var te=p(a,Q[1]);var re=p(r,$[0]);var ne=p(a,$[1]);ee=x*(ee-g);te=_*(te-m);re=x*(re-g);ne=_*(ne-m);var ae=ee-re;var ie=te-ne;for(var oe=0;oe<v.length;oe+=2){var se=v[oe];var le=1-se;var ue=2*v[oe+1]-1;A.push(le*ee+se*re,le*te+se*ne,ue*ae,ue*ie);k.push(I,D,R,P);T.push(K)}}}this.positionBuffer.update(new Float32Array(A));this.colorBuffer.update(new Uint8Array(k));this.idBuffer.update(new Uint32Array(T));this.numVertices=T.length;var fe=e.fillColors;var ce=[];var he=[];var de=0;if(fe){u(E,M);var ve=l(E,M,{delaunay:false});for(S=0;S<ve.length;++S){var pe=ve[S];var ge=0;var me=0;for(N=0;N<3;++N){var ye=E[pe[N]];var be=p(r,ye[0]);var xe=p(a,ye[1]);ge+=ye[0];me+=ye[1];he.push(x*(be-g),_*(xe-m))}ge/=3;me/=3;var _e=Math.floor(ge);var we=Math.floor(me);var Ae=ge-_e;var ke=me-we;var Te=w.get(_e,we);var Me=w.get(_e,we+1);var Ee=w.get(_e+1,we);var Ce=w.get(_e+1,we+1);var Se=(1-ke)*((1-Ae)*Te+Ae*Ee)+ke*((1-Ae)*Me+Ae*Ce);var Le=f.le(c,Se)+1;var Oe=255*fe[4*Le+0]|0;var Ie=255*fe[4*Le+1]|0;var De=255*fe[4*Le+2]|0;var Re=255*fe[4*Le+3]|0;ce.push(Oe,Ie,De,Re,Oe,Ie,De,Re,Oe,Ie,De,Re);de+=3}this.fillPositionBuffer.update(new Float32Array(he));this.fillColorBuffer.update(new Uint8Array(ce));this.fillVerts=de}};d.dispose=function(){this.plot.removeObject(this)};function g(e,t){var r=e.gl;var n=a(r,c.vertex,c.fragment);var o=a(r,c.fillVertex,c.fragment);var s=i(r);var l=i(r);var u=i(r);var f=i(r);var d=i(r);var v=new h(e,n,o,s,l,u,f,d);v.update(t);e.addObject(v);return v}},{"./lib/shaders":162,"binary-search-bounds":163,cdt2d:53,"clean-pslg":60,"gl-buffer":158,"gl-shader":182,"iota-array":206,ndarray:220,"surface-nets":279}],162:[function(e,t,r){"use strict";var n=e("glslify");t.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 tangent;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 screenShape;\nuniform float lineWidth;\nuniform float pointSize;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  vec2 vTangent = normalize(viewTransform * vec3(tangent, 0)).xy;\n  vec2 offset = vec2(vTangent.y, -vTangent.x) / screenShape;\n\n  gl_Position = vec4(\n    vPosition.xy + offset * lineWidth * vPosition.z,\n    0,\n    vPosition.z);\n\n  gl_PointSize = pointSize;\n}\n"]),fillVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:200}],163:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{dup:58}],164:[function(e,t,r){"use strict";var n=e("gl-texture2d");t.exports=b;var a=null;var i;var o;var s;var l;function u(e){var t=e.getParameter(e.FRAMEBUFFER_BINDING);var r=e.getParameter(e.RENDERBUFFER_BINDING);var n=e.getParameter(e.TEXTURE_BINDING_2D);return[t,r,n]}function f(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]);e.bindRenderbuffer(e.RENDERBUFFER,t[1]);e.bindTexture(e.TEXTURE_2D,t[2])}function c(e,t){var r=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(r+1);for(var n=0;n<=r;++n){var i=new Array(r);for(var o=0;o<n;++o){i[o]=e.COLOR_ATTACHMENT0+o}for(var o=n;o<r;++o){i[o]=e.NONE}a[n]=i}}function h(e){switch(e){case i:throw new Error("gl-fbo: Framebuffer unsupported");case o:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case l:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(e,t,r,a,i,o){if(!a){return null}var s=n(e,t,r,i,a);s.magFilter=e.NEAREST;s.minFilter=e.NEAREST;s.mipSamples=1;s.bind();e.framebufferTexture2D(e.FRAMEBUFFER,o,e.TEXTURE_2D,s.handle,0);return s}function v(e,t,r,n,a){var i=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,i);e.renderbufferStorage(e.RENDERBUFFER,n,t,r);e.framebufferRenderbuffer(e.FRAMEBUFFER,a,e.RENDERBUFFER,i);return i}function p(e){var t=u(e.gl);var r=e.gl;var n=e.handle=r.createFramebuffer();var i=e._shape[0];var o=e._shape[1];var s=e.color.length;var l=e._ext;var c=e._useStencil;var p=e._useDepth;var g=e._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var m=0;m<s;++m){e.color[m]=d(r,i,o,g,r.RGBA,r.COLOR_ATTACHMENT0+m)}if(s===0){e._color_rb=v(r,i,o,r.RGBA4,r.COLOR_ATTACHMENT0);if(l){l.drawBuffersWEBGL(a[0])}}else if(s>1){l.drawBuffersWEBGL(a[s])}var y=r.getExtension("WEBGL_depth_texture");if(y){if(c){e.depth=d(r,i,o,y.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT)}else if(p){e.depth=d(r,i,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)}}else{if(p&&c){e._depth_rb=v(r,i,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT)}else if(p){e._depth_rb=v(r,i,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT)}else if(c){e._depth_rb=v(r,i,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT)}}var b=r.checkFramebufferStatus(r.FRAMEBUFFER);if(b!==r.FRAMEBUFFER_COMPLETE){e._destroyed=true;r.bindFramebuffer(r.FRAMEBUFFER,null);r.deleteFramebuffer(e.handle);e.handle=null;if(e.depth){e.depth.dispose();e.depth=null}if(e._depth_rb){r.deleteRenderbuffer(e._depth_rb);e._depth_rb=null}for(var m=0;m<e.color.length;++m){e.color[m].dispose();e.color[m]=null}if(e._color_rb){r.deleteRenderbuffer(e._color_rb);e._color_rb=null}f(r,t);h(b)}f(r,t)}function g(e,t,r,n,a,i,o,s){this.gl=e;this._shape=[t|0,r|0];this._destroyed=false;this._ext=s;this.color=new Array(a);for(var l=0;l<a;++l){this.color[l]=null}this._color_rb=null;this.depth=null;this._depth_rb=null;this._colorType=n;this._useDepth=i;this._useStencil=o;var u=this;var f=[t|0,r|0];Object.defineProperties(f,{0:{get:function(){return u._shape[0]},set:function(e){return u.width=e}},1:{get:function(){return u._shape[1]},set:function(e){return u.height=e}}});this._shapeVector=f;p(this)}var m=g.prototype;function y(e,t,r){if(e._destroyed){throw new Error("gl-fbo: Can't resize destroyed FBO")}if(e._shape[0]===t&&e._shape[1]===r){return}var n=e.gl;var a=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-fbo: Can't resize FBO, invalid dimensions")}e._shape[0]=t;e._shape[1]=r;var i=u(n);for(var o=0;o<e.color.length;++o){e.color[o].shape=e._shape}if(e._color_rb){n.bindRenderbuffer(n.RENDERBUFFER,e._color_rb);n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,e._shape[0],e._shape[1])}if(e.depth){e.depth.shape=e._shape}if(e._depth_rb){n.bindRenderbuffer(n.RENDERBUFFER,e._depth_rb);if(e._useDepth&&e._useStencil){n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e._shape[0],e._shape[1])}else if(e._useDepth){n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e._shape[0],e._shape[1])}else if(e._useStencil){n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,e._shape[0],e._shape[1])}}n.bindFramebuffer(n.FRAMEBUFFER,e.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);if(s!==n.FRAMEBUFFER_COMPLETE){e.dispose();f(n,i);h(s)}f(n,i)}Object.defineProperties(m,{shape:{get:function(){if(this._destroyed){return[0,0]}return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}if(e.length!==2){throw new Error("gl-fbo: Shape vector must be length 2")}var t=e[0]|0;var r=e[1]|0;y(this,t,r);return[t,r]},enumerable:false},width:{get:function(){if(this._destroyed){return 0}return this._shape[0]},set:function(e){e=e|0;y(this,e,this._shape[1]);return e},enumerable:false},height:{get:function(){if(this._destroyed){return 0}return this._shape[1]},set:function(e){e=e|0;y(this,this._shape[0],e);return e},enumerable:false}});m.bind=function(){if(this._destroyed){return}var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle);e.viewport(0,0,this._shape[0],this._shape[1])};m.dispose=function(){if(this._destroyed){return}this._destroyed=true;var e=this.gl;e.deleteFramebuffer(this.handle);this.handle=null;if(this.depth){this.depth.dispose();this.depth=null}if(this._depth_rb){e.deleteRenderbuffer(this._depth_rb);this._depth_rb=null}for(var t=0;t<this.color.length;++t){this.color[t].dispose();this.color[t]=null}if(this._color_rb){e.deleteRenderbuffer(this._color_rb);this._color_rb=null}};function b(e,t,r,n){if(!i){i=e.FRAMEBUFFER_UNSUPPORTED;o=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT;s=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS;l=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT}var u=e.getExtension("WEBGL_draw_buffers");if(!a&&u){c(e,u)}if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}if(typeof t!=="number"){throw new Error("gl-fbo: Missing shape parameter")}var f=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>f||r<0||r>f){throw new Error("gl-fbo: Parameters are too large for FBO")}n=n||{};var h=1;if("color"in n){h=Math.max(n.color|0,0);if(h<0){throw new Error("gl-fbo: Must specify a nonnegative number of colors")}if(h>1){if(!u){throw new Error("gl-fbo: Multiple draw buffer extension not supported")}else if(h>e.getParameter(u.MAX_COLOR_ATTACHMENTS_WEBGL)){throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}}var d=e.UNSIGNED_BYTE;var v=e.getExtension("OES_texture_float");if(n.float&&h>0){if(!v){throw new Error("gl-fbo: Context does not support floating point textures")}d=e.FLOAT}else if(n.preferFloat&&h>0){if(v){d=e.FLOAT}}var p=true;if("depth"in n){p=!!n.depth}var m=false;if("stencil"in n){m=!!n.stencil}return new g(e,t,r,d,h,p,m,u)}},{"gl-texture2d":190}],165:[function(e,t,r){var n=e("sprintf-js").sprintf;var a=e("gl-constants/lookup");var i=e("glsl-shader-name");var o=e("add-line-numbers");t.exports=s;function s(e,t,r){"use strict";var s=i(t)||"of unknown name (see npm glsl-shader-name)";var l="unknown type";if(r!==undefined){l=r===a.FRAGMENT_SHADER?"fragment":"vertex"}var u=n("Error compiling %s shader %s:\n",l,s);var f=n("%s%s",u,e);var c=e.split("\n");var h={};for(var d=0;d<c.length;d++){var v=c[d];if(v===""||v==="\0")continue;var p=parseInt(v.split(":")[2]);if(isNaN(p)){throw new Error(n("Could not parse error: %s",v))}h[p]=v}var g=o(t).split("\n");for(var d=0;d<g.length;d++){if(!h[d+3]&&!h[d+2]&&!h[d+1])continue;var m=g[d];u+=m+"\n";if(h[d+1]){var y=h[d+1];y=y.substr(y.split(":",3).join(":").length+1).trim();u+=n("^^^ %s\n\n",y)}}return{long:u.trim(),short:f.trim()}}},{"add-line-numbers":17,"gl-constants/lookup":160,"glsl-shader-name":192,"sprintf-js":276}],166:[function(e,t,r){"use strict";t.exports=h;var n=e("binary-search-bounds");var a=e("iota-array");var i=e("typedarray-pool");var o=e("gl-shader");var s=e("gl-buffer");var l=e("./lib/shaders");function u(e,t,r,n,a,i,o){this.plot=e;this.shader=t;this.pickShader=r;this.positionBuffer=n;this.weightBuffer=a;this.colorBuffer=i;this.idBuffer=o;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}var f=u.prototype;var c=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot;var r=this.shader;var n=this.bounds;var a=this.numVertices;if(a<=0){return}var i=t.gl;var o=t.dataBox;var s=n[2]-n[0];var l=n[3]-n[1];var u=o[2]-o[0];var f=o[3]-o[1];e[0]=2*s/u;e[4]=2*l/f;e[6]=2*(n[0]-o[0])/u-1;e[7]=2*(n[1]-o[1])/f-1;r.bind();var c=r.uniforms;c.viewTransform=e;c.shape=this.shape;var h=r.attributes;this.positionBuffer.bind();h.position.pointer();this.weightBuffer.bind();h.weight.pointer(i.UNSIGNED_BYTE,false);this.colorBuffer.bind();h.color.pointer(i.UNSIGNED_BYTE,true);i.drawArrays(i.TRIANGLES,0,a)}}();f.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1];var t=[0,0,0,0];return function(r){var n=this.plot;var a=this.pickShader;var i=this.bounds;var o=this.numVertices;if(o<=0){return}var s=n.gl;var l=n.dataBox;var u=i[2]-i[0];var f=i[3]-i[1];var c=l[2]-l[0];var h=l[3]-l[1];e[0]=2*u/c;e[4]=2*f/h;e[6]=2*(i[0]-l[0])/c-1;e[7]=2*(i[1]-l[1])/h-1;for(var d=0;d<4;++d){t[d]=r>>d*8&255}this.pickOffset=r;a.bind();var v=a.uniforms;v.viewTransform=e;v.pickOffset=t;v.shape=this.shape;var p=a.attributes;this.positionBuffer.bind();p.position.pointer();this.weightBuffer.bind();p.weight.pointer(s.UNSIGNED_BYTE,false);this.idBuffer.bind();p.pickId.pointer(s.UNSIGNED_BYTE,false);s.drawArrays(s.TRIANGLES,0,o);return r+this.shape[0]*this.shape[1]}}();f.pick=function(e,t,r){var n=this.pickOffset;var a=this.shape[0]*this.shape[1];if(r<n||r>=n+a){return null}var i=r-n;var o=this.xData;var s=this.yData;return{object:this,pointId:i,dataCoord:[o[i%this.shape[0]],s[i/this.shape[0]|0]]}};f.update=function(e){e=e||{};var t=e.shape||[0,0];var r=e.x||a(t[0]);var o=e.y||a(t[1]);var s=e.z||new Float32Array(t[0]*t[1]);this.xData=r;this.yData=o;var l=e.colorLevels||[0];var u=e.colorValues||[0,0,0,1];var f=l.length;var h=this.bounds;var d=h[0]=r[0];var v=h[1]=o[0];var p=h[2]=r[r.length-1];var g=h[3]=o[o.length-1];var m=1/(p-d);var y=1/(g-v);var b=t[0];var x=t[1];this.shape=[b,x];var _=(b-1)*(x-1)*(c.length>>>1);this.numVertices=_;var w=i.mallocUint8(_*4);var A=i.mallocFloat32(_*2);var k=i.mallocUint8(_*2);var T=i.mallocUint32(_);var M=0;for(var E=0;E<x-1;++E){var C=y*(o[E]-v);var S=y*(o[E+1]-v);for(var L=0;L<b-1;++L){var O=m*(r[L]-d);var I=m*(r[L+1]-d);for(var D=0;D<c.length;D+=2){var R=c[D];var P=c[D+1];var z=(E+P)*b+(L+R);var F=s[z];var B=n.le(l,F);var N,j,U,V;if(B<0){N=u[0];j=u[1];U=u[2];V=u[3]}else if(B===f-1){N=u[4*f-4];j=u[4*f-3];U=u[4*f-2];V=u[4*f-1]}else{var H=(F-l[B])/(l[B+1]-l[B]);var q=1-H;var G=4*B;var X=4*(B+1);N=q*u[G]+H*u[X];j=q*u[G+1]+H*u[X+1];U=q*u[G+2]+H*u[X+2];V=q*u[G+3]+H*u[X+3]}w[4*M]=255*N;w[4*M+1]=255*j;w[4*M+2]=255*U;w[4*M+3]=255*V;A[2*M]=O*.5+I*.5;A[2*M+1]=C*.5+S*.5;k[2*M]=R;k[2*M+1]=P;T[M]=E*b+L;M+=1}}}this.positionBuffer.update(A);this.weightBuffer.update(k);this.colorBuffer.update(w);this.idBuffer.update(T);i.free(A);i.free(w);i.free(k);i.free(T)};f.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)};function h(e,t){var r=e.gl;var n=o(r,l.vertex,l.fragment);var a=o(r,l.pickVertex,l.pickFragment);var i=s(r);var f=s(r);var c=s(r);var h=s(r);var d=new u(e,n,a,i,f,c,h);d.update(t);e.addObject(d);return d}},{"./lib/shaders":167,"binary-search-bounds":168,"gl-buffer":158,"gl-shader":182,"iota-array":206,"typedarray-pool":291}],167:[function(e,t,r){"use strict";var n=e("glslify");t.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:200}],168:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{dup:58}],169:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,s=n+n,l=a+a,u=r*o,f=n*o,c=n*s,h=a*o,d=a*s,v=a*l,p=i*o,g=i*s,m=i*l;e[0]=1-c-v;e[1]=f+m;e[2]=h-g;e[3]=0;e[4]=f-m;e[5]=1-u-v;e[6]=d+p;e[7]=0;e[8]=h+g;e[9]=d-p;e[10]=1-u-c;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],170:[function(e,t,r){"use strict";t.exports=l;var n=e("gl-buffer");var a=e("gl-shader");var i=e("./shaders");function o(e,t,r){this.plot=e;this.vbo=t;this.shader=r}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind();this.shader.bind();e.attributes.coord.pointer();e.uniforms.screenBox=this.plot.screenBox};s.drawBox=function(){var e=[0,0];var t=[0,0];return function(r,n,a,i,o){var s=this.plot;var l=this.shader;var u=s.gl;e[0]=r;e[1]=n;t[0]=a;t[1]=i;l.uniforms.lo=e;l.uniforms.hi=t;l.uniforms.color=o;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();s.dispose=function(){this.vbo.dispose();this.shader.dispose()};function l(e){var t=e.gl;var r=n(t,[0,0,0,1,1,0,1,1]);var s=a(t,i.boxVert,i.lineFrag);return new o(e,r,s)}},{"./shaders":173,"gl-buffer":158,"gl-shader":182}],171:[function(e,t,r){"use strict";t.exports=f;var n=e("gl-buffer");var a=e("gl-shader");var i=e("binary-search-bounds");var o=e("./shaders");function s(e,t,r,n){this.plot=e;this.vbo=t;this.shader=r;this.tickShader=n;this.ticks=[[],[]]}function l(e,t){return e-t}var u=s.prototype;u.draw=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(){var n=this.plot;var a=this.vbo;var i=this.shader;var o=this.ticks;var s=n.gl;var l=n._tickBounds;var u=n.dataBox;var f=n.viewBox;var c=n.gridLineWidth;var h=n.gridLineColor;var d=n.gridLineEnable;var v=n.pixelRatio;for(var p=0;p<2;++p){var g=l[p];var m=l[p+2];var y=m-g;var b=.5*(u[p+2]+u[p]);var x=u[p+2]-u[p];t[p]=2*y/x;e[p]=2*(g-b)/x}i.bind();a.bind();i.attributes.dataCoord.pointer();i.uniforms.dataShift=e;i.uniforms.dataScale=t;var _=0;for(var p=0;p<2;++p){r[0]=r[1]=0;r[p]=1;i.uniforms.dataAxis=r;i.uniforms.lineWidth=c[p]/(f[p+2]-f[p])*v;i.uniforms.color=h[p];var w=o[p].length*6;if(d[p]&&w){s.drawArrays(s.TRIANGLES,_,w)}_+=w}}}();u.drawTickMarks=function(){var e=[0,0];var t=[0,0];var r=[1,0];var n=[0,1];var a=[0,0];var o=[0,0];return function(){var s=this.plot;var u=this.vbo;var f=this.tickShader;var c=this.ticks;var h=s.gl;var d=s._tickBounds;var v=s.dataBox;var p=s.viewBox;var g=s.pixelRatio;var m=s.screenBox;var y=m[2]-m[0];var b=m[3]-m[1];var x=p[2]-p[0];var _=p[3]-p[1];for(var w=0;w<2;++w){var A=d[w];var k=d[w+2];var T=k-A;var M=.5*(v[w+2]+v[w]);var E=v[w+2]-v[w];t[w]=2*T/E;e[w]=2*(A-M)/E}t[0]*=x/y;e[0]*=x/y;t[1]*=_/b;e[1]*=_/b;f.bind();u.bind();f.attributes.dataCoord.pointer();var C=f.uniforms;C.dataShift=e;C.dataScale=t;var S=s.tickMarkLength;var L=s.tickMarkWidth;var O=s.tickMarkColor;var I=0;var D=c[0].length*6;var R=Math.min(i.ge(c[0],(v[0]-d[0])/(d[2]-d[0]),l),c[0].length);var P=Math.min(i.gt(c[0],(v[2]-d[0])/(d[2]-d[0]),l),c[0].length);var z=I+6*R;var F=6*Math.max(0,P-R);var B=Math.min(i.ge(c[1],(v[1]-d[1])/(d[3]-d[1]),l),c[1].length);var N=Math.min(i.gt(c[1],(v[3]-d[1])/(d[3]-d[1]),l),c[1].length);var j=D+6*B;var U=6*Math.max(0,N-B);a[0]=2*(p[0]-S[1])/y-1;a[1]=(p[3]+p[1])/b-1;o[0]=S[1]*g/y;o[1]=L[1]*g/b;if(U){C.color=O[1];C.tickScale=o;C.dataAxis=n;C.screenOffset=a;h.drawArrays(h.TRIANGLES,j,U)}a[0]=(p[2]+p[0])/y-1;a[1]=2*(p[1]-S[0])/b-1;o[0]=L[0]*g/y;o[1]=S[0]*g/b;if(F){C.color=O[0];C.tickScale=o;C.dataAxis=r;C.screenOffset=a;h.drawArrays(h.TRIANGLES,z,F)}a[0]=2*(p[2]+S[3])/y-1;a[1]=(p[3]+p[1])/b-1;o[0]=S[3]*g/y;o[1]=L[3]*g/b;if(U){C.color=O[3];C.tickScale=o;C.dataAxis=n;C.screenOffset=a;h.drawArrays(h.TRIANGLES,j,U)}a[0]=(p[2]+p[0])/y-1;a[1]=2*(p[3]+S[2])/b-1;o[0]=L[2]*g/y;o[1]=S[2]*g/b;if(F){C.color=O[2];C.tickScale=o;C.dataAxis=r;C.screenOffset=a;h.drawArrays(h.TRIANGLES,z,F)}}}();u.update=function(){var e=[1,1,-1,-1,1,-1];var t=[1,-1,1,1,-1,-1];return function(r){var n=r.ticks;var a=r.bounds;var i=new Float32Array(6*3*(n[0].length+n[1].length));var o=this.plot.zeroLineEnable;var s=0;var l=[[],[]];for(var u=0;u<2;++u){var f=l[u];var c=n[u];var h=a[u];var d=a[u+2];for(var v=0;v<c.length;++v){var p=(c[v].x-h)/(d-h);f.push(p);for(var g=0;g<6;++g){i[s++]=p;i[s++]=e[g];i[s++]=t[g]}}}this.ticks=l;this.vbo.update(i)}}();u.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()};function f(e){var t=e.gl;var r=n(t);var i=a(t,o.gridVert,o.gridFrag);var l=a(t,o.tickVert,o.gridFrag);var u=new s(e,r,i,l);return u}},{"./shaders":173,"binary-search-bounds":175,"gl-buffer":158,"gl-shader":182}],172:[function(e,t,r){"use strict";t.exports=l;var n=e("gl-buffer");var a=e("gl-shader");var i=e("./shaders");function o(e,t,r){this.plot=e;this.vbo=t;this.shader=r}var s=o.prototype;s.bind=function(){var e=this.shader;this.vbo.bind();this.shader.bind();e.attributes.coord.pointer();e.uniforms.screenBox=this.plot.screenBox};s.drawLine=function(){var e=[0,0];var t=[0,0];return function(r,n,a,i,o,s){var l=this.plot;var u=this.shader;var f=l.gl;e[0]=r;e[1]=n;t[0]=a;t[1]=i;u.uniforms.start=e;u.uniforms.end=t;u.uniforms.width=o*l.pixelRatio;u.uniforms.color=s;f.drawArrays(f.TRIANGLE_STRIP,0,4)}}();s.dispose=function(){this.vbo.dispose();this.shader.dispose()};function l(e){var t=e.gl;var r=n(t,[-1,-1,-1,1,1,-1,1,1]);var s=a(t,i.lineVert,i.lineFrag);var l=new o(e,r,s);return l}},{"./shaders":173,"gl-buffer":158,"gl-shader":182}],173:[function(e,t,r){"use strict";var n=e("glslify");var a=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:a,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:a,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:a,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:200}],174:[function(e,t,r){"use strict";t.exports=f;var n=e("gl-buffer");var a=e("gl-shader");var i=e("text-cache");var o=e("binary-search-bounds");var s=e("./shaders");function l(e,t,r){this.plot=e;this.vbo=t;this.shader=r;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=[0,0]}var u=l.prototype;u.drawTicks=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(n){var a=this.plot;var i=this.shader;var s=this.tickX[n];var l=this.tickOffset[n];var u=a.gl;var f=a.viewBox;var c=a.dataBox;var h=a.screenBox;var d=a.pixelRatio;var v=a.tickEnable;var p=a.tickPad;var g=a.tickColor;var m=a.tickAngle;var y=a.labelEnable;var b=a.labelPad;var x=a.labelColor;var _=a.labelAngle;var w=this.labelOffset[n];var A=this.labelCount[n];var k=o.lt(s,c[n]);var T=o.le(s,c[n+2]);e[0]=e[1]=0;e[n]=1;t[n]=(f[2+n]+f[n])/(h[2+n]-h[n])-1;var M=2/h[2+(n^1)]-h[n^1];t[n^1]=M*f[n^1]-1;if(v[n]){t[n^1]-=M*d*p[n];if(k<T&&l[T]>l[k]){i.uniforms.dataAxis=e;i.uniforms.screenOffset=t;i.uniforms.color=g[n];i.uniforms.angle=m[n];u.drawArrays(u.TRIANGLES,l[k],l[T]-l[k])}}if(y[n]&&A){t[n^1]-=M*d*b[n];i.uniforms.dataAxis=r;i.uniforms.screenOffset=t;i.uniforms.color=x[n];i.uniforms.angle=_[n];u.drawArrays(u.TRIANGLES,w,A)}t[n^1]=M*f[2+(n^1)]-1;if(v[n+2]){t[n^1]+=M*d*p[n+2];if(k<T&&l[T]>l[k]){i.uniforms.dataAxis=e;i.uniforms.screenOffset=t;i.uniforms.color=g[n+2];i.uniforms.angle=m[n+2];u.drawArrays(u.TRIANGLES,l[k],l[T]-l[k])}}if(y[n+2]&&A){t[n^1]+=M*d*b[n+2];i.uniforms.dataAxis=r;i.uniforms.screenOffset=t;i.uniforms.color=x[n+2];i.uniforms.angle=_[n+2];u.drawArrays(u.TRIANGLES,w,A)}}}();u.drawTitle=function(){var e=[0,0];var t=[0,0];return function(){var r=this.plot;var n=this.shader;var a=r.gl;var i=r.screenBox;var o=r.titleCenter;var s=r.titleAngle;var l=r.titleColor;var u=r.pixelRatio;if(!this.titleCount){return}for(var f=0;f<2;++f){t[f]=2*(o[f]*u-i[f])/(i[2+f]-i[f])-1}n.bind();n.uniforms.dataAxis=e;n.uniforms.screenOffset=t;n.uniforms.angle=s;n.uniforms.color=l;a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}();u.bind=function(){var e=[0,0];var t=[0,0];var r=[0,0];return function(){var n=this.plot;var a=this.shader;var i=n._tickBounds;var o=n.dataBox;var s=n.screenBox;var l=n.viewBox;a.bind();for(var u=0;u<2;++u){var f=i[u];var c=i[u+2];var h=c-f;var d=.5*(o[u+2]+o[u]);var v=o[u+2]-o[u];var p=l[u];var g=l[u+2];var m=g-p;var y=s[u];var b=s[u+2];var x=b-y;t[u]=2*h/v*m/x;e[u]=2*(f-d)/v*m/x}r[1]=2*n.pixelRatio/(s[3]-s[1]);r[0]=r[1]*(s[3]-s[1])/(s[2]-s[0]);a.uniforms.dataScale=t;a.uniforms.dataShift=e;a.uniforms.textScale=r;this.vbo.bind();a.attributes.textCoordinate.pointer()}}();u.update=function(e){var t=[];var r=e.ticks;var n=e.bounds;var a,o,s,l,u,f;for(f=0;f<2;++f){var c=[Math.floor(t.length/3)],h=[-Infinity];var d=r[f];for(a=0;a<d.length;++a){var v=d[a];var p=v.x;var g=v.text;var m=v.font||"sans-serif";u=v.fontSize||12;var y=1/(n[f+2]-n[f]);var b=n[f];var x=g.split("\n");for(var _=0;_<x.length;_++){l=i(m,x[_]).data;for(o=0;o<l.length;o+=2){t.push(l[o]*u,-l[o+1]*u-_*u*1.2,(p-b)*y)}}c.push(Math.floor(t.length/3));h.push(p)}this.tickOffset[f]=c;this.tickX[f]=h}for(f=0;f<2;++f){this.labelOffset[f]=Math.floor(t.length/3);l=i(e.labelFont[f],e.labels[f],{textAlign:"center"}).data;u=e.labelSize[f];for(a=0;a<l.length;a+=2){t.push(l[a]*u,-l[a+1]*u,0)}this.labelCount[f]=Math.floor(t.length/3)-this.labelOffset[f]}this.titleOffset=Math.floor(t.length/3);l=i(e.titleFont,e.title).data;u=e.titleSize;for(a=0;a<l.length;a+=2){t.push(l[a]*u,-l[a+1]*u,0)}this.titleCount=Math.floor(t.length/3)-this.titleOffset;this.vbo.update(t)};u.dispose=function(){this.vbo.dispose();this.shader.dispose()};function f(e){var t=e.gl;var r=n(t);var i=a(t,s.textVert,s.textFrag);var o=new l(e,r,i);return o}},{"./shaders":173,"binary-search-bounds":175,"gl-buffer":158,"gl-shader":182,"text-cache":284}],175:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{dup:58}],176:[function(e,t,r){"use strict";t.exports=d;var n=e("gl-select-static");var a=e("./lib/grid");var i=e("./lib/text");var o=e("./lib/line");var s=e("./lib/box");function l(e,t){this.gl=e;this.pickBuffer=t;this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[true,true];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[true,true,true,true];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[true,true,true,true];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=true;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[true,true];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[true,true,true,true];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.grid=null;this.text=null;this.line=null;this.box=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.static=false;this.dirty=false;this.pickDirty=false;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}var u=l.prototype;u.setDirty=function(){this.dirty=this.pickDirty=true};u.setOverlayDirty=function(){this.dirty=true};u.nextDepthValue=function(){return this._depthCounter++/65536};function f(e,t,r){var n=.5*(r+1);return Math.floor((1-n)*e+n*t)|0}u.draw=function(){var e=[0,0,0,0];return function(){var e=this.gl;var t=this.screenBox;var r=this.viewBox;var n=this.dataBox;var a=this.pixelRatio;var i=this.grid;var o=this.line;var s=this.text;var l=this.objects;this._depthCounter=0;if(this.pickDirty){if(this._pickTimeout){clearTimeout(this._pickTimeout)}this.pickDirty=false;this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)}if(!this.dirty){return}this.dirty=false;e.bindFramebuffer(e.FRAMEBUFFER,null);e.enable(e.SCISSOR_TEST);e.disable(e.DEPTH_TEST);e.depthFunc(e.LESS);e.depthMask(false);e.enable(e.BLEND);e.blendEquation(e.FUNC_ADD,e.FUNC_ADD);e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);if(this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var u=this.borderColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]);e.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var f=this.backgroundColor;e.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]);e.clear(e.COLOR_BUFFER_BIT);i.draw();var c=this.zeroLineEnable;var h=this.zeroLineColor;var d=this.zeroLineWidth;if(c[0]||c[1]){o.bind();for(var v=0;v<2;++v){if(!c[v]||!(n[v]<=0&&n[v+2]>=0)){continue}var p=t[v]-n[v]*(t[v+2]-t[v])/(n[v+2]-n[v]);if(v===0){o.drawLine(p,t[1],p,t[3],d[v],h[v])}else{o.drawLine(t[0],p,t[2],p,d[v],h[v])}}}for(var v=0;v<l.length;++v){l[v].draw()}e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]);e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);this.grid.drawTickMarks();o.bind();var g=this.borderLineEnable;var m=this.borderLineWidth;var y=this.borderLineColor;if(g[1]){o.drawLine(r[0],r[1]-.5*m[1]*a,r[0],r[3]+.5*m[3]*a,m[1],y[1])}if(g[0]){o.drawLine(r[0]-.5*m[0]*a,r[1],r[2]+.5*m[2]*a,r[1],m[0],y[0])}if(g[3]){o.drawLine(r[2],r[1]-.5*m[1]*a,r[2],r[3]+.5*m[3]*a,m[3],y[3])}if(g[2]){o.drawLine(r[0]-.5*m[0]*a,r[3],r[2]+.5*m[2]*a,r[3],m[2],y[2])}s.bind();for(var v=0;v<2;++v){s.drawTicks(v)}if(this.titleEnable){s.drawTitle()}var b=this.overlays;for(var v=0;v<b.length;++v){b[v].draw()}e.disable(e.SCISSOR_TEST);e.disable(e.BLEND);e.depthMask(true)}}();u.drawPick=function(){return function(){if(this.static)return;var e=this.pickBuffer;var t=this.gl;this._pickTimeout=null;e.begin();var r=1;var n=this.objects;for(var a=0;a<n.length;++a){r=n[a].drawPick(r)}e.end()}}();u.pick=function(){return function(e,t){if(this.static)return;var r=this.pixelRatio;var n=this.pickPixelRatio;var a=this.viewBox;var i=Math.round((e-a[0]/r)*n)|0;var o=Math.round((t-a[1]/r)*n)|0;var s=this.pickBuffer.query(i,o,this.pickRadius);if(!s){return null}var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24);var u=this.objects;for(var f=0;f<u.length;++f){var c=u[f].pick(i,o,l);if(c){return c}}return null}}();function c(e){var t=e.slice();for(var r=0;r<t.length;++r){t[r]=t[r].slice()}return t}function h(e,t){return e.x-t.x}u.setScreenBox=function(e){var t=this.screenBox;var r=this.pixelRatio;t[0]=Math.round(e[0]*r)|0;t[1]=Math.round(e[1]*r)|0;t[2]=Math.round(e[2]*r)|0;t[3]=Math.round(e[3]*r)|0;this.setDirty()};u.setDataBox=function(e){var t=this.dataBox;var r=t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3];if(r){t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];this.setDirty()}};u.setViewBox=function(e){var t=this.pixelRatio;var r=this.viewBox;r[0]=Math.round(e[0]*t)|0;r[1]=Math.round(e[1]*t)|0;r[2]=Math.round(e[2]*t)|0;r[3]=Math.round(e[3]*t)|0;var n=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((e[2]-e[0])*n)|0,Math.round((e[3]-e[1])*n)|0];this.setDirty()};u.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1);this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/r,t.drawingBufferHeight/r]);var n=this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var a=this.viewBox;var i=(a[2]-a[0])/(a[3]-a[1]);this.setDataBox(e.dataBox||[-10,-10/i,10,10/i]);this.borderColor=e.borderColor!==false?(e.borderColor||[0,0,0,0]).slice():false;this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(e.gridLineEnable||[true,true]).slice();this.gridLineWidth=(e.gridLineWidth||[1,1]).slice();this.gridLineColor=c(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(e.zeroLineEnable||[true,true]).slice();this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice();this.zeroLineColor=c(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=c(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(e.titleCenter||[.5*(a[0]+a[2])/r,(a[3]+120)/r]).slice();this.titleEnable=!("titleEnable"in e)||!!e.titleEnable;this.titleAngle=e.titleAngle||0;this.titleColor=(e.titleColor||[0,0,0,1]).slice();this.labelPad=(e.labelPad||[15,15,15,15]).slice();this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(e.labelEnable||[true,true,true,true]).slice();this.labelColor=c(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(e.tickPad||[15,15,15,15]).slice();this.tickAngle=(e.tickAngle||[0,0,0,0]).slice();this.tickEnable=(e.tickEnable||[true,true,true,true]).slice();this.tickColor=c(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(e.borderLineEnable||[true,true,true,true]).slice();this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=c(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=e.ticks||[[],[]];var s=this._tickBounds;s[0]=s[1]=Infinity;s[2]=s[3]=-Infinity;for(var l=0;l<2;++l){var u=o[l].slice(0);if(u.length===0){continue}u.sort(h);s[l]=Math.min(s[l],u[0].x);s[l+2]=Math.max(s[l+2],u[u.length-1].x)}this.grid.update({bounds:s,ticks:o});this.text.update({bounds:s,ticks:o,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"});this.static=!!e.static;this.setDirty()};u.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var e=this.objects.length-1;e>=0;--e){this.objects[e].dispose()}this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e){this.overlays[e].dispose()}this.overlays.length=0;this.gl=null};u.addObject=function(e){if(this.objects.indexOf(e)<0){this.objects.push(e);this.setDirty()}};u.removeObject=function(e){var t=this.objects;for(var r=0;r<t.length;++r){if(t[r]===e){t.splice(r,1);this.setDirty();break}}};u.addOverlay=function(e){if(this.overlays.indexOf(e)<0){this.overlays.push(e);this.setOverlayDirty()}};u.removeOverlay=function(e){var t=this.overlays;for(var r=0;r<t.length;++r){if(t[r]===e){t.splice(r,1);this.setOverlayDirty();break}}};function d(e){var t=e.gl;var r=n(t,[t.drawingBufferWidth,t.drawingBufferHeight]);var u=new l(t,r);u.grid=a(u);u.text=i(u);u.line=o(u);u.box=s(u);u.update(e);return u}},{"./lib/box":170,"./lib/grid":171,"./lib/line":172,"./lib/text":174,"gl-select-static":181}],177:[function(e,t,r){var n=e("glslify");r.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]);r.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);r.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]);r.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:200}],178:[function(e,t,r){"use strict";var n=e("gl-shader");var a=e("gl-buffer");var i=e("typedarray-pool");var o=e("./lib/shader");t.exports=f;function s(e,t,r,n,a){this.plot=e;this.offsetBuffer=t;this.pickBuffer=r;this.shader=n;this.pickShader=a;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=[0,0,0,1];this.blend=false;this.pickOffset=0;this.points=null}var l=s.prototype;l.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};l.update=function(e){var t;e=e||{};function r(t,r){if(t in e){return e[t]}return r}this.sizeMin=r("sizeMin",.5);this.sizeMax=r("sizeMax",20);this.color=r("color",[1,0,0,1]).slice();this.areaRatio=r("areaRatio",1);this.borderColor=r("borderColor",[0,0,0,1]).slice();this.blend=r("blend",false);var n=e.positions.length>>>1;var a=e.positions instanceof Float32Array;var o=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=n;var s=e.positions;var l=a?s:i.mallocFloat32(s.length);var u=o?e.idToIndex:i.mallocInt32(n);if(!a){l.set(s)}if(!o){l.set(s);for(t=0;t<n;t++){u[t]=t}}this.points=s;this.offsetBuffer.update(l);this.pickBuffer.update(u);if(!a){i.free(l)}if(!o){i.free(u)}this.pointCount=n;this.pickOffset=0};function u(e,t){var r=0;var n=e.length>>>1;var a;for(a=0;a<n;a++){var i=e[a*2];var o=e[a*2+1];if(i>=t[0]&&i<=t[2]&&o>=t[1]&&o<=t[3])r++}return r}l.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1];var t=[0,0,0,0];return function(r){var n=r!==void 0;var a=n?this.pickShader:this.shader;var i=this.plot.gl;var o=this.plot.dataBox;if(this.pointCount===0){return r}var s=o[2]-o[0];var l=o[3]-o[1];var f=u(this.points,o);var c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(f,.33333)));e[0]=2/s;e[4]=2/l;e[6]=-2*o[0]/s-1;e[7]=-2*o[1]/l-1;this.offsetBuffer.bind();a.bind();a.attributes.position.pointer();a.uniforms.matrix=e;a.uniforms.color=this.color;a.uniforms.borderColor=this.borderColor;a.uniforms.pointCloud=c<5;a.uniforms.pointSize=c;a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));if(n){t[0]=r&255;t[1]=r>>8&255;t[2]=r>>16&255;t[3]=r>>24&255;this.pickBuffer.bind();a.attributes.pickId.pointer(i.UNSIGNED_BYTE);a.uniforms.pickOffset=t;this.pickOffset=r}var h=i.getParameter(i.BLEND);var d=i.getParameter(i.DITHER);if(h&&!this.blend)i.disable(i.BLEND);if(d)i.disable(i.DITHER);i.drawArrays(i.POINTS,0,this.pointCount);if(h&&!this.blend)i.enable(i.BLEND);if(d)i.enable(i.DITHER);return r+this.pointCount}}();l.draw=l.unifiedDraw;l.drawPick=l.unifiedDraw;l.pick=function(e,t,r){var n=this.pickOffset;var a=this.pointCount;if(r<n||r>=n+a){return null}var i=r-n;var o=this.points;return{object:this,pointId:i,dataCoord:[o[2*i],o[2*i+1]]}};function f(e,t){var r=e.gl;var i=a(r);var l=a(r);var u=n(r,o.pointVertex,o.pointFragment);var f=n(r,o.pickVertex,o.pickFragment);var c=new s(e,i,l,u,f);c.update(t);e.addObject(c);return c}},{"./lib/shader":177,"gl-buffer":158,"gl-shader":182,"typedarray-pool":291}],179:[function(e,t,r){"use strict";var n=e("glslify");r.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);r.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:200}],180:[function(e,t,r){"use strict";var n=e("gl-shader");var a=e("gl-buffer");var i=e("./lib/shaders");t.exports=l;function o(e,t,r){this.plot=e;this.boxBuffer=t;this.boxShader=r;this.enabled=true;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=false;this.innerColor=[0,0,0,.25];this.outerFill=true;this.outerColor=[0,0,0,.5];this.borderWidth=10}var s=o.prototype;s.draw=function(){if(!this.enabled){return}var e=this.plot;var t=this.selectBox;var r=this.borderWidth;var n=this.innerFill;var a=this.innerColor;var i=this.outerFill;var o=this.outerColor;var s=this.borderColor;var l=e.box;var u=e.screenBox;var f=e.dataBox;var c=e.viewBox;var h=e.pixelRatio;var d=(t[0]-f[0])*(c[2]-c[0])/(f[2]-f[0])+c[0];var v=(t[1]-f[1])*(c[3]-c[1])/(f[3]-f[1])+c[1];var p=(t[2]-f[0])*(c[2]-c[0])/(f[2]-f[0])+c[0];var g=(t[3]-f[1])*(c[3]-c[1])/(f[3]-f[1])+c[1];d=Math.max(d,c[0]);v=Math.max(v,c[1]);p=Math.min(p,c[2]);g=Math.min(g,c[3]);if(p<d||g<v){return}l.bind();var m=u[2]-u[0];var y=u[3]-u[1];if(this.outerFill){l.drawBox(0,0,m,v,o);l.drawBox(0,v,d,g,o);l.drawBox(0,g,m,y,o);l.drawBox(p,v,m,g,o)}if(this.innerFill){l.drawBox(d,v,p,g,a)}if(r>0){var b=r*h;l.drawBox(d-b,v-b,p+b,v+b,s);l.drawBox(d-b,g-b,p+b,g+b,s);l.drawBox(d-b,v-b,d+b,g+b,s);l.drawBox(p-b,v-b,p+b,g+b,s)}};s.update=function(e){e=e||{};this.innerFill=!!e.innerFill;this.outerFill=!!e.outerFill;this.innerColor=(e.innerColor||[0,0,0,.5]).slice();this.outerColor=(e.outerColor||[0,0,0,.5]).slice();this.borderColor=(e.borderColor||[0,0,0,1]).slice();this.borderWidth=e.borderWidth||0;this.selectBox=(e.selectBox||this.selectBox).slice()};s.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)};function l(e,t){var r=e.gl;var s=a(r,[0,0,0,1,1,0,1,1]);var l=n(r,i.boxVertex,i.boxFragment);var u=new o(e,s,l);u.update(t);e.addOverlay(u);return u}},{"./lib/shaders":179,"gl-buffer":158,"gl-shader":182}],181:[function(e,t,r){"use strict";t.exports=c;var n=e("gl-fbo");var a=e("typedarray-pool");var i=e("ndarray");var o=e("bit-twiddle").nextPow2;var s=e("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_55_arg0_<255||_inline_55_arg1_<255||_inline_55_arg2_<255||_inline_55_arg3_<255){var _inline_55_l=_inline_55_arg4_-_inline_55_arg6_[0],_inline_55_a=_inline_55_arg5_-_inline_55_arg6_[1],_inline_55_f=_inline_55_l*_inline_55_l+_inline_55_a*_inline_55_a;_inline_55_f<this_closestD2&&(this_closestD2=_inline_55_f,this_closestX=_inline_55_arg6_[0],this_closestY=_inline_55_arg6_[1])}}",args:[{name:"_inline_55_arg0_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg1_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg3_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg4_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg5_",lvalue:false,rvalue:true,count:1},{name:"_inline_55_arg6_",lvalue:false,rvalue:true,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_55_a","_inline_55_f","_inline_55_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:false,funcName:"cwise",blockSize:64});function l(e,t,r,n,a){this.coord=[e,t];this.id=r;this.value=n;this.distance=a}function u(e,t,r){this.gl=e;this.fbo=t;this.buffer=r;this._readTimeout=null;var n=this;this._readCallback=function(){if(!n.gl){return}t.bind();e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,n.buffer);n._readTimeout=null}}var f=u.prototype;Object.defineProperty(f,"shape",{get:function(){if(!this.gl){return[0,0]}return this.fbo.shape.slice()},set:function(e){if(!this.gl){return}this.fbo.shape=e;var t=this.fbo.shape[0];var r=this.fbo.shape[1];if(r*t*4>this.buffer.length){a.free(this.buffer);var n=this.buffer=a.mallocUint8(o(r*t*4));for(var i=0;i<r*t*4;++i){n[i]=255}}return e}});f.begin=function(){var e=this.gl;var t=this.shape;if(!e){return}this.fbo.bind();e.clearColor(1,1,1,1);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)};f.end=function(){var e=this.gl;if(!e){return}e.bindFramebuffer(e.FRAMEBUFFER,null);if(!this._readTimeout){clearTimeout(this._readTimeout)}this._readTimeout=setTimeout(this._readCallback,1)};f.query=function(e,t,r){if(!this.gl){return null}var n=this.fbo.shape.slice();e=e|0;t=t|0;if(typeof r!=="number"){r=1}var a=Math.min(Math.max(e-r,0),n[0])|0;var o=Math.min(Math.max(e+r,0),n[0])|0;var u=Math.min(Math.max(t-r,0),n[1])|0;var f=Math.min(Math.max(t+r,0),n[1])|0;if(o<=a||f<=u){return null}var c=[o-a,f-u];var h=i(this.buffer,[c[0],c[1],4],[4,n[0]*4,1],4*(a+n[0]*u));var d=s(h.hi(c[0],c[1],1),r,r);var v=d[0];var p=d[1];if(v<0||Math.pow(this.radius,2)<d[2]){return null}var g=h.get(v,p,0);var m=h.get(v,p,1);var y=h.get(v,p,2);var b=h.get(v,p,3);return new l(v+a|0,p+u|0,g,[m,y,b],Math.sqrt(d[2]))};f.dispose=function(){if(!this.gl){return}this.fbo.dispose();a.free(this.buffer);this.gl=null;if(this._readTimeout){clearTimeout(this._readTimeout)}};function c(e,t){var r=n(e,t);var i=a.mallocUint8(t[0]*t[1]*4);return new u(e,r,i)}},{"bit-twiddle":41,"cwise/lib/wrapper":83,"gl-fbo":164,ndarray:220,"typedarray-pool":291}],182:[function(e,t,r){"use strict";var n=e("./lib/create-uniforms");var a=e("./lib/create-attributes");var i=e("./lib/reflect");var o=e("./lib/shader-cache");var s=e("./lib/runtime-reflect");var l=e("./lib/GLError");function u(e){this.gl=e;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=u.prototype;f.bind=function(){if(!this.program){this._relink()}var e;var t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);var r=this.gl.lastAttribCount;if(t>r){for(e=r;e<t;e++){this.gl.enableVertexAttribArray(e)}}else if(r>t){for(e=t;e<r;e++){this.gl.disableVertexAttribArray(e)}}this.gl.lastAttribCount=t;this.gl.useProgram(this.program)};f.dispose=function(){var e=this.gl.lastAttribCount;for(var t=0;t<e;t++){this.gl.disableVertexAttribArray(t)}this.gl.lastAttribCount=0;if(this._fref){this._fref.dispose()}if(this._vref){this._vref.dispose()}this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function c(e,t){if(e.name<t.name){return-1}return 1}f.update=function(e,t,r,u){if(!t||arguments.length===1){var f=e;e=f.vertex;t=f.fragment;r=f.uniforms;u=f.attributes}var h=this;var d=h.gl;var v=h._vref;h._vref=o.shader(d,d.VERTEX_SHADER,e);if(v){v.dispose()}h.vertShader=h._vref.shader;var p=this._fref;h._fref=o.shader(d,d.FRAGMENT_SHADER,t);if(p){p.dispose()}h.fragShader=h._fref.shader;if(!r||!u){var g=d.createProgram();d.attachShader(g,h.fragShader);d.attachShader(g,h.vertShader);d.linkProgram(g);if(!d.getProgramParameter(g,d.LINK_STATUS)){var m=d.getProgramInfoLog(g);throw new l(m,"Error linking program:"+m)}r=r||s.uniforms(d,g);u=u||s.attributes(d,g);d.deleteProgram(g)}u=u.slice();u.sort(c);var y=[];var b=[];var x=[];var _;for(_=0;_<u.length;++_){var w=u[_];if(w.type.indexOf("mat")>=0){var A=w.type.charAt(w.type.length-1)|0;var k=new Array(A);for(var T=0;T<A;++T){k[T]=x.length;b.push(w.name+"["+T+"]");if(typeof w.location==="number"){x.push(w.location+T)}else if(Array.isArray(w.location)&&w.location.length===A&&typeof w.location[T]==="number"){x.push(w.location[T]|0)}else{x.push(-1)}}y.push({name:w.name,type:w.type,locations:k})}else{y.push({name:w.name,type:w.type,locations:[x.length]});b.push(w.name);if(typeof w.location==="number"){x.push(w.location|0)}else{x.push(-1)}}}var M=0;for(_=0;_<x.length;++_){if(x[_]<0){while(x.indexOf(M)>=0){M+=1}x[_]=M}}var E=new Array(r.length);function C(){h.program=o.program(d,h._vref,h._fref,b,x);for(var e=0;e<r.length;++e){E[e]=d.getUniformLocation(h.program,r[e].name)}}C();h._relink=C;h.types={uniforms:i(r),attributes:i(u)};h.attributes=a(d,h,y,x);Object.defineProperty(h,"uniforms",n(d,h,r,E))};function h(e,t,r,n,a){var i=new u(e);i.update(t,r,n,a);return i}t.exports=h},{"./lib/GLError":183,"./lib/create-attributes":184,"./lib/create-uniforms":185,"./lib/reflect":186,"./lib/runtime-reflect":187,"./lib/shader-cache":188}],183:[function(e,t,r){function n(e,t,r){this.shortMessage=t||"";this.longMessage=r||"";this.rawError=e||"";this.message="gl-shader: "+(t||e||"")+(r?"\n"+r:"");this.stack=(new Error).stack}n.prototype=new Error;n.prototype.name="GLError";n.prototype.constructor=n;t.exports=n},{}],184:[function(e,t,r){"use strict";t.exports=l;var n=e("./GLError");function a(e,t,r,n,a,i){this._gl=e;this._wrapper=t;this._index=r;this._locations=n;this._dimension=a;this._constFunc=i}var i=a.prototype;i.pointer=function e(t,r,n,a){var i=this;var o=i._gl;var s=i._locations[i._index];o.vertexAttribPointer(s,i._dimension,t||o.FLOAT,!!r,n||0,a||0);o.enableVertexAttribArray(s)};i.set=function(e,t,r,n){return this._constFunc(this._locations[this._index],e,t,r,n)};Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(e){if(e!==this._locations[this._index]){this._locations[this._index]=e|0;this._wrapper.program=null}return e|0}});function o(e,t,r,n,i,o,s){var l=["gl","v"];var u=[];for(var f=0;f<i;++f){l.push("x"+f);u.push("x"+f)}l.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+u.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var c=Function.apply(null,l);var h=new a(e,t,r,n,i,c);Object.defineProperty(o,s,{set:function(t){e.disableVertexAttribArray(n[r]);c(e,n[r],t);return t},get:function(){return h},enumerable:true})}function s(e,t,r,n,a,i,s){var l=new Array(a);var u=new Array(a);for(var f=0;f<a;++f){o(e,t,r[f],n,a,l,f);u[f]=l[f]}Object.defineProperty(l,"location",{set:function(e){if(Array.isArray(e)){for(var t=0;t<a;++t){u[t].location=e[t]}}else{for(var t=0;t<a;++t){u[t].location=e+t}}return e},get:function(){var e=new Array(a);for(var t=0;t<a;++t){e[t]=n[r[t]]}return e},enumerable:true});l.pointer=function(t,i,o,s){t=t||e.FLOAT;i=!!i;o=o||a*a;s=s||0;for(var l=0;l<a;++l){var u=n[r[l]];e.vertexAttribPointer(u,a,t,i,o,s+l*a);e.enableVertexAttribArray(u)}};var c=new Array(a);var h=e["vertexAttrib"+a+"fv"];Object.defineProperty(i,s,{set:function(t){for(var i=0;i<a;++i){var o=n[r[i]];e.disableVertexAttribArray(o);if(Array.isArray(t[0])){h.call(e,o,t[i])}else{for(var s=0;s<a;++s){c[s]=t[a*i+s]}h.call(e,o,c)}}return t},get:function(){return l},enumerable:true})}function l(e,t,r,a){var i={};for(var l=0,u=r.length;l<u;++l){var f=r[l];var c=f.name;var h=f.type;var d=f.locations;switch(h){case"bool":case"int":case"float":o(e,t,d[0],a,1,i,c);break;default:if(h.indexOf("vec")>=0){var v=h.charCodeAt(h.length-1)-48;if(v<2||v>4){throw new n("","Invalid data type for attribute "+c+": "+h)}o(e,t,d[0],a,v,i,c)}else if(h.indexOf("mat")>=0){var v=h.charCodeAt(h.length-1)-48;if(v<2||v>4){throw new n("","Invalid data type for attribute "+c+": "+h)}s(e,t,d,a,v,i,c)}else{throw new n("","Unknown data type for attribute "+c+": "+h)}break}}return i}},{"./GLError":183}],185:[function(e,t,r){"use strict";var n=e("./reflect");var a=e("./GLError");t.exports=s;function i(e){var t=new Function("y","return function(){return y}");return t(e)}function o(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function s(e,t,r,s){function l(r){var n=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+r+"])}");return n(e,t,s)}function u(e,t,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var n=r.indexOf("vec");if(0<=n&&n<=1&&r.length===4+n){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new a("","Invalid data type")}switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new a("","Unrecognized data type for vector "+name+": "+r)}}else if(r.indexOf("mat")===0&&r.length===4){var i=r.charCodeAt(r.length-1)-48;if(i<2||i>4){throw new a("","Invalid uniform dimension type for matrix "+name+": "+r)}return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}else{throw new a("","Unknown uniform data type for "+name+": "+r)}break}}function f(e,t){if(typeof t!=="object"){return[[e,t]]}var r=[];for(var n in t){var a=t[n];var i=e;if(parseInt(n)+""===n){i+="["+n+"]"}else{i+="."+n}if(typeof a==="object"){r.push.apply(r,f(i,a))}else{r.push([i,a])}}return r}function c(t){var n=["return function updateProperty(obj){"];var a=f("",t);for(var i=0;i<a.length;++i){var o=a[i];var l=o[0];var c=o[1];if(s[c]){n.push(u(l,c,r[c].type))}}n.push("return obj}");var h=new Function("gl","locations",n.join("\n"));return h(e,s)}function h(e){switch(e){case"bool":return false;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new a("","Invalid data type")}if(e.charAt(0)==="b"){return o(r,false)}return o(r,0)}else if(e.indexOf("mat")===0&&e.length===4){var r=e.charCodeAt(e.length-1)-48;if(r<2||r>4){throw new a("","Invalid uniform dimension type for matrix "+name+": "+e)}return o(r*r,0)}else{throw new a("","Unknown uniform data type for "+name+": "+e)}break}}function d(e,t,n){if(typeof n==="object"){var a=v(n);Object.defineProperty(e,t,{get:i(a),set:c(n),enumerable:true,configurable:false})}else{if(s[n]){Object.defineProperty(e,t,{get:l(n),set:c(n),enumerable:true,configurable:false})}else{e[t]=h(r[n].type)}}}function v(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var r=0;r<e.length;++r){d(t,r,e[r])}}else{t={};for(var n in e){d(t,n,e[n])}}return t}var p=n(r,true);return{get:i(v(p)),set:c(p),enumerable:true,configurable:true}}},{"./GLError":183,"./reflect":186}],186:[function(e,t,r){"use strict";t.exports=n;function n(e,t){var r={};for(var n=0;n<e.length;++n){var a=e[n].name;var i=a.split(".");var o=r;for(var s=0;s<i.length;++s){var l=i[s].split("[");if(l.length>1){if(!(l[0]in o)){o[l[0]]=[]}o=o[l[0]];for(var u=1;u<l.length;++u){var f=parseInt(l[u]);if(u<l.length-1||s<i.length-1){if(!(f in o)){if(u<l.length-1){o[f]=[]}else{o[f]={}}}o=o[f]}else{if(t){o[f]=n}else{o[f]=e[n].type}}}}else if(s<i.length-1){if(!(l[0]in o)){o[l[0]]={}}o=o[l[0]]}else{if(t){o[l[0]]=n}else{o[l[0]]=e[n].type}}}}return r}},{}],187:[function(e,t,r){"use strict";r.uniforms=o;r.attributes=s;var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"};var a=null;function i(e,t){if(!a){var r=Object.keys(n);a={};for(var i=0;i<r.length;++i){var o=r[i];a[e[o]]=n[o]}}return a[t]}function o(e,t){var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);var n=[];for(var a=0;a<r;++a){var o=e.getActiveUniform(t,a);if(o){var s=i(e,o.type);if(o.size>1){for(var l=0;l<o.size;++l){n.push({name:o.name.replace("[0]","["+l+"]"),type:s})}}else{n.push({name:o.name,type:s})}}}return n}function s(e,t){var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);var n=[];for(var a=0;a<r;++a){var o=e.getActiveAttrib(t,a);if(o){n.push({name:o.name,type:i(e,o.type)})}}return n}},{}],188:[function(e,t,r){"use strict";r.shader=v;r.program=p;var n=e("./GLError");var a=e("gl-format-compiler-error");var i=typeof WeakMap==="undefined"?e("weakmap-shim"):WeakMap;var o=new i;var s=0;function l(e,t,r,n,a,i,o){this.id=e;this.src=t;this.type=r;this.shader=n;this.count=i;this.programs=[];this.cache=o}l.prototype.dispose=function(){if(--this.count===0){var e=this.cache;var t=e.gl;var r=this.programs;for(var n=0,a=r.length;n<a;++n){var i=e.programs[r[n]];if(i){delete e.programs[n];t.deleteProgram(i)}}t.deleteShader(this.shader);delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};function u(e){this.gl=e;this.shaders=[{},{}];this.programs={}}var f=u.prototype;function c(e,t,r){var i=e.createShader(t);e.shaderSource(i,r);e.compileShader(i);if(!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);try{var s=a(o,r,t)}catch(e){console.warn("Failed to format compiler error: "+e);throw new n(o,"Error compiling shader:\n"+o)}throw new n(o,s.short,s.long)}return i}f.getShaderReference=function(e,t){var r=this.gl;var n=this.shaders[e===r.FRAGMENT_SHADER|0];var a=n[t];if(!a||!r.isShader(a.shader)){var i=c(r,e,t);a=n[t]=new l(s++,t,e,i,[],1,this)}else{a.count+=1}return a};function h(e,t,r,a,i){var o=e.createProgram();e.attachShader(o,t);e.attachShader(o,r);for(var s=0;s<a.length;++s){e.bindAttribLocation(o,i[s],a[s])}e.linkProgram(o);if(!e.getProgramParameter(o,e.LINK_STATUS)){var l=e.getProgramInfoLog(o);throw new n(l,"Error linking program: "+l)}return o}f.getProgram=function(e,t,r,n){var a=[e.id,t.id,r.join(":"),n.join(":")].join("@");var i=this.programs[a];if(!i||!this.gl.isProgram(i)){this.programs[a]=i=h(this.gl,e.shader,t.shader,r,n);e.programs.push(a);t.programs.push(a)}return i};function d(e){var t=o.get(e);if(!t){t=new u(e);o.set(e,t)}return t}function v(e,t,r){return d(e).getShaderReference(t,r)}function p(e,t,r,n,a){return d(e).getProgram(t,r,n,a)}},{"./GLError":183,"gl-format-compiler-error":165,"weakmap-shim":303}],189:[function(e,t,r){"use strict";t.exports=i;function n(e){this.plot=e;this.enable=[true,true,false,false];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}var a=n.prototype;a.update=function(e){e=e||{};this.enable=(e.enable||[true,true,false,false]).slice();this.width=(e.width||[1,1,1,1]).slice();this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()});this.center=(e.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};a.draw=function(){var e=this.enable;var t=this.width;var r=this.color;var n=this.center;var a=this.plot;var i=a.line;var o=a.dataBox;var s=a.viewBox;i.bind();if(o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var l=s[0]+(n[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]);var u=s[1]+(n[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);if(e[0]){i.drawLine(l,u,s[0],u,t[0],r[0])}if(e[1]){i.drawLine(l,u,l,s[1],t[1],r[1])}if(e[2]){i.drawLine(l,u,s[2],u,t[2],r[2])}if(e[3]){i.drawLine(l,u,l,s[3],t[3],r[3])}}};a.dispose=function(){this.plot.removeOverlay(this)};function i(e,t){var r=new n(e);r.update(t);e.addOverlay(r);return r}},{}],190:[function(e,t,r){"use strict";var n=e("ndarray");var a=e("ndarray-ops");var i=e("typedarray-pool");t.exports=_;var o=null;var s=null;var l=null;function u(e){o=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST];s=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR];l=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function f(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}var c=function(e,t){a.muls(e,t,255)};function h(e,t,r){var n=e.gl;var a=n.getParameter(n.MAX_TEXTURE_SIZE);if(t<0||t>a||r<0||r>a){throw new Error("gl-texture2d: Invalid texture size")}e._shape=[t,r];e.bind();n.texImage2D(n.TEXTURE_2D,0,e.format,t,r,0,e.format,e.type,null);e._mipLevels=[0];return e}function d(e,t,r,n,a,i){this.gl=e;this.handle=t;this.format=a;this.type=i;this._shape=[r,n];this._mipLevels=[0];this._magFilter=e.NEAREST;this._minFilter=e.NEAREST;this._wrapS=e.CLAMP_TO_EDGE;this._wrapT=e.CLAMP_TO_EDGE;this._anisoSamples=1;var o=this;var s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]);this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]);this._shapeVector=l}var v=d.prototype;Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e);return this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&o.indexOf(e)>=0){if(!t.getExtension("OES_texture_float_linear")){e=t.NEAREST}}if(s.indexOf(e)<0){throw new Error("gl-texture2d: Unknown filter mode "+e)}t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e);return this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;this._anisoSamples=Math.max(e,1)|0;if(t!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");if(r){this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){this.bind();if(l.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e);return this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){this.bind();if(l.indexOf(e)<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e);return this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(!Array.isArray(e)){e=[e,e]}if(e.length!==2){throw new Error("gl-texture2d: Must specify wrap mode for rows and columns")}for(var t=0;t<2;++t){if(l.indexOf(e[t])<0){throw new Error("gl-texture2d: Unknown wrap mode "+e)}}this._wrapS=e[0];this._wrapT=e[1];var r=this.gl;this.bind();r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT);return e}},shape:{get:function(){return this._shapeVector},set:function(e){if(!Array.isArray(e)){e=[e|0,e|0]}else{if(e.length!==2){throw new Error("gl-texture2d: Invalid texture shape")}}h(this,e[0]|0,e[1]|0);return[e[0]|0,e[1]|0]}},width:{get:function(){return this._shape[0]},set:function(e){e=e|0;h(this,e,this._shape[1]);return e}},height:{get:function(){return this._shape[1]},set:function(e){e=e|0;h(this,this._shape[0],e);return e}}});v.bind=function(e){var t=this.gl;if(e!==undefined){t.activeTexture(t.TEXTURE0+(e|0))}t.bindTexture(t.TEXTURE_2D,this.handle);if(e!==undefined){return e|0}return t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};v.dispose=function(){this.gl.deleteTexture(this.handle)};v.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);var e=Math.min(this._shape[0],this._shape[1]);for(var t=0;e>0;++t,e>>>=1){if(this._mipLevels.indexOf(t)<0){this._mipLevels.push(t)}}};v.setPixels=function(e,t,r,n){var a=this.gl;this.bind();if(Array.isArray(t)){n=r;r=t[1]|0;t=t[0]|0}else{t=t||0;r=r||0}n=n||0;var i=f(e)?e:e.raw;if(i){var o=this._mipLevels.indexOf(n)<0;if(o){a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,i);this._mipLevels.push(n)}else{a.texSubImage2D(a.TEXTURE_2D,n,t,r,this.format,this.type,i)}}else if(e.shape&&e.stride&&e.data){if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>n||r+e.shape[0]>this._shape[0]>>>n||t<0||r<0){throw new Error("gl-texture2d: Texture dimensions are out of bounds")}g(a,t,r,n,this.format,this.type,this._mipLevels,e)}else{throw new Error("gl-texture2d: Unsupported data type")}};function p(e,t){if(e.length===3){return t[2]===1&&t[1]===e[0]*e[2]&&t[0]===e[2]}return t[0]===1&&t[1]===e[0]}function g(e,t,r,o,s,l,u,f){var h=f.dtype;var d=f.shape.slice();if(d.length<2||d.length>3){throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d")}var v=0,g=0;var m=p(d,f.stride.slice());if(h==="float32"){v=e.FLOAT}else if(h==="float64"){v=e.FLOAT;m=false;h="float32"}else if(h==="uint8"){v=e.UNSIGNED_BYTE}else{v=e.UNSIGNED_BYTE;m=false;h="uint8"}var y=1;if(d.length===2){g=e.LUMINANCE;d=[d[0],d[1],1];f=n(f.data,d,[f.stride[0],f.stride[1],1],f.offset)}else if(d.length===3){if(d[2]===1){g=e.ALPHA}else if(d[2]===2){g=e.LUMINANCE_ALPHA}else if(d[2]===3){g=e.RGB}else if(d[2]===4){g=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}y=d[2]}else{throw new Error("gl-texture2d: Invalid shape for texture")}if((g===e.LUMINANCE||g===e.ALPHA)&&(s===e.LUMINANCE||s===e.ALPHA)){g=s}if(g!==s){throw new Error("gl-texture2d: Incompatible texture format for setPixels")}var b=f.size;var x=u.indexOf(o)<0;if(x){u.push(o)}if(v===l&&m){if(f.offset===0&&f.data.length===b){if(x){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,l,f.data)}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,l,f.data)}}else{if(x){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,l,f.data.subarray(f.offset,f.offset+b))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,l,f.data.subarray(f.offset,f.offset+b))}}}else{var _;if(l===e.FLOAT){_=i.mallocFloat32(b)}else{_=i.mallocUint8(b)}var w=n(_,d,[d[2],d[2]*d[0],1]);if(v===e.FLOAT&&l===e.UNSIGNED_BYTE){c(w,f)}else{a.assign(w,f)}if(x){e.texImage2D(e.TEXTURE_2D,o,s,d[0],d[1],0,s,l,_.subarray(0,b))}else{e.texSubImage2D(e.TEXTURE_2D,o,t,r,d[0],d[1],s,l,_.subarray(0,b))}if(l===e.FLOAT){i.freeFloat32(_)}else{i.freeUint8(_)}}}function m(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);return t}function y(e,t,r,n,a){var i=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>i||r<0||r>i){throw new Error("gl-texture2d: Invalid texture shape")}if(a===e.FLOAT&&!e.getExtension("OES_texture_float")){throw new Error("gl-texture2d: Floating point textures not supported on this platform")}var o=m(e);e.texImage2D(e.TEXTURE_2D,0,n,t,r,0,n,a,null);return new d(e,o,t,r,n,a)}function b(e,t,r,n,a,i){var o=m(e);e.texImage2D(e.TEXTURE_2D,0,a,a,i,t);return new d(e,o,r,n,a,i)}function x(e,t){var r=t.dtype;var o=t.shape.slice();var s=e.getParameter(e.MAX_TEXTURE_SIZE);if(o[0]<0||o[0]>s||o[1]<0||o[1]>s){throw new Error("gl-texture2d: Invalid texture size")}var l=p(o,t.stride.slice());var u=0;if(r==="float32"){u=e.FLOAT}else if(r==="float64"){u=e.FLOAT;l=false;r="float32"}else if(r==="uint8"){u=e.UNSIGNED_BYTE}else{u=e.UNSIGNED_BYTE;l=false;r="uint8"}var f=0;if(o.length===2){f=e.LUMINANCE;o=[o[0],o[1],1];t=n(t.data,o,[t.stride[0],t.stride[1],1],t.offset)}else if(o.length===3){if(o[2]===1){f=e.ALPHA}else if(o[2]===2){f=e.LUMINANCE_ALPHA}else if(o[2]===3){f=e.RGB}else if(o[2]===4){f=e.RGBA}else{throw new Error("gl-texture2d: Invalid shape for pixel coords")}}else{throw new Error("gl-texture2d: Invalid shape for texture")}if(u===e.FLOAT&&!e.getExtension("OES_texture_float")){u=e.UNSIGNED_BYTE;l=false}var h,v;var g=t.size;if(!l){var y=[o[2],o[2]*o[0],1];v=i.malloc(g,r);var b=n(v,o,y,0);if((r==="float32"||r==="float64")&&u===e.UNSIGNED_BYTE){c(b,t)}else{a.assign(b,t)}h=v.subarray(0,g)}else if(t.offset===0&&t.data.length===g){h=t.data}else{h=t.data.subarray(t.offset,t.offset+g)}var x=m(e);e.texImage2D(e.TEXTURE_2D,0,f,o[0],o[1],0,f,u,h);if(!l){i.free(v)}return new d(e,x,o[0],o[1],f,u)}function _(e){if(arguments.length<=1){throw new Error("gl-texture2d: Missing arguments for texture2d constructor")}if(!o){u(e)}if(typeof arguments[1]==="number"){return y(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE)}if(Array.isArray(arguments[1])){return y(e,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}if(typeof arguments[1]==="object"){var t=arguments[1];var r=f(t)?t:t.raw;if(r){return b(e,r,t.width|0,t.height|0,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE)}else if(t.shape&&t.data&&t.stride){return x(e,t)}}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:220,"ndarray-ops":219,"typedarray-pool":291}],191:[function(e,t,r){"use strict";var n=e("pick-by-alias");t.exports=function e(t){if(!t)t={};else if(typeof t==="string")t={container:t};if(i(t)){t={container:t}}else if(o(t)){t={container:t}}else if(s(t)){t={gl:t}}else{t=n(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio"},true)}if(!t.pixelRatio)t.pixelRatio=window.pixelRatio||1;if(t.gl){return t.gl}if(t.canvas){t.container=t.canvas.parentNode}if(t.container){if(typeof t.container==="string"){var r=document.querySelector(t.container);if(!r)throw Error("Element "+t.container+" is not found");t.container=r}if(i(t.container)){t.canvas=t.container;t.container=t.canvas.parentNode}else if(!t.canvas){t.canvas=document.createElement("canvas");t.container.appendChild(t.canvas);a(t)}}else if(!t.canvas){t.container=document.body||document.documentElement;t.canvas=document.createElement("canvas");t.canvas.style.position="absolute";t.canvas.style.top=0;t.canvas.style.left=0;t.container.appendChild(t.canvas);a(t)}if(!t.gl){try{t.gl=t.canvas.getContext("webgl",t.attrs)}catch(e){try{t.gl=t.canvas.getContext("experimental-webgl",t.attrs)}catch(e){t.gl=t.canvas.getContext("webgl-experimental",t.attrs)}}}return t.gl};function a(e){if(e.container){if(e.container==document.body){if(!document.body.style.width)e.canvas.width=e.width||e.pixelRatio*window.innerWidth;if(!document.body.style.height)e.canvas.height=e.height||e.pixelRatio*window.innerHeight}else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left;e.canvas.height=e.height||t.bottom-t.top}}}function i(e){return typeof e.getContext==="function"&&"width"in e&&"height"in e}function o(e){return typeof e.nodeName==="string"&&typeof e.appendChild==="function"&&typeof e.getBoundingClientRect==="function"}function s(e){return typeof e.drawArrays==="function"||typeof e.drawElements==="function"}},{"pick-by-alias":232}],192:[function(e,t,r){var n=e("glsl-tokenizer");var a=e("atob-lite");t.exports=i;function i(e){var t=Array.isArray(e)?e:n(e);for(var r=0;r<t.length;r++){var i=t[r];if(i.type!=="preprocessor")continue;var o=i.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!o)continue;if(!o[2])continue;var s=o[1];var l=o[2];return(s?a(l):l).trim()}}},{"atob-lite":22,"glsl-tokenizer":199}],193:[function(e,t,r){t.exports=A;var n=e("./lib/literals"),a=e("./lib/operators"),i=e("./lib/builtins"),o=e("./lib/literals-300es"),s=e("./lib/builtins-300es");var l=999,u=9999,f=0,c=1,h=2,d=3,v=4,p=5,g=6,m=7,y=8,b=9,x=10,_=11;var w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function A(e){var t=0,r=0,A=l,k,T,M=[],E=[],C=0,S=0,L=1,O=0,I=0,D=false,R=false,P="",z;e=e||{};var F=i;var B=n;if(e.version==="300 es"){F=s;B=o}return function(e){E=[];if(e!==null)return j(e.replace?e.replace(/\r\n/g,"\n"):e);return U()};function N(e){if(e.length){E.push({type:w[A],data:e,position:I,line:L,column:O})}}function j(e){t=0;P+=e;z=P.length;var n;while(k=P[t],t<z){n=t;switch(A){case f:t=X();break;case c:t=G();break;case h:t=q();break;case d:t=W();break;case v:t=J();break;case _:t=Z();break;case p:t=Q();break;case u:t=$();break;case b:t=H();break;case l:t=V();break}if(n!==t){switch(P[n]){case"\n":O=0;++L;break;default:++O;break}}}r+=t;P=P.slice(t);return E}function U(e){if(M.length){N(M.join(""))}A=x;N("(eof)");return E}function V(){M=M.length?[]:M;if(T==="/"&&k==="*"){I=r+t-1;A=f;T=k;return t+1}if(T==="/"&&k==="/"){I=r+t-1;A=c;T=k;return t+1}if(k==="#"){A=h;I=r+t;return t}if(/\s/.test(k)){A=b;I=r+t;return t}D=/\d/.test(k);R=/[^\w_]/.test(k);I=r+t;A=D?v:R?d:u;return t}function H(){if(/[^\s]/g.test(k)){N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}function q(){if((k==="\r"||k==="\n")&&T!=="\\"){N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}function G(){return q()}function X(){if(k==="/"&&T==="*"){M.push(k);N(M.join(""));A=l;return t+1}M.push(k);T=k;return t+1}function W(){if(T==="."&&/\d/.test(k)){A=p;return t}if(T==="/"&&k==="*"){A=f;return t}if(T==="/"&&k==="/"){A=c;return t}if(k==="."&&M.length){while(Y(M));A=p;return t}if(k===";"||k===")"||k==="("){if(M.length)while(Y(M));N(k);A=l;return t+1}var e=M.length===2&&k!=="=";if(/[\w_\d\s]/.test(k)||e){while(Y(M));A=l;return t}M.push(k);T=k;return t+1}function Y(e){var t=0,r,n;do{r=a.indexOf(e.slice(0,e.length+t).join(""));n=a[r];if(r===-1){if(t--+e.length>0)continue;n=e.slice(0,1).join("")}N(n);I+=n.length;M=M.slice(n.length);return M.length}while(1)}function Z(){if(/[^a-fA-F0-9]/.test(k)){N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}function J(){if(k==="."){M.push(k);A=p;T=k;return t+1}if(/[eE]/.test(k)){M.push(k);A=p;T=k;return t+1}if(k==="x"&&M.length===1&&M[0]==="0"){A=_;M.push(k);T=k;return t+1}if(/[^\d]/.test(k)){N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}function Q(){if(k==="f"){M.push(k);T=k;t+=1}if(/[eE]/.test(k)){M.push(k);T=k;return t+1}if(k==="-"&&/[eE]/.test(T)){M.push(k);T=k;return t+1}if(/[^\d]/.test(k)){N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}function $(){if(/[^\d\w_]/.test(k)){var e=M.join("");if(B.indexOf(e)>-1){A=y}else if(F.indexOf(e)>-1){A=m}else{A=g}N(M.join(""));A=l;return t}M.push(k);T=k;return t+1}}},{"./lib/builtins":195,"./lib/builtins-300es":194,"./lib/literals":197,"./lib/literals-300es":196,"./lib/operators":198}],194:[function(e,t,r){var n=e("./builtins");n=n.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)});t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":195}],195:[function(e,t,r){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],196:[function(e,t,r){var n=e("./literals");t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":197}],197:[function(e,t,r){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],198:[function(e,t,r){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],199:[function(e,t,r){var n=e("./index");t.exports=a;function a(e,t){var r=n(t);var a=[];a=a.concat(r(e));a=a.concat(r(null));return a}},{"./index":193}],200:[function(e,t,r){t.exports=function(e){if(typeof e==="string")e=[e];var t=[].slice.call(arguments,1);var r=[];for(var n=0;n<e.length-1;n++){r.push(e[n],t[n]||"")}r.push(e[n]);return r.join("")}},{}],201:[function(e,t,r){(function(r){"use strict";var n=e("is-browser");var a;if(typeof r.matchMedia==="function"){a=!r.matchMedia("(hover: none)").matches}else{a=n}t.exports=a}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":207}],202:[function(e,t,r){"use strict";var n=e("is-browser");function a(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t);window.removeEventListener("test",null,t)}catch(t){e=false}return e}t.exports=n&&a()},{"is-browser":207}],203:[function(e,t,r){r.read=function(e,t,r,n,a){var i,o;var s=a*8-n-1;var l=(1<<s)-1;var u=l>>1;var f=-7;var c=r?a-1:0;var h=r?-1:1;var d=e[t+c];c+=h;i=d&(1<<-f)-1;d>>=-f;f+=s;for(;f>0;i=i*256+e[t+c],c+=h,f-=8){}o=i&(1<<-f)-1;i>>=-f;f+=n;for(;f>0;o=o*256+e[t+c],c+=h,f-=8){}if(i===0){i=1-u}else if(i===l){return o?NaN:(d?-1:1)*Infinity}else{o=o+Math.pow(2,n);i=i-u}return(d?-1:1)*o*Math.pow(2,i-n)};r.write=function(e,t,r,n,a,i){var o,s,l;var u=i*8-a-1;var f=(1<<u)-1;var c=f>>1;var h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:i-1;var v=n?1:-1;var p=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){s=isNaN(t)?1:0;o=f}else{o=Math.floor(Math.log(t)/Math.LN2);if(t*(l=Math.pow(2,-o))<1){o--;l*=2}if(o+c>=1){t+=h/l}else{t+=h*Math.pow(2,1-c)}if(t*l>=2){o++;l/=2}if(o+c>=f){s=0;o=f}else if(o+c>=1){s=(t*l-1)*Math.pow(2,a);o=o+c}else{s=t*Math.pow(2,c-1)*Math.pow(2,a);o=0}}for(;a>=8;e[r+d]=s&255,d+=v,s/=256,a-=8){}o=o<<a|s;u+=a;for(;u>0;e[r+d]=o&255,d+=v,o/=256,u-=8){}e[r+d-v]|=p*128}},{}],204:[function(e,t,r){"use strict";var n=e("binary-search-bounds");var a=0;var i=1;var o=2;t.exports=w;function s(e,t,r,n,a){this.mid=e;this.left=t;this.right=r;this.leftPoints=n;this.rightPoints=a;this.count=(t?t.count:0)+(r?r.count:0)+n.length}var l=s.prototype;function u(e,t){e.mid=t.mid;e.left=t.left;e.right=t.right;e.leftPoints=t.leftPoints;e.rightPoints=t.rightPoints;e.count=t.count}function f(e,t){var r=b(t);e.mid=r.mid;e.left=r.left;e.right=r.right;e.leftPoints=r.leftPoints;e.rightPoints=r.rightPoints;e.count=r.count}function c(e,t){var r=e.intervals([]);r.push(t);f(e,r)}function h(e,t){var r=e.intervals([]);var n=r.indexOf(t);if(n<0){return a}r.splice(n,1);f(e,r);return i}l.intervals=function(e){e.push.apply(e,this.leftPoints);if(this.left){this.left.intervals(e)}if(this.right){this.right.intervals(e)}return e};l.insert=function(e){var t=this.count-this.leftPoints.length;this.count+=1;if(e[1]<this.mid){if(this.left){if(4*(this.left.count+1)>3*(t+1)){c(this,e)}else{this.left.insert(e)}}else{this.left=b([e])}}else if(e[0]>this.mid){if(this.right){if(4*(this.right.count+1)>3*(t+1)){c(this,e)}else{this.right.insert(e)}}else{this.right=b([e])}}else{var r=n.ge(this.leftPoints,e,m);var a=n.ge(this.rightPoints,e,y);this.leftPoints.splice(r,0,e);this.rightPoints.splice(a,0,e)}};l.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left){return a}var r=this.right?this.right.count:0;if(4*r>3*(t-1)){return h(this,e)}var s=this.left.remove(e);if(s===o){this.left=null;this.count-=1;return i}else if(s===i){this.count-=1}return s}else if(e[0]>this.mid){if(!this.right){return a}var l=this.left?this.left.count:0;if(4*l>3*(t-1)){return h(this,e)}var s=this.right.remove(e);if(s===o){this.right=null;this.count-=1;return i}else if(s===i){this.count-=1}return s}else{if(this.count===1){if(this.leftPoints[0]===e){return o}else{return a}}if(this.leftPoints.length===1&&this.leftPoints[0]===e){if(this.left&&this.right){var f=this;var c=this.left;while(c.right){f=c;c=c.right}if(f===this){c.right=this.right}else{var d=this.left;var s=this.right;f.count-=c.count;f.right=c.left;c.left=d;c.right=s}u(this,c);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else if(this.left){u(this,this.left)}else{u(this,this.right)}return i}for(var d=n.ge(this.leftPoints,e,m);d<this.leftPoints.length;++d){if(this.leftPoints[d][0]!==e[0]){break}if(this.leftPoints[d]===e){this.count-=1;this.leftPoints.splice(d,1);for(var s=n.ge(this.rightPoints,e,y);s<this.rightPoints.length;++s){if(this.rightPoints[s][1]!==e[1]){break}else if(this.rightPoints[s]===e){this.rightPoints.splice(s,1);return i}}}}return a}};function d(e,t,r){for(var n=0;n<e.length&&e[n][0]<=t;++n){var a=r(e[n]);if(a){return a}}}function v(e,t,r){for(var n=e.length-1;n>=0&&e[n][1]>=t;--n){var a=r(e[n]);if(a){return a}}}function p(e,t){for(var r=0;r<e.length;++r){var n=t(e[r]);if(n){return n}}}l.queryPoint=function(e,t){if(e<this.mid){if(this.left){var r=this.left.queryPoint(e,t);if(r){return r}}return d(this.leftPoints,e,t)}else if(e>this.mid){if(this.right){var r=this.right.queryPoint(e,t);if(r){return r}}return v(this.rightPoints,e,t)}else{return p(this.leftPoints,t)}};l.queryInterval=function(e,t,r){if(e<this.mid&&this.left){var n=this.left.queryInterval(e,t,r);if(n){return n}}if(t>this.mid&&this.right){var n=this.right.queryInterval(e,t,r);if(n){return n}}if(t<this.mid){return d(this.leftPoints,t,r)}else if(e>this.mid){return v(this.rightPoints,e,r)}else{return p(this.leftPoints,r)}};function g(e,t){return e-t}function m(e,t){var r=e[0]-t[0];if(r){return r}return e[1]-t[1]}function y(e,t){var r=e[1]-t[1];if(r){return r}return e[0]-t[0]}function b(e){if(e.length===0){return null}var t=[];for(var r=0;r<e.length;++r){t.push(e[r][0],e[r][1])}t.sort(g);var n=t[t.length>>1];var a=[];var i=[];var o=[];for(var r=0;r<e.length;++r){var l=e[r];if(l[1]<n){a.push(l)}else if(n<l[0]){i.push(l)}else{o.push(l)}}var u=o;var f=o.slice();u.sort(m);f.sort(y);return new s(n,b(a),b(i),u,f)}function x(e){this.root=e}var _=x.prototype;_.insert=function(e){if(this.root){this.root.insert(e)}else{this.root=new s(e[0],null,null,[e],[e])}};_.remove=function(e){if(this.root){var t=this.root.remove(e);if(t===o){this.root=null}return t!==a}return false};_.queryPoint=function(e,t){if(this.root){return this.root.queryPoint(e,t)}};_.queryInterval=function(e,t,r){if(e<=t&&this.root){return this.root.queryInterval(e,t,r)}};Object.defineProperty(_,"count",{get:function(){if(this.root){return this.root.count}return 0}});Object.defineProperty(_,"intervals",{get:function(){if(this.root){return this.root.intervals([])}return[]}});function w(e){if(!e||e.length===0){return new x(null)}return new x(b(e))}},{"binary-search-bounds":40}],205:[function(e,t,r){"use strict";function n(e,t){t=t||new Array(e.length);for(var r=0;r<e.length;++r){t[e[r]]=r}return t}t.exports=n},{}],206:[function(e,t,r){"use strict";function n(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=r}return t}t.exports=n},{}],207:[function(e,t,r){t.exports=true},{}],208:[function(e,t,r){t.exports=function(e){return e!=null&&(n(e)||a(e)||!!e._isBuffer)};function n(e){return!!e.constructor&&typeof e.constructor.isBuffer==="function"&&e.constructor.isBuffer(e)}function a(e){return typeof e.readFloatLE==="function"&&typeof e.slice==="function"&&n(e.slice(0,0))}},{}],209:[function(e,t,r){"use strict";t.exports=typeof navigator!=="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],210:[function(e,t,r){"use strict";t.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}},{}],211:[function(e,t,r){"use strict";var n=Object.prototype.toString;t.exports=function(e){var t;return n.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))}},{}],212:[function(e,t,r){"use strict";t.exports=function e(t){if(typeof t!=="string")return false;t=t.trim();if(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4)return true;return false}},{}],213:[function(e,t,r){"use strict";t.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}},{}],214:[function(e,t,r){"use strict";t.exports=a;var n=e("mouse-event");function a(e,t){if(!t){t=e;e=window}var r=0;var a=0;var i=0;var o={shift:false,alt:false,control:false,meta:false};var s=false;function l(e){var t=false;if("altKey"in e){t=t||e.altKey!==o.alt;o.alt=!!e.altKey}if("shiftKey"in e){t=t||e.shiftKey!==o.shift;o.shift=!!e.shiftKey}if("ctrlKey"in e){t=t||e.ctrlKey!==o.control;o.control=!!e.ctrlKey}if("metaKey"in e){t=t||e.metaKey!==o.meta;o.meta=!!e.metaKey}return t}function u(e,s){var u=n.x(s);var f=n.y(s);if("buttons"in s){e=s.buttons|0}if(e!==r||u!==a||f!==i||l(s)){r=e|0;a=u||0;i=f||0;t&&t(r,a,i,o)}}function f(e){u(0,e)}function c(){if(r||a||i||o.shift||o.alt||o.meta||o.control){a=i=0;r=0;o.shift=o.alt=o.control=o.meta=false;t&&t(0,0,0,o)}}function h(e){if(l(e)){t&&t(r,a,i,o)}}function d(e){if(n.buttons(e)===0){u(0,e)}else{u(r,e)}}function v(e){u(r|n.buttons(e),e)}function p(e){u(r&~n.buttons(e),e)}function g(){if(s){return}s=true;e.addEventListener("mousemove",d);e.addEventListener("mousedown",v);e.addEventListener("mouseup",p);e.addEventListener("mouseleave",f);e.addEventListener("mouseenter",f);e.addEventListener("mouseout",f);e.addEventListener("mouseover",f);e.addEventListener("blur",c);e.addEventListener("keyup",h);e.addEventListener("keydown",h);e.addEventListener("keypress",h);if(e!==window){window.addEventListener("blur",c);window.addEventListener("keyup",h);window.addEventListener("keydown",h);window.addEventListener("keypress",h)}}function m(){if(!s){return}s=false;e.removeEventListener("mousemove",d);e.removeEventListener("mousedown",v);e.removeEventListener("mouseup",p);e.removeEventListener("mouseleave",f);e.removeEventListener("mouseenter",f);e.removeEventListener("mouseout",f);e.removeEventListener("mouseover",f);e.removeEventListener("blur",c);e.removeEventListener("keyup",h);e.removeEventListener("keydown",h);e.removeEventListener("keypress",h);if(e!==window){window.removeEventListener("blur",c);window.removeEventListener("keyup",h);window.removeEventListener("keydown",h);window.removeEventListener("keypress",h)}}g();var y={element:e};Object.defineProperties(y,{enabled:{get:function(){return s},set:function(e){if(e){g()}else{m()}},enumerable:true},buttons:{get:function(){return r},enumerable:true},x:{get:function(){return a},enumerable:true},y:{get:function(){return i},enumerable:true},mods:{get:function(){return o},enumerable:true}});return y}},{"mouse-event":216}],215:[function(e,t,r){var n={left:0,top:0};t.exports=a;function a(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var n=e.clientX||0;var a=e.clientY||0;var o=i(t);r[0]=n-o.left;r[1]=a-o.top;return r}function i(e){if(e===window||e===document||e===document.body){return n}else{return e.getBoundingClientRect()}}},{}],216:[function(e,t,r){"use strict";function n(e){if(typeof e==="object"){if("buttons"in e){return e.buttons}else if("which"in e){var t=e.which;if(t===2){return 4}else if(t===3){return 2}else if(t>0){return 1<<t-1}}else if("button"in e){var t=e.button;if(t===1){return 4}else if(t===2){return 2}else if(t>=0){return 1<<t}}}return 0}r.buttons=n;function a(e){return e.target||e.srcElement||window}r.element=a;function i(e){if(typeof e==="object"){if("offsetX"in e){return e.offsetX}var t=a(e);var r=t.getBoundingClientRect();return e.clientX-r.left}return 0}r.x=i;function o(e){if(typeof e==="object"){if("offsetY"in e){return e.offsetY}var t=a(e);var r=t.getBoundingClientRect();return e.clientY-r.top}return 0}r.y=o},{}],217:[function(e,t,r){"use strict";var n=e("to-px");t.exports=a;function a(e,t,r){if(typeof e==="function"){r=!!t;t=e;e=window}var a=n("ex",e);var i=function(e){if(r){e.preventDefault()}var n=e.deltaX||0;var i=e.deltaY||0;var o=e.deltaZ||0;var s=e.deltaMode;var l=1;switch(s){case 1:l=a;break;case 2:l=window.innerHeight;break}n*=l;i*=l;o*=l;if(n||i||o){return t(n,i,o,e)}};e.addEventListener("wheel",i);return i}},{"to-px":287}],218:[function(e,t,r){"use strict";var n=e("typedarray-pool");t.exports=E;function a(e){return"a"+e}function i(e){return"d"+e}function o(e,t){return"c"+e+"_"+t}function s(e){return"s"+e}function l(e,t){return"t"+e+"_"+t}function u(e){return"o"+e}function f(e){return"x"+e}function c(e){return"p"+e}function h(e,t){return"d"+e+"_"+t}function d(e){return"i"+e}function v(e,t){return"u"+e+"_"+t}function p(e){return"b"+e}function g(e){return"y"+e}function m(e){return"e"+e}function y(e){return"v"+e}var b="V";var x="P";var _="N";var w="Q";var A="X";var k="T";function T(e,t,r){var n=0;for(var a=0;a<e;++a){if(t&1<<a){n|=1<<r[a]}}return n}function M(e,t,r,M,E,C){var S=C.length;var L=E.length;if(L<2){throw new Error("ndarray-extract-contour: Dimension must be at least 2")}var O="extractContour"+E.join("_");var I=[];var D=[];var R=[];for(var P=0;P<S;++P){R.push(a(P))}for(var P=0;P<M;++P){R.push(f(P))}for(var P=0;P<L;++P){D.push(s(P)+"="+a(0)+".shape["+P+"]|0")}for(var P=0;P<S;++P){D.push(i(P)+"="+a(P)+".data",u(P)+"="+a(P)+".offset|0");for(var z=0;z<L;++z){D.push(l(P,z)+"="+a(P)+".stride["+z+"]|0")}}for(var P=0;P<S;++P){D.push(c(P)+"="+u(P));D.push(o(P,0));for(var z=1;z<1<<L;++z){var F=[];for(var B=0;B<L;++B){if(z&1<<B){F.push("-"+l(P,B))}}D.push(h(P,z)+"=("+F.join("")+")|0");D.push(o(P,z)+"=0")}}for(var P=0;P<S;++P){for(var z=0;z<L;++z){var N=[l(P,E[z])];if(z>0){N.push(l(P,E[z-1])+"*"+s(E[z-1]))}D.push(v(P,E[z])+"=("+N.join("-")+")|0")}}for(var P=0;P<L;++P){D.push(d(P)+"=0")}D.push(_+"=0");var j=["2"];for(var P=L-2;P>=0;--P){j.push(s(E[P]))}D.push(w+"=("+j.join("*")+")|0",x+"=mallocUint32("+w+")",b+"=mallocUint32("+w+")",A+"=0");D.push(p(0)+"=0");for(var z=1;z<1<<L;++z){var U=[];var V=[];for(var B=0;B<L;++B){if(z&1<<B){if(V.length===0){U.push("1")}else{U.unshift(V.join("*"))}}V.push(s(E[B]))}var H="";if(U[0].indexOf(s(E[L-2]))<0){H="-"}var q=T(L,z,E);D.push(m(q)+"=(-"+U.join("-")+")|0",g(q)+"=("+H+U.join("-")+")|0",p(q)+"=0")}D.push(y(0)+"=0",k+"=0");function G(e,t){I.push("for(",d(E[e]),"=",t,";",d(E[e]),"<",s(E[e]),";","++",d(E[e]),"){")}function X(e){for(var t=0;t<S;++t){I.push(c(t),"+=",v(t,E[e]),";")}I.push("}")}function W(e){for(var t=e-1;t>=0;--t){G(t,0)}var r=[];for(var t=0;t<S;++t){if(C[t]){r.push(i(t)+".get("+c(t)+")")}else{r.push(i(t)+"["+c(t)+"]")}}for(var t=0;t<M;++t){r.push(f(t))}I.push(x,"[",A,"++]=phase(",r.join(),");");for(var t=0;t<e;++t){X(t)}for(var n=0;n<S;++n){I.push(c(n),"+=",v(n,E[e]),";")}}function Y(e){for(var t=0;t<S;++t){if(C[t]){I.push(o(t,0),"=",i(t),".get(",c(t),");")}else{I.push(o(t,0),"=",i(t),"[",c(t),"];")}}var r=[];for(var t=0;t<S;++t){r.push(o(t,0))}for(var t=0;t<M;++t){r.push(f(t))}I.push(p(0),"=",x,"[",A,"]=phase(",r.join(),");");for(var n=1;n<1<<L;++n){I.push(p(n),"=",x,"[",A,"+",m(n),"];")}var a=[];for(var n=1;n<1<<L;++n){a.push("("+p(0)+"!=="+p(n)+")")}I.push("if(",a.join("||"),"){");var s=[];for(var t=0;t<L;++t){s.push(d(t))}for(var t=0;t<S;++t){s.push(o(t,0));for(var n=1;n<1<<L;++n){if(C[t]){I.push(o(t,n),"=",i(t),".get(",c(t),"+",h(t,n),");")}else{I.push(o(t,n),"=",i(t),"[",c(t),"+",h(t,n),"];")}s.push(o(t,n))}}for(var t=0;t<1<<L;++t){s.push(p(t))}for(var t=0;t<M;++t){s.push(f(t))}I.push("vertex(",s.join(),");",y(0),"=",b,"[",A,"]=",_,"++;");var l=(1<<L)-1;var u=p(l);for(var n=0;n<L;++n){if((e&~(1<<n))===0){var v=l^1<<n;var g=p(v);var w=[];for(var k=v;k>0;k=k-1&v){w.push(b+"["+A+"+"+m(k)+"]")}w.push(y(0));for(var k=0;k<S;++k){if(n&1){w.push(o(k,l),o(k,v))}else{w.push(o(k,v),o(k,l))}}if(n&1){w.push(u,g)}else{w.push(g,u)}for(var k=0;k<M;++k){w.push(f(k))}I.push("if(",u,"!==",g,"){","face(",w.join(),")}")}}I.push("}",A,"+=1;")}function Z(){for(var e=1;e<1<<L;++e){I.push(k,"=",m(e),";",m(e),"=",g(e),";",g(e),"=",k,";")}}function J(e,t){if(e<0){Y(t);return}W(e);I.push("if(",s(E[e]),">0){",d(E[e]),"=1;");J(e-1,t|1<<E[e]);for(var r=0;r<S;++r){I.push(c(r),"+=",v(r,E[e]),";")}if(e===L-1){I.push(A,"=0;");Z()}G(e,2);J(e-1,t);if(e===L-1){I.push("if(",d(E[L-1]),"&1){",A,"=0;}");Z()}X(e);I.push("}")}J(L-1,0);I.push("freeUint32(",b,");freeUint32(",x,");");var Q=["'use strict';","function ",O,"(",R.join(),"){","var ",D.join(),";",I.join(""),"}","return ",O].join("");var $=new Function("vertex","face","phase","mallocUint32","freeUint32",Q);return $(e,t,r,n.mallocUint32,n.freeUint32)}function E(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}if(typeof e!=="object"){t("Must specify arguments")}var r=e.order;if(!Array.isArray(r)){t("Must specify order")}var n=e.arrayArguments||1;if(n<1){t("Must have at least one array argument")}var a=e.scalarArguments||0;if(a<0){t("Scalar arg count must be > 0")}if(typeof e.vertex!=="function"){t("Must specify vertex creation function")}if(typeof e.cell!=="function"){t("Must specify cell creation function")}if(typeof e.phase!=="function"){t("Must specify phase function")}var i=e.getters||[];var o=new Array(n);for(var s=0;s<n;++s){if(i.indexOf(s)>=0){o[s]=true}else{o[s]=false}}return M(e.vertex,e.cell,e.phase,a,r,o)}},{"typedarray-pool":291}],219:[function(e,t,r){"use strict";var n=e("cwise-compiler");var a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e){return a}for(var t=0;t<e.args.length;++t){var r=e.args[t];if(t===0){e.args[t]={name:r,lvalue:true,rvalue:!!e.rvalue,count:e.count||1}}else{e.args[t]={name:r,lvalue:false,rvalue:true,count:1}}}if(!e.thisVars){e.thisVars=[]}if(!e.localVars){e.localVars=[]}return e}function o(e){return n({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName})}function s(e){var t=[];for(var r=0;r<e.args.length;++r){t.push("a"+r)}var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(o(e))}var l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var e in l){var t=l[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:true,funcName:e+"eq"});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:true,funcName:e+"seq"})}})();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var e in u){var t=u[e];r[e]=s({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e});r[e+"eq"]=s({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:true,count:2,funcName:e+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var e in f){var t=f[e];r[e]=s({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e});r[e+"s"]=s({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"});r[e+"eq"]=s({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:true,count:2,funcName:e+"eq"});r[e+"seq"]=s({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:true,count:2,funcName:e+"seq"})}})();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var e=0;e<c.length;++e){var t=c[e];r[t]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t});r[t+"eq"]=s({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"})}})();var h=["max","min","atan2","pow"];(function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t});r[t+"s"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"});r[t+"eq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"eq"});r[t+"seq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"seq"})}})();var d=["atan2","pow"];(function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=s({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"});r[t+"ops"]=s({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"});r[t+"opeq"]=s({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opeq"});r[t+"opseq"]=s({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:true,count:2,funcName:t+"opseq"})}})();r.any=n({args:["array"],pre:a,body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});r.all=n({args:["array"],pre:a,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:false,rvalue:true,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg1_",lvalue:false,rvalue:false,count:0},{name:"_inline_0_arg2_",lvalue:false,rvalue:true,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});r.random=s({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"});r.assign=s({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"});r.assigns=s({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"});r.equals=n({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:false,rvalue:true,count:1},{name:"y",lvalue:false,rvalue:true,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":80}],220:[function(e,t,r){var n=e("iota-array");var a=e("is-buffer");var i=typeof Float64Array!=="undefined";function o(e,t){return e[0]-t[0]}function s(){var e=this.stride;var t=new Array(e.length);var r;for(r=0;r<t.length;++r){t[r]=[Math.abs(e[r]),r]}t.sort(o);var n=new Array(t.length);for(r=0;r<n.length;++r){n[r]=t[r][1]}return n}function l(e,t){var r=["View",t,"d",e].join("");if(t<0){r="View_Nil"+e}var a=e==="generic";if(t===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";var o=new Function(i);return o()}else if(t===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";var o=new Function("TrivialArray",i);return o(f[e][0])}var i=["'use strict'"];var l=n(t);var u=l.map(function(e){return"i"+e});var c="this.offset+"+l.map(function(e){return"this.stride["+e+"]*i"+e}).join("+");var h=l.map(function(e){return"b"+e}).join(",");var d=l.map(function(e){return"c"+e}).join(",");i.push("function "+r+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t);i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+l.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})");if(t===1){i.push("proto.order=[0]")}else{i.push("Object.defineProperty(proto,'order',{get:");if(t<4){i.push("function "+r+"_order(){");if(t===2){i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})")}else if(t===3){i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")}}else{i.push("ORDER})")}}i.push("proto.set=function "+r+"_set("+u.join(",")+",v){");if(a){i.push("return this.data.set("+c+",v)}")}else{i.push("return this.data["+c+"]=v}")}i.push("proto.get=function "+r+"_get("+u.join(",")+"){");if(a){i.push("return this.data.get("+c+")}")}else{i.push("return this.data["+c+"]}")}i.push("proto.index=function "+r+"_index(",u.join(),"){return "+c+"}");i.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+l.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+l.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var v=l.map(function(e){return"a"+e+"=this.shape["+e+"]"});var p=l.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+v.join(",")+","+p.join(","));for(var g=0;g<t;++g){i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}")}i.push("return new "+r+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"c"+e}).join(",")+",b)}");i.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+l.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+l.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;g<t;++g){i.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}")}i.push("return new "+r+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"b"+e}).join(",")+",c)}");var m=new Array(t);var y=new Array(t);for(var g=0;g<t;++g){m[g]="a[i"+g+"]";y[g]="b[i"+g+"]"}i.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}");i.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var g=0;g<t;++g){i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}")}i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+l.map(function(e){return"shape["+e+"]"}).join(",")+","+l.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=new Function("CTOR_LIST","ORDER",i.join("\n"));return o(f[e],s)}function u(e){if(a(e)){return"buffer"}if(i){switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}}if(Array.isArray(e)){return"array"}return"generic"}var f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};(function(){for(var e in f){f[e].push(l(e,-1))}});function c(e,t,r,n){if(e===undefined){var a=f.array[0];return a([])}else if(typeof e==="number"){e=[e]}if(t===undefined){t=[e.length]}var i=t.length;if(r===undefined){r=new Array(i);for(var o=i-1,s=1;o>=0;--o){r[o]=s;s*=t[o]}}if(n===undefined){n=0;for(var o=0;o<i;++o){if(r[o]<0){n-=(t[o]-1)*r[o]}}}var c=u(e);var h=f[c];while(h.length<=i+1){h.push(l(c,h.length-1))}var a=h[i+1];return a(e,t,r,n)}t.exports=c},{"iota-array":206,"is-buffer":208}],221:[function(e,t,r){"use strict";var n=e("double-bits");var a=Math.pow(2,-1074);var i=-1>>>0;t.exports=o;function o(e,t){if(isNaN(e)||isNaN(t)){return NaN}if(e===t){return e}if(e===0){if(t<0){return-a}else{return a}}var r=n.hi(e);var o=n.lo(e);if(t>e===e>0){if(o===i){r+=1;o=0}else{o+=1}}else{if(o===0){o=i;r-=1}else{o-=1}}return n.pack(o,r)}},{"double-bits":89}],222:[function(e,t,r){var n=Math.PI;var a=f(120);t.exports=i;function i(e){var t;var r=[];var n=0;var a=0;var i=0;var u=0;var c=null;var h=null;var d=0;var v=0;for(var p=0,g=e.length;p<g;p++){var m=e[p];var y=m[0];switch(y){case"M":i=m[1];u=m[2];break;case"A":m=l(d,v,m[1],m[2],f(m[3]),m[4],m[5],m[6],m[7]);m.unshift("C");if(m.length>7){r.push(m.splice(0,7));m.unshift("C")}break;case"S":var b=d;var x=v;if(t=="C"||t=="S"){b+=b-n;x+=x-a}m=["C",b,x,m[1],m[2],m[3],m[4]];break;case"T":if(t=="Q"||t=="T"){c=d*2-c;h=v*2-h}else{c=d;h=v}m=s(d,v,c,h,m[1],m[2]);break;case"Q":c=m[1];h=m[2];m=s(d,v,m[1],m[2],m[3],m[4]);break;case"L":m=o(d,v,m[1],m[2]);break;case"H":m=o(d,v,m[1],v);break;case"V":m=o(d,v,d,m[1]);break;case"Z":m=o(d,v,i,u);break}t=y;d=m[m.length-2];v=m[m.length-1];if(m.length>4){n=m[m.length-4];a=m[m.length-3]}else{n=d;a=v}r.push(m)}return r}function o(e,t,r,n){return["C",e,t,r,n,r,n]}function s(e,t,r,n,a,i){return["C",e/3+2/3*r,t/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}function l(e,t,r,i,o,s,f,c,h,d){if(!d){var v=u(e,t,-o);e=v.x;t=v.y;v=u(c,h,-o);c=v.x;h=v.y;var p=(e-c)/2;var g=(t-h)/2;var m=p*p/(r*r)+g*g/(i*i);if(m>1){m=Math.sqrt(m);r=m*r;i=m*i}var y=r*r;var b=i*i;var x=(s==f?-1:1)*Math.sqrt(Math.abs((y*b-y*g*g-b*p*p)/(y*g*g+b*p*p)));if(x==Infinity)x=1;var _=x*r*g/i+(e+c)/2;var w=x*-i*p/r+(t+h)/2;var A=Math.asin(((t-w)/i).toFixed(9));var k=Math.asin(((h-w)/i).toFixed(9));A=e<_?n-A:A;k=c<_?n-k:k;if(A<0)A=n*2+A;if(k<0)k=n*2+k;if(f&&A>k)A=A-n*2;if(!f&&k>A)k=k-n*2}else{A=d[0];k=d[1];_=d[2];w=d[3]}if(Math.abs(k-A)>a){var T=k;var M=c;var E=h;k=A+a*(f&&k>A?1:-1);c=_+r*Math.cos(k);h=w+i*Math.sin(k);var C=l(c,h,r,i,o,0,f,M,E,[k,T,_,w])}var S=Math.tan((k-A)/4);var L=4/3*r*S;var O=4/3*i*S;var I=[2*e-(e+L*Math.sin(A)),2*t-(t-O*Math.cos(A)),c+L*Math.sin(k),h-O*Math.cos(k),c,h];if(d)return I;if(C)I=I.concat(C);for(var D=0;D<I.length;){var R=u(I[D],I[D+1],o);I[D++]=R.x;I[D++]=R.y}return I}function u(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function f(e){return e*(n/180)}},{}],223:[function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty;var i=Object.prototype.propertyIsEnumerable;function o(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function s(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var n=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(n.join("")!=="0123456789"){return false}var a={};"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e});if(Object.keys(Object.assign({},a)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=s()?Object.assign:function(e,t){var r;var s=o(e);var l;for(var u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var f in r){if(a.call(r,f)){s[f]=r[f]}}if(n){l=n(r);for(var c=0;c<l.length;c++){if(i.call(r,l[c])){s[l[c]]=r[l[c]]}}}}return s}},{}],224:[function(e,t,r){"use strict";var n=e("repeat-string");t.exports=function e(t,r,a){a=typeof a!=="undefined"?a+"":" ";return n(a,r)+t}},{"repeat-string":261}],225:[function(e,t,r){"use strict";function n(e,t){if(typeof e!=="string")return[e];var r=[e];if(typeof t==="string"||Array.isArray(t)){t={brackets:t}}else if(!t)t={};var n=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"];var a=t.escape||"___";var i=!!t.flat;n.forEach(function(e){var t=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join(""));var n=[];function i(t,i,o){var s=r.push(t.slice(e[0].length,-e[1].length))-1;n.push(s);return a+s}r.forEach(function(e,n){var a;var o=0;while(e!=a){a=e;e=e.replace(t,i);if(o++>1e4)throw Error("References have circular dependency. Please, check them.")}r[n]=e});n=n.reverse();r=r.map(function(t){n.forEach(function(r){t=t.replace(new RegExp("(\\"+a+r+"(?![0-9]))","g"),e[0]+"$1"+e[1])});return t})});var o=new RegExp("\\"+a+"([0-9]+)");function s(e,t,r){var n=[],a;var i=0;while(a=o.exec(e)){if(i++>1e4)throw Error("Circular references in parenthesis");n.push(e.slice(0,a.index));n.push(s(t[a[1]],t));e=e.slice(a.index+a[0].length)}n.push(e);return n}return i?r:s(r[0],r)}function a(e,t){if(t&&t.flat){var r=t&&t.escape||"___";var n=e[0],a;if(!n)return"";var i=new RegExp("\\"+r+"([0-9]+)");var o=0;while(n!=a){if(o++>1e4)throw Error("Circular references in "+e);a=n;n=n.replace(i,s)}return n}return e.reduce(function e(t,r){if(Array.isArray(r)){r=r.reduce(e,"")}return t+r},"");function s(t,r){if(e[r]==null)throw Error("Reference "+r+"is undefined");return e[r]}}function i(e,t){if(Array.isArray(e)){return a(e,t)}else{return n(e,t)}}i.parse=n;i.stringify=a;t.exports=i},{}],226:[function(e,t,r){"use strict";var n=e("pick-by-alias");t.exports=a;function a(e){var t;if(arguments.length>1){e=arguments}if(typeof e==="string"){e=e.split(/\s/).map(parseFloat)}else if(typeof e==="number"){e=[e]}if(e.length&&typeof e[0]==="number"){if(e.length===1){t={width:e[0],height:e[0],x:0,y:0}}else if(e.length===2){t={width:e[0],height:e[1],x:0,y:0}}else{t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}}}else if(e){e=n(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"});t={x:e.left||0,y:e.top||0};if(e.width==null){if(e.right)t.width=e.right-t.x;else t.width=0}else{t.width=e.width}if(e.height==null){if(e.bottom)t.height=e.bottom-t.y;else t.height=0}else{t.height=e.height}}return t}},{"pick-by-alias":232}],227:[function(e,t,r){t.exports=i;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0};var a=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function i(e){var t=[];e.replace(a,function(e,r,a){var i=r.toLowerCase();a=s(a);if(i=="m"&&a.length>2){t.push([r].concat(a.splice(0,2)));i="l";r=r=="m"?"l":"L"}while(true){if(a.length==n[i]){a.unshift(r);return t.push(a)}if(a.length<n[i])throw new Error("malformed path data");t.push([r].concat(a.splice(0,n[i])))}});return t}var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function s(e){var t=e.match(o);return t?t.map(Number):[]}},{}],228:[function(e,t,r){t.exports=function e(t,r){if(!r)r=[0,""];t=String(t);var n=parseFloat(t,10);r[0]=n;r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return r}},{}],229:[function(e,t,r){(function(e){(function(){var r,n,a,i,o,s;if(typeof performance!=="undefined"&&performance!==null&&performance.now){t.exports=function(){return performance.now()}}else if(typeof e!=="undefined"&&e!==null&&e.hrtime){t.exports=function(){return(r()-o)/1e6};n=e.hrtime;r=function(){var e;e=n();return e[0]*1e9+e[1]};i=r();s=e.uptime()*1e9;o=i-s}else if(Date.now){t.exports=function(){return Date.now()-a};a=Date.now()}else{t.exports=function(){return(new Date).getTime()-a};a=(new Date).getTime()}}).call(this)}).call(this,e("_process"))},{_process:248}],230:[function(e,t,r){"use strict";t.exports=i;var n=32;var a=e("typedarray-pool");function i(e){var t=e.length;if(t<n){var r=1;for(var i=0;i<t;++i){for(var o=0;o<i;++o){if(e[i]<e[o]){r=-r}else if(e[i]===e[o]){return 0}}}return r}else{var s=a.mallocUint8(t);for(var i=0;i<t;++i){s[i]=0}var r=1;for(var i=0;i<t;++i){if(!s[i]){var l=1;s[i]=1;for(var o=e[i];o!==i;o=e[o]){if(s[o]){a.freeUint8(s);return 0}l+=1;s[o]=1}if(!(l&1)){r=-r}}}a.freeUint8(s);return r}}},{"typedarray-pool":291}],231:[function(e,t,r){"use strict";var n=e("typedarray-pool");var a=e("invert-permutation");function i(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1];default:break}var r=n.mallocUint32(t);var i=n.mallocUint32(t);var o=0,s,l,u;a(e,i);for(u=0;u<t;++u){r[u]=e[u]}for(u=t-1;u>0;--u){l=i[u];s=r[u];r[u]=r[l];r[l]=s;i[u]=i[s];i[s]=l;o=(o+s)*u}n.freeUint32(i);n.freeUint32(r);return o}function o(e,t,r){switch(e){case 0:if(r){return r}return[];case 1:if(r){r[0]=0;return r}else{return[0]}case 2:if(r){if(t){r[0]=0;r[1]=1}else{r[0]=1;r[1]=0}return r}else{return t?[0,1]:[1,0]}default:break}r=r||new Array(e);var n,a,i,o=1;r[0]=0;for(i=1;i<e;++i){r[i]=i;o=o*i|0}for(i=e-1;i>0;--i){n=t/o|0;t=t-n*o|0;o=o/i|0;a=r[i]|0;r[i]=r[n]|0;r[n]=a|0}return r}r.rank=i;r.unrank=o},{"invert-permutation":205,"typedarray-pool":291}],232:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var i={},o,s;if(typeof r==="string")r=a(r);if(Array.isArray(r)){var l={};for(s=0;s<r.length;s++){l[r[s]]=true}r=l}for(o in r){r[o]=a(r[o])}var u={};for(o in r){var f=r[o];if(Array.isArray(f)){for(s=0;s<f.length;s++){var c=f[s];if(n){u[c]=true}if(c in t){i[o]=t[c];if(n){for(var h=s;h<f.length;h++){u[f[h]]=true}}break}}}else if(o in t){if(r[o]){i[o]=t[o]}if(n){u[o]=true}}}if(n){for(o in t){if(u[o])continue;i[o]=t[o]}}return i};var n={};function a(e){if(n[e])return n[e];if(typeof e==="string"){e=n[e]=e.split(/\s*,\s*|\s+/)}return e}},{}],233:[function(e,t,r){"use strict";t.exports=a;var n=e("compare-angle");function a(e,t){var r=t.length|0;var a=e.length;var i=[new Array(r),new Array(r)];for(var o=0;o<r;++o){i[0][o]=[];i[1][o]=[]}for(var o=0;o<a;++o){var s=e[o];i[0][s[0]].push(s);i[1][s[1]].push(s)}var l=[];for(var o=0;o<r;++o){if(i[0][o].length+i[1][o].length===0){l.push([o])}}function u(e,t){var r=i[t][e[t]];r.splice(r.indexOf(e),1)}function f(e,r,a){var o,s,l;for(var f=0;f<2;++f){if(i[f][r].length>0){o=i[f][r][0];l=f;break}}s=o[l^1];for(var c=0;c<2;++c){var h=i[c][r];for(var d=0;d<h.length;++d){var v=h[d];var p=v[c^1];var g=n(t[e],t[r],t[s],t[p]);if(g>0){o=v;s=p;l=c}}}if(a){return s}if(o){u(o,l)}return s}function c(e,r){var a=i[r][e][0];var o=[e];u(a,r);var s=a[r^1];var l=r;while(true){while(s!==e){o.push(s);s=f(o[o.length-2],s,false)}if(i[0][e].length+i[1][e].length===0){break}var c=o[o.length-1];var h=e;var d=o[1];var v=f(c,h,true);if(n(t[c],t[h],t[d],t[v])<0){break}o.push(e);s=f(c,h)}return o}function h(e,t){return t[1]===t[t.length-1]}for(var o=0;o<r;++o){for(var d=0;d<2;++d){var v=[];while(i[d][o].length>0){var p=i[0][o].length;var g=c(o,d);if(h(v,g)){v.push.apply(v,g)}else{if(v.length>0){l.push(v)}v=g}}if(v.length>0){l.push(v)}}}return l}},{"compare-angle":69}],234:[function(e,t,r){"use strict";t.exports=a;var n=e("edges-to-adjacency-list");function a(e,t){var r=n(e,t.length);var a=new Array(t.length);var i=new Array(t.length);var o=[];for(var s=0;s<t.length;++s){var l=r[s].length;i[s]=l;a[s]=true;if(l<=1){o.push(s)}}while(o.length>0){var u=o.pop();a[u]=false;var f=r[u];for(var s=0;s<f.length;++s){var c=f[s];if(--i[c]===0){o.push(c)}}}var h=new Array(t.length);var d=[];for(var s=0;s<t.length;++s){if(a[s]){var u=d.length;h[s]=u;d.push(t[s])}else{h[s]=-1}}var v=[];for(var s=0;s<e.length;++s){var p=e[s];if(a[p[0]]&&a[p[1]]){v.push([h[p[0]],h[p[1]]])}}return[v,d]}},{"edges-to-adjacency-list":94}],235:[function(e,t,r){"use strict";t.exports=h;var n=e("edges-to-adjacency-list");var a=e("planar-dual");var i=e("point-in-big-polygon");var o=e("two-product");var s=e("robust-sum");var l=e("uniq");var u=e("./lib/trim-leaves");function f(e,t){var r=new Array(e);for(var n=0;n<e;++n){r[n]=t}return r}function c(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=[]}return t}function h(e,t){var r=u(e,t);e=r[0];t=r[1];var h=t.length;var d=e.length;var v=n(e,t.length);for(var p=0;p<h;++p){if(v[p].length%2===1){throw new Error("planar-graph-to-polyline: graph must be manifold")}}var g=a(e,t);function m(e){var r=e.length;var n=[0];for(var a=0;a<r;++a){var i=t[e[a]];var l=t[e[(a+1)%r]];var u=o(-i[0],i[1]);var f=o(-i[0],l[1]);var c=o(l[0],i[1]);var h=o(l[0],l[1]);n=s(n,s(s(u,f),s(c,h)))}return n[n.length-1]>0}g=g.filter(m);var y=g.length;var b=new Array(y);var x=new Array(y);for(var p=0;p<y;++p){b[p]=p;var _=new Array(y);var w=g[p].map(function(e){return t[e]});var A=i([w]);var k=0;e:for(var T=0;T<y;++T){_[T]=0;if(p===T){continue}var M=g[T];var E=M.length;for(var C=0;C<E;++C){var S=A(t[M[C]]);if(S!==0){if(S<0){_[T]=1;k+=1}continue e}}_[T]=1;k+=1}x[p]=[k,p,_]}x.sort(function(e,t){return t[0]-e[0]});for(var p=0;p<y;++p){var _=x[p];var L=_[1];var O=_[2];for(var T=0;T<y;++T){if(O[T]){b[T]=L}}}var I=c(y);for(var p=0;p<y;++p){I[p].push(b[p]);I[b[p]].push(p)}var D={};var R=f(h,false);for(var p=0;p<y;++p){var M=g[p];var E=M.length;for(var T=0;T<E;++T){var P=M[T];var z=M[(T+1)%E];var F=Math.min(P,z)+":"+Math.max(P,z);if(F in D){var B=D[F];I[B].push(p);I[p].push(B);R[P]=R[z]=true}else{D[F]=p}}}function N(e){var t=e.length;for(var r=0;r<t;++r){if(!R[e[r]]){return false}}return true}var j=[];var U=f(y,-1);for(var p=0;p<y;++p){if(b[p]===p&&!N(g[p])){j.push(p);U[p]=0}else{U[p]=-1}}var r=[];while(j.length>0){var V=j.pop();var H=I[V];l(H,function(e,t){return e-t});var q=H.length;var G=U[V];var X;if(G===0){var M=g[V];X=[M]}for(var p=0;p<q;++p){var W=H[p];if(U[W]>=0){continue}U[W]=G^1;j.push(W);if(G===0){var M=g[W];if(!N(M)){M.reverse();X.push(M)}}}if(G===0){r.push(X)}}return r}},{"./lib/trim-leaves":234,"edges-to-adjacency-list":94,"planar-dual":233,"point-in-big-polygon":239,"robust-sum":268,"two-product":289,uniq:293}],236:[function(e,t,r){"use strict";t.exports=e("./quad")},{"./quad":238}],237:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{dup:58}],238:[function(e,t,r){"use strict";var n=e("binary-search-bounds");var a=e("clamp");var i=e("parse-rect");var o=e("array-bounds");var s=e("pick-by-alias");var l=e("defined");var u=e("flatten-vertex-data");var f=e("is-obj");var c=e("dtype");var h=e("math-log2");t.exports=function e(t,r){if(!r){r={}}t=u(t,"float64");r=s(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var a=l(r.maxDepth,255);var v=l(r.bounds,o(t,2));if(v[0]===v[2]){v[2]++}if(v[1]===v[3]){v[3]++}var p=d(t,v);var g=t.length>>>1;var m;if(!r.dtype){r.dtype="array"}if(typeof r.dtype==="string"){m=new(c(r.dtype))(g)}else if(r.dtype){m=r.dtype;if(Array.isArray(m)){m.length=g}}for(var y=0;y<g;++y){m[y]=y}var b=[];var x=[];var _=[];var w=[];S(0,0,1,m,0,1);var A=0;for(var k=0;k<b.length;k++){var T=b[k];if(m.set){m.set(T,A)}else{for(var M=0,E=T.length;M<E;M++){m[M+A]=T[M]}}var C=A+b[k].length;w[k]=[A,C];A=C}m.range=L;return m;function S(e,t,r,n,i,o){if(!n.length){return null}var s=b[i]||(b[i]=[]);var l=_[i]||(_[i]=[]);var u=x[i]||(x[i]=[]);var f=s.length;i++;if(i>a){for(var c=0;c<n.length;c++){s.push(n[c]);l.push(o);u.push(null,null,null,null)}return f}s.push(n[0]);l.push(o);if(n.length<=1){u.push(null,null,null,null);return f}var h=r*.5;var d=e+h,v=t+h;var g=[],m=[],y=[],w=[];for(var A=1,k=n.length;A<k;A++){var T=n[A],M=p[T*2],E=p[T*2+1];M<d?E<v?g.push(T):m.push(T):E<v?y.push(T):w.push(T)}o<<=2;u.push(S(e,t,h,g,i,o),S(e,v,h,m,i,o+1),S(d,t,h,y,i,o+2),S(d,v,h,w,i,o+3));return f}function L(){var e=[],r=arguments.length;while(r--)e[r]=arguments[r];var n;if(f(e[e.length-1])){var a=e.pop();if(!e.length&&(a.x!=null||a.l!=null||a.left!=null)){e=[a];n={}}n=s(a,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else{n={}}if(!e.length){e=v}var o=i.apply(void 0,e);var u=[Math.min(o.x,o.x+o.width),Math.min(o.y,o.y+o.height),Math.max(o.x,o.x+o.width),Math.max(o.y,o.y+o.height)];var c=u[0];var p=u[1];var g=u[2];var m=u[3];var y=d([c,p,g,m],v);var _=y[0];var w=y[1];var A=y[2];var k=y[3];var T=l(n.level,b.length);if(n.d!=null){var M;if(typeof n.d==="number"){M=[n.d,n.d]}else if(n.d.length){M=n.d}T=Math.min(Math.max(Math.ceil(-h(Math.abs(M[0])/(v[2]-v[0]))),Math.ceil(-h(Math.abs(M[1])/(v[3]-v[1])))),T)}T=Math.min(T,b.length);if(n.lod){return O(_,w,A,k,T)}var E=[];C(0,0,1,0,0,1);function C(e,r,n,a,i,o){if(i===null||o===null){return}var s=e+n;var l=r+n;if(_>s||w>l||A<e||k<r){return}if(a>=T){return}if(i===o){return}var u=b[a];if(o===undefined){o=u.length}for(var f=i;f<o;f++){var h=u[f];var d=t[h*2];var v=t[h*2+1];if(d>=c&&d<=g&&v>=p&&v<=m){E.push(h)}}var y=x[a];var M=y[i*4+0];var L=y[i*4+1];var O=y[i*4+2];var I=y[i*4+3];var D=S(y,i+1);var R=n*.5;var P=a+1;C(e,r,R,P,M,L||O||I||D);C(e,r+R,R,P,L,O||I||D);C(e+R,r,R,P,O,I||D);C(e+R,r+R,R,P,I,D)}function S(e,t){var r=null,n=0;while(r===null){r=e[t*4+n];n++;if(n>e.length){return null}}return r}return E}function O(e,t,r,a,i){var o=[];for(var s=0;s<i;s++){var l=_[s];var u=w[s][0];var f=I(e,t,s);var c=I(r,a,s);var h=n.ge(l,f);var d=n.gt(l,c,h,l.length-1);o[s]=[h+u,d+u]}return o}function I(e,t,r){var n=1;var a=.5,i=.5;var o=.5;for(var s=0;s<r;s++){n<<=2;n+=e<a?t<i?0:1:t<i?2:3;o*=.5;a+=e<a?-o:o;i+=t<i?-o:o}return n}};function d(e,t){var r=t[0];var n=t[1];var i=t[2];var o=t[3];var s=1/(i-r);var l=1/(o-n);var u=new Array(e.length);for(var f=0,c=e.length/2;f<c;f++){u[2*f]=a((e[2*f]-r)*s,0,1);u[2*f+1]=a((e[2*f+1]-n)*l,0,1)}return u}},{"array-bounds":18,"binary-search-bounds":237,clamp:59,defined:87,dtype:91,"flatten-vertex-data":152,"is-obj":210,"math-log2":213,"parse-rect":226,"pick-by-alias":232}],239:[function(e,t,r){t.exports=v;var n=e("robust-orientation")[3];var a=e("slab-decomposition");var i=e("interval-tree-1d");var o=e("binary-search-bounds");function s(){return true}function l(e){return function(t,r){var n=e[t];if(n){return!!n.queryPoint(r,s)}return false}}function u(e){var t={};for(var r=0;r<e.length;++r){var n=e[r];var a=n[0][0];var o=n[0][1];var s=n[1][1];var u=[Math.min(o,s),Math.max(o,s)];if(a in t){t[a].push(u)}else{t[a]=[u]}}var f={};var c=Object.keys(t);for(var r=0;r<c.length;++r){var h=t[c[r]];f[c[r]]=i(h)}return l(f)}function f(e,t){return function(r){var a=o.le(t,r[0]);if(a<0){return 1}var i=e[a];if(!i){if(a>0&&t[a]===r[0]){i=e[a-1]}else{return 1}}var s=1;while(i){var l=i.key;var u=n(r,l[0],l[1]);if(l[0][0]<l[1][0]){if(u<0){i=i.left}else if(u>0){s=-1;i=i.right}else{return 0}}else{if(u>0){i=i.left}else if(u<0){s=1;i=i.right}else{return 0}}}return s}}function c(e){return 1}function h(e){return function t(r){if(e(r[0],r[1])){return 0}return 1}}function d(e,t){return function r(n){if(e(n[0],n[1])){return 0}return t(n)}}function v(e){var t=e.length;var r=[];var n=[];var i=0;for(var o=0;o<t;++o){var s=e[o];var l=s.length;for(var v=l-1,p=0;p<l;v=p++){var g=s[v];var m=s[p];if(g[0]===m[0]){n.push([g,m])}else{r.push([g,m])}}}if(r.length===0){if(n.length===0){return c}else{return h(u(n))}}var y=a(r);var b=f(y.slabs,y.coordinates);if(n.length===0){return b}else{return d(u(n),b)}}},{"binary-search-bounds":40,"interval-tree-1d":204,"robust-orientation":263,"slab-decomposition":275}],240:[function(e,t,r){var n=e("./lib/build-log");var a=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var s=e("./lib/segment-selector");var l=e("./lib/geojson");var u=false;var f=a();var c;c={buildLog:function(e){if(e===true)u=n();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return f.epsilon(e)},segments:function(e){var t=i(true,f,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,f,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:s.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:s.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:s.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:s.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:s.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,f,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return l.toPolygon(c,e)},polygonToGeoJSON:function(e){return l.fromPolygon(c,f,e)},union:function(e,t){return h(e,t,c.selectUnion)},intersect:function(e,t){return h(e,t,c.selectIntersect)},difference:function(e,t){return h(e,t,c.selectDifference)},differenceRev:function(e,t){return h(e,t,c.selectDifferenceRev)},xor:function(e,t){return h(e,t,c.selectXor)}};function h(e,t,r){var n=c.segments(e);var a=c.segments(t);var i=c.combine(n,a);var o=r(i);return c.polygon(o)}if(typeof window==="object")window.PolyBool=c;t.exports=c},{"./lib/build-log":241,"./lib/epsilon":242,"./lib/geojson":243,"./lib/intersecter":244,"./lib/segment-chainer":246,"./lib/segment-selector":247}],241:[function(e,t,r){function n(){var e;var t=0;var r=false;function n(t,r){e.list.push({type:t,data:r?JSON.parse(JSON.stringify(r)):void 0});return e}e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){n("div_seg",{seg:e,pt:t});return n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(t){if(t===r)return e;r=t;return n("vert",{x:t})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}};return e}t.exports=n},{}],242:[function(e,t,r){function n(e){if(typeof e!=="number")e=1e-10;var t={epsilon:function(t){if(typeof t==="number")e=t;return e},pointAboveOrOnLine:function(t,r,n){var a=r[0];var i=r[1];var o=n[0];var s=n[1];var l=t[0];var u=t[1];return(o-a)*(u-i)-(s-i)*(l-a)>=-e},pointBetween:function(t,r,n){var a=t[1]-r[1];var i=n[0]-r[0];var o=t[0]-r[0];var s=n[1]-r[1];var l=o*i+a*s;if(l<e)return false;var u=i*i+s*s;if(l-u>-e)return false;return true},pointsSameX:function(t,r){return Math.abs(t[0]-r[0])<e},pointsSameY:function(t,r){return Math.abs(t[1]-r[1])<e},pointsSame:function(e,r){return t.pointsSameX(e,r)&&t.pointsSameY(e,r)},pointsCompare:function(e,r){if(t.pointsSameX(e,r))return t.pointsSameY(e,r)?0:e[1]<r[1]?-1:1;return e[0]<r[0]?-1:1},pointsCollinear:function(t,r,n){var a=t[0]-r[0];var i=t[1]-r[1];var o=r[0]-n[0];var s=r[1]-n[1];return Math.abs(a*s-o*i)<e},linesIntersect:function(t,r,n,a){var i=r[0]-t[0];var o=r[1]-t[1];var s=a[0]-n[0];var l=a[1]-n[1];var u=i*l-o*s;if(Math.abs(u)<e)return false;var f=t[0]-n[0];var c=t[1]-n[1];var h=(s*c-l*f)/u;var d=(i*c-o*f)/u;var v={alongA:0,alongB:0,pt:[t[0]+h*i,t[1]+h*o]};if(h<=-e)v.alongA=-2;else if(h<e)v.alongA=-1;else if(h-1<=-e)v.alongA=0;else if(h-1<e)v.alongA=1;else v.alongA=2;if(d<=-e)v.alongB=-2;else if(d<e)v.alongB=-1;else if(d-1<=-e)v.alongB=0;else if(d-1<e)v.alongB=1;else v.alongB=2;return v},pointInsideRegion:function(t,r){var n=t[0];var a=t[1];var i=r[r.length-1][0];var o=r[r.length-1][1];var s=false;for(var l=0;l<r.length;l++){var u=r[l][0];var f=r[l][1];if(f-a>e!=o-a>e&&(i-u)*(a-f)/(o-f)+u-n>e)s=!s;i=u;o=f}return s}};return t}t.exports=n},{}],243:[function(e,t,r){var n={toPolygon:function(e,t){function r(t){if(t.length<=0)return e.segments({inverted:false,regions:[]});function r(t){var r=t.slice(0,t.length-1);return e.segments({inverted:false,regions:[r]})}var n=r(t[0]);for(var a=1;a<t.length;a++)n=e.selectDifference(e.combine(n,r(t[a])));return n}if(t.type==="Polygon"){return e.polygon(r(t.coordinates))}else if(t.type==="MultiPolygon"){var n=e.segments({inverted:false,regions:[]});for(var a=0;a<t.coordinates.length;a++)n=e.selectUnion(e.combine(n,r(t.coordinates[a])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function n(e,r){return t.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],r)}function a(e){return{region:e,children:[]}}var i=a(null);function o(e,t){for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(t,i.region)){o(i,t);return}}var s=a(t);for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(i.region,t)){s.children.push(i);e.children.splice(r,1);r--}}e.children.push(s)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];if(l.length<3)continue;o(i,l)}function u(e,t){var r=0;var n=e[e.length-1][0];var a=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var s=e[o][0];var l=e[o][1];i.push([s,l]);r+=l*n-s*a;n=s;a=l}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var f=[];function c(e){var t=[u(e.region,false)];f.push(t);for(var r=0;r<e.children.length;r++)t.push(h(e.children[r]))}function h(e){for(var t=0;t<e.children.length;t++)c(e.children[t]);return u(e.region,true)}for(var s=0;s<i.children.length;s++)c(i.children[s]);if(f.length<=0)return{type:"Polygon",coordinates:[]};if(f.length==1)return{type:"Polygon",coordinates:f[0]};return{type:"MultiPolygon",coordinates:f}}};t.exports=n},{}],244:[function(e,t,r){var n=e("./linked-list");function a(e,t,r){function a(e,t){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,n){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var o=n.create();function s(e,r,n,a,i,o){var s=t.pointsCompare(r,i);if(s!==0)return s;if(t.pointsSame(n,o))return 0;if(e!==a)return e?1:-1;return t.pointAboveOrOnLine(n,a?i:o,a?o:i)?1:-1}function l(e,t){o.insertBefore(e,function(r){var n=s(e.isStart,e.pt,t,r.isStart,r.pt,r.other.pt);return n<0})}function u(e,t){var r=n.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});l(r,e.end);return r}function f(e,t,r){var a=n.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=a;l(a,e.pt)}function c(e,t){var r=u(e,t);f(r,e,t);return r}function h(e,t){if(r)r.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;l(e.other,e.pt)}function d(e,t){var r=i(t,e.seg.end,e.seg);h(e,t);return c(r,e.primary)}function v(a,i){var s=n.create();function l(e,r){var n=e.seg.start;var a=e.seg.end;var i=r.seg.start;var o=r.seg.end;if(t.pointsCollinear(n,i,o)){if(t.pointsCollinear(a,i,o))return 1;return t.pointAboveOrOnLine(a,i,o)?1:-1}return t.pointAboveOrOnLine(n,i,o)?1:-1}function u(e){return s.findTransition(function(t){var r=l(e,t.ev);return r>0})}function f(e,n){var a=e.seg;var i=n.seg;var o=a.start;var s=a.end;var l=i.start;var u=i.end;if(r)r.checkIntersection(a,i);var f=t.linesIntersect(o,s,l,u);if(f===false){if(!t.pointsCollinear(o,s,l))return false;if(t.pointsSame(o,u)||t.pointsSame(s,l))return false;var c=t.pointsSame(o,l);var h=t.pointsSame(s,u);if(c&&h)return n;var v=!c&&t.pointBetween(o,l,u);var p=!h&&t.pointBetween(s,l,u);if(c){if(p){d(n,s)}else{d(e,u)}return n}else if(v){if(!h){if(p){d(n,s)}else{d(e,u)}}d(n,o)}}else{if(f.alongA===0){if(f.alongB===-1)d(e,l);else if(f.alongB===0)d(e,f.pt);else if(f.alongB===1)d(e,u)}if(f.alongB===0){if(f.alongA===-1)d(n,o);else if(f.alongA===0)d(n,f.pt);else if(f.alongA===1)d(n,s)}}return false}var c=[];while(!o.isEmpty()){var h=o.getHead();if(r)r.vert(h.pt[0]);if(h.isStart){if(r)r.segmentNew(h.seg,h.primary);var v=u(h);var p=v.before?v.before.ev:null;var g=v.after?v.after.ev:null;if(r){r.tempStatus(h.seg,p?p.seg:false,g?g.seg:false)}function m(){if(p){var e=f(h,p);if(e)return e}if(g)return f(h,g);return false}var y=m();if(y){if(e){var b;if(h.seg.myFill.below===null)b=true;else b=h.seg.myFill.above!==h.seg.myFill.below;if(b)y.seg.myFill.above=!y.seg.myFill.above}else{y.seg.otherFill=h.seg.myFill}if(r)r.segmentUpdate(y.seg);h.other.remove();h.remove()}if(o.getHead()!==h){if(r)r.rewind(h.seg);continue}if(e){var b;if(h.seg.myFill.below===null)b=true;else b=h.seg.myFill.above!==h.seg.myFill.below;if(!g){h.seg.myFill.below=a}else{h.seg.myFill.below=g.seg.myFill.above}if(b)h.seg.myFill.above=!h.seg.myFill.below;else h.seg.myFill.above=h.seg.myFill.below}else{if(h.seg.otherFill===null){var x;if(!g){x=h.primary?i:a}else{if(h.primary===g.primary)x=g.seg.otherFill.above;else x=g.seg.myFill.above}h.seg.otherFill={above:x,below:x}}}if(r){r.status(h.seg,p?p.seg:false,g?g.seg:false)}h.other.status=v.insert(n.node({ev:h}))}else{var _=h.status;if(_===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(s.exists(_.prev)&&s.exists(_.next))f(_.prev.ev,_.next.ev);if(r)r.statusRemove(_.ev.seg);_.remove();if(!h.primary){var w=h.seg.myFill;h.seg.myFill=h.seg.otherFill;h.seg.otherFill=w}c.push(h.seg)}o.getHead().remove()}if(r)r.done();return c}if(!e){return{calculate:function(e,t,r,n){e.forEach(function(e){c(i(e.start,e.end,e),true)});r.forEach(function(e){c(i(e.start,e.end,e),false)});return v(t,n)}}}return{addRegion:function(e){var r;var n=e[e.length-1];for(var i=0;i<e.length;i++){r=n;n=e[i];var o=t.pointsCompare(r,n);if(o===0)continue;c(a(o<0?r:n,o<0?n:r),true)}},calculate:function(e){return v(e,false)}}}t.exports=a},{"./linked-list":245}],245:[function(e,t,r){var n={create:function(){var e={root:{root:true,next:null},exists:function(t){if(t===null||t===e.root)return false;return true},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){var n=e.root;var a=e.root.next;while(a!==null){if(r(a)){t.prev=a.prev;t.next=a;a.prev.next=t;a.prev=t;return}n=a;a=a.next}n.next=t;t.prev=n;t.next=null},findTransition:function(t){var r=e.root;var n=e.root.next;while(n!==null){if(t(n))break;r=n;n=n.next}return{before:r===e.root?null:r,after:n,insert:function(e){e.prev=r;e.next=n;r.next=e;if(n!==null)n.prev=e;return e}}}};return e},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=n},{}],246:[function(e,t,r){function n(e,t,r){var n=[];var a=[];e.forEach(function(e){var i=e.start;var o=e.end;if(t.pointsSame(i,o)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(r)r.chainStart(e);var s={index:0,matches_head:false,matches_pt1:false};var l={index:0,matches_head:false,matches_pt1:false};var u=s;function f(e,t,r){u.index=e;u.matches_head=t;u.matches_pt1=r;if(u===s){u=l;return false}u=null;return true}for(var c=0;c<n.length;c++){var h=n[c];var d=h[0];var v=h[1];var p=h[h.length-1];var g=h[h.length-2];if(t.pointsSame(d,i)){if(f(c,true,true))break}else if(t.pointsSame(d,o)){if(f(c,true,false))break}else if(t.pointsSame(p,i)){if(f(c,false,true))break}else if(t.pointsSame(p,o)){if(f(c,false,false))break}}if(u===s){n.push([i,o]);if(r)r.chainNew(i,o);return}if(u===l){if(r)r.chainMatch(s.index);var m=s.index;var y=s.matches_pt1?o:i;var b=s.matches_head;var h=n[m];var x=b?h[0]:h[h.length-1];var _=b?h[1]:h[h.length-2];var w=b?h[h.length-1]:h[0];var A=b?h[h.length-2]:h[1];if(t.pointsCollinear(_,x,y)){if(b){if(r)r.chainRemoveHead(s.index,y);h.shift()}else{if(r)r.chainRemoveTail(s.index,y);h.pop()}x=_}if(t.pointsSame(w,y)){n.splice(m,1);if(t.pointsCollinear(A,w,x)){if(b){if(r)r.chainRemoveTail(s.index,x);h.pop()}else{if(r)r.chainRemoveHead(s.index,x);h.shift()}}if(r)r.chainClose(s.index);a.push(h);return}if(b){if(r)r.chainAddHead(s.index,y);h.unshift(y)}else{if(r)r.chainAddTail(s.index,y);h.push(y)}return}function k(e){if(r)r.chainReverse(e);n[e].reverse()}function T(e,a){var i=n[e];var o=n[a];var s=i[i.length-1];var l=i[i.length-2];var u=o[0];var f=o[1];if(t.pointsCollinear(l,s,u)){if(r)r.chainRemoveTail(e,s);i.pop();s=l}if(t.pointsCollinear(s,u,f)){if(r)r.chainRemoveHead(a,u);o.shift()}if(r)r.chainJoin(e,a);n[e]=i.concat(o);n.splice(a,1)}var M=s.index;var E=l.index;if(r)r.chainConnect(M,E);var C=n[M].length<n[E].length;if(s.matches_head){if(l.matches_head){if(C){k(M);T(M,E)}else{k(E);T(E,M)}}else{T(E,M)}}else{if(l.matches_head){T(M,E)}else{if(C){k(M);T(E,M)}else{k(E);T(M,E)}}}});return a}t.exports=n},{}],247:[function(e,t,r){function n(e,t,r){var n=[];e.forEach(function(e){var a=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(t[a]!==0){n.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}});if(r)r.selected(n);return n}var a={union:function(e,t){return n(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return n(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return n(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return n(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return n(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],248:[function(e,t,r){var n=t.exports={};var a;var i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){a=setTimeout}else{a=o}}catch(e){a=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=s}}catch(e){i=s}})();function l(e){if(a===setTimeout){return setTimeout(e,0)}if((a===o||!a)&&setTimeout){a=setTimeout;return setTimeout(e,0)}try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}function u(e){if(i===clearTimeout){return clearTimeout(e)}if((i===s||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var f=[];var c=false;var h;var d=-1;function v(){if(!c||!h){return}c=false;if(h.length){f=h.concat(f)}else{d=-1}if(f.length){p()}}function p(){if(c){return}var e=l(v);c=true;var t=f.length;while(t){h=f;f=[];while(++d<t){if(h){h[d].run()}}d=-1;t=f.length}h=null;c=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}f.push(new g(e,t));if(f.length===1&&!c){l(p)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function m(){}n.on=m;n.addListener=m;n.once=m;n.off=m;n.removeListener=m;n.removeAllListeners=m;n.emit=m;n.prependListener=m;n.prependOnceListener=m;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],249:[function(e,t,r){(function(r){var n=e("performance-now"),a=typeof window==="undefined"?r:window,i=["moz","webkit"],o="AnimationFrame",s=a["request"+o],l=a["cancel"+o]||a["cancelRequest"+o];for(var u=0;!s&&u<i.length;u++){s=a[i[u]+"Request"+o];l=a[i[u]+"Cancel"+o]||a[i[u]+"CancelRequest"+o]}if(!s||!l){var f=0,c=0,h=[],d=1e3/60;s=function(e){if(h.length===0){var t=n(),r=Math.max(0,d-(t-f));f=r+t;setTimeout(function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++){if(!e[t].cancelled){try{e[t].callback(f)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(r))}h.push({handle:++c,callback:e,cancelled:false});return c};l=function(e){for(var t=0;t<h.length;t++){if(h[t].handle===e){h[t].cancelled=true}}}}t.exports=function(e){return s.call(a,e)};t.exports.cancel=function(){l.apply(a,arguments)};t.exports.polyfill=function(e){if(!e){e=a}e.requestAnimationFrame=s;e.cancelAnimationFrame=l}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":229}],250:[function(e,t,r){"use strict";var n=e("big-rat/add");t.exports=a;function a(e,t){var r=e.length;var a=new Array(r);for(var i=0;i<r;++i){a[i]=n(e[i],t[i])}return a}},{"big-rat/add":24}],251:[function(e,t,r){"use strict";t.exports=a;var n=e("big-rat");function a(e){var t=new Array(e.length);for(var r=0;r<e.length;++r){t[r]=n(e[r])}return t}},{"big-rat":27}],252:[function(e,t,r){"use strict";var n=e("big-rat");var a=e("big-rat/mul");t.exports=i;function i(e,t){var r=n(t);var i=e.length;var o=new Array(i);for(var s=0;s<i;++s){o[s]=a(e[s],r)}return o}},{"big-rat":27,"big-rat/mul":36}],253:[function(e,t,r){"use strict";var n=e("big-rat/sub");t.exports=a;function a(e,t){var r=e.length;var a=new Array(r);for(var i=0;i<r;++i){a[i]=n(e[i],t[i])}return a}},{"big-rat/sub":38}],254:[function(e,t,r){"use strict";var n=e("array-bounds");var a=e("color-normalize");var i=e("update-diff");var o=e("pick-by-alias");var s=e("object-assign");var l=e("flatten-vertex-data");var u=e("to-float32");var f=u.float32;var c=u.fract32;t.exports=d;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function d(e,t){if(typeof e==="function"){if(!t){t={}}t.regl=e}else{t=e}if(t.length){t.positions=t}e=t.regl;if(!e.hasExtension("ANGLE_instanced_arrays")){throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled")}var r=e._gl,u,d,v,p,g,m,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},b=[];p=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});d=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});v=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});g=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});m=e.buffer({usage:"static",type:"float",data:h});A(t);u=e({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:p,offset:function(e,t){return t.offset*4},divisor:1},position:{buffer:d,offset:function(e,t){return t.offset*8},divisor:1},positionFract:{buffer:v,offset:function(e,t){return t.offset*8},divisor:1},error:{buffer:g,offset:function(e,t){return t.offset*16},divisor:1},direction:{buffer:m,stride:24,offset:0},lineOffset:{buffer:m,stride:24,offset:8},capOffset:{buffer:m,stride:24,offset:16}},primitive:"triangles",blend:{enable:true,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:false},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:false,instances:e.prop("count"),count:h.length});s(x,{update:A,draw:_,destroy:k,regl:e,gl:r,canvas:r.canvas,groups:b});return x;function x(e){if(e){A(e)}else if(e===null){k()}_()}function _(t){if(typeof t==="number"){return w(t)}if(t&&!Array.isArray(t)){t=[t]}e._refresh();b.forEach(function(e,r){if(!e){return}if(t){if(!t[r]){e.draw=false}else{e.draw=true}}if(!e.draw){e.draw=true;return}w(r)})}function w(e){if(typeof e==="number"){e=b[e]}if(e==null){return}if(!(e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1)){return}e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height];u(e);if(e.after){e.after(e)}}function A(e){if(!e){return}if(e.length!=null){if(typeof e[0]==="number"){e=[{positions:e}]}}else if(!Array.isArray(e)){e=[e]}var t=0,u=0;x.groups=b=e.map(function(e,f){var h=b[f];if(!e){return h}else if(typeof e==="function"){e={after:e}}else if(typeof e[0]==="number"){e={positions:e}}e=o(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});if(!h){b[f]=h={id:f,scale:null,translate:null,scaleFract:null,translateFract:null,draw:true};e=s({},y,e)}i(h,e,[{lineWidth:function(e){return+e*.5},capSize:function(e){return+e*.5},opacity:parseFloat,errors:function(e){e=l(e);u+=e.length;return e},positions:function(e,r){e=l(e,"float64");r.count=Math.floor(e.length/2);r.bounds=n(e,2);r.offset=t;t+=r.count;return e}},{color:function(e,t){var r=t.count;if(!e){e="transparent"}if(!Array.isArray(e)||typeof e[0]==="number"){var n=e;e=Array(r);for(var i=0;i<r;i++){e[i]=n}}if(e.length<r){throw Error("Not enough colors")}var o=new Uint8Array(r*4);for(var s=0;s<r;s++){var l=a(e[s],"uint8");o.set(l,s*4)}return o},range:function(e,t,r){var n=t.bounds;if(!e){e=n}t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])];t.translate=[-e[0],-e[1]];t.scaleFract=c(t.scale);t.translateFract=c(t.translate);return e},viewport:function(e){var t;if(Array.isArray(e)){t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}}else if(e){t={x:e.x||e.left||0,y:e.y||e.top||0};if(e.right){t.width=e.right-t.x}else{t.width=e.w||e.width||0}if(e.bottom){t.height=e.bottom-t.y}else{t.height=e.h||e.height||0}}else{t={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight}}return t}}]);return h});if(t||u){var h=b.reduce(function(e,t,r){return e+(t?t.count:0)},0);var m=new Float64Array(h*2);var _=new Uint8Array(h*4);var w=new Float32Array(h*4);b.forEach(function(e,t){if(!e){return}var r=e.positions;var n=e.count;var a=e.offset;var i=e.color;var o=e.errors;if(!n){return}_.set(i,a*4);w.set(o,a*4);m.set(r,a*2)});d(f(m));v(c(m));p(_);g(w)}}function k(){d.destroy();v.destroy();p.destroy();g.destroy();m.destroy()}}},{"array-bounds":18,"color-normalize":64,"flatten-vertex-data":152,"object-assign":223,"pick-by-alias":232,"to-float32":286,"update-diff":295}],255:[function(e,t,r){"use strict";var n=e("color-normalize");var a=e("array-bounds");var i=e("object-assign");var o=e("glslify");var s=e("pick-by-alias");var l=e("flatten-vertex-data");var u=e("earcut");var f=e("array-normalize");var c=e("to-float32");var h=c.float32;var d=c.fract32;var v=e("es6-weak-map");var p=e("parse-rect");t.exports=g;function g(e,t){if(!(this instanceof g)){return new g(e,t)}if(typeof e==="function"){if(!t){t={}}t.regl=e}else{t=e}if(t.length){t.positions=t}e=t.regl;if(!e.hasExtension("ANGLE_instanced_arrays")){throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled")}this.gl=e._gl;this.regl=e;this.passes=[];this.shaders=g.shaders.has(e)?g.shaders.get(e):g.shaders.set(e,g.createShaders(e)).get(e);this.update(t)}g.dashMult=2;g.maxPatternLength=256;g.precisionThreshold=3e6;g.maxPoints=1e4;g.maxLines=2048;g.shaders=new v;g.createShaders=function(e){var t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]});var r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return t.join==="round"?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashPattern:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashSize:e.prop("dashLength"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]},depth:e.prop("depth")},blend:{enable:true,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},stencil:{enable:false},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport")};var n=e(i({vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r));var a;try{a=e(i({cull:{enable:true,face:"back"},vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n\t// adjust scale for horizontal bars\n\tvec2 scale = max(scale, MIN_DIFF);\n\tvec2 scaleRatio = scale * viewport.zw;\n\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * scale + translate;\n\tvec2 aBotPosition = (aBotCoord) * scale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * scale + translate;\n\tvec2 bBotPosition = (bBotCoord) * scale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(e){a=n}var s=e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:o(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:false},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport});return{fill:s,rect:n,miter:a}};g.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:false,viewport:null,range:null,close:false,fill:null};g.prototype.render=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e.length){(r=this).update.apply(r,e)}this.draw();var r};g.prototype.draw=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];(t.length?t:this.passes).forEach(function(t,r){if(t&&Array.isArray(t)){return(n=e).draw.apply(n,t)}if(typeof t==="number"){t=e.passes[t]}if(!(t&&t.count>1&&t.opacity)){return}e.regl._refresh();if(t.fill&&t.triangles&&t.triangles.length>2){e.shaders.fill(t)}if(!t.thickness){return}if(t.scale[0]*t.viewport.width>g.precisionThreshold||t.scale[1]*t.viewport.height>g.precisionThreshold){e.shaders.rect(t)}else if(t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=g.maxPoints)){e.shaders.rect(t)}else{e.shaders.miter(t)}var n});return this};g.prototype.update=function(e){var t=this;if(!e){return}if(e.length!=null){if(typeof e[0]==="number"){e=[{positions:e}]}}else if(!Array.isArray(e)){e=[e]}var r=this;var o=r.regl;var c=r.gl;e.forEach(function(e,r){var v=t.passes[r];if(e===undefined){return}if(e===null){t.passes[r]=null;return}if(typeof e[0]==="number"){e={positions:e}}e=s(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});if(!v){t.passes[r]=v={id:r,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})};e=i({},g.defaults,e)}if(e.thickness!=null){v.thickness=parseFloat(e.thickness)}if(e.opacity!=null){v.opacity=parseFloat(e.opacity)}if(e.miterLimit!=null){v.miterLimit=parseFloat(e.miterLimit)}if(e.overlay!=null){v.overlay=!!e.overlay;if(r<g.maxLines){v.depth=2*(g.maxLines-1-r%g.maxLines)/g.maxLines-1}}if(e.join!=null){v.join=e.join}if(e.hole!=null){v.hole=e.hole}if(e.fill!=null){v.fill=!e.fill?null:n(e.fill,"uint8")}if(e.viewport!=null){v.viewport=p(e.viewport)}if(!v.viewport){v.viewport=p([c.drawingBufferWidth,c.drawingBufferHeight])}if(e.close!=null){v.close=e.close}if(e.positions===null){e.positions=[]}if(e.positions){var m,y;if(e.positions.x&&e.positions.y){var b=e.positions.x;var x=e.positions.y;y=v.count=Math.max(b.length,x.length);m=new Float64Array(y*2);for(var _=0;_<y;_++){m[_*2]=b[_];m[_*2+1]=x[_]}}else{m=l(e.positions,"float64");y=v.count=Math.floor(m.length/2)}var w=v.bounds=a(m,2);if(v.fill){var A=[];var k={};var T=0;for(var M=0,E=0,C=v.count;M<C;M++){var S=m[M*2];var L=m[M*2+1];if(isNaN(S)||isNaN(L)||S==null||L==null){S=m[T*2];L=m[T*2+1];k[M]=T}else{T=M}A[E++]=S;A[E++]=L}var O=u(A,v.hole||[]);for(var I=0,D=O.length;I<D;I++){if(k[O[I]]!=null){O[I]=k[O[I]]}}v.triangles=O}var R=new Float64Array(m);f(R,2,w);var P=new Float64Array(y*2+6);if(v.close){if(m[0]===m[y*2-2]&&m[1]===m[y*2-1]){P[0]=R[y*2-4];P[1]=R[y*2-3]}else{P[0]=R[y*2-2];P[1]=R[y*2-1]}}else{P[0]=R[0];P[1]=R[1]}P.set(R,2);if(v.close){if(m[0]===m[y*2-2]&&m[1]===m[y*2-1]){P[y*2+2]=R[2];P[y*2+3]=R[3];v.count-=1}else{P[y*2+2]=R[0];P[y*2+3]=R[1];P[y*2+4]=R[2];P[y*2+5]=R[3]}}else{P[y*2+2]=R[y*2-2];P[y*2+3]=R[y*2-1];P[y*2+4]=R[y*2-2];P[y*2+5]=R[y*2-1]}v.positionBuffer(h(P));v.positionFractBuffer(d(P))}if(e.range){v.range=e.range}else if(!v.range){v.range=v.bounds}if((e.range||e.positions)&&v.count){var z=v.bounds;var F=z[2]-z[0],B=z[3]-z[1];var N=v.range[2]-v.range[0],j=v.range[3]-v.range[1];v.scale=[F/N,B/j];v.translate=[-v.range[0]/N+z[0]/N||0,-v.range[1]/j+z[1]/j||0];v.scaleFract=d(v.scale);v.translateFract=d(v.translate)}if(e.dashes){var U=0,V;if(!e.dashes||e.dashes.length<2){U=1;V=new Uint8Array([255,255,255,255,255,255,255,255])}else{U=0;for(var H=0;H<e.dashes.length;++H){U+=e.dashes[H]}V=new Uint8Array(U*g.dashMult);var q=0;var G=255;for(var X=0;X<2;X++){for(var W=0;W<e.dashes.length;++W){for(var Y=0,Z=e.dashes[W]*g.dashMult*.5;Y<Z;++Y){V[q++]=G}G^=255}}}v.dashLength=U;v.dashTexture({channels:1,data:V,width:V.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){var J=v.count;var Q=e.color;if(!Q){Q="transparent"}var $=new Uint8Array(J*4+4);if(!Array.isArray(Q)||typeof Q[0]==="number"){var K=n(Q,"uint8");for(var ee=0;ee<J+1;ee++){$.set(K,ee*4)}}else{for(var te=0;te<J;te++){var re=n(Q[te],"uint8");$.set(re,te*4)}$.set(n(Q[0],"uint8"),J*4)}v.colorBuffer({usage:"dynamic",type:"uint8",data:$})}});if(e.length<this.passes.length){for(var v=e.length;v<this.passes.length;v++){var m=t.passes[v];if(!m){continue}m.colorBuffer.destroy();m.positionBuffer.destroy();m.dashTexture.destroy()}this.passes.length=e.length}this.passes=this.passes.filter(Boolean);return this};g.prototype.destroy=function(){this.passes.forEach(function(e){e.colorBuffer.destroy();e.positionBuffer.destroy();e.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":18,"array-normalize":19,"color-normalize":64,earcut:93,"es6-weak-map":146,"flatten-vertex-data":152,glslify:200,"object-assign":223,"parse-rect":226,"pick-by-alias":232,"to-float32":286}],256:[function(e,t,r){"use strict";var n=e("./scatter");var a=e("object-assign");t.exports=function(e,t){var r=new n(e,t);var i=r.render.bind(r);a(i,{render:i,update:r.update.bind(r),draw:r.draw.bind(r),destroy:r.destroy.bind(r),regl:r.regl,gl:r.gl,canvas:r.gl.canvas,groups:r.groups,markers:r.markerCache,palette:r.palette});return i}},{"./scatter":257,"object-assign":223}],257:[function(e,t,r){"use strict";var n=e("color-normalize");var a=e("array-bounds");var i=e("color-id");var o=e("point-cluster");var s=e("object-assign");var l=e("glslify");var u=e("pick-by-alias");var f=e("update-diff");var c=e("flatten-vertex-data");var h=e("is-iexplorer");var d=e("to-float32");var v=d.float32;var p=d.fract32;var g=e("parse-rect");t.exports=m;function m(e,t){var r=this;if(!(this instanceof m)){return new m(e,t)}if(typeof e==="function"){if(!t){t={}}t.regl=e}else{t=e;e=null}if(t&&t.length){t.positions=t}e=t.regl;var n=e._gl,a,i=[],o={},u=[],f=[null],c=[null];var d=255,v=100;this.tooManyColors=h;a=e.texture({data:new Uint8Array(d*4),width:d,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});s(this,{regl:e,gl:n,groups:u,markerCache:c,markerTextures:f,palette:i,paletteIds:o,paletteTexture:a,maxColors:d,maxSize:v,canvas:n.canvas});this.update(t);var p={uniforms:{pixelRatio:e.context("pixelRatio"),palette:a,paletteSize:function(e,t){return[r.tooManyColors?0:d,a.height]},scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),opacity:e.prop("opacity"),marker:e.prop("markerTexture")},attributes:{x:function(e,t){return t.xAttr||{buffer:t.positionBuffer,stride:8,offset:0}},y:function(e,t){return t.yAttr||{buffer:t.positionBuffer,stride:8,offset:4}},xFract:function(e,t){return t.xAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:0}},yFract:function(e,t){return t.yAttr?{constant:[0,0]}:{buffer:t.positionFractBuffer,stride:8,offset:4}},size:function(e,t){return t.size.length?{buffer:t.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(t.size*255/r.maxSize)]}},borderSize:function(e,t){return t.borderSize.length?{buffer:t.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(t.borderSize*255/r.maxSize)]}},colorId:function(e,t){return t.color.length?{buffer:t.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?i.slice(t.color*4,t.color*4+4):[t.color]}},borderColorId:function(e,t){return t.borderColor.length?{buffer:t.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?i.slice(t.borderColor*4,t.borderColor*4+4):[t.borderColor]}},isActive:function(e,t){return t.activation===true?{constant:[1]}:t.activation?t.activation:{constant:[0]}}},blend:{enable:true,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:true,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:false},depth:{enable:false},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"};var g=s({},p);g.frag=l(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n    return;\n  }\n\n  float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n  float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n  vec4 color = fragBorderColor;\n  color.a *= borderColorAmt;\n  color = mix(color, fragColor, colorAmt);\n  color.a *= opacity;\n\n  gl_FragColor = color;\n}\n"]);g.vert=l(["precision mediump float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n    fragWidth, fragBorderColorLevel, fragColorLevel;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]);try{this.drawMarker=e(g)}catch(e){}var y=s({},p);y.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]);y.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]);if(h){y.frag=y.frag.replace("smoothstep","smoothStep")}this.drawCircle=e(y)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:undefined,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};m.prototype.render=function(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(e.length){(r=this).update.apply(r,e)}this.draw();return this;var r};m.prototype.draw=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];var n=this;var a=n.groups;if(t.length===1&&Array.isArray(t[0])&&(t[0][0]===null||Array.isArray(t[0][0]))){t=t[0]}this.regl._refresh();if(t.length){for(var i=0;i<t.length;i++){e.drawItem(i,t[i])}}else{a.forEach(function(t,r){e.drawItem(r)})}return this};m.prototype.drawItem=function(e,t){var r=this;var n=this;var a=n.groups;var i=a[e];if(typeof t==="number"){e=t;i=a[t];t=null}if(!(i&&i.count&&i.opacity)){return}if(i.activation[0]){this.drawCircle(this.getMarkerDrawOptions(0,i,t))}var o=[];for(var s=1;s<i.activation.length;s++){if(!i.activation[s]||i.activation[s]!==true&&!i.activation[s].data.length){continue}o.push.apply(o,r.getMarkerDrawOptions(s,i,t))}if(o.length){this.drawMarker(o)}};m.prototype.getMarkerDrawOptions=function(e,t,r){var n=this;var a=t.range;var i=t.tree;var o=t.viewport;var l=t.activation;var u=t.selectionBuffer;var f=t.count;var c=this;var h=c.regl;if(!i){if(r){return[s({},t,{markerTexture:this.markerTextures[e],activation:l[e],count:r.length,elements:r,offset:0})]}return[s({},t,{markerTexture:this.markerTextures[e],activation:l[e],offset:0})]}var d=[];var v=i.range(a,{lod:true,px:[(a[2]-a[0])/o.width,(a[3]-a[1])/o.height]});if(r){var p=l[e];var g=p.data;var m=new Uint8Array(f);for(var y=0;y<r.length;y++){var b=r[y];m[b]=g?g[b]:1}u.subdata(m)}for(var x=v.length;x--;){var _=v[x];var w=_[0];var A=_[1];d.push(s({},t,{markerTexture:n.markerTextures[e],activation:r?u:l[e],offset:w,count:A-w}))}return d};m.prototype.update=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(!t.length){return}if(t.length===1&&Array.isArray(t[0])){t=t[0]}var n=this;var i=n.groups;var l=n.gl;var h=n.regl;var d=n.maxSize;var y=n.maxColors;var b=n.palette;this.groups=i=t.map(function(t,r){var n=i[r];if(t===undefined){return n}if(t===null){t={positions:null}}else if(typeof t==="function"){t={ondraw:t}}else if(typeof t[0]==="number"){t={positions:t}}t=u(t,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits"});if(t.positions===null){t.positions=[]}if(!n){i[r]=n={id:r,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:h.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:h.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:h.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:h.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:h.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})};t=s({},m.defaults,t)}if(t.positions&&!("marker"in t)){t.marker=n.marker;delete n.marker}if(t.marker&&!("positions"in t)){t.positions=n.positions;delete n.positions}var x=0,_=0;f(n,t,[{snap:true,size:function(e,t){if(e==null){e=m.defaults.size}x+=e&&e.length?1:0;return e},borderSize:function(e,t){if(e==null){e=m.defaults.borderSize}x+=e&&e.length?1:0;return e},opacity:parseFloat,color:function(t,r){if(t==null){t=m.defaults.color}t=e.updateColor(t);_++;return t},borderColor:function(t,r){if(t==null){t=m.defaults.borderColor}t=e.updateColor(t);_++;return t},bounds:function(e,t,r){if(!("range"in r)){r.range=null}return e},positions:function(e,t,r){var n=t.snap;var i=t.positionBuffer;var s=t.positionFractBuffer;var l=t.selectionBuffer;if(e.x||e.y){if(e.x.length){t.xAttr={buffer:h.buffer(e.x),offset:0,stride:4,count:e.x.length}}else{t.xAttr={buffer:e.x.buffer,offset:e.x.offset*4||0,stride:(e.x.stride||1)*4,count:e.x.count}}if(e.y.length){t.yAttr={buffer:h.buffer(e.y),offset:0,stride:4,count:e.y.length}}else{t.yAttr={buffer:e.y.buffer,offset:e.y.offset*4||0,stride:(e.y.stride||1)*4,count:e.y.count}}t.count=Math.max(t.xAttr.count,t.yAttr.count);return e}e=c(e,"float64");var u=t.count=Math.floor(e.length/2);var f=t.bounds=u?a(e,2):null;if(!r.range&&!t.range){delete t.range;r.range=f}if(!r.marker&&!t.marker){delete t.marker;r.marker=null}if(n&&(n===true||u>n)){t.tree=o(e,{bounds:f})}else if(n&&n.length){t.tree=n}if(t.tree){var d={primitive:"points",usage:"static",data:t.tree,type:"uint32"};if(t.elements){t.elements(d)}else{t.elements=h.elements(d)}}i({data:v(e),usage:"dynamic"});s({data:p(e),usage:"dynamic"});l({data:new Uint8Array(u),type:"uint8",usage:"stream"});return e}},{marker:function(t,r,n){var a=r.activation;a.forEach(function(e){return e&&e.destroy&&e.destroy()});a.length=0;if(!t||typeof t[0]==="number"){var i=e.addMarker(t);a[i]=true}else{var o=[];for(var s=0,l=Math.min(t.length,r.count);s<l;s++){var u=e.addMarker(t[s]);if(!o[u]){o[u]=new Uint8Array(r.count)}o[u][s]=1}for(var f=0;f<o.length;f++){if(!o[f]){continue}var c={data:o[f],type:"uint8",usage:"static"};if(!a[f]){a[f]=h.buffer(c)}else{a[f](c)}a[f].data=o[f]}}return t},range:function(e,t,r){var n=t.bounds;if(!n){return}if(!e){e=n}t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])];t.translate=[-e[0],-e[1]];t.scaleFract=p(t.scale);t.translateFract=p(t.translate);return e},viewport:function(e){var t=g(e||[l.drawingBufferWidth,l.drawingBufferHeight]);return t}}]);if(x){var w=n.count;var A=n.size;var k=n.borderSize;var T=n.sizeBuffer;var M=new Uint8Array(w*2);if(A.length||k.length){for(var E=0;E<w;E++){M[E*2]=Math.round((A[E]==null?A:A[E])*255/d);M[E*2+1]=Math.round((k[E]==null?k:k[E])*255/d)}}T({data:M,usage:"dynamic"})}if(_){var C=n.count;var S=n.color;var L=n.borderColor;var O=n.colorBuffer;var I;if(e.tooManyColors){if(S.length||L.length){I=new Uint8Array(C*8);for(var D=0;D<C;D++){var R=S[D];I[D*8]=b[R*4];I[D*8+1]=b[R*4+1];I[D*8+2]=b[R*4+2];I[D*8+3]=b[R*4+3];var P=L[D];I[D*8+4]=b[P*4];I[D*8+5]=b[P*4+1];I[D*8+6]=b[P*4+2];I[D*8+7]=b[P*4+3]}}}else{if(S.length||L.length){I=new Uint8Array(C*4+2);for(var z=0;z<C;z++){if(S[z]!=null){I[z*4]=S[z]%y;I[z*4+1]=Math.floor(S[z]/y)}if(L[z]!=null){I[z*4+2]=L[z]%y;I[z*4+3]=Math.floor(L[z]/y)}}}}O({data:I||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return n})};m.prototype.addMarker=function(e){var t=this;var r=t.markerTextures;var n=t.regl;var a=t.markerCache;var i=e==null?0:a.indexOf(e);if(i>=0){return i}var o;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray){o=e}else{o=new Uint8Array(e.length);for(var s=0,l=e.length;s<l;s++){o[s]=e[s]*255}}var u=Math.floor(Math.sqrt(o.length));i=r.length;a.push(e);r.push(n.texture({channels:1,data:o,radius:u,mag:"linear",min:"linear"}));return i};m.prototype.updateColor=function(e){var t=this;var r=t.paletteIds;var a=t.palette;var o=t.maxColors;if(!Array.isArray(e)){e=[e]}var s=[];if(typeof e[0]==="number"){var l=[];if(Array.isArray(e)){for(var u=0;u<e.length;u+=4){l.push(e.slice(u,u+4))}}else{for(var f=0;f<e.length;f+=4){l.push(e.subarray(f,f+4))}}e=l}for(var c=0;c<e.length;c++){var h=e[c];h=n(h,"uint8");var d=i(h,false);if(r[d]==null){var v=a.length;r[d]=Math.floor(v/4);a[v]=h[0];a[v+1]=h[1];a[v+2]=h[2];a[v+3]=h[3]}s[c]=r[d]}if(!this.tooManyColors&&a.length>o*o*4){this.tooManyColors=true}this.updatePalette(a);return s.length===1?s[0]:s};m.prototype.updatePalette=function(e){if(this.tooManyColors){return}var t=this;var r=t.maxColors;var n=t.paletteTexture;var a=Math.ceil(e.length*.25/r);if(a>1){e=e.slice();for(var i=e.length*.25%r;i<a*r;i++){e.push(0,0,0,0)}}if(n.height<a){n.resize(r,a)}n.subimage({width:Math.min(e.length*.25,r),height:a,data:e},0,0)};m.prototype.destroy=function(){this.groups.forEach(function(e){e.sizeBuffer.destroy();e.positionBuffer.destroy();e.positionFractBuffer.destroy();e.colorBuffer.destroy();e.activation.forEach(function(e){return e&&e.destroy&&e.destroy()});e.selectionBuffer.destroy();if(e.elements){e.elements.destroy()}});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()});return this}},{"array-bounds":18,"color-id":62,"color-normalize":64,"flatten-vertex-data":152,glslify:200,"is-iexplorer":209,"object-assign":223,"parse-rect":226,"pick-by-alias":232,"point-cluster":236,"to-float32":286,"update-diff":295}],258:[function(e,t,r){"use strict";var n=e("regl-scatter2d/scatter");var a=e("pick-by-alias");var i=e("array-bounds");var o=e("raf");var s=e("array-range");var l=e("parse-rect");var u=e("flatten-vertex-data");t.exports=f;function f(e,t){if(!(this instanceof f)){return new f(e,t)}this.traces=[];this.passes={};this.regl=e;this.scatter=n(e);this.canvas=this.scatter.canvas}f.prototype.render=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(t.length){(n=this).update.apply(n,t)}if(this.regl.attributes.preserveDrawingBuffer){return this.draw()}if(this.dirty){if(this.planned==null){this.planned=o(function(){e.draw();e.dirty=true;e.planned=null})}}else{this.draw();this.dirty=true;o(function(){e.dirty=false})}return this;var n};f.prototype.update=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(!t.length){return}for(var n=0;n<t.length;n++){e.updateItem(n,t[n])}this.traces=this.traces.filter(Boolean);var a=[];var i=0;for(var o=0;o<this.traces.length;o++){var s=e.traces[o];var l=e.traces[o].passes;for(var u=0;u<l.length;u++){a.push(e.passes[l[u]])}s.passOffset=i;i+=s.passes.length}(f=this.scatter).update.apply(f,a);return this;var f};f.prototype.updateItem=function(e,t){var r=this;var n=this;var o=n.regl;if(t===null){this.traces[e]=null;return this}if(!t){return this}var s=a(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});var f=this.traces[e]||(this.traces[e]={id:e,buffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([o._gl.drawingBufferWidth,o._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:true,upper:true,lower:true});if(s.color!=null){f.color=s.color}if(s.size!=null){f.size=s.size}if(s.marker!=null){f.marker=s.marker}if(s.borderColor!=null){f.borderColor=s.borderColor}if(s.borderSize!=null){f.borderSize=s.borderSize}if(s.opacity!=null){f.opacity=s.opacity}if(s.viewport){f.viewport=l(s.viewport)}if(s.diagonal!=null){f.diagonal=s.diagonal}if(s.upper!=null){f.upper=s.upper}if(s.lower!=null){f.lower=s.lower}if(s.data){f.buffer(u(s.data));f.columns=s.data.length;f.count=s.data[0].length;f.bounds=[];for(var v=0;v<f.columns;v++){f.bounds[v]=i(s.data[v],1)}}var p;if(s.range){f.range=s.range;p=f.range&&typeof f.range[0]!=="number"}if(s.domain){f.domain=s.domain}var g=false;if(s.padding!=null){if(Array.isArray(s.padding)&&s.padding.length===f.columns&&typeof s.padding[s.padding.length-1]==="number"){f.padding=s.padding.map(d);g=true}else{f.padding=d(s.padding)}}var m=f.columns;var y=f.count;var b=f.viewport.width;var x=f.viewport.height;var _=f.viewport.x;var w=f.viewport.y;var A=b/m;var k=x/m;f.passes=[];for(var T=0;T<m;T++){for(var M=0;M<m;M++){if(!f.diagonal&&M===T){continue}if(!f.upper&&T>M){continue}if(!f.lower&&T<M){continue}var E=c(f.id,T,M);var C=r.passes[E]||(r.passes[E]={});if(s.data){if(s.transpose){C.positions={x:{buffer:f.buffer,offset:M,count:y,stride:m},y:{buffer:f.buffer,offset:T,count:y,stride:m}}}else{C.positions={x:{buffer:f.buffer,offset:M*y,count:y},y:{buffer:f.buffer,offset:T*y,count:y}}}C.bounds=h(f.bounds,T,M)}if(s.domain||s.viewport||s.data){var S=g?h(f.padding,T,M):f.padding;if(f.domain){var L=h(f.domain,T,M);var O=L[0];var I=L[1];var D=L[2];var R=L[3];C.viewport=[_+O*b+S[0],w+I*x+S[1],_+D*b-S[2],w+R*x-S[3]]}else{C.viewport=[_+M*A+A*S[0],w+T*k+k*S[1],_+(M+1)*A-A*S[2],w+(T+1)*k-k*S[3]]}}if(s.color){C.color=f.color}if(s.size){C.size=f.size}if(s.marker){C.marker=f.marker}if(s.borderSize){C.borderSize=f.borderSize}if(s.borderColor){C.borderColor=f.borderColor}if(s.opacity){C.opacity=f.opacity}if(s.range){C.range=p?h(f.range,T,M):f.range||C.bounds}f.passes.push(E)}}return this};f.prototype.draw=function(){var e=this;var t=[],r=arguments.length;while(r--)t[r]=arguments[r];if(!t.length){this.scatter.draw()}else{var n=[];for(var a=0;a<t.length;a++){if(typeof t[a]==="number"){var i=e.traces[t[a]];var o=i.passes;var l=i.passOffset;n.push.apply(n,s(l,l+o.length))}else if(t[a].length){var u=t[a];var f=e.traces[a];var c=f.passes;var h=f.passOffset;c=c.map(function(e,t){n[h+t]=u})}}(d=this.scatter).draw.apply(d,n)}return this;var d};f.prototype.destroy=function(){this.traces.forEach(function(e){if(e.buffer&&e.buffer.destroy){e.buffer.destroy()}});this.traces=null;this.passes=null;this.scatter.destroy();return this};function c(e,t,r){var n=e.id!=null?e.id:e;var a=t;var i=r;var o=n<<16|(a&255)<<8|i&255;return o}function h(e,t,r){var n,a,i,o,s,l,u,f;var c=e[t],h=e[r];if(c.length>2){n=c[0];i=c[2];a=c[1];o=c[3]}else if(c.length){n=a=c[0];i=o=c[1]}else{n=c.x;a=c.y;i=c.x+c.width;o=c.y+c.height}if(h.length>2){s=h[0];u=h[2];l=h[1];f=h[3]}else if(h.length){s=l=h[0];u=f=h[1]}else{s=h.x;l=h.y;u=h.x+h.width;f=h.y+h.height}return[s,a,u,o]}function d(e){if(typeof e==="number"){return[e,e,e,e]}else if(e.length===2){return[e[0],e[1],e[0],e[1]]}else{var t=l(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}},{"array-bounds":18,"array-range":20,"flatten-vertex-data":259,"parse-rect":226,"pick-by-alias":232,raf:249,"regl-scatter2d/scatter":257}],259:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{dtype:91,dup:15}],260:[function(t,r,n){(function(t,a){"object"===typeof n&&"undefined"!==typeof r?r.exports=a():"function"===typeof e&&e.amd?e(a):t.createREGL=a()})(this,function(){function e(e,t){this.id=Y++;this.type=e;this.data=t}function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&r===n&&('"'===r||"'"===r))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));r=e.split(".");if(1===r.length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];e=[];for(n=0;n<r.length;++n)e=e.concat(t(r[n]));return e}function r(e){return"["+t(e).join("][")+"]"}function n(){var e={"":0},t=[""];return{id:function(r){var n=e[r];if(n)return n;n=e[r]=t.length;t.push(r);return n},str:function(e){return t[e]}}}function a(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;e!==document.body&&(n=e.getBoundingClientRect(),t=n.right-n.left,n=n.bottom-n.top);a.width=r*t;a.height=r*n;W(a.style,{width:t+"px",height:n+"px"})}var a=document.createElement("canvas");W(a.style,{border:0,margin:0,padding:0,top:0,left:0});e.appendChild(a);e===document.body&&(a.style.position="absolute",W(e.style,{margin:0,padding:0}));window.addEventListener("resize",n,!1);n();return{canvas:a,onDestroy:function(){window.removeEventListener("resize",n);e.removeChild(a)}}}function i(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}function o(e){return"string"===typeof e?e.split():e}function s(e){return"string"===typeof e?document.querySelector(e):e}function l(e){var t=e||{},r,n,l,u;e={};var f=[],c=[],h="undefined"===typeof window?1:window.devicePixelRatio,d=!1,v=function(e){},p=function(){};"string"===typeof t?r=document.querySelector(t):"object"===typeof t&&("string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect?r=t:"function"===typeof t.drawArrays||"function"===typeof t.drawElements?(u=t,l=u.canvas):("gl"in t?u=t.gl:"canvas"in t?l=s(t.canvas):"container"in t&&(n=s(t.container)),"attributes"in t&&(e=t.attributes),"extensions"in t&&(f=o(t.extensions)),"optionalExtensions"in t&&(c=o(t.optionalExtensions)),"onDone"in t&&(v=t.onDone),"profile"in t&&(d=!!t.profile),"pixelRatio"in t&&(h=+t.pixelRatio)));r&&("canvas"===r.nodeName.toLowerCase()?l=r:n=r);if(!u){if(!l){r=a(n||document.body,v,h);if(!r)return null;l=r.canvas;p=r.onDestroy}u=i(l,e)}return u?{gl:u,canvas:l,container:n,extensions:f,optionalExtensions:c,pixelRatio:h,profile:d,onDone:v,onDestroy:p}:(p(),v("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function u(e,t){function r(t){t=t.toLowerCase();var r;try{r=n[t]=e.getExtension(t)}catch(e){}return!!r}for(var n={},a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!r(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}t.optionalExtensions.forEach(r);return{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(!r(e))throw Error("(regl): error restoring extension "+e)})}}}function f(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function c(e){var t,r;t=(65535<e)<<4;e>>>=t;r=(255<e)<<3;e>>>=r;t|=r;r=(15<e)<<2;e>>>=r;t|=r;r=(3<e)<<1;return t|r|e>>>r>>1}function h(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}t=r[c(e)>>2];return 0<t.length?t.pop():new ArrayBuffer(e)}function t(e){r[c(e.byteLength)>>2].push(e)}var r=f(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,r){var n=null;switch(t){case 5120:n=new Int8Array(e(r),0,r);break;case 5121:n=new Uint8Array(e(r),0,r);break;case 5122:n=new Int16Array(e(2*r),0,r);break;case 5123:n=new Uint16Array(e(2*r),0,r);break;case 5124:n=new Int32Array(e(4*r),0,r);break;case 5125:n=new Uint32Array(e(4*r),0,r);break;case 5126:n=new Float32Array(e(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){t(e.buffer)}}}function d(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||ee(e.data))}function v(e,t,r,n,a,i){for(var o=0;o<t;++o)for(var s=e[o],l=0;l<r;++l)for(var u=s[l],f=0;f<n;++f)a[i++]=u[f]}function p(e,t,r,n,a){for(var i=1,o=r+1;o<t.length;++o)i*=t[o];var s=t[r];if(4===t.length-r){var l=t[r+1],u=t[r+2];t=t[r+3];for(o=0;o<s;++o)v(e[o],l,u,t,n,a),a+=i}else for(o=0;o<s;++o)p(e[o],t,r+1,n,a),a+=i}function g(e){return ne[Object.prototype.toString.call(e)]|0}function m(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function y(e,t,r,n,a,i,o){for(var s=0,l=0;l<r;++l)for(var u=0;u<n;++u)e[s++]=t[a*l+i*u+o]}function b(e,t,r,n){function a(t){this.id=l++;this.buffer=e.createBuffer();this.type=t;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;r.profile&&(this.stats={size:0})}function i(t,r,n){t.byteLength=r.byteLength;e.bufferData(t.type,r,n)}function o(e,t,r,n,a,o){e.usage=r;if(Array.isArray(t)){if(e.dtype=n||5126,0<t.length)if(Array.isArray(t[0])){a=se(t);for(var s=n=1;s<a.length;++s)n*=a[s];e.dimension=n;t=oe(t,a,e.dtype);i(e,t,r);o?e.persistentData=t:$.freeType(t)}else"number"===typeof t[0]?(e.dimension=a,a=$.allocType(e.dtype,t.length),m(a,t),i(e,a,r),o?e.persistentData=a:$.freeType(a)):ee(t[0])&&(e.dimension=t[0].length,e.dtype=n||g(t[0])||5126,t=oe(t,[t.length,t[0].length],e.dtype),i(e,t,r),o?e.persistentData=t:$.freeType(t))}else if(ee(t))e.dtype=n||g(t),e.dimension=a,i(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(d(t)){a=t.shape;var l=t.stride,s=t.offset,u=0,f=0,c=0,h=0;1===a.length?(u=a[0],f=1,c=l[0],h=0):2===a.length&&(u=a[0],f=a[1],c=l[0],h=l[1]);e.dtype=n||g(t.data)||5126;e.dimension=f;a=$.allocType(e.dtype,u*f);y(a,t.data,u,f,c,h,s);i(e,a,r);o?e.persistentData=a:$.freeType(a)}}function s(r){t.bufferCount--;for(var a=0;a<n.state.length;++a){var i=n.state[a];i.buffer===r&&(e.disableVertexAttribArray(a),i.buffer=null)}e.deleteBuffer(r.buffer);r.buffer=null;delete u[r.id]}var l=0,u={};a.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)};a.prototype.destroy=function(){s(this)};var f=[];r.profile&&(t.getTotalBufferSize=function(){var e=0;Object.keys(u).forEach(function(t){e+=u[t].stats.size});return e});return{create:function(n,i,l,f){function c(t){var n=35044,a=null,i=0,s=0,l=1;Array.isArray(t)||ee(t)||d(t)?a=t:"number"===typeof t?i=t|0:t&&("data"in t&&(a=t.data),"usage"in t&&(n=ie[t.usage]),"type"in t&&(s=ae[t.type]),"dimension"in t&&(l=t.dimension|0),"length"in t&&(i=t.length|0));h.bind();a?o(h,a,n,s,l,f):(i&&e.bufferData(h.type,i,n),h.dtype=s||5121,h.usage=n,h.dimension=l,h.byteLength=i);r.profile&&(h.stats.size=h.byteLength*le[h.dtype]);return c}t.bufferCount++;var h=new a(i);u[h.id]=h;l||c(n);c._reglType="buffer";c._buffer=h;c.subdata=function(t,r){var n=(r||0)|0,a;h.bind();if(ee(t))e.bufferSubData(h.type,n,t);else if(Array.isArray(t)){if(0<t.length)if("number"===typeof t[0]){var i=$.allocType(h.dtype,t.length);m(i,t);e.bufferSubData(h.type,n,i);$.freeType(i)}else if(Array.isArray(t[0])||ee(t[0]))a=se(t),i=oe(t,a,h.dtype),e.bufferSubData(h.type,n,i),$.freeType(i)}else if(d(t)){a=t.shape;var o=t.stride,s=i=0,l=0,u=0;1===a.length?(i=a[0],s=1,l=o[0],u=0):2===a.length&&(i=a[0],s=a[1],l=o[0],u=o[1]);a=Array.isArray(t.data)?h.dtype:g(t.data);a=$.allocType(a,i*s);y(a,t.data,i,s,l,u,t.offset);e.bufferSubData(h.type,n,a);$.freeType(a)}return c};r.profile&&(c.stats=h.stats);c.destroy=function(){s(h)};return c},createStream:function(e,t){var r=f.pop();r||(r=new a(e));r.bind();o(r,t,35040,0,1,!1);return r},destroyStream:function(e){f.push(e)},clear:function(){te(u).forEach(s);f.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof a?e._buffer:null},restore:function(){te(u).forEach(function(t){t.buffer=e.createBuffer();e.bindBuffer(t.type,t.buffer);e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function x(e,t,r,n){function a(e){this.id=l++;s[this.id]=this;this.buffer=e;this.primType=4;this.type=this.vertCount=0}function i(n,a,i,o,s,l,u){n.buffer.bind();if(a){var f=u;u||ee(a)&&(!d(a)||ee(a.data))||(f=t.oes_element_index_uint?5125:5123);r._initBuffer(n.buffer,a,i,f,3)}else e.bufferData(34963,l,i),n.buffer.dtype=f||5121,n.buffer.usage=i,n.buffer.dimension=3,n.buffer.byteLength=l;f=u;if(!u){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f;a=s;0>a&&(a=n.buffer.byteLength,5123===f?a>>=1:5125===f&&(a>>=2));n.vertCount=a;a=o;0>o&&(a=4,o=n.buffer.dimension,1===o&&(a=0),2===o&&(a=1),3===o&&(a=4));n.primType=a}function o(e){n.elementsCount--;delete s[e.id];e.buffer.destroy();e.buffer=null}var s={},l=0,u={uint8:5121,uint16:5123};t.oes_element_index_uint&&(u.uint32=5125);a.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e,t){function s(e){if(e)if("number"===typeof e)l(e),f.primType=4,f.vertCount=e|0,f.type=5121;else{var t=null,r=35044,n=-1,a=-1,o=0,c=0;if(Array.isArray(e)||ee(e)||d(e))t=e;else if("data"in e&&(t=e.data),"usage"in e&&(r=ie[e.usage]),"primitive"in e&&(n=ue[e.primitive]),"count"in e&&(a=e.count|0),"type"in e&&(c=u[e.type]),"length"in e)o=e.length|0;else if(o=a,5123===c||5122===c)o*=2;else if(5125===c||5124===c)o*=4;i(f,t,r,n,a,o,c)}else l(),f.primType=4,f.vertCount=0,f.type=5121;return s}var l=r.create(null,34963,!0),f=new a(l._buffer);n.elementsCount++;s(e);s._reglType="elements";s._elements=f;s.subdata=function(e,t){l.subdata(e,t);return s};s.destroy=function(){o(f)};return s},createStream:function(e){var t=f.pop();t||(t=new a(r.create(null,34963,!0,!1)._buffer));i(t,e,35040,-1,-1,0,0);return t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"===typeof e&&e._elements instanceof a?e._elements:null},clear:function(){te(s).forEach(o)}}}function _(e){for(var t=$.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(Infinity===e[r])t[r]=31744;else if(-Infinity===e[r])t[r]=64512;else{fe[0]=e[r];var n=ce[0],a=n>>>31<<15,i=(n<<1>>>24)-127,n=n>>13&1023;t[r]=-24>i?a:-14>i?a+(n+1024>>-14-i):15<i?a+31744:a+(i+15<<10)+n}return t}function w(e){return Array.isArray(e)||ee(e)}function A(e){return"[object "+e+"]"}function k(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function T(e){return Array.isArray(e)&&0!==e.length&&w(e[0])?!0:!1}function M(e){return Object.prototype.toString.call(e)}function E(e){if(!e)return!1;var t=M(e);return 0<=xe.indexOf(t)?!0:k(e)||T(e)||d(e)}function C(e,t){36193===e.type?(e.data=_(t),$.freeType(t)):e.data=t}function S(e,t,r,n,a,i){e="undefined"!==typeof we[e]?we[e]:ve[e]*_e[t];i&&(e*=6);if(a){for(n=0;1<=r;)n+=e*r*r,r/=2;return n}return e*r*n}function L(e,t,r,n,a,i,o){function s(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function l(e,t){e.internalformat=t.internalformat;e.format=t.format;e.type=t.type;e.compressed=t.compressed;e.premultiplyAlpha=t.premultiplyAlpha;e.flipY=t.flipY;e.unpackAlignment=t.unpackAlignment;e.colorSpace=t.colorSpace;e.width=t.width;e.height=t.height;e.channels=t.channels}function u(e,t){if("object"===typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha);"flipY"in t&&(e.flipY=t.flipY);"alignment"in t&&(e.unpackAlignment=t.alignment);"colorSpace"in t&&(e.colorSpace=V[t.colorSpace]);"type"in t&&(e.type=H[t.type]);var r=e.width,n=e.height,a=e.channels,i=!1;"shape"in t?(r=t.shape[0],n=t.shape[1],3===t.shape.length&&(a=t.shape[2],i=!0)):("radius"in t&&(r=n=t.radius),"width"in t&&(r=t.width),"height"in t&&(n=t.height),"channels"in t&&(a=t.channels,i=!0));e.width=r|0;e.height=n|0;e.channels=a|0;r=!1;"format"in t&&(r=t.format,n=e.internalformat=q[r],e.format=ie[n],r in H&&!("type"in t)&&(e.type=H[r]),r in G&&(e.compressed=!0),r=!0);!i&&r?e.channels=ve[e.format]:i&&!r&&e.channels!==de[e.format]&&(e.format=e.internalformat=de[e.channels])}}function f(t){e.pixelStorei(37440,t.flipY);e.pixelStorei(37441,t.premultiplyAlpha);e.pixelStorei(37443,t.colorSpace);e.pixelStorei(3317,t.unpackAlignment)}function c(){s.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function h(e,t){var r=null;E(t)?r=t:t&&(u(e,t),"x"in t&&(e.xOffset=t.x|0),"y"in t&&(e.yOffset=t.y|0),E(t.data)&&(r=t.data));if(t.copy){var n=a.viewportWidth,i=a.viewportHeight;e.width=e.width||n-e.xOffset;e.height=e.height||i-e.yOffset;e.needsCopy=!0}else if(!r)e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4;else if(ee(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=ne[Object.prototype.toString.call(r)]|0);else if(k(r)){e.channels=e.channels||4;n=r;i=n.length;switch(e.type){case 5121:case 5123:case 5125:case 5126:i=$.allocType(e.type,i);i.set(n);e.data=i;break;case 36193:e.data=_(n)}e.alignment=1;e.needsFree=!0}else if(d(r)){n=r.data;Array.isArray(n)||5121!==e.type||(e.type=ne[Object.prototype.toString.call(n)]|0);var i=r.shape,o=r.stride,s,l,f,c;3===i.length?(f=i[2],c=o[2]):c=f=1;s=i[0];l=i[1];i=o[0];o=o[1];e.alignment=1;e.width=s;e.height=l;e.channels=f;e.format=e.internalformat=de[f];e.needsFree=!0;s=c;r=r.offset;f=e.width;c=e.height;l=e.channels;for(var h=$.allocType(36193===e.type?5126:e.type,f*c*l),v=0,p=0;p<c;++p)for(var g=0;g<f;++g)for(var m=0;m<l;++m)h[v++]=n[i*g+o*p+s*m+r];C(e,h)}else if(M(r)===pe||M(r)===ge)M(r)===pe?e.element=r:e.element=r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(M(r)===me)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(M(r)===ye)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(M(r)===be)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(T(r)){n=e.width||r[0].length;i=e.height||r.length;o=e.channels;o=w(r[0][0])?o||r[0][0].length:o||1;s=re.shape(r);f=1;for(c=0;c<s.length;++c)f*=s[c];f=$.allocType(36193===e.type?5126:e.type,f);re.flatten(r,s,"",f);C(e,f);e.alignment=1;e.width=n;e.height=i;e.channels=o;e.format=e.internalformat=de[o];e.needsFree=!0}}function v(t,r,a,i,o){var s=t.element,l=t.data,u=t.internalformat,c=t.format,h=t.type,d=t.width,v=t.height;f(t);s?e.texSubImage2D(r,o,a,i,c,h,s):t.compressed?e.compressedTexSubImage2D(r,o,a,i,u,d,v,l):t.needsCopy?(n(),e.copyTexSubImage2D(r,o,a,i,t.xOffset,t.yOffset,d,v)):e.texSubImage2D(r,o,a,i,d,v,c,h,l)}function p(){return oe.pop()||new c}function g(e){e.needsFree&&$.freeType(e.data);c.call(e);oe.push(e)}function m(){s.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function y(e,t,r){var n=e.images[0]=p();e.mipmask=1;n.width=e.width=t;n.height=e.height=r;n.channels=e.channels=4}function b(e,t){var r=null;if(E(t))r=e.images[0]=p(),l(r,e),h(r,t),e.mipmask=1;else if(u(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,a=0;a<n.length;++a)r=e.images[a]=p(),l(r,e),r.width>>=a,r.height>>=a,h(r,n[a]),e.mipmask|=1<<a;else r=e.images[0]=p(),l(r,e),h(r,t),e.mipmask=1;l(e,e.images[0])}function x(t,r){for(var a=t.images,i=0;i<a.length&&a[i];++i){var o=a[i],s=r,l=i,u=o.element,c=o.data,h=o.internalformat,d=o.format,v=o.type,p=o.width,g=o.height,m=o.channels;f(o);u?e.texImage2D(s,l,d,d,v,u):o.compressed?e.compressedTexImage2D(s,l,h,p,g,0,c):o.needsCopy?(n(),e.copyTexImage2D(s,l,d,o.xOffset,o.yOffset,p,g,0)):((o=!c)&&(c=$.zero.allocType(v,p*g*m)),e.texImage2D(s,l,d,p,g,0,d,v,c),o&&c&&$.zero.freeType(c))}}function A(){var e=se.pop()||new m;s.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function L(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&g(t[r]),t[r]=null;se.push(e)}function O(){this.magFilter=this.minFilter=9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function I(e,t){"min"in t&&(e.minFilter=U[t.min],0<=he.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0));"mag"in t&&(e.magFilter=j[t.mag]);var r=e.wrapS,n=e.wrapT;if("wrap"in t){var a=t.wrap;"string"===typeof a?r=n=N[a]:Array.isArray(a)&&(r=N[a[0]],n=N[a[1]])}else"wrapS"in t&&(r=N[t.wrapS]),"wrapT"in t&&(n=N[t.wrapT]);e.wrapS=r;e.wrapT=n;"anisotropic"in t&&(e.anisotropic=t.anisotropic);if("mipmap"in t){r=!1;switch(typeof t.mipmap){case"string":e.mipmapHint=B[t.mipmap];r=e.genMipmaps=!0;break;case"boolean":r=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,r=!0}!r||"min"in t||(e.minFilter=9984)}}function D(r,n){e.texParameteri(n,10241,r.minFilter);e.texParameteri(n,10240,r.magFilter);e.texParameteri(n,10242,r.wrapS);e.texParameteri(n,10243,r.wrapT);t.ext_texture_filter_anisotropic&&e.texParameteri(n,34046,r.anisotropic);r.genMipmaps&&(e.hint(33170,r.mipmapHint),e.generateMipmap(n))}function R(t){s.call(this);this.mipmask=0;this.internalformat=6408;this.id=le++;this.refCount=1;this.target=t;this.texture=e.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new O;o.profile&&(this.stats={size:0})}function P(t){e.activeTexture(33984);e.bindTexture(t.target,t.texture)}function z(){var t=ce[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function F(t){var r=t.texture,n=t.unit,a=t.target;0<=n&&(e.activeTexture(33984+n),e.bindTexture(a,null),ce[n]=null);e.deleteTexture(r);t.texture=null;t.params=null;t.pixels=null;t.refCount=0;delete ue[t.id];i.textureCount--}var B={"don't care":4352,"dont care":4352,nice:4354,fast:4353},N={repeat:10497,clamp:33071,mirror:33648},j={nearest:9728,linear:9729},U=W({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},j),V={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},G={};t.ext_srgb&&(q.srgb=35904,q.srgba=35906);t.oes_texture_float&&(H.float32=H["float"]=5126);t.oes_texture_half_float&&(H.float16=H["half float"]=36193);t.webgl_depth_texture&&(W(q,{depth:6402,"depth stencil":34041}),W(H,{uint16:5123,uint32:5125,"depth stencil":34042}));t.webgl_compressed_texture_s3tc&&W(G,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});t.webgl_compressed_texture_atc&&W(G,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});t.webgl_compressed_texture_pvrtc&&W(G,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});t.webgl_compressed_texture_etc1&&(G["rgb etc1"]=36196);var X=Array.prototype.slice.call(e.getParameter(34467));Object.keys(G).forEach(function(e){var t=G[e];0<=X.indexOf(t)&&(q[e]=t)});var Y=Object.keys(q);r.textureFormats=Y;var Z=[];Object.keys(q).forEach(function(e){Z[q[e]]=e});var J=[];Object.keys(H).forEach(function(e){J[H[e]]=e});var Q=[];Object.keys(j).forEach(function(e){Q[j[e]]=e});var K=[];Object.keys(U).forEach(function(e){K[U[e]]=e});var ae=[];Object.keys(N).forEach(function(e){ae[N[e]]=e});var ie=Y.reduce(function(e,t){var r=q[t];6409===r||6406===r||6409===r||6410===r||6402===r||34041===r?e[r]=r:32855===r||0<=t.indexOf("rgba")?e[r]=6408:e[r]=6407;return e},{}),oe=[],se=[],le=0,ue={},fe=r.maxTextureUnits,ce=Array(fe).map(function(){return null});W(R.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var r=0;r<fe;++r){var n=ce[r];if(n){if(0<n.bindCount)continue;n.unit=-1}ce[r]=this;t=r;break}o.profile&&i.maxTextureUnits<t+1&&(i.maxTextureUnits=t+1);this.unit=t;e.activeTexture(33984+t);e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&F(this)}});o.profile&&(i.getTotalTextureSize=function(){var e=0;Object.keys(ue).forEach(function(t){e+=ue[t].stats.size});return e});return{create2D:function(t,r){function n(e,t){var r=a.texInfo;O.call(r);var i=A();"number"===typeof e?"number"===typeof t?y(i,e|0,t|0):y(i,e|0,e|0):e?(I(r,e),b(i,e)):y(i,1,1);r.genMipmaps&&(i.mipmask=(i.width<<1)-1);a.mipmask=i.mipmask;l(a,i);a.internalformat=i.internalformat;n.width=i.width;n.height=i.height;P(a);x(i,3553);D(r,3553);z();L(i);o.profile&&(a.stats.size=S(a.internalformat,a.type,i.width,i.height,r.genMipmaps,!1));n.format=Z[a.internalformat];n.type=J[a.type];n.mag=Q[r.magFilter];n.min=K[r.minFilter];n.wrapS=ae[r.wrapS];n.wrapT=ae[r.wrapT];return n}var a=new R(3553);ue[a.id]=a;i.textureCount++;n(t,r);n.subimage=function(e,t,r,i){t|=0;r|=0;i|=0;var o=p();l(o,a);o.width=0;o.height=0;h(o,e);o.width=o.width||(a.width>>i)-t;o.height=o.height||(a.height>>i)-r;P(a);v(o,3553,t,r,i);z();g(o);return n};n.resize=function(t,r){var i=t|0,s=r|0||i;if(i===a.width&&s===a.height)return n;n.width=a.width=i;n.height=a.height=s;P(a);for(var l,u=a.channels,f=a.type,c=0;a.mipmask>>c;++c){var h=i>>c,d=s>>c;if(!h||!d)break;l=$.zero.allocType(f,h*d*u);e.texImage2D(3553,c,a.format,h,d,0,a.format,a.type,l);l&&$.zero.freeType(l)}z();o.profile&&(a.stats.size=S(a.internalformat,a.type,i,s,!1,!1));return n};n._reglType="texture2d";n._texture=a;o.profile&&(n.stats=a.stats);n.destroy=function(){a.decRef()};return n},createCube:function(t,r,n,a,s,f){function c(e,t,r,n,a,i){var s,f=d.texInfo;O.call(f);for(s=0;6>s;++s)m[s]=A();if("number"===typeof e||!e)for(e=e|0||1,s=0;6>s;++s)y(m[s],e,e);else if("object"===typeof e)if(t)b(m[0],e),b(m[1],t),b(m[2],r),b(m[3],n),b(m[4],a),b(m[5],i);else if(I(f,e),u(d,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)l(m[s],d),b(m[s],e[s]);else for(s=0;6>s;++s)b(m[s],e);l(d,m[0]);d.mipmask=f.genMipmaps?(m[0].width<<1)-1:m[0].mipmask;d.internalformat=m[0].internalformat;c.width=m[0].width;c.height=m[0].height;P(d);for(s=0;6>s;++s)x(m[s],34069+s);D(f,34067);z();o.profile&&(d.stats.size=S(d.internalformat,d.type,c.width,c.height,f.genMipmaps,!0));c.format=Z[d.internalformat];c.type=J[d.type];c.mag=Q[f.magFilter];c.min=K[f.minFilter];c.wrapS=ae[f.wrapS];c.wrapT=ae[f.wrapT];for(s=0;6>s;++s)L(m[s]);return c}var d=new R(34067);ue[d.id]=d;i.cubeCount++;var m=Array(6);c(t,r,n,a,s,f);c.subimage=function(e,t,r,n,a){r|=0;n|=0;a|=0;var i=p();l(i,d);i.width=0;i.height=0;h(i,t);i.width=i.width||(d.width>>a)-r;i.height=i.height||(d.height>>a)-n;P(d);v(i,34069+e,r,n,a);z();g(i);return c};c.resize=function(t){t|=0;if(t!==d.width){c.width=d.width=t;c.height=d.height=t;P(d);for(var r=0;6>r;++r)for(var n=0;d.mipmask>>n;++n)e.texImage2D(34069+r,n,d.format,t>>n,t>>n,0,d.format,d.type,null);z();o.profile&&(d.stats.size=S(d.internalformat,d.type,c.width,c.height,!1,!0));return c}};c._reglType="textureCube";c._texture=d;o.profile&&(c.stats=d.stats);c.destroy=function(){d.decRef()};return c},clear:function(){for(var t=0;t<fe;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),ce[t]=null;te(ue).forEach(F);i.cubeCount=0;i.textureCount=0},getTexture:function(e){return null},restore:function(){te(ue).forEach(function(t){t.texture=e.createTexture();e.bindTexture(t.target,t.texture);for(var r=0;32>r;++r)if(0!==(t.mipmask&1<<r))if(3553===t.target)e.texImage2D(3553,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;6>n;++n)e.texImage2D(34069+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);D(t.texInfo,t.target)})}}}function O(e,t,r,n,a,i){function o(e,t,r){this.target=e;this.texture=t;this.renderbuffer=r;var n=e=0;t?(e=t.width,n=t.height):r&&(e=r.width,n=r.height);this.width=e;this.height=n}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function l(e,t,r){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function u(t,r){r&&(r.texture?e.framebufferTexture2D(36160,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,r.renderbuffer._renderbuffer.renderbuffer))}function f(e){var t=3553,r=null,n=null,a=e;"object"===typeof e&&(a=e.data,"target"in e&&(t=e.target|0));e=a._reglType;"texture2d"===e?r=a:"textureCube"===e?r=a:"renderbuffer"===e&&(n=a,t=36161);return new o(t,r,n)}function c(e,t,r,i,s){if(r)return e=n.create2D({width:e,height:t,format:i,type:s}),e._texture.refCount=0,new o(3553,e,null);e=a.create({width:e,height:t,format:i});e._renderbuffer.refCount=0;return new o(36161,null,e)}function h(e){return e&&(e.texture||e.renderbuffer)}function d(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r))}function v(){this.id=A++;k[this.id]=this;this.framebuffer=e.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function p(e){e.colorAttachments.forEach(s);s(e.depthAttachment);s(e.stencilAttachment);s(e.depthStencilAttachment)}function g(t){e.deleteFramebuffer(t.framebuffer);t.framebuffer=null;i.framebufferCount--;delete k[t.id]}function m(t){var n;e.bindFramebuffer(36160,t.framebuffer);var a=t.colorAttachments;for(n=0;n<a.length;++n)u(36064+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(36160,36064+n,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0);e.framebufferTexture2D(36160,36096,3553,null,0);e.framebufferTexture2D(36160,36128,3553,null,0);u(36096,t.depthAttachment);u(36128,t.stencilAttachment);u(33306,t.depthStencilAttachment);e.checkFramebufferStatus(36160);e.bindFramebuffer(36160,b.next?b.next.framebuffer:null);b.cur=b.next;e.getError()}function y(e,t){function r(e,t){var a,i=0,o=0,s=!0,u=!0;a=null;var d=!0,v="rgba",g="uint8",y=1,b=null,w=null,A=null,k=!1;if("number"===typeof e)i=e|0,o=t|0||i;else if(e){"shape"in e?(o=e.shape,i=o[0],o=o[1]):("radius"in e&&(i=o=e.radius),"width"in e&&(i=e.width),"height"in e&&(o=e.height));if("color"in e||"colors"in e)a=e.color||e.colors,Array.isArray(a);if(!a){"colorCount"in e&&(y=e.colorCount|0);"colorTexture"in e&&(d=!!e.colorTexture,v="rgba4");if("colorType"in e&&(g=e.colorType,!d))if("half float"===g||"float16"===g)v="rgba16f";else if("float"===g||"float32"===g)v="rgba32f";"colorFormat"in e&&(v=e.colorFormat,0<=x.indexOf(v)?d=!0:0<=_.indexOf(v)&&(d=!1))}if("depthTexture"in e||"depthStencilTexture"in e)k=!(!e.depthTexture&&!e.depthStencilTexture);"depth"in e&&("boolean"===typeof e.depth?s=e.depth:(b=e.depth,u=!1));"stencil"in e&&("boolean"===typeof e.stencil?u=e.stencil:(w=e.stencil,s=!1));"depthStencil"in e&&("boolean"===typeof e.depthStencil?s=u=e.depthStencil:(A=e.depthStencil,u=s=!1))}else i=o=1;var T=null,M=null,E=null,C=null;if(Array.isArray(a))T=a.map(f);else if(a)T=[f(a)];else for(T=Array(y),a=0;a<y;++a)T[a]=c(i,o,d,v,g);i=i||T[0].width;o=o||T[0].height;b?M=f(b):s&&!u&&(M=c(i,o,k,"depth","uint32"));w?E=f(w):u&&!s&&(E=c(i,o,!1,"stencil","uint8"));A?C=f(A):!b&&!w&&u&&s&&(C=c(i,o,k,"depth stencil","depth stencil"));s=null;for(a=0;a<T.length;++a)l(T[a],i,o),T[a]&&T[a].texture&&(u=Te[T[a].texture._texture.format]*Me[T[a].texture._texture.type],null===s&&(s=u));l(M,i,o);l(E,i,o);l(C,i,o);p(n);n.width=i;n.height=o;n.colorAttachments=T;n.depthAttachment=M;n.stencilAttachment=E;n.depthStencilAttachment=C;r.color=T.map(h);r.depth=h(M);r.stencil=h(E);r.depthStencil=h(C);r.width=n.width;r.height=n.height;m(n);return r}var n=new v;i.framebufferCount++;r(e,t);return W(r,{resize:function(e,t){var a=e|0,i=t|0||a;if(a===n.width&&i===n.height)return r;for(var o=n.colorAttachments,s=0;s<o.length;++s)d(o[s],a,i);d(n.depthAttachment,a,i);d(n.stencilAttachment,a,i);d(n.depthStencilAttachment,a,i);n.width=r.width=a;n.height=r.height=i;m(n);return r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){g(n);p(n)},use:function(e){b.setFBO({framebuffer:r},e)}})}var b={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],_=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&_.push("srgba");t.ext_color_buffer_half_float&&_.push("rgba16f","rgb16f");t.webgl_color_buffer_float&&_.push("rgba32f");var w=["uint8"];t.oes_texture_half_float&&w.push("half float","float16");t.oes_texture_float&&w.push("float","float32");var A=0,k={};return W(b,{getFramebuffer:function(e){return"function"===typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer,e instanceof v)?e:null},create:y,createCube:function(e){function t(e){var a,i={color:null},o=0,s=null;a="rgba";var l="uint8",u=1;if("number"===typeof e)o=e|0;else if(e){"shape"in e?o=e.shape[0]:("radius"in e&&(o=e.radius|0),"width"in e?o=e.width|0:"height"in e&&(o=e.height|0));if("color"in e||"colors"in e)s=e.color||e.colors,Array.isArray(s);s||("colorCount"in e&&(u=e.colorCount|0),"colorType"in e&&(l=e.colorType),"colorFormat"in e&&(a=e.colorFormat));"depth"in e&&(i.depth=e.depth);"stencil"in e&&(i.stencil=e.stencil);"depthStencil"in e&&(i.depthStencil=e.depthStencil)}else o=1;if(s)if(Array.isArray(s))for(e=[],a=0;a<s.length;++a)e[a]=s[a];else e=[s];else for(e=Array(u),s={radius:o,format:a,type:l},a=0;a<u;++a)e[a]=n.createCube(s);i.color=Array(e.length);for(a=0;a<e.length;++a)u=e[a],o=o||u.width,i.color[a]={target:34069,data:e[a]};for(a=0;6>a;++a){for(u=0;u<e.length;++u)i.color[u].target=34069+a;0<a&&(i.depth=r[0].depth,i.stencil=r[0].stencil,i.depthStencil=r[0].depthStencil);if(r[a])r[a](i);else r[a]=y(i)}return W(t,{width:o,height:o,color:e})}var r=Array(6);t(e);return W(t,{faces:r,resize:function(e){var n=e|0;if(n===t.width)return t;var a=t.color;for(e=0;e<a.length;++e)a[e].resize(n);for(e=0;6>e;++e)r[e].resize(n);t.width=t.height=n;return t},_reglType:"framebufferCube",destroy:function(){r.forEach(function(e){e.destroy()})}})},clear:function(){te(k).forEach(g)},restore:function(){te(k).forEach(function(t){t.framebuffer=e.createFramebuffer();m(t)})}})}function I(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function D(e,t,r,n){e=r.maxAttributes;t=Array(e);for(r=0;r<e;++r)t[r]=new I;return{Record:I,scope:{},state:t}}function R(e,t,r,n){function a(e,t,r,n){this.name=e;this.id=t;this.location=r;this.info=n}function i(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id){e[r].location=t.location;return}e.push(t)}function o(r,n,a){a=35632===r?u:f;var i=a[n];if(!i){var o=t.str(n),i=e.createShader(r);e.shaderSource(i,o);e.compileShader(i);a[n]=i}return i}function s(e,t){this.id=d++;this.fragId=e;this.vertId=t;this.program=null;this.uniforms=[];this.attributes=[];n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(r,s){var l,u;l=o(35632,r.fragId);u=o(35633,r.vertId);var f=r.program=e.createProgram();e.attachShader(f,l);e.attachShader(f,u);e.linkProgram(f);var c=e.getProgramParameter(f,35718);n.profile&&(r.stats.uniformsCount=c);var h=r.uniforms;for(l=0;l<c;++l)if(u=e.getActiveUniform(f,l))if(1<u.size)for(var d=0;d<u.size;++d){var v=u.name.replace("[0]","["+d+"]");i(h,new a(v,t.id(v),e.getUniformLocation(f,v),u))}else i(h,new a(u.name,t.id(u.name),e.getUniformLocation(f,u.name),u));c=e.getProgramParameter(f,35721);n.profile&&(r.stats.attributesCount=c);h=r.attributes;for(l=0;l<c;++l)(u=e.getActiveAttrib(f,l))&&i(h,new a(u.name,t.id(u.name),e.getAttribLocation(f,u.name),u))}var u={},f={},c={},h=[],d=0;n.profile&&(r.getMaxUniformsCount=function(){var e=0;h.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)});return e},r.getMaxAttributesCount=function(){var e=0;h.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)});return e});return{clear:function(){var t=e.deleteShader.bind(e);te(u).forEach(t);u={};te(f).forEach(t);f={};h.forEach(function(t){e.deleteProgram(t.program)});h.length=0;c={};r.shaderCount=0},program:function(e,t,n){var a=c[t];a||(a=c[t]={});var i=a[e];i||(i=new s(t,e),r.shaderCount++,l(i,n),a[e]=i,h.push(i));return i},restore:function(){u={};f={};for(var e=0;e<h.length;++e)l(h[e])},shader:o,frag:-1,vert:-1}}function P(e,t,r,n,a,i,o){function s(a){var i;i=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=n.framebufferWidth,u=n.framebufferHeight,f=null;ee(a)?f=a:a&&(o=a.x|0,s=a.y|0,l=(a.width||n.framebufferWidth-o)|0,u=(a.height||n.framebufferHeight-s)|0,f=a.data||null);r();a=l*u*4;f||(5121===i?f=new Uint8Array(a):5126===i&&(f=f||new Float32Array(a)));e.pixelStorei(3333,4);e.readPixels(o,s,l,u,6408,i,f);return f}function l(e){var r;t.setFBO({framebuffer:e.framebuffer},function(){r=s(e)});return r}return function(e){return e&&"framebuffer"in e?l(e):s(e)}}function z(e){return Array.prototype.slice.call(e)}function F(e){return z(e).join("")}function B(){function e(){var e=[],t=[];return W(function(){e.push.apply(e,z(arguments))},{def:function(){var n="v"+r++;t.push(n);0<arguments.length&&(e.push(n,"="),e.push.apply(e,z(arguments)),e.push(";"));return n},toString:function(){return F([0<t.length?"var "+t+";":"",F(e)])}})}function t(){function t(e,t){n(e,t,"=",r.def(e,t),";")}var r=e(),n=e(),a=r.toString,i=n.toString;return W(function(){r.apply(r,z(arguments))},{def:r.def,entry:r,exit:n,save:t,set:function(e,n,a){t(e,n);r(e,n,"=",a,";")},toString:function(){return a()+i()}})}var r=0,n=[],a=[],i=e(),o={};return{global:i,link:function(e){for(var t=0;t<a.length;++t)if(a[t]===e)return n[t];t="g"+r++;n.push(t);a.push(e);return t},block:e,proc:function(e,r){function n(){var e="a"+a.length;a.push(e);return e}var a=[];r=r||0;for(var i=0;i<r;++i)n();var i=t(),s=i.toString;return o[e]=W(i,{arg:n,toString:function(){return F(["function(",a.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=F(arguments),r=t(),n=t(),a=r.toString,i=n.toString;return W(r,{then:function(){r.apply(r,z(arguments));return this},else:function(){n.apply(n,z(arguments));return this},toString:function(){var t=i();t&&(t="else{"+t+"}");return F(["if(",e,"){",a(),"}",t])}})},compile:function(){var e=['"use strict";',i,"return {"];Object.keys(o).forEach(function(t){e.push('"',t,'":',o[t].toString(),",")});e.push("}");var t=F(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,a)}}}function N(e){return Array.isArray(e)||ee(e)||d(e)}function j(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function U(e,t,r,n){this.thisDep=e;this.contextDep=t;this.propDep=r;this.append=n}function V(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function H(e){return new U(!1,!1,!1,e)}function q(e,t){var r=e.type;return 0===r?(r=e.data.length,new U(!0,1<=r,2<=r,t)):4===r?(r=e.data,new U(r.thisDep,r.contextDep,r.propDep,t)):new U(3===r,2===r,1===r,t)}function G(e,t,r,n,a,i,o,s,l,u,c,h,d,v,p){function g(e){return e.replace(".","_")}function m(e,t,r){var n=g(e);ce.push(e);fe[n]=le[n]=!!r;he[n]=t}function y(e,t,r){var n=g(e);ce.push(e);Array.isArray(r)?(le[n]=r.slice(),fe[n]=r.slice()):le[n]=fe[n]=r;de[n]=t}function b(){var e=B(),r=e.link,n=e.global;e.id=ge++;e.batchId="0";var a=r(ve),i=e.shared={props:"a0"};Object.keys(ve).forEach(function(e){i[e]=n.def(a,".",e)});var o=e.next={},s=e.current={};Object.keys(de).forEach(function(e){Array.isArray(le[e])&&(o[e]=n.def(i.next,".",e),s[e]=n.def(i.current,".",e))});var l=e.constants={};Object.keys(pe).forEach(function(e){l[e]=n.def(JSON.stringify(pe[e]))});e.invoke=function(t,n){switch(n.type){case 0:var a=["this",i.context,i.props,e.batchId];return t.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(i.props,n.data);case 2:return t.def(i.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref}};e.attribCache={};var f={};e.scopeAttrib=function(e){e=t.id(e);if(e in f)return f[e];var n=u.scope[e];n||(n=u.scope[e]=new ne);return f[e]=r(n)};return e}function x(e){var t=e["static"];e=e.dynamic;var r;if("profile"in t){var n=!!t.profile;r=H(function(e,t){return n});r.enable=n}else if("profile"in e){var a=e.profile;r=q(a,function(e,t){return e.invoke(t,a)})}return r}function _(e,t){var r=e["static"],n=e.dynamic;if("framebuffer"in r){var a=r.framebuffer;return a?(a=s.getFramebuffer(a),H(function(e,t){var r=e.link(a),n=e.shared;t.set(n.framebuffer,".next",r);n=n.context;t.set(n,".framebufferWidth",r+".width");t.set(n,".framebufferHeight",r+".height");return r})):H(function(e,t){var r=e.shared;t.set(r.framebuffer,".next","null");r=r.context;t.set(r,".framebufferWidth",r+".drawingBufferWidth");t.set(r,".framebufferHeight",r+".drawingBufferHeight");return"null"})}if("framebuffer"in n){var i=n.framebuffer;return q(i,function(e,t){var r=e.invoke(t,i),n=e.shared,a=n.framebuffer,r=t.def(a,".getFramebuffer(",r,")");t.set(a,".next",r);n=n.context;t.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth");t.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight");return r})}return null}function A(e,t,r){function n(e){if(e in a){var r=a[e];e=!0;var n=r.x|0,o=r.y|0,s,l;"width"in r?s=r.width|0:e=!1;"height"in r?l=r.height|0:e=!1;return new U(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var a=e.shared.context,i=s;"width"in r||(i=t.def(a,".","framebufferWidth","-",n));var u=l;"height"in r||(u=t.def(a,".","framebufferHeight","-",o));return[n,o,i,u]})}if(e in i){var u=i[e];e=q(u,function(e,t){var r=e.invoke(t,u),n=e.shared.context,a=t.def(r,".x|0"),i=t.def(r,".y|0"),o=t.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",a,")"),r=t.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",i,")");return[a,i,o,r]});t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep);return e}return t?new U(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".","framebufferWidth"),t.def(r,".","framebufferHeight")]}):null}var a=e["static"],i=e.dynamic;if(e=n("viewport")){var o=e;e=new U(e.thisDep,e.contextDep,e.propDep,function(e,t){var r=o.append(e,t),n=e.shared.context;t.set(n,".viewportWidth",r[2]);t.set(n,".viewportHeight",r[3]);return r})}return{viewport:e,scissor_box:n("scissor.box")}}function k(e){function r(e){if(e in n){var r=t.id(n[e]);e=H(function(){return r});e.id=r;return e}if(e in a){var i=a[e];return q(i,function(e,t){var r=e.invoke(t,i);return t.def(e.shared.strings,".id(",r,")")})}return null}var n=e["static"],a=e.dynamic,i=r("frag"),o=r("vert"),s=null;V(i)&&V(o)?(s=c.program(o.id,i.id),e=H(function(e,t){return e.link(s)})):e=new U(i&&i.thisDep||o&&o.thisDep,i&&i.contextDep||o&&o.contextDep,i&&i.propDep||o&&o.propDep,function(e,t){var r=e.shared.shader,n;n=i?i.append(e,t):t.def(r,".","frag");var a;a=o?o.append(e,t):t.def(r,".","vert");return t.def(r+".program("+a+","+n+")")});return{frag:i,vert:o,progVar:e,program:s}}function T(e,t){function r(e,t){if(e in n){var r=n[e]|0;return H(function(e,n){t&&(e.OFFSET=r);return r})}if(e in a){var i=a[e];return q(i,function(e,r){var n=e.invoke(r,i);t&&(e.OFFSET=n);return n})}return t&&o?H(function(e,t){e.OFFSET="0";return 0}):null}var n=e["static"],a=e.dynamic,o=function(){if("elements"in n){var e=n.elements;N(e)?e=i.getElements(i.create(e,!0)):e&&(e=i.getElements(e));var t=H(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n}return t.ELEMENTS=null});t.value=e;return t}if("elements"in a){var r=a.elements;return q(r,function(e,t){var n=e.shared,a=n.isBufferArgs,n=n.elements,i=e.invoke(t,r),o=t.def("null"),a=t.def(a,"(",i,")"),i=e.cond(a).then(o,"=",n,".createStream(",i,");")["else"](o,"=",n,".getElements(",i,");");t.entry(i);t.exit(e.cond(a).then(n,".destroyStream(",o,");"));return e.ELEMENTS=o})}return null}(),s=r("offset",!0);return{elements:o,primitive:function(){if("primitive"in n){var e=n.primitive;return H(function(t,r){return ue[e]})}if("primitive"in a){var t=a.primitive;return q(t,function(e,r){var n=e.constants.primTypes,a=e.invoke(r,t);return r.def(n,"[",a,"]")})}return o?V(o)?o.value?H(function(e,t){return t.def(e.ELEMENTS,".primType")}):H(function(){return 4}):new U(o.thisDep,o.contextDep,o.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)}):null}(),count:function(){if("count"in n){var e=n.count|0;return H(function(){return e})}if("count"in a){var t=a.count;return q(t,function(e,r){return e.invoke(r,t)})}return o?V(o)?o?s?new U(s.thisDep,s.contextDep,s.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):H(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):H(function(){return-1}):new U(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")}):null}(),instances:r("instances",!1),offset:s}}function M(e,t){var r=e["static"],n=e.dynamic,a={};ce.forEach(function(e){function t(t,o){if(e in r){var s=t(r[e]);a[i]=H(function(){return s})}else if(e in n){var l=n[e];a[i]=q(l,function(e,t){return o(e,t,e.invoke(t,l))})}}var i=g(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,r){return r});case"depth.func":return t(function(e){return Le[e]},function(e,t,r){return t.def(e.constants.compareFuncs,"[",r,"]")});case"depth.range":return t(function(e){return e},function(e,t,r){e=t.def("+",r,"[0]");t=t.def("+",r,"[1]");return[e,t]});case"blend.func":return t(function(e){return[Se["srcRGB"in e?e.srcRGB:e.src],Se["dstRGB"in e?e.dstRGB:e.dst],Se["srcAlpha"in e?e.srcAlpha:e.src],Se["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,r){function n(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}e=e.constants.blendFuncs;var a=n("src","RGB"),i=n("dst","RGB"),a=t.def(e,"[",a,"]"),o=t.def(e,"[",n("src","Alpha"),"]"),i=t.def(e,"[",i,"]");e=t.def(e,"[",n("dst","Alpha"),"]");return[a,i,o,e]});case"blend.equation":return t(function(e){if("string"===typeof e)return[ie[e],ie[e]];if("object"===typeof e)return[ie[e.rgb],ie[e.alpha]]},function(e,t,r){var n=e.constants.blendEquations,a=t.def(),i=t.def();e=e.cond("typeof ",r,'==="string"');e.then(a,"=",i,"=",n,"[",r,"];");e["else"](a,"=",n,"[",r,".rgb];",i,"=",n,"[",r,".alpha];");t(e);return[a,i]});case"blend.color":return t(function(e){return f(4,function(t){return+e[t]})},function(e,t,r){return f(4,function(e){return t.def("+",r,"[",e,"]")})});case"stencil.mask":return t(function(e){return e|0},function(e,t,r){return t.def(r,"|0")});case"stencil.func":return t(function(e){return[Le[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,r){e=t.def('"cmp" in ',r,"?",e.constants.compareFuncs,"[",r,".cmp]",":",7680);var n=t.def(r,".ref|0");t=t.def('"mask" in ',r,"?",r,".mask|0:-1");return[e,n,t]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,Oe[t.fail||"keep"],Oe[t.zfail||"keep"],Oe[t.zpass||"keep"]]},function(t,r,n){function a(e){return r.def('"',e,'" in ',n,"?",i,"[",n,".",e,"]:",7680)}var i=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,a("fail"),a("zfail"),a("zpass")]});case"polygonOffset.offset":return t(function(e){return[e.factor|0,e.units|0]},function(e,t,r){e=t.def(r,".factor|0");t=t.def(r,".units|0");return[e,t]});case"cull.face":return t(function(e){var t=0;"front"===e?t=1028:"back"===e&&(t=1029);return t},function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,r){return r});case"frontFace":return t(function(e){return Ie[e]},function(e,t,r){return t.def(r+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,r){return f(4,function(e){return"!!"+r+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,r){e=t.def('"value" in ',r,"?+",r,".value:1");t=t.def("!!",r,".invert");return[e,t]})}});return a}function E(e,t){var r=e["static"],n=e.dynamic,a={};Object.keys(r).forEach(function(e){var t=r[e],n;if("number"===typeof t||"boolean"===typeof t)n=H(function(){return t});else if("function"===typeof t){var i=t._reglType;if("texture2d"===i||"textureCube"===i)n=H(function(e){return e.link(t)});else if("framebuffer"===i||"framebufferCube"===i)n=H(function(e){return e.link(t.color[0])})}else w(t)&&(n=H(function(e){return e.global.def("[",f(t.length,function(e){return t[e]}),"]")}));n.value=t;a[e]=n});Object.keys(n).forEach(function(e){var t=n[e];a[e]=q(t,function(e,r){return e.invoke(r,t)})});return a}function C(e,r){var n=e["static"],i=e.dynamic,o={};Object.keys(n).forEach(function(e){var r=n[e],i=t.id(e),s=new ne;if(N(r))s.state=1,s.buffer=a.getBuffer(a.create(r,34962,!1,!0)),s.type=0;else{var l=a.getBuffer(r);if(l)s.state=1,s.buffer=l,s.type=0;else if("constant"in r){var u=r.constant;s.buffer="null";s.state=2;"number"===typeof u?s.x=u:Ee.forEach(function(e,t){t<u.length&&(s[e]=u[t])})}else{var l=N(r.buffer)?a.getBuffer(a.create(r.buffer,34962,!1,!0)):a.getBuffer(r.buffer),f=r.offset|0,c=r.stride|0,h=r.size|0,d=!!r.normalized,v=0;"type"in r&&(v=ae[r.type]);r=r.divisor|0;s.buffer=l;s.state=1;s.size=h;s.normalized=d;s.type=v||l.dtype;s.offset=f;s.stride=c;s.divisor=r}}o[e]=H(function(e,t){var r=e.attribCache;if(i in r)return r[i];var n={isStream:!1};Object.keys(s).forEach(function(e){n[e]=s[e]});s.buffer&&(n.buffer=e.link(s.buffer),n.type=n.type||n.buffer+".dtype");return r[i]=n})});Object.keys(i).forEach(function(e){var t=i[e];o[e]=q(t,function(e,r){function n(e){r(l[e],"=",a,".",e,"|0;")}var a=e.invoke(r,t),i=e.shared,o=i.isBufferArgs,s=i.buffer,l={isStream:r.def(!1)},u=new ne;u.state=1;Object.keys(u).forEach(function(e){l[e]=r.def(""+u[e])});var f=l.buffer,c=l.type;r("if(",o,"(",a,")){",l.isStream,"=true;",f,"=",s,".createStream(",34962,",",a,");",c,"=",f,".dtype;","}else{",f,"=",s,".getBuffer(",a,");","if(",f,"){",c,"=",f,".dtype;",'}else if("constant" in ',a,"){",l.state,"=",2,";","if(typeof "+a+'.constant === "number"){',l[Ee[0]],"=",a,".constant;",Ee.slice(1).map(function(e){return l[e]}).join("="),"=0;","}else{",Ee.map(function(e,t){return l[e]+"="+a+".constant.length>"+t+"?"+a+".constant["+t+"]:0;"}).join(""),"}}else{","if(",o,"(",a,".buffer)){",f,"=",s,".createStream(",34962,",",a,".buffer);","}else{",f,"=",s,".getBuffer(",a,".buffer);","}",c,'="type" in ',a,"?",i.glTypes,"[",a,".type]:",f,".dtype;",l.normalized,"=!!",a,".normalized;");n("size");n("offset");n("stride");n("divisor");r("}}");r.exit("if(",l.isStream,"){",s,".destroyStream(",f,");","}");return l})});return o}function S(e){var t=e["static"],r=e.dynamic,n={};Object.keys(t).forEach(function(e){var r=t[e];n[e]=H(function(e,t){return"number"===typeof r||"boolean"===typeof r?""+r:e.link(r)})});Object.keys(r).forEach(function(e){var t=r[e];n[e]=q(t,function(e,r){return e.invoke(r,t)})});return n}function L(e,t,r,n,a){var i=_(e,a),o=A(e,i,a),s=T(e,a),l=M(e,a),u=k(e,a),f=o.viewport;f&&(l.viewport=f);f=g("scissor.box");(o=o[f])&&(l[f]=o);o=0<Object.keys(l).length;i={framebuffer:i,draw:s,shader:u,state:l,dirty:o};i.profile=x(e,a);i.uniforms=E(r,a);i.attributes=C(t,a);i.context=S(n,a);return i}function O(e,t,r){var n=e.shared.context,a=e.scope();Object.keys(r).forEach(function(i){t.save(n,"."+i);a(n,".",i,"=",r[i].append(e,t),";")});t(a)}function I(e,t,r,n){var a=e.shared,i=a.gl,o=a.framebuffer,s;se&&(s=t.def(a.extensions,".webgl_draw_buffers"));var l=e.constants,a=l.drawBuffer,l=l.backBuffer;e=r?r.append(e,t):t.def(o,".next");n||t("if(",e,"!==",o,".cur){");t("if(",e,"){",i,".bindFramebuffer(",36160,",",e,".framebuffer);");se&&t(s,".drawBuffersWEBGL(",a,"[",e,".colorAttachments.length]);");t("}else{",i,".bindFramebuffer(",36160,",null);");se&&t(s,".drawBuffersWEBGL(",l,");");t("}",o,".cur=",e,";");n||t("}")}function D(e,t,r){var n=e.shared,a=n.gl,i=e.current,o=e.next,s=n.current,l=n.next,u=e.cond(s,".dirty");ce.forEach(function(t){t=g(t);if(!(t in r.state)){var n,c;if(t in o){n=o[t];c=i[t];var h=f(le[t].length,function(e){return u.def(n,"[",e,"]")});u(e.cond(h.map(function(e,t){return e+"!=="+c+"["+t+"]"}).join("||")).then(a,".",de[t],"(",h,");",h.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";"))}else n=u.def(l,".",t),h=e.cond(n,"!==",s,".",t),u(h),t in he?h(e.cond(n).then(a,".enable(",he[t],");")["else"](a,".disable(",he[t],");"),s,".",t,"=",n,";"):h(a,".",de[t],"(",n,");",s,".",t,"=",n,";")}});0===Object.keys(r.state).length&&u(s,".dirty=false;");t(u)}function R(e,t,r,n){var a=e.shared,i=e.current,o=a.current,s=a.gl;j(Object.keys(r)).forEach(function(a){var l=r[a];if(!n||n(l)){var u=l.append(e,t);if(he[a]){var f=he[a];V(l)?u?t(s,".enable(",f,");"):t(s,".disable(",f,");"):t(e.cond(u).then(s,".enable(",f,");")["else"](s,".disable(",f,");"));t(o,".",a,"=",u,";")}else if(w(u)){var c=i[a];t(s,".",de[a],"(",u,");",u.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";")}else t(s,".",de[a],"(",u,");",o,".",a,"=",u,";")}})}function P(e,t){oe&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function z(e,t,r,n,a){function i(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function o(e){d=t.def();e(d,"=",i(),";");"string"===typeof a?e(f,".count+=",a,";"):e(f,".count++;");v&&(n?(p=t.def(),e(p,"=",h,".getNumPendingQueries();")):e(h,".beginQuery(",f,");"))}function s(e){e(f,".cpuTime+=",i(),"-",d,";");v&&(n?e(h,".pushScopeStats(",p,",",h,".getNumPendingQueries(),",f,");"):e(h,".endQuery();"))}function l(e){var r=t.def(c,".profile");t(c,".profile=",e,";");t.exit(c,".profile=",r,";")}var u=e.shared,f=e.stats,c=u.current,h=u.timer;r=r.profile;var d,p;if(r){if(V(r)){r.enable?(o(t),s(t.exit),l("true")):l("false");return}r=r.append(e,t);l(r)}else r=t.def(c,".profile");u=e.block();o(u);t("if(",r,"){",u,"}");e=e.block();s(e);t.exit("if(",r,"){",e,"}")}function F(e,t,r,n,a){function i(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function o(r,n,a){function i(){t("if(!",f,".buffer){",l,".enableVertexAttribArray(",u,");}");var r=a.type,i;i=a.size?t.def(a.size,"||",n):n;t("if(",f,".type!==",r,"||",f,".size!==",i,"||",d.map(function(e){return f+"."+e+"!=="+a[e]}).join("||"),"){",l,".bindBuffer(",34962,",",c,".buffer);",l,".vertexAttribPointer(",[u,i,r,a.normalized,a.stride,a.offset],");",f,".type=",r,";",f,".size=",i,";",d.map(function(e){return f+"."+e+"="+a[e]+";"}).join(""),"}");oe&&(r=a.divisor,t("if(",f,".divisor!==",r,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,r],");",f,".divisor=",r,";}"))}function o(){t("if(",f,".buffer){",l,".disableVertexAttribArray(",u,");","}if(",Ee.map(function(e,t){return f+"."+e+"!=="+h[t]}).join("||"),"){",l,".vertexAttrib4f(",u,",",h,");",Ee.map(function(e,t){return f+"."+e+"="+h[t]+";"}).join(""),"}")}var l=s.gl,u=t.def(r,".location"),f=t.def(s.attributes,"[",u,"]");r=a.state;var c=a.buffer,h=[a.x,a.y,a.z,a.w],d=["buffer","normalized","offset","stride"];1===r?i():2===r?o():(t("if(",r,"===",1,"){"),i(),t("}else{"),o(),t("}"))}var s=e.shared;n.forEach(function(n){var s=n.name,l=r.attributes[s],u;if(l){if(!a(l))return;u=l.append(e,t)}else{if(!a(De))return;var f=e.scopeAttrib(s);u={};Object.keys(new ne).forEach(function(e){u[e]=t.def(f,".",e)})}o(e.link(n),i(n.info.type),u)})}function G(e,r,n,a,i){for(var o=e.shared,s=o.gl,l,u=0;u<a.length;++u){var c=a[u],h=c.name,d=c.info.type,v=n.uniforms[h],c=e.link(c)+".location",p;if(v){if(!i(v))continue;if(V(v)){h=v.value;if(35678===d||35680===d)d=e.link(h._texture||h.color[0]._texture),r(s,".uniform1i(",c,",",d+".bind());"),r.exit(d,".unbind();");else if(35674===d||35675===d||35676===d)h=e.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),v=2,35675===d?v=3:35676===d&&(v=4),r(s,".uniformMatrix",v,"fv(",c,",false,",h,");");else{switch(d){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:l="1i";break;case 5124:l="1i";break;case 35671:l="2i";break;case 35667:l="2i";break;case 35672:l="3i";break;case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}r(s,".uniform",l,"(",c,",",w(h)?Array.prototype.slice.call(h):h,");")}continue}else p=v.append(e,r)}else{if(!i(De))continue;p=r.def(o.uniforms,"[",t.id(h),"]")}35678===d?r("if(",p,"&&",p,'._reglType==="framebuffer"){',p,"=",p,".color[0];","}"):35680===d&&r("if(",p,"&&",p,'._reglType==="framebufferCube"){',p,"=",p,".color[0];","}");h=1;switch(d){case 35678:case 35680:d=r.def(p,"._texture");r(s,".uniform1i(",c,",",d,".bind());");r.exit(d,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i";h=2;break;case 35668:case 35672:l="3i";h=3;break;case 35669:case 35673:l="4i";h=4;break;case 5126:l="1f";break;case 35664:l="2f";h=2;break;case 35665:l="3f";h=3;break;case 35666:l="4f";h=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}r(s,".uniform",l,"(",c,",");if("M"===l.charAt(0)){var c=Math.pow(d-35674+2,2),g=e.global.def("new Float32Array(",c,")");r("false,(Array.isArray(",p,")||",p," instanceof Float32Array)?",p,":(",f(c,function(e){return g+"["+e+"]="+p+"["+e+"]"}),",",g,")")}else 1<h?r(f(h,function(e){return p+"["+e+"]"})):r(p);r(");")}}function X(e,t,r,n){function a(a){var i=f[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(e,r):i.append(e,t):t.def(u,".",a)}function i(){function e(){r(g,".drawElementsInstancedANGLE(",[h,v,m,d+"<<(("+m+"-5121)>>1)",p],");")}function t(){r(g,".drawArraysInstancedANGLE(",[h,d,v,p],");")}c?y?e():(r("if(",c,"){"),e(),r("}else{"),t(),r("}")):t()}function o(){function e(){r(l+".drawElements("+[h,v,m,d+"<<(("+m+"-5121)>>1)"]+");")}function t(){r(l+".drawArrays("+[h,d,v]+");")}c?y?e():(r("if(",c,"){"),e(),r("}else{"),t(),r("}")):t()}var s=e.shared,l=s.gl,u=s.draw,f=n.draw,c=function(){var a=f.elements,i=t;if(a){if(a.contextDep&&n.contextDynamic||a.propDep)i=r;a=a.append(e,i)}else a=i.def(u,".","elements");a&&i("if("+a+")"+l+".bindBuffer(34963,"+a+".buffer.buffer);");return a}(),h=a("primitive"),d=a("offset"),v=function(){var a=f.count,i=t;if(a){if(a.contextDep&&n.contextDynamic||a.propDep)i=r;a=a.append(e,i)}else a=i.def(u,".","count");return a}();if("number"===typeof v){if(0===v)return}else r("if(",v,"){"),r.exit("}");var p,g;oe&&(p=a("instances"),g=e.instancing);var m=c+".type",y=f.elements&&V(f.elements);oe&&("number"!==typeof p||0<=p)?"string"===typeof p?(r("if(",p,">0){"),i(),r("}else if(",p,"<0){"),o(),r("}")):i():o()}function W(e,t,r,n,a){t=b();a=t.proc("body",a);oe&&(t.instancing=a.def(t.shared.extensions,".angle_instanced_arrays"));e(t,a,r,n);return t.compile().body}function Y(e,t,r,n){P(e,t);F(e,t,r,n.attributes,function(){return!0});G(e,t,r,n.uniforms,function(){return!0});X(e,t,t,r)}function J(e,t){var r=e.proc("draw",1);P(e,r);O(e,r,t.context);I(e,r,t.framebuffer);D(e,r,t);R(e,r,t.state);z(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);r(e.shared.gl,".useProgram(",n,".program);");if(t.shader.program)Y(e,r,t,t.shader.program);else{var a=e.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(e.cond(o).then(o,".call(this,a0);")["else"](o,"=",a,"[",i,"]=",e.link(function(r){return W(Y,e,t,r,1)}),"(",n,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}function Q(e,t,r,n){function a(){return!0}e.batchId="a1";P(e,t);F(e,t,r,n.attributes,a);G(e,t,r,n.uniforms,a);X(e,t,t,r)}function $(e,t,r,n){function a(e){return e.contextDep&&o||e.propDep}function i(e){return!a(e)}P(e,t);var o=r.contextDep,s=t.def(),l=t.def();e.shared.props=l;e.batchId=s;var u=e.scope(),f=e.scope();t(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",f,"}",u.exit);r.needsContext&&O(e,f,r.context);r.needsFramebuffer&&I(e,f,r.framebuffer);R(e,f,r.state,a);r.profile&&a(r.profile)&&z(e,f,r,!1,!0);n?(F(e,u,r,n.attributes,i),F(e,f,r,n.attributes,a),G(e,u,r,n.uniforms,i),G(e,f,r,n.uniforms,a),X(e,u,f,r)):(t=e.global.def("{}"),n=r.shader.progVar.append(e,f),l=f.def(n,".id"),u=f.def(t,"[",l,"]"),f(e.shared.gl,".useProgram(",n,".program);","if(!",u,"){",u,"=",t,"[",l,"]=",e.link(function(t){return W(Q,e,r,t,2)}),"(",n,");}",u,".call(this,a0[",s,"],",s,");"))}function K(e,t){function r(e){return e.contextDep&&a||e.propDep}var n=e.proc("batch",2);e.batchId="0";P(e,n);var a=!1,i=!0;Object.keys(t.context).forEach(function(e){a=a||t.context[e].propDep});a||(O(e,n,t.context),i=!1);var o=t.framebuffer,s=!1;o?(o.propDep?a=s=!0:o.contextDep&&a&&(s=!0),s||I(e,n,o)):I(e,n,null);t.state.viewport&&t.state.viewport.propDep&&(a=!0);D(e,n,t);R(e,n,t.state,function(e){return!r(e)});t.profile&&r(t.profile)||z(e,n,t,!1,"a1");t.contextDep=a;t.needsContext=i;t.needsFramebuffer=s;i=t.shader.progVar;if(i.contextDep&&a||i.propDep)$(e,n,t,null);else if(i=i.append(e,n),n(e.shared.gl,".useProgram(",i,".program);"),t.shader.program)$(e,n,t,t.shader.program);else{var o=e.global.def("{}"),s=n.def(i,".id"),l=n.def(o,"[",s,"]");n(e.cond(l).then(l,".call(this,a0,a1);")["else"](l,"=",o,"[",s,"]=",e.link(function(r){return W($,e,t,r,2)}),"(",i,");",l,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}function ee(e,r){function n(t){var n=r.shader[t];n&&a.set(i.shader,"."+t,n.append(e,a))}var a=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;O(e,a,r.context);r.framebuffer&&r.framebuffer.append(e,a);j(Object.keys(r.state)).forEach(function(t){var n=r.state[t].append(e,a);w(n)?n.forEach(function(r,n){a.set(e.next[t],"["+n+"]",r)}):a.set(i.next,"."+t,n)});z(e,a,r,!0,!0);["elements","offset","count","instances","primitive"].forEach(function(t){var n=r.draw[t];n&&a.set(i.draw,"."+t,""+n.append(e,a))});Object.keys(r.uniforms).forEach(function(n){a.set(i.uniforms,"["+t.id(n)+"]",r.uniforms[n].append(e,a))});Object.keys(r.attributes).forEach(function(t){var n=r.attributes[t].append(e,a),i=e.scopeAttrib(t);Object.keys(new ne).forEach(function(e){a.set(i,"."+e,n[e])})});n("vert");n("frag");0<Object.keys(r.state).length&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;"));a("a1(",e.shared.context,",a0,",e.batchId,");")}function te(e){if("object"===typeof e&&!w(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(Z.isDynamic(e[t[r]]))return!0;return!1}}function re(e,t,r){function n(e,t){o.forEach(function(r){var n=a[r];Z.isDynamic(n)&&(n=e.invoke(t,n),t(f,".",r,"=",n,";"))})}var a=t["static"][r];if(a&&te(a)){var i=e.global,o=Object.keys(a),s=!1,l=!1,u=!1,f=e.global.def("{}");o.forEach(function(t){var r=a[t];if(Z.isDynamic(r))"function"===typeof r&&(r=a[t]=Z.unbox(r)),t=q(r,null),s=s||t.thisDep,u=u||t.propDep,l=l||t.contextDep;else{i(f,".",t,"=");switch(typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(e.link(r))}i(";")}});t.dynamic[r]=new Z.DynamicVariable(4,{thisDep:s,contextDep:l,propDep:u,ref:f,append:n});delete t["static"][r]}}var ne=u.Record,ie={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(ie.min=32775,ie.max=32776);var oe=r.angle_instanced_arrays,se=r.webgl_draw_buffers,le={dirty:!0,profile:p.profile},fe={},ce=[],he={},de={};m("dither",3024);m("blend.enable",3042);y("blend.color","blendColor",[0,0,0,0]);y("blend.equation","blendEquationSeparate",[32774,32774]);y("blend.func","blendFuncSeparate",[1,0,1,0]);m("depth.enable",2929,!0);y("depth.func","depthFunc",513);y("depth.range","depthRange",[0,1]);y("depth.mask","depthMask",!0);y("colorMask","colorMask",[!0,!0,!0,!0]);m("cull.enable",2884);y("cull.face","cullFace",1029);y("frontFace","frontFace",2305);y("lineWidth","lineWidth",1);m("polygonOffset.enable",32823);y("polygonOffset.offset","polygonOffset",[0,0]);m("sample.alpha",32926);m("sample.enable",32928);y("sample.coverage","sampleCoverage",[1,!1]);m("stencil.enable",2960);y("stencil.mask","stencilMask",-1);y("stencil.func","stencilFunc",[519,0,-1]);y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);m("scissor.enable",3089);y("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);y("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ve={gl:e,context:d,strings:t,next:fe,current:le,draw:h,elements:i,buffer:a,shader:c,attributes:u.state,uniforms:l,framebuffer:s,extensions:r,timer:v,isBufferArgs:N},pe={primTypes:ue,compareFuncs:Le,blendFuncs:Se,blendEquations:ie,stencilOps:Oe,glTypes:ae,orientationType:Ie};se&&(pe.backBuffer=[1029],pe.drawBuffer=f(n.maxDrawbuffers,function(e){return 0===e?[0]:f(e,function(e){return 36064+e})}));var ge=0;return{next:fe,current:le,procs:function(){var e=b(),t=e.proc("poll"),r=e.proc("refresh"),a=e.block();t(a);r(a);var i=e.shared,o=i.gl,s=i.next,l=i.current;a(l,".dirty=false;");I(e,t);I(e,r,null,!0);var u;oe&&(u=e.link(oe));for(var c=0;c<n.maxAttributes;++c){var h=r.def(i.attributes,"[",c,"]"),d=e.cond(h,".buffer");d.then(o,".enableVertexAttribArray(",c,");",o,".bindBuffer(",34962,",",h,".buffer.buffer);",o,".vertexAttribPointer(",c,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);")["else"](o,".disableVertexAttribArray(",c,");",o,".vertexAttrib4f(",c,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;");r(d);oe&&r(u,".vertexAttribDivisorANGLE(",c,",",h,".divisor);")}Object.keys(he).forEach(function(n){var i=he[n],u=a.def(s,".",n),f=e.block();f("if(",u,"){",o,".enable(",i,")}else{",o,".disable(",i,")}",l,".",n,"=",u,";");r(f);t("if(",u,"!==",l,".",n,"){",f,"}")});Object.keys(de).forEach(function(n){var i=de[n],u=le[n],c,h,d=e.block();d(o,".",i,"(");w(u)?(i=u.length,c=e.global.def(s,".",n),h=e.global.def(l,".",n),d(f(i,function(e){return c+"["+e+"]"}),");",f(i,function(e){return h+"["+e+"]="+c+"["+e+"];"}).join("")),t("if(",f(i,function(e){return c+"["+e+"]!=="+h+"["+e+"]"}).join("||"),"){",d,"}")):(c=a.def(s,".",n),h=a.def(l,".",n),d(c,");",l,".",n,"=",c,";"),t("if(",c,"!==",h,"){",d,"}"));r(d)});return e.compile()}(),compile:function(e,t,r,n,a){var i=b();i.stats=i.link(a);Object.keys(t["static"]).forEach(function(e){re(i,t,e)});Ce.forEach(function(t){re(i,e,t)});r=L(e,t,r,n,i);J(i,r);ee(i,r);K(i,r);return i.compile()}}}function X(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var W=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},Y=0,Z={DynamicVariable:e,define:function(t,n){return new e(t,r(n+""))},isDynamic:function(t){return"function"===typeof t&&!t._reglType||t instanceof e},unbox:function(t,r){return"function"===typeof t?new e(0,t):t},accessor:r},J={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},Q="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},$=h();$.zero=h();var K=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,a=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),a=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){i=e.createTexture();e.bindTexture(3553,i);e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();e.bindFramebuffer(36160,o);e.framebufferTexture2D(36160,36064,3553,i,0);e.bindTexture(3553,null);if(36053!==e.checkFramebufferStatus(36160))i=!1;else{e.viewport(0,0,1,1);e.clearColor(1,0,0,1);e.clear(16384);var s=$.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s);e.getError()?i=!1:(e.deleteFramebuffer(o),e.deleteTexture(i),i=1===s[0]);$.freeType(s)}}s=!0;s=e.createTexture();o=$.allocType(5121,36);e.activeTexture(33984);e.bindTexture(34067,s);e.texImage2D(34069,0,6408,3,3,0,6408,5121,o);$.freeType(o);e.bindTexture(34067,null);e.deleteTexture(s);s=!e.getError();return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:s}},ee=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},te=function(e){return Object.keys(e).map(function(t){return e[t]})},re={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,r,n){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;r=n||$.allocType(r,a);switch(t.length){case 0:break;case 1:n=t[0];for(t=0;t<n;++t)r[t]=e[t];break;case 2:n=t[0];t=t[1];for(i=a=0;i<n;++i)for(var o=e[i],s=0;s<t;++s)r[a++]=o[s];break;case 3:v(e,t[0],t[1],t[2],r,0);break;default:p(e,t,0,r,0)}return r}},ne={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ie={dynamic:35048,stream:35040,static:35044},oe=re.flatten,se=re.shape,le=[];le[5120]=1;le[5122]=2;le[5124]=4;le[5121]=1;le[5123]=2;le[5125]=4;le[5126]=4;var ue={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fe=new Float32Array(1),ce=new Uint32Array(fe.buffer),he=[9984,9986,9985,9987],de=[0,6409,6410,6407,6408],ve={};ve[6409]=ve[6406]=ve[6402]=1;ve[34041]=ve[6410]=2;ve[6407]=ve[35904]=3;ve[6408]=ve[35906]=4;var pe=A("HTMLCanvasElement"),ge=A("CanvasRenderingContext2D"),me=A("ImageBitmap"),ye=A("HTMLImageElement"),be=A("HTMLVideoElement"),xe=Object.keys(ne).concat([pe,ge,me,ye,be]),_e=[];_e[5121]=1;_e[5126]=4;_e[36193]=2;_e[5123]=2;_e[5125]=4;var we=[];we[32854]=2;we[32855]=2;we[36194]=2;we[34041]=4;we[33776]=.5;we[33777]=.5;we[33778]=1;we[33779]=1;we[35986]=.5;we[35987]=1;we[34798]=1;we[35840]=.5;we[35841]=.25;we[35842]=.5;we[35843]=.25;we[36196]=.5;var Ae=[];Ae[32854]=2;Ae[32855]=2;Ae[36194]=2;Ae[33189]=2;Ae[36168]=1;Ae[34041]=4;Ae[35907]=4;Ae[34836]=16;Ae[34842]=8;Ae[34843]=6;var ke=function(e,t,r,n,a){function i(e){this.id=u++;this.refCount=1;this.renderbuffer=e;this.format=32854;this.height=this.width=0;a.profile&&(this.stats={size:0})}function o(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null);e.deleteRenderbuffer(r);t.renderbuffer=null;t.refCount=0;delete f[t.id];n.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907);t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843);t.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(e){l[s[e]]=e});var u=0,f={};i.prototype.decRef=function(){0>=--this.refCount&&o(this)};a.profile&&(n.getTotalRenderbufferSize=function(){var e=0;Object.keys(f).forEach(function(t){e+=f[t].stats.size});return e});return{create:function(t,r){function o(t,r){var n=0,i=0,f=32854;"object"===typeof t&&t?("shape"in t?(i=t.shape,n=i[0]|0,i=i[1]|0):("radius"in t&&(n=i=t.radius|0),"width"in t&&(n=t.width|0),"height"in t&&(i=t.height|0)),"format"in t&&(f=s[t.format])):"number"===typeof t?(n=t|0,i="number"===typeof r?r|0:n):t||(n=i=1);if(n!==u.width||i!==u.height||f!==u.format)return o.width=u.width=n,o.height=u.height=i,u.format=f,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,f,n,i),a.profile&&(u.stats.size=Ae[u.format]*u.width*u.height),o.format=l[u.format],o}var u=new i(e.createRenderbuffer());f[u.id]=u;n.renderbufferCount++;o(t,r);o.resize=function(t,r){var n=t|0,i=r|0||n;if(n===u.width&&i===u.height)return o;o.width=u.width=n;o.height=u.height=i;e.bindRenderbuffer(36161,u.renderbuffer);e.renderbufferStorage(36161,u.format,n,i);a.profile&&(u.stats.size=Ae[u.format]*u.width*u.height);return o};o._reglType="renderbuffer";o._renderbuffer=u;a.profile&&(o.stats=u.stats);o.destroy=function(){u.decRef()};return o},clear:function(){te(f).forEach(o)},restore:function(){te(f).forEach(function(t){t.renderbuffer=e.createRenderbuffer();e.bindRenderbuffer(36161,t.renderbuffer);e.renderbufferStorage(36161,t.format,t.width,t.height)});e.bindRenderbuffer(36161,null)}}},Te=[];Te[6408]=4;Te[6407]=3;var Me=[];Me[5121]=1;Me[5126]=4;Me[36193]=2;var Ee=["x","y","z","w"],Ce="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Se={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Le={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Oe={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ie={cw:2304,ccw:2305},De=new U(!1,!1,!1,function(){}),Re=function(e,t){function r(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function n(e,t,n){var a=s.pop()||new r;a.startQueryIndex=e;a.endQueryIndex=t;a.sum=0;a.stats=n;l.push(a)}var a=t.ext_disjoint_timer_query;if(!a)return null;var i=[],o=[],s=[],l=[],u=[],f=[];return{beginQuery:function(e){var t=i.pop()||a.createQueryEXT();a.beginQueryEXT(35007,t);o.push(t);n(o.length-1,o.length,e)},endQuery:function(){a.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e,t;e=o.length;if(0!==e){f.length=Math.max(f.length,e+1);u.length=Math.max(u.length,e+1);u[0]=0;var r=f[0]=0;for(t=e=0;t<o.length;++t){var n=o[t];a.getQueryObjectEXT(n,34919)?(r+=a.getQueryObjectEXT(n,34918),i.push(n)):o[e++]=n;u[t+1]=r;f[t+1]=e}o.length=e;for(t=e=0;t<l.length;++t){var r=l[t],c=r.startQueryIndex,n=r.endQueryIndex;r.sum+=u[n]-u[c];c=f[c];n=f[n];n===c?(r.stats.gpuTime+=r.sum/1e6,s.push(r)):(r.startQueryIndex=c,r.endQueryIndex=n,l[e++]=r)}l.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){i.push.apply(i,o);for(var e=0;e<i.length;e++)a.deleteQueryEXT(i[e]);o.length=0;i.length=0},restore:function(){o.length=0;i.length=0}}};return function(e){function t(){if(0===q.length)k&&k.update(),te=null;else{te=J.next(t);d();for(var e=q.length-1;0<=e;--e){var r=q[e];r&&r(C,null,0)}g.flush();k&&k.update()}}function r(){!te&&0<q.length&&(te=J.next(t))}function a(){te&&(J.cancel(t),te=null)}function i(e){e.preventDefault();a();Y.forEach(function(e){e()})}function o(e){g.getError();y.restore();F.restore();I.restore();B.restore();N.restore();j.restore();k&&k.restore();U.procs.refresh();r();$.forEach(function(e){e()})}function s(e){function t(e){var t={},r={};Object.keys(e).forEach(function(n){var a=e[n];Z.isDynamic(a)?r[n]=Z.unbox(a,n):t[n]=a});return{dynamic:r,static:t}}function r(e){for(;f.length<e;)f.push(null);return f}var n=t(e.context||{}),a=t(e.uniforms||{}),i=t(e.attributes||{}),o=t(function(e){function t(e){if(e in r){var t=r[e];delete r[e];Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}var r=W({},e);delete r.uniforms;delete r.attributes;delete r.context;"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op);t("blend");t("depth");t("cull");t("stencil");t("polygonOffset");t("scissor");t("sample");return r}(e));e={gpuTime:0,cpuTime:0,count:0};var n=U.compile(o,i,a,n,e),s=n.draw,l=n.batch,u=n.scope,f=[];return W(function(e,t){var n;if("function"===typeof e)return u.call(this,null,e,0);if("function"===typeof t)if("number"===typeof e)for(n=0;n<e;++n)u.call(this,null,t,n);else if(Array.isArray(e))for(n=0;n<e.length;++n)u.call(this,e[n],t,n);else return u.call(this,e,t,0);else if("number"===typeof e){if(0<e)return l.call(this,r(e|0),e|0)}else if(Array.isArray(e)){if(e.length)return l.call(this,e,e.length)}else return s.call(this,e)},{stats:e})}function f(e,t){var r=0;U.procs.poll();var n=t.color;n&&(g.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384);"depth"in t&&(g.clearDepth(+t.depth),r|=256);"stencil"in t&&(g.clearStencil(t.stencil|0),r|=1024);g.clear(r)}function c(e){q.push(e);r();return{cancel:function(){function t(){var e=X(q,t);q[e]=q[q.length-1];--q.length;0>=q.length&&a()}var r=X(q,e);q[r]=t}}}function h(){var e=V.viewport,t=V.scissor_box;e[0]=e[1]=t[0]=t[1]=0;C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=e[2]=t[2]=g.drawingBufferWidth;C.viewportHeight=C.framebufferHeight=C.drawingBufferHeight=e[3]=t[3]=g.drawingBufferHeight}function d(){C.tick+=1;C.time=p();h();U.procs.poll()}function v(){h();U.procs.refresh();k&&k.update()}function p(){return(Q()-T)/1e3}e=l(e);if(!e)return null;var g=e.gl,m=g.getContextAttributes();g.isContextLost();var y=u(g,e);if(!y)return null;var _=n(),w={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},A=y.extensions,k=Re(g,A),T=Q(),M=g.drawingBufferWidth,E=g.drawingBufferHeight,C={tick:0,time:0,viewportWidth:M,viewportHeight:E,framebufferWidth:M,framebufferHeight:E,drawingBufferWidth:M,drawingBufferHeight:E,pixelRatio:e.pixelRatio},S=K(g,A),M=D(g,A,S,_),I=b(g,w,e,M),z=x(g,A,I,w),F=R(g,_,w,e),B=L(g,A,S,function(){U.procs.poll()},C,w,e),N=ke(g,A,S,w,e),j=O(g,A,S,B,N,w),U=G(g,_,A,S,I,z,B,j,{},M,F,{elements:null,primitive:4,count:-1,offset:0,instances:-1},C,k,e),_=P(g,j,U.procs.poll,C,m,A,S),V=U.next,H=g.canvas,q=[],Y=[],$=[],ee=[e.onDestroy],te=null;H&&(H.addEventListener("webglcontextlost",i,!1),H.addEventListener("webglcontextrestored",o,!1));var re=j.setFBO=s({framebuffer:Z.define.call(null,1,"framebuffer")});v();m=W(s,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)re(W({framebuffer:e.framebuffer.faces[t]},e),f);else re(e,f);else f(null,e)},prop:Z.define.bind(null,1),context:Z.define.bind(null,2),this:Z.define.bind(null,3),draw:s({}),buffer:function(e){return I.create(e,34962,!1,!1)},elements:function(e){return z.create(e,!1)},texture:B.create2D,cube:B.createCube,renderbuffer:N.create,framebuffer:j.create,framebufferCube:j.createCube,attributes:m,frame:c,on:function(e,t){var r;switch(e){case"frame":return c(t);case"lost":r=Y;break;case"restore":r=$;break;case"destroy":r=ee}r.push(t);return{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1];r.pop();break}}}},limits:S,hasExtension:function(e){return 0<=S.extensions.indexOf(e.toLowerCase())},read:_,destroy:function(){q.length=0;a();H&&(H.removeEventListener("webglcontextlost",i),H.removeEventListener("webglcontextrestored",o));F.clear();j.clear();N.clear();B.clear();z.clear();I.clear();k&&k.clear();ee.forEach(function(e){e()})},_gl:g,_refresh:v,poll:function(){d();k&&k.update()},now:p,stats:w});e.onDone(null,m);return m}})},{}],261:[function(e,t,r){"use strict";var n="";var a;t.exports=i;function i(e,t){if(typeof e!=="string"){throw new TypeError("expected a string")}if(t===1)return e;if(t===2)return e+e;var r=e.length*t;if(a!==e||typeof a==="undefined"){a=e;n=""}else if(n.length>=r){return n.substr(0,r)}while(r>n.length&&t>1){if(t&1){n+=e}t>>=1;e+=e}n+=e;n=n.substr(0,r);return n}},{}],262:[function(e,t,r){"use strict";var n=e("two-product");var a=e("robust-sum");var i=e("robust-subtract");var o=e("robust-scale");var s=6;function l(e,t){var r=new Array(e.length-1);for(var n=1;n<e.length;++n){var a=r[n-1]=new Array(e.length-1);for(var i=0,o=0;i<e.length;++i){if(i===t){continue}a[o++]=e[n][i]}}return r}function u(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=new Array(e);for(var n=0;n<e;++n){t[r][n]=["m",n,"[",e-r-2,"]"].join("")}}return t}function f(e){if(e.length===1){return e[0]}else if(e.length===2){return["sum(",e[0],",",e[1],")"].join("")}else{var t=e.length>>1;return["sum(",f(e.slice(0,t)),",",f(e.slice(t)),")"].join("")}}function c(e,t){if(e.charAt(0)==="m"){if(t.charAt(0)==="w"){var r=e.split("[");return["w",t.substr(1),"m",r[0].substr(1)].join("")}else{return["prod(",e,",",t,")"].join("")}}else{return c(t,e)}}function h(e){if(e&1!==0){return"-"}return""}function d(e){if(e.length===2){return[["diff(",c(e[0][0],e[1][1]),",",c(e[1][0],e[0][1]),")"].join("")]}else{var t=[];for(var r=0;r<e.length;++r){t.push(["scale(",f(d(l(e,r))),",",h(r),e[0][r],")"].join(""))}return t}}function v(e,t){var r=[];for(var n=0;n<t-2;++n){r.push(["prod(m",e,"[",n,"],m",e,"[",n,"])"].join(""))}return f(r)}function p(e){var t=[];var r=[];var s=u(e);for(var c=0;c<e;++c){s[0][c]="1";s[e-1][c]="w"+c}for(var c=0;c<e;++c){if((c&1)===0){t.push.apply(t,d(l(s,c)))}else{r.push.apply(r,d(l(s,c)))}}var h=f(t);var p=f(r);var g="exactInSphere"+e;var m=[];for(var c=0;c<e;++c){m.push("m"+c)}var y=["function ",g,"(",m.join(),"){"];for(var c=0;c<e;++c){y.push("var w",c,"=",v(c,e),";");for(var b=0;b<e;++b){if(b!==c){y.push("var w",c,"m",b,"=scale(w",c,",m",b,"[0]);")}}}y.push("var p=",h,",n=",p,",d=diff(p,n);return d[d.length-1];}return ",g);var x=new Function("sum","diff","prod","scale",y.join(""));return x(a,i,n,o)}function g(){return 0}function m(){return 0}function y(){return 0}var b=[g,m,y];function x(e){var t=b[e.length];if(!t){t=b[e.length]=p(e.length)}return t.apply(undefined,e)}function _(){while(b.length<=s){b.push(p(b.length))}var e=[];var r=["slow"];for(var n=0;n<=s;++n){e.push("a"+n);r.push("o"+n)}var a=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var n=2;n<=s;++n){a.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");")}a.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");r.push(a.join(""));var i=Function.apply(undefined,r);t.exports=i.apply(undefined,[x].concat(b));for(var n=0;n<=s;++n){t.exports[n]=b[n]}}_()},{"robust-scale":265,"robust-subtract":267,"robust-sum":268,"two-product":289}],263:[function(e,t,r){"use strict";var n=e("two-product");var a=e("robust-sum");var i=e("robust-scale");var o=e("robust-subtract");var s=5;var l=1.1102230246251565e-16;var u=(3+16*l)*l;var f=(7+56*l)*l;function c(e,t){var r=new Array(e.length-1);for(var n=1;n<e.length;++n){var a=r[n-1]=new Array(e.length-1);for(var i=0,o=0;i<e.length;++i){if(i===t){continue}a[o++]=e[n][i]}}return r}function h(e){var t=new Array(e);for(var r=0;r<e;++r){t[r]=new Array(e);for(var n=0;n<e;++n){t[r][n]=["m",n,"[",e-r-1,"]"].join("")}}return t}function d(e){if(e&1){return"-"}return""}function v(e){if(e.length===1){return e[0]}else if(e.length===2){return["sum(",e[0],",",e[1],")"].join("")}else{var t=e.length>>1;return["sum(",v(e.slice(0,t)),",",v(e.slice(t)),")"].join("")}}function p(e){if(e.length===2){return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")]}else{var t=[];for(var r=0;r<e.length;++r){t.push(["scale(",v(p(c(e,r))),",",d(r),e[0][r],")"].join(""))}return t}}function g(e){var t=[];var r=[];var s=h(e);var l=[];for(var u=0;u<e;++u){if((u&1)===0){t.push.apply(t,p(c(s,u)))}else{r.push.apply(r,p(c(s,u)))}l.push("m"+u)}var f=v(t);var d=v(r);var g="orientation"+e+"Exact";var m=["function ",g,"(",l.join(),"){var p=",f,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",g].join("");var y=new Function("sum","prod","scale","sub",m);return y(a,n,i,o)}var m=g(3);var y=g(4);var b=[function e(){return 0},function e(){return 0},function e(t,r){return r[0]-t[0]},function e(t,r,n){var a=(t[1]-n[1])*(r[0]-n[0]);var i=(t[0]-n[0])*(r[1]-n[1]);var o=a-i;var s;if(a>0){if(i<=0){return o}else{s=a+i}}else if(a<0){if(i>=0){return o}else{s=-(a+i)}}else{return o}var l=u*s;if(o>=l||o<=-l){return o}return m(t,r,n)},function e(t,r,n,a){var i=t[0]-a[0];var o=r[0]-a[0];var s=n[0]-a[0];var l=t[1]-a[1];var u=r[1]-a[1];var c=n[1]-a[1];var h=t[2]-a[2];var d=r[2]-a[2];var v=n[2]-a[2];var p=o*c;var g=s*u;var m=s*l;var b=i*c;var x=i*u;var _=o*l;var w=h*(p-g)+d*(m-b)+v*(x-_);var A=(Math.abs(p)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(b))*Math.abs(d)+(Math.abs(x)+Math.abs(_))*Math.abs(v);var k=f*A;if(w>k||-w>k){return w}return y(t,r,n,a)}];function x(e){var t=b[e.length];if(!t){t=b[e.length]=g(e.length)}return t.apply(undefined,e)}function _(){while(b.length<=s){b.push(g(b.length))}var e=[];var r=["slow"];for(var n=0;n<=s;++n){e.push("a"+n);r.push("o"+n)}var a=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var n=2;n<=s;++n){a.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");")}a.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");r.push(a.join(""));var i=Function.apply(undefined,r);t.exports=i.apply(undefined,[x].concat(b));for(var n=0;n<=s;++n){t.exports[n]=b[n]}}_()},{"robust-scale":265,"robust-subtract":267,"robust-sum":268,"two-product":289}],264:[function(e,t,r){"use strict";var n=e("robust-sum");var a=e("robust-scale");t.exports=i;function i(e,t){if(e.length===1){return a(t,e[0])}if(t.length===1){return a(e,t[0])}if(e.length===0||t.length===0){return[0]}var r=[0];if(e.length<t.length){for(var i=0;i<e.length;++i){r=n(r,a(t,e[i]))}}else{for(var i=0;i<t.length;++i){r=n(r,a(e,t[i]))}}return r}},{"robust-scale":265,"robust-sum":268}],265:[function(e,t,r){"use strict";var n=e("two-product");var a=e("two-sum");t.exports=i;function i(e,t){var r=e.length;if(r===1){var i=n(e[0],t);if(i[0]){return i}return[i[1]]}var o=new Array(2*r);var s=[.1,.1];var l=[.1,.1];var u=0;n(e[0],t,s);if(s[0]){o[u++]=s[0]}for(var f=1;f<r;++f){n(e[f],t,l);var c=s[1];a(c,l[0],s);if(s[0]){o[u++]=s[0]}var h=l[1];var d=s[1];var v=h+d;var p=v-h;var g=d-p;s[1]=v;if(g){o[u++]=g}}if(s[1]){o[u++]=s[1]}if(u===0){o[u++]=0}o.length=u;return o}},{"two-product":289,"two-sum":290}],266:[function(e,t,r){"use strict";t.exports=i;var n=e("robust-orientation")[3];function a(e,t,r,n){for(var a=0;a<2;++a){var i=e[a];var o=t[a];var s=Math.min(i,o);var l=Math.max(i,o);var u=r[a];var f=n[a];var c=Math.min(u,f);var h=Math.max(u,f);if(h<s||l<c){return false}}return true}function i(e,t,r,i){var o=n(e,r,i);var s=n(t,r,i);if(o>0&&s>0||o<0&&s<0){return false}var l=n(r,e,t);var u=n(i,e,t);if(l>0&&u>0||l<0&&u<0){return false}if(o===0&&s===0&&l===0&&u===0){return a(e,t,r,i)}return true}},{"robust-orientation":263}],267:[function(e,t,r){"use strict";t.exports=a;function n(e,t){var r=e+t;var n=r-e;var a=r-n;var i=t-n;var o=e-a;var s=o+i;if(s){return[s,r]}return[r]}function a(e,t){var r=e.length|0;var a=t.length|0;if(r===1&&a===1){return n(e[0],-t[0])}var i=r+a;var o=new Array(i);var s=0;var l=0;var u=0;var f=Math.abs;var c=e[l];var h=f(c);var d=-t[u];var v=f(d);var p,g;if(h<v){g=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{g=d;u+=1;if(u<a){d=-t[u];v=f(d)}}if(l<r&&h<v||u>=a){p=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{p=d;u+=1;if(u<a){d=-t[u];v=f(d)}}var m=p+g;var y=m-p;var b=g-y;var x=b;var _=m;var w,A,k,T,M;while(l<r&&u<a){if(h<v){p=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{p=d;u+=1;if(u<a){d=-t[u];v=f(d)}}g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w}while(l<r){p=c;g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w;l+=1;if(l<r){c=e[l]}}while(u<a){p=d;g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w;u+=1;if(u<a){d=-t[u]}}if(x){o[s++]=x}if(_){o[s++]=_}if(!s){o[s++]=0}o.length=s;return o}},{}],268:[function(e,t,r){"use strict";t.exports=a;function n(e,t){var r=e+t;var n=r-e;var a=r-n;var i=t-n;var o=e-a;var s=o+i;if(s){return[s,r]}return[r]}function a(e,t){var r=e.length|0;var a=t.length|0;if(r===1&&a===1){return n(e[0],t[0])}var i=r+a;var o=new Array(i);var s=0;var l=0;var u=0;var f=Math.abs;var c=e[l];var h=f(c);var d=t[u];var v=f(d);var p,g;if(h<v){g=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{g=d;u+=1;if(u<a){d=t[u];v=f(d)}}if(l<r&&h<v||u>=a){p=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{p=d;u+=1;if(u<a){d=t[u];v=f(d)}}var m=p+g;var y=m-p;var b=g-y;var x=b;var _=m;var w,A,k,T,M;while(l<r&&u<a){if(h<v){p=c;l+=1;if(l<r){c=e[l];h=f(c)}}else{p=d;u+=1;if(u<a){d=t[u];v=f(d)}}g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w}while(l<r){p=c;g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w;l+=1;if(l<r){c=e[l]}}while(u<a){p=d;g=x;m=p+g;y=m-p;b=g-y;if(b){o[s++]=b}w=_+m;A=w-_;k=w-A;T=m-A;M=_-k;x=M+T;_=w;u+=1;if(u<a){d=t[u]}}if(x){o[s++]=x}if(_){o[s++]=_}if(!s){o[s++]=0}o.length=s;return o}},{}],269:[function(e,t,r){"use strict";t.exports=function e(t){if(t<0){return-1}if(t>0){return 1}return 0}},{}],270:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{dup:41}],271:[function(e,t,r){"use strict";"use restrict";var n=e("bit-twiddle"),a=e("union-find");function i(e){var t=0,r=Math.max;for(var n=0,a=e.length;n<a;++n){t=r(t,e[n].length)}return t-1}r.dimension=i;function o(e){var t=-1,r=Math.max;for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){t=r(t,i[o])}}return t+1}r.countVertices=o;function s(e){var t=new Array(e.length);for(var r=0,n=e.length;r<n;++r){t[r]=e[r].slice(0)}return t}r.cloneCells=s;function l(e,t){var r=e.length,n=e.length-t.length,a=Math.min;if(n){return n}switch(r){case 0:return 0;case 1:return e[0]-t[0];case 2:var i=e[0]+e[1]-t[0]-t[1];if(i){return i}return a(e[0],e[1])-a(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];i=o+e[2]-(s+t[2]);if(i){return i}var l=a(e[0],e[1]),u=a(t[0],t[1]),i=a(l,e[2])-a(u,t[2]);if(i){return i}return a(l+e[2],o)-a(u+t[2],s);default:var f=e.slice(0);f.sort();var c=t.slice(0);c.sort();for(var h=0;h<r;++h){n=f[h]-c[h];if(n){return n}}return 0}}r.compareCells=l;function u(e,t){return l(e[0],t[0])}function f(e,t){if(t){var r=e.length;var n=new Array(r);for(var a=0;a<r;++a){n[a]=[e[a],t[a]]}n.sort(u);for(var a=0;a<r;++a){e[a]=n[a][0];t[a]=n[a][1]}return e}else{e.sort(l);return e}}r.normalize=f;function c(e){if(e.length===0){return[]}var t=1,r=e.length;for(var n=1;n<r;++n){var a=e[n];if(l(a,e[n-1])){if(n===t){t++;continue}e[t++]=a}}e.length=t;return e}r.unique=c;function h(e,t){var r=0,n=e.length-1,a=-1;while(r<=n){var i=r+n>>1,o=l(e[i],t);if(o<=0){if(o===0){a=i}r=i+1}else if(o>0){n=i-1}}return a}r.findCell=h;function d(e,t){var r=new Array(e.length);for(var a=0,i=r.length;a<i;++a){r[a]=[]}var o=[];for(var a=0,s=t.length;a<s;++a){var u=t[a];var f=u.length;for(var c=1,d=1<<f;c<d;++c){o.length=n.popCount(c);var v=0;for(var p=0;p<f;++p){if(c&1<<p){o[v++]=u[p]}}var g=h(e,o);if(g<0){continue}while(true){r[g++].push(a);if(g>=e.length||l(e[g],o)!==0){break}}}}return r}r.incidence=d;function v(e,t){if(!t){return d(c(g(e,0)),e,0)}var r=new Array(t);for(var n=0;n<t;++n){r[n]=[]}for(var n=0,a=e.length;n<a;++n){var i=e[n];for(var o=0,s=i.length;o<s;++o){r[i[o]].push(n)}}return r}r.dual=v;function p(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r],i=a.length|0;for(var o=1,s=1<<i;o<s;++o){var l=[];for(var u=0;u<i;++u){if(o>>>u&1){l.push(a[u])}}t.push(l)}}return f(t)}r.explode=p;function g(e,t){if(t<0){return[]}var r=[],a=(1<<t+1)-1;for(var i=0;i<e.length;++i){var o=e[i];for(var s=a;s<1<<o.length;s=n.nextCombination(s)){var l=new Array(t+1),u=0;for(var c=0;c<o.length;++c){if(s&1<<c){l[u++]=o[c]}}r.push(l)}}return f(r)}r.skeleton=g;function m(e){var t=[];for(var r=0,n=e.length;r<n;++r){var a=e[r];for(var i=0,o=a.length;i<o;++i){var s=new Array(a.length-1);for(var l=0,u=0;l<o;++l){if(l!==i){s[u++]=a[l]}}t.push(s)}}return f(t)}r.boundary=m;function y(e,t){var r=new a(t);for(var n=0;n<e.length;++n){var i=e[n];for(var o=0;o<i.length;++o){for(var s=o+1;s<i.length;++s){r.link(i[o],i[s])}}}var l=[],u=r.ranks;for(var n=0;n<u.length;++n){u[n]=-1}for(var n=0;n<e.length;++n){var f=r.find(e[n][0]);if(u[f]<0){u[f]=l.length;l.push([e[n].slice(0)])}else{l[u[f]].push(e[n].slice(0))}}return l}function b(e){var t=c(f(g(e,0))),r=new a(t.length);for(var n=0;n<e.length;++n){var i=e[n];for(var o=0;o<i.length;++o){var s=h(t,[i[o]]);for(var l=o+1;l<i.length;++l){r.link(s,h(t,[i[l]]))}}}var u=[],d=r.ranks;for(var n=0;n<d.length;++n){d[n]=-1}for(var n=0;n<e.length;++n){var v=r.find(h(t,[e[n][0]]));if(d[v]<0){d[v]=u.length;u.push([e[n].slice(0)])}else{u[d[v]].push(e[n].slice(0))}}return u}function x(e,t){if(t){return y(e,t)}return b(e)}r.connectedComponents=x},{"bit-twiddle":270,"union-find":272}],272:[function(e,t,r){"use strict";"use restrict";t.exports=n;function n(e){this.roots=new Array(e);this.ranks=new Array(e);for(var t=0;t<e;++t){this.roots[t]=t;this.ranks[t]=0}}n.prototype.length=function(){return this.roots.length};n.prototype.makeSet=function(){var e=this.roots.length;this.roots.push(e);this.ranks.push(0);return e};n.prototype.find=function(e){var t=this.roots;while(t[e]!==e){var r=t[e];t[e]=t[r];e=r}return e};n.prototype.link=function(e,t){var r=this.find(e),n=this.find(t);if(r===n){return}var a=this.ranks,i=this.roots,o=a[r],s=a[n];if(o<s){i[r]=n}else if(s<o){i[n]=r}else{i[n]=r;++a[r]}}},{}],273:[function(e,t,r){"use strict";t.exports=o;var n=e("robust-orientation");var a=e("simplicial-complex");function i(e,t,r){var a=Math.abs(n(e,t,r));var i=Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2));return a/i}function o(e,t,r){var n=t.length;var o=e.length;var s=new Array(n);var l=new Array(n);var u=new Array(n);var f=new Array(n);for(var c=0;c<n;++c){s[c]=l[c]=-1;u[c]=Infinity;f[c]=false}for(var c=0;c<o;++c){var h=e[c];if(h.length!==2){throw new Error("Input must be a graph")}var d=h[1];var v=h[0];if(l[v]!==-1){l[v]=-2}else{l[v]=d}if(s[d]!==-1){s[d]=-2}else{s[d]=v}}function p(e){if(f[e]){return Infinity}var r=s[e];var n=l[e];if(r<0||n<0){return Infinity}else{return i(t[e],t[r],t[n])}}function g(e,t){var r=k[e];var n=k[t];k[e]=n;k[t]=r;T[r]=t;T[n]=e}function m(e){return u[k[e]]}function y(e){if(e&1){return e-1>>1}return(e>>1)-1}function b(e){var t=m(e);while(true){var r=t;var n=2*e+1;var a=2*(e+1);var i=e;if(n<E){var o=m(n);if(o<r){i=n;r=o}}if(a<E){var s=m(a);if(s<r){i=a}}if(i===e){return e}g(e,i);e=i}}function x(e){var t=m(e);while(e>0){var r=y(e);if(r>=0){var n=m(r);if(t<n){g(e,r);e=r;continue}}return e}}function _(){if(E>0){var e=k[0];g(0,E-1);E-=1;b(0);return e}return-1}function w(e,t){var r=k[e];if(u[r]===t){return e}u[r]=-Infinity;x(e);_();u[r]=t;E+=1;return x(E-1)}function A(e){if(f[e]){return}f[e]=true;var t=s[e];var r=l[e];if(s[r]>=0){s[r]=t}if(l[t]>=0){l[t]=r}if(T[t]>=0){w(T[t],p(t))}if(T[r]>=0){w(T[r],p(r))}}var k=[];var T=new Array(n);for(var c=0;c<n;++c){var M=u[c]=p(c);if(M<Infinity){T[c]=k.length;k.push(c)}else{T[c]=-1}}var E=k.length;for(var c=E>>1;c>=0;--c){b(c)}while(true){var C=_();if(C<0||u[C]>r){break}A(C)}var S=[];for(var c=0;c<n;++c){if(!f[c]){T[c]=S.length;S.push(t[c].slice())}}var L=S.length;function O(e,t){if(e[t]<0){return t}var r=t;var n=t;do{var a=e[n];if(!f[n]||a<0||a===n){break}n=a;a=e[n];if(!f[n]||a<0||a===n){break}n=a;r=e[r]}while(r!==n);for(var i=t;i!==n;i=e[i]){e[i]=n}return n}var I=[];e.forEach(function(e){var t=O(s,e[0]);var r=O(l,e[1]);if(t>=0&&r>=0&&t!==r){var n=T[t];var a=T[r];if(n!==a){I.push([n,a])}}});a.unique(a.normalize(I));return{positions:S,edges:I}}},{"robust-orientation":263,"simplicial-complex":271}],274:[function(e,t,r){"use strict";t.exports=i;var n=e("robust-orientation");function a(e,t){var r,a;if(t[0][0]<t[1][0]){r=t[0];a=t[1]}else if(t[0][0]>t[1][0]){r=t[1];a=t[0]}else{var i=Math.min(e[0][1],e[1][1]);var o=Math.max(e[0][1],e[1][1]);var s=Math.min(t[0][1],t[1][1]);var l=Math.max(t[0][1],t[1][1]);if(o<s){return o-s}if(i>l){return i-l}return o-l}var u,f;if(e[0][1]<e[1][1]){u=e[0];f=e[1]}else{u=e[1];f=e[0]}var c=n(a,r,u);if(c){return c}c=n(a,r,f);if(c){return c}return f-a}function i(e,t){var r,i;if(t[0][0]<t[1][0]){r=t[0];i=t[1]}else if(t[0][0]>t[1][0]){r=t[1];i=t[0]}else{return a(t,e)}var o,s;if(e[0][0]<e[1][0]){o=e[0];s=e[1]}else if(e[0][0]>e[1][0]){o=e[1];s=e[0]}else{return-a(e,t)}var l=n(r,i,s);var u=n(r,i,o);if(l<0){if(u<=0){return l}}else if(l>0){if(u>=0){return l}}else if(u){return u}l=n(s,o,i);u=n(s,o,r);if(l<0){if(u<=0){return l}}else if(l>0){if(u>=0){return l}}else if(u){return u}return i[0]-s[0]}},{"robust-orientation":263}],275:[function(e,t,r){"use strict";t.exports=d;var n=e("binary-search-bounds");var a=e("functional-red-black-tree");var i=e("robust-orientation");var o=e("./lib/order-segments");function s(e,t,r){this.slabs=e;this.coordinates=t;this.horizontal=r}var l=s.prototype;function u(e,t){return e.y-t}function f(e,t){var r=null;while(e){var n=e.key;var a,o;if(n[0][0]<n[1][0]){a=n[0];o=n[1]}else{a=n[1];o=n[0]}var s=i(a,o,t);if(s<0){e=e.left}else if(s>0){if(t[0]!==n[1][0]){r=e;e=e.right}else{var l=f(e.right,t);if(l){return l}e=e.left}}else{if(t[0]!==n[1][0]){return e}else{var l=f(e.right,t);if(l){return l}e=e.left}}}return r}l.castUp=function(e){var t=n.le(this.coordinates,e[0]);if(t<0){return-1}var r=this.slabs[t];var a=f(this.slabs[t],e);var s=-1;if(a){s=a.value}if(this.coordinates[t]===e[0]){var l=null;if(a){l=a.key}if(t>0){var c=f(this.slabs[t-1],e);if(c){if(l){if(o(c.key,l)>0){l=c.key;s=c.value}}else{s=c.value;l=c.key}}}var h=this.horizontal[t];if(h.length>0){var d=n.ge(h,e[1],u);if(d<h.length){var v=h[d];if(e[1]===v.y){if(v.closed){return v.index}else{while(d<h.length-1&&h[d+1].y===e[1]){d=d+1;v=h[d];if(v.closed){return v.index}}if(v.y===e[1]&&!v.start){d=d+1;if(d>=h.length){return s}v=h[d]}}}if(v.start){if(l){var p=i(l[0],l[1],[e[0],v.y]);if(l[0][0]>l[1][0]){p=-p}if(p>0){s=v.index}}else{s=v.index}}else if(v.y!==e[1]){s=v.index}}}}return s};function c(e,t,r,n){this.y=e;this.index=t;this.start=r;this.closed=n}function h(e,t,r,n){this.x=e;this.segment=t;this.create=r;this.index=n}function d(e){var t=e.length;var r=2*t;var n=new Array(r);for(var i=0;i<t;++i){var l=e[i];var u=l[0][0]<l[1][0];n[2*i]=new h(l[0][0],l,u,i);n[2*i+1]=new h(l[1][0],l,!u,i)}n.sort(function(e,t){var r=e.x-t.x;if(r){return r}r=e.create-t.create;if(r){return r}return Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1])});var f=a(o);var d=[];var v=[];var p=[];var g=-Infinity;for(var i=0;i<r;){var m=n[i].x;var y=[];while(i<r){var b=n[i];if(b.x!==m){break}i+=1;if(b.segment[0][0]===b.x&&b.segment[1][0]===b.x){if(b.create){if(b.segment[0][1]<b.segment[1][1]){y.push(new c(b.segment[0][1],b.index,true,true));y.push(new c(b.segment[1][1],b.index,false,false))}else{y.push(new c(b.segment[1][1],b.index,true,false));y.push(new c(b.segment[0][1],b.index,false,true))}}}else{if(b.create){f=f.insert(b.segment,b.index)}else{f=f.remove(b.segment)}}}d.push(f.root);v.push(m);p.push(y)}return new s(d,v,p)}},{"./lib/order-segments":274,"binary-search-bounds":40,"functional-red-black-tree":155,"robust-orientation":263}],276:[function(t,r,n){!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function r(e){return i(s(e),arguments)}function a(e,t){return r.apply(null,[e].concat(t||[]))}function i(e,n){var a=1,i=e.length,o,s="",l,u,f,c,h,d,v,p;for(l=0;l<i;l++){if(typeof e[l]==="string"){s+=e[l]}else if(Array.isArray(e[l])){f=e[l];if(f[2]){o=n[a];for(u=0;u<f[2].length;u++){if(!o.hasOwnProperty(f[2][u])){throw new Error(r('[sprintf] property "%s" does not exist',f[2][u]))}o=o[f[2][u]]}}else if(f[1]){o=n[f[1]]}else{o=n[a++]}if(t.not_type.test(f[8])&&t.not_primitive.test(f[8])&&o instanceof Function){o=o()}if(t.numeric_arg.test(f[8])&&(typeof o!=="number"&&isNaN(o))){throw new TypeError(r("[sprintf] expecting number but found %T",o))}if(t.number.test(f[8])){v=o>=0}switch(f[8]){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,f[6]?parseInt(f[6]):0);break;case"e":o=f[7]?parseFloat(o).toExponential(f[7]):parseFloat(o).toExponential();break;case"f":o=f[7]?parseFloat(o).toFixed(f[7]):parseFloat(o);break;case"g":o=f[7]?String(Number(o.toPrecision(f[7]))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o);o=f[7]?o.substring(0,f[7]):o;break;case"t":o=String(!!o);o=f[7]?o.substring(0,f[7]):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase();o=f[7]?o.substring(0,f[7]):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf();o=f[7]?o.substring(0,f[7]):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase();break}if(t.json.test(f[8])){s+=o}else{if(t.number.test(f[8])&&(!v||f[3])){p=v?"+":"-";o=o.toString().replace(t.sign,"")}else{p=""}h=f[4]?f[4]==="0"?"0":f[4].charAt(1):" ";d=f[6]-(p+o).length;c=f[6]?d>0?h.repeat(d):"":"";s+=f[5]?p+o+c:h==="0"?p+c+o:c+p+o}}}return s}var o=Object.create(null);function s(e){if(o[e]){return o[e]}var r=e,n,a=[],i=0;while(r){if((n=t.text.exec(r))!==null){a.push(n[0])}else if((n=t.modulo.exec(r))!==null){a.push("%")}else if((n=t.placeholder.exec(r))!==null){if(n[2]){i|=1;var s=[],l=n[2],u=[];if((u=t.key.exec(l))!==null){s.push(u[1]);while((l=l.substring(u[0].length))!==""){if((u=t.key_access.exec(l))!==null){s.push(u[1])}else if((u=t.index_access.exec(l))!==null){s.push(u[1])}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key")}n[2]=s}else{i|=2}if(i===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")}a.push(n)}else{throw new SyntaxError("[sprintf] unexpected placeholder")}r=r.substring(n[0].length)}return o[e]=a}if(typeof n!=="undefined"){n["sprintf"]=r;n["vsprintf"]=a}if(typeof window!=="undefined"){window["sprintf"]=r;window["vsprintf"]=a;if(typeof e==="function"&&e["amd"]){e(function(){return{sprintf:r,vsprintf:a}})}}}()},{}],277:[function(e,t,r){"use strict";var n=e("parenthesis");t.exports=function e(t,r,a){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");if(!a)a={};else if(typeof a==="string"||Array.isArray(a)){a={ignore:a}}if(a.escape==null)a.escape=true;if(a.ignore==null)a.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"];else{if(typeof a.ignore==="string"){a.ignore=[a.ignore]}a.ignore=a.ignore.map(function(e){if(e.length===1)e=e+e;return e})}var i=n.parse(t,{flat:true,brackets:a.ignore});var o=i[0];var s=o.split(r);if(a.escape){var l=[];for(var u=0;u<s.length;u++){var f=s[u];var c=s[u+1];if(f[f.length-1]==="\\"&&f[f.length-2]!=="\\"){l.push(f+r+c);u++}else{l.push(f)}}s=l}for(var u=0;u<s.length;u++){i[0]=s[u];s[u]=n.stringify(i,{flat:true})}return s}},{parenthesis:225}],278:[function(e,t,r){"use strict";t.exports=a;var n={" ":" ",0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"};function a(e){return e.split("").map(function(e){if(e in n){return n[e]}return""}).join("")}},{}],279:[function(e,t,r){"use strict";t.exports=u;var n=e("ndarray-extract-contour");var a=e("triangulate-hypercube");var i=e("zero-crossings");function o(e,t){var r=e.length;var i=["'use strict';"];var o="surfaceNets"+e.join("_")+"d"+t;i.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },");if(t==="generic"){i.push("getters:[0],")}var s=[];var l=[];for(var u=0;u<r;++u){s.push("d"+u);l.push("d"+u)}for(var u=0;u<1<<r;++u){s.push("v"+u);l.push("v"+u)}for(var u=0;u<1<<r;++u){s.push("p"+u);l.push("p"+u)}s.push("a","b","c");l.push("a","c");i.push("vertex:function vertexFunc(",s.join(),"){");var f=[];for(var u=0;u<1<<r;++u){f.push("(p"+u+"<<"+u+")")}i.push("var m=(",f.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var c=[];var h=[];if(1<<(1<<r)<=128){i.push("switch(m){");h=i}else{i.push("switch(m>>>7){")}for(var u=0;u<1<<(1<<r);++u){if(1<<(1<<r)>128){if(u%128===0){if(c.length>0){h.push("}}")}var d="vExtra"+c.length;i.push("case ",u>>>7,":",d,"(m&0x7f,",l.join(),");break;");h=["function ",d,"(m,",l.join(),"){switch(m){"];c.push(h)}}h.push("case ",u&127,":");var v=new Array(r);var p=new Array(r);var g=new Array(r);var m=new Array(r);var y=0;for(var b=0;b<r;++b){v[b]=[];p[b]=[];g[b]=0;m[b]=0}for(var b=0;b<1<<r;++b){for(var x=0;x<r;++x){var _=b^1<<x;if(_>b){continue}if(!(u&1<<_)!==!(u&1<<b)){var w=1;if(u&1<<_){p[x].push("v"+_+"-v"+b)}else{p[x].push("v"+b+"-v"+_);w=-w}if(w<0){v[x].push("-v"+b+"-v"+_);g[x]+=2}else{v[x].push("v"+b+"+v"+_);g[x]-=2}y+=1;for(var A=0;A<r;++A){if(A===x){continue}if(_&1<<A){m[A]+=1}else{m[A]-=1}}}}}var k=[];for(var x=0;x<r;++x){if(v[x].length===0){k.push("d"+x+"-0.5")}else{var T="";if(g[x]<0){T=g[x]+"*c"}else if(g[x]>0){T="+"+g[x]+"*c"}var M=.5*(v[x].length/y);var E=.5+.5*(m[x]/y);k.push("d"+x+"-"+E+"-"+M+"*("+v[x].join("+")+T+")/("+p[x].join("+")+")")}}h.push("a.push([",k.join(),"]);","break;")}i.push("}},");if(c.length>0){h.push("}}")}var C=[];for(var u=0;u<1<<r-1;++u){C.push("v"+u)}C.push("c0","c1","p0","p1","a","b","c");i.push("cell:function cellFunc(",C.join(),"){");var S=a(r-1);i.push("if(p0){b.push(",S.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",S.map(function(e){var t=e.slice();t.reverse();return"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",o,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",o,";");for(var u=0;u<c.length;++u){i.push(c[u].join(""))}var L=new Function("genContour",i.join(""));return L(n)}function s(e,t){var r=i(e,t);var n=r.length;var a=new Array(n);var o=new Array(n);for(var s=0;s<n;++s){a[s]=[r[s]];o[s]=[s]}return{positions:a,cells:o}}var l={};function u(e,t){if(e.dimension<=0){return{positions:[],cells:[]}}else if(e.dimension===1){return s(e,t)}var r=e.order.join()+"-"+e.dtype;var n=l[r];var t=+t||0;if(!n){n=l[r]=o(e.order,e.dtype)}return n(e,t)}},{"ndarray-extract-contour":218,"triangulate-hypercube":288,"zero-crossings":306}],280:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:true});var n=function(){function e(e,t){var r=[];var n=true;var a=false;var i=undefined;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){a=true;i=e}finally{try{if(!n&&o["return"])o["return"]()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t)){return t}else if(Symbol.iterator in Object(t)){return e(t,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var a=Math.PI*2;var i=function e(t,r,n,a,i,o,s){var l=t.x,u=t.y;l*=r;u*=n;var f=a*l-i*u;var c=i*l+a*u;return{x:f+o,y:c+s}};var o=function e(t,r){var n=4/3*Math.tan(r/4);var a=Math.cos(t);var i=Math.sin(t);var o=Math.cos(t+r);var s=Math.sin(t+r);return[{x:a-i*n,y:i+a*n},{x:o+s*n,y:s-o*n},{x:o,y:s}]};var s=function e(t,r,n,a){var i=t*a-r*n<0?-1:1;var o=Math.sqrt(t*t+r*r);var s=Math.sqrt(t*t+r*r);var l=t*n+r*a;var u=l/(o*s);if(u>1){u=1}if(u<-1){u=-1}return i*Math.acos(u)};var l=function e(t,r,n,i,o,l,u,f,c,h,d,v){var p=Math.pow(o,2);var g=Math.pow(l,2);var m=Math.pow(d,2);var y=Math.pow(v,2);var b=p*g-p*y-g*m;if(b<0){b=0}b/=p*y+g*m;b=Math.sqrt(b)*(u===f?-1:1);var x=b*o/l*v;var _=b*-l/o*d;var w=h*x-c*_+(t+n)/2;var A=c*x+h*_+(r+i)/2;var k=(d-x)/o;var T=(v-_)/l;var M=(-d-x)/o;var E=(-v-_)/l;var C=s(1,0,k,T);var S=s(k,T,M,E);if(f===0&&S>0){S-=a}if(f===1&&S<0){S+=a}return[w,A,C,S]};var u=function e(t){var r=t.px,s=t.py,u=t.cx,f=t.cy,c=t.rx,h=t.ry,d=t.xAxisRotation,v=d===undefined?0:d,p=t.largeArcFlag,g=p===undefined?0:p,m=t.sweepFlag,y=m===undefined?0:m;var b=[];if(c===0||h===0){return[]}var x=Math.sin(v*a/360);var _=Math.cos(v*a/360);var w=_*(r-u)/2+x*(s-f)/2;var A=-x*(r-u)/2+_*(s-f)/2;if(w===0&&A===0){return[]}c=Math.abs(c);h=Math.abs(h);var k=Math.pow(w,2)/Math.pow(c,2)+Math.pow(A,2)/Math.pow(h,2);if(k>1){c*=Math.sqrt(k);h*=Math.sqrt(k)}var T=l(r,s,u,f,c,h,g,y,x,_,w,A),M=n(T,4),E=M[0],C=M[1],S=M[2],L=M[3];var O=Math.max(Math.ceil(Math.abs(L)/(a/4)),1);L/=O;for(var I=0;I<O;I++){b.push(o(S,L));S+=L}return b.map(function(e){var t=i(e[0],c,h,_,x,E,C),r=t.x,n=t.y;var a=i(e[1],c,h,_,x,E,C),o=a.x,s=a.y;var l=i(e[2],c,h,_,x,E,C),u=l.x,f=l.y;return{x1:r,y1:n,x2:o,y2:s,x:u,y:f}})};r.default=u;t.exports=r["default"]},{}],281:[function(e,t,r){"use strict";var n=e("parse-svg-path");var a=e("abs-svg-path");var i=e("normalize-svg-path");var o=e("is-svg-path");var s=e("assert");t.exports=l;function l(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]==="string")e=e[0];if(typeof e==="string"){s(o(e),"String is not an SVG path.");e=n(e)}s(Array.isArray(e),"Argument should be a string or an array of path segments.");e=a(e);e=i(e);if(!e.length)return[0,0,0,0];var t=[Infinity,Infinity,-Infinity,-Infinity];for(var r=0,l=e.length;r<l;r++){var u=e[r].slice(1);for(var f=0;f<u.length;f+=2){if(u[f+0]<t[0])t[0]=u[f+0];if(u[f+1]<t[1])t[1]=u[f+1];if(u[f+0]>t[2])t[2]=u[f+0];if(u[f+1]>t[3])t[3]=u[f+1]}}return t}},{"abs-svg-path":16,assert:21,"is-svg-path":212,"normalize-svg-path":282,"parse-svg-path":227}],282:[function(e,t,r){"use strict";t.exports=a;var n=e("svg-arc-to-cubic-bezier");function a(e){var t;var r=[];var a=0;var s=0;var l=0;var u=0;var f=null;var c=null;var h=0;var d=0;for(var v=0,p=e.length;v<p;v++){var g=e[v];var m=g[0];switch(m){case"M":l=g[1];u=g[2];break;case"A":var y=n({px:h,py:d,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!y.length)continue;for(var b=0,x;b<y.length;b++){x=y[b];g=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y];if(b<y.length-1)r.push(g)}break;case"S":var _=h;var w=d;if(t=="C"||t=="S"){_+=_-a;w+=w-s}g=["C",_,w,g[1],g[2],g[3],g[4]];break;case"T":if(t=="Q"||t=="T"){f=h*2-f;c=d*2-c}else{f=h;c=d}g=o(h,d,f,c,g[1],g[2]);break;case"Q":f=g[1];c=g[2];g=o(h,d,g[1],g[2],g[3],g[4]);break;case"L":g=i(h,d,g[1],g[2]);break;case"H":g=i(h,d,g[1],d);break;case"V":g=i(h,d,h,g[1]);break;case"Z":g=i(h,d,l,u);break}t=m;h=g[g.length-2];d=g[g.length-1];if(g.length>4){a=g[g.length-4];s=g[g.length-3]}else{a=h;s=d}r.push(g)}return r}function i(e,t,r,n){return["C",e,t,r,n,r,n]}function o(e,t,r,n,a,i){return["C",e/3+2/3*r,t/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}},{"svg-arc-to-cubic-bezier":280}],283:[function(e,t,r){(function(r){"use strict";var n=e("svg-path-bounds");var a=e("parse-svg-path");var i=e("draw-svg-path");var o=e("is-svg-path");var s=e("bitmap-sdf");var l=document.createElement("canvas");var u=l.getContext("2d");t.exports=f;function f(e,t){if(!o(e))throw Error("Argument should be valid svg path string");if(!t)t={};var f,c;if(t.shape){f=t.shape[0];c=t.shape[1]}else{f=l.width=t.w||t.width||200;c=l.height=t.h||t.height||200}var h=Math.min(f,c);var d=t.stroke||0;var v=t.viewbox||t.viewBox||n(e);var p=[f/(v[2]-v[0]),c/(v[3]-v[1])];var g=Math.min(p[0]||0,p[1]||0)/2;u.fillStyle="black";u.fillRect(0,0,f,c);u.fillStyle="white";if(d){if(typeof d!="number")d=1;if(d>0){u.strokeStyle="white"}else{u.strokeStyle="black"}u.lineWidth=Math.abs(d)}u.translate(f*.5,c*.5);u.scale(g,g);if(r.Path2D){var m=new Path2D(e);u.fill(m);d&&u.stroke(m)}else{var y=a(e);i(u,y);u.fill();d&&u.stroke()}u.setTransform(1,0,0,1,0,0);var b=s(u,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:h*.5});return b}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"bitmap-sdf":42,"draw-svg-path":90,"is-svg-path":212,"parse-svg-path":227,"svg-path-bounds":281}],284:[function(e,t,r){(function(r){"use strict";t.exports=s;var n=e("vectorize-text");var a=window||r.global||{};var i=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function o(e){var t=e.cells;var r=e.positions;var n=new Float32Array(t.length*6);var a=0;var i=0;for(var o=0;o<t.length;++o){var s=t[o];for(var l=0;l<3;++l){var u=r[s[l]];n[a++]=u[0];n[a++]=u[1]+1.4;i=Math.max(u[0],i)}}return{data:n,shape:i}}function s(e,t,r){var r=r||{};var a=i[e];if(!a){a=i[e]={" ":{data:new Float32Array(0),shape:.2}}}var l=a[t];if(!l){if(t.length<=1||!/\d/.test(t)){l=a[t]=o(n(t,{triangles:true,font:e,textAlign:r.textAlign||"left",textBaseline:"alphabetic"}))}else{var u=t.split(/(\d|\s)/);var f=new Array(u.length);var c=0;var h=0;for(var d=0;d<u.length;++d){f[d]=s(e,u[d]);c+=f[d].data.length;h+=f[d].shape;if(d>0){h+=.02}}var v=new Float32Array(c);var p=0;var g=-.5*h;for(var d=0;d<f.length;++d){var m=f[d].data;for(var y=0;y<m.length;y+=2){v[p++]=m[y]+g;v[p++]=m[y+1]}g+=f[d].shape+.02}l=a[t]={data:v,shape:h}}}return l}}).call(this,e("_process"))},{_process:248,"vectorize-text":299}],285:[function(t,r,n){(function(t){var n=/^\s+/,a=/\s+$/,i=0,o=t.round,s=t.min,l=t.max,u=t.random;function f(e,t){e=e?e:"";t=t||{};if(e instanceof f){return e}if(!(this instanceof f)){return new f(e,t)}var r=c(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var r,n,a,i,o,s;r=e.r/255;n=e.g/255;a=e.b/255;if(r<=.03928){i=r/12.92}else{i=t.pow((r+.055)/1.055,2.4)}if(n<=.03928){o=n/12.92}else{o=t.pow((n+.055)/1.055,2.4)}if(a<=.03928){s=a/12.92}else{s=t.pow((a+.055)/1.055,2.4)}return.2126*i+.7152*o+.0722*s},setAlpha:function(e){this._a=z(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=d(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=d(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return m(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return y(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(F(this._r,255)*100)+"%",g:o(F(this._g,255)*100)+"%",b:o(F(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(F(this._r,255)*100)+"%, "+o(F(this._g,255)*100)+"%, "+o(F(this._b,255)*100)+"%)":"rgba("+o(F(this._r,255)*100)+"%, "+o(F(this._g,255)*100)+"%, "+o(F(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return R[m(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+b(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var a=f(e);r="#"+b(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(a){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(A,arguments)},brighten:function(){return this._applyModification(k,arguments)},darken:function(){return this._applyModification(T,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(L,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}};f.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){r[n]=e[n]}else{r[n]=H(e[n])}}}e=r}return f(e,t)};function c(e){var t={r:0,g:0,b:0};var r=1;var n=null;var a=null;var i=null;var o=false;var u=false;if(typeof e=="string"){e=Y(e)}if(typeof e=="object"){if(W(e.r)&&W(e.g)&&W(e.b)){t=h(e.r,e.g,e.b);o=true;u=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(W(e.h)&&W(e.s)&&W(e.v)){n=H(e.s);a=H(e.v);t=g(e.h,n,a);o=true;u="hsv"}else if(W(e.h)&&W(e.s)&&W(e.l)){n=H(e.s);i=H(e.l);t=v(e.h,n,i);o=true;u="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=z(r);return{ok:o,format:e.format||u,r:s(255,l(t.r,0)),g:s(255,l(t.g,0)),b:s(255,l(t.b,0)),a:r}}function h(e,t,r){return{r:F(e,255)*255,g:F(t,255)*255,b:F(r,255)*255}}function d(e,t,r){e=F(e,255);t=F(t,255);r=F(r,255);var n=l(e,t,r),a=s(e,t,r);var i,o,u=(n+a)/2;if(n==a){i=o=0}else{var f=n-a;o=u>.5?f/(2-n-a):f/(n+a);switch(n){case e:i=(t-r)/f+(t<r?6:0);break;case t:i=(r-e)/f+2;break;case r:i=(e-t)/f+4;break}i/=6}return{h:i,s:o,l:u}}function v(e,t,r){var n,a,i;e=F(e,360);t=F(t,100);r=F(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){n=a=i=r}else{var s=r<.5?r*(1+t):r+t-r*t;var l=2*r-s;n=o(l,s,e+1/3);a=o(l,s,e);i=o(l,s,e-1/3)}return{r:n*255,g:a*255,b:i*255}}function p(e,t,r){e=F(e,255);t=F(t,255);r=F(r,255);var n=l(e,t,r),a=s(e,t,r);var i,o,u=n;var f=n-a;o=n===0?0:f/n;if(n==a){i=0}else{switch(n){case e:i=(t-r)/f+(t<r?6:0);break;case t:i=(r-e)/f+2;break;case r:i=(e-t)/f+4;break}i/=6}return{h:i,s:o,v:u}}function g(e,r,n){e=F(e,360)*6;r=F(r,100);n=F(n,100);var a=t.floor(e),i=e-a,o=n*(1-r),s=n*(1-i*r),l=n*(1-(1-i)*r),u=a%6,f=[n,s,o,o,l,n][u],c=[l,n,n,s,o,o][u],h=[o,o,l,n,n,s][u];return{r:f*255,g:c*255,b:h*255}}function m(e,t,r,n){var a=[V(o(e).toString(16)),V(o(t).toString(16)),V(o(r).toString(16))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}return a.join("")}function y(e,t,r,n,a){var i=[V(o(e).toString(16)),V(o(t).toString(16)),V(o(r).toString(16)),V(q(n))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function b(e,t,r,n){var a=[V(q(n)),V(o(e).toString(16)),V(o(t).toString(16)),V(o(r).toString(16))];return a.join("")}f.equals=function(e,t){if(!e||!t){return false}return f(e).toRgbString()==f(t).toRgbString()};f.random=function(){return f.fromRatio({r:u(),g:u(),b:u()})};function x(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s-=t/100;r.s=B(r.s);return f(r)}function _(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.s+=t/100;r.s=B(r.s);return f(r)}function w(e){return f(e).desaturate(100)}function A(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l+=t/100;r.l=B(r.l);return f(r)}function k(e,t){t=t===0?0:t||10;var r=f(e).toRgb();r.r=l(0,s(255,r.r-o(255*-(t/100))));r.g=l(0,s(255,r.g-o(255*-(t/100))));r.b=l(0,s(255,r.b-o(255*-(t/100))));return f(r)}function T(e,t){t=t===0?0:t||10;var r=f(e).toHsl();r.l-=t/100;r.l=B(r.l);return f(r)}function M(e,t){var r=f(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return f(r)}function E(e){var t=f(e).toHsl();t.h=(t.h+180)%360;return f(t)}function C(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+120)%360,s:t.s,l:t.l}),f({h:(r+240)%360,s:t.s,l:t.l})]}function S(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+90)%360,s:t.s,l:t.l}),f({h:(r+180)%360,s:t.s,l:t.l}),f({h:(r+270)%360,s:t.s,l:t.l})]}function L(e){var t=f(e).toHsl();var r=t.h;return[f(e),f({h:(r+72)%360,s:t.s,l:t.l}),f({h:(r+216)%360,s:t.s,l:t.l})]}function O(e,t,r){t=t||6;r=r||30;var n=f(e).toHsl();var a=360/r;var i=[f(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;){n.h=(n.h+a)%360;i.push(f(n))}return i}function I(e,t){t=t||6;var r=f(e).toHsv();var n=r.h,a=r.s,i=r.v;var o=[];var s=1/t;while(t--){o.push(f({h:n,s:a,v:i}));i=(i+s)%1}return o}f.mix=function(e,t,r){r=r===0?0:r||50;var n=f(e).toRgb();var a=f(t).toRgb();var i=r/100;var o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return f(o)};f.readability=function(e,r){var n=f(e);var a=f(r);return(t.max(n.getLuminance(),a.getLuminance())+.05)/(t.min(n.getLuminance(),a.getLuminance())+.05)};f.isReadable=function(e,t,r){var n=f.readability(e,t);var a,i;i=false;a=Z(r);switch(a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};f.mostReadable=function(e,t,r){var n=null;var a=0;var i;var o,s,l;r=r||{};o=r.includeFallbackColors;s=r.level;l=r.size;for(var u=0;u<t.length;u++){i=f.readability(e,t[u]);if(i>a){a=i;n=f(t[u])}}if(f.isReadable(e,n,{level:s,size:l})||!o){return n}else{r.includeFallbackColors=false;return f.mostReadable(e,["#fff","#000"],r)}};var D=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var R=f.hexNames=P(D);function P(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function z(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function F(e,r){if(j(e)){e="100%"}var n=U(e);e=s(r,l(0,parseFloat(e)));if(n){e=parseInt(e*r,10)/100}if(t.abs(e-r)<1e-6){return 1}return e%r/parseFloat(r)}function B(e){return s(1,l(0,e))}function N(e){return parseInt(e,16)}function j(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function U(e){return typeof e==="string"&&e.indexOf("%")!=-1}function V(e){return e.length==1?"0"+e:""+e}function H(e){if(e<=1){e=e*100+"%"}return e}function q(e){return t.round(parseFloat(e)*255).toString(16)}function G(e){return N(e)/255}var X=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function W(e){return!!X.CSS_UNIT.exec(e)}function Y(e){e=e.replace(n,"").replace(a,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=X.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=X.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=X.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=X.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=X.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=X.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=X.hex8.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),a:G(r[4]),format:t?"name":"hex8"}}if(r=X.hex6.exec(e)){return{r:N(r[1]),g:N(r[2]),b:N(r[3]),format:t?"name":"hex"}}if(r=X.hex4.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),a:G(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=X.hex3.exec(e)){return{r:N(r[1]+""+r[1]),g:N(r[2]+""+r[2]),b:N(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function Z(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof r!=="undefined"&&r.exports){r.exports=f}else if(typeof e==="function"&&e.amd){e(function(){return f})}else{window.tinycolor=f}})(Math)},{}],286:[function(e,t,r){"use strict";t.exports=a;t.exports.float32=t.exports.float=a;t.exports.fract32=t.exports.fract=n;function n(e){if(typeof e==="number"){return a(e-a(e))}var t=a(e);for(var r=0,n=t.length;r<n;r++){t[r]=e[r]-t[r]}return t}function a(e){if(e instanceof Float32Array)return e;if(typeof e==="number"){return new Float32Array([e])[0]}var t=new Float32Array(e);t.set(e);return t}},{}],287:[function(e,t,r){"use strict";var n=e("parse-unit");t.exports=s;var a=96;function i(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*s(r[1],e)}function o(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e;t.appendChild(r);var n=i(r,"font-size")/128;t.removeChild(r);return n}function s(e,t){t=t||document.body;e=(e||"px").trim().toLowerCase();if(t===window||t===document){t=document.body}switch(e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return i(t,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":228}],288:[function(e,t,r){"use strict";t.exports=o;var n=e("permutation-rank");var a=e("permutation-parity");var i=e("gamma");function o(e){if(e<0){return[]}if(e===0){return[[0]]}var t=Math.round(i(e+1))|0;var r=[];for(var o=0;o<t;++o){var s=n.unrank(e,o);var l=[0];var u=0;for(var f=0;f<s.length;++f){u+=1<<s[f];l.push(u)}if(a(s)<1){l[0]=u;l[e]=0}r.push(l)}return r}},{gamma:156,"permutation-parity":230,"permutation-rank":231}],289:[function(e,t,r){"use strict";t.exports=a;var n=+(Math.pow(2,27)+1);function a(e,t,r){var a=e*t;var i=n*e;var o=i-e;var s=i-o;var l=e-s;var u=n*t;var f=u-t;var c=u-f;var h=t-c;var d=a-s*c;var v=d-l*c;var p=v-s*h;var g=l*h-p;if(r){r[0]=g;r[1]=a;return r}return[g,a]}},{}],290:[function(e,t,r){"use strict";t.exports=n;function n(e,t,r){var n=e+t;var a=n-e;var i=n-a;var o=t-a;var s=e-i;if(r){r[0]=s+o;r[1]=n;return r}return[s+o,n]}},{}],291:[function(e,t,r){(function(t,n){"use strict";var a=e("bit-twiddle");var i=e("dup");if(!t.__TYPEDARRAY_POOL){t.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])}}var o=typeof Uint8ClampedArray!=="undefined";var s=t.__TYPEDARRAY_POOL;if(!s.UINT8C){s.UINT8C=i([32,0])}if(!s.BUFFER){s.BUFFER=i([32,0])}var l=s.DATA,u=s.BUFFER;r.free=function e(t){if(n.isBuffer(t)){u[a.log2(t.length)].push(t)}else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"){t=t.buffer}if(!t){return}var r=t.length||t.byteLength;var i=a.log2(r)|0;l[i].push(t)}};function f(e){if(!e){return}var t=e.length||e.byteLength;var r=a.log2(t);l[r].push(e)}function c(e){f(e.buffer)}r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=c;r.freeArrayBuffer=f;r.freeBuffer=function e(t){u[a.log2(t.length)].push(t)};r.malloc=function e(t,r){if(r===undefined||r==="arraybuffer"){return h(t)}else{switch(r){case"uint8":return d(t);case"uint16":return v(t);case"uint32":return p(t);case"int8":return g(t);case"int16":return m(t);case"int32":return y(t);case"float":case"float32":return b(t);case"double":case"float64":return x(t);case"uint8_clamped":return _(t);case"buffer":return A(t);case"data":case"dataview":return w(t);default:return null}}return null};function h(e){var e=a.nextPow2(e);var t=a.log2(e);var r=l[t];if(r.length>0){return r.pop()}return new ArrayBuffer(e)}r.mallocArrayBuffer=h;function d(e){return new Uint8Array(h(e),0,e)}r.mallocUint8=d;function v(e){return new Uint16Array(h(2*e),0,e)}r.mallocUint16=v;function p(e){return new Uint32Array(h(4*e),0,e)}r.mallocUint32=p;function g(e){return new Int8Array(h(e),0,e)}r.mallocInt8=g;function m(e){return new Int16Array(h(2*e),0,e)}r.mallocInt16=m;function y(e){return new Int32Array(h(4*e),0,e)}r.mallocInt32=y;function b(e){return new Float32Array(h(4*e),0,e)}r.mallocFloat32=r.mallocFloat=b;function x(e){return new Float64Array(h(8*e),0,e)}r.mallocFloat64=r.mallocDouble=x;function _(e){if(o){return new Uint8ClampedArray(h(e),0,e)}else{return d(e)}}r.mallocUint8Clamped=_;function w(e){return new DataView(h(e),0,e)}r.mallocDataView=w;function A(e){e=a.nextPow2(e);var t=a.log2(e);var r=u[t];if(r.length>0){return r.pop()}return new n(e)}r.mallocBuffer=A;r.clearCache=function e(){for(var t=0;t<32;++t){s.UINT8[t].length=0;s.UINT16[t].length=0;s.UINT32[t].length=0;s.INT8[t].length=0;s.INT16[t].length=0;s.INT32[t].length=0;s.FLOAT[t].length=0;s.DOUBLE[t].length=0;s.UINT8C[t].length=0;l[t].length=0;u[t].length=0}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{},e("buffer").Buffer)},{"bit-twiddle":41,buffer:52,dup:92}],292:[function(e,t,r){"use strict";"use restrict";t.exports=n;function n(e){this.roots=new Array(e);this.ranks=new Array(e);for(var t=0;t<e;++t){this.roots[t]=t;this.ranks[t]=0}}var a=n.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}});a.makeSet=function(){var e=this.roots.length;this.roots.push(e);this.ranks.push(0);return e};a.find=function(e){var t=e;var r=this.roots;while(r[e]!==e){e=r[e]}while(r[t]!==e){var n=r[t];r[t]=e;t=n}return e};a.link=function(e,t){var r=this.find(e),n=this.find(t);if(r===n){return}var a=this.ranks,i=this.roots,o=a[r],s=a[n];if(o<s){i[r]=n}else if(s<o){i[n]=r}else{i[n]=r;++a[r]}}},{}],293:[function(e,t,r){"use strict";function n(e,t){var r=1,n=e.length,a=e[0],i=e[0];for(var o=1;o<n;++o){i=a;a=e[o];if(t(a,i)){if(o===r){r++;continue}e[r++]=a}}e.length=r;return e}function a(e){var t=1,r=e.length,n=e[0],a=e[0];for(var i=1;i<r;++i,a=n){a=n;n=e[i];if(n!==a){if(i===t){t++;continue}e[t++]=n}}e.length=t;return e}function i(e,t,r){if(e.length===0){return e}if(t){if(!r){e.sort(t)}return n(e,t)}if(!r){e.sort()}return a(e)}t.exports=i},{}],294:[function(e,t,r){var n=/[\'\"]/;t.exports=function e(t){if(!t){return""}if(n.test(t.charAt(0))){t=t.substr(1)}if(n.test(t.charAt(t.length-1))){t=t.substr(0,t.length-1)}return t}},{}],295:[function(e,t,r){"use strict";t.exports=function e(t,r,n){if(!Array.isArray(n))n=[].slice.call(arguments,2);for(var a=0,i=n.length;a<i;a++){var o=n[a];for(var s in o){if(r[s]!==undefined&&!Array.isArray(r[s])&&t[s]===r[s])continue;if(s in r){var l;if(o[s]===true)l=r[s];else if(o[s]===false)continue;else if(typeof o[s]==="function"){l=o[s](r[s],t,r);if(l===undefined)continue}t[s]=l}}}return t}},{}],296:[function(e,t,r){if(typeof Object.create==="function"){t.exports=function e(t,r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}else{t.exports=function e(t,r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}},{}],297:[function(e,t,r){t.exports=function e(t){return t&&typeof t==="object"&&typeof t.copy==="function"&&typeof t.fill==="function"&&typeof t.readUInt8==="function"}},{}],298:[function(e,t,r){(function(t,n){var a=/%[sdj%]/g;r.format=function(e){if(!w(e)){var t=[];for(var r=0;r<arguments.length;r++){t.push(s(arguments[r]))}return t.join(" ")}var r=1;var n=arguments;var i=n.length;var o=String(e).replace(a,function(e){if(e==="%%")return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}});for(var l=n[r];r<i;l=n[++r]){if(b(l)||!M(l)){o+=" "+l}else{o+=" "+s(l)}}return o};r.deprecate=function(e,a){if(k(n.process)){return function(){return r.deprecate(e,a).apply(this,arguments)}}if(t.noDeprecation===true){return e}var i=false;function o(){if(!i){if(t.throwDeprecation){throw new Error(a)}else if(t.traceDeprecation){console.trace(a)}else{console.error(a)}i=true}return e.apply(this,arguments)}return o};var i={};var o;r.debuglog=function(e){if(k(o))o=t.env.NODE_DEBUG||"";e=e.toUpperCase();if(!i[e]){if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;i[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else{i[e]=function(){}}}return i[e]};function s(e,t){var n={seen:[],stylize:u};if(arguments.length>=3)n.depth=arguments[2];if(arguments.length>=4)n.colors=arguments[3];if(y(t)){n.showHidden=t}else if(t){r._extend(n,t)}if(k(n.showHidden))n.showHidden=false;if(k(n.depth))n.depth=2;if(k(n.colors))n.colors=false;if(k(n.customInspect))n.customInspect=true;if(n.colors)n.stylize=l;return c(n,e,n.depth)}r.inspect=s;s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(e,t){var r=s.styles[t];if(r){return"\x1b["+s.colors[r][0]+"m"+e+"\x1b["+s.colors[r][1]+"m"}else{return e}}function u(e,t){return e}function f(e){var t={};e.forEach(function(e,r){t[e]=true});return t}function c(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&!(t.constructor&&t.constructor.prototype===t)){var a=t.inspect(n,e);if(!w(a)){a=c(e,a,n)}return a}var i=h(e,t);if(i){return i}var o=Object.keys(t);var s=f(o);if(e.showHidden){o=Object.getOwnPropertyNames(t)}if(C(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0)){return d(t)}if(o.length===0){if(S(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(T(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}if(E(t)){return e.stylize(Date.prototype.toString.call(t),"date")}if(C(t)){return d(t)}}var u="",y=false,b=["{","}"];if(m(t)){y=true;b=["[","]"]}if(S(t)){var x=t.name?": "+t.name:"";u=" [Function"+x+"]"}if(T(t)){u=" "+RegExp.prototype.toString.call(t)}if(E(t)){u=" "+Date.prototype.toUTCString.call(t)}if(C(t)){u=" "+d(t)}if(o.length===0&&(!y||t.length==0)){return b[0]+u+b[1]}if(n<0){if(T(t)){return e.stylize(RegExp.prototype.toString.call(t),"regexp")}else{return e.stylize("[Object]","special")}}e.seen.push(t);var _;if(y){_=v(e,t,n,s,o)}else{_=o.map(function(r){return p(e,t,n,s,r,y)})}e.seen.pop();return g(_,u,b)}function h(e,t){if(k(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(_(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function v(e,t,r,n,a){var i=[];for(var o=0,s=t.length;o<s;++o){if(P(t,String(o))){i.push(p(e,t,r,n,String(o),true))}else{i.push("")}}a.forEach(function(a){if(!a.match(/^\d+$/)){i.push(p(e,t,r,n,a,true))}});return i}function p(e,t,r,n,a,i){var o,s,l;l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]};if(l.get){if(l.set){s=e.stylize("[Getter/Setter]","special")}else{s=e.stylize("[Getter]","special")}}else{if(l.set){s=e.stylize("[Setter]","special")}}if(!P(n,a)){o="["+a+"]"}if(!s){if(e.seen.indexOf(l.value)<0){if(b(r)){s=c(e,l.value,null)}else{s=c(e,l.value,r-1)}if(s.indexOf("\n")>-1){if(i){s=s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2)}else{s="\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")}}}else{s=e.stylize("[Circular]","special")}}if(k(o)){if(i&&a.match(/^\d+$/)){return s}o=JSON.stringify(""+a);if(o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){o=o.substr(1,o.length-2);o=e.stylize(o,"name")}else{o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");o=e.stylize(o,"string")}}return o+": "+s}function g(e,t,r){var n=0;var a=e.reduce(function(e,t){n++;if(t.indexOf("\n")>=0)n++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(a>60){return r[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]}return r[0]+t+" "+e.join(", ")+" "+r[1]}function m(e){return Array.isArray(e)}r.isArray=m;function y(e){return typeof e==="boolean"}r.isBoolean=y;function b(e){return e===null}r.isNull=b;function x(e){return e==null}r.isNullOrUndefined=x;function _(e){return typeof e==="number"}r.isNumber=_;function w(e){return typeof e==="string"}r.isString=w;function A(e){return typeof e==="symbol"}r.isSymbol=A;function k(e){return e===void 0}r.isUndefined=k;function T(e){return M(e)&&O(e)==="[object RegExp]"}r.isRegExp=T;function M(e){return typeof e==="object"&&e!==null}r.isObject=M;function E(e){return M(e)&&O(e)==="[object Date]"}r.isDate=E;function C(e){return M(e)&&(O(e)==="[object Error]"||e instanceof Error)}r.isError=C;function S(e){return typeof e==="function"}r.isFunction=S;function L(e){return e===null||typeof e==="boolean"||typeof e==="number"||typeof e==="string"||typeof e==="symbol"||typeof e==="undefined"}r.isPrimitive=L;r.isBuffer=e("./support/isBuffer");function O(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var e=new Date;var t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}r.log=function(){console.log("%s - %s",R(),r.format.apply(r,arguments))};r.inherits=e("inherits");r._extend=function(e,t){if(!t||!M(t))return e;var r=Object.keys(t);var n=r.length;while(n--){e[r[n]]=t[r[n]]}return e};function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).call(this,e("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":297,_process:248,inherits:296}],299:[function(e,t,r){"use strict";t.exports=o;var n=e("./lib/vtext");var a=null;var i=null;if(typeof document!=="undefined"){a=document.createElement("canvas");a.width=8192;a.height=1024;i=a.getContext("2d")}function o(e,t){if(typeof t!=="object"||t===null){t={}}return n(e,t.canvas||a,t.context||i,t)}},{"./lib/vtext":300}],300:[function(e,t,r){"use strict";t.exports=v;t.exports.processPixels=d;var n=e("surface-nets");var a=e("ndarray");var i=e("simplify-planar-graph");var o=e("clean-pslg");var s=e("cdt2d");var l=e("planar-graph-to-polyline");function u(e,t,r){var n=t.textAlign||"start";var a=t.textBaseline||"alphabetic";var i=[1<<30,1<<30];var o=[0,0];var s=e.length;for(var l=0;l<s;++l){var u=e[l];for(var f=0;f<2;++f){i[f]=Math.min(i[f],u[f])|0;o[f]=Math.max(o[f],u[f])|0}}var c=0;switch(n){case"center":c=-.5*(i[0]+o[0]);break;case"right":case"end":c=-o[0];break;case"left":case"start":c=-i[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(a){case"hanging":case"top":h=-i[1];break;case"middle":h=-.5*(i[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+a+"'")}var d=1/r;if("lineHeight"in t){d*=+t.lineHeight}else if("width"in t){d=t.width/(o[0]-i[0])}else if("height"in t){d=t.height/(o[1]-i[1])}return e.map(function(e){return[d*(e[0]+c),d*(e[1]+h)]})}function f(e,t,r,n){var i=Math.ceil(t.measureText(r).width+2*n)|0;if(i>8192){throw new Error("vectorize-text: String too long (sorry, this will get fixed later)")}var o=3*n;if(e.height<o){e.height=o}t.fillStyle="#000";t.fillRect(0,0,e.width,e.height);t.fillStyle="#fff";t.fillText(r,n,2*n);var s=t.getImageData(0,0,i,o);var l=a(s.data,[o,i,4]);return l.pick(-1,-1,0).transpose(1,0)}function c(e,t){var r=n(e,128);if(t){return i(r.cells,r.positions,.25)}return{edges:r.cells,positions:r.positions}}function h(e,t,r,n){var a=c(e,n);var i=u(a.positions,t,r);var f=a.edges;var h="ccw"===t.orientation;o(i,f);if(t.polygons||t.polygon||t.polyline){var d=l(f,i);var v=new Array(d.length);for(var p=0;p<d.length;++p){var g=d[p];var m=new Array(g.length);for(var y=0;y<g.length;++y){var b=g[y];var x=new Array(b.length);for(var _=0;_<b.length;++_){x[_]=i[b[_]].slice()}if(h){x.reverse()}m[y]=x}v[p]=m}return v}else if(t.triangles||t.triangulate||t.triangle){return{cells:s(i,f,{delaunay:false,exterior:false,interior:true}),positions:i}}else{return{edges:f,positions:i}}}function d(e,t,r){try{return h(e,t,r,true)}catch(e){}try{return h(e,t,r,false)}catch(e){}if(t.polygons||t.polyline||t.polygon){return[]}if(t.triangles||t.triangulate||t.triangle){return{cells:[],positions:[]}}return{edges:[],positions:[]}}function v(e,t,r,n){var a=n.size||64;var i=n.font||"normal";r.font=a+"px "+i;r.textAlign="start";r.textBaseline="alphabetic";r.direction="ltr";var o=f(t,r,e,a);return d(o,n,a)}},{cdt2d:53,"clean-pslg":60,ndarray:220,"planar-graph-to-polyline":235,"simplify-planar-graph":273,"surface-nets":279}],301:[function(e,t,r){var n=e("./hidden-store.js");t.exports=a;function a(){var e={};return function(t){if((typeof t!=="object"||t===null)&&typeof t!=="function"){throw new Error("Weakmap-shim: Key must be object")}var r=t.valueOf(e);return r&&r.identity===e?r:n(t,e)}}},{"./hidden-store.js":302}],302:[function(e,t,r){t.exports=n;function n(e,t){var r={identity:t};var n=e.valueOf;Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?n.apply(this,arguments):r},writable:true});return r}},{}],303:[function(e,t,r){var n=e("./create-store.js");t.exports=a;function a(){var e=n();return{get:function(t,r){var n=e(t);return n.hasOwnProperty("value")?n.value:r},set:function(t,r){e(t).value=r;return this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}},{"./create-store.js":301}],304:[function(e,t,r){var n=e("get-canvas-context");t.exports=function e(t){return n("webgl",t)}},{"get-canvas-context":157}],305:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg1_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg2_",lvalue:false,rvalue:true,count:1},{name:"_inline_1_arg3_",lvalue:false,rvalue:true,count:2},{name:"_inline_1_arg4_",lvalue:false,rvalue:true,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":80}],306:[function(e,t,r){"use strict";t.exports=a;var n=e("./lib/zc-core");function a(e,t){var r=[];t=+t||0;n(e.hi(e.shape[0]-1),r,t);return r}},{"./lib/zc-core":305}],307:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],308:[function(e,t,r){"use strict";var n=e("./arrow_paths");var a=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:a({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":482,"../../plots/cartesian/constants":497,"../../plots/font_attributes":518,"./arrow_paths":307}],309:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout,s=n.filterVisible(r.annotations);if(!s.length||!t._fullData.length)return;var l={};s.forEach(function(e){l[e.xref]=1;l[e.yref]=1});for(var u in l){var f=a.getFromId(t,u);if(f&&f.autorange){return n.syncOrAsync([i,o],t)}}};function o(e){var t=e._fullLayout;n.filterVisible(t.annotations).forEach(function(t){var r=a.getFromId(e,t.xref),n=a.getFromId(e,t.yref),i=3*t.arrowsize*t.arrowwidth||0,o=3*t.startarrowsize*t.arrowwidth||0;var s,l,u,f;if(r&&r.autorange){s=i+t.xshift;l=i-t.xshift;u=o+t.xshift;f=o-t.xshift;if(t.axref===t.xref){a.expand(r,[r.r2c(t.x)],{ppadplus:s,ppadminus:l});a.expand(r,[r.r2c(t.ax)],{ppadplus:Math.max(t._xpadplus,u),ppadminus:Math.max(t._xpadminus,f)})}else{u=t.ax?u+t.ax:u;f=t.ax?f-t.ax:f;a.expand(r,[r.r2c(t.x)],{ppadplus:Math.max(t._xpadplus,s,u),ppadminus:Math.max(t._xpadminus,l,f)})}}if(n&&n.autorange){s=i-t.yshift;l=i+t.yshift;u=o-t.yshift;f=o+t.yshift;if(t.ayref===t.yref){a.expand(n,[n.r2c(t.y)],{ppadplus:s,ppadminus:l});a.expand(n,[n.r2c(t.ay)],{ppadplus:Math.max(t._ypadplus,u),ppadminus:Math.max(t._ypadminus,f)})}else{u=t.ay?u+t.ay:u;f=t.ay?f-t.ay:f;a.expand(n,[n.r2c(t.y)],{ppadplus:Math.max(t._ypadplus,s,u),ppadminus:Math.max(t._ypadminus,l,f)})}}})}},{"../../lib":445,"../../plots/cartesian/axes":492,"./draw":314}],310:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:o,onClick:s};function o(e,t){var r=l(e,t);return r.on.length>0||r.explicitOff.length>0}function s(e,t){var r=l(e,t);var o=r.on;var s=r.off.concat(r.explicitOff);var u={};var f=e._fullLayout.annotations;var c,h;if(!(o.length||s.length))return;for(c=0;c<o.length;c++){h=i(e.layout,"annotations",f[o[c]]);h.modifyItem("visible",true);n.extendFlat(u,h.getUpdateObj())}for(c=0;c<s.length;c++){h=i(e.layout,"annotations",f[s[c]]);h.modifyItem("visible",false);n.extendFlat(u,h.getUpdateObj())}return a.call("update",e,{},u)}function l(e,t){var r=e._fullLayout.annotations,n=[],a=[],i=[],o=(t||[]).length;var s,l,f,c,h,d,v,p;for(s=0;s<r.length;s++){f=r[s];c=f.clicktoshow;if(c){for(l=0;l<o;l++){h=t[l];d=h.xaxis;v=h.yaxis;if(d._id===f.xref&&v._id===f.yref&&d.d2r(h.x)===u(f._xclick,d)&&v.d2r(h.y)===u(f._yclick,v)){if(f.visible){if(c==="onout")p=a;else p=i}else{p=n}p.push(s);break}}if(l===o){if(f.visible&&c==="onout")a.push(s)}}}return{on:n,off:a,explicitOff:i}}function u(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":445,"../../plot_api/plot_template":482,"../../registry":536}],311:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../color");t.exports=function e(t,r,i,o){o("opacity");var s=o("bgcolor");var l=o("bordercolor");var u=a.opacity(l);o("borderpad");var f=o("borderwidth");var c=o("showarrow");o("text",c?" ":i._dfltTitle.annotation);o("textangle");n.coerceFont(o,"font",i.font);o("width");o("align");var h=o("height");if(h)o("valign");if(c){var d=o("arrowside");var v;var p;if(d.indexOf("end")!==-1){v=o("arrowhead");p=o("arrowsize")}if(d.indexOf("start")!==-1){o("startarrowhead",v);o("startarrowsize",p)}o("arrowcolor",u?r.bordercolor:a.defaultLine);o("arrowwidth",(u&&f||1)*2);o("standoff");o("startstandoff")}var g=o("hovertext");var m=i.hoverlabel||{};if(g){var y=o("hoverlabel.bgcolor",m.bgcolor||(a.opacity(s)?a.rgb(s):a.defaultLine));var b=o("hoverlabel.bordercolor",m.bordercolor||a.contrast(y));n.coerceFont(o,"hoverlabel.font",{family:m.font.family,size:m.font.size,color:m.font.color||b})}o("captureevents",!!g)}},{"../../lib":445,"../color":323}],312:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(!(s||l))return;var u=t._fullLayout.annotations,f=r._id.charAt(0),c,h;function d(e){var t=c[e],i=null;if(s)i=a(t,r.range);else i=Math.pow(10,t);if(!n(i))i=null;o(h+e,i)}for(var v=0;v<u.length;v++){c=u[v];h="annotations["+v+"].";if(c[f+"ref"]===r._id)d(f);if(c["a"+f+"ref"]===r._id)d("a"+f)}}},{"../../lib/to_log_range":471,"fast-isnumeric":151}],313:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./common_defaults");var s=e("./attributes");t.exports=function e(t,r){i(t,r,{name:"annotations",handleItemDefaults:l})};function l(e,t,r){function i(r,a){return n.coerce(e,t,s,r,a)}var l=i("visible");var u=i("clicktoshow");if(!(l||u))return;o(e,t,r,i);var f=t.showarrow;var c=["x","y"],h=[-10,-30],d={_fullLayout:r};for(var v=0;v<2;v++){var p=c[v];var g=a.coerceRef(e,t,d,p,"","paper");a.coercePosition(t,d,i,g,p,.5);if(f){var m="a"+p,y=a.coerceRef(e,t,d,m,"pixel");if(y!=="pixel"&&y!==g){y=t[m]="pixel"}var b=y==="pixel"?h[v]:.4;a.coercePosition(t,d,i,y,m,b)}i(p+"anchor");i(p+"shift")}n.noneOrAll(e,t,["x","y"]);if(f){n.noneOrAll(e,t,["ax","ay"])}if(u){var x=i("xclick");var _=i("yclick");t._xclick=x===undefined?t.x:a.cleanPosition(x,d,t.xref);t._yclick=_===undefined?t.y:a.cleanPosition(_,d,t.yref)}}},{"../../lib":445,"../../plots/array_container_defaults":488,"../../plots/cartesian/axes":492,"./attributes":308,"./common_defaults":311}],314:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var s=e("../../plots/cartesian/axes");var l=e("../color");var u=e("../drawing");var f=e("../fx");var c=e("../../lib/svg_text_utils");var h=e("../../lib/setcursor");var d=e("../dragelement");var v=e("../../plot_api/plot_template").arrayEditor;var p=e("./draw_arrow_head");t.exports={draw:g,drawOne:m,drawRaw:y};function g(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){m(e,r)}}return i.previousPromises(e)}function m(e,t){var r=e._fullLayout;var n=r.annotations[t]||{};var a=s.getFromId(e,n.xref);var i=s.getFromId(e,n.yref);y(e,n,t,false,a,i)}function y(e,t,r,i,s,g){var m=e._fullLayout;var y=e._fullLayout._size;var b=e._context.edits;var x,_;if(i){x="annotation-"+i;_=i+".annotations"}else{x="annotation";_="annotations"}var w=v(e.layout,_,t);var A=w.modifyBase;var k=w.modifyItem;var T=w.getUpdateObj;m._infolayer.selectAll("."+x+'[data-index="'+r+'"]').remove();var M="clip"+m._uid+"_ann"+r;if(!t._input||t.visible===false){n.selectAll("#"+M).remove();return}var E={x:{},y:{}},C=+t.textangle||0;var S=m._infolayer.append("g").classed(x,true).attr("data-index",String(r)).style("opacity",t.opacity);var L=S.append("g").classed("annotation-text-g",true);var O=b[t.showarrow?"annotationTail":"annotationPosition"];var I=t.captureevents||b.annotationText||O;var D=L.append("g").style("pointer-events",I?"all":null).call(h,"pointer").on("click",function(){e._dragging=false;var a={index:r,annotation:t._input,fullAnnotation:t,event:n.event};if(i){a.subplotId=i}e.emit("plotly_clickannotation",a)});if(t.hovertext){D.on("mouseover",function(){var r=t.hoverlabel;var n=r.font;var a=this.getBoundingClientRect();var i=e.getBoundingClientRect();f.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:t.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:m._hoverlayer.node(),outerContainer:m._paper.node(),gd:e})}).on("mouseout",function(){f.loneUnhover(m._hoverlayer.node())})}var R=t.borderwidth,P=t.borderpad,z=R+P;var F=D.append("rect").attr("class","bg").style("stroke-width",R+"px").call(l.stroke,t.bordercolor).call(l.fill,t.bgcolor);var B=t.width||t.height;var N=m._topclips.selectAll("#"+M).data(B?[0]:[]);N.enter().append("clipPath").classed("annclip",true).attr("id",M).append("rect");N.exit().remove();var j=t.font;var U=D.append("text").classed("annotation-text",true).text(t.text);function V(r){r.call(u.font,j).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"});c.convertToTspans(r,e,H);return r}function H(){var r=U.selectAll("a");if(r.size()===1&&r.text()===U.text()){var n=D.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"});n.node().appendChild(F.node())}var f=D.select(".annotation-text-math-group");var v=!f.empty();var x=u.bBox((v?f:U).node());var _=x.width;var w=x.height;var I=t.width||_;var P=t.height||w;var j=Math.round(I+2*z);var V=Math.round(P+2*z);t._w=I;t._h=P;function H(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var q=false;var G=["x","y"];for(var X=0;X<G.length;X++){var W=G[X],Y=t[W+"ref"]||W,Z=t["a"+W+"ref"],J={x:s,y:g}[W],Q=(C+(W==="x"?0:-90))*Math.PI/180,$=j*Math.cos(Q),K=V*Math.sin(Q),ee=Math.abs($)+Math.abs(K),te=t[W+"anchor"],re=t[W+"shift"]*(W==="x"?1:-1),ne=E[W],ae,ie,oe,se,le;if(J){var ue=J.r2fraction(t[W]);if((e._dragging||!J.autorange)&&(ue<0||ue>1)){if(Z===Y){ue=J.r2fraction(t["a"+W]);if(ue<0||ue>1){q=true}}else{q=true}if(q)continue}ae=J._offset+J.r2p(t[W]);se=.5}else{if(W==="x"){oe=t[W];ae=y.l+y.w*oe}else{oe=1-t[W];ae=y.t+y.h*oe}se=t.showarrow?.5:oe}if(t.showarrow){ne.head=ae;var fe=t["a"+W];le=$*H(.5,t.xanchor)-K*H(.5,t.yanchor);if(Z===Y){ne.tail=J._offset+J.r2p(fe);ie=le}else{ne.tail=ae+fe;ie=le+fe}ne.text=ne.tail+le;var ce=m[W==="x"?"width":"height"];if(Y==="paper"){ne.head=o.constrain(ne.head,1,ce-1)}if(Z==="pixel"){var he=-Math.max(ne.tail-3,ne.text),de=Math.min(ne.tail+3,ne.text)-ce;if(he>0){ne.tail+=he;ne.text+=he}else if(de>0){ne.tail-=de;ne.text-=de}}ne.tail+=re;ne.head+=re}else{le=ee*H(se,te);ie=le;ne.text=ae+le}ne.text+=re;le+=re;ie+=re;t["_"+W+"padplus"]=ee/2+ie;t["_"+W+"padminus"]=ee/2-ie;t["_"+W+"size"]=ee;t["_"+W+"shift"]=le}if(q){D.remove();return}var ve=0;var pe=0;if(t.align!=="left"){ve=(I-_)*(t.align==="center"?.5:1)}if(t.valign!=="top"){pe=(P-w)*(t.valign==="middle"?.5:1)}if(v){f.select("svg").attr({x:z+ve-1,y:z+pe}).call(u.setClipUrl,B?M:null)}else{var ge=z+pe-x.top;var me=z+ve-x.left;U.call(c.positionText,me,ge).call(u.setClipUrl,B?M:null)}N.select("rect").call(u.setRect,z,z,I,P);F.call(u.setRect,R/2,R/2,j-R,V-R);D.call(u.setTranslate,Math.round(E.x.text-j/2),Math.round(E.y.text-V/2));L.attr({transform:"rotate("+C+","+E.x.text+","+E.y.text+")"});var ye=function(r,n){S.selectAll(".annotation-arrow-g").remove();var f=E.x.head,c=E.y.head,h=E.x.tail+r,v=E.y.tail+n,m=E.x.text+r,x=E.y.text+n,_=o.rotationXYMatrix(C,m,x),w=o.apply2DTransform(_),M=o.apply2DTransform2(_),O=+F.attr("width"),I=+F.attr("height"),R=m-.5*O,P=R+O,z=x-.5*I,B=z+I,N=[[R,z,R,B],[R,B,P,B],[P,B,P,z],[P,z,R,z]].map(M);if(N.reduce(function(e,t){return e^!!o.segmentsIntersect(f,c,f+1e6,c+1e6,t[0],t[1],t[2],t[3])},false)){return}N.forEach(function(e){var t=o.segmentsIntersect(h,v,f,c,e[0],e[1],e[2],e[3]);if(t){h=t.x;v=t.y}});var j=t.arrowwidth,U=t.arrowcolor,V=t.arrowside;var H=S.append("g").style({opacity:l.opacity(U)}).classed("annotation-arrow-g",true);var q=H.append("path").attr("d","M"+h+","+v+"L"+f+","+c).style("stroke-width",j+"px").call(l.stroke,l.rgb(U));p(q,V,t);if(b.annotationPosition&&q.node().parentNode&&!i){var G=f;var X=c;if(t.standoff){var W=Math.sqrt(Math.pow(f-h,2)+Math.pow(c-v,2));G+=t.standoff*(h-f)/W;X+=t.standoff*(v-c)/W}var Y=H.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-G)+","+(v-X),transform:"translate("+G+","+X+")"}).style("stroke-width",j+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");var Z,J;d.init({element:Y.node(),gd:e,prepFn:function(){var e=u.getTranslate(D);Z=e.x;J=e.y;if(s&&s.autorange){A(s._name+".autorange",true)}if(g&&g.autorange){A(g._name+".autorange",true)}},moveFn:function(e,r){var n=w(Z,J),a=n[0]+e,i=n[1]+r;D.call(u.setTranslate,a,i);k("x",s?s.p2r(s.r2p(t.x)+e):t.x+e/y.w);k("y",g?g.p2r(g.r2p(t.y)+r):t.y-r/y.h);if(t.axref===t.xref){k("ax",s.p2r(s.r2p(t.ax)+e))}if(t.ayref===t.yref){k("ay",g.p2r(g.r2p(t.ay)+r))}H.attr("transform","translate("+e+","+r+")");L.attr({transform:"rotate("+C+","+a+","+i+")"})},doneFn:function(){a.call("relayout",e,T());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}};if(t.showarrow)ye(0,0);if(O){var be;d.init({element:D.node(),gd:e,prepFn:function(){be=L.attr("transform")},moveFn:function(e,r){var n="pointer";if(t.showarrow){if(t.axref===t.xref){k("ax",s.p2r(s.r2p(t.ax)+e))}else{k("ax",t.ax+e)}if(t.ayref===t.yref){k("ay",g.p2r(g.r2p(t.ay)+r))}else{k("ay",t.ay+r)}ye(e,r)}else if(!i){var a,o;if(s){a=s.p2r(s.r2p(t.x)+e)}else{var l=t._xsize/y.w,u=t.x+(t._xshift-t.xshift)/y.w-l/2;a=d.align(u+e/y.w,l,0,1,t.xanchor)}if(g){o=g.p2r(g.r2p(t.y)+r)}else{var f=t._ysize/y.h,c=t.y-(t._yshift+t.yshift)/y.h-f/2;o=d.align(c-r/y.h,f,0,1,t.yanchor)}k("x",a);k("y",o);if(!s||!g){n=d.getCursor(s?.5:a,g?.5:o,t.xanchor,t.yanchor)}}else return;L.attr({transform:"translate("+e+","+r+")"+be});h(D,n)},doneFn:function(){h(D);a.call("relayout",e,T());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}}if(b.annotationText){U.call(c.makeEditable,{delegate:D,gd:e}).call(V).on("edit",function(r){t.text=r;this.call(V);k("text",r);if(s&&s.autorange){A(s._name+".autorange",true)}if(g&&g.autorange){A(g._name+".autorange",true)}a.call("relayout",e,T())})}else U.call(V)}},{"../../lib":445,"../../lib/setcursor":465,"../../lib/svg_text_utils":469,"../../plot_api/plot_template":482,"../../plots/cartesian/axes":492,"../../plots/plots":528,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"../fx":365,"./draw_arrow_head":315,d3:86}],315:[function(e,t,r){"use strict";var n=e("d3");var a=e("../color");var i=e("./arrow_paths");t.exports=function e(t,r,o){var s=t.node();var l=i[o.arrowhead||0];var u=i[o.startarrowhead||0];var f=(o.arrowwidth||1)*(o.arrowsize||1);var c=(o.arrowwidth||1)*(o.startarrowsize||1);var h=r.indexOf("start")>=0;var d=r.indexOf("end")>=0;var v=l.backoff*f+o.standoff;var p=u.backoff*c+o.startstandoff;var g,m,y,b;if(s.nodeName==="line"){g={x:+t.attr("x1"),y:+t.attr("y1")};m={x:+t.attr("x2"),y:+t.attr("y2")};var x=g.x-m.x;var _=g.y-m.y;y=Math.atan2(_,x);b=y+Math.PI;if(v&&p){if(v+p>Math.sqrt(x*x+_*_)){D();return}}if(v){if(v*v>x*x+_*_){D();return}var w=v*Math.cos(y),A=v*Math.sin(y);m.x+=w;m.y+=A;t.attr({x2:m.x,y2:m.y})}if(p){if(p*p>x*x+_*_){D();return}var k=p*Math.cos(y),T=p*Math.sin(y);g.x-=k;g.y-=T;t.attr({x1:g.x,y1:g.y})}}else if(s.nodeName==="path"){var M=s.getTotalLength(),E="";if(M<v+p){D();return}var C=s.getPointAtLength(0);var S=s.getPointAtLength(.1);y=Math.atan2(C.y-S.y,C.x-S.x);g=s.getPointAtLength(Math.min(p,M));E="0px,"+p+"px,";var L=s.getPointAtLength(M);var O=s.getPointAtLength(M-.1);b=Math.atan2(L.y-O.y,L.x-O.x);m=s.getPointAtLength(Math.max(0,M-v));var I=E?p+v:v;E+=M-I+"px,"+M+"px";t.style("stroke-dasharray",E)}function D(){t.style("stroke-dasharray","0px,100px")}function R(e,r,i,l){if(!e.path)return;if(e.noRotate)i=0;n.select(s.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+r.x+","+r.y+")"+(i?"rotate("+i*180/Math.PI+")":"")+"scale("+l+")"}).style({fill:a.rgb(o.arrowcolor),"stroke-width":0})}if(h)R(u,g,y,c);if(d)R(l,m,b,f)}},{"../color":323,"./arrow_paths":307,d3:86}],316:[function(e,t,r){"use strict";var n=e("./draw");var a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":502,"./attributes":308,"./calc_autorange":309,"./click":310,"./convert_coords":312,"./defaults":313,"./draw":314}],317:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=a(i("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":475,"../../plot_api/plot_template":482,"../annotations/attributes":308}],318:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var n=r.annotations;for(var a=0;a<n.length;a++){i(n[a],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var i=r.domain;var o=t.fullLayout._size;var s={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};n.extendFlat(e._xa,s);a.setConvert(e._xa);e._xa._offset=o.l+i.x[0]*o.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(i.x[1]-i.x[0])};e._ya={};n.extendFlat(e._ya,s);a.setConvert(e._ya);e._ya._offset=o.t+(1-i.y[1])*o.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(i.y[1]-i.y[0])}}},{"../../lib":445,"../../plots/cartesian/axes":492}],319:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("../annotations/common_defaults");var s=e("./attributes");t.exports=function e(t,r,n){i(t,r,{name:"annotations",handleItemDefaults:l,fullLayout:n.fullLayout})};function l(e,t,r,i){function l(r,a){return n.coerce(e,t,s,r,a)}function u(e){var n=e+"axis";var i={_fullLayout:{}};i._fullLayout[n]=r[n];return a.coercePosition(t,i,l,e,e,.5)}var f=l("visible");if(!f)return;o(e,t,i.fullLayout,l);u("x");u("y");u("z");n.noneOrAll(e,t,["x","y","z"]);t.xref="x";t.yref="y";t.zref="z";l("xanchor");l("yanchor");l("xshift");l("yshift");if(t.showarrow){t.axref="pixel";t.ayref="pixel";l("ax",-10);l("ay",-30);n.noneOrAll(e,t,["ax","ay"])}}},{"../../lib":445,"../../plots/array_container_defaults":488,"../../plots/cartesian/axes":492,"../annotations/common_defaults":311,"./attributes":317}],320:[function(e,t,r){"use strict";var n=e("../annotations/draw").drawRaw;var a=e("../../plots/gl3d/project");var i=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var o=t.dataScale;var s=r.annotations;for(var l=0;l<s.length;l++){var u=s[l];var f=false;for(var c=0;c<3;c++){var h=i[c];var d=u[h];var v=r[h+"axis"];var p=v.r2fraction(d);if(p<0||p>1){f=true;break}}if(f){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+l+'"]').remove()}else{u._pdata=a(t.glplot.cameraParams,[r.xaxis.r2l(u.x)*o[0],r.yaxis.r2l(u.y)*o[1],r.zaxis.r2l(u.z)*o[2]]);n(t.graphDiv,u,l,t.id,u._xa,u._ya)}}}},{"../../plots/gl3d/project":525,"../annotations/draw":314}],321:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:i,convert:e("./convert"),draw:e("./draw")};function i(e,t){var r=n.subplotsRegistry.gl3d;if(!r)return;var i=r.attrRegex;var o=Object.keys(e);for(var s=0;s<o.length;s++){var l=o[s];if(i.test(l)&&(e[l].annotations||[]).length){a.pushUnique(t._basePlotModules,r);a.pushUnique(t._subplots.gl3d,l)}}}},{"../../lib":445,"../../registry":536,"./attributes":317,"./convert":318,"./defaults":319,"./draw":320}],322:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],323:[function(e,t,r){"use strict";var n=e("tinycolor2");var a=e("fast-isnumeric");var i=t.exports={};var o=e("./attributes");i.defaults=o.defaults;var s=i.defaultLine=o.defaultLine;i.lightLine=o.lightLine;var l=i.background=o.background;i.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};i.rgb=function(e){return i.tinyRGB(n(e))};i.opacity=function(e){return e?n(e).getAlpha():0};i.addOpacity=function(e,t){var r=n(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};i.combine=function(e,t){var r=n(e).toRgb();if(r.a===1)return n(e).toRgbString();var a=n(t||l).toRgb(),i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},o={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return n(o).toRgbString()};i.contrast=function(e,t,r){var a=n(e);if(a.getAlpha()!==1)a=n(i.combine(e,l));var o=a.isDark()?t?a.lighten(t):l:r?a.darken(r):s;return o.toString()};i.stroke=function(e,t){var r=n(t);e.style({stroke:i.tinyRGB(r),"stroke-opacity":r.getAlpha()})};i.fill=function(e,t){var r=n(t);e.style({fill:i.tinyRGB(r),"fill-opacity":r.getAlpha()})};i.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e),r,n,a,o;for(r=0;r<t.length;r++){a=t[r];o=e[a];if(a.substr(a.length-5)==="color"){if(Array.isArray(o)){for(n=0;n<o.length;n++)o[n]=u(o[n])}else e[a]=u(o)}else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(o)){for(n=0;n<o.length;n++){if(Array.isArray(o[n]))o[n][1]=u(o[n][1])}}else if(Array.isArray(o)){var s=o[0];if(!Array.isArray(s)&&s&&typeof s==="object"){for(n=0;n<o.length;n++)i.clean(o[n])}}else if(o&&typeof o==="object")i.clean(o)}};function u(e){if(a(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/),i=t.charAt(3)==="a"&&n.length===4;if(!i&&n.length!==3)return e;for(var o=0;o<n.length;o++){if(!n[o].length)return e;n[o]=Number(n[o]);if(!(n[o]>=0))return e;if(o===3){if(n[o]>1)n[o]=1}else if(n[o]>=1)return e}var s=Math.round(n[0]*255)+", "+Math.round(n[1]*255)+", "+Math.round(n[2]*255);if(i)return"rgba("+s+", "+n[3]+")";return"rgb("+s+")"}},{"./attributes":322,"fast-isnumeric":151,tinycolor2:285}],324:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/layout_attributes");var a=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:i({},n.ticks,{dflt:""}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:a({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,showexponent:n.showexponent,title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":436,"../../plot_api/edit_types":475,"../../plots/cartesian/layout_attributes":504,"../../plots/font_attributes":518}],325:[function(e,t,r){"use strict";var n=e("../colorscale");var a=e("./draw");t.exports=function e(t,r,i){if(typeof i==="function")return i(t,r);var o=r[0].trace;var s="cb"+o.uid;var l=i.container;var u=l?o[l]:o;t._fullLayout._infolayer.selectAll("."+s).remove();if(!u||!u.showscale)return;var f=u[i.min];var c=u[i.max];var h=r[0].t.cb=a(t,s);var d=n.makeColorScaleFunc(n.extractScale(u.colorscale,f,c),{noNumericCheck:true});h.fillcolor(d).filllevels({start:f,end:c,size:(c-f)/254}).options(u.colorbar)()}},{"../colorscale":338,"./draw":328}],326:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],327:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/tick_value_defaults");var o=e("../../plots/cartesian/tick_mark_defaults");var s=e("../../plots/cartesian/tick_label_defaults");var l=e("./attributes");t.exports=function e(t,r,u){var f=a.newContainer(r,"colorbar"),c=t.colorbar||{};function h(e,t){return n.coerce(c,f,l,e,t)}var d=h("thicknessmode");h("thickness",d==="fraction"?30/(u.width-u.margin.l-u.margin.r):30);var v=h("lenmode");h("len",v==="fraction"?1:u.height-u.margin.t-u.margin.b);h("x");h("xanchor");h("xpad");h("y");h("yanchor");h("ypad");n.noneOrAll(c,f,["x","y"]);h("outlinecolor");h("outlinewidth");h("bordercolor");h("borderwidth");h("bgcolor");i(c,f,h,"linear");var p={outerTicks:false,font:u.font};s(c,f,h,"linear",p);o(c,f,h,"linear",p);h("title",u._dfltTitle.colorbar);n.coerceFont(h,"titlefont",u.font);h("titleside")}},{"../../lib":445,"../../plot_api/plot_template":482,"../../plots/cartesian/tick_label_defaults":511,"../../plots/cartesian/tick_mark_defaults":512,"../../plots/cartesian/tick_value_defaults":513,"./attributes":324}],328:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("../../plots/plots");var o=e("../../registry");var s=e("../../plots/cartesian/axes");var l=e("../dragelement");var u=e("../../lib");var f=e("../../lib/extend").extendFlat;var c=e("../../lib/setcursor");var h=e("../drawing");var d=e("../color");var v=e("../titles");var p=e("../../lib/svg_text_utils");var g=e("../../constants/alignment");var m=g.LINE_SPACING;var y=g.FROM_TL;var b=g.FROM_BR;var x=e("../../plots/cartesian/axis_defaults");var _=e("../../plots/cartesian/position_defaults");var w=e("../../plots/cartesian/layout_attributes");var A=e("./attributes");var k=e("./constants").cn;t.exports=function e(t,r){var g={};Object.keys(A).forEach(function(e){g[e]=null});g.fillcolor=null;g.line={color:null,width:null,dash:null};g.levels={start:null,end:null,size:null};g.filllevels=null;function T(){var e=t._fullLayout,A=e._size;if(typeof g.fillcolor!=="function"&&typeof g.line.color!=="function"){e._infolayer.selectAll("g."+r).remove();return}var E=n.extent((typeof g.fillcolor==="function"?g.fillcolor:g.line.color).domain());var C=[];var S=[];var L=typeof g.line.color==="function"?g.line.color:function(){return g.line.color};var O=typeof g.fillcolor==="function"?g.fillcolor:function(){return g.fillcolor};var I;var D;var R=g.levels.end+g.levels.size/100,P=g.levels.size,z=1.001*E[0]-.001*E[1],F=1.001*E[1]-.001*E[0];for(D=0;D<1e5;D++){I=g.levels.start+D*P;if(P>0?I>=R:I<=R)break;if(I>z&&I<F)C.push(I)}if(typeof g.fillcolor==="function"){if(g.filllevels){R=g.filllevels.end+g.filllevels.size/100;P=g.filllevels.size;for(D=0;D<1e5;D++){I=g.filllevels.start+D*P;if(P>0?I>=R:I<=R)break;if(I>E[0]&&I<E[1])S.push(I)}}else{S=C.map(function(e){return e-g.levels.size/2});S.push(S[S.length-1]+g.levels.size)}}else if(g.fillcolor&&typeof g.fillcolor==="string"){S=[0]}if(g.levels.size<0){C.reverse();S.reverse()}var B=A.h,N=A.w,j=Math.round(g.thickness*(g.thicknessmode==="fraction"?N:1)),U=j/A.w,V=Math.round(g.len*(g.lenmode==="fraction"?B:1)),H=V/A.h,q=g.xpad/A.w,G=(g.borderwidth+g.outlinewidth)/2,X=g.ypad/A.h,W=Math.round(g.x*A.w+g.xpad),Y=g.x-U*({middle:.5,right:1}[g.xanchor]||0),Z=g.y+H*(({top:-.5,bottom:.5}[g.yanchor]||0)-.5),J=Math.round(A.h*(1-Z)),Q=J-V,$,K={type:"linear",range:E,tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,exponentformat:g.exponentformat,separatethousands:g.separatethousands,showexponent:g.showexponent,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,title:g.title,titlefont:g.titlefont,showline:true,anchor:"free",position:1},ee={type:"linear",_id:"y"+r},te={letter:"y",font:e.font,noHover:true,calendar:e.calendar};function re(e,t){return u.coerce(K,ee,w,e,t)}x(K,ee,re,te,e);_(K,ee,re,te);ee.position=g.x+q+U;T.axis=ee;if(["top","bottom"].indexOf(g.titleside)!==-1){ee.titleside=g.titleside;ee.titlex=g.x+q;ee.titley=Z+(g.titleside==="top"?H-X:X)}if(g.line.color&&g.tickmode==="auto"){ee.tickmode="linear";ee.tick0=g.levels.start;var ne=g.levels.size;var ae=u.constrain((J-Q)/50,4,15)+1,ie=(E[1]-E[0])/((g.nticks||ae)*ne);if(ie>1){var oe=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));ne*=oe*u.roundUp(ie/oe,[2,5,10]);if((Math.abs(g.levels.start)/g.levels.size+1e-6)%1<2e-6){ee.tick0=0}}ee.dtick=ne}ee.domain=[Z+X,Z+H-X];ee.setScale();var se=u.ensureSingle(e._infolayer,"g",r,function(e){e.classed(k.colorbar,true).each(function(){var e=n.select(this);e.append("rect").classed(k.cbbg,true);e.append("g").classed(k.cbfills,true);e.append("g").classed(k.cblines,true);e.append("g").classed(k.cbaxis,true).classed(k.crisp,true);e.append("g").classed(k.cbtitleunshift,true).append("g").classed(k.cbtitle,true);e.append("rect").classed(k.cboutline,true);e.select(".cbtitle").datum(0)})});se.attr("transform","translate("+Math.round(A.l)+","+Math.round(A.t)+")");var le=se.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(A.l)+",-"+Math.round(A.t)+")");ee._axislayer=se.select(".cbaxis");var ue=0;if(["top","bottom"].indexOf(g.titleside)!==-1){var fe=A.l+(g.x+q)*A.w,ce=ee.titlefont.size,he;if(g.titleside==="top"){he=(1-(Z+H-X))*A.h+A.t+3+ce*.75}else{he=(1-(Z+X))*A.h+A.t-3-ce*.25}ve(ee._id+"title",{attributes:{x:fe,y:he,"text-anchor":"start"}})}function de(){if(["top","bottom"].indexOf(g.titleside)!==-1){var r=se.select(".cbtitle"),i=r.select("text"),o=[-g.outlinewidth/2,g.outlinewidth/2],l=r.select(".h"+ee._id+"title-math-group").node(),f=15.6;if(i.node()){f=parseInt(i.node().style.fontSize,10)*m}if(l){ue=h.bBox(l).height;if(ue>f){o[1]-=(ue-f)/2}}else if(i.node()&&!i.classed(k.jsPlaceholder)){ue=h.bBox(i.node()).height}if(ue){ue+=5;if(g.titleside==="top"){ee.domain[1]-=ue/A.h;o[1]*=-1}else{ee.domain[0]+=ue/A.h;var c=p.lineCount(i);o[1]+=(1-c)*f}r.attr("transform","translate("+o+")");ee.setScale()}}se.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(A.h*(1-ee.domain[1]))+")");ee._axislayer.attr("transform","translate(0,"+Math.round(-A.t)+")");var d=se.select(".cbfills").selectAll("rect.cbfill").data(S);d.enter().append("rect").classed(k.cbfill,true).style("stroke","none");d.exit().remove();d.each(function(e,t){var r=[t===0?E[0]:(S[t]+S[t-1])/2,t===S.length-1?E[1]:(S[t]+S[t+1])/2].map(ee.c2p).map(Math.round);if(t!==S.length-1){r[1]+=r[1]>r[0]?1:-1}var i=O(e).replace("e-",""),o=a(i).toHexString();n.select(this).attr({x:W,width:Math.max(j,2),y:n.min(r),height:Math.max(n.max(r)-n.min(r),2),fill:o})});var v=se.select(".cblines").selectAll("path.cbline").data(g.line.color&&g.line.width?C:[]);v.enter().append("path").classed(k.cbline,true);v.exit().remove();v.each(function(e){n.select(this).attr("d","M"+W+","+(Math.round(ee.c2p(e))+g.line.width/2%1)+"h"+j).call(h.lineGroupStyle,g.line.width,L(e),g.line.dash)});ee._axislayer.selectAll("g."+ee._id+"tick,path").remove();ee._pos=W+j+(g.outlinewidth||0)/2-(g.ticks==="outside"?1:0);ee.side="right";return u.syncOrAsync([function(){return s.doTicksSingle(t,ee,true)},function(){if(["top","bottom"].indexOf(g.titleside)===-1){var r=ee.titlefont.size,a=ee._offset+ee._length/2,i=A.l+(ee.position||0)*A.w+(ee.side==="right"?10+r*(ee.showticklabels?1:.5):-10-r*(ee.showticklabels?.5:0));ve("h"+ee._id+"title",{avoid:{selection:n.select(t).selectAll("g."+ee._id+"tick"),side:g.titleside,offsetLeft:A.l,offsetTop:0,maxShift:e.width},attributes:{x:i,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function ve(r,n){var a=M();var i="colorbar.title";var o=a._module.colorbar.container;if(o)i=o+"."+i;var s={propContainer:ee,propName:i,traceIndex:a.index,placeholder:e._dfltTitle.colorbar,containerGroup:se.select(".cbtitle")};var l=r.charAt(0)==="h"?r.substr(1):"h"+r;se.selectAll("."+l+",."+l+"-math-group").remove();v.draw(t,r,f(s,n||{}))}function pe(){var e=j+g.outlinewidth/2+h.bBox(ee._axislayer.node()).width;$=le.select("text");if($.node()&&!$.classed(k.jsPlaceholder)){var n=le.select(".h"+ee._id+"title-math-group").node(),a;if(n&&["top","bottom"].indexOf(g.titleside)!==-1){a=h.bBox(n).width}else{a=h.bBox(le.node()).right-W-A.l}e=Math.max(e,a)}var o=2*g.xpad+e+g.borderwidth+g.outlinewidth/2,s=J-Q;se.select(".cbbg").attr({x:W-g.xpad-(g.borderwidth+g.outlinewidth)/2,y:Q-G,width:Math.max(o,2),height:Math.max(s+2*G,2)}).call(d.fill,g.bgcolor).call(d.stroke,g.bordercolor).style({"stroke-width":g.borderwidth});se.selectAll(".cboutline").attr({x:W,y:Q+g.ypad+(g.titleside==="top"?ue:0),width:Math.max(j,2),height:Math.max(s-2*g.ypad-ue,2)}).call(d.stroke,g.outlinecolor).style({fill:"None","stroke-width":g.outlinewidth});var l=({center:.5,right:1}[g.xanchor]||0)*o;se.attr("transform","translate("+(A.l-l)+","+A.t+")");var u={};var f=y[g.yanchor];var c=b[g.yanchor];if(g.lenmode==="pixels"){u.y=g.y;u.t=s*f;u.b=s*c}else{u.t=u.b=0;u.yt=g.y+g.len*f;u.yb=g.y-g.len*c}var v=y[g.xanchor];var p=b[g.xanchor];if(g.thicknessmode==="pixels"){u.x=g.x;u.l=o*v;u.r=o*p}else{var m=o-j;u.l=m*v;u.r=m*p;u.xl=g.x-g.thickness*v;u.xr=g.x+g.thickness*p}i.autoMargin(t,r,u)}var ge=u.syncOrAsync([i.previousPromises,de,i.previousPromises,pe],t);if(ge&&ge.then)(t._promises||[]).push(ge);if(t._context.edits.colorbarPosition){var me,ye,be;l.init({element:se.node(),gd:t,prepFn:function(){me=se.attr("transform");c(se)},moveFn:function(e,t){se.attr("transform",me+" "+"translate("+e+","+t+")");ye=l.align(Y+e/A.w,U,0,1,g.xanchor);be=l.align(Z-t/A.h,H,0,1,g.yanchor);var r=l.getCursor(ye,be,g.xanchor,g.yanchor);c(se,r)},doneFn:function(){c(se);if(ye!==undefined&&be!==undefined){o.call("restyle",t,{"colorbar.x":ye,"colorbar.y":be},M().index)}}})}return ge}function M(){var e=r.substr(2),n,a;for(n=0;n<t._fullData.length;n++){a=t._fullData[n];if(a.uid===e)return a}}Object.keys(g).forEach(function(e){T[e]=function(t){if(!arguments.length)return g[e];g[e]=u.isPlainObject(g[e])?u.extendFlat(g[e],t):t;return T}});T.options=function(e){Object.keys(e).forEach(function(t){if(typeof T[t]==="function"){T[t](e[t])}});return T};T._opts=g;return T}},{"../../constants/alignment":421,"../../lib":445,"../../lib/extend":436,"../../lib/setcursor":465,"../../lib/svg_text_utils":469,"../../plots/cartesian/axes":492,"../../plots/cartesian/axis_defaults":494,"../../plots/cartesian/layout_attributes":504,"../../plots/cartesian/position_defaults":507,"../../plots/plots":528,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"../titles":414,"./attributes":324,"./constants":326,d3:86,tinycolor2:285}],329:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t){return n.isPlainObject(t.colorbar)}},{"../../lib":445}],330:[function(e,t,r){"use strict";var n=e("./scales.js");var a=Object.keys(n);function i(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var a=r.cLetter||"c";var o="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var s="noScale"in r?r.noScale:t==="marker.line";var l="showScaleDflt"in r?r.showScaleDflt:a==="z";var u=typeof r.colorscaleDflt==="string"?n[r.colorscaleDflt]:null;var f=r.editTypeOverride||"";var c=t?t+".":"";var h,d;if("colorAttr"in r){h=r.colorAttr;d=r.colorAttr}else{h={z:"z",c:"color"}[a];d="in "+i(c+h)}var v=o?" Has an effect only if "+d+"is set to a numerical array.":"";var p=a+"auto";var g=a+"min";var m=a+"max";var y=i(c+g);var b=i(c+m);var x=y+" and "+b;var _={};_[g]=_[m]=undefined;var w={};w[p]=false;var A={};if(h==="color"){A.color={valType:"color",arrayOk:true,editType:f||"style"}}A[p]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:_};A[g]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:w};A[m]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:w};A.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:false}};A.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};A.reversescale={valType:"boolean",dflt:false,editType:"calc"};if(!s){A.showscale={valType:"boolean",dflt:l,editType:"calc"}}return A}},{"./scales.js":342}],331:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./scales");var i=e("./flip_scale");t.exports=function e(t,r,o,s){var l=t;var u=t._input;var f=t._fullInput;var c=t.updateStyle;function h(e,r,n){if(n===undefined)n=r;if(c){c(t._input,o?o+"."+e:e,r)}else{u[e]=r}l[e]=n;if(f&&t!==t._fullInput){if(c){c(t._fullInput,o?o+"."+e:e,n)}else{f[e]=n}}}if(o){l=n.nestedProperty(l,o).get();u=n.nestedProperty(u,o).get();f=n.nestedProperty(f,o).get()||{}}var d=s+"auto";var v=s+"min";var p=s+"max";var g=l[d];var m=l[v];var y=l[p];var b=l.colorscale;if(g!==false||m===undefined){m=n.aggNums(Math.min,null,r)}if(g!==false||y===undefined){y=n.aggNums(Math.max,null,r)}if(m===y){m-=.5;y+=.5}h(v,m);h(p,y);h(d,g!==false||m===undefined&&y===undefined);if(l.autocolorscale){if(m*y<0)b=a.RdBu;else if(m>=0)b=a.Reds;else b=a.Blues;h("colorscale",b,l.reversescale?i(b):b);if(!u.autocolorscale){h("autocolorscale",false)}}}},{"../../lib":445,"./flip_scale":335,"./scales":342}],332:[function(e,t,r){"use strict";var n=e("./scales");t.exports=n.RdBu},{"./scales":342}],333:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../colorbar/has_colorbar");var o=e("../colorbar/defaults");var s=e("./is_valid_scale");var l=e("./flip_scale");t.exports=function e(t,r,u,f,c){var h=c.prefix,d=c.cLetter,v=h.slice(0,h.length-1),p=h?a.nestedProperty(t,v).get()||{}:t,g=h?a.nestedProperty(r,v).get()||{}:r,m=p[d+"min"],y=p[d+"max"],b=p.colorscale;var x=n(m)&&n(y)&&m<y;f(h+d+"auto",!x);f(h+d+"min");f(h+d+"max");var _;if(b!==undefined)_=!s(b);f(h+"autocolorscale",_);var w=f(h+"colorscale");var A=f(h+"reversescale");if(A)g.colorscale=l(w);if(h==="marker.line.")return;var k;if(h)k=i(p);var T=f(h+"showscale",k);if(T)o(p,g,u)}},{"../../lib":445,"../colorbar/defaults":327,"../colorbar/has_colorbar":329,"./flip_scale":335,"./is_valid_scale":339,"fast-isnumeric":151}],334:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=t.length,i=new Array(a),o=new Array(a);for(var s=0;s<a;s++){var l=t[s];i[s]=r+l[0]*(n-r);o[s]=l[1]}return{domain:i,range:o}}},{}],335:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.length,n=new Array(r),a;for(var i=r-1,o=0;i>=0;i--,o++){a=t[i];n[o]=[1-a[0],a[1]]}return n}},{}],336:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./default_scale");var i=e("./is_valid_scale_array");t.exports=function e(t,r){if(!r)r=a;if(!t)return r;function o(){try{t=n[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){o();if(typeof t==="string")o()}if(!i(t))return r;return t}},{"./default_scale":332,"./is_valid_scale_array":340,"./scales":342}],337:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("./is_valid_scale");t.exports=function e(t,r){var o=r?a.nestedProperty(t,r).get()||{}:t;var s=o.color;var l=false;if(a.isArrayOrTypedArray(s)){for(var u=0;u<s.length;u++){if(n(s[u])){l=true;break}}}return a.isPlainObject(o)&&(l||o.showscale===true||n(o.cmin)&&n(o.cmax)||i(o.colorscale)||a.isPlainObject(o.colorbar))}},{"../../lib":445,"./is_valid_scale":339,"fast-isnumeric":151}],338:[function(e,t,r){"use strict";r.scales=e("./scales");r.defaultScale=e("./default_scale");r.attributes=e("./attributes");r.handleDefaults=e("./defaults");r.calc=e("./calc");r.hasColorscale=e("./has_colorscale");r.isValidScale=e("./is_valid_scale");r.getScale=e("./get_scale");r.flipScale=e("./flip_scale");r.extractScale=e("./extract_scale");r.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":330,"./calc":331,"./default_scale":332,"./defaults":333,"./extract_scale":334,"./flip_scale":335,"./get_scale":336,"./has_colorscale":337,"./is_valid_scale":339,"./make_color_scale_func":341,"./scales":342}],339:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./is_valid_scale_array");t.exports=function e(t){if(n[t]!==undefined)return true;else return a(t)}},{"./is_valid_scale_array":340,"./scales":342}],340:[function(e,t,r){"use strict";var n=e("tinycolor2");t.exports=function e(t){var r=0;if(!Array.isArray(t)||t.length<2)return false;if(!t[0]||!t[t.length-1])return false;if(+t[0][0]!==0||+t[t.length-1][0]!==1)return false;for(var a=0;a<t.length;a++){var i=t[a];if(i.length!==2||+i[0]<r||!n(i[1]).isValid()){return false}r=+i[0]}return true}},{tinycolor2:285}],341:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("fast-isnumeric");var o=e("../color");t.exports=function e(t,r){r=r||{};var l=t.domain,u=t.range,f=u.length,c=new Array(f);for(var h=0;h<f;h++){var d=a(u[h]).toRgb();c[h]=[d.r,d.g,d.b,d.a]}var v=n.scale.linear().domain(l).range(c).clamp(true);var p=r.noNumericCheck,g=r.returnArray,m;if(p&&g){m=v}else if(p){m=function(e){return s(v(e))}}else if(g){m=function(e){if(i(e))return v(e);else if(a(e).isValid())return e;else return o.defaultLine}}else{m=function(e){if(i(e))return s(v(e));else if(a(e).isValid())return e;else return o.defaultLine}}m.domain=v.domain;m.range=function(){return u};return m};function s(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return a(t).toRgbString()}},{"../color":323,d3:86,"fast-isnumeric":151,tinycolor2:285}],342:[function(e,t,r){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],343:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){var o=(t-n)/(a-n),s=o+r/(a-n),l=(o+s)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return l;if(i==="right"||i==="top")return s;if(o<2/3-l)return o;if(s>4/3-l)return s;return l}},{}],344:[function(e,t,r){"use strict";var n=e("../../lib");var a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,i,o){if(i==="left")t=0;else if(i==="center")t=1;else if(i==="right")t=2;else t=n.constrain(Math.floor(t*3),0,2);if(o==="bottom")r=0;else if(o==="middle")r=1;else if(o==="top")r=2;else r=n.constrain(Math.floor(r*3),0,2);return a[r][t]}},{"../../lib":445}],345:[function(e,t,r){"use strict";var n=e("mouse-event-offset");var a=e("has-hover");var i=e("has-passive-events");var o=e("../../registry");var s=e("../../lib");var l=e("../../plots/cartesian/constants");var u=e("../../constants/interactions");var f=t.exports={};f.align=e("./align");f.getCursor=e("./cursor");var c=e("./unhover");f.unhover=c.wrapped;f.unhoverRaw=c.raw;f.init=function e(t){var r=t.gd;var n=1;var o=u.DBLCLICKDELAY;var c=t.element;var p,g,m,y,b,x,_,w;if(!r._mouseDownTime)r._mouseDownTime=0;c.style.pointerEvents="all";c.onmousedown=T;if(!i){c.ontouchstart=T}else{if(c._ontouchstart){c.removeEventListener("touchstart",c._ontouchstart)}c._ontouchstart=T;c.addEventListener("touchstart",T,{passive:false})}function A(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var k=t.clampFn||A;function T(e){e.preventDefault();r._dragged=false;r._dragging=true;var i=v(e);p=i[0];g=i[1];_=e.target;x=e;w=e.buttons===2||e.ctrlKey;m=(new Date).getTime();if(m-r._mouseDownTime<o){n+=1}else{n=1;r._mouseDownTime=m}if(t.prepFn)t.prepFn(e,p,g);if(a&&!w){b=h();b.style.cursor=window.getComputedStyle(c).cursor}else if(!a){b=document;y=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(c).cursor}document.addEventListener("mousemove",M);document.addEventListener("mouseup",E);document.addEventListener("touchmove",M);document.addEventListener("touchend",E);return}function M(e){e.preventDefault();var n=v(e);var a=t.minDrag||l.MINDRAG;var i=k(n[0]-p,n[1]-g,a);var o=i[0];var s=i[1];if(o||s){r._dragged=true;f.unhover(r)}if(r._dragged&&t.moveFn&&!w)t.moveFn(o,s);return}function E(e){document.removeEventListener("mousemove",M);document.removeEventListener("mouseup",E);document.removeEventListener("touchmove",M);document.removeEventListener("touchend",E);e.preventDefault();if(a){s.removeElement(b)}else if(y){b.documentElement.style.cursor=y;y=null}if(!r._dragging){r._dragged=false;return}r._dragging=false;if((new Date).getTime()-r._mouseDownTime>o){n=Math.max(n-1,1)}if(r._dragged){if(t.doneFn)t.doneFn()}else{if(t.clickFn)t.clickFn(n,x);if(!w){var i;try{i=new MouseEvent("click",e)}catch(t){var l=v(e);i=document.createEvent("MouseEvents");i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,l[0],l[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}_.dispatchEvent(i)}}d(r);r._dragged=false;return}};function h(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}f.coverSlip=h;function d(e){e._dragging=false;if(e._replotPending)o.call("plot",e)}function v(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../constants/interactions":423,"../../lib":445,"../../plots/cartesian/constants":497,"../../registry":536,"./align":343,"./cursor":344,"./unhover":346,"has-hover":201,"has-passive-events":202,"mouse-event-offset":215}],346:[function(e,t,r){"use strict";var n=e("../../lib/events");var a=e("../../lib/throttle");var i=e("../../lib/get_graph_div");var o=e("../fx/constants");var s=t.exports={};s.wrapped=function(e,t,r){e=i(e);if(e._fullLayout){a.clear(e._fullLayout._uid+o.HOVERID)}s.raw(e,t,r)};s.raw=function e(t,r){var a=t._fullLayout;var i=t._hoverdata;if(!r)r={};if(r.target&&n.triggerHandler(t,"plotly_beforehover",r)===false){return}a._hoverlayer.selectAll("g").remove();a._hoverlayer.selectAll("line").remove();a._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&i){t.emit("plotly_unhover",{event:r,points:i})}}},{"../../lib/events":435,"../../lib/get_graph_div":440,"../../lib/throttle":470,"../fx/constants":360}],347:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],348:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../registry");var s=e("../color");var l=e("../colorscale");var u=e("../../lib");var f=e("../../lib/svg_text_utils");var c=e("../../constants/xmlns_namespaces");var h=e("../../constants/alignment");var d=h.LINE_SPACING;var v=e("../../constants/interactions").DESELECTDIM;var p=e("../../traces/scatter/subtypes");var g=e("../../traces/scatter/make_bubble_size_func");var m=t.exports={};m.font=function(e,t,r,n){if(u.isPlainObject(t)){n=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(n)e.call(s.fill,n)};m.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};m.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};m.setRect=function(e,t,r,n,a){e.call(m.setPosition,t,r).call(m.setSize,n,a)};m.translatePoint=function(e,t,r,n){var i=r.c2p(e.x);var o=n.c2p(e.y);if(a(i)&&a(o)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",i).attr("y",o)}else{t.attr("transform","translate("+i+","+o+")")}}else{return false}return true};m.translatePoints=function(e,t,r){e.each(function(e){var a=n.select(this);m.translatePoint(e,a,t,r)})};m.hideOutsideRangePoint=function(e,t,r,n,a,i){t.attr("display",r.isPtWithinRange(e,a)&&n.isPtWithinRange(e,i)?null:"none")};m.hideOutsideRangePoints=function(e,t){if(!t._hasClipOnAxisFalse)return;var r=t.xaxis;var a=t.yaxis;e.each(function(t){var i=t[0].trace;var o=i.xcalendar;var s=i.ycalendar;var l=i.type==="bar"?".bartext":".point,.textpoint";e.selectAll(l).each(function(e){m.hideOutsideRangePoint(e,n.select(this),r,a,o,s)})})};m.crispRound=function(e,t,r){if(!t||!a(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};m.singleLineStyle=function(e,t,r,n,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,l=a||i.dash||"";s.stroke(t,n||i.color);m.dashLine(t,l,o)};m.lineGroupStyle=function(e,t,r,a){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=t||i.width||0,l=a||i.dash||"";n.select(this).call(s.stroke,r||i.color).call(m.dashLine,l,o)})};m.dashLine=function(e,t,r){r=+r||0;t=m.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};m.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};m.singleFillStyle=function(e){var t=n.select(e.node());var r=t.data();var a=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(a){e.call(s.fill,a)}};m.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var r=n.select(this);try{r.call(s.fill,t[0].trace.fillcolor)}catch(t){u.error(t,e);r.remove()}})};var y=e("./symbol_defs");m.symbolNames=[];m.symbolFuncs=[];m.symbolNeedLines={};m.symbolNoDot={};m.symbolNoFill={};m.symbolList=[];Object.keys(y).forEach(function(e){var t=y[e];m.symbolList=m.symbolList.concat([t.n,e,t.n+100,e+"-open"]);m.symbolNames[t.n]=e;m.symbolFuncs[t.n]=t.f;if(t.needLine){m.symbolNeedLines[t.n]=true}if(t.noDot){m.symbolNoDot[t.n]=true}else{m.symbolList=m.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])}if(t.noFill){m.symbolNoFill[t.n]=true}});var b=m.symbolNames.length,x="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";m.symbolNumber=function(e){if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=m.symbolNames.indexOf(e);if(e>=0){e+=t}}if(e%100>=b||e>=400){return 0}return Math.floor(Math.max(e,0))};function _(e,t){var r=e%100;return m.symbolFuncs[r](t)+(e>=200?x:"")}var w={x1:1,x2:0,y1:0,y2:0};var A={x1:0,x2:0,y1:1,y2:0};m.gradient=function(e,t,r,a,o,l){var f=t._fullLayout._defs.select(".gradients").selectAll("#"+r).data([a+o+l],u.identity);f.exit().remove();f.enter().append(a==="radial"?"radialGradient":"linearGradient").each(function(){var e=n.select(this);if(a==="horizontal")e.attr(w);else if(a==="vertical")e.attr(A);e.attr("id",r);var t=i(o);var u=i(l);e.append("stop").attr({offset:"0%","stop-color":s.tinyRGB(u),"stop-opacity":u.getAlpha()});e.append("stop").attr({offset:"100%","stop-color":s.tinyRGB(t),"stop-opacity":t.getAlpha()})});e.style({fill:"url(#"+r+")","fill-opacity":null})};m.initGradients=function(e){var t=u.ensureSingle(e._fullLayout._defs,"g","gradients");t.selectAll("linearGradient,radialGradient").remove()};m.pointStyle=function(e,t,r){if(!e.size())return;var a=m.makePointStyleFns(t);e.each(function(e){m.singlePointStyle(e,n.select(this),t,a,r)})};m.singlePointStyle=function(e,t,r,n,a){var i=r.marker;var o=i.line;t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(n.ms2mrc){var l;if(e.ms==="various"||i.size==="various"){l=3}else{l=n.ms2mrc(e.ms)}e.mrc=l;if(n.selectedSizeFn){l=e.mrc=n.selectedSizeFn(e)}var f=m.symbolNumber(e.mx||i.symbol)||0;e.om=f%200>=100;t.attr("d",_(f,l))}var c=false;var h,d,v;if(e.so){v=o.outlierwidth;d=o.outliercolor;h=i.outliercolor}else{var p=(o||{}).width;v=(e.mlw+1||p+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)d=e.mlcc=n.lineScale(e.mlc);else if(u.isArrayOrTypedArray(o.color))d=s.defaultLine;else d=o.color;if(u.isArrayOrTypedArray(i.color)){h=s.defaultLine;c=true}if("mc"in e){h=e.mcc=n.markerScale(e.mc)}else{h=i.color||"rgba(0,0,0,0)"}if(n.selectedColorFn){h=n.selectedColorFn(e)}}if(e.om){t.call(s.stroke,h).style({"stroke-width":(v||1)+"px",fill:"none"})}else{t.style("stroke-width",v+"px");var g=i.gradient;var y=e.mgt;if(y)c=true;else y=g&&g.type;if(y&&y!=="none"){var b=e.mgc;if(b)c=true;else b=g.color;var x="g"+a._fullLayout._uid+"-"+r.uid;if(c)x+="-"+e.i;t.call(m.gradient,a,x,y,h,b)}else{t.call(s.fill,h)}if(v){t.call(s.stroke,d)}}};m.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=m.tryColorscale(r,"");t.lineScale=m.tryColorscale(r,"line");if(o.traceIs(e,"symbols")){t.ms2mrc=p.isBubble(e)?g(e):function(){return(r.size||6)/2}}if(e.selectedpoints){u.extendFlat(t,m.makeSelectedPointStyleFns(e))}return t};m.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.marker||{};var i=r.marker||{};var s=n.marker||{};var l=a.opacity;var f=i.opacity;var c=s.opacity;var h=f!==undefined;var d=c!==undefined;if(u.isArrayOrTypedArray(l)||h||d){t.selectedOpacityFn=function(e){var t=e.mo===undefined?a.opacity:e.mo;if(e.selected){return h?f:t}else{return d?c:v*t}}}var p=a.color;var g=i.color;var m=s.color;if(g||m){t.selectedColorFn=function(e){var t=e.mcc||p;if(e.selected){return g||t}else{return m||t}}}var y=a.size;var b=i.size;var x=s.size;var _=b!==undefined;var w=x!==undefined;if(o.traceIs(e,"symbols")&&(_||w)){t.selectedSizeFn=function(e){var t=e.mrc||y/2;if(e.selected){return _?b/2:t}else{return w?x/2:t}}}return t};m.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.textfont||{};var i=r.textfont||{};var o=n.textfont||{};var l=a.color;var u=i.color;var f=o.color;t.selectedTextColorFn=function(e){var t=e.tc||l;if(e.selected){return u||t}else{if(f)return f;else return u?t:s.addOpacity(t,v)}};return t};m.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=m.makeSelectedPointStyleFns(t);var a=t.marker||{};var i=[];if(r.selectedOpacityFn){i.push(function(e,t){e.style("opacity",r.selectedOpacityFn(t))})}if(r.selectedColorFn){i.push(function(e,t){s.fill(e,r.selectedColorFn(t))})}if(r.selectedSizeFn){i.push(function(e,t){var n=t.mx||a.symbol||0;var i=r.selectedSizeFn(t);e.attr("d",_(m.symbolNumber(n),i));t.mrc2=i})}if(i.length){e.each(function(e){var t=n.select(this);for(var r=0;r<i.length;r++){i[r](t,e)}})}};m.tryColorscale=function(e,t){var r=t?u.nestedProperty(e,t).get():e;if(r){var n=r.colorscale;var a=r.color;if(n&&u.isArrayOrTypedArray(a)){return l.makeColorScaleFunc(l.extractScale(n,r.cmin,r.cmax))}}return u.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function T(e,t,r,a){var i=n.select(e.node().parentNode);var o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var s=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var l=a?a/.8+1:0;var u=(f.lineCount(e)-1)*d+1;var c=k[s]*l;var h=r*.75+k[o]*l+(k[o]-1)*u*r/2;e.attr("text-anchor",s);i.attr("transform","translate("+c+","+h+")")}function M(e,t){var r=e.ts||t.textfont.size;return a(r)&&r>0?r:0}m.textPointStyle=function(e,t,r){if(!e.size())return;var a;if(t.selectedpoints){var i=m.makeSelectedTextStyleFns(t);a=i.selectedTextColorFn}e.each(function(e){var i=n.select(this);var o=u.extractOption(e,t,"tx","text");if(!o&&o!==0){i.remove();return}var s=e.tp||t.textposition;var l=M(e,t);var c=a?a(e):e.tc||t.textfont.color;i.call(m.font,e.tf||t.textfont.family,l,c).text(o).call(f.convertToTspans,r).call(T,s,l,e.mrc)})};m.selectedTextStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=m.makeSelectedTextStyleFns(t);e.each(function(e){var a=n.select(this);var i=r.selectedTextColorFn(e);var o=e.tp||t.textposition;var l=M(e,t);s.fill(a,i);T(a,o,l,e.mrc2||e.mrc)})};var E=.5;m.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0],n=[],a;for(a=1;a<e.length-1;a++){n.push(C(e[a-1],e[a],e[a+1],t))}r+="Q"+n[0][0]+" "+e[1];for(a=2;a<e.length-1;a++){r+="C"+n[a-2][1]+" "+n[a-1][0]+" "+e[a]}r+="Q"+n[e.length-3][1]+" "+e[e.length-1];return r};m.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0],n=e.length-1,a=[C(e[n],e[0],e[1],t)],i;for(i=1;i<n;i++){a.push(C(e[i-1],e[i],e[i+1],t))}a.push(C(e[n-1],e[n],e[0],t));for(i=1;i<=n;i++){r+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i]}r+="C"+a[n][1]+" "+a[0][0]+" "+e[0]+"Z";return r};function C(e,t,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=r[0]-t[0],l=r[1]-t[1],u=Math.pow(i*i+o*o,E/2),f=Math.pow(s*s+l*l,E/2),c=(f*f*i-u*u*s)*a,h=(f*f*o-u*u*l)*a,d=3*f*(u+f),v=3*u*(u+f);return[[n.round(t[0]+(d&&c/d),2),n.round(t[1]+(d&&h/d),2)],[n.round(t[0]-(v&&c/v),2),n.round(t[1]-(v&&h/v),2)]]}var S={hv:function(e,t){return"H"+n.round(t[0],2)+"V"+n.round(t[1],2)},vh:function(e,t){return"V"+n.round(t[1],2)+"H"+n.round(t[0],2)},hvh:function(e,t){return"H"+n.round((e[0]+t[0])/2,2)+"V"+n.round(t[1],2)+"H"+n.round(t[0],2)},vhv:function(e,t){return"V"+n.round((e[1]+t[1])/2,2)+"H"+n.round(t[0],2)+"V"+n.round(t[1],2)}};var L=function(e,t){return"L"+n.round(t[0],2)+","+n.round(t[1],2)};m.steps=function(e){var t=S[e]||L;return function(e){var r="M"+n.round(e[0][0],2)+","+n.round(e[0][1],2);for(var a=1;a<e.length;a++){r+=t(e[a-1],e[a])}return r}};m.makeTester=function(){var e=u.ensureSingleById(n.select("body"),"svg","js-plotly-tester",function(e){e.attr(c.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=u.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=e;m.testref=t};m.savedBBoxes={};var O=0;var I=1e4;m.bBox=function(e,t,r){if(!r)r=D(e);var a;if(r){a=m.savedBBoxes[r];if(a)return u.extendFlat({},a)}else if(e.childNodes.length===1){var i=e.childNodes[0];r=D(i);if(r){var o=+i.getAttribute("x")||0;var s=+i.getAttribute("y")||0;var l=i.getAttribute("transform");if(!l){var c=m.bBox(i,false,r);if(o){c.left+=o;c.right+=o}if(s){c.top+=s;c.bottom+=s}return c}r+="~"+o+"~"+s+"~"+l;a=m.savedBBoxes[r];if(a)return u.extendFlat({},a)}}var h,d;if(t){h=e}else{d=m.tester.node();h=e.cloneNode(true);d.appendChild(h)}n.select(h).attr("transform",null).call(f.positionText,0,0);var v=h.getBoundingClientRect();var p=m.testref.node().getBoundingClientRect();if(!t)d.removeChild(h);var g={height:v.height,width:v.width,left:v.left-p.left,top:v.top-p.top,right:v.right-p.left,bottom:v.bottom-p.top};if(O>=I){m.savedBBoxes={};O=0}if(r)m.savedBBoxes[r]=g;O++;return u.extendFlat({},g)};function D(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}m.setClipUrl=function(e,t){if(!t){e.attr("clip-path",null);return}if(m.baseUrl===undefined){var r=n.select("base");if(r.size()&&r.attr("href")){m.baseUrl=window.location.href.split("#")[0]}else{m.baseUrl=""}}e.attr("clip-path","url("+m.baseUrl+"#"+t+")")};m.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};m.setTranslate=function(e,t,r){var n=/(\btranslate\(.*?\);?)/,a=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[a]("transform")||"";t=t||0;r=r||0;o=o.replace(n,"").trim();o+=" translate("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};m.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};m.setScale=function(e,t,r){var n=/(\bscale\(.*?\);?)/,a=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[a]("transform")||"";t=t||1;r=r||1;o=o.replace(n,"").trim();o+=" scale("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};var R=/\s*sc.*/;m.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var n=t===1&&r===1?"":" scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(R,"");e+=n;e=e.trim();this.setAttribute("transform",e)})};var P=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(e,t,r){if(!e)return;e.each(function(){var e;var a=n.select(this);var i=a.select("text");if(!i.node())return;var o=parseFloat(i.attr("x")||0);var s=parseFloat(i.attr("y")||0);var l=(a.attr("transform")||"").match(P);if(t===1&&r===1){e=[]}else{e=["translate("+o+","+s+")","scale("+t+","+r+")","translate("+-o+","+-s+")"]}if(l){e.push(l)}a.attr("transform",e.join(" "))})}},{"../../constants/alignment":421,"../../constants/interactions":423,"../../constants/xmlns_namespaces":426,"../../lib":445,"../../lib/svg_text_utils":469,"../../registry":536,"../../traces/scatter/make_bubble_size_func":613,"../../traces/scatter/subtypes":619,"../color":323,"../colorscale":338,"./symbol_defs":349,d3:86,"fast-isnumeric":151,tinycolor2:285}],349:[function(e,t,r){"use strict";var n=e("d3");t.exports={circle:{n:0,f:function(e){var t=n.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=n.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=n.round(e*.4,2),r=n.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=n.round(e*.8/Math.sqrt(2),2),r="l"+t+","+t,a="l"+t+",-"+t,i="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+r+a+i+a+i+o+i+o+r+o+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=n.round(e*.951,2),r=n.round(e*.588,2),a=n.round(-e,2),i=n.round(e*-.309,2),o=n.round(e*.809,2);return"M"+t+","+i+"L"+r+","+o+"H-"+r+"L-"+t+","+i+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=n.round(e,2),r=n.round(e/2,2),a=n.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+t+"L-"+a+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=n.round(e,2),r=n.round(e/2,2),a=n.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+t+",0L"+r+",-"+a+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=n.round(e*.924,2),r=n.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4,r=n.round(t*.225,2),a=n.round(t*.951,2),i=n.round(t*.363,2),o=n.round(t*.588,2),s=n.round(-t,2),l=n.round(t*-.309,2),u=n.round(t*.118,2),f=n.round(t*.809,2),c=n.round(t*.382,2);return"M"+r+","+l+"H"+a+"L"+i+","+u+"L"+o+","+f+"L0,"+c+"L-"+o+","+f+"L-"+i+","+u+"L-"+a+","+l+"H-"+r+"L0,"+s+"Z"}},hexagram:{n:18,f:function(e){var t=n.round(e*.66,2),r=n.round(e*.38,2),a=n.round(e*.76,2);return"M-"+a+",0l-"+r+",-"+t+"h"+a+"l"+r+",-"+t+"l"+r+","+t+"h"+a+"l-"+r+","+t+"l"+r+","+t+"h-"+a+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=n.round(e*Math.sqrt(3)*.8,2),r=n.round(e*.8,2),a=n.round(e*1.6,2),i=n.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+t+","+r+o+t+","+r+o+"0,-"+a+o+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=n.round(e*Math.sqrt(3)*.8,2),r=n.round(e*.8,2),a=n.round(e*1.6,2),i=n.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M"+t+",-"+r+o+"-"+t+",-"+r+o+"0,"+a+o+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=n.round(e*1.1,2),r=n.round(e*2,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=n.round(e*1.4,2),r=n.round(e*1.9,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=n.round(e*.7,2),r=n.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=n.round(e*1.4,2),r=n.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=n.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=n.round(e,2),r=n.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=n.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=n.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=n.round(e*1.3,2),r=n.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=n.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=n.round(e*1.2,2);var r=n.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=n.round(e/2,2),r=n.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=n.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=n.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=n.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true}}},{d3:86}],350:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],351:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../registry");var i=e("../../plots/cartesian/axes");var o=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var n=0;n<r.length;n++){var o=r[n],l=o[0].trace;if(!a.traceIs(l,"errorBarsOK"))continue;var u=i.getFromId(t,l.xaxis),f=i.getFromId(t,l.yaxis);s(o,l,u,"x");s(o,l,f,"y")}};function s(e,t,r,a){var s=t["error_"+a]||{},l=s.visible&&["linear","log"].indexOf(r.type)!==-1,u=[];if(!l)return;var f=o(s);for(var c=0;c<e.length;c++){var h=e[c],d=h[a];if(!n(r.c2l(d)))continue;var v=f(d,c);if(n(v[0])&&n(v[1])){var p=h[a+"s"]=d-v[0],g=h[a+"h"]=d+v[1];u.push(p,g)}}i.expand(r,u,{padded:true})}},{"../../plots/cartesian/axes":492,"../../registry":536,"./compute_error":352,"fast-isnumeric":151}],352:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type,a=t.symmetric;if(r==="data"){var i=t.array||[];if(a){return function e(t,r){var n=+i[r];return[n,n]}}else{var o=t.arrayminus||[];return function e(t,r){var n=+i[r];var a=+o[r];if(!isNaN(n)||!isNaN(a)){return[a||0,n||0]}return[NaN,NaN]}}}else{var s=n(r,t.value),l=n(r,t.valueminus);if(a||t.valueminus===undefined){return function e(t){var r=s(t);return[r,r]}}else{return function e(t){return[l(t),s(t)]}}}};function n(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],353:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../registry");var i=e("../../lib");var o=e("../../plot_api/plot_template");var s=e("./attributes");t.exports=function(e,t,r,l){var u="error_"+l.axis;var f=o.newContainer(t,u);var c=e[u]||{};function h(e,t){return i.coerce(c,f,s,e,t)}var d=c.array!==undefined||c.value!==undefined||c.type==="sqrt";var v=h("visible",d);if(v===false)return;var p=h("type","array"in c?"data":"percent"),g=true;if(p!=="sqrt"){g=h("symmetric",!((p==="data"?"arrayminus":"valueminus")in c))}if(p==="data"){h("array");h("traceref");if(!g){h("arrayminus");h("tracerefminus")}}else if(p==="percent"||p==="constant"){h("value");if(!g)h("valueminus")}var m="copy_"+l.inherit+"style";if(l.inherit){var y=t["error_"+l.inherit];if((y||{}).visible){h(m,!(c.color||n(c.thickness)||n(c.width)))}}if(!l.inherit||!f[m]){h("color",r);h("thickness");h("width",a.traceIs(t,"gl3d")?0:4)}}},{"../../lib":445,"../../plot_api/plot_template":482,"../../registry":536,"./attributes":350,"fast-isnumeric":151}],354:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var s={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i),error_z:n.extendFlat({},i)};delete s.error_x.copy_ystyle;delete s.error_y.copy_ystyle;delete s.error_z.copy_ystyle;delete s.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(s,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:l};function l(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":445,"../../plot_api/edit_types":475,"./attributes":350,"./calc":351,"./compute_error":352,"./defaults":353,"./plot":355,"./style":356}],355:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../drawing");var o=e("../../traces/scatter/subtypes");t.exports=function e(t,r,l){var u;var f=r.xaxis;var c=r.yaxis;var h=l&&l.duration>0;t.each(function(e){var t=e[0].trace,d=t.error_x||{},v=t.error_y||{};var p;if(t.ids){p=function(e){return e.id}}var g=o.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!v.visible&&!d.visible)e=[];var m=n.select(this).selectAll("g.errorbar").data(e,p);m.exit().remove();if(!e.length)return;if(!d.visible)m.selectAll("path.xerror").remove();if(!v.visible)m.selectAll("path.yerror").remove();m.style("opacity",1);var y=m.enter().append("g").classed("errorbar",true);if(h){y.style("opacity",0).transition().duration(l.duration).style("opacity",1)}i.setClipUrl(m,r.layerClipId);m.each(function(e){var t=n.select(this);var r=s(e,f,c);if(g&&!e.vis)return;var i;var o=t.select("path.yerror");if(v.visible&&a(r.x)&&a(r.yh)&&a(r.ys)){var p=v.width;i="M"+(r.x-p)+","+r.yh+"h"+2*p+"m-"+p+",0V"+r.ys;if(!r.noYS)i+="m-"+p+",0h"+2*p;u=!o.size();if(u){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(h){o=o.transition().duration(l.duration).ease(l.easing)}o.attr("d",i)}else o.remove();var m=t.select("path.xerror");if(d.visible&&a(r.y)&&a(r.xh)&&a(r.xs)){var y=(d.copy_ystyle?v:d).width;i="M"+r.xh+","+(r.y-y)+"v"+2*y+"m0,-"+y+"H"+r.xs;if(!r.noXS)i+="m0,-"+y+"v"+2*y;u=!m.size();if(u){m=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(h){m=m.transition().duration(l.duration).ease(l.easing)}m.attr("d",i)}else m.remove()})})};function s(e,t,r){var n={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){n.yh=r.c2p(e.yh);n.ys=r.c2p(e.ys);if(!a(n.ys)){n.noYS=true;n.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){n.xh=t.c2p(e.xh);n.xs=t.c2p(e.xs);if(!a(n.xs)){n.noXS=true;n.xs=t.c2p(e.xs,true)}}return n}},{"../../traces/scatter/subtypes":619,"../drawing":348,d3:86,"fast-isnumeric":151}],356:[function(e,t,r){"use strict";var n=e("d3");var a=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace,r=t.error_y||{},i=t.error_x||{};var o=n.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(a.stroke,r.color);if(i.copy_ystyle)i=r;o.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(a.stroke,i.color)})}},{"../color":323,d3:86}],357:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:true,editType:"none"},bordercolor:{valType:"color",arrayOk:true,editType:"none"},font:n({arrayOk:true,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:true,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":518}],358:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");t.exports=function e(t){var r=t.calcdata;var o=t._fullLayout;function s(e){return function(t){return n.coerceHoverinfo({hoverinfo:t},{_module:e._module},o)}}for(var l=0;l<r.length;l++){var u=r[l];var f=u[0].trace;if(a.traceIs(f,"pie"))continue;var c=a.traceIs(f,"2dMap")?i:n.fillArray;c(f.hoverinfo,u,"hi",s(f));if(!f.hoverlabel)continue;c(f.hoverlabel.bgcolor,u,"hbg");c(f.hoverlabel.bordercolor,u,"hbc");c(f.hoverlabel.font.size,u,"hts");c(f.hoverlabel.font.color,u,"htc");c(f.hoverlabel.font.family,u,"htf");c(f.hoverlabel.namelength,u,"hnl")}};function i(e,t,r,a){a=a||n.identity;if(Array.isArray(e)){t[0][r]=a(e)}}},{"../../lib":445,"../../registry":536}],359:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./hover").hover;t.exports=function e(t,r,i){var o=n.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(i!==undefined){a(t,r,i,true)}function s(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(o&&o.then){o.then(s)}else s();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":536,"./hover":363}],360:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],361:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./hoverlabel_defaults");t.exports=function e(t,r,o,s){function l(e,i){return n.coerce(t,r,a,e,i)}i(t,r,l,s.hoverlabel)}},{"../../lib":445,"./attributes":357,"./hoverlabel_defaults":364}],362:[function(e,t,r){"use strict";var n=e("../../lib");r.getSubplot=function e(t){return t.subplot||t.xaxis+t.yaxis||t.geo};r.isTraceInSubplots=function e(t,n){if(t.type==="splom"){var a=t.xaxes||[];var i=t.yaxes||[];for(var o=0;o<a.length;o++){for(var s=0;s<i.length;s++){if(n.indexOf(a[o]+i[s])!==-1){return true}}}return false}return n.indexOf(r.getSubplot(t))!==-1};r.flat=function e(t,r){var n=new Array(t.length);for(var a=0;a<t.length;a++){n[a]=r}return n};r.p2c=function e(t,r){var n=new Array(t.length);for(var a=0;a<t.length;a++){n[a]=t[a].p2c(r)}return n};r.getDistanceFunction=function e(t,n,a,i){if(t==="closest")return i||r.quadrature(n,a);return t==="x"?n:a};r.getClosest=function e(t,r,n){if(n.index!==false){if(n.index>=0&&n.index<t.length){n.distance=0}else n.index=false}else{for(var a=0;a<t.length;a++){var i=r(t[a]);if(i<=n.distance){n.index=a;n.distance=i}}}return n};r.inbox=function e(t,r,n){return t*r<0||t===0?n:Infinity};r.quadrature=function e(t,r){return function(e){var n=t(e),a=r(e);return Math.sqrt(n*n+a*a)}};r.makeEventData=function e(t,n,a){var i="index"in t?t.index:t.pointNumber;var o={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var s=n._indexToPoints[i];if(s.length===1){o.pointIndex=s[0]}else{o.pointIndices=s}}else{o.pointIndex=i}if(n._module.eventData){o=n._module.eventData(o,t,n,a,i)}else{if("xVal"in t)o.x=t.xVal;else if("x"in t)o.x=t.x;if("yVal"in t)o.y=t.yVal;else if("y"in t)o.y=t.y;if(t.xa)o.xaxis=t.xa;if(t.ya)o.yaxis=t.ya;if(t.zLabelVal!==undefined)o.z=t.zLabelVal}r.appendArrayPointValue(o,n,i);return o};r.appendArrayPointValue=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var s=0;s<a.length;s++){var l=a[s];var u=i(l);if(e[u]===undefined){var f=n.nestedProperty(t,l).get();var c=o(f,r);if(c!==undefined)e[u]=c}}};r.appendArrayMultiPointValues=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var s=0;s<a.length;s++){var l=a[s];var u=i(l);if(e[u]===undefined){var f=n.nestedProperty(t,l).get();var c=new Array(r.length);for(var h=0;h<r.length;h++){c[h]=o(f,r[h])}e[u]=c}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function i(e){return a[e]||e}function o(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}},{"../../lib":445}],363:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../lib");var s=e("../../lib/events");var l=e("../../lib/svg_text_utils");var u=e("../../lib/override_cursor");var f=e("../drawing");var c=e("../color");var h=e("../dragelement");var d=e("../../plots/cartesian/axes");var v=e("../../registry");var p=e("./helpers");var g=e("./constants");var m=g.YANGLE;var y=Math.PI*m/180;var b=1/Math.sin(y);var x=Math.cos(y);var _=Math.sin(y);var w=g.HOVERARROWSIZE;var A=g.HOVERTEXTPAD;r.hover=function e(t,r,n,a){t=o.getGraphDiv(t);o.throttle(t._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){k(t,r,n,a)})};r.loneHover=function e(t,r){var a={color:t.color||c.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0};var i=n.select(r.container),o=r.outerContainer?n.select(r.outerContainer):i;var s={hovermode:"closest",rotateLabels:false,bgColor:r.bgColor||c.background,container:i,outerContainer:o};var l=T([a],s,r.gd);E(l,s.rotateLabels);return l.node()};function k(e,t,r,i){if(!r)r="xy";var l=Array.isArray(r)?r:[r];var f=e._fullLayout;var g=f._plots||[];var m=g[r];var y=f._has("cartesian");if(m){var b=m.overlays.map(function(e){return e.id});l=l.concat(b)}var x=l.length;var _=new Array(x);var w=new Array(x);var A=false;for(var k=0;k<x;k++){var I=l[k];var D=g[I];if(D){A=true;_[k]=d.getFromId(e,D.xaxis._id);w[k]=d.getFromId(e,D.yaxis._id);continue}var R=f[I]._subplot;_[k]=R.xaxis;w[k]=R.yaxis}var P=t.hovermode||f.hovermode;if(P&&!A)P="closest";if(["x","y","closest"].indexOf(P)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return h.unhoverRaw(e,t)}var z=f.hoverdistance===-1?Infinity:f.hoverdistance;var F=f.spikedistance===-1?Infinity:f.spikedistance;var B=[],N=[],j,U,V,H,q,G,X,W,Y,Z,J,Q,$,K={hLinePoint:null,vLinePoint:null};if(Array.isArray(t)){P="array";for(V=0;V<t.length;V++){q=e.calcdata[t[V].curveNumber||0];if(q[0].trace.hoverinfo!=="skip"){N.push(q)}}}else{for(H=0;H<e.calcdata.length;H++){q=e.calcdata[H];G=q[0].trace;if(G.hoverinfo!=="skip"&&p.isTraceInSubplots(G,l)){N.push(q)}}var ee=!t.target,te,re;if(ee){if("xpx"in t)te=t.xpx;else te=_[0]._length/2;if("ypx"in t)re=t.ypx;else re=w[0]._length/2}else{if(s.triggerHandler(e,"plotly_beforehover",t)===false){return}var ne=t.target.getBoundingClientRect();te=t.clientX-ne.left;re=t.clientY-ne.top;if(te<0||te>_[0]._length||re<0||re>w[0]._length){return h.unhoverRaw(e,t)}}t.pointerX=te+_[0]._offset;t.pointerY=re+w[0]._offset;if("xval"in t)j=p.flat(l,t.xval);else j=p.p2c(_,te);if("yval"in t)U=p.flat(l,t.yval);else U=p.p2c(w,re);if(!a(j[0])||!a(U[0])){o.warn("Fx.hover failed",t,e);return h.unhoverRaw(e,t)}}var ae=Infinity;for(H=0;H<N.length;H++){q=N[H];if(!q||!q[0]||!q[0].trace||q[0].trace.visible!==true)continue;G=q[0].trace;if(["carpet","contourcarpet"].indexOf(G._module.name)!==-1)continue;if(G.type==="splom"){W=0;X=l[W]}else{X=p.getSubplot(G);W=l.indexOf(X)}Y=P;Q={cd:q,trace:G,xa:_[W],ya:w[W],maxHoverDistance:z,maxSpikeDistance:F,index:false,distance:Math.min(ae,z),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:c.defaultLine,name:G.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(f[X]){Q.subplot=f[X]._subplot}$=B.length;if(Y==="array"){var ie=t[H];if("pointNumber"in ie){Q.index=ie.pointNumber;Y="closest"}else{Y="";if("xval"in ie){Z=ie.xval;Y="x"}if("yval"in ie){J=ie.yval;Y=Y?"closest":"y"}}}else{Z=j[W];J=U[W]}if(z!==0){if(G._module&&G._module.hoverPoints){var oe=G._module.hoverPoints(Q,Z,J,Y,f._hoverlayer);if(oe){var se;for(var le=0;le<oe.length;le++){se=oe[le];if(a(se.x0)&&a(se.y0)){B.push(C(se,P))}}}}else{o.log("Unrecognized trace type in hover:",G)}}if(P==="closest"&&B.length>$){B.splice(0,$);ae=B[0].distance}if(y&&F!==0){if(B.length===0){Q.distance=F;Q.index=false;var ue=G._module.hoverPoints(Q,Z,J,"closest",f._hoverlayer);if(ue){ue=ue.filter(function(e){return e.spikeDistance<=F})}if(ue&&ue.length){var fe;var ce=ue.filter(function(e){return e.xa.showspikes});if(ce.length){var he=ce[0];if(a(he.x0)&&a(he.y0)){fe=ge(he);if(!K.vLinePoint||K.vLinePoint.spikeDistance>fe.spikeDistance){K.vLinePoint=fe}}}var de=ue.filter(function(e){return e.ya.showspikes});if(de.length){var ve=de[0];if(a(ve.x0)&&a(ve.y0)){fe=ge(ve);if(!K.hLinePoint||K.hLinePoint.spikeDistance>fe.spikeDistance){K.hLinePoint=fe}}}}}}}function pe(e,t){var r=null;var n=Infinity;var a;for(var i=0;i<e.length;i++){a=e[i].spikeDistance;if(a<n&&a<=t){r=e[i];n=a}}return r}function ge(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var me={fullLayout:f,container:f._hoverlayer,outerContainer:f._paperdiv,event:t};var ye=e._spikepoints,be={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};e._spikepoints=be;if(y&&F!==0){if(B.length!==0){var xe=B.filter(function(e){return e.ya.showspikes});var _e=pe(xe,F);K.hLinePoint=ge(_e);var we=B.filter(function(e){return e.xa.showspikes});var Ae=pe(we,F);K.vLinePoint=ge(Ae)}}if(B.length===0){var ke=h.unhoverRaw(e,t);if(y&&(K.hLinePoint!==null||K.vLinePoint!==null)){if(O(ye)){S(K,me)}}return ke}if(y){if(O(ye)){S(K,me)}}B.sort(function(e,t){return e.distance-t.distance});var Te=e._hoverdata,Me=[];for(V=0;V<B.length;V++){var Ee=B[V];Me.push(p.makeEventData(Ee,Ee.trace,Ee.cd))}e._hoverdata=Me;var Ce=P==="y"&&N.length>1;var Se=c.combine(f.plot_bgcolor||c.background,f.paper_bgcolor);var Le={hovermode:P,rotateLabels:Ce,bgColor:Se,container:f._hoverlayer,outerContainer:f._paperdiv,commonLabelOpts:f.hoverlabel,hoverdistance:f.hoverdistance};var Oe=T(B,Le,e);M(B,Ce?"xa":"ya",f);E(Oe,Ce);if(t.target&&t.target.tagName){var Ie=v.getComponentMethod("annotations","hasClickToShow")(e,Me);u(n.select(t.target),Ie?"pointer":"")}if(!t.target||i||!L(e,t,Te))return;if(Te){e.emit("plotly_unhover",{event:t,points:Te})}e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:_,yaxes:w,xvals:j,yvals:U})}function T(e,t,r){var a=t.hovermode;var i=t.rotateLabels;var s=t.bgColor;var u=t.container;var h=t.outerContainer;var d=t.commonLabelOpts||{};var v=t.fontFamily||g.HOVERFONT;var p=t.fontSize||g.HOVERFONTSIZE;var y=e[0];var b=y.xa;var x=y.ya;var _=a==="y"?"yLabel":"xLabel";var k=y[_];var T=(String(k)||"").split(" ")[0];var M=h.node().getBoundingClientRect();var E=M.top;var C=M.width;var S=M.height;var L=k!==undefined&&y.distance<=t.hoverdistance&&(a==="x"||a==="y");if(L){var O,I;var D=true;for(O=0;O<e.length;O++){if(D&&e[O].zLabel===undefined)D=false;I=e[O].hoverinfo||e[O].trace.hoverinfo;var R=Array.isArray(I)?I:I.split("+");if(R.indexOf("all")===-1&&R.indexOf(a)===-1){L=false;break}}if(D)L=false}var P=u.selectAll("g.axistext").data(L?[0]:[]);P.enter().append("g").classed("axistext",true);P.exit().remove();P.each(function(){var t=n.select(this);var i=o.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})});var s=o.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)});var u=d.bgcolor||c.defaultLine;var h=d.bordercolor||c.contrast(u);i.style({fill:u,stroke:h});s.text(k).call(f.font,d.font.family||v,d.font.size||p,d.font.color||c.background).call(l.positionText,0,0).call(l.convertToTspans,r);t.attr("transform","");var g=s.node().getBoundingClientRect();if(a==="x"){s.attr("text-anchor","middle").call(l.positionText,0,b.side==="top"?E-g.bottom-w-A:E-g.top+w+A);var m=b.side==="top"?"-":"";i.attr("d","M0,0"+"L"+w+","+m+w+"H"+(A+g.width/2)+"v"+m+(A*2+g.height)+"H-"+(A+g.width/2)+"V"+m+w+"H-"+w+"Z");t.attr("transform","translate("+(b._offset+(y.x0+y.x1)/2)+","+(x._offset+(b.side==="top"?0:x._length))+")")}else{s.attr("text-anchor",x.side==="right"?"start":"end").call(l.positionText,(x.side==="right"?1:-1)*(A+w),E-g.top-g.height/2);var M=x.side==="right"?"":"-";i.attr("d","M0,0"+"L"+M+w+","+w+"V"+(A+g.height/2)+"h"+M+(A*2+g.width)+"V-"+(A+g.height/2)+"H"+M+w+"V-"+w+"Z");t.attr("transform","translate("+(b._offset+(x.side==="right"?b._length:0))+","+(x._offset+(y.y0+y.y1)/2)+")")}e=e.filter(function(e){return e.zLabelVal!==undefined||(e[_]||"").split(" ")[0]===T})});var z=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});z.enter().append("g").classed("hovertext",true).each(function(){var e=n.select(this);e.append("rect").call(c.fill,c.addOpacity(s,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(f.font,v,p)});z.exit().remove();z.each(function(e){var t=n.select(this).attr("transform",""),o="",u="";var h=c.opacity(e.color)?e.color:c.defaultLine;var d=c.combine(h,s);var g=e.borderColor||c.contrast(d);if(e.nameOverride!==undefined)e.name=e.nameOverride;if(e.name){o=l.plainText(e.name||"");var y=Math.round(e.nameLength);if(y>-1&&o.length>y){if(y>3)o=o.substr(0,y-3)+"...";else o=o.substr(0,y)}}if(e.zLabel!==undefined){if(e.xLabel!==undefined)u+="x: "+e.xLabel+"<br>";if(e.yLabel!==undefined)u+="y: "+e.yLabel+"<br>";u+=(u?"z: ":"")+e.zLabel}else if(L&&e[a+"Label"]===k){u=e[(a==="x"?"y":"x")+"Label"]||""}else if(e.xLabel===undefined){if(e.yLabel!==undefined)u=e.yLabel}else if(e.yLabel===undefined)u=e.xLabel;else u="("+e.xLabel+", "+e.yLabel+")";if((e.text||e.text===0)&&!Array.isArray(e.text)){u+=(u?"<br>":"")+e.text}if(e.extraText!==undefined)u+=(u?"<br>":"")+e.extraText;if(u===""){if(o==="")t.remove();u=o}var b=t.select("text.nums").call(f.font,e.fontFamily||v,e.fontSize||p,e.fontColor||g).text(u).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,r);var x=t.select("text.name"),_=0;if(o&&o!==u){x.call(f.font,e.fontFamily||v,e.fontSize||p,d).text(o).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,r);_=x.node().getBoundingClientRect().width+2*A}else{x.remove();t.select("rect").remove()}t.select("path").style({fill:d,stroke:g});var T=b.node().getBoundingClientRect(),M=e.xa._offset+(e.x0+e.x1)/2,O=e.ya._offset+(e.y0+e.y1)/2,I=Math.abs(e.x1-e.x0),D=Math.abs(e.y1-e.y0),R=T.width+w+A+_,P,z;e.ty0=E-T.top;e.bx=T.width+2*A;e.by=T.height+2*A;e.anchor="start";e.txwidth=T.width;e.tx2width=_;e.offset=0;if(i){e.pos=M;P=O+D/2+R<=S;z=O-D/2-R>=0;if((e.idealAlign==="top"||!P)&&z){O-=D/2;e.anchor="end"}else if(P){O+=D/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=O;P=M+I/2+R<=C;z=M-I/2-R>=0;if((e.idealAlign==="left"||!P)&&z){M-=I/2;e.anchor="end"}else if(P){M+=I/2;e.anchor="start"}else e.anchor="middle"}b.attr("text-anchor",e.anchor);if(_)x.attr("text-anchor",e.anchor);t.attr("transform","translate("+M+","+O+")"+(i?"rotate("+m+")":""))});return z}function M(e,t,r){var n=0,a=e.map(function(e,n){var a=e[t];return[{i:n,dp:0,pos:e.pos,posref:e.posref,size:e.by*(a._id.charAt(0)==="x"?b:1)/2,pmin:0,pmax:a._id.charAt(0)==="x"?r.width:r.height}]}).sort(function(e,t){return e[0].posref-t[0].posref}),i,o,s,l,u,f,c;function h(e){var t=e[0],r=e[e.length-1];o=t.pmin-t.pos-t.dp+t.size;s=r.pos+r.dp+r.size-t.pmax;if(o>.01){for(u=e.length-1;u>=0;u--)e[u].dp+=o;i=false}if(s<.01)return;if(o<-.01){for(u=e.length-1;u>=0;u--)e[u].dp-=s;i=false}if(!i)return;var n=0;for(l=0;l<e.length;l++){f=e[l];if(f.pos+f.dp+f.size>t.pmax)n++}for(l=e.length-1;l>=0;l--){if(n<=0)break;f=e[l];if(f.pos>t.pmax-1){f.del=true;n--}}for(l=0;l<e.length;l++){if(n<=0)break;f=e[l];if(f.pos<t.pmin+1){f.del=true;n--;s=f.size*2;for(u=e.length-1;u>=0;u--)e[u].dp-=s}}for(l=e.length-1;l>=0;l--){if(n<=0)break;f=e[l];if(f.pos+f.dp+f.size>t.pmax){f.del=true;n--}}}while(!i&&n<=e.length){n++;i=true;l=0;while(l<a.length-1){var d=a[l],v=a[l+1],p=d[d.length-1],g=v[0];o=p.pos+p.dp+p.size-g.pos-g.dp+g.size;if(o>.01&&p.pmin===g.pmin&&p.pmax===g.pmax){for(u=v.length-1;u>=0;u--)v[u].dp+=o;d.push.apply(d,v);a.splice(l+1,1);c=0;for(u=d.length-1;u>=0;u--)c+=d[u].dp;s=c/d.length;for(u=d.length-1;u>=0;u--)d[u].dp-=s;i=false}else l++}a.forEach(h)}for(l=a.length-1;l>=0;l--){var m=a[l];for(u=m.length-1;u>=0;u--){var y=m[u],x=e[y.i];x.offset=y.dp;x.del=y.del}}}function E(e,t){e.each(function(e){var r=n.select(this);if(e.del){r.remove();return}var a=e.anchor==="end"?-1:1,i=r.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],s=o*(w+A),u=s+o*(e.txwidth+A),c=0,h=e.offset;if(e.anchor==="middle"){s-=e.tx2width/2;u+=e.txwidth/2+A}if(t){h*=-_;c=e.offset*x}r.select("path").attr("d",e.anchor==="middle"?"M-"+(e.bx/2+e.tx2width/2)+","+(h-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(a*w+c)+","+(w+h)+"v"+(e.by/2-w)+"h"+a*e.bx+"v-"+e.by+"H"+(a*w+c)+"V"+(h-w)+"Z");i.call(l.positionText,s+c,h+e.ty0-e.by/2+A);if(e.tx2width){r.select("text.name").call(l.positionText,u+o*A+c,h+e.ty0-e.by/2+A);r.select("rect").call(f.setRect,u+(o-1)*e.tx2width/2+c,h-e.by/2-1,e.tx2width,e.by+2)}})}function C(e,t){var r=e.index;var n=e.trace||{};var a=e.cd[0];var i=e.cd[r]||{};var s=Array.isArray(r)?function(e,t){return o.castOption(a,r,e)||o.extractOption({},n,"",t)}:function(e,t){return o.extractOption(i,n,e,t)};function l(t,r,n){var a=s(r,n);if(a)e[t]=a}l("hoverinfo","hi","hoverinfo");l("color","hbg","hoverlabel.bgcolor");l("borderColor","hbc","hoverlabel.bordercolor");l("fontFamily","htf","hoverlabel.font.family");l("fontSize","hts","hoverlabel.font.size");l("fontColor","htc","hoverlabel.font.color");l("nameLength","hnl","hoverlabel.namelength");e.posref=t==="y"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2;e.x0=o.constrain(e.x0,0,e.xa._length);e.x1=o.constrain(e.x1,0,e.xa._length);e.y0=o.constrain(e.y0,0,e.ya._length);e.y1=o.constrain(e.y1,0,e.ya._length);if(e.xLabelVal!==undefined){e.xLabel="xLabel"in e?e.xLabel:d.hoverLabelText(e.xa,e.xLabelVal);e.xVal=e.xa.c2d(e.xLabelVal)}if(e.yLabelVal!==undefined){e.yLabel="yLabel"in e?e.yLabel:d.hoverLabelText(e.ya,e.yLabelVal);e.yVal=e.ya.c2d(e.yLabelVal)}if(e.zLabelVal!==undefined&&e.zLabel===undefined){e.zLabel=String(e.zLabelVal)}if(!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=d.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;if(e.xerrneg!==undefined){e.xLabel+=" +"+u+" / -"+d.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text}else e.xLabel+=" \xb1 "+u;if(t==="x")e.distance+=1}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var f=d.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;if(e.yerrneg!==undefined){e.yLabel+=" +"+f+" / -"+d.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text}else e.yLabel+=" \xb1 "+f;if(t==="y")e.distance+=1}var c=e.hoverinfo||e.trace.hoverinfo;if(c!=="all"){c=Array.isArray(c)?c:c.split("+");if(c.indexOf("x")===-1)e.xLabel=undefined;if(c.indexOf("y")===-1)e.yLabel=undefined;if(c.indexOf("z")===-1)e.zLabel=undefined;if(c.indexOf("text")===-1)e.text=undefined;if(c.indexOf("name")===-1)e.name=undefined}return e}function S(e,t){var r=t.container;var n=t.fullLayout;var a=t.event;var o,s;var l=!!e.hLinePoint;var u=!!e.vLinePoint;r.selectAll(".spikeline").remove();if(!(u||l))return;var h=c.combine(n.plot_bgcolor,n.paper_bgcolor);if(l){var d=e.hLinePoint,v,p;o=d&&d.xa;s=d&&d.ya;var g=s.spikesnap;if(g==="cursor"){v=a.pointerX;p=a.pointerY}else{v=o._offset+d.x;p=s._offset+d.y}var m=i.readability(d.color,h)<1.5?c.contrast(h):d.color;var y=s.spikemode,b=s.spikethickness,x=s.spikecolor||m,_=s._boundingBox,w=(_.left+_.right)/2<v?_.right:_.left,A,k;if(y.indexOf("toaxis")!==-1||y.indexOf("across")!==-1){if(y.indexOf("toaxis")!==-1){A=w;k=v}if(y.indexOf("across")!==-1){A=s._counterSpan[0];k=s._counterSpan[1]}r.insert("line",":first-child").attr({x1:A,x2:k,y1:p,y2:p,"stroke-width":b,stroke:x,"stroke-dasharray":f.dashStyle(s.spikedash,b)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:A,x2:k,y1:p,y2:p,"stroke-width":b+2,stroke:h}).classed("spikeline",true).classed("crisp",true)}if(y.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:w+(s.side!=="right"?b:-b),cy:p,r:b,fill:x}).classed("spikeline",true)}}if(u){var T=e.vLinePoint,M,E;o=T&&T.xa;s=T&&T.ya;var C=o.spikesnap;if(C==="cursor"){M=a.pointerX;E=a.pointerY}else{M=o._offset+T.x;E=s._offset+T.y}var S=i.readability(T.color,h)<1.5?c.contrast(h):T.color;var L=o.spikemode,O=o.spikethickness,I=o.spikecolor||S,D=o._boundingBox,R=(D.top+D.bottom)/2<E?D.bottom:D.top,P,z;if(L.indexOf("toaxis")!==-1||L.indexOf("across")!==-1){if(L.indexOf("toaxis")!==-1){P=R;z=E}if(L.indexOf("across")!==-1){P=o._counterSpan[0];z=o._counterSpan[1]}r.insert("line",":first-child").attr({x1:M,x2:M,y1:P,y2:z,"stroke-width":O,stroke:I,"stroke-dasharray":f.dashStyle(o.spikedash,O)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:M,x2:M,y1:P,y2:z,"stroke-width":O+2,stroke:h}).classed("spikeline",true).classed("crisp",true)}if(L.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:M,cy:R-(o.side!=="top"?O:-O),r:O,fill:I}).classed("spikeline",true)}}}function L(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var n=r.length-1;n>=0;n--){var a=r[n],i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)){return true}}return false}function O(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}},{"../../lib":445,"../../lib/events":435,"../../lib/override_cursor":456,"../../lib/svg_text_utils":469,"../../plots/cartesian/axes":492,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"./constants":360,"./helpers":362,d3:86,"fast-isnumeric":151,tinycolor2:285}],364:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r,a,i){i=i||{};a("hoverlabel.bgcolor",i.bgcolor);a("hoverlabel.bordercolor",i.bordercolor);a("hoverlabel.namelength",i.namelength);n.coerceFont(a,"hoverlabel.font",i.font)}},{"../../lib":445}],365:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var s=e("./layout_attributes");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:s},attributes:e("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:u,castHoverinfo:f,hover:e("./hover").hover,unhover:i.unhover,loneHover:e("./hover").loneHover,loneUnhover:l,click:e("./click")};function l(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function u(e,t,r){return a.castOption(e,t,"hoverlabel."+r)}function f(e,t,r){function n(r){return a.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)}return a.castOption(e,r,"hoverinfo",n)}},{"../../lib":445,"../dragelement":345,"./attributes":357,"./calc":358,"./click":359,"./constants":360,"./defaults":361,"./helpers":362,"./hover":363,"./layout_attributes":366,"./layout_defaults":367,"./layout_global_defaults":368,d3:86}],366:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=n.HOVERFONT;a.size.dflt=n.HOVERFONTSIZE;t.exports={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":518,"./constants":360}],367:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");t.exports=function e(t,r,o){function s(e,i){return n.coerce(t,r,a,e,i)}var l=s("dragmode");if(l==="select")s("selectdirection");var u;if(r._has("cartesian")){r._isHoriz=i(o);u=r._isHoriz?"y":"x"}else u="closest";var f=s("hovermode",u);if(f){s("hoverdistance");s("spikedistance")}var c=r._has("mapbox");var h=r._has("geo");var d=r._basePlotModules.length;if(r.dragmode==="zoom"&&((c||h)&&d===1||c&&h&&d===2)){r.dragmode="pan"}};function i(e){var t=true;for(var r=0;r<e.length;r++){var n=e[r];if(n.orientation!=="h"){t=false;break}}return t}},{"../../lib":445,"./layout_attributes":366}],368:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./hoverlabel_defaults");var i=e("./layout_attributes");t.exports=function e(t,r){function o(e,a){return n.coerce(t,r,i,e,a)}a(t,r,o)}},{"../../lib":445,"./hoverlabel_defaults":364,"./layout_attributes":366}],369:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../lib/regex").counter;var i=e("../../plots/domain").attributes;var o=e("../../plots/cartesian/constants").idRegex;var s=e("../../plot_api/plot_template");var l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function u(e,t,r){var n=t[r+"axes"];var a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(n))return n;if(a.length)return a}function f(e,t){var r=e.grid||{};var a=u(t,r,"x");var i=u(t,r,"y");if(!e.grid&&!a&&!i)return;var o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var f=Array.isArray(a);var h=Array.isArray(i);var d=f&&a!==r.xaxes&&h&&i!==r.yaxes;var v,p;if(o){v=r.subplots.length;p=r.subplots[0].length}else{if(h)v=i.length;if(f)p=a.length}var g=s.newContainer(t,"grid");function m(e,t){return n.coerce(r,g,l,e,t)}var y=m("rows",v);var b=m("columns",p);if(!(y*b>1)){delete t.grid;return}if(!o&&!f&&!h){var x=m("pattern")==="independent";if(x)o=true}g._hasSubplotGrid=o;var _=m("roworder");var w=_==="top to bottom";var A=o?.2:.1;var k=o?.3:.1;var T,M;if(d&&t._splomGridDflt){T=t._splomGridDflt.xside;M=t._splomGridDflt.yside}g._domains={x:c("x",m,A,T,b),y:c("y",m,k,M,y,w)}}function c(e,t,r,n,a,i){var o=t(e+"gap",r);var s=t("domain."+e);t(e+"side",n);var l=new Array(a);var u=s[0];var f=(s[1]-u)/(a-o);var c=f*(1-o);for(var h=0;h<a;h++){var d=u+f*h;l[i?a-1-h:h]=[d,d+c]}return l}function h(e,t){var r=t.grid;if(!r||!r._domains)return;var n=e.grid||{};var a=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var s=r.columns;var l=r.pattern==="independent";var f,c,h,v,p,g,m;var y=r._axisMap={};if(i){var b=n.subplots||[];g=r.subplots=new Array(o);var x=1;for(f=0;f<o;f++){var _=g[f]=new Array(s);var w=b[f]||[];for(c=0;c<s;c++){if(l){p=x===1?"xy":"x"+x+"y"+x;x++}else p=w[c];_[c]="";if(a.cartesian.indexOf(p)!==-1){m=p.indexOf("y");h=p.slice(0,m);v=p.slice(m);if(y[h]!==undefined&&y[h]!==c||y[v]!==undefined&&y[v]!==f){continue}_[c]=p;y[h]=c;y[v]=f}}}}else{var A=u(t,n,"x");var k=u(t,n,"y");r.xaxes=d(A,a.xaxis,s,y,"x");r.yaxes=d(k,a.yaxis,o,y,"y")}var T=r._anchors={};var M=r.roworder==="top to bottom";for(var E in y){var C=E.charAt(0);var S=r[C+"side"];var L,O,I;if(S.length<8){T[E]="free"}else if(C==="x"){if(S.charAt(0)==="t"===M){L=0;O=1;I=o}else{L=o-1;O=-1;I=-1}if(i){var D=y[E];for(f=L;f!==I;f+=O){p=g[f][D];if(!p)continue;m=p.indexOf("y");if(p.slice(0,m)===E){T[E]=p.slice(m);break}}}else{for(f=L;f!==I;f+=O){v=r.yaxes[f];if(a.cartesian.indexOf(E+v)!==-1){T[E]=v;break}}}}else{if(S.charAt(0)==="l"){L=0;O=1;I=s}else{L=s-1;O=-1;I=-1}if(i){var R=y[E];for(f=L;f!==I;f+=O){p=g[R][f];if(!p)continue;m=p.indexOf("y");if(p.slice(m)===E){T[E]=p.slice(0,m);break}}}else{for(f=L;f!==I;f+=O){h=r.xaxes[f];if(a.cartesian.indexOf(h+E)!==-1){T[E]=h;break}}}}}}function d(e,t,r,n,a){var i=new Array(r);var o;function s(e,r){if(t.indexOf(r)!==-1&&n[r]===undefined){i[e]=r;n[r]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<r;o++){s(o,e[o])}}else{s(0,a);for(o=1;o<r;o++){s(o,a+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:f,contentDefaults:h}},{"../../lib":445,"../../lib/regex":461,"../../plot_api/plot_template":482,"../../plots/cartesian/constants":497,"../../plots/domain":517}],370:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/constants");var a=e("../../plot_api/plot_template").templatedArray;t.exports=a("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":482,"../../plots/cartesian/constants":497}],371:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var s=i==="log"&&r.type==="linear",l=i==="linear"&&r.type==="log";if(!(s||l))return;var u=t._fullLayout.images,f=r._id.charAt(0),c,h;for(var d=0;d<u.length;d++){c=u[d];h="images["+d+"].";if(c[f+"ref"]===r._id){var v=c[f],p=c["size"+f],g=null,m=null;if(s){g=a(v,r.range);var y=p/Math.pow(10,g)/2;m=2*Math.log(y+Math.sqrt(1+y*y))/Math.LN10}else{g=Math.pow(10,v);m=g*(Math.pow(10,p/2)-Math.pow(10,-p/2))}if(!n(g)){g=null;m=null}else if(!n(m))m=null;o(h+f,g);o(h+"size"+f,m)}}}},{"../../lib/to_log_range":471,"fast-isnumeric":151}],372:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var s="images";t.exports=function e(t,r){var n={name:s,handleItemDefaults:l};i(t,r,n)};function l(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var s=i("source");var l=i("visible",!!s);if(!l)return t;i("layer");i("xanchor");i("yanchor");i("sizex");i("sizey");i("sizing");i("opacity");var u={_fullLayout:r},f=["x","y"];for(var c=0;c<2;c++){var h=f[c],d=a.coerceRef(e,t,u,h,"paper");a.coercePosition(t,u,i,d,h,0)}return t}},{"../../lib":445,"../../plots/array_container_defaults":488,"../../plots/cartesian/axes":492,"./attributes":370}],373:[function(e,t,r){"use strict";var n=e("d3");var a=e("../drawing");var i=e("../../plots/cartesian/axes");var o=e("../../constants/xmlns_namespaces");t.exports=function e(t){var r=t._fullLayout,s=[],l={},u=[],f,c;for(c=0;c<r.images.length;c++){var h=r.images[c];if(h.visible){if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){f=h.xref+h.yref;var d=r._plots[f];if(!d){u.push(h);continue}if(d.mainplot){f=d.mainplot.id}if(!l[f]){l[f]=[]}l[f].push(h)}else if(h.layer==="above"){s.push(h)}else{u.push(h)}}}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function p(e){var r=n.select(this);if(this.img&&this.img.src===e.source){return}r.attr("xmlns",o.svg);var a=new Promise(function(t){var n=new Image;this.img=n;n.setAttribute("crossOrigin","anonymous");n.onerror=a;n.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var n=e.getContext("2d");n.drawImage(this,0,0);var a=e.toDataURL("image/png");r.attr("xlink:href",a);t()};r.on("error",a);n.src=e.source;function a(){r.remove();t()}}.bind(this));t._promises.push(a)}function g(e){var o=n.select(this);var s=i.getFromId(t,e.xref),l=i.getFromId(t,e.yref);var u=r._size,f=s?Math.abs(s.l2p(e.sizex)-s.l2p(0)):e.sizex*u.w,c=l?Math.abs(l.l2p(e.sizey)-l.l2p(0)):e.sizey*u.h;var h=f*v.x[e.xanchor].offset,d=c*v.y[e.yanchor].offset;var p=v.x[e.xanchor].sizing+v.y[e.yanchor].sizing;var g=(s?s.r2p(e.x)+s._offset:e.x*u.w+u.l)+h,m=(l?l.r2p(e.y)+l._offset:u.h-e.y*u.h+u.t)+d;switch(e.sizing){case"fill":p+=" slice";break;case"stretch":p="none";break}o.attr({x:g,y:m,width:f,height:c,preserveAspectRatio:p,opacity:e.opacity});var y=s?s._id:"",b=l?l._id:"",x=y+b;o.call(a.setClipUrl,x?"clip"+r._uid+x:null)}var m=r._imageLowerLayer.selectAll("image").data(u),y=r._imageUpperLayer.selectAll("image").data(s);m.enter().append("image");y.enter().append("image");m.exit().remove();y.exit().remove();m.each(function(e){p.bind(this)(e);g.bind(this)(e)});y.each(function(e){p.bind(this)(e);g.bind(this)(e)});var b=Object.keys(r._plots);for(c=0;c<b.length;c++){f=b[c];var x=r._plots[f];if(!x.imagelayer)continue;var _=x.imagelayer.selectAll("image").data(l[f]||[]);_.enter().append("image");_.exit().remove();_.each(function(e){p.bind(this)(e);g.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":426,"../../plots/cartesian/axes":492,"../drawing":348,d3:86}],374:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":502,"./attributes":370,"./convert_coords":371,"./defaults":372,"./draw":373}],375:[function(e,t,r){"use strict";r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3}},{}],376:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":518,"../color/attributes":322}],377:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],378:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../plot_api/plot_template");var o=e("./attributes");var s=e("../../plots/layout_attributes");var l=e("./helpers");t.exports=function e(t,r,u){var f=t.legend||{};var c=0;var h="normal";var d,v,p,g;for(var m=0;m<u.length;m++){var y=u[m];if(l.legendGetsTrace(y)){c++;if(n.traceIs(y,"pie"))c++}if(n.traceIs(y,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(y.fill)!==-1){h=l.isGrouped({traceorder:h})?"grouped+reversed":"reversed"}if(y.legendgroup!==undefined&&y.legendgroup!==""){h=l.isReversed({traceorder:h})?"reversed+grouped":"grouped"}}var b=a.coerce(t,r,s,"showlegend",c>1);if(b===false)return;var x=i.newContainer(r,"legend");function _(e,t){return a.coerce(f,x,o,e,t)}_("bgcolor",r.paper_bgcolor);_("bordercolor");_("borderwidth");a.coerceFont(_,"font",r.font);_("orientation");if(x.orientation==="h"){var w=t.xaxis;if(w&&w.rangeslider&&w.rangeslider.visible){d=0;p="left";v=1.1;g="bottom"}else{d=0;p="left";v=-.1;g="top"}}_("traceorder",h);if(l.isGrouped(r.legend))_("tracegroupgap");_("x",d);_("xanchor",p);_("y",v);_("yanchor",g);a.noneOrAll(f,x,["x","y"])}},{"../../lib":445,"../../plot_api/plot_template":482,"../../plots/layout_attributes":526,"../../registry":536,"./attributes":376,"./helpers":382}],379:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../../plots/plots");var o=e("../../registry");var s=e("../../lib/events");var l=e("../dragelement");var u=e("../drawing");var f=e("../color");var c=e("../../lib/svg_text_utils");var h=e("./handle_click");var d=e("./constants");var v=e("../../constants/interactions");var p=e("../../constants/alignment");var g=p.LINE_SPACING;var m=p.FROM_TL;var y=p.FROM_BR;var b=e("./get_legend_data");var x=e("./style");var _=e("./helpers");var w=e("./anchor_utils");var A=v.DBLCLICKDELAY;t.exports=function e(t){var r=t._fullLayout;var s="legend"+r._uid;if(!r._infolayer||!t.calcdata)return;if(!t._legendMouseDownTime)t._legendMouseDownTime=0;var c=r.legend;var h=r.showlegend&&b(t.calcdata,c);var v=r.hiddenlabels||[];if(!r.showlegend||!h.length){r._infolayer.selectAll(".legend").remove();r._topdefs.select("#"+s).remove();i.autoMargin(t,"legend");return}var p=0;for(var g=0;g<h.length;g++){for(var m=0;m<h[g].length;m++){var y=h[g][m][0];var _=y.trace;var A=o.traceIs(_,"pie");var M=A?y.label:_.name;p=Math.max(p,M&&M.length||0)}}var C=false;var I=a.ensureSingle(r._infolayer,"g","legend",function(e){e.attr("pointer-events","all");C=true});var D=a.ensureSingleById(r._topdefs,"clipPath",s,function(e){e.append("rect")});var R=a.ensureSingle(I,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});R.call(f.stroke,c.bordercolor).call(f.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px");var P=a.ensureSingle(I,"g","scrollbox");var z=a.ensureSingle(I,"rect","scrollbar",function(e){e.attr({rx:20,ry:3,width:0,height:0}).call(f.fill,"#808BA4")});var F=P.selectAll("g.groups").data(h);F.enter().append("g").attr("class","groups");F.exit().remove();var B=F.selectAll("g.traces").data(a.identity);B.enter().append("g").attr("class","traces");B.exit().remove();B.call(x,t).style("opacity",function(e){var t=e[0].trace;if(o.traceIs(t,"pie")){return v.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){n.select(this).call(T,t,p).call(E,t)});if(C){S(t,F,B);L(t)}var N=0,j=r.width,U=0,V=r.height;S(t,F,B);if(c._height>V){O(t)}else{L(t)}var H=r._size,q=H.l+H.w*c.x,G=H.t+H.h*(1-c.y);if(w.isRightAnchor(c)){q-=c._width}else if(w.isCenterAnchor(c)){q-=c._width/2}if(w.isBottomAnchor(c)){G-=c._height}else if(w.isMiddleAnchor(c)){G-=c._height/2}var X=c._width,W=H.w;if(X>W){q=H.l;X=W}else{if(q+X>j)q=j-X;if(q<N)q=N;X=Math.min(j-q,c._width)}var Y=c._height,Z=H.h;if(Y>Z){G=H.t;Y=Z}else{if(G+Y>V)G=V-Y;if(G<U)G=U;Y=Math.min(V-G,c._height)}u.setTranslate(I,q,G);z.on(".drag",null);I.on("wheel",null);if(c._height<=Y||t._context.staticPlot){R.attr({width:X-c.borderwidth,height:Y-c.borderwidth,x:c.borderwidth/2,y:c.borderwidth/2});u.setTranslate(P,0,0);D.select("rect").attr({width:X-2*c.borderwidth,height:Y-2*c.borderwidth,x:c.borderwidth,y:c.borderwidth});u.setClipUrl(P,s);u.setRect(z,0,0,0,0);delete c._scrollY}else{var J=Math.max(d.scrollBarMinHeight,Y*Y/c._height);var Q=Y-J-2*d.scrollBarMargin;var $=c._height-Y;var K=Q/$;var ee=Math.min(c._scrollY||0,$);R.attr({width:X-2*c.borderwidth+d.scrollBarWidth+d.scrollBarMargin,height:Y-c.borderwidth,x:c.borderwidth/2,y:c.borderwidth/2});D.select("rect").attr({width:X-2*c.borderwidth+d.scrollBarWidth+d.scrollBarMargin,height:Y-2*c.borderwidth,x:c.borderwidth,y:c.borderwidth+ee});u.setClipUrl(P,s);ae(ee,J,K);I.on("wheel",function(){ee=a.constrain(c._scrollY+n.event.deltaY/Q*$,0,$);ae(ee,J,K);if(ee!==0&&ee!==$){n.event.preventDefault()}});var te,re;var ne=n.behavior.drag().on("dragstart",function(){te=n.event.sourceEvent.clientY;re=ee}).on("drag",function(){var e=n.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;ee=a.constrain((e.clientY-te)/K+re,0,$);ae(ee,J,K)});z.call(ne)}function ae(e,r,n){c._scrollY=t._fullLayout.legend._scrollY=e;u.setTranslate(P,0,-e);u.setRect(z,X,d.scrollBarMargin+e*n,d.scrollBarWidth,r);D.select("rect").attr({y:c.borderwidth+e})}if(t._context.edits.legendPosition){var ie,oe,se,le;I.classed("cursor-move",true);l.init({element:I.node(),gd:t,prepFn:function(){var e=u.getTranslate(I);se=e.x;le=e.y},moveFn:function(e,t){var r=se+e,n=le+t;u.setTranslate(I,r,n);ie=l.align(r,0,H.l,H.l+H.w,c.xanchor);oe=l.align(n,0,H.t+H.h,H.t,c.yanchor)},doneFn:function(){if(ie!==undefined&&oe!==undefined){o.call("relayout",t,{"legend.x":ie,"legend.y":oe})}},clickFn:function(e,n){var a=r._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom});if(a.size()>0){k(t,I,a,e,n)}}})}};function k(e,t,r,n,a){var i=r.data()[0][0].trace;var o={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(i.type==="pie"){o.label=r.datum()[0].label}var l=s.triggerHandler(e,"plotly_legendclick",o);if(l===false)return;if(n===1){t._clickTimeout=setTimeout(function(){h(r,e,n)},A)}else if(n===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var u=s.triggerHandler(e,"plotly_legenddoubleclick",o);if(u!==false)h(r,e,n)}}function T(e,t,r){var n=e.data()[0][0];var i=t._fullLayout;var s=n.trace;var l=o.traceIs(s,"pie");var f=s.index;var h=l?n.label:s.name;var d=t._context.edits.legendText&&!l;var v=a.ensureSingle(e,"text","legendtext");v.attr("text-anchor","start").classed("user-select-none",true).call(u.font,i.legend.font).text(d?M(h,r):h);function p(r){c.convertToTspans(r,t,function(){C(e,t)})}if(d){v.call(c.makeEditable,{gd:t,text:h}).call(p).on("edit",function(e){this.text(M(e,r)).call(p);var i=n.trace._fullInput||{};var s={};if(o.hasTransform(i,"groupby")){var l=o.getTransformIndices(i,"groupby");var u=l[l.length-1];var c=a.keyedContainer(i,"transforms["+u+"].styles","target","value.name");c.set(n.trace._group,e);s=c.constructUpdate()}else{s.name=e}return o.call("restyle",t,s,f)})}else{p(v)}}function M(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var n=r-e.length;n>0;n--)e+=" ";return e}function E(e,t){var r,i=1;var o=a.ensureSingle(e,"rect","legendtoggle",function(e){e.style("cursor","pointer").attr("pointer-events","all").call(f.fill,"rgba(0,0,0,0)")});o.on("mousedown",function(){r=(new Date).getTime();if(r-t._legendMouseDownTime<A){i+=1}else{i=1;t._legendMouseDownTime=r}});o.on("mouseup",function(){if(t._dragged||t._editing)return;var r=t._fullLayout.legend;if((new Date).getTime()-t._legendMouseDownTime>A){i=Math.max(i-1,1)}k(t,r,e,i,n.event)})}function C(e,t){var r=e.data()[0][0];if(!r.trace.showlegend){e.remove();return}var n=e.select("g[class*=math-group]");var a=n.node();var i=t._fullLayout.legend;var o=i.font.size*g;var s,l;if(a){var f=u.bBox(a);s=f.height;l=f.width;u.setTranslate(n,0,s/4)}else{var h=e.select(".legendtext");var d=c.lineCount(h);var v=h.node();s=o*d;l=v?u.bBox(v).width:0;var p=o*(.3+(1-d)/2);c.positionText(h,40,p)}s=Math.max(s,16)+3;r.height=s;r.width=l}function S(e,t,r){var a=e._fullLayout;var i=a.legend;var o=i.borderwidth;var s=_.isGrouped(i);var l=0;i._width=0;i._height=0;if(_.isVertical(i)){if(s){t.each(function(e,t){u.setTranslate(this,0,t*i.tracegroupgap)})}r.each(function(e){var t=e[0],r=t.height,n=t.width;u.setTranslate(this,o,5+o+i._height+r/2);i._height+=r;i._width=Math.max(i._width,n)});i._width+=45+o*2;i._height+=10+o*2;if(s){i._height+=(i._lgroupsLength-1)*i.tracegroupgap}l=40}else if(s){var f=[i._width],c=t.data();for(var h=0,d=c.length;h<d;h++){var v=c[h].map(function(e){return e[0].width});var p=40+Math.max.apply(null,v);i._width+=i.tracegroupgap+p;f.push(i._width)}t.each(function(e,t){u.setTranslate(this,f[t],0)});t.each(function(){var e=n.select(this),t=e.selectAll("g.traces"),r=0;t.each(function(e){var t=e[0],n=t.height;u.setTranslate(this,0,5+o+r+n/2);r+=n});i._height=Math.max(i._height,r)});i._height+=10+o*2;i._width+=o*2}else{var g=0,m=0,y=0,b=0,x=0,w=i.tracegroupgap||5,A;r.each(function(e){y=Math.max(40+e[0].width,y);x+=40+e[0].width+w});A=a.width-(a.margin.r+a.margin.l)>o+x-w;r.each(function(e){var t=e[0],r=A?40+e[0].width:y;if(o+b+w+r>a.width-(a.margin.r+a.margin.l)){b=0;g=g+m;i._height=i._height+m;m=0}u.setTranslate(this,o+b,5+o+t.height/2+g);i._width+=w+r;i._height=Math.max(i._height,t.height);b+=w+r;m=Math.max(t.height,m)});i._width+=o*2;i._height+=10+o*2}i._width=Math.ceil(i._width);i._height=Math.ceil(i._height);r.each(function(t){var r=t[0],a=n.select(this).select(".legendtoggle");u.setRect(a,0,-r.height/2,(e._context.edits.legendText?0:i._width)+l,r.height)})}function L(e){var t=e._fullLayout,r=t.legend;var n="left";if(w.isRightAnchor(r)){n="right"}else if(w.isCenterAnchor(r)){n="center"}var a="top";if(w.isBottomAnchor(r)){a="bottom"}else if(w.isMiddleAnchor(r)){a="middle"}i.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*m[n],r:r._width*y[n],b:r._height*y[a],t:r._height*m[a]})}function O(e){var t=e._fullLayout,r=t.legend;var n="left";if(w.isRightAnchor(r)){n="right"}else if(w.isCenterAnchor(r)){n="center"}i.autoMargin(e,"legend",{x:r.x,y:.5,l:r._width*m[n],r:r._width*y[n],b:0,t:0})}},{"../../constants/alignment":421,"../../constants/interactions":423,"../../lib":445,"../../lib/events":435,"../../lib/svg_text_utils":469,"../../plots/plots":528,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"./anchor_utils":375,"./constants":377,"./get_legend_data":380,"./handle_click":381,"./helpers":382,"./style":384,d3:86}],380:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./helpers");t.exports=function e(t,r){var i={},o=[],s=false,l={},u=0;var f,c;function h(e,t){if(e===""||!a.isGrouped(r)){var n="~~i"+u;o.push(n);i[n]=[[t]];u++}else if(o.indexOf(e)===-1){o.push(e);s=true;i[e]=[[t]]}else i[e].push([t])}for(f=0;f<t.length;f++){var d=t[f],v=d[0],p=v.trace,g=p.legendgroup;if(!a.legendGetsTrace(p)||!p.showlegend)continue;if(n.traceIs(p,"pie")){if(!l[g])l[g]={};for(c=0;c<d.length;c++){var m=d[c].label;if(!l[g][m]){h(g,{label:m,color:d[c].color,i:d[c].i,trace:p});l[g][m]=true}}}else h(g,v)}if(!o.length)return[];var y=o.length,b,x;if(s&&a.isGrouped(r)){x=new Array(y);for(f=0;f<y;f++){b=i[o[f]];x[f]=a.isReversed(r)?b.reverse():b}}else{x=[new Array(y)];for(f=0;f<y;f++){b=i[o[f]][0];x[0][a.isReversed(r)?y-f-1:f]=b}y=1}r._lgroupsLength=y;return x}},{"../../registry":536,"./helpers":382}],381:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=true;t.exports=function e(t,r,o){if(r._dragged||r._editing)return;var s=r._fullLayout.hiddenlabels?r._fullLayout.hiddenlabels.slice():[];var l=t.data()[0][0];var u=r._fullData;var f=l.trace;var c=f.legendgroup;var h,d,v,p,g,m;var y={};var b=[];var x=[];var _=[];function w(e,t,r){var n=b.indexOf(e);var a=y[t];if(!a){a=y[t]=[]}if(b.indexOf(e)===-1){b.push(e);n=b.length-1}a[n]=r;return n}function A(e,t){var r=e._fullInput;if(a.hasTransform(r,"groupby")){var i=x[r.index];if(!i){var o=a.getTransformIndices(r,"groupby");var s=o[o.length-1];i=n.keyedContainer(r,"transforms["+s+"].styles","target","value.visible");x[r.index]=i}var l=i.get(e._group);if(l===undefined){l=true}if(l!==false){i.set(e._group,t)}_[r.index]=w(r.index,"visible",r.visible===false?false:true)}else{var u=r.visible===false?false:t;w(r.index,"visible",u)}}if(o===1&&i&&r.data&&r._context.showTips){n.notifier(n._(r,"Double-click on legend to isolate one trace"),"long");i=false}else{i=false}if(a.traceIs(f,"pie")){var k=l.label,T=s.indexOf(k);if(o===1){if(T===-1)s.push(k);else s.splice(T,1)}else if(o===2){s=[];r.calcdata[0].forEach(function(e){if(k!==e.label){s.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===s.length&&T===-1){s=[]}}a.call("relayout",r,"hiddenlabels",s)}else{var M=c&&c.length;var E=[];var C;if(M){for(h=0;h<u.length;h++){C=u[h];if(!C.visible)continue;if(C.legendgroup===c){E.push(h)}}}if(o===1){var S;switch(f.visible){case true:S="legendonly";break;case false:S=false;break;case"legendonly":S=true;break}if(M){for(h=0;h<u.length;h++){if(u[h].visible!==false&&u[h].legendgroup===c){A(u[h],S)}}}else{A(f,S)}}else if(o===2){var L,O,I;var D=true;for(h=0;h<u.length;h++){L=u[h]===f;if(L)continue;O=M&&u[h].legendgroup===c;if(!O&&u[h].visible===true&&!a.traceIs(u[h],"notLegendIsolatable")){D=false;break}}for(h=0;h<u.length;h++){if(u[h].visible===false)continue;if(a.traceIs(u[h],"notLegendIsolatable")){continue}switch(f.visible){case"legendonly":A(u[h],true);break;case true:I=D?true:"legendonly";L=u[h]===f;O=L||M&&u[h].legendgroup===c;A(u[h],O?true:I);break}}}for(h=0;h<x.length;h++){v=x[h];if(!v)continue;var R=v.constructUpdate();var P=Object.keys(R);for(d=0;d<P.length;d++){p=P[d];m=y[p]=y[p]||[];m[_[h]]=R[p]}}g=Object.keys(y);for(h=0;h<g.length;h++){p=g[h];for(d=0;d<b.length;d++){if(!y[p].hasOwnProperty(d)){y[p][d]=undefined}}}a.call("restyle",r,y,b)}}},{"../../lib":445,"../../registry":536}],382:[function(e,t,r){"use strict";r.legendGetsTrace=function e(t){return t.visible&&t.showlegend!==undefined};r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],383:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":376,"./defaults":378,"./draw":379,"./style":384}],384:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../drawing");var s=e("../color");var l=e("../../traces/scatter/subtypes");var u=e("../../traces/pie/style_one");t.exports=function e(t,r){t.each(function(e){var t=n.select(this);var r=i.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var a=r.selectAll("g.legendfill").data([e]);a.enter().append("g").classed("legendfill",true);var o=r.selectAll("g.legendlines").data([e]);o.enter().append("g").classed("legendlines",true);var s=r.selectAll("g.legendsymbols").data([e]);s.enter().append("g").classed("legendsymbols",true);s.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(h).each(d).each(g).each(f).each(c).each(v).each(p);function f(e){var t=e[0].trace;var r=t.visible&&t.fill&&t.fill!=="none";var a=l.hasLines(t);var i=t.contours;if(i&&i.type==="constraint"){a=i.showlines;r=i._operation!=="="}var s=n.select(this).select(".legendfill").selectAll("path").data(r?[e]:[]);s.enter().append("path").classed("js-fill",true);s.exit().remove();s.attr("d","M5,0h30v6h-30z").call(o.fillGroupStyle);var u=n.select(this).select(".legendlines").selectAll("path").data(a?[e]:[]);u.enter().append("path").classed("js-line",true).attr("d","M5,0h30");u.exit().remove();u.call(o.lineGroupStyle)}function c(e){var t=e[0],a=t.trace,s=l.hasMarkers(a),u=l.hasText(a),f=l.hasLines(a);var c,h;function d(e,t,r){var n=i.nestedProperty(a,e).get(),o=Array.isArray(n)&&t?t(n):n;if(r){if(o<r[0])return r[0];else if(o>r[1])return r[1]}return o}function v(e){return e[0]}if(s||u||f){var p={};var g={};if(s){p.mc=d("marker.color",v);p.mo=d("marker.opacity",i.mean,[.2,1]);p.ms=d("marker.size",i.mean,[2,16]);p.mlc=d("marker.line.color",v);p.mlw=d("marker.line.width",i.mean,[0,5]);g.marker={sizeref:1,sizemin:1,sizemode:"diameter"}}if(f){g.line={width:d("line.width",v,[0,10])}}if(u){p.tx="Aa";p.tp=d("textposition",v);p.ts=10;p.tc=d("textfont.color",v);p.tf=d("textfont.family",v)}c=[i.minExtend(t,p)];h=i.minExtend(a,g);h.selectedpoints=null}var m=n.select(this).select("g.legendpoints");var y=m.selectAll("path.scatterpts").data(s?c:[]);y.enter().append("path").classed("scatterpts",true).attr("transform","translate(20,0)");y.exit().remove();y.call(o.pointStyle,h,r);if(s)c[0].mrc=3;var b=m.selectAll("g.pointtext").data(u?c:[]);b.enter().append("g").classed("pointtext",true).append("text").attr("transform","translate(20,0)");b.exit().remove();b.selectAll("text").call(o.textPointStyle,h,r)}function h(e){var t=e[0].trace,r=t.marker||{},i=r.line||{},o=n.select(this).select("g.legendpoints").selectAll("path.legendbar").data(a.traceIs(t,"bar")?[e]:[]);o.enter().append("path").classed("legendbar",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");o.exit().remove();o.each(function(e){var t=n.select(this),a=e[0],o=(a.mlw+1||i.width+1)-1;t.style("stroke-width",o+"px").call(s.fill,a.mc||r.color);if(o){t.call(s.stroke,a.mlc||i.color)}})}function d(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(a.traceIs(t,"box-violin")&&t.visible?[e]:[]);r.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();r.each(function(){var e=t.line.width,r=n.select(this);r.style("stroke-width",e+"px").call(s.fill,t.fillcolor);if(e){s.stroke(r,t.line.color)}})}function v(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.type==="candlestick"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var a=t[r?"increasing":"decreasing"];var i=a.line.width,o=n.select(this);o.style("stroke-width",i+"px").call(s.fill,a.fillcolor);if(i){s.stroke(o,a.line.color)}})}function p(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.type==="ohlc"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var a=t[r?"increasing":"decreasing"];var i=a.line.width,l=n.select(this);l.style("fill","none").call(o.dashLine,a.line.dash,i);if(i){s.stroke(l,a.line.color)}})}function g(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendpie").data(a.traceIs(t,"pie")&&t.visible?[e]:[]);r.enter().append("path").classed("legendpie",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();if(r.size())r.call(u,e[0],t)}}},{"../../lib":445,"../../registry":536,"../../traces/pie/style_one":591,"../../traces/scatter/subtypes":619,"../color":323,"../drawing":348,d3:86}],385:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../plots/plots");var i=e("../../plots/cartesian/axis_ids");var o=e("../../lib");var s=e("../../../build/ploticon");var l=o._;var u=t.exports={};u.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?l(e,"Download plot as a png"):l(e,"Download plot")},icon:s.camera,click:function(e){var t=e._context.toImageButtonOptions;var r={format:t.format||"png"};o.notifier(l(e,"Taking snapshot - this may take a few seconds"),"long");if(r.format!=="svg"&&o.isIE()){o.notifier(l(e,"IE only supports svg.  Changing format to svg."),"long");r.format="svg"}["filename","width","height","scale"].forEach(function(e){if(t[e]){r[e]=t[e]}});n.call("downloadImage",e,r).then(function(t){o.notifier(l(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){o.notifier(l(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return l(e,"Edit in Chart Studio")},icon:s.disk,click:function(e){a.sendDataToCloud(e)}};u.zoom2d={name:"zoom2d",title:function(e){return l(e,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:f};u.pan2d={name:"pan2d",title:function(e){return l(e,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:f};u.select2d={name:"select2d",title:function(e){return l(e,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:f};u.lasso2d={name:"lasso2d",title:function(e){return l(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:f};u.zoomIn2d={name:"zoomIn2d",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:f};u.zoomOut2d={name:"zoomOut2d",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:f};u.autoScale2d={name:"autoScale2d",title:function(e){return l(e,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:f};u.resetScale2d={name:"resetScale2d",title:function(e){return l(e,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:f};u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return l(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:f};u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return l(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:f};function f(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var o=r.getAttribute("data-val")||true;var s=e._fullLayout;var l={};var u=i.list(e,null,true);var f="on";var c,h;if(a==="zoom"){var d=o==="in"?.5:2,v=(1+d)/2,p=(1-d)/2;var g;for(h=0;h<u.length;h++){c=u[h];if(!c.fixedrange){g=c._name;if(o==="auto")l[g+".autorange"]=true;else if(o==="reset"){if(c._rangeInitial===undefined){l[g+".autorange"]=true}else{var m=c._rangeInitial.slice();l[g+".range[0]"]=m[0];l[g+".range[1]"]=m[1]}if(c._showSpikeInitial!==undefined){l[g+".showspikes"]=c._showSpikeInitial;if(f==="on"&&!c._showSpikeInitial){f="off"}}}else{var y=[c.r2l(c.range[0]),c.r2l(c.range[1])];var b=[v*y[0]+p*y[1],v*y[1]+p*y[0]];l[g+".range[0]"]=c.l2r(b[0]);l[g+".range[1]"]=c.l2r(b[1])}}}s._cartesianSpikesEnabled=f}else{if(a==="hovermode"&&(o==="x"||o==="y")){o=s._isHoriz?"y":"x";r.setAttribute("data-val",o)}else if(a==="hovermode"&&o==="closest"){for(h=0;h<u.length;h++){c=u[h];if(f==="on"&&!c.showspikes){f="off"}}s._cartesianSpikesEnabled=f}l[a]=o}n.call("relayout",e,l)}u.zoom3d={name:"zoom3d",title:function(e){return l(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:c};u.pan3d={name:"pan3d",title:function(e){return l(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:c};u.orbitRotation={name:"orbitRotation",title:function(e){return l(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:c};u.tableRotation={name:"tableRotation",title:function(e){return l(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:c};function c(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout._subplots.gl3d;var s={};var l=a.split(".");for(var u=0;u<o.length;u++){s[o[u]+"."+l[1]]=i}var f=i==="pan"?i:"zoom";s.dragmode=f;n.call("relayout",e,s)}u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return l(e,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:h};u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return l(e,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:h};function h(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=e._fullLayout;var s=i._subplots.gl3d;var l={};for(var u=0;u<s.length;u++){var f=s[u],c=f+".camera",h=i[f]._scene;if(a==="resetDefault"){l[c]=null}else if(a==="resetLastSave"){l[c]=o.extendDeep({},h.cameraInitial)}}n.call("relayout",e,l)}u.hoverClosest3d={name:"hoverClosest3d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:s.tooltip_basic,gravity:"ne",click:d};function d(e,t){var r=t.currentTarget;var a=r._previousVal||false;var i=e.layout;var s=e._fullLayout;var l=s._subplots.gl3d;var u=["xaxis","yaxis","zaxis"];var f=["showspikes","spikesides","spikethickness","spikecolor"];var c={};var h={};var d={};if(a){d=o.extendDeep(i,a);r._previousVal=null}else{d={"allaxes.showspikes":false};for(var v=0;v<l.length;v++){var p=l[v],g=s[p],m=c[p]={};m.hovermode=g.hovermode;d[p+".hovermode"]=false;for(var y=0;y<3;y++){var b=u[y];h=m[b]={};for(var x=0;x<f.length;x++){var _=f[x];h[_]=g[b][_]}}}r._previousVal=o.extendDeep({},c)}n.call("relayout",e,d)}u.zoomInGeo={name:"zoomInGeo",title:function(e){return l(e,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:v};u.zoomOutGeo={name:"zoomOutGeo",title:function(e){return l(e,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:v};u.resetGeo={name:"resetGeo",title:function(e){return l(e,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:v};u.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:s.tooltip_basic,gravity:"ne",click:p};function v(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout;var s=o._subplots.geo;for(var l=0;l<s.length;l++){var u=s[l];var f=o[u];if(a==="zoom"){var c=f.projection.scale;var h=i==="in"?2*c:.5*c;n.call("relayout",e,u+".projection.scale",h)}else if(a==="reset"){m(e,"geo")}}}u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:s.tooltip_basic,gravity:"ne",click:p};u.hoverClosestPie={name:"hoverClosestPie",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:p};function p(e){var t=e._fullLayout;var r;if(t._has("cartesian")){r=t._isHoriz?"y":"x"}else r="closest";var a=e._fullLayout.hovermode?false:r;n.call("relayout",e,"hovermode",a)}u.toggleHover={name:"toggleHover",title:function(e){return l(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:s.tooltip_basic,gravity:"ne",click:function(e,t){p(e);d(e,t)}};u.resetViews={name:"resetViews",title:function(e){return l(e,"Reset views")},icon:s.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");f(e,t);r.setAttribute("data-attr","resetLastSave");h(e,t);m(e,"geo");m(e,"mapbox")}};u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return l(e,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled=t._cartesianSpikesEnabled==="on"?"off":"on";var r=g(e);n.call("relayout",e,r)}};function g(e){var t=e._fullLayout;var r=i.list(e,null,true);var n={};var a,o;for(var s=0;s<r.length;s++){a=r[s];o=a._name;n[o+".showspikes"]=t._cartesianSpikesEnabled==="on"?true:a._showSpikeInitial}return n}u.resetViewMapbox={name:"resetViewMapbox",title:function(e){return l(e,"Reset view")},attr:"reset",icon:s.home,click:function(e){m(e,"mapbox")}};function m(e,t){var r=e._fullLayout;var a=r._subplots[t];var i={};for(var o=0;o<a.length;o++){var s=a[o];var l=r[s]._subplot;var u=l.viewInitial;var f=Object.keys(u);for(var c=0;c<f.length;c++){var h=f[c];i[s+"."+h]=u[h]}}n.call("relayout",e,i)}},{"../../../build/ploticon":2,"../../lib":445,"../../plots/cartesian/axis_ids":495,"../../plots/plots":528,"../../registry":536}],386:[function(e,t,r){"use strict";r.manage=e("./manage")},{"./manage":387}],387:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids");var a=e("../../traces/scatter/subtypes");var i=e("../../registry");var o=e("./modebar");var s=e("./buttons");t.exports=function e(t){var r=t._fullLayout,n=t._context,a=r._modeBar;if(!n.displayModeBar){if(a){a.destroy();delete r._modeBar}return}if(!Array.isArray(n.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(n.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=n.modeBarButtons;var s;if(Array.isArray(i)&&i.length){s=h(i)}else{s=l(t,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd)}if(a)a.update(t,s);else r._modeBar=o(t,s)};function l(e,t,r){var n=e._fullLayout;var a=e._fullData;var i=n._has("cartesian");var o=n._has("gl3d");var l=n._has("geo");var h=n._has("pie");var d=n._has("gl2d");var v=n._has("ternary");var p=n._has("mapbox");var g=n._has("polar");var m=u(n);var y=[];function b(e){if(!e.length)return;var r=[];for(var n=0;n<e.length;n++){var a=e[n];if(t.indexOf(a)!==-1)continue;r.push(s[a])}y.push(r)}b(["toImage","sendDataToCloud"]);var x=[];var _=[];var w=[];var A=[];if((i||d||h||v)+l+o+p+g>1){_=["toggleHover"];w=["resetViews"]}else if(l){x=["zoomInGeo","zoomOutGeo"];_=["hoverClosestGeo"];w=["resetGeo"]}else if(o){_=["hoverClosest3d"];w=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(p){_=["toggleHover"];w=["resetViewMapbox"]}else if(d){_=["hoverClosestGl2d"]}else if(h){_=["hoverClosestPie"]}else{_=["toggleHover"]}if(i){_=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if((i||d)&&!m){x=["zoomIn2d","zoomOut2d","autoScale2d"];if(w[0]!=="resetViews")w=["resetScale2d"]}if(o){A=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((i||d)&&!m||v){A=["zoom2d","pan2d"]}else if(p||l){A=["pan2d"]}else if(g){A=["zoom2d"]}if(f(a)){A.push("select2d","lasso2d")}b(A);b(x.concat(w));b(_);return c(y,r)}function u(e){var t=n.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function f(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var n=e[r];if(!n._module||!n._module.selectPoints)continue;if(i.traceIs(n,"scatter-like")){if(a.hasMarkers(n)||a.hasText(n)){t=true}}else if(i.traceIs(n,"box-violin")){if(n.boxpoints==="all"||n.points==="all"){t=true}}else t=true}return t}function c(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function h(e){for(var t=0;t<e.length;t++){var r=e[t];for(var n=0;n<r.length;n++){var a=r[n];if(typeof a==="string"){if(s[a]!==undefined){e[t][n]=s[a]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":495,"../../registry":536,"../../traces/scatter/subtypes":619,"./buttons":385,"./modebar":388}],388:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../lib");var o=e("../../../build/ploticon");function s(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var l=s.prototype;l.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;if(r.displayModeBar==="hover"){this.element.className="modebar modebar--hover"}else this.element.className="modebar";var n=!this.hasButtons(t);var a=this.hasLogo!==r.displaylogo;var i=this.locale!==r.locale;this.locale=r.locale;if(n||a||i){this.removeAllButtons();this.updateButtons(t);if(r.displaylogo){this.element.appendChild(this.getLogo());this.hasLogo=true}}this.updateActiveButton()};l.updateButtons=function(e){var t=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var r=t.createGroup();e.forEach(function(e){var n=e.name;if(!n){throw new Error("must provide button 'name' in button config")}if(t.buttonsNames.indexOf(n)!==-1){throw new Error("button name '"+n+"' is taken")}t.buttonsNames.push(n);var a=t.createButton(e);t.buttonElements.push(a);r.appendChild(a)});t.element.appendChild(r)})};l.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};l.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip");r.className="modebar-btn";var a=e.title;if(a===undefined)a=e.name;else if(typeof a==="function")a=a(this.graphInfo);if(a||a===0)r.setAttribute("data-title",a);if(e.attr!==undefined)r.setAttribute("data-attr",e.attr);var i=e.val;if(i!==undefined){if(typeof i==="function")i=i(this.graphInfo);r.setAttribute("data-val",i)}var s=e.click;if(typeof s!=="function"){throw new Error("must provide button 'click' function in button config")}else{r.addEventListener("click",function(r){e.click(t.graphInfo,r);t.updateActiveButton(r.currentTarget)})}r.setAttribute("data-toggle",e.toggle||false);if(e.toggle)n.select(r).classed("active",true);var l=e.icon;if(typeof l==="function"){r.appendChild(l())}else{r.appendChild(this.createIcon(l||o.question))}r.setAttribute("data-gravity",e.gravity||"n");return r};l.createIcon=function(e){var t=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg"),i=document.createElementNS(r,"path");n.setAttribute("height","1em");n.setAttribute("width",e.width/t+"em");n.setAttribute("viewBox",[0,0,e.width,t].join(" "));i.setAttribute("d",e.path);if(e.transform){i.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}n.appendChild(i);return n};l.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var a=e.getAttribute("data-val")||true,o=e.getAttribute("data-attr"),s=e.getAttribute("data-toggle")==="true",l=n.select(e);if(s){if(o===r){l.classed("active",!l.classed("active"))}}else{var u=o===null?o:i.nestedProperty(t,o).get();l.classed("active",u===a)}})};l.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var n=0;n<e[r].length;n++){if(e[r][n].name!==t[r][n].name)return false}}return true};l.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");t.href="https://plot.ly/";t.target="_blank";t.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(o.plotlylogo));e.appendChild(t);return e};l.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};l.destroy=function(){i.removeElement(this.container.querySelector(".modebar"))};function u(e,t){var r=e._fullLayout;var a=new s({graphInfo:e,container:r._paperdiv.node(),buttons:t});if(r._privateplot){n.select(a.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return a}t.exports=u},{"../../../build/ploticon":2,"../../lib":445,d3:86,"fast-isnumeric":151}],389:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":482,"../../plots/font_attributes":518,"../color/attributes":322}],390:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],391:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../color");var i=e("../../plot_api/plot_template");var o=e("../../plots/array_container_defaults");var s=e("./attributes");var l=e("./constants");t.exports=function e(t,r,c,h,d){var v=t.rangeselector||{};var p=i.newContainer(r,"rangeselector");function g(e,t){return n.coerce(v,p,s,e,t)}var m=o(v,p,{name:"buttons",handleItemDefaults:u,calendar:d});var y=g("visible",m.length>0);if(y){var b=f(r,c,h);g("x",b[0]);g("y",b[1]);n.noneOrAll(t,r,["x","y"]);g("xanchor");g("yanchor");n.coerceFont(g,"font",c.font);var x=g("bgcolor");g("activecolor",a.contrast(x,l.lightAmount,l.darkAmount));g("bordercolor");g("borderwidth")}};function u(e,t,r,a){var i=a.calendar;function o(r,a){return n.coerce(e,t,s.buttons,r,a)}var l=o("visible");if(l){var u=o("step");if(u!=="all"){if(i&&i!=="gregorian"&&(u==="month"||u==="year")){t.stepmode="backward"}else{o("stepmode")}o("count")}o("label")}}function f(e,t,r){var n=r.filter(function(r){return t[r].anchor===e._id});var a=0;for(var i=0;i<n.length;i++){var o=t[n[i]].domain;if(o)a=Math.max(o[1],a)}return[e.domain[0],a+l.yPad]}},{"../../lib":445,"../../plot_api/plot_template":482,"../../plots/array_container_defaults":488,"../color":323,"./attributes":389,"./constants":390}],392:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../color");var s=e("../drawing");var l=e("../../lib");var u=e("../../lib/svg_text_utils");var f=e("../../plots/cartesian/axis_ids");var c=e("../legend/anchor_utils");var h=e("../../constants/alignment");var d=h.LINE_SPACING;var v=h.FROM_TL;var p=h.FROM_BR;var g=e("./constants");var m=e("./get_update_object");t.exports=function e(t){var r=t._fullLayout;var i=r._infolayer.selectAll(".rangeselector").data(y(t),b);i.enter().append("g").classed("rangeselector",true);i.exit().remove();i.style({cursor:"pointer","pointer-events":"all"});i.each(function(e){var r=n.select(this),i=e,o=i.rangeselector;var s=r.selectAll("g.button").data(l.filterVisible(o.buttons));s.enter().append("g").classed("button",true);s.exit().remove();s.each(function(e){var r=n.select(this);var s=m(i,e);e._isActive=x(i,e,s);r.call(_,o,e);r.call(A,o,e,t);r.on("click",function(){if(t._dragged)return;a.call("relayout",t,s)});r.on("mouseover",function(){e._isHovered=true;r.call(_,o,e)});r.on("mouseout",function(){e._isHovered=false;r.call(_,o,e)})});T(t,s,o,i._name,r)})};function y(e){var t=f.list(e,"x",true);var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.rangeselector&&a.rangeselector.visible){r.push(a)}}return r}function b(e){return e._id}function x(e,t,r){if(t.step==="all"){return e.autorange===true}else{var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}}function _(e,t,r){var n=l.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});n.attr({rx:g.rx,ry:g.ry});n.call(o.stroke,t.bordercolor).call(o.fill,w(t,r)).style("stroke-width",t.borderwidth+"px")}function w(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function A(e,t,r,n){function a(e){u.convertToTspans(e,n)}var i=l.ensureSingle(e,"text","selector-text",function(e){e.classed("user-select-none",true).attr("text-anchor","middle")});i.call(s.font,t.font).text(k(r)).call(a)}function k(e){if(e.label)return e.label;if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function T(e,t,r,a,o){var l=0;var f=0;var h=r.borderwidth;t.each(function(){var e=n.select(this);var t=e.select(".selector-text");var a=r.font.size*d;var i=Math.max(a*u.lineCount(t),16)+3;f=Math.max(f,i)});t.each(function(){var e=n.select(this);var t=e.select(".selector-rect");var a=e.select(".selector-text");var i=a.node()&&s.bBox(a.node()).width;var o=r.font.size*d;var c=u.lineCount(a);var v=Math.max(i+10,g.minButtonWidth);e.attr("transform","translate("+(h+l)+","+h+")");t.attr({x:0,y:0,width:v,height:f});u.positionText(a,v/2,f/2-(c-1)*o/2+3);l+=v+5});var m=e._fullLayout._size;var y=m.l+m.w*r.x;var b=m.t+m.h*(1-r.y);var x="left";if(c.isRightAnchor(r)){y-=l;x="right"}if(c.isCenterAnchor(r)){y-=l/2;x="center"}var _="top";if(c.isBottomAnchor(r)){b-=f;_="bottom"}if(c.isMiddleAnchor(r)){b-=f/2;_="middle"}l=Math.ceil(l);f=Math.ceil(f);y=Math.round(y);b=Math.round(b);i.autoMargin(e,a+"-range-selector",{x:r.x,y:r.y,l:l*v[x],r:l*p[x],b:f*p[_],t:f*v[_]});o.attr("transform","translate("+y+","+b+")")}},{"../../constants/alignment":421,"../../lib":445,"../../lib/svg_text_utils":469,"../../plots/cartesian/axis_ids":495,"../../plots/plots":528,"../../registry":536,"../color":323,"../drawing":348,"../legend/anchor_utils":375,"./constants":390,"./get_update_object":393,d3:86}],393:[function(e,t,r){"use strict";var n=e("d3");t.exports=function e(t,r){var n=t._name;var i={};if(r.step==="all"){i[n+".autorange"]=true}else{var o=a(t,r);i[n+".range[0]"]=o[0];i[n+".range[1]"]=o[1]}return i};function a(e,t){var r=e.range;var a=new Date(e.r2l(r[1]));var i=t.step,o=t.count;var s;switch(t.stepmode){case"backward":s=e.l2r(+n.time[i].utc.offset(a,-o));break;case"todate":var l=n.time[i].utc.offset(a,-o);s=e.l2r(+n.time[i].utc.ceil(l));break}var u=r[1];return[s,u]}},{d3:86}],394:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":389,"./defaults":391,"./draw":392}],395:[function(e,t,r){"use strict";var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":322}],396:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids").list;var a=e("../../plots/cartesian/autorange").getAutoRange;var i=e("./constants");t.exports=function e(t){var r=n(t,"x",true);for(var o=0;o<r.length;o++){var s=r[o],l=s[i.name];if(l&&l.visible&&l.autorange&&s._min.length&&s._max.length){l._input.autorange=true;l._input.range=l.range=a(s)}}}},{"../../plots/cartesian/autorange":491,"../../plots/cartesian/axis_ids":495,"./constants":397}],397:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],398:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/axis_ids");var o=e("./attributes");var s=e("./oppaxis_attributes");t.exports=function e(t,r,l){var u=t[l];var f=r[l];if(!(u.rangeslider||r._requestRangeslider[f._id]))return;if(!n.isPlainObject(u.rangeslider)){u.rangeslider={}}var c=u.rangeslider;var h=a.newContainer(f,"rangeslider");function d(e,t){return n.coerce(c,h,o,e,t)}var v,p;function g(e,t){return n.coerce(v,p,s,e,t)}var m=d("visible");if(!m)return;d("bgcolor",r.plot_bgcolor);d("bordercolor");d("borderwidth");d("thickness");f._rangesliderAutorange=d("autorange",!f.isValidRange(c.range));d("range");var y=r._subplots;if(y){var b=y.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===i.name2id(l)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var x=n.simpleMap(b,i.id2name);for(var _=0;_<x.length;_++){var w=x[_];v=c[w]||{};p=a.newContainer(h,w,"yaxis");var A=r[w];var k;if(v.range&&A.isValidRange(v.range)){k="fixed"}var T=g("rangemode",k);if(T!=="match"){g("range",A.range.slice())}A._rangesliderAutorange=T==="auto"}}h._input=c}},{"../../lib":445,"../../plot_api/plot_template":482,"../../plots/cartesian/axis_ids":495,"./attributes":395,"./oppaxis_attributes":401}],399:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var s=e("../drawing");var l=e("../color");var u=e("../titles");var f=e("../../plots/cartesian");var c=e("../../plots/cartesian/axes");var h=e("../dragelement");var d=e("../../lib/setcursor");var v=e("./constants");t.exports=function(e){var t=e._fullLayout,r=p(t);function a(e){return e._name}var o=t._infolayer.selectAll("g."+v.containerClassName).data(r,a);o.enter().append("g").classed(v.containerClassName,true).attr("pointer-events","all");o.exit().each(function(e){var r=e[v.name];t._topdefs.select("#"+r._clipId).remove()}).remove();if(r.length===0)return;o.each(function(r){var a=n.select(this),o=r[v.name],s=t[c.id2name(r.anchor)],l=o[c.id2name(r.anchor)];if(o.range){var f=o.range;var h=r.range;f[0]=r.l2r(Math.min(r.r2l(f[0]),r.r2l(h[0])));f[1]=r.l2r(Math.max(r.r2l(f[1]),r.r2l(h[1])));o._input.range=f.slice()}r.cleanRange("rangeslider.range");var d=t.margin;var p=t._size;var m=r.domain;var w=(r._boundingBox||{}).height||0;var M=Infinity;var E=c.getSubplots(e,r);for(var C=0;C<E.length;C++){var S=c.getFromId(e,E[C].substr(E[C].indexOf("y")));M=Math.min(M,S.domain[0])}o._id=v.name+r._id;o._clipId=o._id+"-"+t._uid;o._width=p.w*(m[1]-m[0]);o._height=(t.height-d.b-d.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2);var L=Math.round(d.l+p.w*m[0]);var O=Math.round(p.t+p.h*(1-M)+w+o._offsetShift+v.extraPad);a.attr("transform","translate("+L+","+O+")");var I=r.r2l(o.range[0]),D=r.r2l(o.range[1]),R=D-I;o.p2d=function(e){return e/o._width*R+I};o.d2p=function(e){return(e-I)/R*o._width};o._rl=[I,D];if(l.rangemode!=="match"){var P=s.r2l(l.range[0]),z=s.r2l(l.range[1]),F=z-P;o.d2pOppAxis=function(e){return(e-P)/F*o._height}}a.call(b,e,r,o).call(x,e,r,o).call(_,e,r,o).call(A,e,r,o,l).call(k,e,r,o).call(T,e,r,o);g(a,e,r,o);y(a,e,r,o,s,l);if(r.side==="bottom"){u.draw(e,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:t._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:O+o._height+o._offsetShift+10+1.5*r.titlefont.size,"text-anchor":"middle"}})}i.autoMargin(e,o._id,{x:m[0],y:M,l:0,r:0,t:0,b:o._height+d.b+w,pad:v.extraPad+o._offsetShift*2})})};function p(e){var t=c.list({_fullLayout:e},"x",true),r=v.name,n=[];if(e._has("gl2d"))return n;for(var a=0;a<t.length;a++){var i=t[a];if(i[r]&&i[r].visible)n.push(i)}return n}function g(e,t,r,a){var i=e.select("rect."+v.slideBoxClassName).node(),s=e.select("rect."+v.grabAreaMinClassName).node(),l=e.select("rect."+v.grabAreaMaxClassName).node();e.on("mousedown",function(){var u=n.event,f=u.target,c=u.clientX,v=c-e.node().getBoundingClientRect().left,p=a.d2p(r._rl[0]),g=a.d2p(r._rl[1]);var y=h.coverSlip();y.addEventListener("mousemove",b);y.addEventListener("mouseup",x);function b(o){var u=+o.clientX-c;var h,b,x;switch(f){case i:x="ew-resize";h=p+u;b=g+u;break;case s:x="col-resize";h=p+u;b=g;break;case l:x="col-resize";h=p;b=g+u;break;default:x="ew-resize";h=v;b=v+u;break}if(b<h){var _=b;b=h;h=_}a._pixelMin=h;a._pixelMax=b;d(n.select(y),x);m(e,t,r,a)}function x(){y.removeEventListener("mousemove",b);y.removeEventListener("mouseup",x);o.removeElement(y)}})}function m(e,t,r,n){function i(e){return r.l2r(o.constrain(e,n._rl[0],n._rl[1]))}var s=i(n.p2d(n._pixelMin)),l=i(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){a.call("relayout",t,r._name+".range",[s,l])})}function y(e,t,r,n,a,i){var s=v.handleWidth/2;function l(e){return o.constrain(e,0,n._width)}function u(e){return o.constrain(e,0,n._height)}function f(e){return o.constrain(e,-s,n._width+s)}var c=l(n.d2p(r._rl[0])),h=l(n.d2p(r._rl[1]));e.select("rect."+v.slideBoxClassName).attr("x",c).attr("width",h-c);e.select("rect."+v.maskMinClassName).attr("width",c);e.select("rect."+v.maskMaxClassName).attr("x",h).attr("width",n._width-h);if(i.rangemode!=="match"){var d=n._height-u(n.d2pOppAxis(a._rl[1])),p=n._height-u(n.d2pOppAxis(a._rl[0]));e.select("rect."+v.maskMinOppAxisClassName).attr("x",c).attr("height",d).attr("width",h-c);e.select("rect."+v.maskMaxOppAxisClassName).attr("x",c).attr("y",p).attr("height",n._height-p).attr("width",h-c);e.select("rect."+v.slideBoxClassName).attr("y",d).attr("height",p-d)}var g=.5;var m=Math.round(f(c-s))-g,y=Math.round(f(h-s))+g;e.select("g."+v.grabberMinClassName).attr("transform","translate("+m+","+g+")");e.select("g."+v.grabberMaxClassName).attr("transform","translate("+y+","+g+")")}function b(e,t,r,n){var a=o.ensureSingle(e,"rect",v.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=n.borderwidth%2===0?n.borderwidth:n.borderwidth-1;var l=-n._offsetShift;var u=s.crispRound(t,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:"translate("+l+","+l+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":u})}function x(e,t,r,n){var a=t._fullLayout;var i=o.ensureSingleById(a._topdefs,"clipPath",n._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:n._width,height:n._height})}function _(e,t,r,a){var l=c.getSubplots(t,r),u=t.calcdata;var h=e.selectAll("g."+v.rangePlotClassName).data(l,o.identity);h.enter().append("g").attr("class",function(e){return v.rangePlotClassName+" "+e}).call(s.setClipUrl,a._clipId);h.order();h.exit().remove();var d;h.each(function(e,o){var s=n.select(this),l=o===0;var h=c.getFromId(t,e,"y"),v=h._name,p=a[v];var g={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:a.range.slice(),calendar:r.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};g.layout[v]={type:h.type,domain:[0,1],range:p.rangemode!=="match"?p.range.slice():h.range.slice(),calendar:h.calendar};i.supplyDefaults(g);var m=g._fullLayout.xaxis;var y=g._fullLayout[v];var b={id:e,plotgroup:s,xaxis:m,yaxis:y,isRangePlot:true};if(l)d=b;else{b.mainplot="xy";b.mainplotinfo=d}f.rangePlot(t,b,w(u,e))})}function w(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n],i=a[0].trace;if(i.xaxis+i.yaxis===t){r.push(a)}}return r}function A(e,t,r,n,a){var i=o.ensureSingle(e,"rect",v.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",n._height).call(l.fill,v.maskColor);var s=o.ensureSingle(e,"rect",v.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("height",n._height).call(l.fill,v.maskColor);if(a.rangemode!=="match"){var u=o.ensureSingle(e,"rect",v.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});u.attr("width",n._width).call(l.fill,v.maskOppAxisColor);var f=o.ensureSingle(e,"rect",v.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});f.attr("width",n._width).style("border-top",v.maskOppBorder).call(l.fill,v.maskOppAxisColor)}}function k(e,t,r,n){if(t._context.staticPlot)return;var a=o.ensureSingle(e,"rect",v.slideBoxClassName,function(e){e.attr({y:0,cursor:v.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:n._height,fill:v.slideBoxFill})}function T(e,t,r,n){var a=o.ensureSingle(e,"g",v.grabberMinClassName);var i=o.ensureSingle(e,"g",v.grabberMaxClassName);var s={x:0,width:v.handleWidth,rx:v.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":v.handleStrokeWidth,"shape-rendering":"crispEdges"};var u={y:Math.round(n._height/4),height:Math.round(n._height/2)};var f=o.ensureSingle(a,"rect",v.handleMinClassName,function(e){e.attr(s)});f.attr(u);var c=o.ensureSingle(i,"rect",v.handleMaxClassName,function(e){e.attr(s)});c.attr(u);if(t._context.staticPlot)return;var h={width:v.grabAreaWidth,x:0,y:0,fill:v.grabAreaFill,cursor:v.grabAreaCursor};var d=o.ensureSingle(a,"rect",v.grabAreaMinClassName,function(e){e.attr(h)});d.attr("height",n._height);var p=o.ensureSingle(i,"rect",v.grabAreaMaxClassName,function(e){e.attr(h)});p.attr("height",n._height)}},{"../../lib":445,"../../lib/setcursor":465,"../../plots/cartesian":503,"../../plots/cartesian/axes":492,"../../plots/plots":528,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"../titles":414,"./constants":397,d3:86}],400:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":445,"./attributes":395,"./calc_autorange":396,"./defaults":398,"./draw":399,"./oppaxis_attributes":401}],401:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],402:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;t.exports=s("shape",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:o({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calcIfAutorange+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":436,"../../plot_api/plot_template":482,"../../traces/scatter/attributes":597,"../annotations/attributes":308,"../drawing/attributes":347}],403:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("./constants");var o=e("./helpers");t.exports=function e(t){var r=t._fullLayout,o=n.filterVisible(r.shapes);if(!o.length||!t._fullData.length)return;for(var u=0;u<o.length;u++){var c=o[u];var h,d;if(c.xref!=="paper"){var v=c.xsizemode==="pixel"?c.xanchor:c.x0,p=c.xsizemode==="pixel"?c.xanchor:c.x1;h=a.getFromId(t,c.xref);d=f(h,v,p,c.path,i.paramIsX);if(d)a.expand(h,d,s(c))}if(c.yref!=="paper"){var g=c.ysizemode==="pixel"?c.yanchor:c.y0,m=c.ysizemode==="pixel"?c.yanchor:c.y1;h=a.getFromId(t,c.yref);d=f(h,g,m,c.path,i.paramIsY);if(d)a.expand(h,d,l(c))}}};function s(e){return u(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function l(e){return u(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function u(e,t,r,a,s,l){var u=e/2,f=l;if(t==="pixel"){var c=s?o.extractPathCoords(s,l?i.paramIsY:i.paramIsX):[r,a];var h=n.aggNums(Math.max,null,c),d=n.aggNums(Math.min,null,c),v=d<0?Math.abs(d)+u:u,p=h>0?h+u:u;return{ppad:u,ppadplus:f?v:p,ppadminus:f?p:v}}else{return{ppad:u}}}function f(e,t,r,n,a){var s=e.type==="category"?e.r2c:e.d2c;if(t!==undefined)return[s(t),s(r)];if(!n)return;var l=Infinity,u=-Infinity,f=n.match(i.segmentRE),c,h,d,v,p;if(e.type==="date")s=o.decodeDate(s);for(c=0;c<f.length;c++){h=f[c];d=a[h.charAt(0)].drawn;if(d===undefined)continue;v=f[c].substr(1).match(i.paramRE);if(!v||v.length<d)continue;p=s(v[d]);if(p<l)l=p;if(p>u)u=p}if(u>=l)return[l,u]}},{"../../lib":445,"../../plots/cartesian/axes":492,"./constants":404,"./helpers":407}],404:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],405:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var s=e("./helpers");t.exports=function e(t,r){i(t,r,{name:"shapes",handleItemDefaults:l})};function l(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var l=i("visible");if(!l)return;i("layer");i("opacity");i("fillcolor");i("line.color");i("line.width");i("line.dash");var u=e.path?"path":"rect",f=i("type",u),c=i("xsizemode"),h=i("ysizemode");var d=["x","y"];for(var v=0;v<2;v++){var p=d[v],g=p+"anchor",m=p==="x"?c:h,y={_fullLayout:r},b,x,_;var w=a.coerceRef(e,t,y,p,"","paper");if(w!=="paper"){b=a.getFromId(y,w);_=s.rangeToShapePosition(b);x=s.shapePositionToRange(b)}else{x=_=n.identity}if(f!=="path"){var A=.25,k=.75;var T=p+"0",M=p+"1",E=e[T],C=e[M];e[T]=x(e[T],true);e[M]=x(e[M],true);if(m==="pixel"){i(T,0);i(M,10)}else{a.coercePosition(t,y,i,w,T,A);a.coercePosition(t,y,i,w,M,k)}t[T]=_(t[T]);t[M]=_(t[M]);e[T]=E;e[M]=C}if(m==="pixel"){var S=e[g];e[g]=x(e[g],true);a.coercePosition(t,y,i,w,g,.25);t[g]=_(t[g]);e[g]=S}}if(f==="path"){i("path")}else{n.noneOrAll(e,t,["x0","x1","y0","y1"])}}},{"../../lib":445,"../../plots/array_container_defaults":488,"../../plots/cartesian/axes":492,"./attributes":402,"./helpers":407}],406:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../color");var s=e("../drawing");var l=e("../../plot_api/plot_template").arrayEditor;var u=e("../dragelement");var f=e("../../lib/setcursor");var c=e("./constants");var h=e("./helpers");t.exports={draw:d,drawOne:v};function d(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var n=t._plots[r].shapelayer;if(n)n.selectAll("path").remove()}for(var a=0;a<t.shapes.length;a++){if(t.shapes[a].visible){v(e,a)}}}function v(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=e._fullLayout.shapes[t]||{};if(!r._input||r.visible===false)return;if(r.layer!=="below"){i(e._fullLayout._shapeUpperLayer)}else if(r.xref==="paper"||r.yref==="paper"){i(e._fullLayout._shapeLowerLayer)}else{var n=e._fullLayout._plots[r.xref+r.yref];if(n){var a=n.mainplotinfo||n;i(a.shapelayer)}else{i(e._fullLayout._shapeLowerLayer)}}function i(n){var a={"data-index":t,"fill-rule":"evenodd",d:m(e,r)},i=r.line.width?r.line.color:"rgba(0,0,0,0)";var l=n.append("path").attr(a).style("opacity",r.opacity).call(o.stroke,i).call(o.fill,r.fillcolor).call(s.dashLine,r.line.dash,r.line.width);p(l,e,r);if(e._context.edits.shapePosition)g(e,l,r,t,n)}}function p(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"");e.call(s.setClipUrl,n?"clip"+t._fullLayout._uid+n:null)}function g(e,t,r,o,d){var v=10;var g=10;var y=r.xsizemode==="pixel";var x=r.ysizemode==="pixel";var _=r.type==="line";var w=r.type==="path";var A=l(e.layout,"shapes",r);var k=A.modifyItem;var T,M,E,C,S,L;var O,I,D,R,P,z,F,B;var N;var j=i.getFromId(e,r.xref),U=i.getFromId(e,r.yref),V=h.getDataToPixel(e,j),H=h.getDataToPixel(e,U,true),q=h.getPixelToData(e,j),G=h.getPixelToData(e,U,true);var X=Z();var W={element:X.node(),gd:e,prepFn:$,doneFn:K,clickFn:ee},Y;u.init(W);X.node().onmousemove=Q;function Z(){return _?J():t}function J(){var e=10,n=Math.max(r.line.width,e);var a=d.append("g").attr("data-index",o);a.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":n,"stroke-opacity":"0"});var i={"fill-opacity":"0"};var s=n/2>e?n/2:e;a.append("circle").attr({"data-line-point":"start-point",cx:y?V(r.xanchor)+r.x0:V(r.x0),cy:x?H(r.yanchor)-r.y0:H(r.y0),r:s}).style(i).classed("cursor-grab",true);a.append("circle").attr({"data-line-point":"end-point",cx:y?V(r.xanchor)+r.x1:V(r.x1),cy:x?H(r.yanchor)-r.y1:H(r.y1),r:s}).style(i).classed("cursor-grab",true);return a}function Q(e){if(_){if(e.target.tagName==="path"){Y="move"}else{Y=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var r=W.element.getBoundingClientRect();var n=r.right-r.left,a=r.bottom-r.top,i=e.clientX-r.left,o=e.clientY-r.top,s=!w&&n>v&&a>g&&!e.shiftKey?u.getCursor(i/n,1-o/a):"move";f(t,s);Y=s.split("-")[0]}}function $(n){if(y){S=V(r.xanchor)}if(x){L=H(r.yanchor)}if(r.type==="path"){N=r.path}else{T=y?r.x0:V(r.x0);M=x?r.y0:H(r.y0);E=y?r.x1:V(r.x1);C=x?r.y1:H(r.y1)}if(T<E){D=T;F="x0";R=E;B="x1"}else{D=E;F="x1";R=T;B="x0"}if(!x&&M<C||x&&M>C){O=M;P="y0";I=C;z="y1"}else{O=C;P="y1";I=M;z="y0"}Q(n);ne(d,r);ie(t,r,e);W.moveFn=Y==="move"?te:re}function K(){f(t);ae(d);p(t,e,r);n.call("relayout",e,A.getUpdateObj())}function ee(){ae(d)}function te(n,a){if(r.type==="path"){var i=function(e){return e},o=i,s=i;if(y){k("xanchor",r.xanchor=q(S+n))}else{o=function e(t){return q(V(t)+n)};if(j&&j.type==="date")o=h.encodeDate(o)}if(x){k("yanchor",r.yanchor=G(L+a))}else{s=function e(t){return G(H(t)+a)};if(U&&U.type==="date")s=h.encodeDate(s)}k("path",r.path=b(N,o,s))}else{if(y){k("xanchor",r.xanchor=q(S+n))}else{k("x0",r.x0=q(T+n));k("x1",r.x1=q(E+n))}if(x){k("yanchor",r.yanchor=G(L+a))}else{k("y0",r.y0=G(M+a));k("y1",r.y1=G(C+a))}}t.attr("d",m(e,r));ne(d,r)}function re(n,a){if(w){var i=function(e){return e},o=i,s=i;if(y){k("xanchor",r.xanchor=q(S+n))}else{o=function e(t){return q(V(t)+n)};if(j&&j.type==="date")o=h.encodeDate(o)}if(x){k("yanchor",r.yanchor=G(L+a))}else{s=function e(t){return G(H(t)+a)};if(U&&U.type==="date")s=h.encodeDate(s)}k("path",r.path=b(N,o,s))}else if(_){if(Y==="resize-over-start-point"){var l=T+n;var u=x?M-a:M+a;k("x0",r.x0=y?l:q(l));k("y0",r.y0=x?u:G(u))}else if(Y==="resize-over-end-point"){var f=E+n;var c=x?C-a:C+a;k("x1",r.x1=y?f:q(f));k("y1",r.y1=x?c:G(c))}}else{var p=~Y.indexOf("n")?O+a:O,A=~Y.indexOf("s")?I+a:I,X=~Y.indexOf("w")?D+n:D,W=~Y.indexOf("e")?R+n:R;if(~Y.indexOf("n")&&x)p=O-a;if(~Y.indexOf("s")&&x)A=I-a;if(!x&&A-p>g||x&&p-A>g){k(P,r[P]=x?p:G(p));k(z,r[z]=x?A:G(A))}if(W-X>v){k(F,r[F]=y?X:q(X));k(B,r[B]=y?W:q(W))}}t.attr("d",m(e,r));ne(d,r)}function ne(e,t){if(y||x){r()}function r(){var r=t.type!=="path";var n=e.selectAll(".visual-cue").data([0]);var i=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",true);var o=V(y?t.xanchor:a.midRange(r?[t.x0,t.x1]:h.extractPathCoords(t.path,c.paramIsX)));var s=H(x?t.yanchor:a.midRange(r?[t.y0,t.y1]:h.extractPathCoords(t.path,c.paramIsY)));o=h.roundPositionForSharpStrokeRendering(o,i);s=h.roundPositionForSharpStrokeRendering(s,i);if(y&&x){var l="M"+(o-1-i)+","+(s-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",l)}else if(y){var u="M"+(o-1-i)+","+(s-9-i)+"v18 h2 v-18 Z";n.attr("d",u)}else{var f="M"+(o-9-i)+","+(s-1-i)+"h18 v2 h-18 Z";n.attr("d",f)}}}function ae(e){e.selectAll(".visual-cue").remove()}function ie(e,t,r){var n=t.xref,a=t.yref,o=i.getFromId(r,n),l=i.getFromId(r,a);var u="";if(n!=="paper"&&!o.autorange)u+=n;if(a!=="paper"&&!l.autorange)u+=a;e.call(s.setClipUrl,u?"clip"+r._fullLayout._uid+u:null)}}function m(e,t){var r=t.type,n=i.getFromId(e,t.xref),a=i.getFromId(e,t.yref),o=e._fullLayout._size,s,l,u,f,c,d,v,p;if(n){s=h.shapePositionToRange(n);l=function(e){return n._offset+n.r2p(s(e,true))}}else{l=function(e){return o.l+o.w*e}}if(a){u=h.shapePositionToRange(a);f=function(e){return a._offset+a.r2p(u(e,true))}}else{f=function(e){return o.t+o.h*(1-e)}}if(r==="path"){if(n&&n.type==="date")l=h.decodeDate(l);if(a&&a.type==="date")f=h.decodeDate(f);return y(t,l,f)}if(t.xsizemode==="pixel"){var g=l(t.xanchor);c=g+t.x0;d=g+t.x1}else{c=l(t.x0);d=l(t.x1)}if(t.ysizemode==="pixel"){var m=f(t.yanchor);v=m-t.y0;p=m-t.y1}else{v=f(t.y0);p=f(t.y1)}if(r==="line")return"M"+c+","+v+"L"+d+","+p;if(r==="rect")return"M"+c+","+v+"H"+d+"V"+p+"H"+c+"Z";var b=(c+d)/2,x=(v+p)/2,_=Math.abs(b-c),w=Math.abs(x-v),A="A"+_+","+w,k=b+_+","+x,T=b+","+(x-w);return"M"+k+A+" 0 1,1 "+T+A+" 0 0,1 "+k+"Z"}function y(e,t,r){var n=e.path,i=e.xsizemode,o=e.ysizemode,s=e.xanchor,l=e.yanchor;return n.replace(c.segmentRE,function(e){var n=0,u=e.charAt(0),f=c.paramIsX[u],h=c.paramIsY[u],d=c.numParams[u];var v=e.substr(1).replace(c.paramRE,function(e){if(f[n]){if(i==="pixel")e=t(s)+Number(e);else e=t(e)}else if(h[n]){if(o==="pixel")e=r(l)-Number(e);else e=r(e)}n++;if(n>d)e="X";return e});if(n>d){v=v.replace(/[\s,]*X.*/,"");a.log("Ignoring extra params in segment "+e)}return u+v})}function b(e,t,r){return e.replace(c.segmentRE,function(e){var n=0,a=e.charAt(0),i=c.paramIsX[a],o=c.paramIsY[a],s=c.numParams[a];var l=e.substr(1).replace(c.paramRE,function(e){if(n>=s)return e;if(i[n])e=t(e);else if(o[n])e=r(e);n++;return e});return a+l})}},{"../../lib":445,"../../lib/setcursor":465,"../../plot_api/plot_template":482,"../../plots/cartesian/axes":492,"../../registry":536,"../color":323,"../dragelement":345,"../drawing":348,"./constants":404,"./helpers":407}],407:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../lib");r.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};r.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};r.decodeDate=function(e){return function(t){if(t.replace)t=t.replace("_"," ");return e(t)}};r.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};r.extractPathCoords=function(e,t){var r=[];var i=e.match(n.segmentRE);i.forEach(function(e){var i=t[e.charAt(0)].drawn;if(i===undefined)return;var o=e.substr(1).match(n.paramRE);if(!o||o.length<i)return;r.push(a.cleanNumber(o[i]))});return r};r.getDataToPixel=function(e,t,n){var a=e._fullLayout._size,i;if(t){var o=r.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=r.decodeDate(i)}else if(n){i=function(e){return a.t+a.h*(1-e)}}else{i=function(e){return a.l+a.w*e}}return i};r.getPixelToData=function(e,t,n){var a=e._fullLayout._size,i;if(t){var o=r.rangeToShapePosition(t);i=function(e){return o(t.p2r(e-t._offset))}}else if(n){i=function(e){return 1-(e-a.t)/a.h}}else{i=function(e){return(e-a.l)/a.w}}return i};r.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var n=Math.round(e);return r?n+.5:n}},{"../../lib":445,"./constants":404}],408:[function(e,t,r){"use strict";var n=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne}},{"../../plots/cartesian/include_components":502,"./attributes":402,"./calc_autorange":403,"./defaults":405,"./draw":406}],409:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/animation_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=e("./constants");var f=l("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(l("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:f,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i({},a,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":436,"../../plot_api/edit_types":475,"../../plot_api/plot_template":482,"../../plots/animation_attributes":487,"../../plots/font_attributes":518,"../../plots/pad_attributes":527,"./constants":410}],410:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],411:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var s=o.name;var l=i.steps;t.exports=function e(t,r){a(t,r,{name:s,handleItemDefaults:u})};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var s=a(e,t,{name:"steps",handleItemDefaults:f});var l=0;for(var u=0;u<s.length;u++){if(s[u].visible)l++}var c;if(l<2)c=t.visible=false;else c=o("visible");if(!c)return;t._stepCount=l;var h=t._visibleSteps=n.filterVisible(s);var d=o("active");if(!(s[d]||{}).visible)t.active=h[0]._index;o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("len");o("lenmode");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);var v=o("currentvalue.visible");if(v){o("currentvalue.xanchor");o("currentvalue.prefix");o("currentvalue.suffix");o("currentvalue.offset");n.coerceFont(o,"currentvalue.font",t.font)}o("transition.duration");o("transition.easing");o("bgcolor");o("activebgcolor");o("bordercolor");o("borderwidth");o("ticklen");o("tickwidth");o("tickcolor");o("minorticklen")}function f(e,t){function r(r,a){return n.coerce(e,t,l,r,a)}var a;if(e.method!=="skip"&&!Array.isArray(e.args)){a=t.visible=false}else a=r("visible");if(a){r("method");r("args");var i=r("label","step-"+t._index);r("value",i);r("execute")}}},{"../../lib":445,"../../plots/array_container_defaults":488,"./attributes":409,"./constants":410}],412:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var s=e("../../lib");var l=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var f=e("../../plot_api/plot_template").arrayEditor;var c=e("./constants");var h=e("../../constants/alignment");var d=h.LINE_SPACING;var v=h.FROM_TL;var p=h.FROM_BR;t.exports=function e(t){var r=t._fullLayout,i=m(r,t);var o=r._infolayer.selectAll("g."+c.containerClassName).data(i.length>0?[0]:[]);o.enter().append("g").classed(c.containerClassName,true).style("cursor","ew-resize");function s(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}a.autoMargin(t,g(e))}o.exit().each(function(){n.select(this).selectAll("g."+c.groupClassName).each(s)}).remove();if(i.length===0)return;var l=o.selectAll("g."+c.groupClassName).data(i,y);l.enter().append("g").classed(c.groupClassName,true);l.exit().each(s).remove();for(var u=0;u<i.length;u++){var f=i[u];b(t,f)}l.each(function(e){var r=n.select(this);S(e);a.manageCommandObserver(t,e,e._visibleSteps,function(e){var n=r.data()[0];if(n.active===e.index)return;if(n._dragging)return;M(t,r,n,e.index,false,true)});x(t,n.select(this),e)})};function g(e){return c.autoMarginIdRoot+e._index}function m(e,t){var r=e[c.name],n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.visible)continue;i._gd=t;n.push(i)}return n}function y(e){return e._index}function b(e,t){var r=o.tester.selectAll("g."+c.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(c.labelGroupClass,true);var i=0;var s=0;r.each(function(e){var r=n.select(this);var a=A(r,{step:e},t);var l=a.node();if(l){var u=o.bBox(l);s=Math.max(s,u.height);i=Math.max(i,u.width)}});r.remove();var f=t._dims={};f.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var h=e._fullLayout._size;f.lx=h.l+h.w*t.x;f.ly=h.t+h.h*(1-t.y);if(t.lenmode==="fraction"){f.outerLength=Math.round(h.w*t.len)}else{f.outerLength=t.len}f.inputAreaStart=0;f.inputAreaLength=Math.round(f.outerLength-t.pad.l-t.pad.r);var d=f.inputAreaLength-2*c.stepInset;var m=d/(t._stepCount-1);var y=i+c.labelPadding;f.labelStride=Math.max(1,Math.ceil(y/m));f.labelHeight=s;f.currentValueMaxWidth=0;f.currentValueHeight=0;f.currentValueTotalHeight=0;f.currentValueMaxLines=1;if(t.currentvalue.visible){var b=o.tester.append("g");r.each(function(e){var r=_(b,t,e.label);var n=r.node()&&o.bBox(r.node())||{width:0,height:0};var a=l.lineCount(r);f.currentValueMaxWidth=Math.max(f.currentValueMaxWidth,Math.ceil(n.width));f.currentValueHeight=Math.max(f.currentValueHeight,Math.ceil(n.height));f.currentValueMaxLines=Math.max(f.currentValueMaxLines,a)});f.currentValueTotalHeight=f.currentValueHeight+t.currentvalue.offset;b.remove()}f.height=f.currentValueTotalHeight+c.tickOffset+t.ticklen+c.labelOffset+f.labelHeight+t.pad.t+t.pad.b;var x="left";if(u.isRightAnchor(t)){f.lx-=f.outerLength;x="right"}if(u.isCenterAnchor(t)){f.lx-=f.outerLength/2;x="center"}var w="top";if(u.isBottomAnchor(t)){f.ly-=f.height;w="bottom"}if(u.isMiddleAnchor(t)){f.ly-=f.height/2;w="middle"}f.outerLength=Math.ceil(f.outerLength);f.height=Math.ceil(f.height);f.lx=Math.round(f.lx);f.ly=Math.round(f.ly);var k={y:t.y,b:f.height*p[w],t:f.height*v[w]};if(t.lenmode==="fraction"){k.l=0;k.xl=t.x-t.len*v[x];k.r=0;k.xr=t.x+t.len*p[x]}else{k.x=t.x;k.l=f.outerLength*v[x];k.r=f.outerLength*p[x]}a.autoMargin(e,g(t),k)}function x(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(_,r).call(R,r).call(k,r).call(C,r).call(D,e,r).call(w,e,r);var n=r._dims;o.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t);t.call(L,r,false);t.call(_,r)}function _(e,t,r){if(!t.currentvalue.visible)return;var n=t._dims;var a,i;switch(t.currentvalue.xanchor){case"right":a=n.inputAreaLength-c.currentValueInset-n.currentValueMaxWidth;i="left";break;case"center":a=n.inputAreaLength*.5;i="middle";break;default:a=c.currentValueInset;i="left"}var u=s.ensureSingle(e,"text",c.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":i,"data-notex":1})});var f=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){f+=r}else{var h=t.steps[t.active].label;f+=h}if(t.currentvalue.suffix){f+=t.currentvalue.suffix}u.call(o.font,t.currentvalue.font).text(f).call(l.convertToTspans,t._gd);var v=l.lineCount(u);var p=(n.currentValueMaxLines+1-v)*t.currentvalue.font.size*d;l.positionText(u,a,p);return u}function w(e,t,r){var n=s.ensureSingle(e,"rect",c.gripRectClass,function(n){n.call(E,t,e,r).style("pointer-events","all")});n.attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(i.stroke,r.bordercolor).call(i.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function A(e,t,r){var n=s.ensureSingle(e,"text",c.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":"middle","data-notex":1})});n.call(o.font,r.font).text(t.step.label).call(l.convertToTspans,r._gd);return n}function k(e,t){var r=s.ensureSingle(e,"g",c.labelsClass);var a=t._dims;var i=r.selectAll("g."+c.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(c.labelGroupClass,true);i.exit().remove();i.each(function(e){var r=n.select(this);r.call(A,e,t);o.setTranslate(r,O(t,e.fraction),c.tickOffset+t.ticklen+t.font.size*d+c.labelOffset+a.currentValueTotalHeight)})}function T(e,t,r,n,a){var i=Math.round(n*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){M(e,t,r,o,true,a)}}function M(e,t,r,n,i,o){var s=r.active;r.active=n;f(e.layout,c.name,r).applyUpdate("active",n);var l=r.steps[r.active];t.call(L,r,o);t.call(_,r);e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:s});if(l&&l.method&&i){if(t._nextMethod){t._nextMethod.step=l;t._nextMethod.doCallback=i;t._nextMethod.doTransition=o}else{t._nextMethod={step:l,doCallback:i,doTransition:o};t._nextMethodRaf=window.requestAnimationFrame(function(){var r=t._nextMethod.step;if(!r.method)return;if(r.execute){a.executeAPICommand(e,r.method,r.args)}t._nextMethod=null;t._nextMethodRaf=null})}}}function E(e,t,r){var a=r.node();var o=n.select(t);function s(){return r.data()[0]}e.on("mousedown",function(){var e=s();t.emit("plotly_sliderstart",{slider:e});var l=r.select("."+c.gripRectClass);n.event.stopPropagation();n.event.preventDefault();l.call(i.fill,e.activebgcolor);var u=I(e,n.mouse(a)[0]);T(t,r,e,u,true);e._dragging=true;o.on("mousemove",function(){var e=s();var i=I(e,n.mouse(a)[0]);T(t,r,e,i,false)});o.on("mouseup",function(){var e=s();e._dragging=false;l.call(i.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function C(e,t){var r=e.selectAll("rect."+c.tickRectClass).data(t._visibleSteps);var a=t._dims;r.enter().append("rect").classed(c.tickRectClass,true);r.exit().remove();r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"});r.each(function(e,r){var s=r%a.labelStride===0;var l=n.select(this);l.attr({height:s?t.ticklen:t.minorticklen}).call(i.fill,s?t.tickcolor:t.tickcolor);o.setTranslate(l,O(t,r/(t._stepCount-1))-.5*t.tickwidth,(s?c.tickOffset:c.minorTickOffset)+a.currentValueTotalHeight)})}function S(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var n=0;n<r;n+=t.labelStride){t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}}function L(e,t,r){var n=e.select("rect."+c.gripRectClass);var a=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){a=i;break}}var o=O(t,a/(t._stepCount-1));if(t._invokingCommand)return;var s=n;if(r&&t.transition.duration>0){s=s.transition().duration(t.transition.duration).ease(t.transition.easing)}s.attr("transform","translate("+(o-c.gripWidth*.5)+","+t._dims.currentValueTotalHeight+")")}function O(e,t){var r=e._dims;return r.inputAreaStart+c.stepInset+(r.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,t))}function I(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-c.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*c.stepInset-2*r.inputAreaStart)))}function D(e,t,r){var n=r._dims;var a=s.ensureSingle(e,"rect",c.railTouchRectClass,function(n){n.call(E,t,e,r).style("pointer-events","all")});a.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,c.tickOffset+r.ticklen+n.labelHeight)}).call(i.fill,r.bgcolor).attr("opacity",0);o.setTranslate(a,0,n.currentValueTotalHeight)}function R(e,t){var r=t._dims;var n=r.inputAreaLength-c.railInset*2;var a=s.ensureSingle(e,"rect",c.railRectClass);a.attr({width:n,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");o.setTranslate(a,c.railInset,(r.inputAreaWidth-c.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":421,"../../lib":445,"../../lib/svg_text_utils":469,"../../plot_api/plot_template":482,"../../plots/plots":528,"../color":323,"../drawing":348,"../legend/anchor_utils":375,"./constants":410,d3:86}],413:[function(e,t,r){"use strict";var n=e("./constants");t.exports={moduleType:"component",name:n.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":409,"./constants":410,"./defaults":411,"./draw":412}],414:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var s=e("../../lib");var l=e("../drawing");var u=e("../color");var f=e("../../lib/svg_text_utils");var c=e("../../constants/interactions");t.exports={draw:d};var h=/ [XY][0-9]* /;function d(e,t,r){var d=r.propContainer;var v=r.propName;var p=r.placeholder;var g=r.traceIndex;var m=r.avoid||{};var y=r.attributes;var b=r.transform;var x=r.containerGroup;var _=e._fullLayout;var w=d.titlefont||{};var A=w.family;var k=w.size;var T=w.color;var M=1;var E=false;var C=(d.title||"").trim();var S;if(v==="title")S="titleText";else if(v.indexOf("axis")!==-1)S="axisTitleText";else if(v.indexOf("colorbar"!==-1))S="colorbarTitleText";var L=e._context.edits[S];if(C==="")M=0;else if(C.replace(h," % ")===p.replace(h," % ")){M=.2;E=true;if(!L)C=""}var O=C||L;if(!x){x=s.ensureSingle(_._infolayer,"g","g-"+t)}var I=x.selectAll("text").data(O?[0]:[]);I.enter().append("text");I.text(C).attr("class",t);I.exit().remove();if(!O)return x;function D(e){s.syncOrAsync([R,P],e)}function R(t){var r;if(b){r="";if(b.rotate){r+="rotate("+[b.rotate,y.x,y.y]+")"}if(b.offset){r+="translate(0, "+b.offset+")"}}else{r=null}t.attr("transform",r);t.style({"font-family":A,"font-size":n.round(k,2)+"px",fill:u.rgb(T),opacity:M*u.opacity(T),"font-weight":i.fontWeight}).attr(y).call(f.convertToTspans,e);return i.previousPromises(e)}function P(e){var t=n.select(e.node().parentNode);if(m&&m.selection&&m.side&&C){t.attr("transform",null);var r=0;var i={left:"right",right:"left",top:"bottom",bottom:"top"}[m.side];var o=["left","top"].indexOf(m.side)!==-1?-1:1;var u=a(m.pad)?m.pad:2;var f=l.bBox(t.node());var c={left:0,top:0,right:_.width,bottom:_.height};var h=m.maxShift||(c[m.side]-f[m.side])*(m.side==="left"||m.side==="top"?-1:1);if(h<0)r=h;else{var d=m.offsetLeft||0;var v=m.offsetTop||0;f.left-=d;f.right-=d;f.top-=v;f.bottom-=v;m.selection.each(function(){var e=l.bBox(this);if(s.bBoxIntersect(f,e,u)){r=Math.max(r,o*(e[m.side]-f[i])+u)}});r=Math.min(h,r)}if(r>0||h<0){var p={left:[-r,0],right:[r,0],top:[0,-r],bottom:[0,r]}[m.side];t.attr("transform","translate("+p+")")}}}I.call(D);function z(){M=0;E=true;I.text(p).on("mouseover.opacity",function(){n.select(this).transition().duration(c.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(c.HIDE_PLACEHOLDER).style("opacity",0)})}if(L){if(!C)z();else I.on(".opacity",null);I.call(f.makeEditable,{gd:e}).on("edit",function(t){if(g!==undefined){o.call("restyle",e,v,t,g)}else{o.call("relayout",e,v,t)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(e){this.text(e||" ").call(f.positionText,y.x,y.y)})}I.classed("js-placeholder",E);return x}},{"../../constants/interactions":423,"../../lib":445,"../../lib/svg_text_utils":469,"../../plots/plots":528,"../../registry":536,"../color":323,"../drawing":348,d3:86,"fast-isnumeric":151}],415:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var s=e("../../plots/pad_attributes");var l=e("../../plot_api/plot_template").templatedArray;var u=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i({},s,{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":436,"../../plot_api/edit_types":475,"../../plot_api/plot_template":482,"../../plots/font_attributes":518,"../../plots/pad_attributes":527,"../color/attributes":322}],416:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],417:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var s=o.name;var l=i.buttons;t.exports=function e(t,r){var n={name:s,handleItemDefaults:u};a(t,r,n)};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var s=a(e,t,{name:"buttons",handleItemDefaults:f});var l=o("visible",s.length>0);if(!l)return;o("active");o("direction");o("type");o("showactive");o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor);o("bordercolor");o("borderwidth")}function f(e,t){function r(r,a){return n.coerce(e,t,l,r,a)}var a=r("visible",e.method==="skip"||Array.isArray(e.args));if(a){r("method");r("args");r("label");r("execute")}}},{"../../lib":445,"../../plots/array_container_defaults":488,"./attributes":415,"./constants":416}],418:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var s=e("../../lib");var l=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var f=e("../../plot_api/plot_template").arrayEditor;var c=e("../../constants/alignment").LINE_SPACING;var h=e("./constants");var d=e("./scrollbox");t.exports=function e(t){var r=t._fullLayout,i=s.filterVisible(r[h.name]);function o(e){a.autoMargin(t,S(e))}var l=r._menulayer.selectAll("g."+h.containerClassName).data(i.length>0?[0]:[]);l.enter().append("g").classed(h.containerClassName,true).style("cursor","pointer");l.exit().each(function(){n.select(this).selectAll("g."+h.headerGroupClassName).each(o)}).remove();if(i.length===0)return;var u=l.selectAll("g."+h.headerGroupClassName).data(i,v);u.enter().append("g").classed(h.headerGroupClassName,true);var f=s.ensureSingle(l,"g",h.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var c=0;c<i.length;c++){var p=i[c];C(t,p)}var x="updatemenus"+r._uid,_=new d(t,f,x);if(u.enter().size()){f.node().parentNode.appendChild(f.node());f.call(O)}u.exit().each(function(e){f.call(O);o(e)}).remove();u.each(function(e){var r=n.select(this);var i=e.type==="dropdown"?f:null;a.manageCommandObserver(t,e,e.buttons,function(n){m(t,e,e.buttons[n.index],r,i,_,n.index,true)});if(e.type==="dropdown"){y(t,r,f,_,e);if(g(f,e)){b(t,r,f,_,e)}}else{b(t,r,null,null,e)}})};function v(e){return e._index}function p(e){return+e.attr(h.menuIndexAttrName)===-1}function g(e,t){return+e.attr(h.menuIndexAttrName)===t._index}function m(e,t,r,n,a,i,o,s){t.active=o;f(e.layout,h.name,t).applyUpdate("active",o);if(t.type==="buttons"){b(e,n,null,null,t)}else if(t.type==="dropdown"){a.attr(h.menuIndexAttrName,"-1");y(e,n,a,i,t);if(!s){b(e,n,a,i,t)}}}function y(e,t,r,n,a){var i=s.ensureSingle(t,"g",h.headerClassName,function(e){e.style("pointer-events","all")});var l=a._dims;var u=a.active;var f=a.buttons[u]||h.blankHeaderOpts;var c={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0};var d={width:l.headerWidth,height:l.headerHeight};i.call(w,a,f,e).call(L,a,c,d);var v=s.ensureSingle(t,"text",h.headerArrowClassName,function(e){e.classed("user-select-none",true).attr("text-anchor","end").call(o.font,a.font).text(h.arrowSymbol[a.direction])});v.attr({x:l.headerWidth-h.arrowOffsetX+a.pad.l,y:l.headerHeight/2+h.textOffsetY+a.pad.t});i.on("click",function(){r.call(O,String(g(r,a)?-1:a._index));b(e,t,r,n,a)});i.on("mouseover",function(){i.call(M)});i.on("mouseout",function(){i.call(E,a)});o.setTranslate(t,l.lx,l.ly)}function b(e,t,r,i,o){if(!r){r=t;r.attr("pointer-events","all")}var l=!p(r)||o.type==="buttons"?o.buttons:[];var u=o.type==="dropdown"?h.dropdownButtonClassName:h.buttonClassName;var f=r.selectAll("g."+u).data(s.filterVisible(l));var c=f.enter().append("g").classed(u,true);var d=f.exit();if(o.type==="dropdown"){c.attr("opacity","0").transition().attr("opacity","1");d.transition().attr("opacity","0").remove()}else{d.remove()}var v=0;var g=0;var y=o._dims;var b=["up","down"].indexOf(o.direction)!==-1;if(o.type==="dropdown"){if(b){g=y.headerHeight+h.gapButtonHeader}else{v=y.headerWidth+h.gapButtonHeader}}if(o.type==="dropdown"&&o.direction==="up"){g=-h.gapButtonHeader+h.gapButton-y.openHeight}if(o.type==="dropdown"&&o.direction==="left"){v=-h.gapButtonHeader+h.gapButton-y.openWidth}var A={x:y.lx+v+o.pad.l,y:y.ly+g+o.pad.t,yPad:h.gapButton,xPad:h.gapButton,index:0};var k={l:A.x+o.borderwidth,t:A.y+o.borderwidth};f.each(function(s,l){var u=n.select(this);u.call(w,o,s,e).call(L,o,A);u.on("click",function(){if(n.event.defaultPrevented)return;m(e,o,s,t,r,i,l);if(s.execute){a.executeAPICommand(e,s.method,s.args)}e.emit("plotly_buttonclicked",{menu:o,button:s,active:o.active})});u.on("mouseover",function(){u.call(M)});u.on("mouseout",function(){u.call(E,o);f.call(T,o)})});f.call(T,o);if(b){k.w=Math.max(y.openWidth,y.headerWidth);k.h=A.y-k.t}else{k.w=A.x-k.l;k.h=Math.max(y.openHeight,y.headerHeight)}k.direction=o.direction;if(i){if(f.size()){x(e,t,r,i,o,k)}else{_(i)}}}function x(e,t,r,n,a,i){var o=a.direction;var s=o==="up"||o==="down";var l=a._dims;var u=a.active,f,c,d;if(s){c=0;for(d=0;d<u;d++){c+=l.heights[d]+h.gapButton}}else{f=0;for(d=0;d<u;d++){f+=l.widths[d]+h.gapButton}}n.enable(i,f,c);if(n.hbar){n.hbar.attr("opacity","0").transition().attr("opacity","1")}if(n.vbar){n.vbar.attr("opacity","0").transition().attr("opacity","1")}}function _(e){var t=!!e.hbar,r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function w(e,t,r,n){e.call(A,t).call(k,t,r,n)}function A(e,t){var r=s.ensureSingle(e,"rect",h.itemRectClassName,function(e){e.attr({rx:h.rx,ry:h.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function k(e,t,r,n){var a=s.ensureSingle(e,"text",h.itemTextClassName,function(e){e.classed("user-select-none",true).attr({"text-anchor":"start","data-notex":1})});a.call(o.font,t.font).text(r.label).call(l.convertToTspans,n)}function T(e,t){var r=t.active;e.each(function(e,a){var o=n.select(this);if(a===r&&t.showactive){o.select("rect."+h.itemRectClassName).call(i.fill,h.activeColor)}})}function M(e){e.select("rect."+h.itemRectClassName).call(i.fill,h.hoverColor)}function E(e,t){e.select("rect."+h.itemRectClassName).call(i.fill,t.bgcolor)}function C(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var i=o.tester.selectAll("g."+h.dropdownButtonClassName).data(s.filterVisible(t.buttons));i.enter().append("g").classed(h.dropdownButtonClassName,true);var f=["up","down"].indexOf(t.direction)!==-1;i.each(function(a,i){var s=n.select(this);s.call(w,t,a,e);var u=s.select("."+h.itemTextClassName);var d=u.node()&&o.bBox(u.node()).width;var v=Math.max(d+h.textPadX,h.minWidth);var p=t.font.size*c;var g=l.lineCount(u);var m=Math.max(p*g,h.minHeight)+h.textOffsetY;m=Math.ceil(m);v=Math.ceil(v);r.widths[i]=v;r.heights[i]=m;r.height1=Math.max(r.height1,m);r.width1=Math.max(r.width1,v);if(f){r.totalWidth=Math.max(r.totalWidth,v);r.openWidth=r.totalWidth;r.totalHeight+=m+h.gapButton;r.openHeight+=m+h.gapButton}else{r.totalWidth+=v+h.gapButton;r.openWidth+=v+h.gapButton;r.totalHeight=Math.max(r.totalHeight,m);r.openHeight=r.totalHeight}});if(f){r.totalHeight-=h.gapButton}else{r.totalWidth-=h.gapButton}r.headerWidth=r.width1+h.arrowPadX;r.headerHeight=r.height1;if(t.type==="dropdown"){if(f){r.width1+=h.arrowPadX;r.totalHeight=r.height1}else{r.totalWidth=r.width1}r.totalWidth+=h.arrowPadX}i.remove();var d=r.totalWidth+t.pad.l+t.pad.r;var v=r.totalHeight+t.pad.t+t.pad.b;var p=e._fullLayout._size;r.lx=p.l+p.w*t.x;r.ly=p.t+p.h*(1-t.y);var g="left";if(u.isRightAnchor(t)){r.lx-=d;g="right"}if(u.isCenterAnchor(t)){r.lx-=d/2;g="center"}var m="top";if(u.isBottomAnchor(t)){r.ly-=v;m="bottom"}if(u.isMiddleAnchor(t)){r.ly-=v/2;m="middle"}r.totalWidth=Math.ceil(r.totalWidth);r.totalHeight=Math.ceil(r.totalHeight);r.lx=Math.round(r.lx);r.ly=Math.round(r.ly);a.autoMargin(e,S(t),{x:t.x,y:t.y,l:d*({right:1,center:.5}[g]||0),r:d*({left:1,center:.5}[g]||0),b:v*({top:1,middle:.5}[m]||0),t:v*({bottom:1,middle:.5}[m]||0)})}function S(e){return h.autoMarginIdRoot+e._index}function L(e,t,r,n){n=n||{};var a=e.select("."+h.itemRectClassName);var i=e.select("."+h.itemTextClassName);var s=t.borderwidth;var u=r.index;var f=t._dims;o.setTranslate(e,s+r.x,s+r.y);var d=["up","down"].indexOf(t.direction)!==-1;var v=n.height||(d?f.heights[u]:f.height1);a.attr({x:0,y:0,width:n.width||(d?f.width1:f.widths[u]),height:v});var p=t.font.size*c;var g=l.lineCount(i);var m=(g-1)*p/2;l.positionText(i,h.textOffsetX,v/2-m+h.textOffsetY);if(d){r.y+=f.heights[u]+r.yPad}else{r.x+=f.widths[u]+r.xPad}r.index++}function O(e,t){e.attr(h.menuIndexAttrName,t||"-1").selectAll("g."+h.dropdownButtonClassName).remove()}},{"../../constants/alignment":421,"../../lib":445,"../../lib/svg_text_utils":469,"../../plot_api/plot_template":482,"../../plots/plots":528,"../color":323,"../drawing":348,"../legend/anchor_utils":375,"./constants":416,"./scrollbox":420,d3:86}],419:[function(e,t,r){arguments[4][413][0].apply(r,arguments)},{"./attributes":415,"./constants":416,"./defaults":417,"./draw":418,dup:413}],420:[function(e,t,r){"use strict";t.exports=s;var n=e("d3");var a=e("../color");var i=e("../drawing");var o=e("../../lib");function s(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2;s.barLength=20;s.barRadius=2;s.barPad=1;s.barColor="#808BA4";s.prototype.enable=function e(t,r,o){var l=this.gd._fullLayout,u=l.width,f=l.height;this.position=t;var c=this.position.l,h=this.position.w,d=this.position.t,v=this.position.h,p=this.position.direction,g=p==="down",m=p==="left",y=p==="right",b=p==="up",x=h,_=v,w,A,k,T;if(!g&&!m&&!y&&!b){this.position.direction="down";g=true}var M=g||b;if(M){w=c;A=w+x;if(g){k=d;T=Math.min(k+_,f);_=T-k}else{T=d+_;k=Math.max(T-_,0);_=T-k}}else{k=d;T=k+_;if(m){A=c+x;w=Math.max(A-x,0);x=A-w}else{w=c;A=Math.min(w+x,u);x=A-w}}this._box={l:w,t:k,w:x,h:_};var E=h>x,C=s.barLength+2*s.barPad,S=s.barWidth+2*s.barPad,L=c,O=d+v;if(O+S>f)O=f-S;var I=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);I.exit().on(".drag",null).remove();I.enter().append("rect").classed("scrollbar-horizontal",true).call(a.fill,s.barColor);if(E){this.hbar=I.attr({rx:s.barRadius,ry:s.barRadius,x:L,y:O,width:C,height:S});this._hbarXMin=L+C/2;this._hbarTranslateMax=x-C}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var D=v>_,R=s.barWidth+2*s.barPad,P=s.barLength+2*s.barPad,z=c+h,F=d;if(z+R>u)z=u-R;var B=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);B.exit().on(".drag",null).remove();B.enter().append("rect").classed("scrollbar-vertical",true).call(a.fill,s.barColor);if(D){this.vbar=B.attr({rx:s.barRadius,ry:s.barRadius,x:z,y:F,width:R,height:P});this._vbarYMin=F+P/2;this._vbarTranslateMax=_-P}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var N=this.id,j=w-.5,U=D?A+R+.5:A+.5,V=k-.5,H=E?T+S+.5:T+.5;var q=l._topdefs.selectAll("#"+N).data(E||D?[0]:[]);q.exit().remove();q.enter().append("clipPath").attr("id",N).append("rect");if(E||D){this._clipRect=q.select("rect").attr({x:Math.floor(j),y:Math.floor(V),width:Math.ceil(U)-Math.floor(j),height:Math.ceil(H)-Math.floor(V)});this.container.call(i.setClipUrl,N);this.bg.attr({x:c,y:d,width:h,height:v})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(E||D){var G=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var X=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(E){this.hbar.on(".drag",null).call(X)}if(D){this.vbar.on(".drag",null).call(X)}}this.setTranslate(r,o)};s.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};s.prototype._onBoxDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t-=n.event.dx}if(this.vbar){r-=n.event.dy}this.setTranslate(t,r)};s.prototype._onBoxWheel=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t+=n.event.deltaY}if(this.vbar){r+=n.event.deltaY}this.setTranslate(t,r)};s.prototype._onBarDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){var a=t+this._hbarXMin,i=a+this._hbarTranslateMax,s=o.constrain(n.event.x,a,i),l=(s-a)/(i-a);var u=this.position.w-this._box.w;t=l*u}if(this.vbar){var f=r+this._vbarYMin,c=f+this._vbarTranslateMax,h=o.constrain(n.event.y,f,c),d=(h-f)/(c-f);var v=this.position.h-this._box.h;r=d*v}this.setTranslate(t,r)};s.prototype.setTranslate=function e(t,r){var n=this.position.w-this._box.w,a=this.position.h-this._box.h;t=o.constrain(t||0,0,n);r=o.constrain(r||0,0,a);this.translateX=t;this.translateY=r;this.container.call(i.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var s=t/n;this.hbar.call(i.setTranslate,t+s*this._hbarTranslateMax,r)}if(this.vbar){var l=r/a;this.vbar.call(i.setTranslate,t,r+l*this._vbarTranslateMax)}}},{"../../lib":445,"../color":323,"../drawing":348,d3:86}],421:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],422:[function(e,t,r){"use strict";t.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],423:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],424:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"}},{}],425:[function(e,t,r){"use strict";t.exports={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}}},{}],426:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],427:[function(e,t,r){"use strict";r.version="1.39.1";e("es6-promise").polyfill();e("../build/plotcss");e("./fonts/mathjax_config");var n=e("./registry");var a=r.register=n.register;var i=e("./plot_api");var o=Object.keys(i);for(var s=0;s<o.length;s++){var l=o[s];r[l]=i[l];a({moduleType:"apiMethod",name:l,fn:i[l]})}a(e("./traces/scatter"));a([e("./components/fx"),e("./components/legend"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars")]);a([e("./locale-en"),e("./locale-en-us")]);r.Icons=e("../build/ploticon");r.Plots=e("./plots/plots");r.Fx=e("./components/fx");r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema");r.Queue=e("./lib/queue");r.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":316,"./components/annotations3d":321,"./components/errorbars":354,"./components/fx":365,"./components/grid":369,"./components/images":374,"./components/legend":383,"./components/rangeselector":394,"./components/rangeslider":400,"./components/shapes":408,"./components/sliders":413,"./components/updatemenus":419,"./fonts/mathjax_config":428,"./lib/queue":460,"./locale-en":473,"./locale-en-us":472,"./plot_api":477,"./plot_api/plot_schema":481,"./plots/plots":528,"./registry":536,"./snapshot":541,"./traces/scatter":608,d3:86,"es6-promise":140}],428:[function(e,t,r){"use strict";if(typeof MathJax!=="undefined"){r.MathJax=true;MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:true,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});MathJax.Hub.Configured()}else{r.MathJax=false}},{}],429:[function(e,t,r){"use strict";var n=Math.PI;r.deg2rad=function(e){return e/180*n};r.rad2deg=function(e){return e/n*180};r.wrap360=function(e){var t=e%360;return t<0?t+360:t};r.wrap180=function(e){if(Math.abs(e)>180)e-=Math.round(e/360)*360;return e}},{}],430:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(n(t))return Number(t);return a}},{"../constants/numerical":424,"fast-isnumeric":151}],431:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],432:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("tinycolor2");var i=e("../plots/attributes");var o=e("../components/colorscale/get_scale");var s=Object.keys(e("../components/colorscale/scales"));var l=e("./nested_property");var u=e("./regex").counter;var f=e("../constants/interactions").DESELECTDIM;var c=e("./angles").wrap180;var h=e("./is_array").isArrayOrTypedArray;r.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(h(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,n){if(n.coerceNumber)e=+e;if(n.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var n=0;n<r.length;n++){var a=String(r[n]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return true}else if(e===r[n])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,a){if(!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,a){if(e%1||!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){var a=typeof e==="number";if(n.strict===true||!a)t.set(r);else t.set(String(e))}else if(n.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(a(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function n(e){return a(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(n))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(o(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!n(e))t.set(r);else t.set(c(+e))}},subplotid:{coerceFunction:function(e,t,r,n){var a=n.regex||u(r);if(typeof e==="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(u(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){t.set(r);return}if((n.extras||[]).indexOf(e)!==-1){t.set(e);return}var a=e.split("+"),i=0;while(i<a.length){var o=a[i];if(n.flags.indexOf(o)===-1||a.indexOf(o)<i){a.splice(i,1)}else i++}if(!a.length)t.set(r);else t.set(a.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,n,a){function i(e,t,n){var a;var i={set:function(e){a=e}};if(n===undefined)n=t.dflt;r.valObjectMeta[t.valType].coerceFunction(e,i,n,t);return a}var o=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(n);return}var s=a.items;var l=[];var u=Array.isArray(s);var f=u&&o&&Array.isArray(s[0]);var c=o&&u&&!f;var h=u&&!c?s.length:e.length;var d,v,p,g,m,y;n=Array.isArray(n)?n:[];if(o){for(d=0;d<h;d++){l[d]=[];p=Array.isArray(e[d])?e[d]:[];if(c)m=s.length;else if(u)m=s[d].length;else m=p.length;for(v=0;v<m;v++){if(c)g=s[v];else if(u)g=s[d][v];else g=s;y=i(p[v],g,(n[d]||[])[v]);if(y!==undefined)l[d][v]=y}}}else{for(d=0;d<h;d++){y=i(e[d],u?s[d]:s,n[d]);if(y!==undefined)l[d]=y}}t.set(l)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var n=Array.isArray(r);var a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!d(e[i][o],n?r[i][o]:r)){return false}}}else if(!d(e[i],n?r[i]:r))return false}return true}}};r.coerce=function(e,t,n,a,i){var o=l(n,a).get();var s=l(e,a);var u=l(t,a);var f=s.get();var c=t._template;if(f===undefined&&c){f=l(c,a).get();c=0}if(i===undefined)i=o.dflt;if(o.arrayOk&&h(f)){u.set(f);return f}var v=r.valObjectMeta[o.valType].coerceFunction;v(f,u,i,o);var p=u.get();if(c&&p===i&&!d(f,o)){f=l(c,a).get();v(f,u,i,o);p=u.get()}return p};r.coerce2=function(e,t,n,a,i){var o=l(e,a),s=r.coerce(e,t,n,a,i),u=o.get();return u!==undefined&&u!==null?s:false};r.coerceFont=function(e,t,r){var n={};r=r||{};n.family=e(t+".family",r.family);n.size=e(t+".size",r.size);n.color=e(t+".color",r.color);return n};r.coerceHoverinfo=function(e,t,n){var a=t._module.attributes;var o=a.hoverinfo?a:i;var s=o.hoverinfo;var l;if(n._dataLength===1){var u=s.dflt==="all"?s.flags.slice():s.dflt.split("+");u.splice(u.indexOf("name"),1);l=u.join("+")}return r.coerce(e,t,o,"hoverinfo",l)};r.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var n;var a;if(!h(r)&&!e.selected&&!e.unselected){n=r;a=f*r}t("selected.marker.opacity",n);t("unselected.marker.opacity",a)};function d(e,t){var n=r.valObjectMeta[t.valType];if(t.arrayOk&&h(e))return true;if(n.validateFunction){return n.validateFunction(e,t)}var a={},i=a,o={set:function(e){i=e}};n.coerceFunction(e,o,a,t);return i!==a}r.validate=d},{"../components/colorscale/get_scale":336,"../components/colorscale/scales":342,"../constants/interactions":423,"../plots/attributes":489,"./angles":429,"./is_array":446,"./nested_property":453,"./regex":461,"fast-isnumeric":151,tinycolor2:285}],433:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("./loggers");var o=e("./mod");var s=e("../constants/numerical");var l=s.BADNUM;var u=s.ONEDAY;var f=s.ONEHOUR;var c=s.ONEMIN;var h=s.ONESEC;var d=s.EPOCHJD;var v=e("../registry");var p=n.time.format.utc;var g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var y=(new Date).getFullYear()-70;function b(e){return e&&v.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}r.dateTick0=function(e,t){if(b(e)){return t?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:v.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}};r.dfltRange=function(e){if(b(e)){return v.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};r.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var x,_;r.dateTime2ms=function(e,t){if(r.isJSDate(e)){var n=e.getTimezoneOffset()*c;var a=(e.getUTCMinutes()-e.getMinutes())*c+(e.getUTCSeconds()-e.getSeconds())*h+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var i=3*c;n=n-i/2+o(a-n+i/2,i)}e=Number(e)-n;if(e>=x&&e<=_)return e;return l}if(typeof e!=="string"&&typeof e!=="number")return l;e=String(e);var s=b(t);var p=e.charAt(0);if(s&&(p==="G"||p==="g")){e=e.substr(1);t=""}var w=s&&t.substr(0,7)==="chinese";var A=e.match(w?m:g);if(!A)return l;var k=A[1],T=A[3]||"1",M=Number(A[5]||1),E=Number(A[7]||0),C=Number(A[9]||0),S=Number(A[11]||0);if(s){if(k.length===2)return l;k=Number(k);var L;try{var O=v.getComponentMethod("calendars","getCal")(t);if(w){var I=T.charAt(T.length-1)==="i";T=parseInt(T,10);L=O.newDate(k,O.toMonthIndex(k,T,I),M)}else{L=O.newDate(k,Number(T),M)}}catch(e){return l}if(!L)return l;return(L.toJD()-d)*u+E*f+C*c+S*h}if(k.length===2){k=(Number(k)+2e3-y)%100+y}else k=Number(k);T-=1;var D=new Date(Date.UTC(2e3,T,M,E,C));D.setUTCFullYear(k);if(D.getUTCMonth()!==T)return l;if(D.getUTCDate()!==M)return l;return D.getTime()+S*h};x=r.MIN_MS=r.dateTime2ms("-9999");_=r.MAX_MS=r.dateTime2ms("9999-12-31 23:59:59.9999");r.isDateTime=function(e,t){return r.dateTime2ms(e,t)!==l};function w(e,t){return String(e+Math.pow(10,t)).substr(1)}var A=90*u;var k=3*f;var T=5*c;r.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=x&&e<=_))return l;if(!t)t=0;var n=Math.floor(o(e+.05,1)*10),a=Math.round(e-n/10),i,s,g,m,y,w;if(b(r)){var E=Math.floor(a/u)+d,C=Math.floor(o(e,u));try{i=v.getComponentMethod("calendars","getCal")(r).fromJD(E).formatDate("yyyy-mm-dd")}catch(e){i=p("G%Y-%m-%d")(new Date(a))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}s=t<A?Math.floor(C/f):0;g=t<A?Math.floor(C%f/c):0;m=t<k?Math.floor(C%c/h):0;y=t<T?C%h*10+n:0}else{w=new Date(a);i=p("%Y-%m-%d")(w);s=t<A?w.getUTCHours():0;g=t<A?w.getUTCMinutes():0;m=t<k?w.getUTCSeconds():0;y=t<T?w.getUTCMilliseconds()*10+n:0}return M(i,s,g,m,y)};r.ms2DateTimeLocal=function(e){if(!(e>=x+u&&e<=_-u))return l;var t=Math.floor(o(e+.05,1)*10),r=new Date(Math.round(e-t/10)),a=n.time.format("%Y-%m-%d")(r),i=r.getHours(),s=r.getMinutes(),f=r.getSeconds(),c=r.getUTCMilliseconds()*10+t;return M(a,i,s,f,c)};function M(e,t,r,n,a){if(t||r||n||a){e+=" "+w(t,2)+":"+w(r,2);if(n||a){e+=":"+w(n,2);if(a){var i=4;while(a%10===0){i-=1;a/=10}e+="."+w(a,i)}}}return e}r.cleanDate=function(e,t,n){if(r.isJSDate(e)||typeof e==="number"){if(b(n)){i.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=r.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!r.isDateTime(e,n)){i.error("unrecognized date",e);return t}return e};var E=/%\d?f/g;function C(e,t,r,n){e=e.replace(E,function(e){var r=Math.min(+e.charAt(1)||6,6),n=(t/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0";return n});var a=new Date(Math.floor(t+.05));if(b(n)){try{e=v.getComponentMethod("calendars","worldCalFmt")(e,t,n)}catch(e){return"Invalid"}}return r(e)(a)}var S=[59,59.9,59.99,59.999,59.9999];function L(e,t){var r=o(e+.05,u);var n=w(Math.floor(r/f),2)+":"+w(o(Math.floor(r/c),60),2);if(t!=="M"){if(!a(t))t=0;var i=Math.min(o(e/h,60),S[t]);var s=(100+i).toFixed(t).substr(1);if(t>0){s=s.replace(/0+$/,"").replace(/[\.]$/,"")}n+=":"+s}return n}r.formatDate=function(e,t,r,n,a,i){a=b(a)&&a;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return L(e,r)+"\n"+C(i.dayMonthYear,e,n,a)}}return C(t,e,n,a)};var O=3*u;r.incrementMonth=function(e,t,r){r=b(r)&&r;var n=o(e,u);e=Math.round(e-n);if(r){try{var a=Math.round(e/u)+d,s=v.getComponentMethod("calendars","getCal")(r),l=s.fromJD(a);if(t%12)s.add(l,t,"m");else s.add(l,t/12,"y");return(l.toJD()-d)*u+n}catch(t){i.error("invalid ms "+e+" in calendar "+r)}}var f=new Date(e+O);return f.setUTCMonth(f.getUTCMonth()+t)+n-O};r.findExactDates=function(e,t){var r=0,n=0,i=0,o=0,s,l;var f=b(t)&&v.getComponentMethod("calendars","getCal")(t);for(var c=0;c<e.length;c++){l=e[c];if(!a(l)){o++;continue}if(l%u)continue;if(f){try{s=f.fromJD(l/u+d);if(s.day()===1){if(s.month()===1)r++;else n++}else i++}catch(e){}}else{s=new Date(l);if(s.getUTCDate()===1){if(s.getUTCMonth()===0)r++;else n++}else i++}}n+=r;i+=n;var h=e.length-o;return{exactYears:r/h,exactMonths:n/h,exactDays:i/h}}},{"../constants/numerical":424,"../registry":536,"./loggers":450,"./mod":452,d3:86,"fast-isnumeric":151}],434:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!Array.isArray(t))t=[];t.length=r;return t}},{}],435:[function(e,t,r){"use strict";var n=e("events").EventEmitter;var a={init:function(e){if(e._ev instanceof n)return e;var t=new n;var r=new n;e._ev=t;e._internalEv=r;e.on=t.on.bind(t);e.once=t.once.bind(t);e.removeListener=t.removeListener.bind(t);e.removeAllListeners=t.removeAllListeners.bind(t);e._internalOn=r.on.bind(r);e._internalOnce=r.once.bind(r);e._removeInternalListener=r.removeListener.bind(r);e._removeAllInternalListeners=r.removeAllListeners.bind(r);e.emit=function(n,a){if(typeof jQuery!=="undefined"){jQuery(e).trigger(n,a)}t.emit(n,a);r.emit(n,a)};return e},triggerHandler:function(e,t,r){var n;var a;if(typeof jQuery!=="undefined"){n=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return n;var o=i._events[t];if(!o)return n;function s(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++){s(o[l])}a=s(o[l]);return n!==undefined?n:a},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=a},{events:150}],436:[function(e,t,r){"use strict";var n=e("./is_plain_object.js");var a=Array.isArray;function i(e,t){var r,n;for(r=0;r<e.length;r++){n=e[r];if(n!==null&&typeof n==="object"){return false}if(n!==void 0){t[r]=n}}return true}r.extendFlat=function(){return o(arguments,false,false,false)};r.extendDeep=function(){return o(arguments,true,false,false)};r.extendDeepAll=function(){return o(arguments,true,true,false)};r.extendDeepNoArrays=function(){return o(arguments,true,false,true)};function o(e,t,r,s){var l=e[0],u=e.length;var f,c,h,d,v,p,g;if(u===2&&a(l)&&a(e[1])&&l.length===0){g=i(e[1],l);if(g){return l}else{l.splice(0,l.length)}}for(var m=1;m<u;m++){f=e[m];for(c in f){h=l[c];d=f[c];if(s&&a(d)){l[c]=d}else if(t&&d&&(n(d)||(v=a(d)))){if(v){v=false;p=h&&a(h)?h:[]}else{p=h&&n(h)?h:{}}l[c]=o([p,d],t,r,s)}else if(typeof d!=="undefined"||r){l[c]=d}}}return l}},{"./is_plain_object.js":447}],437:[function(e,t,r){"use strict";t.exports=function e(t){var r={},n=[],a=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;n[a++]=o}}return n}},{}],438:[function(e,t,r){"use strict";t.exports=function e(t){var r=i(t)?a:n;var o=[];for(var s=0;s<t.length;s++){var l=t[s];if(r(l))o.push(l)}return o};function n(e){return e.visible===true}function a(e){return e[0].trace.visible===true}function i(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],439:[function(e,t,r){"use strict";var n=e("./mod");r.segmentsIntersect=a;function a(e,t,r,n,a,i,o,s){var l=r-e,u=a-e,f=o-a,c=n-t,h=i-t,d=s-i,v=l*d-f*c;if(v===0)return null;var p=(u*d-f*h)/v,g=(u*c-l*h)/v;if(g<0||g>1||p<0||p>1)return null;return{x:e+l*p,y:t+c*p}}r.segmentDistance=function e(t,r,n,o,s,l,u,f){if(a(t,r,n,o,s,l,u,f))return 0;var c=n-t;var h=o-r;var d=u-s;var v=f-l;var p=c*c+h*h;var g=d*d+v*v;var m=Math.min(i(c,h,p,s-t,l-r),i(c,h,p,u-t,f-r),i(d,v,g,t-s,r-l),i(d,v,g,n-s,o-l));return Math.sqrt(m)};function i(e,t,r,n,a){var i=n*e+a*t;if(i<0){return n*n+a*a}else if(i>r){var o=n-e;var s=a-t;return o*o+s*s}else{var l=n*t-a*e;return l*l/r}}var o,s,l;r.getTextLocation=function e(t,r,a,i){if(t!==s||i!==l){o={};s=t;l=i}if(o[a]){return o[a]}var u=t.getPointAtLength(n(a-i/2,r));var f=t.getPointAtLength(n(a+i/2,r));var c=Math.atan((f.y-u.y)/(f.x-u.x));var h=t.getPointAtLength(n(a,r));var d=(h.x*4+u.x+f.x)/6;var v=(h.y*4+u.y+f.y)/6;var p={x:d,y:v,theta:c};o[a]=p;return p};r.clearLocationCache=function(){s=null};r.getVisibleSegment=function e(t,r,n){var a=r.left;var i=r.right;var o=r.top;var s=r.bottom;var l=0;var u=t.getTotalLength();var f=u;var c,h;function d(e){var r=t.getPointAtLength(e);if(e===0)c=r;else if(e===u)h=r;var n=r.x<a?a-r.x:r.x>i?r.x-i:0;var l=r.y<o?o-r.y:r.y>s?r.y-s:0;return Math.sqrt(n*n+l*l)}var v=d(l);while(v){l+=v+n;if(l>f)return;v=d(l)}v=d(f);while(v){f-=v+n;if(l>f)return;v=d(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-h.x)<.1&&Math.abs(c.y-h.y)<.1}};r.findPointOnPath=function e(t,r,n,a){a=a||{};var i=a.pathLength||t.getTotalLength();var o=a.tolerance||.001;var s=a.iterationLimit||30;var l=t.getPointAtLength(0)[n]>t.getPointAtLength(i)[n]?-1:1;var u=0;var f=0;var c=i;var h;var d;var v;while(u<s){h=(f+c)/2;d=t.getPointAtLength(h);v=d[n]-r;if(Math.abs(v)<o){return d}else{if(l*v>0){c=h}else{f=h}u++}}return d}},{"./mod":452}],440:[function(e,t,r){"use strict";t.exports=function(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}},{}],441:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("tinycolor2");var i=e("color-normalize");var o=e("../components/colorscale");var s=e("../components/color/attributes").defaultLine;var l=e("./is_array").isArrayOrTypedArray;var u=i(s);var f=1;function c(e,t){var r=e;r[3]*=t;return r}function h(e){if(n(e))return u;var t=i(e);return t.length?t:u}function d(e){return n(e)?e:f}function v(e,t,r){var n=e.color;var a=l(n);var s=l(t);var v=[];var p,g,m,y,b;if(e.colorscale!==undefined){p=o.makeColorScaleFunc(o.extractScale(e.colorscale,e.cmin,e.cmax))}else{p=h}if(a){g=function(e,t){return e[t]===undefined?u:i(p(e[t]))}}else g=h;if(s){m=function(e,t){return e[t]===undefined?f:d(e[t])}}else m=d;if(a||s){for(var x=0;x<r;x++){y=g(n,x);b=m(t,x);v[x]=c(y,b)}}else v=c(i(n),t);return v}function p(e,t){if(t===undefined)t=1;return e.map(function(e){var r=e[0];var n=a(e[1]);var i=n.toRgb();return{index:r,rgb:[i.r,i.g,i.b,t]}})}t.exports={formatColor:v,parseColorScale:p}},{"../components/color/attributes":322,"../components/colorscale":338,"./is_array":446,"color-normalize":64,"fast-isnumeric":151,tinycolor2:285}],442:[function(e,t,r){"use strict";var n=e("./identity");function a(e){return[e]}t.exports={keyFun:function(e){return e.key},repeat:a,descend:n,wrap:a,unwrap:function(e){return e[0]}}},{"./identity":444}],443:[function(e,t,r){"use strict";var n=e("superscript-text");var a=e("../constants/string_mappings");function i(e){var t=0;while((t=e.indexOf("<sup>",t))>=0){var r=e.indexOf("</sup>",t);if(r<t)break;e=e.slice(0,t)+n(e.slice(t+5,r))+e.slice(r+6)}return e}function o(e){return e.replace(/\<br\>/g,"\n")}function s(e){return e.replace(/\<.*\>/g,"")}function l(e){var t=a.entityToUnicode;var r=0;while((r=e.indexOf("&",r))>=0){var n=e.indexOf(";",r);if(n<r){r+=1;continue}var i=t[e.slice(r+1,n)];if(i){e=e.slice(0,r)+i+e.slice(n+1)}else{e=e.slice(0,r)+e.slice(n+1)}}return e}function u(e){return""+l(s(i(o(e))))}t.exports=u},{"../constants/string_mappings":425,"superscript-text":278}],444:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],445:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../constants/numerical");var o=i.FP_SAFE;var s=i.BADNUM;var l=t.exports={};l.nestedProperty=e("./nested_property");l.keyedContainer=e("./keyed_container");l.relativeAttr=e("./relative_attr");l.isPlainObject=e("./is_plain_object");l.mod=e("./mod");l.toLogRange=e("./to_log_range");l.relinkPrivateKeys=e("./relink_private");l.ensureArray=e("./ensure_array");var u=e("./is_array");l.isTypedArray=u.isTypedArray;l.isArrayOrTypedArray=u.isArrayOrTypedArray;l.isArray1D=u.isArray1D;var f=e("./coerce");l.valObjectMeta=f.valObjectMeta;l.coerce=f.coerce;l.coerce2=f.coerce2;l.coerceFont=f.coerceFont;l.coerceHoverinfo=f.coerceHoverinfo;l.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity;l.validate=f.validate;var c=e("./dates");l.dateTime2ms=c.dateTime2ms;l.isDateTime=c.isDateTime;l.ms2DateTime=c.ms2DateTime;l.ms2DateTimeLocal=c.ms2DateTimeLocal;l.cleanDate=c.cleanDate;l.isJSDate=c.isJSDate;l.formatDate=c.formatDate;l.incrementMonth=c.incrementMonth;l.dateTick0=c.dateTick0;l.dfltRange=c.dfltRange;l.findExactDates=c.findExactDates;l.MIN_MS=c.MIN_MS;l.MAX_MS=c.MAX_MS;var h=e("./search");l.findBin=h.findBin;l.sorterAsc=h.sorterAsc;l.sorterDes=h.sorterDes;l.distinctVals=h.distinctVals;l.roundUp=h.roundUp;var d=e("./stats");l.aggNums=d.aggNums;l.len=d.len;l.mean=d.mean;l.midRange=d.midRange;l.variance=d.variance;l.stdev=d.stdev;l.interp=d.interp;var v=e("./matrix");l.init2dArray=v.init2dArray;l.transposeRagged=v.transposeRagged;l.dot=v.dot;l.translationMatrix=v.translationMatrix;l.rotationMatrix=v.rotationMatrix;l.rotationXYMatrix=v.rotationXYMatrix;l.apply2DTransform=v.apply2DTransform;l.apply2DTransform2=v.apply2DTransform2;var p=e("./angles");l.deg2rad=p.deg2rad;l.rad2deg=p.rad2deg;l.wrap360=p.wrap360;l.wrap180=p.wrap180;var g=e("./geometry2d");l.segmentsIntersect=g.segmentsIntersect;l.segmentDistance=g.segmentDistance;l.getTextLocation=g.getTextLocation;l.clearLocationCache=g.clearLocationCache;l.getVisibleSegment=g.getVisibleSegment;l.findPointOnPath=g.findPointOnPath;var m=e("./extend");l.extendFlat=m.extendFlat;l.extendDeep=m.extendDeep;l.extendDeepAll=m.extendDeepAll;l.extendDeepNoArrays=m.extendDeepNoArrays;var y=e("./loggers");l.log=y.log;l.warn=y.warn;l.error=y.error;var b=e("./regex");l.counterRegex=b.counter;var x=e("./throttle");l.throttle=x.throttle;l.throttleDone=x.done;l.clearThrottle=x.clear;l.getGraphDiv=e("./get_graph_div");l._=e("./localize");l.notifier=e("./notifier");l.filterUnique=e("./filter_unique");l.filterVisible=e("./filter_visible");l.pushUnique=e("./push_unique");l.cleanNumber=e("./clean_number");l.ensureNumber=function e(t){if(!a(t))return s;t=Number(t);if(t<-o||t>o)return s;return a(t)?Number(t):s};l.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return a(e)&&e>=0&&e%1===0};l.noop=e("./noop");l.identity=e("./identity");l.swapAttrs=function(e,t,r,n){if(!r)r="x";if(!n)n="y";for(var a=0;a<t.length;a++){var i=t[a],o=l.nestedProperty(e,i.replace("?",r)),s=l.nestedProperty(e,i.replace("?",n)),u=o.get();o.set(s.get());s.set(u)}};l.raiseToTop=function e(t){t.parentNode.appendChild(t)};l.cancelTransition=function(e){return e.transition().duration(0)};l.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};l.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};l.simpleMap=function(e,t,r,n){var a=e.length,i=new Array(a);for(var o=0;o<a;o++)i[o]=t(e[o],r,n);return i};l.randstr=function e(t,r,n,a){if(!n)n=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(n);var o="";var s,u,f;for(s=2;i===Infinity;s*=2){i=Math.log(Math.pow(2,r/s))/Math.log(n)*s}var c=i-Math.floor(i);for(s=0;s<Math.floor(i);s++){f=Math.floor(Math.random()*n).toString(n);o=f+o}if(c){u=Math.pow(n,c);f=Math.floor(Math.random()*u).toString(n);o=f+o}var h=parseInt(o,n);if(t&&t[o]||h!==Infinity&&h>=Math.pow(2,r)){if(a>10){l.warn("randstr failed uniqueness");return o}return e(t,r,n,(a||0)+1)}else return o};l.OptionControl=function(e,t){if(!e)e={};if(!t)t="opt";var r={};r.optionList=[];r._newoption=function(n){n[t]=e;r[n.name]=n;r.optionList.push(n)};r["_"+t]=e;return r};l.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length,n=2*r,a=2*t-1,i=new Array(a),o=new Array(r),s,l,u,f;for(s=0;s<a;s++){i[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t)}for(s=0;s<r;s++){f=0;for(l=0;l<a;l++){u=s+l+1-t;if(u<-r)u-=n*Math.round(u/n);else if(u>=n)u-=n*Math.floor(u/n);if(u<0)u=-1-u;else if(u>=r)u=n-1-u;f+=e[u]*i[l]}o[s]=f}return o};l.syncOrAsync=function(e,t,r){var n,a;function i(){return l.syncOrAsync(e,t,r)}while(e.length){a=e.splice(0,1)[0];n=a(t);if(n&&n.then){return n.then(i).then(undefined,l.promiseError)}}return r&&r(t)};l.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};l.noneOrAll=function(e,t,r){if(!e)return;var n=false,a=true,i,o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)n=true;else a=false}if(n&&!a){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};l.mergeArray=function(e,t,r){if(l.isArrayOrTypedArray(e)){var n=Math.min(e.length,t.length);for(var a=0;a<n;a++)t[a][r]=e[a]}};l.fillArray=function(e,t,r,n){n=n||l.identity;if(l.isArrayOrTypedArray(e)){for(var a=0;a<t.length;a++){t[a][r]=n(e[a])}}};l.castOption=function(e,t,r,n){n=n||l.identity;var a=l.nestedProperty(e,r).get();if(l.isArrayOrTypedArray(a)){if(Array.isArray(t)&&l.isArrayOrTypedArray(a[t[0]])){return n(a[t[0]][t[1]])}else{return n(a[t])}}else{return a}};l.extractOption=function(e,t,r,n){if(r in e)return e[r];var a=l.nestedProperty(t,n).get();if(!Array.isArray(a))return a};function _(e){var t={};for(var r in e){var n=e[r];for(var a=0;a<n.length;a++){t[n[a]]=+r}}return t}l.tagSelected=function(e,t,r){var n=t.selectedpoints;var a=t._indexToPoints;var i;if(a){i=_(a)}function o(t){return t!==undefined&&t<e.length}for(var s=0;s<n.length;s++){var u=n[s];if(l.isIndex(u)){var f=i?i[u]:u;var c=r?r[f]:f;if(o(c)){e[c].selected=1}}}};l.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var n=_(r);var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(l.isIndex(o)){var s=n[o];if(l.isIndex(s)){a.push(s)}}}return a}else{return t}};l.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var n=l.nestedProperty(e,r).get();return Array.isArray(n)?n:false}else if(Array.isArray(r)){return r}return false};l.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var n=3,a=Object.keys(e),i,o,s;for(i=0;i<a.length;i++){o=a[i];s=e[o];if(o.charAt(0)==="_"||typeof s==="function")continue;else if(o==="module")r[o]=s;else if(Array.isArray(s))r[o]=s.slice(0,n);else if(s&&typeof s==="object")r[o]=l.minExtend(e[o],t[o]);else r[o]=s}a=Object.keys(t);for(i=0;i<a.length;i++){o=a[i];s=t[o];if(typeof s!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=s}}return r};l.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};l.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};l.isPlotDiv=function(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")};l.removeElement=function(e){var t=e&&e.parentNode;if(t)t.removeChild(e)};l.addStyleRule=function(e,t){if(!l.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode(""));document.head.appendChild(r);l.styleSheet=r.sheet}var n=l.styleSheet;if(n.insertRule){n.insertRule(e+"{"+t+"}",0)}else if(n.addRule){n.addRule(e,t,0)}else l.warn("addStyleRule failed")};l.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};l.isD3Selection=function(e){return e&&typeof e.classed==="function"};l.ensureSingle=function(e,t,r,n){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var i=e.append(t).classed(r,true);if(n)i.call(n);return i};l.ensureSingleById=function(e,t,r,n){var a=e.select(t+"#"+r);if(a.size())return a;var i=e.append(t).attr("id",r);if(n)i.call(n);return i};l.objectFromPath=function(e,t){var r=e.split("."),n,a=n={};for(var i=0;i<r.length;i++){var o=r[i];var s=null;var l=r[i].match(/(.*)\[([0-9]+)\]/);if(l){o=l[1];s=l[2];n=n[o]=[];if(i===r.length-1){n[s]=t}else{n[s]={}}n=n[s]}else{if(i===r.length-1){n[o]=t}else{n[o]={}}n=n[o]}}return a};var w=/^([^\[\.]+)\.(.+)?/;var A=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(e){var t,r,n,a,i,o,s;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(w)){a=e[r];n=t[1];delete e[r];e[n]=l.extendDeepNoArrays(e[n]||{},l.objectFromPath(r,l.expandObjectPaths(a))[n])}else if(t=r.match(A)){a=e[r];n=t[1];i=parseInt(t[2]);delete e[r];e[n]=e[n]||[];if(t[3]==="."){s=t[4];o=e[n][i]=e[n][i]||{};l.extendDeepNoArrays(o,l.objectFromPath(s,l.expandObjectPaths(a)))}else{e[n][i]=l.expandObjectPaths(a)}}else{e[r]=l.expandObjectPaths(e[r])}}}}return e};l.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var n=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1);var o=e.split("."),s=o[0],l=o.length>1?a+o[1]:"";if(i&&(o.length>1||s.length>4||r)){while(n.test(s)){s=s.replace(n,"$1"+i+"$2")}}return s+l};var k=/%{([^\s%{}]*)}/g;var T=/^\w*$/;l.templateString=function(e,t){var r={};return e.replace(k,function(e,n){if(T.test(n)){return t[n]||""}r[n]=r[n]||l.nestedProperty(t,n).get;return r[n]()||""})};var M=48;var E=57;l.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var n=0;var a=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var s=t.charCodeAt(i)||0;var l=o>=M&&o<=E;var u=s>=M&&s<=E;if(l)n=10*n+o-M;if(u)a=10*a+s-M;if(!l||!u){if(n!==a)return n-a;if(o!==s)return o-s}}return a-n};var C=2e9;l.seedPseudoRandom=function(){C=2e9};l.pseudoRandom=function(){var e=C;C=(69069*C+1)%4294967296;if(Math.abs(C-e)<429496729)return l.pseudoRandom();return C/4294967296}},{"../constants/numerical":424,"./angles":429,"./clean_number":430,"./coerce":432,"./dates":433,"./ensure_array":434,"./extend":436,"./filter_unique":437,"./filter_visible":438,"./geometry2d":439,"./get_graph_div":440,"./identity":444,"./is_array":446,"./is_plain_object":447,"./keyed_container":448,"./localize":449,"./loggers":450,"./matrix":451,"./mod":452,"./nested_property":453,"./noop":454,"./notifier":455,"./push_unique":459,"./regex":461,"./relative_attr":462,"./relink_private":463,"./search":464,"./stats":467,"./throttle":470,"./to_log_range":471,d3:86,"fast-isnumeric":151}],446:[function(e,t,r){"use strict";var n=typeof ArrayBuffer==="undefined"||!ArrayBuffer.isView?{isView:function(){return false}}:ArrayBuffer;var a=typeof DataView==="undefined"?function(){}:DataView;function i(e){return n.isView(e)&&!(e instanceof a)}function o(e){return Array.isArray(e)||i(e)}function s(e){return!o(e[0])}t.exports={isTypedArray:i,isArrayOrTypedArray:o,isArray1D:s}},{}],447:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t)===Object.prototype}},{}],448:[function(e,t,r){"use strict";var n=e("./nested_property");var a=/^\w*$/;var i=0;var o=1;var s=2;var l=3;var u=4;t.exports=function e(t,r,f,c){f=f||"name";c=c||"value";var h,d,v;var p={};if(r&&r.length){v=n(t,r);d=v.get()}else{d=t}r=r||"";var g={};if(d){for(h=0;h<d.length;h++){g[d[h][f]]=h}}var m=a.test(c);var y={set:function(e,t){var r=t===null?u:i;if(!d){if(!v||r===u)return;d=[];v.set(d)}var a=g[e];if(a===undefined){if(r===u)return;r=r|l;a=d.length;g[e]=a}else if(t!==(m?d[a][c]:n(d[a],c).get())){r=r|s}var o=d[a]=d[a]||{};o[f]=e;if(m){o[c]=t}else{n(o,c).set(t)}if(t!==null){r=r&~u}p[a]=p[a]|r;return y},get:function(e){if(!d)return;var t=g[e];if(t===undefined){return undefined}else if(m){return d[t][c]}else{return n(d[t],c).get()}},rename:function(e,t){var r=g[e];if(r===undefined)return y;p[r]=p[r]|o;g[t]=r;delete g[e];d[r][f]=t;return y},remove:function(e){var t=g[e];if(t===undefined)return y;var r=d[t];if(Object.keys(r).length>2){p[t]=p[t]|s;return y.set(e,null)}if(m){for(h=t;h<d.length;h++){p[h]=p[h]|l}for(h=t;h<d.length;h++){g[d[h][f]]--}d.splice(t,1);delete g[e]}else{n(r,c).set(null);p[t]=p[t]|s|u}return y},constructUpdate:function(){var e,t;var a={};var i=Object.keys(p);for(var l=0;l<i.length;l++){t=i[l];e=r+"["+t+"]";if(d[t]){if(p[t]&o){a[e+"."+f]=d[t][f]}if(p[t]&s){if(m){a[e+"."+c]=p[t]&u?null:d[t][c]}else{a[e+"."+c]=p[t]&u?null:n(d[t],c).get()}}}else{a[e]=null}}return a}};return y}},{"./nested_property":453}],449:[function(e,t,r){"use strict";var n=e("../registry");t.exports=function e(t,r){var a=t._context.locale;for(var i=0;i<2;i++){var o=t._context.locales;for(var s=0;s<2;s++){var l=(o[a]||{}).dictionary;if(l){var u=l[r];if(u)return u}o=n.localeRegistry}var f=a.split("-")[0];if(f===a)break;a=f}return r}},{"../registry":536}],450:[function(e,t,r){"use strict";var n=e("../plot_api/plot_config");var a=t.exports={};a.log=function(){if(n.logging>1){var e=["LOG:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};a.warn=function(){if(n.logging>0){var e=["WARN:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};a.error=function(){if(n.logging>0){var e=["ERROR:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.error,e)}};function i(e,t){if(e.apply){e.apply(e,t)}else{for(var r=0;r<t.length;r++){e(t[r])}}}},{"../plot_api/plot_config":480}],451:[function(e,t,r){"use strict";r.init2dArray=function(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=new Array(t);return r};r.transposeRagged=function(e){var t=0,r=e.length,n,a;for(n=0;n<r;n++)t=Math.max(t,e[n].length);var i=new Array(t);for(n=0;n<t;n++){i[n]=new Array(r);for(a=0;a<r;a++)i[n][a]=e[a][n]}return i};r.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var n=e.length,a,i;if(e[0].length){a=new Array(n);for(i=0;i<n;i++)a[i]=r.dot(e[i],t)}else if(t[0].length){var o=r.transposeRagged(t);a=new Array(o.length);for(i=0;i<o.length;i++)a[i]=r.dot(e,o[i])}else{a=0;for(i=0;i<n;i++)a+=e[i]*t[i]}return a};r.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};r.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};r.rotationXYMatrix=function(e,t,n){return r.dot(r.dot(r.translationMatrix(t,n),r.rotationMatrix(e)),r.translationMatrix(-t,-n))};r.apply2DTransform=function(e){return function(){var t=arguments;if(t.length===3){t=t[0]}var n=arguments.length===1?t[0]:[t[0],t[1]];return r.dot(e,[n[0],n[1],1]).slice(0,2)}};r.apply2DTransform2=function(e){var t=r.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],452:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t%r;return n<0?n+r:n}},{}],453:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./is_array").isArrayOrTypedArray;t.exports=function e(t,r){if(n(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var a=0,o=r.split("."),s,u,f;while(a<o.length){s=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(s){if(s[1])o[a]=s[1];else if(a===0)o.splice(0,1);else throw"bad property string";u=s[2].substr(1,s[2].length-2).split("][");for(f=0;f<u.length;f++){a++;o.splice(a,0,Number(u[f]))}}a++}if(typeof t!=="object"){return h(t,r,o)}return{set:l(t,o,r),get:i(t,o),astr:r,parts:o,obj:t}};function i(e,t){return function(){var r=e,n,o,s,l,u;for(l=0;l<t.length-1;l++){n=t[l];if(n===-1){o=true;s=[];for(u=0;u<r.length;u++){s[u]=i(r[u],t.slice(l+1))();if(s[u]!==s[0])o=false}return o?s[0]:s}if(typeof n==="number"&&!a(r)){return undefined}r=r[n];if(typeof r!=="object"||r===null){return undefined}}if(typeof r!=="object"||r===null)return undefined;s=r[t[l]];if(s===null)return undefined;return s}}var o=/(^|\.)args\[/;function s(e,t){return e===undefined||e===null&&!t.match(o)}function l(e,t,r){return function(n){var i=e,o="",l=[[e,o]],h=s(n,r),d,v;for(v=0;v<t.length-1;v++){d=t[v];if(typeof d==="number"&&!a(i)){throw"array index but container is not an array"}if(d===-1){h=!f(i,t.slice(v+1),n,r);if(h)break;else return}if(!c(i,d,t[v+1],h)){break}i=i[d];if(typeof i!=="object"||i===null){throw"container is not an object"}o=u(o,d);l.push([i,o])}if(h){if(v===t.length-1){delete i[t[v]];if(Array.isArray(i)&&+t[v]===i.length-1){while(i.length&&i[i.length-1]===undefined){i.pop()}}}}else i[t[v]]=n}}function u(e,t){var r=t;if(n(t))r="["+t+"]";else if(e)r="."+t;return e+r}function f(e,t,r,n){var i=a(r),o=true,u=r,f=n.replace("-1",0),h=i?false:s(r,f),d=t[0],v;for(v=0;v<e.length;v++){f=n.replace("-1",v);if(i){u=r[v%r.length];h=s(u,f)}if(h)o=false;if(!c(e,v,d,h)){continue}l(e[v],t,n.replace("-1",v))(u)}return o}function c(e,t,r,n){if(e[t]===undefined){if(n)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function h(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./is_array":446,"fast-isnumeric":151}],454:[function(e,t,r){"use strict";t.exports=function e(){}},{}],455:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=[];t.exports=function(e,t){if(i.indexOf(e)!==-1)return;i.push(e);var r=1e3;if(a(t))r=t;else if(t==="long")r=3e3;var o=n.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",true);var s=o.selectAll(".notifier-note").data(i);function l(e){e.duration(700).style("opacity",0).each("end",function(e){var t=i.indexOf(e);if(t!==-1)i.splice(t,1);n.select(this).remove()})}s.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=n.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(l)});var a=t.append("p");var i=e.split(/<br\s*\/?>/g);for(var o=0;o<i.length;o++){if(o)a.append("br");a.append("span").text(i[o])}t.transition().duration(700).style("opacity",1).transition().delay(r).call(l)})}},{d3:86,"fast-isnumeric":151}],456:[function(e,t,r){"use strict";var n=e("./setcursor");var a="data-savedcursor";var i="!!";t.exports=function e(t,r){var o=t.attr(a);if(r){if(!o){var s=(t.attr("class")||"").split(" ");for(var l=0;l<s.length;l++){var u=s[l];if(u.indexOf("cursor-")===0){t.attr(a,u.substr(7)).classed(u,false)}}if(!t.attr(a)){t.attr(a,i)}}n(t,r)}else if(o){t.attr(a,null);if(o===i)n(t);else n(t,o)}}},{"./setcursor":465}],457:[function(e,t,r){"use strict";var n=e("./matrix").dot;var a=e("../constants/numerical").BADNUM;var i=t.exports={};i.tester=function e(t){if(Array.isArray(t[0][0]))return i.multitester(t);var r=t.slice(),n=r[0][0],o=n,s=r[0][1],l=s,u;r.push(r[0]);for(u=1;u<r.length;u++){n=Math.min(n,r[u][0]);o=Math.max(o,r[u][0]);s=Math.min(s,r[u][1]);l=Math.max(l,r[u][1])}var f=false,c;if(r.length===5){if(r[0][0]===r[1][0]){if(r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]){f=true;c=function(e){return e[0]===r[0][0]}}}else if(r[0][1]===r[1][1]){if(r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]){f=true;c=function(e){return e[1]===r[0][1]}}}}function h(e,t){var r=e[0],i=e[1];if(r===a||r<n||r>o||i===a||i<s||i>l){return false}if(t&&c(e))return false;return true}function d(e,t){var i=e[0],u=e[1];if(i===a||i<n||i>o||u===a||u<s||u>l){return false}var f=r.length,c=r[0][0],h=r[0][1],d=0,v,p,g,m,y;for(v=1;v<f;v++){p=c;g=h;c=r[v][0];h=r[v][1];m=Math.min(p,c);if(i<m||i>Math.max(p,c)||u>Math.max(g,h)){continue}else if(u<Math.min(g,h)){if(i!==m)d++}else{if(c===p)y=u;else y=g+(i-p)*(h-g)/(c-p);if(u===y){if(v===1&&t)return false;return true}if(u<=y&&i!==m)d++}}return d%2===1}var v=true;var p=r[0];for(u=1;u<r.length;u++){if(p[0]!==r[u][0]||p[1]!==r[u][1]){v=false;break}}return{xmin:n,xmax:o,ymin:s,ymax:l,pts:r,contains:f?h:d,isRect:f,degenerate:v}};i.multitester=function e(t){var r=[],n=t[0][0][0],a=n,o=t[0][0][1],s=o;for(var l=0;l<t.length;l++){var u=i.tester(t[l]);u.subtract=t[l].subtract;r.push(u);n=Math.min(n,u.xmin);a=Math.max(a,u.xmax);o=Math.min(o,u.ymin);s=Math.max(s,u.ymax)}function f(e,t){var n=false;for(var a=0;a<r.length;a++){if(r[a].contains(e,t)){n=r[a].subtract===false}}return n}return{xmin:n,xmax:a,ymin:o,ymax:s,pts:[],contains:f,isRect:false,degenerate:false}};var o=i.isSegmentBent=function e(t,r,a,i){var o=t[r],s=[t[a][0]-o[0],t[a][1]-o[1]],l=n(s,s),u=Math.sqrt(l),f=[-s[1]/u,s[0]/u],c,h,d;for(c=r+1;c<a;c++){h=[t[c][0]-o[0],t[c][1]-o[1]];d=n(h,s);if(d<0||d>l||Math.abs(n(h,f))>i)return true}return false};i.filter=function e(t,r){var n=[t[0]],a=0,i=0;function s(e){t.push(e);var s=n.length,l=a;n.splice(i+1);for(var u=l+1;u<t.length;u++){if(u===t.length-1||o(t,l,u+1,r)){n.push(t[u]);if(n.length<s-2){a=u;i=n.length-1}l=u}}}if(t.length>1){var l=t.pop();s(l)}return{addPt:s,raw:t,filtered:n}}},{"../constants/numerical":424,"./matrix":451}],458:[function(e,t,r){(function(r){"use strict";var n=e("./show_no_webgl_msg");var a=e("regl");t.exports=function e(t,i){var o=t._fullLayout;var s=true;o._glcanvas.each(function(e){if(e.regl)return;if(e.pick&&!o._has("parcoords"))return;try{e.regl=a({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:true},pixelRatio:t._context.plotGlPixelRatio||r.devicePixelRatio,extensions:i||[]})}catch(e){s=false}});if(!s){n({container:o._glcontainer.node()})}return s}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./show_no_webgl_msg":466,regl:260}],459:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var n=r.toString(),a;for(a=0;a<t.length;a++){if(t[a]instanceof RegExp&&t[a].toString()===n){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],460:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plot_api/plot_config");function i(e,t){var r=[];var a;for(var i=0;i<t.length;i++){a=t[i];if(a===e)r[i]=a;else if(typeof a==="object"){r[i]=Array.isArray(a)?n.extendDeep([],a):n.extendDeepAll({},a)}else r[i]=a}return r}var o={};o.add=function(e,t,r,n,i){var o,s;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};s=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,o);e.undoQueue.index+=1}else{o=e.undoQueue.queue[s-1]}e.undoQueue.beginSequence=false;if(o){o.undo.calls.unshift(t);o.undo.args.unshift(r);o.redo.calls.push(n);o.redo.args.push(i)}if(e.undoQueue.queue.length>a.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};o.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};o.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};o.undo=function e(t){var r,n;if(t.framework&&t.framework.isPolar){t.framework.undo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.undo.calls.length;n++){o.plotDo(t,r.undo.calls[n],r.undo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false};o.redo=function e(t){var r,n;if(t.framework&&t.framework.isPolar){t.framework.redo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.redo.calls.length;n++){o.plotDo(t,r.redo.calls[n],r.redo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};o.plotDo=function(e,t,r){e.autoplay=true;r=i(e,r);t.apply(null,r)};t.exports=o},{"../lib":445,"../plot_api/plot_config":480}],461:[function(e,t,r){"use strict";r.counter=function(e,t,r){var n=(t||"")+(r?"":"$");if(e==="xy"){return new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n)}return new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],462:[function(e,t,r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var a=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(n);if(r)e=r[1];else if(e.match(a))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],463:[function(e,t,r){"use strict";var n=e("./is_array").isArrayOrTypedArray;var a=e("./is_plain_object");t.exports=function e(t,r){for(var i in r){var o=r[i];var s=t[i];if(s===o){continue}if(i.charAt(0)==="_"||typeof o==="function"){if(i in t)continue;t[i]=o}else if(n(o)&&n(s)&&a(o[0])){if(i==="customdata"||i==="ids")continue;var l=Math.min(o.length,s.length);for(var u=0;u<l;u++){if(s[u]!==o[u]&&a(o[u])&&a(s[u])){e(s[u],o[u])}}}else if(a(o)&&a(s)){e(s,o);if(!Object.keys(s).length)delete t[i]}}}},{"./is_array":446,"./is_plain_object":447}],464:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./loggers");var i=1e-9;r.findBin=function(e,t,r){if(n(t.start)){return r?Math.ceil((e-t.start)/t.size-i)-1:Math.floor((e-t.start)/t.size+i)}else{var f=0;var c=t.length;var h=0;var d=c>1?(t[c-1]-t[0])/(c-1):1;var v,p;if(d>=0){p=r?o:s}else{p=r?u:l}e+=d*i*(r?-1:1)*(d>=0?1:-1);while(f<c&&h++<100){v=Math.floor((f+c)/2);if(p(t[v],e))f=v+1;else c=v}if(h>90)a.log("Long binary search...");return f-1}};function o(e,t){return e<t}function s(e,t){return e<=t}function l(e,t){return e>t}function u(e,t){return e>=t}r.sorterAsc=function(e,t){return e-t};r.sorterDes=function(e,t){return t-e};r.distinctVals=function(e){var t=e.slice();t.sort(r.sorterAsc);var n=t.length-1,a=t[n]-t[0]||1,i=a/(n||1)/1e4,o=[t[0]];for(var s=0;s<n;s++){if(t[s+1]>t[s]+i){a=Math.min(a,t[s+1]-t[s]);o.push(t[s+1])}}return{vals:o,minDiff:a}};r.roundUp=function(e,t,r){var n=0,a=t.length-1,i,o=0,s=r?0:1,l=r?1:0,u=r?Math.ceil:Math.floor;while(n<a&&o++<100){i=u((n+a)/2);if(t[i]<=e)n=i+s;else a=i-l}return t[n]}},{"./loggers":450,"fast-isnumeric":151}],465:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],466:[function(e,t,r){"use strict";var n=e("../components/color");var a=function(){};t.exports=function e(t){for(var r in t){if(typeof t[r]==="function")t[r]=a}t.destroy=function(){t.container.parentNode.removeChild(t.container)};var i=document.createElement("div");i.className="no-webgl";i.style.cursor="pointer";i.style.fontSize="24px";i.style.color=n.defaults[0];i.style.position="absolute";i.style.left=i.style.top="0px";i.style.width=i.style.height="100%";i.style["background-color"]=n.lightLine;i.style["z-index"]=30;var o=document.createElement("p");o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";o.style.position="relative";o.style.top="50%";o.style.left="50%";o.style.height="30%";o.style.width="50%";o.style.margin="-15% 0 0 -25%";i.appendChild(o);t.container.appendChild(i);t.container.style.background="#FFFFFF";t.container.onclick=function(){window.open("https://get.webgl.org")};return false}},{"../components/color":323}],467:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./is_array").isArrayOrTypedArray;r.aggNums=function(e,t,i,o){var s,l;if(!o||o>i.length)o=i.length;if(!n(t))t=false;if(a(i[0])){l=new Array(o);for(s=0;s<o;s++)l[s]=r.aggNums(e,t,i[s]);i=l}for(s=0;s<o;s++){if(!n(t))t=i[s];else if(n(i[s]))t=e(+t,+i[s])}return t};r.len=function(e){return r.aggNums(function(e){return e+1},0,e)};r.mean=function(e,t){if(!t)t=r.len(e);return r.aggNums(function(e,t){return e+t},0,e)/t};r.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(r.aggNums(Math.max,null,e)+r.aggNums(Math.min,null,e))/2};r.variance=function(e,t,a){if(!t)t=r.len(e);if(!n(a))a=r.mean(e,t);return r.aggNums(function(e,t){return e+Math.pow(t-a,2)},0,e)/t};r.stdev=function(e,t,n){return Math.sqrt(r.variance(e,t,n))};r.interp=function(e,t){if(!n(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./is_array":446,"fast-isnumeric":151}],468:[function(e,t,r){"use strict";var n=e("color-normalize");function a(e){if(!e)return[0,0,0,1];return n(e)}t.exports=a},{"color-normalize":64}],469:[function(e,t,r){"use strict";var n=e("d3");var a=e("../lib");var i=e("../constants/xmlns_namespaces");var o=e("../constants/string_mappings");var s=e("../constants/alignment").LINE_SPACING;function l(e,t){return e.node().getBoundingClientRect()[t]}var u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(e,t,a){var i=e.text();var o=!e.attr("data-notex")&&typeof MathJax!=="undefined"&&i.match(u);var s=n.select(e.node().parentNode);if(s.empty())return;var f=e.attr("class")?e.attr("class").split(" ")[0]:"text";f+="-math";s.selectAll("svg."+f).remove();s.selectAll("g."+f+"-group").remove();e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function c(){if(!s.empty()){f=e.attr("class")+"-math";s.select("svg."+f).remove()}e.text("").style("white-space","pre");var t=D(e.node(),i);if(t){e.style("pointer-events","all")}r.positionText(e);if(a)a.call(e)}if(o){(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var r=parseInt(e.node().style.fontSize,10);var n={fontSize:r};d(o[2],n,function(n,o,u){s.selectAll("svg."+f).remove();s.selectAll("g."+f+"-group").remove();var h=n&&n.select("svg");if(!h||!h.node()){c();t();return}var d=s.append("g").classed(f+"-group",true).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});d.node().appendChild(h.node());if(o&&o.node()){h.node().insertBefore(o.node().cloneNode(true),h.node().firstChild)}h.attr({class:f,height:u.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var v=e.node().style.fill||"black";h.select("g").attr({fill:v,stroke:v});var p=l(h,"width"),g=l(h,"height"),m=+e.attr("x")-p*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],y=r||l(e,"height"),b=-y/4;if(f[0]==="y"){d.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-p/2,b-g/2]+")"});h.attr({x:+e.attr("x"),y:+e.attr("y")})}else if(f[0]==="l"){h.attr({x:e.attr("x"),y:b-g/2})}else if(f[0]==="a"){h.attr({x:0,y:b})}else{h.attr({x:m,y:+e.attr("y")+b-g/2})}if(a)a.call(e,d);t(d)})}))}else c();return e};var f=/(<|&lt;|&#60;)/g;var c=/(>|&gt;|&#62;)/g;function h(e){return e.replace(f,"\\lt ").replace(c,"\\gt ")}function d(e,t,r){var i="math-output-"+a.randstr({},64);var o=n.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(h(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,o.node()],function(){var t=n.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){a.log("There was an error in the tex syntax.",e);r()}else{var i=o.select("svg").node().getBoundingClientRect();r(o.select(".MathJax_SVG"),t,i)}o.remove()})}var v={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var p={sub:"0.3em",sup:"-0.6em"};var g={sub:"-0.21em",sup:"0.42em"};var m="\u200b";var y=["http:","https:","mailto:","",undefined,":"];var b=new RegExp("</?("+Object.keys(v).join("|")+")( [^>]*)?/?>","g");var x=Object.keys(o.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:o.entityToUnicode[e]}});var _=/(\r\n?|\n)/g;var w=/(<[^<>]*>)/;var A=/<(\/?)([^ >]*)(\s+(.*))?>/i;var k=/<br(\s+.*)?>/i;var T=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var E=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var C=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(e,t){if(!e)return null;var r=e.match(t);return r&&(r[3]||r[4])}var L=/(^|;)\s*color:/;r.plainText=function(e){return(e||"").replace(b," ")};function O(e,t){if(!e)return"";for(var r=0;r<t.length;r++){var n=t[r];e=e.replace(n.regExp,n.sub)}return e}function I(e){return O(e,x)}function D(e,t){t=I(t).replace(_," ");var r=false;var o=[];var l;var u=-1;function f(){u++;var t=document.createElementNS(i.svg,"tspan");n.select(t).attr({class:"line",dy:u*s+"em"});e.appendChild(t);l=t;var r=o;o=[{node:t}];if(r.length>1){for(var a=1;a<r.length;a++){c(r[a])}}}function c(e){var t=e.type;var r={};var a;if(t==="a"){a="a";var s=e.target;var u=e.href;var f=e.popup;if(u){r={"xlink:xlink:show":s==="_blank"||s.charAt(0)!=="_"?"new":"replace",target:s,"xlink:xlink:href":u};if(f){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+f+'");return false;'}}}else a="tspan";if(e.style)r.style=e.style;var c=document.createElementNS(i.svg,a);if(t==="sup"||t==="sub"){h(l,m);l.appendChild(c);var d=document.createElementNS(i.svg,"tspan");h(d,m);n.select(d).attr("dy",g[t]);r.dy=p[t];l.appendChild(c);l.appendChild(d)}else{l.appendChild(c)}n.select(c).attr(r);l=e.node=c;o.push(e)}function h(e,t){e.appendChild(document.createTextNode(t))}function d(e){if(o.length===1){a.log("Ignoring unexpected end tag </"+e+">.",t);return}var r=o.pop();if(e!==r.type){a.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t)}l=o[o.length-1].node}var b=k.test(t);if(b)f();else{l=e;o=[{node:e}]}var x=t.split(w);for(var O=0;O<x.length;O++){var D=x[O];var R=D.match(A);var P=R&&R[2].toLowerCase();var z=v[P];if(P==="br"){f()}else if(z===undefined){h(l,D)}else{if(R[1]){d(P)}else{var F=R[4];var B={type:P};var N=S(F,T);if(N){N=N.replace(L,"$1 fill:");if(z)N+=";"+z}else if(z)N=z;if(N)B.style=N;if(P==="a"){r=true;var j=S(F,M);if(j){var U=document.createElement("a");U.href=j;if(y.indexOf(U.protocol)!==-1){B.href=encodeURI(decodeURI(j));B.target=S(F,E)||"_blank";B.popup=S(F,C)}}}c(B)}}}return r}r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,r,a){return t.each(function(){var e=n.select(this);function t(t,r){if(r===undefined){r=e.attr(t);if(r===null){e.attr(t,0);r=0}}else e.attr(t,r);return r}var i=t("x",r);var o=t("y",a);if(this.nodeName==="text"){e.selectAll("tspan.line").attr({x:i,y:o})}})};function R(e,t,r){var n=r.horizontalAlign,a=r.verticalAlign||"top",i=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),s,l,u;if(a==="bottom"){l=function(){return i.bottom-s.height}}else if(a==="middle"){l=function(){return i.top+(i.height-s.height)/2}}else{l=function(){return i.top}}if(n==="right"){u=function(){return i.right-s.width}}else if(n==="center"){u=function(){return i.left+(i.width-s.width)/2}}else{u=function(){return i.left}}return function(){s=this.node().getBoundingClientRect();this.style({top:l()-o.top+"px",left:u()-o.left+"px","z-index":1e3});return this}}r.makeEditable=function(e,t){var r=t.gd;var a=t.delegate;var i=n.dispatch("edit","input","cancel");var o=a||e;e.style({"pointer-events":a?"none":"all"});if(e.size()!==1)throw new Error("boo");function s(){u();e.style({opacity:0});var t=o.attr("class"),r;if(t)r="."+t.split(" ")[0]+"-math-group";else r="[class*=-math-group]";if(r){n.select(e.node().parentNode).select(r).style({opacity:0})}}function l(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges();n.addRange(r);t.focus()}function u(){var a=n.select(r);var o=a.select(".svg-container");var s=o.append("div");var u=e.node().style;var f=parseFloat(u.fontSize||12);var c=t.text;if(c===undefined)c=e.attr("data-unformatted");s.classed("plugin-editable editable",true).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":f,color:t.fill||u.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-f/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(c).call(R(e,o,t)).on("blur",function(){r._editing=false;e.text(this.textContent).style({opacity:1});var t=n.select(this).attr("class"),a;if(t)a="."+t.split(" ")[0]+"-math-group";else a="[class*=-math-group]";if(a){n.select(e.node().parentNode).select(a).style({opacity:0})}var o=this.textContent;n.select(this).transition().duration(0).remove();n.select(document).on("mouseup",null);i.edit.call(e,o)}).on("focus",function(){var e=this;r._editing=true;n.select(document).on("mouseup",function(){if(n.event.target===e)return false;if(document.activeElement===s.node())s.node().blur()})}).on("keyup",function(){if(n.event.which===27){r._editing=false;e.style({opacity:1});n.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();i.cancel.call(e,this.textContent)}else{i.input.call(e,this.textContent);n.select(this).call(R(e,o,t))}}).on("keydown",function(){if(n.event.which===13)this.blur()}).call(l)}if(t.immediate)s();else o.on("click",s);return n.rebind(e,i,"on")}},{"../constants/alignment":421,"../constants/string_mappings":425,"../constants/xmlns_namespaces":426,"../lib":445,d3:86}],470:[function(e,t,r){"use strict";var n={};r.throttle=function e(t,r,i){var o=n[t];var s=Date.now();if(!o){for(var l in n){if(n[l].ts<s-6e4){delete n[l]}}o=n[t]={ts:0,timer:null}}a(o);function u(){i();o.ts=Date.now();if(o.onDone){o.onDone();o.onDone=null}}if(s>o.ts+r){u();return}o.timer=setTimeout(function(){u();o.timer=null},r)};r.done=function(e){var t=n[e];if(!t||!t.timer)return Promise.resolve();return new Promise(function(e){var r=t.onDone;t.onDone=function n(){if(r)r();e();t.onDone=null}})};r.clear=function(e){if(e){a(n[e]);delete n[e]}else{for(var t in n)r.clear(t)}};function a(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],471:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!n(a))a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return a}},{"fast-isnumeric":151}],472:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],473:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],474:[function(e,t,r){"use strict";var n=e("../registry");t.exports=function e(t){var r=n.layoutArrayContainers,a=n.layoutArrayRegexes,i=t.split("[")[0],o,s;for(var l=0;l<a.length;l++){s=t.match(a[l]);if(s&&s.index===0){o=s[0];break}}if(!o)o=r[r.indexOf(i)];if(!o)return false;var u=t.substr(o.length);if(!u)return{array:o,index:"",property:""};s=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!s)return false;return{array:o,index:Number(s[1]),property:s[3]||""}}},{"../registry":536}],475:[function(e,t,r){"use strict";var n=e("../lib");var a=n.extendFlat;var i=n.isPlainObject;var o={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]};var s={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]};var l=o.flags.slice().concat(["clearCalc","fullReplot"]);var u=s.flags.slice().concat("layoutReplot");t.exports={traces:o,layout:s,traceFlags:function(){return f(l)},layoutFlags:function(){return f(u)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var n=r.split("+");for(var a=0;a<n.length;a++){e[n[a]]=true}}},overrideAll:c};function f(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function c(e,t,r){var n=a({},e);for(var o in n){var s=n[o];if(i(s)){n[o]=h(s,t,r,o)}}if(r==="from-root")n.editType=t;return n}function h(e,t,r,n){if(e.valType){var i=a({},e);i.editType=t;if(Array.isArray(e.items)){i.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++){i.items[o]=h(e.items[o],t,"from-root")}}return i}else{return c(e,t,n.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":445}],476:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("gl-mat4/fromQuat");var i=e("../registry");var o=e("../lib");var s=e("../plots/plots");var l=e("../plots/cartesian/axis_ids");var u=l.cleanId;var f=l.getFromTrace;var c=e("../components/color");r.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){o.log("Clearing previous rejected promises from queue.")}e._promises=[]};r.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var n=(s.subplotsRegistry.cartesian||{}).attrRegex;var i=(s.subplotsRegistry.gl3d||{}).attrRegex;var l=Object.keys(e);for(t=0;t<l.length;t++){var f=l[t];if(n&&n.test(f)){var d=e[f];if(d.anchor&&d.anchor!=="free"){d.anchor=u(d.anchor)}if(d.overlaying)d.overlaying=u(d.overlaying);if(!d.type){if(d.isdate)d.type="date";else if(d.islog)d.type="log";else if(d.isdate===false&&d.islog===false)d.type="linear"}if(d.autorange==="withzero"||d.autorange==="tozero"){d.autorange=true;d.rangemode="tozero"}delete d.islog;delete d.isdate;delete d.categories;if(g(d,"domain"))delete d.domain;if(d.autotick!==undefined){if(d.tickmode===undefined){d.tickmode=d.autotick?"auto":"linear"}delete d.autotick}}else if(i&&i.test(f)){var v=e[f];var p=v.cameraposition;if(Array.isArray(p)&&p[0].length===4){var m=p[0],y=p[1],b=p[2],x=a([],m),_=[];for(r=0;r<3;++r){_[r]=y[r]+b*x[2+4*r]}v.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:y[0],y:y[1],z:y[2]},up:{x:x[1],y:x[5],z:x[9]}};delete v.cameraposition}}}var w=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<w;t++){var A=e.annotations[t];if(!o.isPlainObject(A))continue;if(A.ref){if(A.ref==="paper"){A.xref="paper";A.yref="paper"}else if(A.ref==="data"){A.xref="x";A.yref="y"}delete A.ref}h(A,"xref");h(A,"yref")}var k=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<k;t++){var T=e.shapes[t];if(!o.isPlainObject(T))continue;h(T,"xref");h(T,"yref")}var M=e.legend;if(M){if(M.x>3){M.x=1.02;M.xanchor="left"}else if(M.x<-2){M.x=-.02;M.xanchor="right"}if(M.y>3){M.y=1.02;M.yanchor="bottom"}else if(M.y<-2){M.y=-.02;M.yanchor="top"}}if(e.dragmode==="rotate")e.dragmode="orbit";c.clean(e);return e};function h(e,t){var r=e[t],n=t.charAt(0);if(r&&r!=="paper"){e[t]=u(r,n)}}r.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];var a;if(n.type==="histogramy"&&"xbins"in n&&!("ybins"in n)){n.ybins=n.xbins;delete n.xbins}if(n.error_y&&"opacity"in n.error_y){var l=c.defaults,f=n.error_y.color||(i.traceIs(n,"bar")?c.defaultLine:l[t%l.length]);n.error_y.color=c.addOpacity(c.rgb(f),c.opacity(f)*n.error_y.opacity);delete n.error_y.opacity}if("bardir"in n){if(n.bardir==="h"&&(i.traceIs(n,"bar")||n.type.substr(0,9)==="histogram")){n.orientation="h";r.swapXYData(n)}delete n.bardir}if(n.type==="histogramy")r.swapXYData(n);if(n.type==="histogramx"||n.type==="histogramy"){n.type="histogram"}if("scl"in n){n.colorscale=n.scl;delete n.scl}if("reversescl"in n){n.reversescale=n.reversescl;delete n.reversescl}if(n.xaxis)n.xaxis=u(n.xaxis,"x");if(n.yaxis)n.yaxis=u(n.yaxis,"y");if(i.traceIs(n,"gl3d")&&n.scene){n.scene=s.subplotsRegistry.gl3d.cleanId(n.scene)}if(!i.traceIs(n,"pie")&&!i.traceIs(n,"bar")){if(Array.isArray(n.textposition)){for(a=0;a<n.textposition.length;a++){n.textposition[a]=p(n.textposition[a])}}else if(n.textposition){n.textposition=p(n.textposition)}}var h=i.getModule(n);if(h&&h.colorbar){var m=h.colorbar.container;var y=m?n[m]:n;if(y&&y.colorscale){if(y.colorscale==="YIGnBu")y.colorscale="YlGnBu";if(y.colorscale==="YIOrRd")y.colorscale="YlOrRd"}}if(n.type==="surface"&&o.isPlainObject(n.contours)){var b=["x","y","z"];for(a=0;a<b.length;a++){var x=n.contours[b[a]];if(!o.isPlainObject(x))continue;if(x.highlightColor){x.highlightcolor=x.highlightColor;delete x.highlightColor}if(x.highlightWidth){x.highlightwidth=x.highlightWidth;delete x.highlightWidth}}}if(n.type==="candlestick"||n.type==="ohlc"){var _=(n.increasing||{}).showlegend!==false;var w=(n.decreasing||{}).showlegend!==false;var A=d(n.increasing);var k=d(n.decreasing);if(A!==false&&k!==false){var T=v(A,k,_,w);if(T)n.name=T}else if((A||k)&&!n.name){n.name=A||k}}if(Array.isArray(n.transforms)){var M=n.transforms;for(a=0;a<M.length;a++){var E=M[a];if(!o.isPlainObject(E))continue;switch(E.type){case"filter":if(E.filtersrc){E.target=E.filtersrc;delete E.filtersrc}if(E.calendar){if(!E.valuecalendar){E.valuecalendar=E.calendar}delete E.calendar}break;case"groupby":E.styles=E.styles||E.style;if(E.styles&&!Array.isArray(E.styles)){var C=E.styles;var S=Object.keys(C);E.styles=[];for(var L=0;L<S.length;L++){E.styles.push({target:S[L],value:C[S[L]]})}}break}}}if(g(n,"line"))delete n.line;if("marker"in n){if(g(n.marker,"line"))delete n.marker.line;if(g(n,"marker"))delete n.marker}c.clean(n)}};function d(e){if(!o.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function v(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length);var i;for(i=0;i<a;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function p(e){var t="middle",r="center";if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right";return t+" "+r}function g(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}r.swapXYData=function(e){var t;o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);o.swapAttrs(e,["error_?.copy_ystyle"]);if(n){o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++){if(a[t]==="x")a[t]="y";else if(a[t]==="y")a[t]="x"}e.hoverinfo=a.join("+")}};r.coerceTraceIndices=function(e,t){if(n(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}return t};r.manageArrayContainers=function(e,t,r){var a=e.obj,i=e.parts,s=i.length,l=i[s-1];var u=n(l);if(u&&t===null){var f=i.slice(0,s-1).join("."),c=o.nestedProperty(a,f).get();c.splice(l,1)}else if(u&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(e){var t=e.search(m);if(t>0)return e.substr(0,t)}r.hasParent=function(e,t){var r=y(t);while(r){if(r in e)return true;r=y(r)}return false};var b=["x","y","z"];r.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++){var a=e._fullData[n];for(var i=0;i<3;i++){var s=f(e,a,b[i]);if(s&&s.type!=="log"){var l=s._name;var u=s._id.substr(1);if(u.substr(0,5)==="scene"){if(r[u]!==undefined)continue;l=u+"."+l}var c=l+".type";if(r[l]===undefined&&r[c]===undefined){o.nestedProperty(e.layout,c).set(null)}}}}}},{"../components/color":323,"../lib":445,"../plots/cartesian/axis_ids":495,"../plots/plots":528,"../registry":536,"fast-isnumeric":151,"gl-mat4/fromQuat":169}],477:[function(e,t,r){"use strict";var n=e("./plot_api");r.plot=n.plot;r.newPlot=n.newPlot;r.restyle=n.restyle;r.relayout=n.relayout;r.redraw=n.redraw;r.update=n.update;r.react=n.react;r.extendTraces=n.extendTraces;r.prependTraces=n.prependTraces;r.addTraces=n.addTraces;r.deleteTraces=n.deleteTraces;r.moveTraces=n.moveTraces;r.purge=n.purge;r.addFrames=n.addFrames;r.deleteFrames=n.deleteFrames;r.animate=n.animate;r.setPlotConfig=n.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var a=e("./template_api");r.makeTemplate=a.makeTemplate;r.validateTemplate=a.validateTemplate},{"../snapshot/download":538,"./plot_api":479,"./template_api":484,"./to_image":485,"./validate":486}],478:[function(e,t,r){"use strict";var n=e("../lib/nested_property");var a=e("../lib/is_plain_object");var i=e("../lib/noop");var o=e("../lib/loggers");var s=e("../lib/search").sorterAsc;var l=e("../registry");r.containerArrayMatch=e("./container_array_match");var u=r.isAddVal=function e(t){return t==="add"||a(t)};var f=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,a,c){var h=r.astr,d=l.getComponentMethod(h,"supplyLayoutDefaults"),v=l.getComponentMethod(h,"draw"),p=l.getComponentMethod(h,"drawOne"),g=c.replot||c.recalc||d===i||v===i,m=t.layout,y=t._fullLayout;if(a[""]){if(Object.keys(a).length>1){o.warn("Full array edits are incompatible with other edits",h)}var b=a[""][""];if(f(b))r.set(null);else if(Array.isArray(b))r.set(b);else{o.warn("Unrecognized full array edit value",h,b);return true}if(g)return false;d(m,y);v(t);return true}var x=Object.keys(a).map(Number).sort(s),_=r.get(),w=_||[],A=n(y,h).get();var k=[],T=-1,M=w.length,E,C,S,L,O,I,D;for(E=0;E<x.length;E++){S=x[E];L=a[S];O=Object.keys(L);I=L[""],D=u(I);if(S<0||S>w.length-(D?0:1)){o.warn("index out of range",h,S);continue}if(I!==undefined){if(O.length>1){o.warn("Insertion & removal are incompatible with edits to the same index.",h,S)}if(f(I)){k.push(S)}else if(D){if(I==="add")I={};w.splice(S,0,I);if(A)A.splice(S,0,{})}else{o.warn("Unrecognized full object edit value",h,S,I)}if(T===-1)T=S}else{for(C=0;C<O.length;C++){n(w[S],O[C]).set(L[O[C]])}}}for(E=k.length-1;E>=0;E--){w.splice(k[E],1);if(A)A.splice(k[E],1)}if(!w.length)r.set(null);else if(!_)r.set(w);if(g)return false;d(m,y);if(p!==i){var R;if(T===-1){R=x}else{M=Math.max(w.length,M);R=[];for(E=0;E<x.length;E++){S=x[E];if(S>=T)break;R.push(S)}for(E=T;E<M;E++){R.push(E)}}for(E=0;E<R.length;E++){p(t,R[E])}}else v(t);return true}},{"../lib/is_plain_object":447,"../lib/loggers":450,"../lib/nested_property":453,"../lib/noop":454,"../lib/search":464,"../registry":536,"./container_array_match":474}],479:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("has-hover");var o=e("../lib");var s=e("../lib/events");var l=e("../lib/queue");var u=e("../registry");var f=e("./plot_schema");var c=e("../plots/plots");var h=e("../plots/polar/legacy");var d=e("../plots/cartesian/axes");var v=e("../components/drawing");var p=e("../components/color");var g=e("../components/colorbar/connect");var m=e("../plots/cartesian/graph_interact").initInteractions;var y=e("../constants/xmlns_namespaces");var b=e("../lib/svg_text_utils");var x=e("./plot_config");var _=e("./manage_arrays");var w=e("./helpers");var A=e("./subroutines");var k=e("./edit_types");var T=e("../plots/cartesian/constants").AX_NAME_PATTERN;var M=0;var E=5;r.plot=function(e,t,a,i){var l;e=o.getGraphDiv(e);s.init(e);if(o.isPlainObject(t)){var f=t;t=f.data;a=f.layout;i=f.config;l=f.frames}var h=s.triggerHandler(e,"plotly_beforeplot",[t,a,i]);if(h===false)return Promise.reject();if(!t&&!a&&!o.isPlotDiv(e)){o.warn("Calling Plotly.plot as if redrawing "+"but this container doesn't yet have a plot.",e)}function p(){if(l){return r.addFrames(e,l)}}O(e,i);if(!a)a={};n.select(e).classed("js-plotly-plot",true);v.makeTester();delete v.baseUrl;if(!Array.isArray(e._promises))e._promises=[];var y=(e.data||[]).length===0&&Array.isArray(t);if(Array.isArray(t)){w.cleanData(t);if(y)e.data=t;else e.data.push.apply(e.data,t);e.empty=false}if(!e.layout||y)e.layout=w.cleanLayout(a);if(e._dragging&&!e._transitioning){e._replotPending=true;return Promise.reject()}else{e._replotPending=false}c.supplyDefaults(e);var b=e._fullLayout;var x=b._has("cartesian");if(!b._has("polar")&&t&&t[0]&&t[0].r){o.log("Legacy polar charts are deprecated!");return I(e,t,a)}b._replotting=true;if(y)ee(e);if(e.framework!==ee){e.framework=ee;ee(e)}v.initGradients(e);if(y)d.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;if(_)c.doCalcdata(e);for(var k=0;k<e.calcdata.length;k++){e.calcdata[k][0].trace=e._fullData[k]}var T=JSON.stringify(b._size);function M(){var t=b._basePlotModules;for(var r=0;r<t.length;r++){if(t[r].drawFramework){t[r].drawFramework(e)}}if(!b._glcanvas&&b._has("gl")){b._glcanvas=b._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});b._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})}if(b._glcanvas){b._glcanvas.attr("width",b.width).attr("height",b.height)}return c.previousPromises(e)}function E(){var t=e.calcdata;var r,n,a;c.clearAutoMarginIds(e);A.drawMarginPushers(e);d.allowAutoMargin(e);for(r=0;r<t.length;r++){n=t[r];a=n[0].trace;var i=a._module.colorbar;if(a.visible!==true||!i){c.autoMargin(e,"cb"+a.uid)}else g(e,n,i)}c.doAutoMargin(e);return c.previousPromises(e)}function S(){if(JSON.stringify(b._size)===T)return;return o.syncOrAsync([E,A.layoutStyles],e)}function L(){if(!_){D();return}var t=b._subplots.cartesian;var r=b._modules;var n=[];var a,i,s;for(s=0;s<r.length;s++){o.pushUnique(n,r[s].setPositions)}if(n.length){for(i=0;i<t.length;i++){a=b._plots[t[i]];for(s=0;s<n.length;s++){n[s](e,a)}}}u.getComponentMethod("errorbars","calc")(e);return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),D,u.getComponentMethod("rangeslider","calcAutorange")],e)}function D(){if(e._transitioning)return;A.doAutoRangeAndConstraints(e);if(y)d.saveRangeInitial(e)}function R(){return d.doTicks(e,y?"":"redraw")}var P=[c.previousPromises,p,M,E,S];if(x)P.push(L);P.push(A.layoutStyles);if(x)P.push(R);P.push(A.drawData,A.finalDraw,m,c.addLinks,c.rehover,c.doAutoMargin,c.previousPromises);var z=o.syncOrAsync(P,e);if(!z||!z.then)z=Promise.resolve();return z.then(function(){C(e);return e})};function C(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}r.setPlotConfig=function e(t){return o.extendFlat(x,t)};function S(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){o.error(e)}}function L(e,t){var r=p.combine(t,"white");S(e,r)}function O(e,t){if(!e._context)e._context=o.extendDeep({},x);var r=e._context;var n,a,s;if(t){a=Object.keys(t);for(n=0;n<a.length;n++){s=a[n];if(s==="editable"||s==="edits")continue;if(s in r){if(s==="setBackground"&&t[s]==="opaque"){r[s]=L}else{r[s]=t[s]}}}if(t.plot3dPixelRatio&&!r.plotGlPixelRatio){r.plotGlPixelRatio=r.plot3dPixelRatio}var l=t.editable;if(l!==undefined){r.editable=l;a=Object.keys(r.edits);for(n=0;n<a.length;n++){r.edits[a[n]]=l}}if(t.edits){a=Object.keys(t.edits);for(n=0;n<a.length;n++){s=a[n];if(s in r.edits){r.edits[s]=t.edits[s]}}}}if(r.staticPlot){r.editable=false;r.edits={};r.autosizable=false;r.scrollZoom=false;r.doubleClick=false;r.showTips=false;r.showLink=false;r.displayModeBar=false}if(r.displayModeBar==="hover"&&!i){r.displayModeBar=true}if(r.setBackground==="transparent"||typeof r.setBackground!=="function"){r.setBackground=S}}function I(e,t,r){var a=n.select(e).selectAll(".plot-container").data([0]);a.enter().insert("div",":first-child").classed("plot-container plotly",true);var i=a.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",true).style("position","relative");i.html("");if(t)e.data=t;if(r)e.layout=r;h.manager.fillLayout(e);i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"});e.framework=h.manager.framework(e);e.framework({data:e.data,layout:e.layout},i.node());e.framework.setUndoPoint();var s=e.framework.svg();var l=1;var u=e._fullLayout.title;if(u===""||!u)l=0;var f=function(){this.call(b.convertToTspans,e)};var d=s.select(".title-group text").call(f);if(e._context.edits.titleText){var v=o._(e,"Click to enter Plot title");if(!u||u===v){l=.2;d.attr({"data-unformatted":v}).text(v).style({opacity:l}).on("mouseover.opacity",function(){n.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(1e3).style("opacity",0)})}var p=function(){this.call(b.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}});this.text(t).call(f);this.call(p)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(f)})};d.call(p)}e._context.setBackground(e,e._fullLayout.paper_bgcolor);c.addLinks(e);return Promise.resolve()}r.redraw=function(e){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}w.cleanData(e.data);w.cleanLayout(e.layout);e.calcdata=undefined;return r.plot(e).then(function(){e.emit("plotly_redraw");return e})};r.newPlot=function(e,t,n,a){e=o.getGraphDiv(e);c.cleanPlot([],{},e._fullData||[],e._fullLayout||{},e.calcdata||[]);c.purge(e);return r.plot(e,t,n,a)};function D(e,t){var r=t+1,n=[],a,i;for(a=0;a<e.length;a++){i=e[a];if(i<0){n.push(r+i)}else{n.push(i)}}return n}function R(e,t,r){var n,a;for(n=0;n<t.length;n++){a=t[n];if(a!==parseInt(a,10)){throw new Error("all values in "+r+" must be integers")}if(a>=e.data.length||a<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(a,n+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1){throw new Error("each index in "+r+" must be unique.")}}}function P(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}R(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){R(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function z(e,t,r){var n,a;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(n=0;n<t.length;n++){a=t[n];if(typeof a!=="object"||(Array.isArray(a)||a===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function F(e,t,r,n){var a=o.isPlainObject(n);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!o.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}R(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function B(e,t,r,n){var i=o.isPlainObject(n),s=[];var l,u,f,c,h;if(!Array.isArray(r))r=[r];r=D(r,e.data.length-1);for(var d in t){for(var v=0;v<r.length;v++){l=e.data[r[v]];f=o.nestedProperty(l,d);u=f.get();c=t[d][v];if(!o.isArrayOrTypedArray(c)){throw new Error("attribute: "+d+" index: "+v+" must be an array")}if(!o.isArrayOrTypedArray(u)){throw new Error("cannot extend missing or non-array attribute: "+d)}if(u.constructor!==c.constructor){throw new Error("cannot extend array with an array of a different type: "+d)}h=i?n[d][v]:n;if(!a(h))h=-1;s.push({prop:f,target:u,insert:c,maxp:Math.floor(h)})}}return s}function N(e,t,r,n,a){F(e,t,r,n);var i=B(e,t,r,n);var o={};var s={};for(var l=0;l<i.length;l++){var u=i[l].prop;var f=i[l].maxp;var c=a(i[l].target,i[l].insert,f);u.set(c[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(c[1]);if(!Array.isArray(s[u.astr]))s[u.astr]=[];s[u.astr].push(i[l].target.length)}return{update:o,maxPoints:s}}function j(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}r.extendTraces=function e(t,n,a,i){t=o.getGraphDiv(t);function s(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var s=j(e,t);if(r<0){n=s;a=i}else{n=i;a=s}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var l=t.length-r;n.set(t.subarray(l));a.set(e);a.set(t.subarray(0,l),e.length)}else{var u=r-t.length;var f=e.length-u;n.set(e.subarray(f));n.set(t,u);a.set(e.subarray(0,f))}}}else{n=e.concat(t);a=r>=0&&r<n.length?n.splice(0,n.length-r):[]}return[n,a]}var u=N(t,n,a,i,s);var f=r.redraw(t);var c=[t,u.update,a,u.maxPoints];l.add(t,r.prependTraces,c,e,arguments);return f};r.prependTraces=function e(t,n,a,i){t=o.getGraphDiv(t);function s(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var s=j(t,e);if(r<0){n=s;a=i}else{n=i;a=s}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var l=t.length-r;n.set(t.subarray(0,l));a.set(t.subarray(l));a.set(e,l)}else{var u=r-t.length;n.set(t);n.set(e.subarray(0,u),t.length);a.set(e.subarray(u))}}}else{n=t.concat(e);a=r>=0&&r<n.length?n.splice(r,n.length):[]}return[n,a]}var u=N(t,n,a,i,s);var f=r.redraw(t);var c=[t,u.update,a,u.maxPoints];l.add(t,r.extendTraces,c,e,arguments);return f};r.addTraces=function e(t,n,a){t=o.getGraphDiv(t);var i=[],s=r.deleteTraces,u=e,f=[t,i],c=[t,n],h,d;z(t,n,a);if(!Array.isArray(n)){n=[n]}n=n.map(function(e){return o.extendFlat({},e)});w.cleanData(n);for(h=0;h<n.length;h++){t.data.push(n[h])}for(h=0;h<n.length;h++){i.push(-n.length+h)}if(typeof a==="undefined"){d=r.redraw(t);l.add(t,s,f,u,c);return d}if(!Array.isArray(a)){a=[a]}try{P(t,i,a)}catch(e){t.data.splice(t.data.length-n.length,n.length);throw e}l.startSequence(t);l.add(t,s,f,u,c);d=r.moveTraces(t,i,a);l.stopSequence(t);return d};r.deleteTraces=function e(t,n){t=o.getGraphDiv(t);var a=[],i=r.addTraces,s=e,u=[t,a,n],f=[t,n],c,h;if(typeof n==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(n)){n=[n]}R(t,n,"indices");n=D(n,t.data.length-1);n.sort(o.sorterDes);for(c=0;c<n.length;c+=1){h=t.data.splice(n[c],1)[0];a.push(h)}var d=r.redraw(t);l.add(t,i,u,s,f);return d};r.moveTraces=function e(t,n,a){t=o.getGraphDiv(t);var i=[],s=[],u=e,f=e,c=[t,a,n],h=[t,n,a],d;P(t,n,a);n=Array.isArray(n)?n:[n];if(typeof a==="undefined"){a=[];for(d=0;d<n.length;d++){a.push(-n.length+d)}}a=Array.isArray(a)?a:[a];n=D(n,t.data.length-1);a=D(a,t.data.length-1);for(d=0;d<t.data.length;d++){if(n.indexOf(d)===-1){i.push(t.data[d])}}for(d=0;d<n.length;d++){s.push({newIndex:a[d],trace:t.data[n[d]]})}s.sort(function(e,t){return e.newIndex-t.newIndex});for(d=0;d<s.length;d+=1){i.splice(s[d].newIndex,0,s[d].trace)}t.data=i;var v=r.redraw(t);l.add(t,u,c,f,h);return v};r.restyle=function e(t,n,a,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);var s={};if(typeof n==="string")s[n]=a;else if(o.isPlainObject(n)){s=o.extendFlat({},n);if(i===undefined)i=a}else{o.warn("Restyle fail.",n,a,i);return Promise.reject()}if(Object.keys(s).length)t.changed=true;var u=w.coerceTraceIndices(t,i);var f=V(t,s,u);var h=f.flags;if(h.clearCalc)t.calcdata=undefined;if(h.clearAxisTypes)w.clearAxisTypes(t,u,{});var d=[];if(h.fullReplot){d.push(r.plot)}else{d.push(c.previousPromises);c.supplyDefaults(t);if(h.style)d.push(A.doTraceStyle);if(h.colorbars)d.push(A.doColorBars);d.push(C)}d.push(c.rehover);l.add(t,e,[t,f.undoit,f.traces],e,[t,f.redoit,f.traces]);var v=o.syncOrAsync(d,t);if(!v||!v.then)v=Promise.resolve();return v.then(function(){t.emit("plotly_restyle",f.eventData);return t})};function U(e){if(e===undefined)return null;return e}function V(e,t,r){var n=e._fullLayout,a=e._fullData,i=e.data,s;var l=k.traceFlags();var h={},v={},p;function g(){return r.map(function(){return undefined})}function m(e){var t=d.id2name(e);if(p.indexOf(t)===-1)p.push(t)}function y(e){return"LAYOUT"+e+".autorange"}function b(e){return"LAYOUT"+e+".range"}function x(n,a,s){if(Array.isArray(n)){n.forEach(function(e){x(e,a,s)});return}if(n in t||w.hasParent(t,n))return;var l;if(n.substr(0,6)==="LAYOUT"){l=o.nestedProperty(e.layout,n.replace("LAYOUT",""))}else{l=o.nestedProperty(i[r[s]],n)}if(!(n in v)){v[n]=g()}if(v[n][s]===undefined){v[n][s]=U(l.get())}if(a!==undefined){l.set(a)}}for(var _ in t){if(w.hasParent(t,_)){throw new Error("cannot set "+_+"and a parent attribute simultaneously")}var A=t[_],T,M,E,C,S,L;h[_]=A;if(_.substr(0,6)==="LAYOUT"){E=o.nestedProperty(e.layout,_.replace("LAYOUT",""));v[_]=[U(E.get())];E.set(Array.isArray(A)?A[0]:A);l.calc=true;continue}v[_]=g();for(s=0;s<r.length;s++){T=i[r[s]];M=a[r[s]];E=o.nestedProperty(T,_);C=E.get();S=Array.isArray(A)?A[s%A.length]:A;if(S===undefined)continue;var O=E.parts[E.parts.length-1];var I=_.substr(0,_.length-O.length-1);var D=I?I+".":"";var R=I?o.nestedProperty(M,I).get():M;L=f.getTraceValObject(M,E.parts);if(L&&L.impliedEdits&&S!==null){for(var P in L.impliedEdits){x(o.relativeAttr(_,P),L.impliedEdits[P],s)}}else if((O==="thicknessmode"||O==="lenmode")&&C!==S&&(S==="fraction"||S==="pixels")&&R){var z=n._size;var F=R.orient;var B=F==="top"||F==="bottom";if(O==="thicknessmode"){var N=B?z.h:z.w;x(D+"thickness",R.thickness*(S==="fraction"?1/N:N),s)}else{var j=B?z.w:z.h;x(D+"len",R.len*(S==="fraction"?1/j:j),s)}}else if(_==="type"&&S==="pie"!==(C==="pie")){var V="x",H="y";if((S==="bar"||C==="bar")&&T.orientation==="h"){V="y";H="x"}o.swapAttrs(T,["?","?src"],"labels",V);o.swapAttrs(T,["d?","?0"],"label",V);o.swapAttrs(T,["?","?src"],"values",H);if(C==="pie"){o.nestedProperty(T,"marker.color").set(o.nestedProperty(T,"marker.colors").get());n._pielayer.selectAll("g.trace").remove()}else if(u.traceIs(T,"cartesian")){o.nestedProperty(T,"marker.colors").set(o.nestedProperty(T,"marker.color").get())}}v[_][s]=U(C);var q=["swapxy","swapxyaxes","orientation","orientationaxes"];if(q.indexOf(_)!==-1){if(_==="orientation"){E.set(S);var G=T.x&&!T.y?"h":"v";if((E.get()||G)===M.orientation){continue}}else if(_==="orientationaxes"){T.orientation={v:"h",h:"v"}[M.orientation]}w.swapXYData(T);l.calc=l.clearAxisTypes=true}else if(c.dataArrayContainers.indexOf(E.parts[0])!==-1){w.manageArrayContainers(E,S,v);l.calc=true}else{if(L){if(L.arrayOk&&(o.isArrayOrTypedArray(S)||o.isArrayOrTypedArray(C))){l.calc=true}else k.update(l,L)}else{l.calc=true}E.set(S)}}if(["swapxyaxes","orientationaxes"].indexOf(_)!==-1){d.swap(e,r)}if(_==="orientationaxes"){var X=o.nestedProperty(e.layout,"hovermode");if(X.get()==="x"){X.set("y")}else if(X.get()==="y"){X.set("x")}}if(["orientation","type"].indexOf(_)!==-1){p=[];for(s=0;s<r.length;s++){var W=i[r[s]];if(u.traceIs(W,"cartesian")){m(W.xaxis||"x");m(W.yaxis||"y");if(_==="type"){x(["autobinx","autobiny"],true,s)}}}x(p.map(y),true,0);x(p.map(b),[0,1],0)}}var Y=false;var Z=d.list(e);for(s=0;s<Z.length;s++){if(Z[s].autorange){Y=true;break}}if(l.calc||l.calcIfAutorange&&Y){l.clearCalc=true}if(l.calc||l.plot||l.calcIfAutorange){l.fullReplot=true}return{flags:l,undoit:v,redoit:h,traces:r,eventData:o.extendDeepNoArrays([],[h,r])}}r.relayout=function e(t,r,n){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}var a={};if(typeof r==="string"){a[r]=n}else if(o.isPlainObject(r)){a=o.extendFlat({},r)}else{o.warn("Relayout fail.",r,n);return Promise.reject()}if(Object.keys(a).length)t.changed=true;var i=W(t,a);var s=i.flags;if(s.calc)t.calcdata=undefined;var u=[c.previousPromises];if(s.layoutReplot){u.push(A.layoutReplot)}else if(Object.keys(a).length){c.supplyDefaults(t);if(s.legend)u.push(A.doLegend);if(s.layoutstyle)u.push(A.layoutStyles);if(s.axrange){H(u,i.rangesAltered)}if(s.ticks)u.push(A.doTicksRelayout);if(s.modebar)u.push(A.doModeBar);if(s.camera)u.push(A.doCamera);u.push(C)}u.push(c.rehover);l.add(t,e,[t,i.undoit],e,[t,i.redoit]);var f=o.syncOrAsync(u,t);if(!f||!f.then)f=Promise.resolve(t);return f.then(function(){t.emit("plotly_relayout",i.eventData);return t})};function H(e,t){var r=t?function(e){return A.doTicksRelayout(e,t)}:A.doTicksRelayout;e.push(r,A.drawData,A.finalDraw)}var q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var G=/^[xyz]axis[0-9]*\.autorange$/;var X=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function W(e,t){var r=e.layout,n=e._fullLayout,a=Object.keys(t),i=d.list(e),s={},l,c,h;for(c=0;c<a.length;c++){if(a[c].indexOf("allaxes")===0){for(h=0;h<i.length;h++){var v=i[h]._id.substr(1),p=v.indexOf("scene")!==-1?v+".":"",g=a[c].replace("allaxes",p+i[h]._name);if(!t[g])t[g]=t[a[c]]}delete t[a[c]]}}var m=k.layoutFlags();var y={},b={};function x(e,n){if(Array.isArray(e)){e.forEach(function(e){x(e,n)});return}if(e in t||w.hasParent(t,e))return;var a=o.nestedProperty(r,e);if(!(e in b)){b[e]=U(a.get())}if(n!==undefined)a.set(n)}var A={};var M;function E(e){var t=d.name2id(e.split(".")[0]);A[t]=1;return t}for(var C in t){if(w.hasParent(t,C)){throw new Error("cannot set "+C+"and a parent attribute simultaneously")}var S=o.nestedProperty(r,C);var L=t[C];var O=S.parts.length;var I=O-1;while(I>0&&typeof S.parts[I]!=="string")I--;var D=S.parts[I];var R=S.parts[I-1]+"."+D;var P=S.parts.slice(0,I).join(".");var z=o.nestedProperty(e.layout,P).get();var F=o.nestedProperty(n,P).get();var B=S.get();if(L===undefined)continue;y[C]=L;b[C]=D==="reverse"?L:U(B);var N=f.getLayoutValObject(n,S.parts);if(N&&N.impliedEdits&&L!==null){for(var j in N.impliedEdits){x(o.relativeAttr(C,j),N.impliedEdits[j])}}if(["width","height"].indexOf(C)!==-1&&L===null){n[C]=e._initialAutoSize[C]}else if(R.match(q)){E(R);o.nestedProperty(n,P+"._inputRange").set(null)}else if(R.match(G)){E(R);o.nestedProperty(n,P+"._inputRange").set(null);var V=o.nestedProperty(n,P).get();if(V._inputDomain){V._input.domain=V._inputDomain.slice()}}else if(R.match(X)){o.nestedProperty(n,P+"._inputDomain").set(null)}if(D==="type"){var H=z,W=F.type==="linear"&&L==="log",J=F.type==="log"&&L==="linear";if(W||J){if(!H||!H.range){x(P+".autorange",true)}else if(!F.autorange){var Q=H.range[0],$=H.range[1];if(W){if(Q<=0&&$<=0){x(P+".autorange",true)}if(Q<=0)Q=$/1e6;else if($<=0)$=Q/1e6;x(P+".range[0]",Math.log(Q)/Math.LN10);x(P+".range[1]",Math.log($)/Math.LN10)}else{x(P+".range[0]",Math.pow(10,Q));x(P+".range[1]",Math.pow(10,$))}}else if(W){H.range=H.range[1]>H.range[0]?[1,2]:[2,1]}if(Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[S.parts[0]]&&S.parts[1]==="radialaxis"){delete n[S.parts[0]]._subplot.viewInitial["radialaxis.range"]}u.getComponentMethod("annotations","convertCoords")(e,F,L,x);u.getComponentMethod("images","convertCoords")(e,F,L,x)}else{x(P+".autorange",true);x(P+".range",null)}o.nestedProperty(n,P+"._inputRange").set(null)}else if(D.match(T)){var K=o.nestedProperty(n,C).get(),ee=(L||{}).type;if(!ee||ee==="-")ee="linear";u.getComponentMethod("annotations","convertCoords")(e,K,ee,x);u.getComponentMethod("images","convertCoords")(e,K,ee,x)}var te=_.containerArrayMatch(C);if(te){l=te.array;c=te.index;var re=te.property;var ne=o.nestedProperty(r,l);var ae=(ne||[])[c]||{};var ie=ae;var oe=N||{editType:"calc"};var se=oe.editType.indexOf("calcIfAutorange")!==-1;if(c===""){if(se)m.calc=true;else k.update(m,oe);se=false}else if(re===""){ie=L;if(_.isAddVal(L)){b[C]=null}else if(_.isRemoveVal(L)){b[C]=ae;ie=ae}else o.warn("unrecognized full object value",t)}if(se&&(Z(e,ie,"x")||Z(e,ie,"y"))){m.calc=true}else{k.update(m,oe)}if(!s[l])s[l]={};var le=s[l][c];if(!le)le=s[l][c]={};le[re]=L;delete t[C]}else if(D==="reverse"){if(z.range)z.range.reverse();else{x(P+".autorange",true);z.range=[1,0]}if(F.autorange)m.calc=true;else m.plot=true}else{if(n._has("scatter-like")&&n._has("regl")&&(C==="dragmode"&&(L==="lasso"||L==="select")&&!(B==="lasso"||B==="select"))){m.plot=true}else if(N)k.update(m,N);else m.calc=true;S.set(L)}}for(l in s){var ue=_.applyContainerArrayChanges(e,o.nestedProperty(r,l),s[l],m);if(!ue)m.plot=true}var fe=n._axisConstraintGroups||[];for(M in A){for(c=0;c<fe.length;c++){var ce=fe[c];if(ce[M]){m.calc=true;for(var he in ce){if(!A[he]){d.getFromId(e,he)._constraintShrinkable=true}}}}}if(Y(e)||t.height||t.width)m.plot=true;if(m.plot||m.calc){m.layoutReplot=true}return{flags:m,rangesAltered:A,undoit:b,redoit:y,eventData:o.extendDeep({},y)}}function Y(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(e.layout.autosize)c.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==n}function Z(e,t,r){if(!o.isPlainObject(t))return false;var n=t[r+"ref"]||r,a=d.getFromId(e,n);if(!a&&n.charAt(0)===r){a=d.getFromId(e,r)}return(a||{}).autorange}r.update=function e(t,n,a,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}if(!o.isPlainObject(n))n={};if(!o.isPlainObject(a))a={};if(Object.keys(n).length)t.changed=true;if(Object.keys(a).length)t.changed=true;var s=w.coerceTraceIndices(t,i);var u=V(t,o.extendFlat({},n),s);var f=u.flags;var h=W(t,o.extendFlat({},a));var d=h.flags;if(f.clearCalc||d.calc)t.calcdata=undefined;if(f.clearAxisTypes)w.clearAxisTypes(t,s,a);var v=[];if(f.fullReplot&&d.layoutReplot){var p=t.data,g=t.layout;t.data=undefined;t.layout=undefined;v.push(function(){return r.plot(t,p,g)})}else if(f.fullReplot){v.push(r.plot)}else if(d.layoutReplot){v.push(A.layoutReplot)}else{v.push(c.previousPromises);c.supplyDefaults(t);if(f.style)v.push(A.doTraceStyle);if(f.colorbars)v.push(A.doColorBars);if(d.legend)v.push(A.doLegend);if(d.layoutstyle)v.push(A.layoutStyles);if(d.axrange){H(v,h.rangesAltered)}if(d.ticks)v.push(A.doTicksRelayout);if(d.modebar)v.push(A.doModeBar);if(d.camera)v.push(A.doCamera);v.push(C)}v.push(c.rehover);l.add(t,e,[t,u.undoit,h.undoit,u.traces],e,[t,u.redoit,h.redoit,u.traces]);var m=o.syncOrAsync(v,t);if(!m||!m.then)m=Promise.resolve(t);return m.then(function(){t.emit("plotly_update",{data:u.eventData,layout:h.eventData});return t})};r.react=function(e,t,n,a){var i,s;function l(){return r.addFrames(e,i)}e=o.getGraphDiv(e);var f=e._fullData;var h=e._fullLayout;if(!o.isPlotDiv(e)||!f||!h){s=r.newPlot(e,t,n,a)}else{if(o.isPlainObject(t)){var d=t;t=d.data;n=d.layout;a=d.config;i=d.frames}var v=false;if(a){var p=o.extendDeep({},e._context);e._context=undefined;O(e,a);v=K(p,e._context)}e.data=t||[];w.cleanData(e.data);e.layout=n||{};w.cleanLayout(e.layout);c.supplyDefaults(e,{skipUpdateCalc:true});var g=e._fullData;var m=e._fullLayout;var y=m.datarevision===undefined;var b=J(e,f,g,y);var x=Q(e,h,m,y);if(Y(e))x.layoutReplot=true;if(b.calc||x.calc)e.calcdata=undefined;else c.supplyDefaultsUpdateCalc(e.calcdata,g);var _=[];if(i){e._transitionData={};c.createTransitionData(e);_.push(l)}if(b.fullReplot||x.layoutReplot||v){e._fullLayout._skipDefaults=true;_.push(r.plot)}else{for(var k in x.arrays){var T=x.arrays[k];if(T.length){var M=u.getComponentMethod(k,"drawOne");if(M!==o.noop){for(var E=0;E<T.length;E++){M(e,T[E])}}else{var S=u.getComponentMethod(k,"draw");if(S===o.noop){throw new Error("cannot draw components: "+k)}S(e)}}}_.push(c.previousPromises);if(b.style)_.push(A.doTraceStyle);if(b.colorbars)_.push(A.doColorBars);if(x.legend)_.push(A.doLegend);if(x.layoutstyle)_.push(A.layoutStyles);if(x.axrange)H(_);if(x.ticks)_.push(A.doTicksRelayout);if(x.modebar)_.push(A.doModeBar);if(x.camera)_.push(A.doCamera);_.push(C)}_.push(c.rehover);s=o.syncOrAsync(_,e);if(!s||!s.then)s=Promise.resolve(e)}return s.then(function(){e.emit("plotly_react",{data:t,layout:n});return e})};function J(e,t,r,n){if(t.length!==r.length){return{fullReplot:true,calc:true}}var a=k.traceFlags();a.arrays={};var i,o;function s(e){return f.getTraceValObject(o,e)}var l={getValObject:s,flags:a,immutable:n,gd:e};var u={};for(i=0;i<t.length;i++){o=r[i]._fullInput;if(u[o.uid])continue;u[o.uid]=1;l.autoranged=o.xaxis?d.getFromId(e,o.xaxis).autorange||d.getFromId(e,o.yaxis).autorange:false;$(t[i]._fullInput,o,[],l)}if(a.calc||a.plot||a.calcIfAutorange){a.fullReplot=true}return a}function Q(e,t,r,n){var a=k.layoutFlags();a.arrays={};function i(e){return f.getLayoutValObject(r,e)}var o={getValObject:i,flags:a,immutable:n,gd:e};$(t,r,[],o);if(a.plot||a.calc){a.layoutReplot=true}return a}function $(e,t,r,n){var a,i;var s=n.getValObject;var l=n.flags;var u=n.immutable;var f=n.inArray;var c=n.arrayIndex;var h=n.gd;var d=n.autoranged;function v(){var e=a.editType;if(e.indexOf("calcIfAutorange")!==-1&&(d||d===undefined&&(Z(h,t,"x")||Z(h,t,"y")))){l.calc=true;return}if(f&&e.indexOf("arraydraw")!==-1){o.pushUnique(l.arrays[f],c);return}k.update(l,a)}function p(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(l.calc)return;var g=e[i];var m=t[i];if(i.charAt(0)==="_"||typeof g==="function"||g===m)continue;if(i==="tick0"||i==="dtick"){var y=t.tickmode;if(y==="auto"||y==="array"||!y)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;var b=r.concat(i);a=s(b);if(!a)continue;if(a._compareAsJSON&&JSON.stringify(g)===JSON.stringify(m))continue;var x=a.valType;var _;var w=p(a);var A=Array.isArray(g);var T=Array.isArray(m);if(A&&T){var M="_input_"+i;var E=e[M];var C=t[M];if(Array.isArray(E)&&E===C)continue}if(m===undefined){if(w&&A)l.calc=true;else v()}else if(a._isLinkedToArray){var S=[];var L=false;if(!f)l.arrays[i]=S;var O=Math.min(g.length,m.length);var I=Math.max(g.length,m.length);if(O!==I){if(a.editType==="arraydraw"){L=true}else{v();continue}}for(_=0;_<O;_++){$(g[_],m[_],b.concat(_),o.extendFlat({inArray:i,arrayIndex:_},n))}if(L){for(_=O;_<I;_++){S.push(_)}}}else if(!x&&o.isPlainObject(g)){$(g,m,b,n)}else if(w){if(A&&T){if(u){l.calc=true}}else if(A!==T){l.calc=true}else v()}else if(A&&T){if(g.length!==m.length||String(g)!==String(m)){v()}}else{v()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){a=s(r.concat(i));if(p(a)&&Array.isArray(t[i])){l.calc=true;return}else v()}}}function K(e,t){var r;for(r in e){var n=e[r];var a=t[r];if(n!==a){if(o.isPlainObject(n)&&o.isPlainObject(a)){if(K(n,a)){return true}}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length){return true}for(var i=0;i<n.length;i++){if(n[i]!==a[i]){if(o.isPlainObject(n[i])&&o.isPlainObject(a[i])){if(K(n[i],a[i])){return true}}else{return true}}}}else{return true}}}}r.animate=function(e,t,r){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plot.ly/javascript/animations/")}var n=e._transitionData;if(!n._frameQueue){n._frameQueue=[]}r=c.supplyAnimationDefaults(r);var a=r.transition;var i=r.frame;if(n._frameWaitingCnt===undefined){n._frameWaitingCnt=0}function s(e){if(Array.isArray(a)){if(e>=a.length){return a[0]}else{return a[e]}}else{return a}}function l(e){if(Array.isArray(i)){if(e>=i.length){return i[0]}else{return i[e]}}else{return i}}function u(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(i,f){function h(){if(n._frameQueue.length===0){return}while(n._frameQueue.length){var t=n._frameQueue.pop();if(t.onInterrupt){t.onInterrupt()}}e.emit("plotly_animationinterrupted",[])}function d(t){if(t.length===0)return;for(var a=0;a<t.length;a++){var o;if(t[a].type==="byname"){o=c.computeFrame(e,t[a].name)}else{o=t[a].data}var h=l(a);var d=s(a);d.duration=Math.min(d.duration,h.duration);var v={frame:o,name:t[a].name,frameOpts:h,transitionOpts:d};if(a===t.length-1){v.onComplete=u(i,2);v.onInterrupt=f}n._frameQueue.push(v)}if(r.mode==="immediate"){n._lastFrameAt=-Infinity}if(!n._animationRaf){g()}}function v(){e.emit("plotly_animated");window.cancelAnimationFrame(n._animationRaf);n._animationRaf=null}function p(){if(n._currentFrame&&n._currentFrame.onComplete){n._currentFrame.onComplete()}var t=n._currentFrame=n._frameQueue.shift();if(t){var r=t.name?t.name.toString():null;e._fullLayout._currentFrame=r;n._lastFrameAt=Date.now();n._timeToNext=t.frameOpts.duration;c.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){if(t.onComplete){t.onComplete()}});e.emit("plotly_animatingframe",{name:r,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else{v()}}function g(){e.emit("plotly_animating");n._lastFrameAt=-Infinity;n._timeToNext=0;n._runningTransitions=0;n._currentFrame=null;var t=function(){n._animationRaf=window.requestAnimationFrame(t);if(Date.now()-n._lastFrameAt>n._timeToNext){p()}};t()}var m=0;function y(e){if(Array.isArray(a)){if(m>=a.length){e.transitionOpts=a[m]}else{e.transitionOpts=a[0]}}else{e.transitionOpts=a}m++;return e}var b,x;var _=[];var A=t===undefined||t===null;var k=Array.isArray(t);var T=!A&&!k&&o.isPlainObject(t);if(T){_.push({type:"object",data:y(o.extendFlat({},t))})}else if(A||["string","number"].indexOf(typeof t)!==-1){for(b=0;b<n._frames.length;b++){x=n._frames[b];if(!x)continue;if(A||String(x.group)===String(t)){_.push({type:"byname",name:String(x.name),data:y({name:x.name})})}}}else if(k){for(b=0;b<t.length;b++){var M=t[b];if(["number","string"].indexOf(typeof M)!==-1){M=String(M);_.push({type:"byname",name:M,data:y({name:M})})}else if(o.isPlainObject(M)){_.push({type:"object",data:y(o.extendFlat({},M))})}}}for(b=0;b<_.length;b++){x=_[b];if(x.type==="byname"&&!n._frameHash[x.data.name]){o.warn('animate failure: frame not found: "'+x.data.name+'"');f();return}}if(["next","immediate"].indexOf(r.mode)!==-1){h()}if(r.direction==="reverse"){_.reverse()}var E=e._fullLayout._currentFrame;if(E&&r.fromcurrent){var C=-1;for(b=0;b<_.length;b++){x=_[b];if(x.type==="byname"&&x.name===E){C=b;break}}if(C>0&&C<_.length-1){var S=[];for(b=0;b<_.length;b++){x=_[b];if(_[b].type!=="byname"||b>C){S.push(x)}}_=S}}if(_.length>0){d(_)}else{e.emit("plotly_animated");i()}})};r.addFrames=function(e,t,r){e=o.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plot.ly/javascript/animations/")}var n,a,i,s;var u=e._transitionData._frames;var f=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var h=u.length+t.length*2;var d=[];var v={};for(n=t.length-1;n>=0;n--){if(!o.isPlainObject(t[n]))continue;var p=t[n].name;var g=(f[p]||v[p]||{}).name;var m=t[n].name;var y=f[g]||v[g];if(g&&m&&typeof m==="number"&&y&&M<E){M++;o.warn('addFrames: overwriting frame "'+(f[g]||v[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(M===E){o.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}v[p]={name:p};d.push({frame:c.supplyFrameDefaults(t[n]),index:r&&r[n]!==undefined&&r[n]!==null?r[n]:h+n})}d.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var b=[];var x=[];var _=u.length;for(n=d.length-1;n>=0;n--){a=d[n].frame;if(typeof a.name==="number"){o.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!a.name){while(f[a.name="frame "+e._transitionData._counter++]);}if(f[a.name]){for(i=0;i<u.length;i++){if((u[i]||{}).name===a.name)break}b.push({type:"replace",index:i,value:a});x.unshift({type:"replace",index:i,value:u[i]})}else{s=Math.max(0,Math.min(d[n].index,_));b.push({type:"insert",index:s,value:a});x.unshift({type:"delete",index:s});_++}}var w=c.modifyFrames,A=c.modifyFrames,k=[e,x],T=[e,b];if(l)l.add(e,w,k,A,T);return c.modifyFrames(e,b)};r.deleteFrames=function(e,t){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,n;var a=e._transitionData._frames;var i=[];var s=[];if(!t){t=[];for(r=0;r<a.length;r++){t.push(r)}}t=t.slice(0);t.sort();for(r=t.length-1;r>=0;r--){n=t[r];i.push({type:"delete",index:n});s.unshift({type:"insert",index:n,value:a[n]})}var u=c.modifyFrames,f=c.modifyFrames,h=[e,s],d=[e,i];if(l)l.add(e,u,h,f,d);return c.modifyFrames(e,i)};r.purge=function e(t){t=o.getGraphDiv(t);var r=t._fullLayout||{};var n=t._fullData||[];var a=t.calcdata||[];c.cleanPlot([],{},n,r,a);c.purge(t);s.purge(t);if(r._container)r._container.remove();delete t._context;return t};function ee(e){var t=n.select(e);var r=e._fullLayout;r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._glcanvas=null;r._paperdiv.selectAll(".main-svg").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var a={};n.selectAll("defs").each(function(){if(this.id)a[this.id.split("-")[1]]=1});r._uid=o.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(y.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var i=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=i.append("g").classed("imagelayer",true);r._shapeLowerLayer=i.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var s=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=s.append("g").classed("imagelayer",true);r._shapeUpperLayer=s.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._toppaper.append("g").classed("hoverlayer",true);e.emit("plotly_framework")}},{"../components/color":323,"../components/colorbar/connect":325,"../components/drawing":348,"../constants/xmlns_namespaces":426,"../lib":445,"../lib/events":435,"../lib/queue":460,"../lib/svg_text_utils":469,"../plots/cartesian/axes":492,"../plots/cartesian/constants":497,"../plots/cartesian/graph_interact":501,"../plots/plots":528,"../plots/polar/legacy":531,"../registry":536,"./edit_types":475,"./helpers":476,"./manage_arrays":478,"./plot_config":480,"./plot_schema":481,"./subroutines":483,d3:86,"fast-isnumeric":151,"has-hover":201}],480:[function(e,t,r){"use strict";t.exports={staticPlot:false,plotlyServerURL:"https://plot.ly",editable:false,edits:{annotationPosition:false,annotationTail:false,annotationText:false,axisTitleText:false,colorbarPosition:false,colorbarTitleText:false,legendPosition:false,legendText:false,shapePosition:false,titleText:false},autosizable:false,queueLength:0,fillFrame:false,frameMargins:0,scrollZoom:false,doubleClick:"reset+autosize",showTips:true,showAxisDragHandles:true,showAxisRangeEntryBoxes:true,showLink:false,sendData:true,linkText:"Edit chart",showSources:false,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:false,toImageButtonOptions:{},displaylogo:true,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],481:[function(e,t,r){"use strict";var n=e("../registry");var a=e("../lib");var i=e("../plots/attributes");var o=e("../plots/layout_attributes");var s=e("../plots/frame_attributes");var l=e("../plots/animation_attributes");var u=e("../plots/polar/legacy/area_attributes");var f=e("../plots/polar/legacy/axis_attributes");var c=e("./edit_types");var h=a.extendFlat;var d=a.extendDeepAll;var v=a.isPlainObject;var p="_isSubplotObj";var g="_isLinkedToArray";var m="_arrayAttrRegexps";var y="_deprecated";var b=[p,g,m,y];r.IS_SUBPLOT_OBJ=p;r.IS_LINKED_TO_ARRAY=g;r.DEPRECATED=y;r.UNDERSCORE_ATTRS=b;r.get=function(){var e={};n.allTypes.concat("area").forEach(function(t){e[t]=A(t)});var t={};Object.keys(n.transformsRegistry).forEach(function(e){t[e]=T(e)});return{defs:{valObjects:a.valObjectMeta,metaKeys:b.concat(["description","role","editType","impliedEdits"]),editType:{traces:c.traces,layout:c.layout},impliedEdits:{}},traces:e,layout:k(),transforms:t,frames:M(),animation:E(l)}};r.crawl=function(e,t,n,a){var i=n||0;a=a||"";Object.keys(e).forEach(function(n){var o=e[n];if(b.indexOf(n)!==-1)return;var s=(a?a+".":"")+n;t(o,n,e,i,s);if(r.isValObject(o))return;if(v(o)&&n!=="impliedEdits"){r.crawl(o,t,i+1,s)}})};r.isValObject=function(e){return e&&e.valType!==undefined};r.findArrayAttributes=function(e){var t=[];var n=[];var o=[];var s,l;function u(e,t,r,a){n=n.slice(0,a).concat([t]);o=o.slice(0,a).concat([e&&e._isLinkedToArray]);var i=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(n[a-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!i)return;f(s,0,"")}function f(e,r,i){var s=e[n[r]];var u=i+n[r];if(r===n.length-1){if(a.isArrayOrTypedArray(s)){t.push(l+u)}}else{if(o[r]){if(Array.isArray(s)){for(var c=0;c<s.length;c++){if(a.isPlainObject(s[c])){f(s[c],r+1,u+"["+c+"].")}}}}else if(a.isPlainObject(s)){f(s,r+1,u+".")}}}s=e;l="";r.crawl(i,u);if(e._module&&e._module.attributes){r.crawl(e._module.attributes,u)}var c=e.transforms;if(c){for(var h=0;h<c.length;h++){var d=c[h];var v=d._module;if(v){l="transforms["+h+"].";s=d;r.crawl(v.attributes,u)}}}return t};r.getTraceValObject=function(e,t){var r=t[0];var a=1;var o,s;if(r==="transforms"){if(t.length===1){return i.transforms}var l=e.transforms;if(!Array.isArray(l)||!l.length)return false;var f=t[1];if(!w(f)||f>=l.length){return false}o=(n.transformsRegistry[l[f].type]||{}).attributes;s=o&&o[t[2]];a=3}else if(e.type==="area"){s=u[r]}else{var c=e._module;if(!c)c=(n.modules[e.type||i.type.dflt]||{})._module;if(!c)return false;o=c.attributes;s=o&&o[r];if(!s){var h=c.basePlotModule;if(h&&h.attributes){s=h.attributes[r]}}if(!s)s=i[r]}return _(s,t,a)};r.getLayoutValObject=function(e,t){var r=x(e,t[0]);return _(r,t,1)};function x(e,t){var r,a,i,s;var l=e._basePlotModules;if(l){var u;for(r=0;r<l.length;r++){i=l[r];if(i.attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;if(!u&&i.layoutAttributes)u=i.layoutAttributes}var c=i.baseLayoutAttrOverrides;if(c&&t in c)return c[t]}if(u)return u}var h=e._modules;if(h){for(r=0;r<h.length;r++){s=h[r].layoutAttributes;if(s&&t in s){return s[t]}}}for(a in n.componentsRegistry){i=n.componentsRegistry[a];if(!i.schema&&t===i.name){return i.layoutAttributes}}if(t in o)return o[t];if(t==="radialaxis"||t==="angularaxis"){return f[t]}return f.layout[t]||false}function _(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(w(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var n=e[t[r]];if(v(n))e=n;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!w(t[r]))return false}else if(e.valType==="info_array"){r++;var a=t[r];if(!w(a))return false;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!w(o))return false;e=i[a][o]}else e=i[a]}else{e=i}}}return e}function w(e){return e===Math.round(e)&&e>=0}function A(e){var t,r;if(e==="area"){t={attributes:u};r={}}else{t=n.modules[e]._module,r=t.basePlotModule}var a={};a.type=null;d(a,i);d(a,t.attributes);if(r.attributes){d(a,r.attributes)}a.type=e;var o={meta:t.meta||{},attributes:E(a)};if(t.layoutAttributes){var s={};d(s,t.layoutAttributes);o.layoutAttributes=E(s)}return o}function k(){var e={};var t,r;d(e,o);for(t in n.subplotsRegistry){r=n.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var a=0;a<r.attr.length;a++){I(e,r,r.attr[a])}}else{var i=r.attr==="subplot"?r.name:r.attr;I(e,r,i)}}e=O(e);for(t in n.componentsRegistry){r=n.componentsRegistry[t];var s=r.schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis){for(var u in l.xaxis)delete e.yaxis[u]}}else if(r.layoutAttributes){D(e,r.layoutAttributes,r.name)}}return{layoutAttributes:E(e)}}function T(e){var t=n.transformsRegistry[e];var r=d({},t.attributes);Object.keys(n.componentsRegistry).forEach(function(t){var a=n.componentsRegistry[t];if(a.schema&&a.schema.transforms&&a.schema.transforms[e]){Object.keys(a.schema.transforms[e]).forEach(function(t){D(r,a.schema.transforms[e][t],t)})}});return{attributes:E(r)}}function M(){var e={frames:a.extendDeepAll({},s)};E(e);return e.frames}function E(e){C(e);S(e);L(e);return e}function C(e){function t(e){return{valType:"string",editType:"none"}}function n(e,n,a){if(r.isValObject(e)){if(e.valType==="data_array"){e.role="data";a[n+"src"]=t(n)}else if(e.arrayOk===true){a[n+"src"]=t(n)}}else if(v(e)){e.role="object"}}r.crawl(e,n)}function S(e){function t(e,t,r){if(!e)return;var n=e[g];if(!n)return;delete e[g];r[t]={items:{}};r[t].items[n]=e;r[t].role="object"}r.crawl(e,t)}function L(e){function t(e){for(var r in e){if(v(e[r])){t(e[r])}else if(Array.isArray(e[r])){for(var n=0;n<e[r].length;n++){t(e[r][n])}}else{if(e[r]instanceof RegExp){e[r]=e[r].toString()}}}}t(e)}function O(e){h(e,{radialaxis:f.radialaxis,angularaxis:f.angularaxis});h(e,f.layout);return e}function I(e,t,r){var n=a.nestedProperty(e,r),i=d({},t.layoutAttributes);i[p]=true;n.set(i)}function D(e,t,r){var n=a.nestedProperty(e,r);n.set(d(n.get()||{},t))}},{"../lib":445,"../plots/animation_attributes":487,"../plots/attributes":489,"../plots/frame_attributes":519,"../plots/layout_attributes":526,"../plots/polar/legacy/area_attributes":529,"../plots/polar/legacy/axis_attributes":530,"../registry":536,"./edit_types":475}],482:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plots/attributes");var i="templateitemname";var o={name:{valType:"string",editType:"none"}};o[i]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=o.name;t[i]=o[i];return t};r.traceTemplater=function(e){var t={};var r,i;for(r in e){i=e[r];if(Array.isArray(i)&&i.length){t[r]=0}}function o(o){r=n.coerce(o,{},a,"type");var s={type:r,_template:null};if(r in t){i=e[r];var l=t[r]%i.length;t[r]++;s._template=i[l]}else{}return s}return{newTrace:o}};r.newContainer=function(e,t,r){var a=e._template;var i=a&&(a[t]||r&&a[r]);if(!n.isPlainObject(i))i=null;var o=e[t]={_template:i};return o};r.arrayTemplater=function(e,t,r){var n=e._template;var a=n&&n[l(t)];var o=n&&n[t];if(!Array.isArray(o)||!o.length){o=[]}var u={};function f(e){var t={name:e.name,_input:e};var n=t[i]=e[i];if(!s(n)){t._template=a;return t}for(var l=0;l<o.length;l++){var f=o[l];if(f.name===n){u[n]=1;t._template=f;return t}}t[r]=e[r]||false;t._template=false;return t}function c(){var e=[];for(var t=0;t<o.length;t++){var r=o[t];var n=r.name;if(s(n)&&!u[n]){var a={_template:r,name:n,_input:{_templateitemname:n}};a[i]=r[i];e.push(a);u[n]=1}}return e}return{newItem:f,defaultItems:c}};function s(e){return e&&typeof e==="string"}function l(e){var t=e.length-1;if(e.charAt(t)!=="s"){n.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=l;r.arrayEditor=function(e,t,r){var a=(n.nestedProperty(e,t).get()||[]).length;var o=r._index;var s=o>=a&&(r._input||{})._templateitemname;if(s)o=a;var l=t+"["+o+"]";var u;function f(){u={};if(s){u[l]={};u[l][i]=s}}f();function c(e,t){u[e]=t}function h(e,t){if(s){n.nestedProperty(u[l],e).set(t)}else{u[l+"."+e]=t}}function d(){var e=u;f();return e}function v(t,r){if(t)h(t,r);var a=d();for(var i in a){n.nestedProperty(e,i).set(a[i])}}return{modifyBase:c,modifyItem:h,getUpdateObj:d,applyUpdate:v}}},{"../lib":445,"../plots/attributes":489}],483:[function(e,t,r){"use strict";var n=e("d3");var a=e("../registry");var i=e("../plots/plots");var o=e("../lib");var s=e("../lib/clear_gl_canvases");var l=e("../components/color");var u=e("../components/drawing");var f=e("../components/titles");var c=e("../components/modebar");var h=e("../plots/cartesian/axes");var d=e("../constants/alignment");var v=e("../plots/cartesian/constraints");var p=v.enforce;var g=v.clean;var m=e("../plots/cartesian/autorange").doAutoRange;r.layoutStyles=function(e){return o.syncOrAsync([i.doAutoMargin,b],e)};function y(e,t,r){for(var n=0;n<r.length;n++){var a=r[n][0],i=r[n][1];if(a[0]>=e[1]||a[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function b(e){var t=e._fullLayout;var a=t._size;var i=a.p;var s=h.list(e,"",true);var f=t._has("cartesian");var v;function p(e,t,r){var n=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return a.t+a.h*(1-(e.position||0))+n%1;else if(r==="top")return t._offset-i-n;return t._offset+t._length+i+n}if(!t)return a.l+a.w*(e.position||0)+n%1;else if(r==="right")return t._offset+t._length+i+n;return t._offset-i-n}for(v=0;v<s.length;v++){var g=s[v];g.setScale();var m=g._anchorAxis;g._linepositions={};g._lw=u.crispRound(e,g.linewidth,1);g._mainLinePosition=p(g,m,g.side);g._mainMirrorPosition=g.mirror&&m?p(g,m,d.OPPOSITE_SIDE[g.side]):null;g._mainSubplot=x(g,t)}t._paperdiv.style({width:t.width+"px",height:t.height+"px"}).selectAll(".main-svg").call(u.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);var b=t._paper.selectAll("g.subplot");var w=[];var k=[];b.each(function(e){var r=t._plots[e];if(r.mainplot){if(r.bg){r.bg.remove()}r.bg=undefined;return}var n=r.xaxis.domain;var a=r.yaxis.domain;var i=r.plotgroup;if(y(n,a,k)){var s=i.node();var l=r.bg=o.ensureSingle(i,"rect","bg");s.insertBefore(l.node(),s.childNodes[0])}else{i.select("rect.bg").remove();w.push(e);k.push([n,a])}});var T=t._bgLayer.selectAll(".bg").data(w);T.enter().append("rect").classed("bg",true);T.exit().remove();T.each(function(e){t._plots[e].bg=n.select(this)});b.each(function(e){var r=t._plots[e];var n=r.xaxis;var a=r.yaxis;if(r.bg&&f){r.bg.call(u.setRect,n._offset-i,a._offset-i,n._length+2*i,a._length+2*i).call(l.fill,t.plot_bgcolor).style("stroke-width",0)}var c=r.clipId="clip"+t._uid+e+"plot";var h=o.ensureSingleById(t._clips,"clipPath",c,function(e){e.classed("plotclip",true).append("rect")});r.clipRect=h.select("rect").attr({width:n._length,height:a._length});u.setTranslate(r.plot,n._offset,a._offset);var d;var v;if(r._hasClipOnAxisFalse){d=null;v=c}else{d=c;v=null}u.setClipUrl(r.plot,d);r.layerClipId=v;if(!f)return;var g,m,y,b,x,w;var k,T,M,E,C,S;var L;function O(e){return"M"+g+","+e+"H"+m}function I(e){return"M"+n._offset+","+e+"h"+n._length}function D(e){return"M"+e+","+T+"V"+k}function R(e){return"M"+e+","+a._offset+"v"+a._length}function P(t,r,n){if(!t.showline||e!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var a=r(t._mainLinePosition);if(t.mirror)a+=r(t._mainMirrorPosition);return a}var z="M0,0";if(_(n,e)){x=A(n,"left",a,s);g=n._offset-(x?i+x:0);w=A(n,"right",a,s);m=n._offset+n._length+(w?i+w:0);y=p(n,a,"bottom");b=p(n,a,"top");L=!n._anchorAxis||e!==n._mainSubplot;if(L&&n.ticks&&n.mirror==="allticks"){n._linepositions[e]=[y,b]}z=P(n,O,I);if(L&&n.showline&&(n.mirror==="all"||n.mirror==="allticks")){z+=O(y)+O(b)}r.xlines.style("stroke-width",n._lw+"px").call(l.stroke,n.showline?n.linecolor:"rgba(0,0,0,0)")}r.xlines.attr("d",z);var F="M0,0";if(_(a,e)){C=A(a,"bottom",n,s);k=a._offset+a._length+(C?i:0);S=A(a,"top",n,s);T=a._offset-(S?i:0);M=p(a,n,"left");E=p(a,n,"right");L=!a._anchorAxis||e!==n._mainSubplot;if(L&&a.ticks&&a.mirror==="allticks"){a._linepositions[e]=[M,E]}F=P(a,D,R);if(L&&a.showline&&(a.mirror==="all"||a.mirror==="allticks")){F+=D(M)+D(E)}r.ylines.style("stroke-width",a._lw+"px").call(l.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")}r.ylines.attr("d",F)});h.makeClipPaths(e);r.drawMainTitle(e);c.manage(e);return e._promises.length&&Promise.all(e._promises)}function x(e,t){var r=t._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a={_fullLayout:t};var i=e._id.charAt(0)==="x";var o=e._mainAxis._anchorAxis;var s="";var l="";var u="";if(o){u=o._mainAxis._id;s=i?e._id+u:u+e._id}if(!s||!t._plots[s]){s="";for(var f=0;f<n.length;f++){var c=n[f];var d=c.indexOf("y");var v=i?c.substr(0,d):c.substr(d);var p=i?c.substr(d):c.substr(0,d);if(v===e._id){if(!l)l=c;var g=h.getFromId(a,p);if(u&&g.overlaying===u){s=c;break}}}}return s||l}function _(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function w(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var n=r._anchorAxis;if(!n)return false;var a=d.FROM_BL[t];if(r.side===t){return n.domain[a]===e.domain[a]}return r.mirror&&n.domain[1-a]===e.domain[1-a]}function A(e,t,r,n){if(w(e,t,r)){return r._lw}for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&w(e,t,i)){return i._lw}}return 0}r.drawMainTitle=function(e){var t=e._fullLayout;f.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})};r.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t],n=((r[0]||{}).trace||{})._module||{},o=n.arraysToCalcdata;if(o)o(r,r[0].trace)}i.style(e);a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t][0];if((r.t||{}).cb){var n=r.trace,o=r.t.cb;if(a.traceIs(n,"contour")){o.line({width:n.contours.showlines!==false?n.line.width:0,dash:n.line.dash,color:n.contours.coloring==="line"?o._opts.line.color:n.line.color})}var s=n._module.colorbar;var l=s.container;var u=(l?n[l]:n).colorbar;o.options(u)()}}return i.previousPromises(e)};r.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return a.call("plot",e,"",t)};r.doLegend=function(e){a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doTicksRelayout=function(e,t){if(t){h.doTicks(e,Object.keys(t),true)}else{h.doTicks(e,"redraw")}if(e._fullLayout._hasOnlyLargeSploms){s(e);a.subplotsRegistry.splom.plot(e)}r.drawMainTitle(e);return i.previousPromises(e)};r.doModeBar=function(e){var t=e._fullLayout;c.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var n=t._basePlotModules[r].updateFx;if(n)n(t)}return i.previousPromises(e)};r.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._scene;i.setCamera(a.camera)}};r.drawData=function(e){var t=e._fullLayout;var r=e.calcdata;var n;for(n=0;n<r.length;n++){var o=r[n][0].trace;if(o.visible!==true||!o._module.colorbar){t._infolayer.select(".cb"+o.uid).remove()}}s(e);var l=t._basePlotModules;for(n=0;n<l.length;n++){l[n].plot(e)}i.style(e);a.getComponentMethod("shapes","draw")(e);a.getComponentMethod("annotations","draw")(e);t._replotting=false;return i.previousPromises(e)};r.doAutoRangeAndConstraints=function(e){var t=h.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];g(e,n);m(n)}p(e)};r.finalDraw=function(e){a.getComponentMethod("shapes","draw")(e);a.getComponentMethod("images","draw")(e);a.getComponentMethod("annotations","draw")(e);a.getComponentMethod("rangeslider","draw")(e);a.getComponentMethod("rangeselector","draw")(e)};r.drawMarginPushers=function(e){a.getComponentMethod("legend","draw")(e);a.getComponentMethod("rangeselector","draw")(e);a.getComponentMethod("sliders","draw")(e);a.getComponentMethod("updatemenus","draw")(e)}},{"../components/color":323,"../components/drawing":348,"../components/modebar":386,"../components/titles":414,"../constants/alignment":421,"../lib":445,"../lib/clear_gl_canvases":431,"../plots/cartesian/autorange":491,"../plots/cartesian/axes":492,"../plots/cartesian/constraints":499,"../plots/plots":528,"../registry":536,d3:86}],484:[function(e,t,r){"use strict";var n=e("../lib");var a=n.isPlainObject;var i=e("./plot_schema");var o=e("../plots/plots");var s=e("../plots/attributes");var l=e("./plot_template");var u=e("./plot_config");r.makeTemplate=function(e){e=n.extendDeep({_context:u},e);o.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(e){var t={};h(e,t,v.bind(null,e));var r=n.coerce(e,{},s,"type");var a=i.data[r];if(!a)a=i.data[r]=[];a.push(t)});h(r,i.layout,d.bind(null,r));delete i.layout.template;var l=r.template;if(a(l)){var c=l.layout;var p,g,m,y,b,x;if(a(c)){f(c,i.layout)}var _=l.data;if(a(_)){for(g in i.data){m=_[g];if(Array.isArray(m)){b=i.data[g];x=b.length;y=m.length;for(p=0;p<x;p++){f(m[p%y],b[p])}for(p=x;p<y;p++){b.push(n.extendDeep({},m[p]))}}}for(g in _){if(!(g in i.data)){i.data[g]=n.extendDeep([],_[g])}}}}return i};function f(e,t){e=n.extendDeep({},e);var r=Object.keys(e).sort();var i,o;function s(t,r,n){if(a(r)&&a(t)){f(t,r)}else if(Array.isArray(r)&&Array.isArray(t)){var i=l.arrayTemplater({_template:e},n);for(o=0;o<r.length;o++){var s=r[o];var u=i.newItem(s)._template;if(u)f(u,s)}var c=i.defaultItems();for(o=0;o<c.length;o++)r.push(c[o]._template);for(o=0;o<r.length;o++)delete r[o].templateitemname}}for(i=0;i<r.length;i++){var u=r[i];var h=e[u];if(u in t){s(h,t[u],u)}else t[u]=h;if(c(u)===u){for(var d in t){var v=c(d);if(d!==v&&v===u&&!(d in e)){s(h,t[d],u)}}}}}function c(e){return e.replace(/[0-9]+$/,"")}function h(e,t,r,i,o){var s=o&&r(o);for(var u in e){var f=e[u];var d=p(e,u,i);var v=p(e,u,o);var g=r(v);if(!g){var m=c(u);if(m!==u){v=p(e,m,o);g=r(v)}}if(s&&s===g)continue;if(!g||g._noTemplating||g.valType==="data_array"||g.arrayOk&&Array.isArray(f)){continue}if(!g.valType&&a(f)){h(f,t,r,d,v)}else if(g._isLinkedToArray&&Array.isArray(f)){var y=false;var b=0;var x={};for(var _=0;_<f.length;_++){var w=f[_];if(a(w)){var A=w.name;if(A){if(!x[A]){h(w,t,r,p(f,b,d),p(f,b,v));b++;x[A]=1}}else if(!y){var k=l.arrayDefaultKey(u);var T=p(e,k,i);var M=p(f,b,d);h(w,t,r,M,p(f,b,v));var E=n.nestedProperty(t,M);var C=n.nestedProperty(t,T);C.set(E.get());E.set(null);y=true}}}}else{var S=n.nestedProperty(t,d);S.set(f)}}}function d(e,t){return i.getLayoutValObject(e,n.nestedProperty({},t).parts)}function v(e,t){return i.getTraceValObject(e,n.nestedProperty({},t).parts)}function p(e,t,r){var n;if(!r)n=t;else if(Array.isArray(e))n=r+"["+t+"]";else n=r+"."+t;return n}r.validateTemplate=function(e,t){var r=n.extendDeep({},{_context:u,data:e.data,layout:e.layout});var i=r.layout||{};if(!a(t))t=i.template||{};var s=t.layout;var l=t.data;var f=[];r.layout=i;r.layout.template=t;o.supplyDefaults(r);var h=r._fullLayout;var d=r._fullData;var v={};function y(e,t){for(var r in e){if(r.charAt(0)!=="_"&&a(e[r])){var n=c(r);var i=[];var o;for(o=0;o<t.length;o++){i.push(p(e,r,t[o]));if(n!==r)i.push(p(e,n,t[o]))}for(o=0;o<i.length;o++){v[i[o]]=1}y(e[r],i)}}}function b(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&a(e[r])){var n=p(e,r,t);if(v[n]){b(e[r],n)}else{f.push({code:"unused",path:n})}}}}if(!a(s)){f.push({code:"layout"})}else{y(h,["layout"]);b(s,"layout")}if(!a(l)){f.push({code:"data"})}else{var x={};var _;for(var w=0;w<d.length;w++){var A=d[w];_=A.type;x[_]=(x[_]||0)+1;if(!A._fullInput._template){f.push({code:"missing",index:A._fullInput.index,traceType:_})}}for(_ in l){var k=l[_].length;var T=x[_]||0;if(k>T){f.push({code:"unused",traceType:_,templateCount:k,dataCount:T})}else if(T>k){f.push({code:"reused",traceType:_,templateCount:k,dataCount:T})}}}function M(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var n=e[r];var i=p(e,r,t);if(a(n)){if(Array.isArray(e)&&n._template===false&&n.templateitemname){f.push({code:"missing",path:i,templateitemname:n.templateitemname})}M(n,i)}else if(Array.isArray(n)&&g(n)){M(n,i)}}}M({data:d,layout:h},"");if(f.length)return f.map(m)};function g(e){for(var t=0;t<e.length;t++){if(a(e[t]))return true}}function m(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":445,"../plots/attributes":489,"../plots/plots":528,"./plot_config":480,"./plot_schema":481,"./plot_template":482}],485:[function(e,t,r){"use strict";var n=e("./plot_api");var a=e("../lib");var i=e("../snapshot/helpers");var o=e("../snapshot/tosvg");var s=e("../snapshot/svgtoimg");var l={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};var u=/^data:image\/\w+;base64,/;function f(e,t){t=t||{};var r;var f;var c;if(a.isPlainObject(e)){r=e.data||[];f=e.layout||{};c=e.config||{}}else{e=a.getGraphDiv(e);r=a.extendDeep([],e.data);f=a.extendDeep({},e.layout);c=e._context}function h(e){return!(e in t)||a.validate(t[e],l[e])}if(!h("width")||!h("height")){throw new Error("Height and width should be pixel values.")}if(!h("format")){throw new Error("Image format is not jpeg, png, svg or webp.")}var d={};function v(e,r){return a.coerce(t,d,l,e,r)}var p=v("format");var g=v("width");var m=v("height");var y=v("scale");var b=v("setBackground");var x=v("imageDataOnly");var _=document.createElement("div");_.style.position="absolute";_.style.left="-5000px";document.body.appendChild(_);var w=a.extendFlat({},f);if(g)w.width=g;if(m)w.height=m;var A=a.extendFlat({},c,{staticPlot:true,setBackground:b});var k=i.getRedrawFunc(_);function T(){return new Promise(function(e){setTimeout(e,i.getDelay(_._fullLayout))})}function M(){return new Promise(function(e,t){var r=o(_,p,y);var i=_._fullLayout.width;var l=_._fullLayout.height;n.purge(_);document.body.removeChild(_);if(p==="svg"){if(x){return e(r)}else{return e("data:image/svg+xml,"+encodeURIComponent(r))}}var u=document.createElement("canvas");u.id=a.randstr();s({format:p,width:i,height:l,scale:y,canvas:u,svg:r,promise:true}).then(e).catch(t)})}function E(e){if(x){return e.replace(u,"")}else{return e}}return new Promise(function(e,t){n.plot(_,r,w,A).then(k).then(T).then(M).then(function(t){e(E(t))}).catch(function(e){t(e)})})}t.exports=f},{"../lib":445,"../snapshot/helpers":540,"../snapshot/svgtoimg":542,"../snapshot/tosvg":544,"./plot_api":479}],486:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plots/plots");var i=e("./plot_schema");var o=e("./plot_config");var s=n.isPlainObject;var l=Array.isArray;var u=n.isArrayOrTypedArray;t.exports=function e(t,r){var u=i.get();var h=[];var d={_context:n.extendFlat({},o)};var p,g;if(l(t)){d.data=n.extendDeep([],t);p=t}else{d.data=[];p=[];h.push(v("array","data"))}if(s(r)){d.layout=n.extendDeep({},r);g=r}else{d.layout={};g={};if(arguments.length>1){h.push(v("object","layout"))}}a.supplyDefaults(d);var m=d._fullData,y=p.length;for(var b=0;b<y;b++){var x=p[b],_=["data",b];if(!s(x)){h.push(v("object",_));continue}var w=m[b],A=w.type,k=u.traces[A].attributes;k.type={valType:"enumerated",values:[A]};if(w.visible===false&&x.visible!==false){h.push(v("invisible",_))}f(x,w,k,h,_);var T=x.transforms,M=w.transforms;if(T){if(!l(T)){h.push(v("array",_,["transforms"]))}_.push("transforms");for(var E=0;E<T.length;E++){var C=["transforms",E],S=T[E].type;if(!s(T[E])){h.push(v("object",_,C));continue}var L=u.transforms[S]?u.transforms[S].attributes:{};L.type={valType:"enumerated",values:Object.keys(u.transforms)};f(T[E],M[E],L,h,_,C)}}}var O=d._fullLayout,I=c(u,m);f(g,O,I,h,"layout");return h.length===0?void 0:h};function f(e,t,r,a,i,o){o=o||[];var c=Object.keys(e);for(var h=0;h<c.length;h++){var d=c[h];if(d==="transforms")continue;var m=o.slice();m.push(d);var y=e[d],b=t[d];var x=g(r,d);var _=(x||{}).valType==="info_array";var w=(x||{}).valType==="colorscale";var A=(x||{}).items;if(!p(r,d)){a.push(v("schema",i,m))}else if(s(y)&&s(b)){f(y,b,x,a,i,m)}else if(_&&l(y)){if(y.length>b.length){a.push(v("unused",i,m.concat(b.length)))}var k=b.length;var T=Array.isArray(A);if(T)k=Math.min(k,A.length);var M,E,C,S,L;if(x.dimensions===2){for(E=0;E<k;E++){if(l(y[E])){if(y[E].length>b[E].length){a.push(v("unused",i,m.concat(E,b[E].length)))}var O=b[E].length;for(M=0;M<(T?Math.min(O,A[E].length):O);M++){C=T?A[E][M]:A;S=y[E][M];L=b[E][M];if(!n.validate(S,C)){a.push(v("value",i,m.concat(E,M),S))}else if(L!==S&&L!==+S){a.push(v("dynamic",i,m.concat(E,M),S,L))}}}else{a.push(v("array",i,m.concat(E),y[E]))}}}else{for(E=0;E<k;E++){C=T?A[E]:A;S=y[E];L=b[E];if(!n.validate(S,C)){a.push(v("value",i,m.concat(E),S))}else if(L!==S&&L!==+S){a.push(v("dynamic",i,m.concat(E),S,L))}}}}else if(x.items&&!_&&l(y)){var I=A[Object.keys(A)[0]],D=[];var R,P;for(R=0;R<b.length;R++){var z=b[R]._index||R;P=m.slice();P.push(z);if(s(y[z])&&s(b[R])){D.push(z);var F=y[z];var B=b[R];if(s(F)&&F.visible!==false&&B.visible===false){a.push(v("invisible",i,P))}else f(F,B,I,a,i,P)}}for(R=0;R<y.length;R++){P=m.slice();P.push(R);if(!s(y[R])){a.push(v("object",i,P,y[R]))}else if(D.indexOf(R)===-1){a.push(v("unused",i,P))}}}else if(!s(y)&&s(b)){a.push(v("object",i,m,y))}else if(!u(y)&&u(b)&&!_&&!w){a.push(v("array",i,m,y))}else if(!(d in t)){a.push(v("unused",i,m,y))}else if(!n.validate(y,x)){a.push(v("value",i,m,y))}else if(x.valType==="enumerated"&&(x.coerceNumber&&y!==+b||y!==b)){a.push(v("dynamic",i,m,y,b))}}return a}function c(e,t){for(var r=0;r<t.length;r++){var a=t[r].type,i=e.traces[a].layoutAttributes;if(i){n.extendFlat(e.layout.layoutAttributes,i)}}return e.layout.layoutAttributes}var h={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=d(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=d(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return d(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=s(r)?"container":"key";return d(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[d(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?d(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[d(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function d(e){if(l(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function v(e,t,r,a,i){r=r||"";var o,s;if(l(t)){o=t[0];s=t[1]}else{o=t;s=null}var u=b(r);var f=h[e](t,u,a,i);n.log(f);return{code:e,container:o,trace:s,path:r,astr:u,msg:f}}function p(e,t){var r=y(t),n=r.keyMinusId,a=r.id;if(n in e&&e[n]._isSubplotObj&&a){return true}return t in e}function g(e,t){if(t in e)return e[t];var r=y(t);return e[r.keyMinusId]}var m=n.counterRegex("([a-z]+)");function y(e){var t=e.match(m);return{keyMinusId:t&&t[1],id:t&&t[2]}}function b(e){if(!l(e))return String(e);var t="";for(var r=0;r<e.length;r++){var n=e[r];if(typeof n==="number"){t=t.substr(0,t.length-1)+"["+n+"]"}else{t+=n}if(r<e.length-1)t+="."}return t}},{"../lib":445,"../plots/plots":528,"./plot_config":480,"./plot_schema":481}],487:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],488:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plot_api/plot_template");t.exports=function e(t,r,i){var o=i.name;var s=i.inclusionAttr||"visible";var l=r[o];var u=n.isArrayOrTypedArray(t[o])?t[o]:[];var f=r[o]=[];var c=a.arrayTemplater(r,o,s);var h,d;for(h=0;h<u.length;h++){var v=u[h];if(!n.isPlainObject(v)){d=c.newItem({});d[s]=false}else{d=c.newItem(v)}d._index=h;if(d[s]!==false){i.handleItemDefaults(v,d,r,i)}f.push(d)}var p=c.defaultItems();for(h=0;h<p.length;h++){d=p[h];d._index=f.length;i.handleItemDefaults({},d,r,i,{});f.push(d)}if(n.isArrayOrTypedArray(l)){var g=Math.min(l.length,f.length);for(h=0;h<g;h++){n.relinkPrivateKeys(f[h],l[h])}}return f}},{"../lib":445,"../plot_api/plot_template":482}],489:[function(e,t,r){"use strict";var n=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:n.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"}}},{"../components/fx/attributes":357}],490:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],491:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").FP_SAFE;t.exports={getAutoRange:o,makePadFn:s,doAutoRange:l,expand:f};function o(e){var t=[];var r=e._min[0].val;var n=e._max[0].val;var i=0;var o=false;var l=s(e);var u,f,c,h,d,v,p,g;for(u=1;u<e._min.length;u++){if(r!==n)break;r=Math.min(r,e._min[u].val)}for(u=1;u<e._max.length;u++){if(r!==n)break;n=Math.max(n,e._max[u].val)}if(e.range){var m=a.simpleMap(e.range,e.r2l);o=m[1]<m[0]}if(e.autorange==="reversed"){o=true;e.autorange=true}for(u=0;u<e._min.length;u++){c=e._min[u];for(f=0;f<e._max.length;f++){h=e._max[f];g=h.val-c.val;p=e._length-l(c)-l(h);if(g>0&&p>0&&g/p>i){d=c;v=h;i=g/p}}}if(r===n){var y=r-1;var b=r+1;if(e.rangemode==="tozero"){t=r<0?[y,0]:[0,b]}else if(e.rangemode==="nonnegative"){t=[Math.max(0,y),Math.max(0,b)]}else{t=[y,b]}}else if(i){if(e.type==="linear"||e.type==="-"){if(e.rangemode==="tozero"){if(d.val>=0){d={val:0,pad:0}}if(v.val<=0){v={val:0,pad:0}}}else if(e.rangemode==="nonnegative"){if(d.val-i*l(d)<0){d={val:0,pad:0}}if(v.val<0){v={val:1,pad:0}}}i=(v.val-d.val)/(e._length-l(d)-l(v))}t=[d.val-i*l(d),v.val+i*l(v)]}if(t[0]===t[1]){if(e.rangemode==="tozero"){if(t[0]<0){t=[t[0],0]}else if(t[0]>0){t=[0,t[0]]}else{t=[0,1]}}else{t=[t[0]-1,t[0]+1];if(e.rangemode==="nonnegative"){t[0]=Math.max(0,t[0])}}}if(o)t.reverse();return a.simpleMap(t,e.l2r||Number)}function s(e){var t=e._length/20;if(e.constrain==="domain"&&e._inputDomain){t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])}return function e(r){return r.pad+(r.extrapad?t:0)}}function l(e){if(!e._length)e.setScale();var t=e._min&&e._max&&e._min.length&&e._max.length;var r;if(e.autorange&&t){e.range=o(e);e._r=e.range.slice();e._rl=a.simpleMap(e._r,e.r2l);r=e._input;r.range=e.range.slice();r.autorange=e.autorange}if(e._anchorAxis&&e._anchorAxis.rangeslider){var n=e._anchorAxis.rangeslider[e._name];if(n){if(n.rangemode==="auto"){if(t){n.range=o(e)}else{n.range=e._rangeInitial?e._rangeInitial.slice():e.range.slice()}}}r=e._anchorAxis._input;r.rangeslider[e._name]=a.extendFlat({},n)}}function u(e){return e.autorange||e._rangesliderAutorange}function f(e,t,r){if(!u(e)||!t)return;if(!e._min)e._min=[];if(!e._max)e._max=[];if(!r)r={};if(!e._m)e.setScale();var a=t.length;var o=r.padded||false;var s=r.tozero&&(e.type==="linear"||e.type==="-");var l=e.type==="log";var f,v,p,g,m,y,b,x,_,w,A,k;var T=false;function M(e){if(Array.isArray(e)){T=true;return function(t){return Math.max(Number(e[t]||0),0)}}else{var t=Math.max(Number(e||0),0);return function(){return t}}}var E=M((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0);var C=M((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0);var S=M(r.vpadplus||r.vpad);var L=M(r.vpadminus||r.vpad);if(!T){A=Infinity;k=-Infinity;if(l){for(f=0;f<a;f++){g=t[f];if(g<A&&g>0)A=g;if(g>k&&g<i)k=g}}else{for(f=0;f<a;f++){g=t[f];if(g<A&&g>-i)A=g;if(g>k&&g<i)k=g}}t=[A,k];a=2}function O(r){m=t[r];if(!n(m))return;x=E(r);_=C(r);A=m-L(r);k=m+S(r);if(l&&A<k/10)A=k/10;y=e.c2l(A);b=e.c2l(k);if(s){y=Math.min(0,y);b=Math.max(0,b)}for(p=0;p<2;p++){var a=p?b:y;if(c(a)){var i=p?e._max:e._min;var u=p?x:_;var f=p?d:h;w=true;for(v=0;v<i.length&&w;v++){g=i[v];if(f(g.val,a)&&g.pad>=u&&(g.extrapad||!o)){w=false;break}else if(f(a,g.val)&&g.pad<=u&&(o||!g.extrapad)){i.splice(v,1);v--}}if(w){var T=s&&a===0;i.push({val:a,pad:T?0:u,extrapad:T?false:o})}}}}var I=Math.min(6,a);for(f=0;f<I;f++)O(f);for(f=a-1;f>=I;f--)O(f)}function c(e){return n(e)&&Math.abs(e)<i}function h(e,t){return e<=t}function d(e,t){return e>=t}},{"../../constants/numerical":424,"../../lib":445,"fast-isnumeric":151}],492:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var s=e("../../lib");var l=e("../../lib/svg_text_utils");var u=e("../../components/titles");var f=e("../../components/color");var c=e("../../components/drawing");var h=e("../../constants/numerical");var d=h.ONEAVGYEAR;var v=h.ONEAVGMONTH;var p=h.ONEDAY;var g=h.ONEHOUR;var m=h.ONEMIN;var y=h.ONESEC;var b=h.MINUS_SIGN;var x=h.BADNUM;var _=e("../../constants/alignment").MID_SHIFT;var w=e("../../constants/alignment").LINE_SPACING;var A=t.exports={};A.setConvert=e("./set_convert");var k=e("./axis_autotype");var T=e("./axis_ids");A.id2name=T.id2name;A.name2id=T.name2id;A.cleanId=T.cleanId;A.list=T.list;A.listIds=T.listIds;A.getFromId=T.getFromId;A.getFromTrace=T.getFromTrace;var M=e("./autorange");A.expand=M.expand;A.getAutoRange=M.getAutoRange;A.coerceRef=function(e,t,r,n,a,i){var o=n.charAt(n.length-1);var l=r._fullLayout._subplots[o+"axis"];var u=n+"ref";var f={};if(!a)a=l[0]||i;if(!i)i=a;f[u]={valType:"enumerated",values:l.concat(i?[i]:[]),dflt:a};return s.coerce(e,t,f,u)};A.coercePosition=function(e,t,r,n,a,i){var o,l;if(n==="paper"||n==="pixel"){o=s.ensureNumber;l=r(a,i)}else{var u=A.getFromId(t,n);i=u.fraction2r(i);l=r(a,i);o=u.cleanPos}e[a]=o(l)};A.cleanPosition=function(e,t,r){var n=r==="paper"||r==="pixel"?s.ensureNumber:A.getFromId(t,r).cleanPos;return n(e)};var E=A.getDataConversions=function(e,t,r,n){var a;var i=r==="x"||r==="y"||r==="z"?r:n;if(Array.isArray(i)){a={type:k(n),_categories:[]};A.setConvert(a);if(a.type==="category"){for(var o=0;o<n.length;o++){a.d2c(n[o])}}}else{a=A.getFromTrace(e,t,i)}if(a)return{d2c:a.d2c,c2d:a.c2d};if(i==="ids")return{d2c:S,c2d:S};return{d2c:C,c2d:C}};function C(e){return+e}function S(e){return String(e)}A.getDataToCoordFunc=function(e,t,r,n){return E(e,t,r,n).d2c};A.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};A.minDtick=function(e,t,r,n){if(["log","category"].indexOf(e.type)!==-1||!n){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};A.saveRangeInitial=function(e,t){var r=A.list(e,"",true),n=false;for(var a=0;a<r.length;a++){var i=r[a];var o=i._rangeInitial===undefined;var s=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&s){i._rangeInitial=i.range.slice();n=true}}return n};A.saveShowSpikeInitial=function(e,t){var r=A.list(e,"",true),n=false,a="on";for(var i=0;i<r.length;i++){var o=r[i];var s=o._showSpikeInitial===undefined;var l=s||!(o.showspikes===o._showspikes);if(s||t&&l){o._showSpikeInitial=o.showspikes;n=true}if(a==="on"&&!o.showspikes){a="off"}}e._fullLayout._cartesianSpikesEnabled=a;return n};A.autoBin=function(e,t,r,n,i){var o=s.aggNums(Math.min,null,e),l=s.aggNums(Math.max,null,e);if(!i)i=t.calendar;if(t.type==="category"){return{start:o-.5,end:l+.5,size:1,_dataSpan:l-o}}var u;if(r)u=(l-o)/r;else{var f=s.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=c*s.roundUp(f.minDiff/c,[.9,1.9,4.9,9.9],true);u=Math.max(h,2*s.stdev(e)/Math.pow(e.length,n?.25:.4));if(!a(u))u=1}var d;if(t.type==="log"){d={type:"linear",range:[o,l]}}else{d={type:t.type,range:s.simpleMap([o,l],t.c2r,0,i),calendar:i}}A.setConvert(d);A.autoTicks(d,u);var v=A.tickIncrement(A.tickFirst(d),d.dtick,"reverse",i);var p,g;if(typeof d.dtick==="number"){v=L(v,e,d,o,l);g=1+Math.floor((l-v)/d.dtick);p=v+g*d.dtick}else{if(d.dtick.charAt(0)==="M"){v=O(v,e,d.dtick,o,i)}p=v;g=0;while(p<=l){p=A.tickIncrement(p,d.dtick,false,i);g++}}return{start:t.c2r(v,0,i),end:t.c2r(p,0,i),size:d.dtick,_dataSpan:l-o}};function L(e,t,r,n,i){var o=0,s=0,l=0,u=0;function f(t){return(1+(t-e)*100/r.dtick)%100<2}for(var c=0;c<t.length;c++){if(t[c]%1===0)l++;else if(!a(t[c]))u++;if(f(t[c]))o++;if(f(t[c]+r.dtick/2))s++}var h=t.length-u;if(l===h&&r.type!=="date"){if(r.dtick<1){e=n-.5*r.dtick}else{e-=.5;if(e+r.dtick<n)e+=r.dtick}}else if(s<h*.1){if(o>h*.3||f(n)||f(i)){var d=r.dtick/2;e+=e+d<n?d:-d}}return e}function O(e,t,r,n,a){var i=s.findExactDates(t,a);var o=.8;if(i.exactDays>o){var l=Number(r.substr(1));if(i.exactYears>o&&l%12===0){e=A.tickIncrement(e,"M6","reverse")+p*1.5}else if(i.exactMonths>o){e=A.tickIncrement(e,"M1","reverse")+p*15.5}else{e-=p/2}var u=A.tickIncrement(e,r);if(u<=n)return u}return e}A.prepTicks=function(e){var t=s.simpleMap(e.range,e.r2l);if(e.tickmode==="auto"||!e.dtick){var r=e.nticks,n;if(!r){if(e.type==="category"){n=e.tickfont?(e.tickfont.size||12)*1.2:15;r=e._length/n}else{n=e._id.charAt(0)==="y"?40:80;r=s.constrain(e._length/n,4,9)+1}if(e._name==="radialaxis")r*=2}if(e.tickmode==="array")r*=100;A.autoTicks(e,Math.abs(t[1]-t[0])/r);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}U(e)};A.calcTicks=function e(t){A.prepTicks(t);var r=s.simpleMap(t.range,t.r2l);if(t.tickmode==="array")return I(t);t._tmin=A.tickFirst(t);var n=r[0]*1.0001-r[1]*1e-4;var a=r[1]*1.0001-r[0]*1e-4;var i=r[1]<r[0];if(t._tmin<n!==i)return[];var o=[];if(t.type==="category"){a=i?Math.max(-.5,a):Math.min(t._categories.length-.5,a)}var l=null;var u=Math.max(1e3,t._length||0);for(var f=t._tmin;i?f>=a:f<=a;f=A.tickIncrement(f,t.dtick,i,t.calendar)){if(o.length>u||f===l)break;l=f;o.push(f)}if(t._id==="angular"&&Math.abs(r[1]-r[0])===360){o.pop()}t._tmax=o[o.length-1];t._prevDateHead="";t._inCalcTicks=true;var c=new Array(o.length);for(var h=0;h<o.length;h++)c[h]=A.tickText(t,o[h]);t._inCalcTicks=false;return c};function I(e){var t=e.tickvals,r=e.ticktext,n=new Array(t.length),a=s.simpleMap(e.range,e.r2l),i=a[0]*1.0001-a[1]*1e-4,o=a[1]*1.0001-a[0]*1e-4,l=Math.min(i,o),u=Math.max(i,o),f,c,h=0;if(!Array.isArray(r))r=[];var d=e.type==="category"?e.d2l_noadd:e.d2l;if(e.type==="log"&&String(e.dtick).charAt(0)!=="L"){e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)}for(c=0;c<t.length;c++){f=d(t[c]);if(f>l&&f<u){if(r[c]===undefined)n[h]=A.tickText(e,f);else n[h]=V(e,f,String(r[c]));h++}}if(h<t.length)n.splice(h,t.length-h);return n}var D=[2,5,10],R=[1,2,3,6,12],P=[1,2,5,10,15,30],z=[1,2,3,7,14],F=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],B=[-.301,0,.301,.699,1],N=[15,30,45,90,180];function j(e,t,r){return t*s.roundUp(e/t,r)}A.autoTicks=function(e,t){var r;function n(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=s.dateTick0(e.calendar);var i=2*t;if(i>d){t/=d;r=n(10);e.dtick="M"+12*j(t,r,D)}else if(i>v){t/=v;e.dtick="M"+j(t,1,R)}else if(i>p){e.dtick=j(t,p,z);e.tick0=s.dateTick0(e.calendar,true)}else if(i>g){e.dtick=j(t,g,R)}else if(i>m){e.dtick=j(t,m,P)}else if(i>y){e.dtick=j(t,y,P)}else{r=n(10);e.dtick=j(t,r,D)}}else if(e.type==="log"){e.tick0=0;var o=s.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(o[1]-o[0])<1){var l=1.5*Math.abs((o[1]-o[0])/t);t=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/l;r=n(10);e.dtick="L"+j(t,r,D)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(e._id==="angular"){e.tick0=0;r=1;e.dtick=j(t,r,N)}else{e.tick0=0;r=n(10);e.dtick=j(t,r,D)}if(e.dtick===0)e.dtick=1;if(!a(e.dtick)&&typeof e.dtick!=="string"){var u=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(u)}};function U(e){var t=e.dtick;e._tickexponent=0;if(!a(t)&&typeof t!=="string"){t=1}if(e.type==="category"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0),n=e.l2r(r).replace(/(^-|i)/g,""),i=n.length;if(String(t).charAt(0)==="M"){if(i>10||n.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=p&&i<=10||t>=p*15)e._tickround="d";else if(t>=m&&i<=16||t>=g)e._tickround="M";else if(t>=y&&i<=19||t>=m)e._tickround="S";else{var o=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(i,o)-20}}else if(a(t)||t.charAt(0)==="L"){var s=e.range.map(e.r2d||Number);if(!a(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1]));var u=Math.floor(Math.log(l)/Math.LN10+.01);if(Math.abs(u)>3){if(J(e.exponentformat)&&!Q(u)){e._tickexponent=3*Math.round((u-1)/3)}else e._tickexponent=u}}else e._tickround=null}A.tickIncrement=function(e,t,r,i){var o=r?-1:1;if(a(t))return e+o*t;var l=t.charAt(0),u=o*Number(t.substr(1));if(l==="M")return s.incrementMonth(e,u,i);else if(l==="L")return Math.log(Math.pow(10,e)+u)/Math.LN10;else if(l==="D"){var f=t==="D2"?B:F,c=e+o*.01,h=s.roundUp(s.mod(c,1),f,r);return Math.floor(c)+Math.log(n.round(Math.pow(10,h),1))/Math.LN10}else throw"unrecognized dtick "+String(t)};A.tickFirst=function(e){var t=e.r2l||Number,r=s.simpleMap(e.range,t),i=r[1]<r[0],o=i?Math.floor:Math.ceil,l=r[0]*1.0001-r[1]*1e-4,u=e.dtick,f=t(e.tick0);if(a(u)){var c=o((l-f)/u)*u+f;if(e.type==="category"){c=s.constrain(c,0,e._categories.length-1)}return c}var h=u.charAt(0),d=Number(u.substr(1));if(h==="M"){var v=0,p=f,g,m,y;while(v<10){g=A.tickIncrement(p,u,i,e.calendar);if((g-l)*(p-l)<=0){if(i)return Math.min(p,g);return Math.max(p,g)}m=(l-(p+g)/2)/(g-p);y=h+(Math.abs(Math.round(m))||1)*d;p=A.tickIncrement(p,y,m<0?!i:i,e.calendar);v++}s.error("tickFirst did not converge",e);return p}else if(h==="L"){return Math.log(o((Math.pow(10,l)-f)/d)*d+f)/Math.LN10}else if(h==="D"){var b=u==="D2"?B:F,x=s.roundUp(s.mod(l,1),b,i);return Math.floor(l)+Math.log(n.round(Math.pow(10,x),1))/Math.LN10}else throw"unrecognized dtick "+String(u)};A.tickText=function(e,t,r){var n=V(e,t),a,i=e.tickmode==="array",o=r||i,l,u=e.type==="category"?e.d2l_noadd:e.d2l;if(i&&Array.isArray(e.ticktext)){var f=s.simpleMap(e.range,e.r2l),c=Math.abs(f[1]-f[0])/1e4;for(l=0;l<e.ticktext.length;l++){if(Math.abs(t-u(e.tickvals[l]))<c)break}if(l<e.ticktext.length){n.text=String(e.ticktext[l]);return n}}function h(n){var a;if(n===undefined)return true;if(r)return n==="none";a={first:e._tmin,last:e._tmax}[n];return n!=="all"&&t!==a}if(r){a="never"}else{a=e.exponentformat!=="none"&&h(e.showexponent)?"hide":""}if(e.type==="date")H(e,n,r,o);else if(e.type==="log")q(e,n,r,o,a);else if(e.type==="category")G(e,n);else if(e._id==="angular")W(e,n,r,o,a);else X(e,n,r,o,a);if(e.tickprefix&&!h(e.showtickprefix))n.text=e.tickprefix+n.text;if(e.ticksuffix&&!h(e.showticksuffix))n.text+=e.ticksuffix;return n};A.hoverLabelText=function(e,t,r){if(r!==x&&r!==t){return A.hoverLabelText(e,t)+" - "+A.hoverLabelText(e,r)}var n=e.type==="log"&&t<=0;var a=A.tickText(e,e.c2l(n?-t:t),"hover").text;if(n){return t===0?"0":b+a}return a};function V(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function H(e,t,r,n){var i=e._tickround,o=r&&e.hoverformat||A.getTickFormat(e);if(n){if(a(i))i=4;else i={y:"m",m:"d",d:"M",M:"S",S:4}[i]}var l=s.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat),u;var f=l.indexOf("\n");if(f!==-1){u=l.substr(f+1);l=l.substr(0,f)}if(n){if(l==="00:00:00"||l==="00:00"){l=u;u=""}else if(l.length===8){l=l.replace(/:00$/,"")}}if(u){if(r){if(i==="d")l+=", "+u;else l=u+(l?", "+l:"")}else if(!e._inCalcTicks||u!==e._prevDateHead){l+="<br>"+u;e._prevDateHead=u}}t.text=l}function q(e,t,r,n,i){var o=e.dtick,l=t.x,u=e.tickformat;if(i==="never"){i=""}if(n&&(typeof o!=="string"||o.charAt(0)!=="L"))o="L3";if(u||typeof o==="string"&&o.charAt(0)==="L"){t.text=$(Math.pow(10,l),e,i,n)}else if(a(o)||o.charAt(0)==="D"&&s.mod(l+.01,1)<.1){var f=Math.round(l);if(["e","E","power"].indexOf(e.exponentformat)!==-1||J(e.exponentformat)&&Q(f)){if(f===0)t.text=1;else if(f===1)t.text="10";else if(f>1)t.text="10<sup>"+f+"</sup>";else t.text="10<sup>"+b+-f+"</sup>";t.fontSize*=1.25}else{t.text=$(Math.pow(10,l),e,"","fakehover");if(o==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(o.charAt(0)==="D"){t.text=String(Math.round(Math.pow(10,s.mod(l,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(o);if(e.dtick==="D1"){var c=String(t.text).charAt(0);if(c==="0"||c==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(l<0?.5:.25)}}}}function G(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function X(e,t,r,n,a){if(a==="never"){a=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){a="hide"}t.text=$(t.x,e,a,n)}function W(e,t,r,n,a){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=Y(i);if(o[1]>=100){t.text=$(s.deg2rad(t.x),e,a,n)}else{var l=t.x<0;if(o[1]===1){if(o[0]===1)t.text="\u03c0";else t.text=o[0]+"\u03c0"}else{t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join("")}if(l)t.text=b+t.text}}}else{t.text=$(t.x,e,a,n)}}function Y(e){function t(e,t){return Math.abs(e-t)<=1e-6}function r(e,n){return t(n,0)?e:r(n,e%n)}function n(e){var r=1;while(!t(Math.round(e*r)/r,e)){r*=10}return r}var a=n(e);var i=e*a;var o=Math.abs(r(i,a));return[Math.round(i/o),Math.round(a/o)]}var Z=["f","p","n","\u03bc","m","","k","M","G","T"];function J(e){return e==="SI"||e==="B"}function Q(e){return e>14||e<-15}function $(e,t,r,n){var i=e<0,o=t._tickround,l=r||t.exponentformat||"B",u=t._tickexponent,f=A.getTickFormat(t),c=t.separatethousands;if(n){var h={exponentformat:l,dtick:t.showexponent==="none"?t.dtick:a(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};U(h);o=(Number(h._tickround)||0)+4;u=h._tickexponent;if(t.hoverformat)f=t.hoverformat}if(f)return t._numFormat(f)(e).replace(/-/g,b);var d=Math.pow(10,-o)/2;if(l==="none")u=0;e=Math.abs(e);if(e<d){e="0";i=false}else{e+=d;if(u){e*=Math.pow(10,-u);o+=u}if(o===0)e=String(Math.floor(e));else if(o<0){e=String(Math.round(e));e=e.substr(0,e.length+o);for(var v=o;v<0;v++)e+="0"}else{e=String(e);var p=e.indexOf(".")+1;if(p)e=e.substr(0,p+o).replace(/\.?0+$/,"")}e=s.numSeparate(e,t._separators,c)}if(u&&l!=="hide"){if(J(l)&&Q(u))l="power";var g;if(u<0)g=b+-u;else if(l!=="power")g="+"+u;else g=String(u);if(l==="e"){e+="e"+g}else if(l==="E"){e+="E"+g}else if(l==="power"){e+="\xd710<sup>"+g+"</sup>"}else if(l==="B"&&u===9){e+="B"}else if(J(l)){e+=Z[u/3+5]}}if(i)return b+e;return e}A.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*v}function n(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var n=r.indexOf(e.charAt(0));var a=r.indexOf(t.charAt(0));if(n===a){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return n-a}}}else{return typeof e==="number"?1:-1}}function a(e,t,r){var n=r||function(e){return e};var a=t[0];var i=t[1];return(!a&&typeof a!=="number"||n(a)<=n(e))&&(!i&&typeof i!=="number"||n(i)>=n(e))}function i(e,t){var r=t[0]===null;var a=t[1]===null;var i=n(e,t[0])>=0;var o=n(e,t[1])<=0;return(r||i)&&(a||o)}var o,s;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&a(e.dtick,s.dtickrange,r)){o=s;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){s=e.tickformatstops[t];if(s.enabled&&i(e.dtick,s.dtickrange)){o=s;break}}break}default:}}return o?o.value:e.tickformat};A.getSubplots=function(e,t){var r=e._fullLayout._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a=t?A.findSubplotsWithAxis(n,t):n;a.sort(function(e,t){var r=e.substr(1).split("y");var n=t.substr(1).split("y");if(r[0]===n[0])return+r[1]-+n[1];return+r[0]-+n[0]});return a};A.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var n=[];for(var a=0;a<e.length;a++){var i=e[a];if(r.test(i))n.push(i)}return n};A.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var a={_offset:0,_length:t.height,_id:""};var i=A.list(e,"x",true);var o=A.list(e,"y",true);var s=[];var l,u;for(l=0;l<i.length;l++){s.push({x:i[l],y:a});for(u=0;u<o.length;u++){if(l===0)s.push({x:r,y:o[u]});s.push({x:i[l],y:o[u]})}}var f=t._clips.selectAll(".axesclip").data(s,function(e){return e.x._id+e.y._id});f.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");f.exit().remove();f.each(function(e){n.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};A.doTicks=function(e,t,r){var n=e._fullLayout;if(t==="redraw"){n._paper.selectAll("g.subplot").each(function(e){var t=n._plots[e];var r=t.xaxis;var a=t.yaxis;t.xaxislayer.selectAll("."+r._id+"tick").remove();t.yaxislayer.selectAll("."+a._id+"tick").remove();if(t.gridlayer)t.gridlayer.selectAll("path").remove();if(t.zerolinelayer)t.zerolinelayer.selectAll("path").remove();n._infolayer.select(".g-"+r._id+"title").remove();n._infolayer.select(".g-"+a._id+"title").remove()})}var a=!t||t==="redraw"?A.listIds(e):t;s.syncOrAsync(a.map(function(t){return function(){if(!t)return;var n=A.doTicksSingle(e,t,r);var a=A.getFromId(e,t);a._r=a.range.slice();a._rl=s.simpleMap(a._r,a.r2l);return n}}))};A.doTicksSingle=function(e,t,r){var h=e._fullLayout;var d=false;var v;if(s.isPlainObject(t)){v=t;d=true}else{v=A.getFromId(e,t)}v.setScale();var p=v._id;var g=p.charAt(0);var m=A.counterLetter(p);var y=v._vals=A.calcTicks(v);var b=function(e){return[e.text,e.x,v.mirror,e.font,e.fontSize,e.fontColor].join("_")};var x=p+"tick";var k=p+"grid";var M=p+"zl";var E=(v.linewidth||1)/2;var C=v.ticks==="outside"?v.ticklen:0;var S=0;var L=c.crispRound(e,v.gridwidth,1);var O=c.crispRound(e,v.zerolinewidth,L);var I=c.crispRound(e,v.tickwidth,1);var D,R,P,z;var F;var B;if(v._counterangle&&v.ticks==="outside"){var N=v._counterangle*Math.PI/180;C=v.ticklen*Math.cos(N)+1;S=v.ticklen*Math.sin(N)}if(v.showticklabels&&(v.ticks==="outside"||v.showline)){C+=.2*v.tickfont.size}if(g==="x"){D=["bottom","top"];R=v._transfn||function(e){return"translate("+(v._offset+v.l2p(e.x))+",0)"};P=function(e,t){if(v._counterangle){var r=v._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(r)*t+","+Math.cos(r)*t}else return"M0,"+e+"v"+t}}else if(g==="y"){D=["left","right"];R=v._transfn||function(e){return"translate(0,"+(v._offset+v.l2p(e.x))+")"};P=function(e,t){if(v._counterangle){var r=v._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(r)*t+","+-Math.sin(r)*t}else return"M"+e+",0h"+t}}else if(p==="angular"){D=["left","right"];R=v._transfn;P=function(e,t){return"M"+e+",0h"+t}}else{s.warn("Unrecognized doTicks axis:",p);return}var j=v.side||D[0];var U=[-1,1,j===D[1]?1:-1];if(v.ticks!=="inside"===(g==="x")){U=U.map(function(e){return-e})}if(!v.visible)return;if(v._tickFilter){y=y.filter(v._tickFilter)}function V(e){var t=v.l2p(e.x);return t>1&&t<v._length-1}var H=y.filter(V);if(v._id==="angular"){H=y}function q(e,t){var r=e.selectAll("path."+x).data(v.ticks==="inside"?H:y,b);if(t&&v.ticks){r.enter().append("path").classed(x,1).classed("ticks",1).classed("crisp",1).call(f.stroke,v.tickcolor).style("stroke-width",I+"px").attr("d",t);r.attr("transform",R);r.exit().remove()}else r.remove()}function G(t,r){F=t.selectAll("g."+x).data(y,b);if(!a(r)){F.remove();X();return}if(!v.showticklabels){F.remove();X();D();return}var o,u,f,d,m;if(g==="x"){m=j==="bottom"?1:-1;o=function(e){return e.dx+S*m};d=r+(C+E)*m;u=function(e){return e.dy+d+e.fontSize*(j==="bottom"?1:-.2)};f=function(e){if(!a(e)||e===0||e===180){return"middle"}return e*m<0?"end":"start"}}else if(g==="y"){m=j==="right"?1:-1;u=function(e){return e.dy+e.fontSize*_-S*m};o=function(e){return e.dx+r+(C+E+(Math.abs(v.tickangle)===90?e.fontSize/2:0))*m};f=function(e){if(a(e)&&Math.abs(e)===90){return"middle"}return j==="right"?"start":"end"}}else if(p==="angular"){v._labelShift=S;v._labelStandoff=C;v._pad=E;o=v._labelx;u=v._labely;f=v._labelanchor}var A=0,k=0,T=[];F.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(t){var r=n.select(this),a=e._promises.length;r.call(l.positionText,o(t),u(t)).call(c.font,t.font,t.fontSize,t.fontColor).text(t.text).call(l.convertToTspans,e);a=e._promises[a];if(a){T.push(e._promises.pop().then(function(){L(r,v.tickangle)}))}else{L(r,v.tickangle)}});F.exit().remove();F.each(function(e){A=Math.max(A,e.fontSize)});if(p==="angular"){F.each(function(e){n.select(this).select("text").call(l.positionText,o(e),u(e))})}function M(e,t,r){var n=(e-1)*t;if(g==="x"){if(r<-60||60<r){return-.5*n}else if(j==="top"){return-n}}else{r*=j==="left"?1:-1;if(r<-30){return-n}else if(r<30){return-.5*n}}return 0}function L(e,t){e.each(function(e){var r=f(t,e);var i=n.select(this),s=i.select(".text-math-group"),h=R.call(i.node(),e)+(a(t)&&+t!==0?" rotate("+t+","+o(e)+","+(u(e)-e.fontSize/2)+")":"");var d=M(l.lineCount(i),w*e.fontSize,a(t)?+t:0);if(d){h+=" translate(0, "+d+")"}if(s.empty()){i.select("text").attr({transform:h,"text-anchor":r})}else{var v=c.bBox(s.node()).width*{end:-.5,start:.5}[r];s.attr("transform",h+(v?"translate("+v+",0)":""))}})}L(F,v._lastangle||v.tickangle);function O(){return T.length&&Promise.all(T)}function I(){L(F,v.tickangle);if(g==="x"&&!a(v.tickangle)&&(v.type!=="log"||String(v.dtick).charAt(0)!=="D")){var e=[];F.each(function(t){var r=n.select(this),a=r.select(".text-math-group"),i=v.l2p(t.x);if(a.empty())a=r.select("text");var o=c.bBox(a.node());e.push({top:0,bottom:10,height:10,left:i-o.width/2,right:i+o.width/2+2,width:o.width+2})});for(B=0;B<e.length-1;B++){if(s.bBoxIntersect(e[B],e[B+1])){k=30;break}}if(k){var t=Math.abs((y[y.length-1].x-y[0].x)*v._m)/(y.length-1);if(t<A*2.5){k=90}L(F,k)}v._lastangle=k}X();return p+" done"}function D(){if(v.showticklabels){var r=e.getBoundingClientRect();var n=t.node().getBoundingClientRect();v._boundingBox={width:n.width,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,bottom:n.bottom-r.top}}else{var a=h._size;var i;if(g==="x"){i=v.anchor==="free"?a.t+a.h*(1-v.position):a.t+a.h*(1-v._anchorAxis.domain[{bottom:0,top:1}[v.side]]);v._boundingBox={top:i,bottom:i,left:v._offset,right:v._offset+v._length,width:v._length,height:0}}else{i=v.anchor==="free"?a.l+a.w*v.position:a.l+a.w*v._anchorAxis.domain[{left:0,right:1}[v.side]];v._boundingBox={left:i,right:i,bottom:v._offset+v._length,top:v._offset,height:v._length,width:0}}}if(z){var o=v._counterSpan=[Infinity,-Infinity];for(B=0;B<z.length;B++){var s=h._plots[z[B]];var l=s[g==="x"?"yaxis":"xaxis"];u(o,[l._offset,l._offset+l._length])}if(v.anchor==="free"){u(o,g==="x"?[v._boundingBox.bottom,v._boundingBox.top]:[v._boundingBox.right,v._boundingBox.left])}}function u(e,t){e[0]=Math.min(e[0],t[0]);e[1]=Math.max(e[1],t[1])}}function P(){var t=v._name+".automargin";if(g!=="x"&&g!=="y"){return}if(!v.automargin){i.autoMargin(e,t);return}var r=v.side[0];var n={x:0,y:0,r:0,l:0,t:0,b:0};if(g==="x"){n.y=v.anchor==="free"?v.position:v._anchorAxis.domain[r==="t"?1:0];n[r]+=v._boundingBox.height}else{n.x=v.anchor==="free"?v.position:v._anchorAxis.domain[r==="r"?1:0];n[r]+=v._boundingBox.width}if(v.title!==h._dfltTitle[g]){n[r]+=v.titlefont.size}i.autoMargin(e,t,n)}var N=s.syncOrAsync([O,I,D,P]);if(N&&N.then)e._promises.push(N);return N}function X(){if(r)return;if(v.rangeslider&&v.rangeslider.visible&&v._boundingBox&&v.side==="bottom")return;var t={selection:F,side:v.side};var n=p.charAt(0);var a=e._fullLayout._size;var i=1.5;var o=v.titlefont.size;var s,l,f,d;if(F.size()){var g=c.getTranslate(F.node().parentNode);t.offsetLeft=g.x;t.offsetTop=g.y}var m=10+o*i+(v.linewidth?v.linewidth-1:0);if(n==="x"){l=v.anchor==="free"?{_offset:a.t+(1-(v.position||0))*a.h,_length:0}:T.getFromId(e,v.anchor);f=v._offset+v._length/2;if(v.side==="top"){d=-m-o*(v.showticklabels?1:0)}else{d=l._length+m+o*(v.showticklabels?1.5:.5)}d+=l._offset;if(!t.side)t.side="bottom"}else{l=v.anchor==="free"?{_offset:a.l+(v.position||0)*a.w,_length:0}:T.getFromId(e,v.anchor);d=v._offset+v._length/2;if(v.side==="right"){f=l._length+m+o*(v.showticklabels?1:.5)}else{f=-m-o*(v.showticklabels?.5:0)}f+=l._offset;s={rotate:"-90",offset:0};if(!t.side)t.side="left"}u.draw(e,p+"title",{propContainer:v,propName:v._name+".title",placeholder:h._dfltTitle[n],avoid:t,transform:s,attributes:{x:f,y:d,"text-anchor":"middle"}})}function W(e,t){if(e.visible!==true||e.xaxis+e.yaxis!==t)return false;if(o.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[g])return true;return e.fill&&e.fill.charAt(e.fill.length-1)===g}function Y(t,r,a){if(h._hasOnlyLargeSploms)return;var i=t.gridlayer.selectAll("."+p);var o=t.zerolinelayer;var l=t["hidegrid"+g]?[]:H;var u=v._gridpath||(g==="x"?"M0,"+r._offset+"v":"M"+r._offset+",0h")+r._length;var c=i.selectAll("path."+k).data(v.showgrid===false?[]:l,b);c.enter().append("path").classed(k,1).classed("crisp",1).attr("d",u).each(function(e){if(v.zeroline&&(v.type==="linear"||v.type==="-")&&Math.abs(e.x)<v.dtick/100){n.select(this).remove()}});c.attr("transform",R).call(f.stroke,v.gridcolor||"#ddd").style("stroke-width",L+"px");if(typeof u==="function")c.attr("d",u);c.exit().remove();if(o){var d=false;for(var m=0;m<e._fullData.length;m++){if(W(e._fullData[m],a)){d=true;break}}var y=s.simpleMap(v.range,v.r2l),x=y[0]*y[1]<=0&&v.zeroline&&(v.type==="linear"||v.type==="-")&&l.length&&(d||V({x:0})||!v.showline);var _=o.selectAll("path."+M).data(x?[{x:0,id:p}]:[]);_.enter().append("path").classed(M,1).classed("zl",1).classed("crisp",1).attr("d",u).each(function(){o.selectAll("path").sort(function(e,t){return T.idSort(e.id,t.id)})});_.attr("transform",R).call(f.stroke,v.zerolinecolor||f.defaultLine).style("stroke-width",O+"px");_.exit().remove()}}if(d){q(v._axislayer,P(v._pos+E*U[2],U[2]*v.ticklen));if(v._counteraxis){var Z={gridlayer:v._gridlayer,zerolinelayer:v._zerolinelayer};Y(Z,v._counteraxis)}return G(v._axislayer,v._pos)}else if(h._has("cartesian")){z=A.getSubplots(e,v);var J={};z.map(function(e){var t=h._plots[e];var r=t[m+"axis"];var n=r._mainAxis._id;if(J[n])return;J[n]=1;Y(t,r,e)});var Q=v._mainSubplot;var $=h._plots[Q];var K=[];if(v.ticks){var ee=U[2];var te=P(v._mainLinePosition+E*ee,ee*v.ticklen);if(v._anchorAxis&&v.mirror&&v.mirror!==true){te+=P(v._mainMirrorPosition-E*ee,-ee*v.ticklen)}q($[g+"axislayer"],te);K=Object.keys(v._linepositions||{})}K.map(function(e){var t=h._plots[e];var r=t[g+"axislayer"];var n=v._linepositions[e]||[];function a(e){var t=U[e];return P(n[e]+E*t,t*v.ticklen)}q(r,a(0)+a(1))});var re=$[g+"axislayer"];return G(re,v._mainLinePosition)}};A.allowAutoMargin=function(e){var t=A.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];if(n.automargin){i.allowAutoMargin(e,n._name+".automargin")}if(n.rangeslider&&n.rangeslider.visible){i.allowAutoMargin(e,"rangeslider"+n._id)}}};A.swap=function(e,t){var r=K(e,t);for(var n=0;n<r.length;n++){te(e,r[n].x,r[n].y)}};function K(e,t){var r=[],n,a;for(n=0;n<t.length;n++){var i=[],o=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(!o||!s)continue;for(a=0;a<r.length;a++){if(r[a].x.indexOf(o)!==-1||r[a].y.indexOf(s)!==-1){i.push(a)}}if(!i.length){r.push({x:[o],y:[s]});continue}var l=r[i[0]],u;if(i.length>1){for(a=1;a<i.length;a++){u=r[i[a]];ee(l.x,u.x);ee(l.y,u.y)}}ee(l.x,[o]);ee(l.y,[s])}return r}function ee(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function te(e,t,r){var n,a,i=[],o=[],l=e.layout;for(n=0;n<t.length;n++)i.push(A.getFromId(e,t[n]));for(n=0;n<r.length;n++)o.push(A.getFromId(e,r[n]));var u=Object.keys(i[0]),f=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(n=0;n<u.length;n++){var h=u[n],d=i[0][h],v=o[0][h],p=true,g=false,m=false;if(h.charAt(0)==="_"||typeof d==="function"||f.indexOf(h)!==-1){continue}for(a=1;a<i.length&&p;a++){var y=i[a][h];if(h==="type"&&c.indexOf(d)!==-1&&c.indexOf(y)!==-1&&d!==y){g=true}else if(y!==d)p=false}for(a=1;a<o.length&&p;a++){var b=o[a][h];if(h==="type"&&c.indexOf(v)!==-1&&c.indexOf(b)!==-1&&v!==b){m=true}else if(o[a][h]!==v)p=false}if(p){if(g)l[i[0]._name].type="linear";if(m)l[o[0]._name].type="linear";re(l,h,i,o,e._fullLayout._dfltTitle)}}for(n=0;n<e._fullLayout.annotations.length;n++){var x=e._fullLayout.annotations[n];if(t.indexOf(x.xref)!==-1&&r.indexOf(x.yref)!==-1){s.swapAttrs(l.annotations[n],["?"])}}}function re(e,t,r,n,a){var i=s.nestedProperty,o=i(e[r[0]._name],t).get(),l=i(e[n[0]._name],t).get(),u;if(t==="title"){if(o===a.x){o=a.y}if(l===a.y){l=a.x}}for(u=0;u<r.length;u++){i(e,r[u]._name+"."+t).set(l)}for(u=0;u<n.length;u++){i(e,n[u]._name+"."+t).set(o)}}},{"../../components/color":323,"../../components/drawing":348,"../../components/titles":414,"../../constants/alignment":421,"../../constants/numerical":424,"../../lib":445,"../../lib/svg_text_utils":469,"../../plots/plots":528,"../../registry":536,"./autorange":491,"./axis_autotype":493,"./axis_ids":495,"./set_convert":510,d3:86,"fast-isnumeric":151}],493:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){if(s(t,r))return"date";if(l(t))return"category";if(o(t))return"linear";else return"-"};function o(e){if(!e)return false;for(var t=0;t<e.length;t++){if(n(e[t]))return true}return false}function s(e,t){var r=0,i=0,o=Math.max(1,(e.length-1)/1e3),s;for(var l=0;l<e.length;l+=o){s=e[Math.round(l)];if(a.isDateTime(s,t))r+=1;if(n(s))i+=1}return r>i*2}function l(e){var t=Math.max(1,(e.length-1)/1e3),r=0,n=0,o;for(var s=0;s<e.length;s+=t){o=e[Math.round(s)];if(a.cleanNumber(o)!==i)r++;else if(typeof o==="string"&&o!==""&&o!=="None")n++}return n>r*2}},{"../../constants/numerical":424,"../../lib":445,"fast-isnumeric":151}],494:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("./layout_attributes");var o=e("./tick_value_defaults");var s=e("./tick_mark_defaults");var l=e("./tick_label_defaults");var u=e("./category_order_defaults");var f=e("./line_grid_defaults");var c=e("./set_convert");t.exports=function e(t,r,h,d,v){var p=d.letter;var g=r._id;var m=d.font||{};var y=h("visible",!d.cheateronly);var b=r.type;if(b==="date"){var x=n.getComponentMethod("calendars","handleDefaults");x(t,r,"calendar",d.calendar)}c(r,v);var _=h("autorange",!r.isValidRange(t.range));r._rangesliderAutorange=false;if(_)h("rangemode");h("range");r.cleanRange();u(t,r,h,d);if(b!=="category"&&!d.noHover)h("hoverformat");if(!y)return r;var w=h("color");var A=w!==i.color.dflt?w:m.color;var k=((v._splomAxes||{})[p]||{})[g]||v._dfltTitle[p];h("title",k);a.coerceFont(h,"titlefont",{family:m.family,size:Math.round(m.size*1.2),color:A});o(t,r,h,b);l(t,r,h,b,d);s(t,r,h,d);f(t,r,h,{dfltColor:w,bgColor:d.bgColor,showGrid:d.showGrid,attributes:i});if(r.showline||r.ticks)h("mirror");if(d.automargin)h("automargin");return r}},{"../../lib":445,"../../registry":536,"./category_order_defaults":496,"./layout_attributes":504,"./line_grid_defaults":506,"./set_convert":510,"./tick_label_defaults":511,"./tick_mark_defaults":512,"./tick_value_defaults":513}],495:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./constants");r.id2name=function e(t){if(typeof t!=="string"||!t.match(a.AX_ID_PATTERN))return;var r=t.substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};r.name2id=function e(t){if(!t.match(a.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};r.cleanId=function e(t,r){if(!t.match(a.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;var n=t.substr(1).replace(/^0+/,"");if(n==="1")n="";return t.charAt(0)+n};r.list=function(e,t,n){var a=e._fullLayout;if(!a)return[];var i=r.listIds(e,t);var o=new Array(i.length);var s;for(s=0;s<i.length;s++){var l=i[s];o[s]=a[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var u=a._subplots.gl3d||[];for(s=0;s<u.length;s++){var f=a[u[s]];if(t)o.push(f[t+"axis"]);else o.push(f.xaxis,f.yaxis,f.zaxis)}}return o};r.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;if(t)return n[t+"axis"];return n.xaxis.concat(n.yaxis)};r.getFromId=function(e,t,n){var a=e._fullLayout;if(n==="x")t=t.replace(/y[0-9]*/,"");else if(n==="y")t=t.replace(/x[0-9]*/,"");return a[r.id2name(t)]};r.getFromTrace=function(e,t,a){var i=e._fullLayout;var o=null;if(n.traceIs(t,"gl3d")){var s=t.scene;if(s.substr(0,5)==="scene"){o=i[s][a+"axis"]}}else{o=r.getFromId(e,t[a+"axis"]||a)}return o};r.idSort=function(e,t){var r=e.charAt(0);var n=t.charAt(0);if(r!==n)return r>n?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":536,"./constants":497}],496:[function(e,t,r){"use strict";function n(e,t){var r=t.dataAttr||e._id.charAt(0);var n={};var a;var i,o;if(t.axData){a=t.axData}else{a=[];for(i=0;i<t.data.length;i++){var s=t.data[i];if(s[r+"axis"]===e._id){a.push(s)}}}for(i=0;i<a.length;i++){var l=a[i][r];for(o=0;o<l.length;o++){var u=l[o];if(u!==null&&u!==undefined){n[u]=1}}}return Object.keys(n)}t.exports=function e(t,r,a,i){if(r.type!=="category")return;var o=t.categoryarray;var s=Array.isArray(o)&&o.length>0;var l;if(s)l="array";var u=a("categoryorder",l);var f;if(u==="array"){f=a("categoryarray")}if(!s&&u==="array"){u=r.categoryorder="trace"}if(u==="trace"){r._initialCategories=[]}else if(u==="array"){r._initialCategories=f.slice()}else{f=n(r,i).sort();if(u==="category ascending"){r._initialCategories=f}else if(u==="category descending"){r._initialCategories=f.reverse()}}}},{}],497:[function(e,t,r){"use strict";var n=e("../../lib/regex").counter;t.exports={idRegex:{x:n("x"),y:n("y")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":461}],498:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./axis_ids").id2name;t.exports=function e(t,r,a,s,l){var u=l._axisConstraintGroups;var f=r._id;var c=f.charAt(0);if(r.fixedrange)return;a("constrain");n.coerce(t,r,{constraintoward:{valType:"enumerated",values:c==="x"?["left","center","right"]:["bottom","middle","top"],dflt:c==="x"?"center":"middle"}},"constraintoward");if(!t.scaleanchor)return;var h=i(u,f,s,l);var d=n.coerce(t,r,{scaleanchor:{valType:"enumerated",values:h.linkableAxes}},"scaleanchor");if(d){var v=a("scaleratio");if(!v)v=r.scaleratio=1;o(u,h.thisGroup,f,d,v)}else if(s.indexOf(t.scaleanchor)!==-1){n.warn("ignored "+r._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because the target"+"axis has fixed range.")}};function i(e,t,r,n){var i=n[a(t)].type;var o,s,l,u;var f=[];for(s=0;s<r.length;s++){l=r[s];if(l===t)continue;u=n[a(l)];if(u.type===i&&!u.fixedrange)f.push(l)}for(o=0;o<e.length;o++){if(e[o][t]){var c=e[o];var h=[];for(s=0;s<f.length;s++){l=f[s];if(!c[l])h.push(l)}return{linkableAxes:h,thisGroup:c}}}return{linkableAxes:f,thisGroup:null}}function o(e,t,r,n,a){var i,o,s,l,u;if(t===null){t={};t[r]=1;u=e.length;e.push(t)}else{u=e.indexOf(t)}var f=Object.keys(t);for(i=0;i<e.length;i++){s=e[i];if(i!==u&&s[n]){var c=s[n];for(o=0;o<f.length;o++){l=f[o];s[l]=c*a*t[l]}e.splice(u,1);return}}if(a!==1){for(o=0;o<f.length;o++){t[f[o]]*=a}}t[n]=1}},{"../../lib":445,"./axis_ids":495}],499:[function(e,t,r){"use strict";var n=e("./axis_ids").id2name;var a=e("./scale_zoom");var i=e("./autorange").makePadFn;var o=e("../../constants/numerical").ALMOST_EQUAL;var s=e("../../constants/alignment").FROM_BL;r.enforce=function e(t){var r=t._fullLayout;var s=r._axisConstraintGroups||[];var u,f,c,h,d,v,p;for(u=0;u<s.length;u++){var g=s[u];var m=Object.keys(g);var y=Infinity;var b=0;var x=Infinity;var _={};var w={};var A=false;for(f=0;f<m.length;f++){c=m[f];w[c]=h=r[n(c)];if(h._inputDomain)h.domain=h._inputDomain.slice();else h._inputDomain=h.domain.slice();if(!h._inputRange)h._inputRange=h.range.slice();h.setScale();_[c]=d=Math.abs(h._m)/g[c];y=Math.min(y,d);if(h.constrain==="domain"||!h._constraintShrinkable){x=Math.min(x,d)}delete h._constraintShrinkable;b=Math.max(b,d);if(h.constrain==="domain")A=true}if(y>o*b&&!A)continue;for(f=0;f<m.length;f++){c=m[f];d=_[c];h=w[c];v=h.constrain;if(d!==x||v==="domain"){p=d/x;if(v==="range"){a(h,p)}else{var k=h._inputDomain;var T=(h.domain[1]-h.domain[0])/(k[1]-k[0]);var M=(h.r2l(h.range[1])-h.r2l(h.range[0]))/(h.r2l(h._inputRange[1])-h.r2l(h._inputRange[0]));p/=T;if(p*M<1){h.domain=h._input.domain=k.slice();a(h,p);continue}if(M<1){h.range=h._input.range=h._inputRange.slice();p*=M}if(h.autorange&&h._min.length&&h._max.length){var E=h.r2l(h.range[0]);var C=h.r2l(h.range[1]);var S=(E+C)/2;var L=S;var O=S;var I=Math.abs(C-S);var D=S-I*p*1.0001;var R=S+I*p*1.0001;var P=i(h);l(h,p);h.setScale();var z=Math.abs(h._m);var F;var B;for(B=0;B<h._min.length;B++){F=h._min[B].val-P(h._min[B])/z;if(F>D&&F<L){L=F}}for(B=0;B<h._max.length;B++){F=h._max[B].val+P(h._max[B])/z;if(F<R&&F>O){O=F}}var N=(O-L)/(2*I);p/=N;L=h.l2r(L);O=h.l2r(O);h.range=h._input.range=E<C?[L,O]:[O,L]}l(h,p)}}}}};r.clean=function e(t,r){if(r._inputDomain){var n=false;var a=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][a]){n=true;break}}if(!n||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function l(e,t){var r=e._inputDomain;var n=s[e.constraintoward];var a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t]}},{"../../constants/alignment":421,"../../constants/numerical":424,"./autorange":491,"./axis_ids":495,"./scale_zoom":508}],500:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("has-passive-events");var o=e("../../registry");var s=e("../../lib");var l=e("../../lib/svg_text_utils");var u=e("../../lib/clear_gl_canvases");var f=e("../../components/color");var c=e("../../components/drawing");var h=e("../../components/fx");var d=e("../../lib/setcursor");var v=e("../../components/dragelement");var p=e("../../constants/alignment").FROM_TL;var g=e("../plots");var m=e("./axes").doTicksSingle;var y=e("./axis_ids").getFromId;var b=e("./select").prepSelect;var x=e("./select").clearSelect;var _=e("./scale_zoom");var w=e("./constants");var A=w.MINDRAG;var k=w.MINZOOM;var T=true;function M(e,t,r,i,f,d,T,M){var E=e._fullLayout._zoomlayer;var B=T+M==="nsew";var Y=(T+M).length===1;var Z,J;var Q,$;var K,ee;var te,re;var ne,ae;var ie;var oe,se;var le;var ue;var fe,ce;var he,de,ve,pe;function ge(){Z=t.xaxis;J=t.yaxis;ne=Z._length;ae=J._length;te=Z._offset;re=J._offset;Q={};Q[Z._id]=Z;$={};$[J._id]=J;if(T&&M){var r=t.overlays;for(var n=0;n<r.length;n++){var a=r[n].xaxis;Q[a._id]=a;var i=r[n].yaxis;$[i._id]=i}}K=W(Q);ee=W($);oe=S(K,M);se=S(ee,T);le=!se&&!oe;ie=G(e,Q,$);ue=ie.isSubplotConstrained;fe=M||ue;ce=T||ue;var o=e._fullLayout;he=o._has("scattergl");de=o._hasOnlyLargeSploms;ve=de||o._has("splom");pe=o._has("svg")}ge();var me=R(se+oe,e._fullLayout.dragmode,B);var ye=C(t,T+M+"drag",me,r,i,f,d);if(le&&!B){ye.onmousedown=null;ye.style.pointerEvents="none";return ye}var be={element:ye,gd:e,plotinfo:t};be.prepFn=function(t,r,n){var a=e._fullLayout.dragmode;ge();if(!le){if(B){if(t.shiftKey){if(a==="pan")a="zoom";else if(!U(a))a="pan"}else if(t.ctrlKey){a="pan"}}else a="pan"}if(a==="lasso")be.minDrag=1;else be.minDrag=undefined;if(U(a)){be.xaxes=K;be.yaxes=ee;b(t,r,n,be,a)}else{be.clickFn=_e;xe();if(!le){if(a==="zoom"){be.moveFn=Re;be.doneFn=Pe;be.minDrag=1;De(t,r,n)}else if(a==="pan"){be.moveFn=Ue;be.doneFn=qe}}}};function xe(){be.plotinfo.selection=false;x(E)}function _e(r,a){N(e);if(r===2&&!Y)He();if(B){h.click(e,a,t.id)}else if(r===1&&Y){var i=T?J:Z,s=T==="s"||M==="w"?0:1,u=i._name+".range["+s+"]",f=L(i,s),c="left",d="middle";if(i.fixedrange)return;if(T){d=T==="n"?"top":"bottom";if(i.side==="right")c="right"}else if(M==="e")c="right";if(e._context.showAxisRangeEntryBoxes){n.select(ye).call(l.makeEditable,{gd:e,immediate:true,background:e._fullLayout.paper_bgcolor,text:String(f),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:c,verticalAlign:d}).on("edit",function(t){var r=i.d2r(t);if(r!==undefined){o.call("relayout",e,u,r)}})}}}v.init(be);var we,Ae,ke,Te,Me,Ee,Ce,Se,Le;var Oe;var Ie={};function De(t,r,n){var i=ye.getBoundingClientRect();we=r-i.left;Ae=n-i.top;ke={l:we,r:we,w:0,t:Ae,b:Ae,h:0};Te=e._hmpixcount?e._hmlumcount/e._hmpixcount:a(e._fullLayout.plot_bgcolor).getLuminance();Me="M0,0H"+ne+"V"+ae+"H0V0";Ee=false;Ce="xy";Oe=false;Se=P(E,Te,te,re,Me);Le=z(E,te,re)}function Re(t,r){if(e._transitioningWithDuration){return false}var n=Math.max(0,Math.min(ne,t+we)),a=Math.max(0,Math.min(ae,r+Ae)),i=Math.abs(n-we),o=Math.abs(a-Ae);ke.l=Math.min(we,n);ke.r=Math.max(we,n);ke.t=Math.min(Ae,a);ke.b=Math.max(Ae,a);function s(){Ce="";ke.r=ke.l;ke.t=ke.b;Le.attr("d","M0,0Z")}if(ue){if(i>k||o>k){Ce="xy";if(i/ne>o/ae){o=i*ae/ne;if(Ae>a)ke.t=Ae-o;else ke.b=Ae+o}else{i=o*ne/ae;if(we>n)ke.l=we-i;else ke.r=we+i}Le.attr("d",q(ke))}else{s()}}else if(!se||o<Math.min(Math.max(i*.6,A),k)){if(i<A||!oe){s()}else{ke.t=0;ke.b=ae;Ce="x";Le.attr("d",V(ke,Ae))}}else if(!oe||i<Math.min(o*.6,k)){ke.l=0;ke.r=ne;Ce="y";Le.attr("d",H(ke,we))}else{Ce="xy";Le.attr("d",q(ke))}ke.w=ke.r-ke.l;ke.h=ke.b-ke.t;if(Ce)Oe=true;e._dragged=Oe;F(Se,Le,ke,Me,Ee,Te);Ee=true}function Pe(){if(Math.min(ke.h,ke.w)<A*2){return N(e)}if(Ce==="xy"||Ce==="x"){O(K,ke.l/ne,ke.r/ne,Ie,ie.xaxes)}if(Ce==="xy"||Ce==="y"){O(ee,(ae-ke.b)/ae,(ae-ke.t)/ae,Ie,ie.yaxes)}N(e);qe();j(e)}var ze=[0,0,ne,ae];var Fe=null;var Be=w.REDRAWDELAY;var Ne=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function je(t){if(!e._context.scrollZoom&&!e._fullLayout._enablescrollzoom){return}xe();if(e._transitioningWithDuration){t.preventDefault();t.stopPropagation();return}var r=e.querySelector(".plotly");ge();if(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10){return}clearTimeout(Fe);var n=-t.deltaY;if(!isFinite(n))n=t.wheelDelta/10;if(!isFinite(n)){s.log("Did not find wheel motion attributes: ",t);return}var a=Math.exp(-Math.min(Math.max(n,-20),20)/200),i=Ne.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(t.clientX-i.left)/i.width,l=(i.bottom-t.clientY)/i.height,u;function f(e,t,r){if(e.fixedrange)return;var n=s.simpleMap(e.range,e.r2l),a=n[0]+(n[1]-n[0])*t;function i(t){return e.l2r(a+(t-a)*r)}e.range=n.map(i)}if(fe){if(!M)o=.5;for(u=0;u<K.length;u++){f(K[u],o,a)}ze[2]*=a;ze[0]+=ze[2]*o*(1/a-1)}if(ce){if(!T)l=.5;for(u=0;u<ee.length;u++){f(ee[u],l,a)}ze[3]*=a;ze[1]+=ze[3]*(1-l)*(1/a-1)}We(ze);Ve(T,M);Fe=setTimeout(function(){ze=[0,0,ne,ae];qe()},Be);t.preventDefault();return}if(T.length*M.length!==1){X(ye,je)}function Ue(t,r){if(e._transitioningWithDuration){return}if(oe==="ew"||se==="ns"){if(oe)I(K,t);if(se)I(ee,r);We([oe?-t:0,se?-r:0,ne,ae]);Ve(se,oe);return}function n(e,t,r){var n=1-t,a,i;for(var o=0;o<e.length;o++){var s=e[o];if(s.fixedrange)continue;a=s;i=s._rl[n]+(s._rl[t]-s._rl[n])/D(r/s._length);var l=s.l2r(i);if(l!==false&&l!==undefined)s.range[t]=l}return a._length*(a._rl[t]-i)/(a._rl[t]-a._rl[n])}if(ue&&oe&&se){var a=oe==="w"===(se==="n")?1:-1;var i=(t/ne+a*r/ae)/2;t=i*ne;r=a*i*ae}if(oe==="w")t=n(K,0,t);else if(oe==="e")t=n(K,1,-t);else if(!oe)t=0;if(se==="n")r=n(ee,1,r);else if(se==="s")r=n(ee,0,-r);else if(!se)r=0;var o=oe==="w"?t:0;var s=se==="n"?r:0;if(ue){var l;if(!oe&&se.length===1){for(l=0;l<K.length;l++){K[l].range=K[l]._r.slice();_(K[l],1-r/ae)}t=r*ne/ae;o=t/2}if(!se&&oe.length===1){for(l=0;l<ee.length;l++){ee[l].range=ee[l]._r.slice();_(ee[l],1-t/ne)}r=t*ae/ne;s=r/2}}We([o,s,ne-t,ae-r]);Ve(se,oe)}function Ve(t,r){var n=[],a;function i(e){for(a=0;a<e.length;a++){if(!e[a].fixedrange)n.push(e[a]._id)}}if(fe){i(K);i(ie.xaxes)}if(ce){i(ee);i(ie.yaxes)}Ie={};for(a=0;a<n.length;a++){var s=n[a];m(e,s,true);var l=y(e,s);Ie[l._name+".range[0]"]=l.range[0];Ie[l._name+".range[1]"]=l.range[1]}function u(i,o,s){for(a=0;a<i.length;a++){var l=i[a];if(r&&n.indexOf(l.xref)!==-1||t&&n.indexOf(l.yref)!==-1){o(e,a);if(s)return}}}u(e._fullLayout.annotations||[],o.getComponentMethod("annotations","drawOne"));u(e._fullLayout.shapes||[],o.getComponentMethod("shapes","drawOne"));u(e._fullLayout.images||[],o.getComponentMethod("images","draw"),true)}function He(){if(e._transitioningWithDuration)return;var t=e._context.doubleClick,r=(oe?K:[]).concat(se?ee:[]),n={};var a,i,s;if(t==="reset+autosize"){t="autosize";for(i=0;i<r.length;i++){a=r[i];if(a._rangeInitial&&(a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1])||!a._rangeInitial&&!a.autorange){t="reset";break}}}if(t==="autosize"){for(i=0;i<r.length;i++){a=r[i];if(!a.fixedrange)n[a._name+".autorange"]=true}}else if(t==="reset"){if(oe||ue)r=r.concat(ie.xaxes);if(se&&!ue)r=r.concat(ie.yaxes);if(ue){if(!oe)r=r.concat(K);else if(!se)r=r.concat(ee)}for(i=0;i<r.length;i++){a=r[i];if(!a._rangeInitial){n[a._name+".autorange"]=true}else{s=a._rangeInitial;n[a._name+".range[0]"]=s[0];n[a._name+".range[1]"]=s[1]}}}e.emit("plotly_doubleclick",null);o.call("relayout",e,n)}function qe(){We([0,0,ne,ae]);s.syncOrAsync([g.previousPromises,function(){o.call("relayout",e,Ie)}],e)}var Ge,Xe;function We(t){var r=e._fullLayout;var n=r._plots;var a=r._subplots.cartesian;var i,l,f,h;if(ve||he){u(e)}if(ve){o.subplotsRegistry.splom.drag(e);if(de)return}if(he){for(i=0;i<a.length;i++){l=n[a[i]];f=l.xaxis;h=l.yaxis;var d=l._scene;if(d){var v=s.simpleMap(f.range,f.r2l);var p=s.simpleMap(h.range,h.r2l);d.update({range:[v[0],p[0],v[1],p[1]]})}}}if(pe){var g=t[2]/Z._length;var m=t[3]/J._length;for(i=0;i<a.length;i++){l=n[a[i]];f=l.xaxis;h=l.yaxis;var y=fe&&!f.fixedrange&&Q[f._id];var b=ce&&!h.fixedrange&&$[h._id];var x,_;var w,A;if(y){x=g;w=M?t[0]:Je(f,x)}else{x=Ye(f,g,m);w=Ze(f,x)}if(b){_=m;A=T?t[1]:Je(h,_)}else{_=Ye(h,g,m);A=Ze(h,_)}if(!x&&!_){continue}if(!x)x=1;if(!_)_=1;var k=f._offset-w/x;var E=h._offset-A/_;l.clipRect.call(c.setTranslate,w,A).call(c.setScale,x,_);l.plot.call(c.setTranslate,k,E).call(c.setScale,1/x,1/_);if(x!==Ge||_!==Xe){c.setPointGroupScale(l.zoomScalePts,x,_);c.setTextPointsScale(l.zoomScaleTxt,x,_)}c.hideOutsideRangePoints(l.clipOnAxisFalseTraces,l);Ge=x;Xe=_}}}function Ye(e,t,r){if(e.fixedrange)return 0;if(fe&&ie.xaHash[e._id]){return t}if(ce&&(ue?ie.xaHash:ie.yaHash)[e._id]){return r}return 0}function Ze(e,t){if(t){e.range=e._r.slice();_(e,t);return Je(e,t)}return 0}function Je(e,t){return e._length*(1-t)*p[e.constraintoward||"middle"]}return ye}function E(e,t,r,n){var a=s.ensureSingle(e.draglayer,t,r,function(t){t.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});a.call(d,n);return a.node()}function C(e,t,r,a,i,o,s){var l=E(e,"rect",t,r);n.select(l).call(c.setRect,a,i,o,s);return l}function S(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function L(e,t){var r=e.range[t],a=Math.abs(r-e.range[1-t]),i;if(e.type==="date"){return r}else if(e.type==="log"){i=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3;return n.format("."+i+"g")(Math.pow(10,r))}else{i=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;return n.format("."+String(i)+"g")(r)}}function O(e,t,r,n,a){var i,o,s,l;for(i=0;i<e.length;i++){o=e[i];if(o.fixedrange)continue;s=o._rl[0];l=o._rl[1]-s;o.range=[o.l2r(s+l*t),o.l2r(s+l*r)];n[o._name+".range[0]"]=o.range[0];n[o._name+".range[1]"]=o.range[1]}if(a&&a.length){var u=(t+(1-r))/2;O(a,u,1-u,n)}}function I(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange){n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}}}function D(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function R(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function P(e,t,r,n,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",a+"Z")}function z(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+r+")").attr("d","M0,0Z")}function F(e,t,r,n,a,i){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");B(e,t,a,i)}function B(e,t,r,n){if(!r){e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function N(e){n.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function j(e){if(T&&e.data&&e._context.showTips){s.notifier(s._(e,"Double-click to zoom back out"),"long");T=false}}function U(e){return e==="lasso"||e==="select"}function V(e,t){return"M"+(e.l-.5)+","+(t-k-.5)+"h-3v"+(2*k+1)+"h3ZM"+(e.r+.5)+","+(t-k-.5)+"h3v"+(2*k+1)+"h-3Z"}function H(e,t){return"M"+(t-k-.5)+","+(e.t-.5)+"v-3h"+(2*k+1)+"v3ZM"+(t-k-.5)+","+(e.b+.5)+"v3h"+(2*k+1)+"v-3Z"}function q(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,k)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function G(e,t,r){var n=e._fullLayout._axisConstraintGroups;var a=false;var i={};var o={};var l,u,f,c;for(var h=0;h<n.length;h++){var d=n[h];for(l in t){if(d[l]){for(f in d){if(!(f.charAt(0)==="x"?t:r)[f]){i[f]=1}}for(u in r){if(d[u])a=true}}}for(u in r){if(d[u]){for(c in d){if(!(c.charAt(0)==="x"?t:r)[c]){o[c]=1}}}}}if(a){s.extendFlat(i,o);o={}}var v={};var p=[];for(f in i){var g=y(e,f);p.push(g);v[g._id]=g}var m={};var b=[];for(c in o){var x=y(e,c);b.push(x);m[x._id]=x}return{xaHash:v,yaHash:m,xaxes:p,yaxes:b,isSubplotConstrained:a}}function X(e,t){if(!i){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function W(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:M,makeDragger:E,makeRectDragger:C,makeZoombox:P,makeCorners:z,updateZoombox:F,xyCorners:q,transitionZoombox:B,removeZoombox:N,showDoubleClickNotifier:j,attachWheelEventHandler:X}},{"../../components/color":323,"../../components/dragelement":345,"../../components/drawing":348,"../../components/fx":365,"../../constants/alignment":421,"../../lib":445,"../../lib/clear_gl_canvases":431,"../../lib/setcursor":465,"../../lib/svg_text_utils":469,"../../registry":536,"../plots":528,"./axes":492,"./axis_ids":495,"./constants":497,"./scale_zoom":508,"./select":509,d3:86,"has-passive-events":202,tinycolor2:285}],501:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/fx");var i=e("../../components/dragelement");var o=e("../../lib/setcursor");var s=e("./dragbox").makeDragBox;var l=e("./constants").DRAGGERSIZE;r.initInteractions=function e(t){var o=t._fullLayout;if(t._context.staticPlot){n.select(t).selectAll(".drag").remove();return}if(!o._has("cartesian")&&!o._has("gl2d")&&!o._has("splom"))return;var u=Object.keys(o._plots||{}).sort(function(e,t){if((o._plots[e].mainplot&&true)===(o._plots[t].mainplot&&true)){var r=e.split("y"),n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return o._plots[e].mainplot?1:-1});u.forEach(function(e){var r=o._plots[e];var n=r.xaxis;var u=r.yaxis;if(!r.mainplot){var f=s(t,r,n._offset,u._offset,n._length,u._length,"ns","ew");f.onmousemove=function(r){t._fullLayout._rehover=function(){if(t._fullLayout._hoversubplot===e){a.hover(t,r,e)}};a.hover(t,r,e);t._fullLayout._lasthover=f;t._fullLayout._hoversubplot=e};f.onmouseout=function(e){if(t._dragging)return;t._fullLayout._hoversubplot=null;i.unhover(t,e)};if(t._context.showAxisDragHandles){s(t,r,n._offset-l,u._offset-l,l,l,"n","w");s(t,r,n._offset+n._length,u._offset-l,l,l,"n","e");s(t,r,n._offset-l,u._offset+u._length,l,l,"s","w");s(t,r,n._offset+n._length,u._offset+u._length,l,l,"s","e")}}if(t._context.showAxisDragHandles){if(e===n._mainSubplot){var c=n._mainLinePosition;if(n.side==="top")c-=l;s(t,r,n._offset+n._length*.1,c,n._length*.8,l,"","ew");s(t,r,n._offset,c,n._length*.1,l,"","w");s(t,r,n._offset+n._length*.9,c,n._length*.1,l,"","e")}if(e===u._mainSubplot){var h=u._mainLinePosition;if(u.side!=="right")h-=l;s(t,r,h,u._offset+u._length*.1,l,u._length*.8,"ns","");s(t,r,h,u._offset+u._length*.9,l,u._length*.1,"s","");s(t,r,h,u._offset,l,u._length*.1,"n","")}}});var f=o._hoverlayer.node();f.onmousemove=function(e){e.target=t._fullLayout._lasthover;a.hover(t,e,o._hoversubplot)};f.onclick=function(e){e.target=t._fullLayout._lasthover;a.click(t,e)};f.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)};r.updateFx(o)};r.updateFx=function(e){var t=e.dragmode==="pan"?"move":"crosshair";o(e._draggers,t)}},{"../../components/dragelement":345,"../../components/fx":365,"../../lib/setcursor":465,"./constants":497,"./dragbox":500,d3:86}],502:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");t.exports=function e(t){return function e(r,i){var o=r[t];if(!Array.isArray(o))return;var s=n.subplotsRegistry.cartesian;var l=s.idRegex;var u=i._subplots;var f=u.xaxis;var c=u.yaxis;var h=u.cartesian;var d=i._has("cartesian")||i._has("gl2d");for(var v=0;v<o.length;v++){var p=o[v];if(!a.isPlainObject(p))continue;var g=p.xref;var m=p.yref;var y=l.x.test(g);var b=l.y.test(m);if(y||b){if(!d)a.pushUnique(i._basePlotModules,s);var x=false;if(y&&f.indexOf(g)===-1){f.push(g);x=true}if(b&&c.indexOf(m)===-1){c.push(m);x=true}if(x&&y&&b){h.push(g+m)}}}}}},{"../../lib":445,"../../registry":536}],503:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../plots");var s=e("../../components/drawing");var l=e("../get_data").getModuleCalcData;var u=e("./axis_ids");var f=e("./constants");var c=e("../../constants/xmlns_namespaces");var h=i.ensureSingle;function d(e,t,r){return i.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=f.idRegex;r.attrRegex=f.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var n=r.xaxis;var a=r.yaxis;var o=r.cartesian;var s=o.concat(r.gl2d||[]);var l={};var c={};var h,d,v;for(h=0;h<s.length;h++){var p=s[h].split("y");l[p[0]]=1;c["y"+p[1]]=1}for(h=0;h<n.length;h++){d=n[h];if(!l[d]){v=(e[u.id2name(d)]||{}).anchor;if(!f.idRegex.y.test(v))v="y";o.push(d+v);s.push(d+v);if(!c[v]){c[v]=1;i.pushUnique(a,v)}}}for(h=0;h<a.length;h++){v=a[h];if(!c[v]){d=(e[u.id2name(v)]||{}).anchor;if(!f.idRegex.x.test(d))d="x";o.push(d+v);s.push(d+v);if(!l[d]){l[d]=1;i.pushUnique(n,d)}}}if(!s.length){d="";v="";for(var g in e){if(f.attrRegex.test(g)){var m=g.charAt(0);if(m==="x"){if(!d||+g.substr(5)<+d.substr(5)){d=g}}else if(!v||+g.substr(5)<+v.substr(5)){v=g}}}d=d?u.name2id(d):"x";v=v?u.name2id(v):"y";n.push(d);a.push(v);o.push(d+v)}};r.plot=function(e,t,r,n){var a=e._fullLayout;var i=a._subplots.cartesian;var o=e.calcdata;var s;if(!Array.isArray(t)){t=[];for(s=0;s<o.length;s++)t.push(s)}for(s=0;s<i.length;s++){var l=i[s];var u=a._plots[l];var f=[];var c;for(var h=0;h<o.length;h++){var d=o[h];var p=d[0].trace;if(p.xaxis+p.yaxis===l){if(t.indexOf(p.index)!==-1||p.carpet){if(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(p.fill)!==-1&&f.indexOf(c)===-1){f.push(c)}f.push(d)}c=d}}v(e,u,f,r,n)}};function v(e,t,r,i,o){var u=f.traceLayerClasses;var c=e._fullLayout;var h=c._modules;var d,v,p;var g=[];var m=[];for(var y=0;y<h.length;y++){d=h[y];var b=d.name;var x=a.modules[b].categories;if(x.svg){var _=d.layerName||b+"layer";var w=d.plot;v=l(r,w);p=v[0];r=v[1];if(p.length){g.push({i:u.indexOf(_),className:_,plotMethod:w,cdModule:p})}if(x.zoomScale){m.push("."+_)}}}g.sort(function(e,t){return e.i-t.i});var A=t.plot.selectAll("g.mlayer").data(g,function(e){return e.className});A.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true);A.exit().remove();A.order();A.each(function(r){var a=n.select(this);var l=r.className;r.plotMethod(e,t,r.cdModule,a,i,o);if(l!=="scatterlayer"&&l!=="barlayer"){s.setClipUrl(a,t.layerClipId)}});if(c._has("scattergl")){d=a.getModule("scattergl");p=l(r,d)[0];d.plot(e,t,p)}if(!e._context.staticPlot){if(t._hasClipOnAxisFalse){t.clipOnAxisFalseTraces=t.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")}if(m.length){var k=t.plot.selectAll(m.join(",")).selectAll(".trace");t.zoomScalePts=k.selectAll("path.point");t.zoomScaleTxt=k.selectAll(".textpoint")}}}r.clean=function(e,t,r,n){var a=n._plots||{};var i=t._plots||{};var o=n._subplots||{};var s;var l,f;if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(f in a){s=a[f];if(s.plotgroup)s.plotgroup.remove()}}var c=n._has&&n._has("gl");var h=t._has&&t._has("gl");if(c&&!h){for(f in a){s=a[f];if(s._scene)s._scene.destroy()}}if(o.xaxis&&o.yaxis){var d=u.listIds({_fullLayout:n});for(l=0;l<d.length;l++){var v=d[l];if(!t[u.id2name(v)]){n._infolayer.selectAll(".g-"+v+"title").remove()}}}var p=n._has&&n._has("cartesian");var g=t._has&&t._has("cartesian");if(p&&!g){m(n._cartesianlayer.selectAll(".subplot"),n);n._defs.selectAll(".axesclip").remove();delete n._axisConstraintGroups}else if(o.cartesian){for(l=0;l<o.cartesian.length;l++){var b=o.cartesian[l];if(!i[b]){var x="."+b+",."+b+"-x,."+b+"-y";n._cartesianlayer.selectAll(x).remove();y(b,n)}}}};r.drawFramework=function(e){var t=e._fullLayout;var r=p(e);var a=t._cartesianlayer.selectAll(".subplot").data(r,i.identity);a.enter().append("g").attr("class",function(e){return"subplot "+e});a.order();a.exit().call(m,t);a.each(function(r){var a=t._plots[r];a.plotgroup=n.select(this);a.overlays=[];g(e,a);if(a.mainplot){var i=t._plots[a.mainplot];i.overlays.push(a)}a.draglayer=h(t._draggers,"g",r)})};r.rangePlot=function(e,t,r){g(e,t);v(e,t,r);o.style(e)};function p(e){var t=e._fullLayout;var r=[];var n=[];for(var a in t._plots){var i=t._plots[a];var o=i.xaxis._mainAxis;var s=i.yaxis._mainAxis;var l=o._id+s._id;if(l!==a&&t._plots[l]){i.mainplot=l;i.mainplotinfo=t._plots[l];n.push(a)}else{r.push(a);i.mainplot=undefined}}r=r.concat(n);return r}function g(e,t){var r=t.plotgroup;var n=t.id;var a=f.layerValue2layerClass[t.xaxis.layer];var i=f.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.plot=h(r,"g","plot");t.xlines=h(r,"path","xlines-above");t.ylines=h(r,"path","ylines-above");t.xaxislayer=h(r,"g","xaxislayer-above");t.yaxislayer=h(r,"g","yaxislayer-above")}else{var s=h(r,"g","layer-subplot");t.shapelayer=h(s,"g","shapelayer");t.imagelayer=h(s,"g","imagelayer");t.gridlayer=h(r,"g","gridlayer");t.zerolinelayer=h(r,"g","zerolinelayer");h(r,"path","xlines-below");h(r,"path","ylines-below");t.overlinesBelow=h(r,"g","overlines-below");h(r,"g","xaxislayer-below");h(r,"g","yaxislayer-below");t.overaxesBelow=h(r,"g","overaxes-below");t.plot=h(r,"g","plot");t.overplot=h(r,"g","overplot");t.xlines=h(r,"path","xlines-above");t.ylines=h(r,"path","ylines-above");t.overlinesAbove=h(r,"g","overlines-above");h(r,"g","xaxislayer-above");h(r,"g","yaxislayer-above");t.overaxesAbove=h(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+a);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+a);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var l=t.mainplotinfo;var c=l.plotgroup;var v=n+"-x";var p=n+"-y";t.gridlayer=l.gridlayer;t.zerolinelayer=l.zerolinelayer;h(l.overlinesBelow,"path",v);h(l.overlinesBelow,"path",p);h(l.overaxesBelow,"g",v);h(l.overaxesBelow,"g",p);t.plot=h(l.overplot,"g",n);h(l.overlinesAbove,"path",v);h(l.overlinesAbove,"path",p);h(l.overaxesAbove,"g",v);h(l.overaxesAbove,"g",p);t.xlines=c.select(".overlines-"+a).select("."+v);t.ylines=c.select(".overlines-"+i).select("."+p);t.xaxislayer=c.select(".overaxes-"+a).select("."+v);t.yaxislayer=c.select(".overaxes-"+i).select("."+p)}if(!o){d(t.gridlayer,"g",t.xaxis._id);d(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").sort(u.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function m(e,t){if(!e)return;var r={};e.each(function(e){var a=n.select(this);a.remove();y(e,t);r[e]=true});for(var a in t._plots){var i=t._plots[a];var o=i.overlays||[];for(var s=0;s<o.length;s++){var l=o[s];if(r[l.id]){l.plot.selectAll(".trace").remove()}}}}function y(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var t=e._fullLayout._glimages;var r=n.select(e).selectAll(".svg-container");var a=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var n=t.append("svg:image");n.attr({xmlns:c.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}a.each(i)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":348,"../../constants/xmlns_namespaces":426,"../../lib":445,"../../registry":536,"../get_data":520,"../plots":528,"./attributes":490,"./axis_ids":495,"./constants":497,"./graph_interact":501,"./layout_attributes":504,"./layout_defaults":505,"./transition_axes":514,d3:86}],504:[function(e,t,r){"use strict";var n=e("../font_attributes");var a=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/plot_template").templatedArray;var l=e("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc",_noTemplating:true},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}}],editType:"axrange",impliedEdits:{autorange:false}},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:false,editType:"layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":322,"../../components/drawing/attributes":347,"../../lib/extend":436,"../../plot_api/plot_template":482,"../font_attributes":518,"./constants":497}],505:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../components/color");var o=e("../../plot_api/plot_template");var s=e("../layout_attributes");var l=e("./layout_attributes");var u=e("./type_defaults");var f=e("./axis_defaults");var c=e("./constraint_defaults");var h=e("./position_defaults");var d=e("./axis_ids");t.exports=function e(t,r,v){var p={};var g={};var m={};var y={};var b;for(b=0;b<v.length;b++){var x=v[b];if(!n.traceIs(x,"cartesian")&&!n.traceIs(x,"gl2d")){continue}var _=d.id2name(x.xaxis);var w=d.id2name(x.yaxis);if(!n.traceIs(x,"carpet")||x.type==="carpet"&&!x._cheater){if(_)g[_]=1}if(x.type==="carpet"&&x._cheater){if(_)p[_]=1}if(n.traceIs(x,"2dMap")){m[_]=true;m[w]=true}if(n.traceIs(x,"oriented")){var A=x.orientation==="h"?w:_;y[A]=true}}var k=r._subplots;var T=k.xaxis;var M=k.yaxis;var E=a.simpleMap(T,d.id2name);var C=a.simpleMap(M,d.id2name);var S=E.concat(C);var L=i.background;if(T.length&&M.length){L=a.coerce(t,r,s,"plot_bgcolor")}var O=i.combine(L,r.paper_bgcolor);var I,D,R,P;function z(e,t){return a.coerce(R,P,l,e,t)}function F(e,t){return a.coerce2(R,P,l,e,t)}function B(e){return e==="x"?M:T}var N={x:B("x"),y:B("y")};function j(e,r){var n=e==="x"?E:C;var a=[];for(var i=0;i<n.length;i++){var o=n[i];if(o!==r&&!(t[o]||{}).overlaying){a.push(d.name2id(o))}}return a}for(b=0;b<S.length;b++){I=S[b];D=I.charAt(0);if(!a.isPlainObject(t[I])){t[I]={}}R=t[I];P=o.newContainer(r,I,D+"axis");u(R,P,z,v,I);var U=j(D,I);var V={letter:D,font:r.font,outerTicks:m[I],showGrid:!y[I],data:v,bgColor:O,calendar:r.calendar,automargin:true,cheateronly:D==="x"&&p[I]&&!g[I]};f(R,P,z,V,r);var H=F("spikecolor"),q=F("spikethickness"),G=F("spikedash"),X=F("spikemode"),W=F("spikesnap"),Y=z("showspikes",!!H||!!q||!!G||!!X||!!W);if(!Y){delete P.spikecolor;delete P.spikethickness;delete P.spikedash;delete P.spikemode;delete P.spikesnap}var Z={letter:D,counterAxes:N[D],overlayableAxes:U,grid:r.grid};h(R,P,z,Z);P._input=R}var J=n.getComponentMethod("rangeslider","handleDefaults");var Q=n.getComponentMethod("rangeselector","handleDefaults");for(b=0;b<E.length;b++){I=E[b];R=t[I];P=r[I];J(t,r,I);if(P.type==="date"){Q(R,P,r,C,P.calendar)}z("fixedrange")}for(b=0;b<C.length;b++){I=C[b];R=t[I];P=r[I];var $=r[d.id2name(P.anchor)];var K=$&&$.rangeslider&&$.rangeslider.visible;z("fixedrange",K)}r._axisConstraintGroups=[];var ee=N.x.concat(N.y);for(b=0;b<S.length;b++){I=S[b];D=I.charAt(0);R=t[I];P=r[I];c(R,P,z,ee,r)}}},{"../../components/color":323,"../../lib":445,"../../plot_api/plot_template":482,"../../registry":536,"../layout_attributes":526,"./axis_defaults":494,"./axis_ids":495,"./constraint_defaults":498,"./layout_attributes":504,"./position_defaults":507,"./type_defaults":515}],506:[function(e,t,r){"use strict";var n=e("tinycolor2").mix;var a=e("../../components/color/attributes").lightFraction;var i=e("../../lib");t.exports=function e(t,r,o,s){s=s||{};var l=s.dfltColor;function u(e,n){return i.coerce2(t,r,s.attributes,e,n)}var f=u("linecolor",l);var c=u("linewidth");var h=o("showline",s.showLine||!!f||!!c);if(!h){delete r.linecolor;delete r.linewidth}var d=n(l,s.bgColor,s.blend||a).toRgbString();var v=u("gridcolor",d);var p=u("gridwidth");var g=o("showgrid",s.showGrid||!!v||!!p);if(!g){delete r.gridcolor;delete r.gridwidth}if(!s.noZeroLine){var m=u("zerolinecolor",l);var y=u("zerolinewidth");var b=o("zeroline",s.showGrid||!!m||!!y);if(!b){delete r.zerolinecolor;delete r.zerolinewidth}}}},{"../../components/color/attributes":322,"../../lib":445,tinycolor2:285}],507:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");t.exports=function e(t,r,i,o){var s=o.counterAxes||[];var l=o.overlayableAxes||[];var u=o.letter;var f=o.grid;var c,h,d,v;if(f){h=f._domains[u][f._axisMap[r._id]];c=f._anchors[r._id];if(h){d=f[u+"side"].split(" ")[0];v=f.domain[u][d==="right"||d==="top"?1:0]}}h=h||[0,1];c=c||(n(t.position)?"free":s[0]||"free");d=d||(u==="x"?"bottom":"left");v=v||0;var p=a.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:c}},"anchor");if(p==="free")i("position",v);a.coerce(t,r,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var g=false;if(l.length){g=a.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(l),dflt:false}},"overlaying")}if(!g){var m=i("domain",h);if(m[0]>m[1]-.01)r.domain=h;a.noneOrAll(t.domain,r.domain,h)}i("layer");return r}},{"../../lib":445,"fast-isnumeric":151}],508:[function(e,t,r){"use strict";var n=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,a){if(a===undefined){a=n[t.constraintoward||"center"]}var i=[t.r2l(t.range[0]),t.r2l(t.range[1])];var o=i[0]+(i[1]-i[0])*a;t.range=t._input.range=[t.l2r(o+(i[0]-o)*r),t.l2r(o+(i[1]-o)*r)]}},{"../../constants/alignment":421}],509:[function(e,t,r){"use strict";var n=e("polybooljs");var a=e("../../registry");var i=e("../../components/color");var o=e("../../components/fx");var s=e("../../lib/polygon");var l=e("../../lib/throttle");var u=e("../../components/fx/helpers").makeEventData;var f=e("./axis_ids").getFromId;var c=e("../sort_modules").sortModules;var h=e("./constants");var d=h.MINSELECT;var v=s.filter;var p=s.tester;var g=s.multitester;function m(e){return e._id}function y(e,t,r,n,a){var s=n.gd;var u=s._fullLayout;var c=u._zoomlayer;var y=n.element.getBoundingClientRect();var A=n.plotinfo;var k=A.xaxis._offset;var T=A.yaxis._offset;var M=t-y.left;var E=r-y.top;var C=M;var S=E;var L="M"+M+","+E;var O=n.xaxes[0]._length;var I=n.yaxes[0]._length;var D=n.xaxes.map(m);var R=n.yaxes.map(m);var P=n.xaxes.concat(n.yaxes);var z=e.altKey;var F,B,N,j;var U,V,H,q,G;var X=u._lastSelectedSubplot&&u._lastSelectedSubplot===A.id;if(X&&(e.shiftKey||e.altKey)&&(A.selection&&A.selection.polygons)&&!n.polygons){n.polygons=A.selection.polygons;n.mergedPolygons=A.selection.mergedPolygons}else if(!e.shiftKey&&!e.altKey||(e.shiftKey||e.altKey)&&!A.selection){A.selection={};A.selection.polygons=n.polygons=[];A.selection.mergedPolygons=n.mergedPolygons=[]}if(!X){w(c);u._lastSelectedSubplot=A.id}if(a==="lasso"){F=v([[M,E]],h.BENDPX)}var W=c.selectAll("path.select-outline-"+A.id).data([1,2]);W.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+A.id}).attr("transform","translate("+k+", "+T+")").attr("d",L+"Z");var Y=c.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1}).attr("transform","translate("+k+", "+T+")").attr("d","M0,0Z");var Z=[];var J=u._uid+h.SELECTID;var Q=[];for(U=0;U<s.calcdata.length;U++){V=s.calcdata[U];H=V[0].trace;if(H.visible!==true||!H._module||!H._module.selectPoints)continue;if(n.subplot){if(H.subplot===n.subplot||H.geo===n.subplot){Z.push({_module:H._module,cd:V,xaxis:n.xaxes[0],yaxis:n.yaxes[0]})}}else if(H.type==="splom"&&H._xaxes[D[0]]&&H._yaxes[R[0]]){Z.push({_module:H._module,cd:V,xaxis:n.xaxes[0],yaxis:n.yaxes[0]})}else{if(D.indexOf(H.xaxis)===-1)continue;if(R.indexOf(H.yaxis)===-1)continue;Z.push({_module:H._module,cd:V,xaxis:f(s,H.xaxis),yaxis:f(s,H.yaxis)})}}function $(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return e.p2d(r[t])}}function K(e,t){return e-t}var ee;if(A.fillRangeItems){ee=A.fillRangeItems}else{if(a==="select"){ee=function(e,t){var r=e.range={};for(U=0;U<P.length;U++){var n=P[U];var a=n._id.charAt(0);r[n._id]=[n.p2d(t[a+"min"]),n.p2d(t[a+"max"])].sort(K)}}}else{ee=function(e,t,r){var n=e.lassoPoints={};for(U=0;U<P.length;U++){var a=P[U];n[a._id]=r.filtered.map($(a))}}}}n.moveFn=function(e,t){C=Math.max(0,Math.min(O,e+M));S=Math.max(0,Math.min(I,t+E));var r=Math.abs(C-M),i=Math.abs(S-E);if(a==="select"){var o=u.selectdirection;if(u.selectdirection==="any"){if(i<Math.min(r*.6,d))o="h";else if(r<Math.min(i*.6,d))o="v";else o="d"}else{o=u.selectdirection}if(o==="h"){j=[[M,0],[M,I],[C,I],[C,0]];j.xmin=Math.min(M,C);j.xmax=Math.max(M,C);j.ymin=Math.min(0,I);j.ymax=Math.max(0,I);Y.attr("d","M"+j.xmin+","+(E-d)+"h-4v"+2*d+"h4Z"+"M"+(j.xmax-1)+","+(E-d)+"h4v"+2*d+"h-4Z")}else if(o==="v"){j=[[0,E],[0,S],[O,S],[O,E]];j.xmin=Math.min(0,O);j.xmax=Math.max(0,O);j.ymin=Math.min(E,S);j.ymax=Math.max(E,S);Y.attr("d","M"+(M-d)+","+j.ymin+"v-4h"+2*d+"v4Z"+"M"+(M-d)+","+(j.ymax-1)+"v4h"+2*d+"v-4Z")}else if(o==="d"){j=[[M,E],[M,S],[C,S],[C,E]];j.xmin=Math.min(M,C);j.xmax=Math.max(M,C);j.ymin=Math.min(E,S);j.ymax=Math.max(E,S);Y.attr("d","M0,0Z")}}else if(a==="lasso"){F.addPt([C,S]);j=F.filtered}if(n.polygons&&n.polygons.length){N=x(n.mergedPolygons,j,z);j.subtract=z;B=g(n.polygons.concat([j]))}else{N=[j];B=p(j)}var f=[];for(U=0;U<N.length;U++){var c=N[U];f.push(c.join("L")+"L"+c[0])}W.attr("d","M"+f.join("M")+"Z");l.throttle(J,h.SELECTDELAY,function(){Q=[];var e,t=[],r;for(U=0;U<Z.length;U++){q=Z[U];r=q._module.selectPoints(q,B);t.push(r);e=_(r,q);if(Q.length){for(var a=0;a<e.length;a++){Q.push(e[a])}}else Q=e}G={points:Q};b(s,Z,G);ee(G,j,F);n.gd.emit("plotly_selecting",G)})};n.clickFn=function(e,t){Y.remove();l.done(J).then(function(){l.clear(J);if(e===2){W.remove();for(U=0;U<Z.length;U++){q=Z[U];q._module.selectPoints(q,false)}b(s,Z);s.emit("plotly_deselect",null)}else{s.emit("plotly_selected",undefined)}o.click(s,t)})};n.doneFn=function(){Y.remove();l.done(J).then(function(){l.clear(J);n.gd.emit("plotly_selected",G);if(j&&n.polygons){j.subtract=z;n.polygons.push(j);n.mergedPolygons.length=0;[].push.apply(n.mergedPolygons,N)}})}}function b(e,t,r){var n,i,o,s;if(r){var l=r.points||[];for(n=0;n<t.length;n++){s=t[n].cd[0].trace;s.selectedpoints=[];s._input.selectedpoints=[]}for(n=0;n<l.length;n++){var u=l[n];var f=u.data;var h=u.fullData;if(u.pointIndices){[].push.apply(f.selectedpoints,u.pointIndices);[].push.apply(h.selectedpoints,u.pointIndices)}else{f.selectedpoints.push(u.pointIndex);h.selectedpoints.push(u.pointIndex)}}}else{for(n=0;n<t.length;n++){s=t[n].cd[0].trace;delete s.selectedpoints;delete s._input.selectedpoints}}var d={};for(n=0;n<t.length;n++){o=t[n];var v=o._module.name;if(d[v]){d[v].push(o)}else{d[v]=[o]}}var p=Object.keys(d).sort(c);for(n=0;n<p.length;n++){var g=d[p[n]];var m=g.length;var y=g[0];var b=y.cd[0].trace;var x=y._module;var _=x.styleOnSelect||x.style;if(a.traceIs(b,"regl")){var w=new Array(m);for(i=0;i<m;i++){w[i]=g[i].cd}_(e,w)}else{for(i=0;i<m;i++){_(e,g[i].cd)}}}}function x(e,t,r){var a;if(r){a=n.difference({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}a=n.union({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}function _(e,t){if(Array.isArray(e)){var r=t.cd;var n=t.cd[0].trace;for(var a=0;a<e.length;a++){e[a]=u(e[a],n,r)}}return e}function w(e){e.selectAll(".select-outline").remove()}t.exports={prepSelect:y,clearSelect:w}},{"../../components/color":323,"../../components/fx":365,"../../components/fx/helpers":362,"../../lib/polygon":457,"../../lib/throttle":470,"../../registry":536,"../sort_modules":535,"./axis_ids":495,"./constants":497,polybooljs:240}],510:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../lib");var o=i.cleanNumber;var s=i.ms2DateTime;var l=i.dateTime2ms;var u=i.ensureNumber;var f=e("../../constants/numerical");var c=f.FP_SAFE;var h=f.BADNUM;var d=e("./constants");var v=e("./axis_ids");function p(e){return Math.pow(10,e)}t.exports=function e(t,r){r=r||{};var f=(t._id||"x").charAt(0);var g=10;function m(e,r){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&r&&t.range&&t.range.length===2){var n=t.range[0],a=t.range[1];return.5*(n+a-3*g*Math.abs(n-a))}else return h}function y(e,r,n){var i=l(e,n||t.calendar);if(i===h){if(a(e))i=l(new Date(+e));else return h}return i}function b(e,r,n){return s(e,r,n||t.calendar)}function x(e){return t._categories[Math.round(e)]}function _(e){if(e!==null&&e!==undefined){if(t._categoriesMap===undefined){t._categoriesMap={}}if(t._categoriesMap[e]!==undefined){return t._categoriesMap[e]}else{t._categories.push(e);var r=t._categories.length-1;t._categoriesMap[e]=r;return r}}return h}function w(e){if(t._categoriesMap){var r=t._categoriesMap[e];if(r!==undefined)return r}if(a(e))return+e}function A(e){if(!a(e))return h;return n.round(t._b+t._m*e,2)}function k(e){return(e-t._b)/t._m}t.c2l=t.type==="log"?m:u;t.l2c=t.type==="log"?p:u;t.l2p=A;t.p2l=k;t.c2p=t.type==="log"?function(e,t){return A(m(e,t))}:A;t.p2c=t.type==="log"?function(e){return p(k(e))}:k;if(["linear","-"].indexOf(t.type)!==-1){t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=o;t.c2d=t.c2r=t.l2d=t.l2r=u;t.d2p=t.r2p=function(e){return t.l2p(o(e))};t.p2d=t.p2r=k;t.cleanPos=u}else if(t.type==="log"){t.d2r=t.d2l=function(e,t){return m(o(e),t)};t.r2d=t.r2c=function(e){return p(o(e))};t.d2c=t.r2l=o;t.c2d=t.l2r=u;t.c2r=m;t.l2d=p;t.d2p=function(e,r){return t.l2p(t.d2r(e,r))};t.p2d=function(e){return p(k(e))};t.r2p=function(e){return t.l2p(o(e))};t.p2r=k;t.cleanPos=u}else if(t.type==="date"){t.d2r=t.r2d=i.identity;t.d2c=t.r2c=t.d2l=t.r2l=y;t.c2d=t.c2r=t.l2d=t.l2r=b;t.d2p=t.r2p=function(e,r,n){return t.l2p(y(e,0,n))};t.p2d=t.p2r=function(e,t,r){return b(k(e),t,r)};t.cleanPos=function(e){return i.cleanDate(e,h,t.calendar)}}else if(t.type==="category"){t.d2c=t.d2l=_;t.r2d=t.c2d=t.l2d=x;t.d2r=t.d2l_noadd=w;t.r2c=function(e){var r=w(e);return r!==undefined?r:t.fraction2r(.5)};t.l2r=t.c2r=u;t.r2l=w;t.d2p=function(e){return t.l2p(t.r2c(e))};t.p2d=function(e){return x(k(e))};t.r2p=t.d2p;t.p2r=k;t.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return u(e)}}t.fraction2r=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))};t.r2fraction=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)};t.cleanRange=function(e,r){if(!r)r={};if(!e)e="range";var n=i.nestedProperty(t,e).get();var o,s;if(t.type==="date")s=i.dfltRange(t.calendar);else if(f==="y")s=d.DFLTRANGEY;else s=r.dfltRange||d.DFLTRANGEX;s=s.slice();if(!n||n.length!==2){i.nestedProperty(t,e).set(s);return}if(t.type==="date"){n[0]=i.cleanDate(n[0],h,t.calendar);n[1]=i.cleanDate(n[1],h,t.calendar)}for(o=0;o<2;o++){if(t.type==="date"){if(!i.isDateTime(n[o],t.calendar)){t[e]=s;break}if(t.r2l(n[0])===t.r2l(n[1])){var l=i.constrain(t.r2l(n[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);n[0]=t.l2r(l-1e3);n[1]=t.l2r(l+1e3);break}}else{if(!a(n[o])){if(a(n[1-o])){n[o]=n[1-o]*(o?10:.1)}else{t[e]=s;break}}if(n[o]<-c)n[o]=-c;else if(n[o]>c)n[o]=c;if(n[0]===n[1]){var u=Math.max(1,Math.abs(n[0]*1e-6));n[0]-=u;n[1]+=u}}}};t.setScale=function(e){var n=r._size;if(!t._categories)t._categories=[];if(!t._categoriesMap)t._categoriesMap={};if(t.overlaying){var a=v.getFromId({_fullLayout:r},t.overlaying);t.domain=a.domain}var i=e&&t._r?"_r":"range",o=t.calendar;t.cleanRange(i);var s=t.r2l(t[i][0],o),l=t.r2l(t[i][1],o);if(f==="y"){t._offset=n.t+(1-t.domain[1])*n.h;t._length=n.h*(t.domain[1]-t.domain[0]);t._m=t._length/(s-l);t._b=-t._m*l}else{t._offset=n.l+t.domain[0]*n.w;t._length=n.w*(t.domain[1]-t.domain[0]);t._m=t._length/(l-s);t._b=-t._m*s}if(!isFinite(t._m)||!isFinite(t._b)){r._replotting=false;throw new Error("Something went wrong with axis scaling")}};t.makeCalcdata=function(e,r){var n,a,o,s;var l=t.type;var u=l==="date"&&e[r+"calendar"];if(r in e){n=e[r];s=e._length||n.length;if(i.isTypedArray(n)&&(l==="linear"||l==="log")){if(s===n.length){return n}else if(n.subarray){return n.subarray(0,s)}}a=new Array(s);for(o=0;o<s;o++){a[o]=t.d2c(n[o],0,u)}}else{var f=r+"0"in e?t.d2c(e[r+"0"],0,u):0;var c=e["d"+r]?Number(e["d"+r]):1;n=e[{x:"y",y:"x"}[r]];s=e._length||n.length;a=new Array(s);for(o=0;o<s;o++){a[o]=f+o*c}}return a};t.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&a(t.r2l(e[0]))&&a(t.r2l(e[1]))};t.isPtWithinRange=function(e,r){var n=t.c2l(e[f],null,r);var a=t.r2l(t.range[0]);var i=t.r2l(t.range[1]);if(a<i){return a<=n&&n<=i}else{return i<=n&&n<=a}};t.clearCalc=function(){t._min=[];t._max=[];t._categories=(t._initialCategories||[]).slice();t._categoriesMap={};for(var e=0;e<t._categories.length;e++){t._categoriesMap[t._categories[e]]=e}};var T=r._d3locale;if(t.type==="date"){t._dateFormat=T?T.timeFormat.utc:n.time.format.utc;t._extraFormat=r._extraFormat}t._separators=r.separators;t._numFormat=T?T.numberFormat:n.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":424,"../../lib":445,"./axis_ids":495,"./constants":497,d3:86,"fast-isnumeric":151}],511:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");var i=e("../array_container_defaults");t.exports=function e(t,r,l,u,f){var c=o(t);var h=l("tickprefix");if(h)l("showtickprefix",c);var d=l("ticksuffix",f.tickSuffixDflt);if(d)l("showticksuffix",c);var v=l("showticklabels");if(v){var p=f.font||{};var g=r.color!==a.color.dflt?r.color:p.color;n.coerceFont(l,"tickfont",{family:p.family,size:p.size,color:g});l("tickangle");if(u!=="category"){var m=l("tickformat");var y=t.tickformatstops;if(Array.isArray(y)&&y.length){i(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:s})}if(!m&&u!=="date"){l("showexponent",c);l("exponentformat");l("separatethousands")}}}};function o(e){var t=["showexponent","showtickprefix","showticksuffix"],r=t.filter(function(t){return e[t]!==undefined}),n=function(t){return e[t]===e[r[0]]};if(r.every(n)||r.length===1){return e[r[0]]}}function s(e,t){function r(r,i){return n.coerce(e,t,a.tickformatstops,r,i)}var i=r("enabled");if(i){r("dtickrange");r("value")}}},{"../../lib":445,"../array_container_defaults":488,"./layout_attributes":504}],512:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");t.exports=function e(t,r,i,o){var s=n.coerce2(t,r,a,"ticklen"),l=n.coerce2(t,r,a,"tickwidth"),u=n.coerce2(t,r,a,"tickcolor",r.color),f=i("ticks",o.outerTicks||s||l||u?"outside":"");if(!f){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":445,"./layout_attributes":504}],513:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").ONEDAY;t.exports=function e(t,r,o,s){var l;if(t.tickmode==="array"&&(s==="log"||s==="date")){l=r.tickmode="auto"}else{var u=Array.isArray(t.tickvals)?"array":t.dtick?"linear":"auto";l=o("tickmode",u)}if(l==="auto")o("nticks");else if(l==="linear"){var f=s==="date"?i:1;var c=o("dtick",f);if(n(c)){r.dtick=c>0?Number(c):f}else if(typeof c!=="string"){r.dtick=f}else{var h=c.charAt(0),d=c.substr(1);d=n(d)?Number(d):0;if(d<=0||!(s==="date"&&h==="M"&&d===Math.round(d)||s==="log"&&h==="L"||s==="log"&&h==="D"&&(d===1||d===2))){r.dtick=f}}var v=s==="date"?a.dateTick0(r.calendar):0;var p=o("tick0",v);if(s==="date"){r.tick0=a.cleanDate(p,v)}else if(n(p)&&c!=="D1"&&c!=="D2"){r.tick0=Number(p)}else{r.tick0=v}}else{var g=o("tickvals");if(g===undefined)r.tickmode="auto";else o("ticktext")}}},{"../../constants/numerical":424,"../../lib":445,"fast-isnumeric":151}],514:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../components/drawing");var o=e("./axes");var s=e("./constants").attrRegex;t.exports=function e(t,r,l,u){var f=t._fullLayout;var c=[];function h(e){var t,r,n,a,i;var o={};for(t in e){r=t.split(".");n=r[0].match(s);if(n){var l=t.charAt(0);var u=r[0];a=f[u];i={};if(Array.isArray(e[t])){i.to=e[t].slice(0)}else{if(Array.isArray(e[t].range)){i.to=e[t].range.slice(0)}}if(!i.to)continue;i.axisName=u;i.length=a._length;c.push(l);o[l]=i}}return o}function d(e,t,r){var n;var a=e._plots;var i=[];var o,s;for(n in a){var l=a[n];if(i.indexOf(l)!==-1)continue;var u=l.xaxis._id;var f=l.yaxis._id;var c=l.xaxis.range;var h=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice();l.yaxis._r=l.yaxis.range.slice();if(r[u]){o=r[u].to}else{o=c}if(r[f]){s=r[f].to}else{s=h}if(c[0]===o[0]&&c[1]===o[1]&&h[0]===s[0]&&h[1]===s[1])continue;if(t.indexOf(u)!==-1||t.indexOf(f)!==-1){i.push(l)}}return i}var v=h(r);var p=Object.keys(v);var g=d(f,p,v);function m(){function e(e,r,n){for(var a=0;a<e.length;a++){r(t,a);if(n)return}}e(f.annotations||[],a.getComponentMethod("annotations","drawOne"));e(f.shapes||[],a.getComponentMethod("shapes","drawOne"));e(f.images||[],a.getComponentMethod("images","draw"),true)}if(!g.length){m();return false}function y(e,r){var n=[],i;n=[e._id,r._id];for(i=0;i<n.length;i++){o.doTicksSingle(t,n[i],true)}function s(e,r,a){for(i=0;i<e.length;i++){var o=e[i];if(n.indexOf(o.xref)!==-1||n.indexOf(o.yref)!==-1){r(t,i)}if(a)return}}s(f.annotations||[],a.getComponentMethod("annotations","drawOne"));s(f.shapes||[],a.getComponentMethod("shapes","drawOne"));s(f.images||[],a.getComponentMethod("images","draw"),true)}function b(e){var t=e.xaxis;var r=e.yaxis;f._defs.select("#"+e.clipId+"> rect").call(i.setTranslate,0,0).call(i.setScale,1,1);e.plot.call(i.setTranslate,t._offset,r._offset).call(i.setScale,1,1);var n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(i.setPointGroupScale,1,1);n.selectAll(".textpoint").call(i.setTextPointsScale,1,1);n.call(i.hideOutsideRangePoints,e)}function x(e,r){var n,a,o;var s=v[e.xaxis._id];var l=v[e.yaxis._id];var u=[];if(s){n=t._fullLayout[s.axisName];a=n._r;o=s.to;u[0]=(a[0]*(1-r)+r*o[0]-a[0])/(a[1]-a[0])*e.xaxis._length;var f=a[1]-a[0];var c=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0];n.range[1]=a[1]*(1-r)+r*o[1];u[2]=e.xaxis._length*(1-r+r*c/f)}else{u[0]=0;u[2]=e.xaxis._length}if(l){n=t._fullLayout[l.axisName];a=n._r;o=l.to;u[1]=(a[1]*(1-r)+r*o[1]-a[1])/(a[0]-a[1])*e.yaxis._length;var h=a[1]-a[0];var d=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0];n.range[1]=a[1]*(1-r)+r*o[1];u[3]=e.yaxis._length*(1-r+r*d/h)}else{u[1]=0;u[3]=e.yaxis._length}y(e.xaxis,e.yaxis);var p=e.xaxis;var g=e.yaxis;var m=!!s;var b=!!l;var x=m?p._length/u[2]:1,_=b?g._length/u[3]:1;var w=m?u[0]:0,A=b?u[1]:0;var k=m?u[0]/u[2]*p._length:0,T=b?u[1]/u[3]*g._length:0;var M=p._offset-k,E=g._offset-T;e.clipRect.call(i.setTranslate,w,A).call(i.setScale,1/x,1/_);e.plot.call(i.setTranslate,M,E).call(i.setScale,x,_);i.setPointGroupScale(e.zoomScalePts,1/x,1/_);i.setTextPointsScale(e.zoomScaleTxt,1/x,1/_)}var _;if(u){_=u()}function w(){var e={};for(var r=0;r<p.length;r++){var n=t._fullLayout[v[p[r]].axisName];var i=v[p[r]].to;e[n._name+".range[0]"]=i[0];e[n._name+".range[1]"]=i[1];n.range=i.slice()}_&&_();return a.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){b(g[e])}})}function A(){var e={};for(var r=0;r<p.length;r++){var n=t._fullLayout[p[r]+"axis"];e[n._name+".range[0]"]=n.range[0];e[n._name+".range[1]"]=n.range[1];n.range=n._r.slice()}return a.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){b(g[e])}})}var k,T,M;var E=n.ease(l.easing);t._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(M);M=null;return A()});function C(){T=Date.now();var e=Math.min(1,(T-k)/l.duration);var t=E(e);for(var r=0;r<g.length;r++){x(g[r],t)}if(T-k>l.duration){w();M=window.cancelAnimationFrame(C)}else{M=window.requestAnimationFrame(C)}}k=Date.now();M=window.requestAnimationFrame(C);return Promise.resolve()}},{"../../components/drawing":348,"../../registry":536,"./axes":492,"./constants":497,d3:86}],515:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./axis_autotype");var i=e("./axis_ids").name2id;t.exports=function e(t,r,n,a,s){if(s){r._name=s;r._id=i(s)}var l=n("type");if(l==="-"){o(r,a);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var i=r.charAt(0);if(r.indexOf("scene")!==-1)r=i;var o=s(t,r,i);if(!o)return;if(o.type==="histogram"&&i==={v:"y",h:"x"}[o.orientation||"v"]){e.type="linear";return}var f=i+"calendar";var c=o[f];var h;if(u(o,i)){var d=l(o);var v=[];for(h=0;h<t.length;h++){var p=t[h];if(!n.traceIs(p,"box-violin")||(p[i+"axis"]||i)!==r)continue;if(p[d]!==undefined)v.push(p[d][0]);else if(p.name!==undefined)v.push(p.name);else v.push("text");if(p[f]!==c)c=undefined}e.type=a(v,c)}else if(o.type==="splom"){var g=o.dimensions;for(h=0;h<g.length;h++){var m=g[h];if(m.visible){e.type=a(m.values,c);break}}}else{e.type=a(o[i]||[o[i+"0"]],c)}}function s(e,t,r){for(var n=0;n<e.length;n++){var a=e[n];if(a.type==="splom"&&a._length>0&&a["_"+r+"axes"][t]){return a}if((a[r+"axis"]||r)===t){if(u(a,r)){return a}else if((a[r]||[]).length||a[r+"0"]){return a}}}}function l(e){return{v:"x",h:"y"}[e.orientation||"v"]}function u(e,t){var r=l(e),a=n.traceIs(e,"box-violin"),i=n.traceIs(e._fullInput||{},"candlestick");return a&&!i&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":536,"./axis_autotype":493,"./axis_ids":495}],516:[function(e,t,r){"use strict";var n=e("../registry");var a=e("../lib");r.manageCommandObserver=function(e,t,n,o){var s={};var l=true;if(t&&t._commandObserver){s=t._commandObserver}if(!s.cache){s.cache={}}s.lookupTable={};var u=r.hasSimpleAPICommandBindings(e,n,s.lookupTable);if(t&&t._commandObserver){if(!u){if(t._commandObserver.remove){t._commandObserver.remove();t._commandObserver=null;return s}}else{return s}}if(u){i(e,u,s.cache);s.check=function t(){if(!l)return;var r=i(e,u,s.cache);if(r.changed&&o){if(s.lookupTable[r.value]!==undefined){s.disable();Promise.resolve(o({value:r.value,type:u.type,prop:u.prop,traces:u.traces,index:s.lookupTable[r.value]})).then(s.enable,s.enable)}}return r.changed};var f=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var c=0;c<f.length;c++){e._internalOn(f[c],s.check)}s.remove=function(){for(var t=0;t<f.length;t++){e._removeInternalListener(f[t],s.check)}}}else{a.log("Unable to automatically bind plot updates to API command");s.lookupTable={};s.remove=function(){}}s.disable=function e(){l=false};s.enable=function e(){l=true};if(t){t._commandObserver=s}return s};r.hasSimpleAPICommandBindings=function(e,t,n){var a;var i=t.length;var o;for(a=0;a<i;a++){var s;var l=t[a];var u=l.method;var f=l.args;if(!Array.isArray(f))f=[];if(!u){return false}var c=r.computeAPICommandBindings(e,u,f);if(c.length!==1){return false}if(!o){o=c[0];if(Array.isArray(o.traces)){o.traces.sort()}}else{s=c[0];if(s.type!==o.type){return false}if(s.prop!==o.prop){return false}if(Array.isArray(o.traces)){if(Array.isArray(s.traces)){s.traces.sort();for(var h=0;h<o.traces.length;h++){if(o.traces[h]!==s.traces[h]){return false}}}else{return false}}else{if(s.prop!==o.prop){return false}}}s=c[0];var d=s.value;if(Array.isArray(d)){if(d.length===1){d=d[0]}else{return false}}if(n){n[d]=a}}return o};function i(e,t,r){var n,i,o;var s=false;if(t.type==="data"){n=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){n=e._fullLayout}else{return false}i=a.nestedProperty(n,t.prop).get();o=r[t.type]=r[t.type]||{};if(o.hasOwnProperty(t.prop)){if(o[t.prop]!==i){s=true}}o[t.prop]=i;return{changed:s,value:i}}r.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=n.apiMethodRegistry[t];var o=[e];if(!Array.isArray(r))r=[];for(var s=0;s<r.length;s++){o.push(r[s])}return i.apply(null,o).catch(function(e){a.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};r.computeAPICommandBindings=function(e,t,r){var n;if(!Array.isArray(r))r=[];switch(t){case"restyle":n=l(e,r);break;case"relayout":n=s(e,r);break;case"update":n=l(e,[r[0],r[2]]).concat(s(e,[r[1]]));break;case"animate":n=o(e,r);break;default:n=[]}return n};function o(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function s(e,t){var r=[];var n=t[0];var i={};if(typeof n==="string"){i[n]=t[1]}else if(a.isPlainObject(n)){i=n}else{return r}u(i,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0);return r}function l(e,t){var r,n,i,o;var s=[];n=t[0];i=t[1];r=t[2];o={};if(typeof n==="string"){o[n]=i}else if(a.isPlainObject(n)){o=n;if(r===undefined){r=i}}else{return s}if(r===undefined){r=null}u(o,function(t,n,a){var i;if(Array.isArray(a)){var o=Math.min(a.length,e.data.length);if(r){o=Math.min(o,r.length)}i=[];for(var l=0;l<o;l++){i[l]=r?r[l]:l}}else{i=r?r.slice(0):null}if(i===null){if(Array.isArray(a)){a=a[0]}}else if(Array.isArray(i)){if(!Array.isArray(a)){var u=a;a=[];for(var f=0;f<i.length;f++){a[f]=u}}a.length=Math.min(i.length,a.length)}s.push({type:"data",prop:t,traces:i,value:a})},"",0);return s}function u(e,t,r,n){Object.keys(e).forEach(function(i){var o=e[i];if(i[0]==="_")return;var s=r+(n>0?".":"")+i;if(a.isPlainObject(o)){u(o,t,s,n+1)}else{t(s,i,o)}})}},{"../lib":445,"../registry":536}],517:[function(e,t,r){"use strict";var n=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var a=e.name?e.name+" ":"";var i=e.trace?"trace ":"subplot ";var o=t.description?" "+t.description:"";var s={x:n({},r,{}),y:n({},r,{}),editType:e.editType};if(!e.noGridCell){s.row={valType:"integer",min:0,dflt:0,editType:e.editType};s.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return s};r.defaults=function(e,t,r,n){var a=n&&n.x||[0,1];var i=n&&n.y||[0,1];var o=t.grid;if(o){var s=r("domain.column");if(s!==undefined){if(s<o.columns)a=o._domains.x[s];else delete e.domain.column}var l=r("domain.row");if(l!==undefined){if(l<o.rows)i=o._domains.y[l];else delete e.domain.row}}r("domain.x",a);r("domain.y",i)}},{"../lib/extend":436}],518:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var n={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){n.family.arrayOk=true;n.size.arrayOk=true;n.color.arrayOk=true}return n}},{}],519:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],520:[function(e,t,r){"use strict";var n=e("../registry");var a=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var a=n.subplotsRegistry[t];if(!a)return[];var i=a.attr;var o=[];for(var s=0;s<e.length;s++){var l=e[s];var u=l[0].trace;if(u[i]===r)o.push(l)}return o};r.getModuleCalcData=function(e,t){var r=[];var a=[];var i;if(typeof t==="string"){i=n.getModule(t).plot}else if(typeof t==="function"){i=t}else{i=t.plot}if(!i){return[r,e]}for(var o=0;o<e.length;o++){var s=e[o];var l=s[0].trace;if(l.visible!==true)continue;if(l._module.plot===i){r.push(s)}else{a.push(s)}}return[r,a]};r.getSubplotData=function e(t,r,i){if(!n.subplotsRegistry[r])return[];var o=n.subplotsRegistry[r].attr;var s=[];var l,u,f;if(r==="gl2d"){var c=i.match(a);u="x"+c[1];f="y"+c[2]}for(var h=0;h<t.length;h++){l=t[h];if(r==="gl2d"&&n.traceIs(l,"gl2d")){if(l[o[0]]===u&&l[o[1]]===f){s.push(l)}}else{if(l[o]===i)s.push(l)}}return s};r.getUidsFromCalcData=function(e){var t={};for(var r=0;r<e.length;r++){var n=e[r][0].trace;t[n.uid]=1}return t}},{"../registry":536,"./cartesian/constants":497}],521:[function(e,t,r){"use strict";var n=e("mouse-change");var a=e("mouse-wheel");var i=e("mouse-event-offset");var o=e("../cartesian/constants");var s=e("has-passive-events");t.exports=u;function l(e,t){this.element=e;this.plot=t;this.mouseListener=null;this.wheelListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxEnabled=false;this.boxInited=false;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}function u(e){var t=e.mouseContainer,r=e.glplot,u=new l(t,r);function f(){e.xaxis.autorange=false;e.yaxis.autorange=false}function c(){var t=e.graphDiv._fullLayout._axisConstraintGroups;var r=e.xaxis._id;var n=e.yaxis._id;for(var a=0;a<t.length;a++){if(t[a][r]!==-1){if(t[a][n]!==-1)return true;break}}return false}u.mouseListener=n(t,h);t.addEventListener("touchstart",function(e){var r=i(e.changedTouches[0],t);h(0,r[0],r[1]);h(1,r[0],r[1]);e.preventDefault()},s?{passive:false}:false);t.addEventListener("touchmove",function(e){e.preventDefault();var r=i(e.changedTouches[0],t);h(1,r[0],r[1]);e.preventDefault()},s?{passive:false}:false);t.addEventListener("touchend",function(e){h(0,u.lastPos[0],u.lastPos[1]);e.preventDefault()},s?{passive:false}:false);function h(t,n,a){var i=e.calcDataBox(),s=r.viewBox;var l=u.lastPos[0],h=u.lastPos[1];var d=o.MINDRAG*r.pixelRatio;var v=o.MINZOOM*r.pixelRatio;var p,g;n*=r.pixelRatio;a*=r.pixelRatio;a=s[3]-s[1]-a;function m(t,r,n){var a=Math.min(r,n),o=Math.max(r,n);if(a!==o){i[t]=a;i[t+2]=o;u.dataBox=i;e.setRanges(i)}else{e.selectBox.selectBox=[0,0,1,1];e.glplot.setDirty()}}switch(e.fullLayout.dragmode){case"zoom":if(t){var y=n/(s[2]-s[0])*(i[2]-i[0])+i[0];var b=a/(s[3]-s[1])*(i[3]-i[1])+i[1];if(!u.boxInited){u.boxStart[0]=y;u.boxStart[1]=b;u.dragStart[0]=n;u.dragStart[1]=a}u.boxEnd[0]=y;u.boxEnd[1]=b;u.boxInited=true;if(!u.boxEnabled&&(u.boxStart[0]!==u.boxEnd[0]||u.boxStart[1]!==u.boxEnd[1])){u.boxEnabled=true}var x=Math.abs(u.dragStart[0]-n)<v;var _=Math.abs(u.dragStart[1]-a)<v;if(c()&&!(x&&_)){p=u.boxEnd[0]-u.boxStart[0];g=u.boxEnd[1]-u.boxStart[1];var w=(i[3]-i[1])/(i[2]-i[0]);if(Math.abs(p*w)>Math.abs(g)){u.boxEnd[1]=u.boxStart[1]+Math.abs(p)*w*(g>=0?1:-1);if(u.boxEnd[1]<i[1]){u.boxEnd[1]=i[1];u.boxEnd[0]=u.boxStart[0]+(i[1]-u.boxStart[1])/Math.abs(w)}else if(u.boxEnd[1]>i[3]){u.boxEnd[1]=i[3];u.boxEnd[0]=u.boxStart[0]+(i[3]-u.boxStart[1])/Math.abs(w)}}else{u.boxEnd[0]=u.boxStart[0]+Math.abs(g)/w*(p>=0?1:-1);if(u.boxEnd[0]<i[0]){u.boxEnd[0]=i[0];u.boxEnd[1]=u.boxStart[1]+(i[0]-u.boxStart[0])*Math.abs(w)}else if(u.boxEnd[0]>i[2]){u.boxEnd[0]=i[2];u.boxEnd[1]=u.boxStart[1]+(i[2]-u.boxStart[0])*Math.abs(w)}}}else{if(x)u.boxEnd[0]=u.boxStart[0];if(_)u.boxEnd[1]=u.boxStart[1]}}else if(u.boxEnabled){p=u.boxStart[0]!==u.boxEnd[0];g=u.boxStart[1]!==u.boxEnd[1];if(p||g){if(p){m(0,u.boxStart[0],u.boxEnd[0]);e.xaxis.autorange=false}if(g){m(1,u.boxStart[1],u.boxEnd[1]);e.yaxis.autorange=false}e.relayoutCallback()}else{e.glplot.setDirty()}u.boxEnabled=false;u.boxInited=false}else if(u.boxInited){u.boxInited=false}break;case"pan":u.boxEnabled=false;u.boxInited=false;if(t){if(!u.panning){u.dragStart[0]=n;u.dragStart[1]=a}if(Math.abs(u.dragStart[0]-n)<d)n=u.dragStart[0];if(Math.abs(u.dragStart[1]-a)<d)a=u.dragStart[1];p=(l-n)*(i[2]-i[0])/(r.viewBox[2]-r.viewBox[0]);g=(h-a)*(i[3]-i[1])/(r.viewBox[3]-r.viewBox[1]);i[0]+=p;i[2]+=p;i[1]+=g;i[3]+=g;e.setRanges(i);u.panning=true;u.lastInputTime=Date.now();f();e.cameraChanged();e.handleAnnotations()}else if(u.panning){u.panning=false;e.relayoutCallback()}break}u.lastPos[0]=n;u.lastPos[1]=a}u.wheelListener=a(t,function(t,n){if(!e.scrollZoom)return false;var a=e.calcDataBox(),i=r.viewBox;var o=u.lastPos[0],s=u.lastPos[1];var l=Math.exp(5*n/(i[3]-i[1]));var c=o/(i[2]-i[0])*(a[2]-a[0])+a[0];var h=s/(i[3]-i[1])*(a[3]-a[1])+a[1];a[0]=(a[0]-c)*l+c;a[2]=(a[2]-c)*l+c;a[1]=(a[1]-h)*l+h;a[3]=(a[3]-h)*l+h;e.setRanges(a);u.lastInputTime=Date.now();f();e.cameraChanged();e.handleAnnotations();e.relayoutCallback();return true},true);return u}},{"../cartesian/constants":497,"has-passive-events":202,"mouse-change":214,"mouse-event-offset":215,"mouse-wheel":217}],522:[function(e,t,r){"use strict";var n=e("../cartesian/axes");var a=e("../../lib/html2unicode");var i=e("../../lib/str2rgbarray");function o(e){this.scene=e;this.gl=e.gl;this.pixelRatio=e.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[false,false,false,false];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[true,true,false,false];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[true,true,false,false];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=true;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[true,true];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[true,true];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=false;this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var s=o.prototype;var l=["xaxis","yaxis"];s.merge=function(e){this.titleEnable=false;this.backgroundColor=i(e.plot_bgcolor);var t,r,n,o;var s,u,f,c,h;var d,v;for(d=0;d<2;++d){t=l[d];var p=t.charAt(0);r=e[this.scene[t]._name];n=r.title===this.scene.fullLayout._dfltTitle[p]?"":r.title;for(v=0;v<=2;v+=2){this.labelEnable[d+v]=false;this.labels[d+v]=a(n);this.labelColor[d+v]=i(r.titlefont.color);this.labelFont[d+v]=r.titlefont.family;this.labelSize[d+v]=r.titlefont.size;this.labelPad[d+v]=this.getLabelPad(t,r);this.tickEnable[d+v]=false;this.tickColor[d+v]=i((r.tickfont||{}).color);this.tickAngle[d+v]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180;this.tickPad[d+v]=this.getTickPad(r);this.tickMarkLength[d+v]=0;this.tickMarkWidth[d+v]=r.tickwidth||0;this.tickMarkColor[d+v]=i(r.tickcolor);this.borderLineEnable[d+v]=false;this.borderLineColor[d+v]=i(r.linecolor);this.borderLineWidth[d+v]=r.linewidth||0}f=this.hasSharedAxis(r);s=this.hasAxisInDfltPos(t,r)&&!f;u=this.hasAxisInAltrPos(t,r)&&!f;o=r.mirror||false;c=f?String(o).indexOf("all")!==-1:!!o;h=f?o==="allticks":String(o).indexOf("ticks")!==-1;if(s)this.labelEnable[d]=true;else if(u)this.labelEnable[d+2]=true;if(s)this.tickEnable[d]=r.showticklabels;else if(u)this.tickEnable[d+2]=r.showticklabels;if(s||c)this.borderLineEnable[d]=r.showline;if(u||c)this.borderLineEnable[d+2]=r.showline;if(s||h)this.tickMarkLength[d]=this.getTickMarkLength(r);if(u||h)this.tickMarkLength[d+2]=this.getTickMarkLength(r);this.gridLineEnable[d]=r.showgrid;this.gridLineColor[d]=i(r.gridcolor);this.gridLineWidth[d]=r.gridwidth;this.zeroLineEnable[d]=r.zeroline;this.zeroLineColor[d]=i(r.zerolinecolor);this.zeroLineWidth[d]=r.zerolinewidth}};s.hasSharedAxis=function(e){var t=this.scene;var r=t.fullLayout._subplots.gl2d;var a=n.findSubplotsWithAxis(r,e);return a.indexOf(t.id)!==0};s.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";else if(e==="yaxis")return r==="left"};s.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";else if(e==="yaxis")return r==="right"};s.getLabelPad=function(e,t){var r=1.5,n=t.titlefont.size,a=t.showticklabels;if(e==="xaxis"){return t.side==="top"?-10+n*(r+(a?1:0)):-10+n*(r+(a?.5:0))}else if(e==="yaxis"){return t.side==="right"?10+n*(r+(a?1:.5)):10+n*(r+(a?.5:0))}};s.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};s.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function u(e){return new o(e)}t.exports=u},{"../../lib/html2unicode":443,"../../lib/str2rgbarray":468,"../cartesian/axes":492}],523:[function(e,t,r){"use strict";var n=e("../../plot_api/edit_types").overrideAll;var a=e("./scene2d");var i=e("../layout_attributes");var o=e("../../constants/xmlns_namespaces");var s=e("../cartesian/constants");var l=e("../cartesian");var u=e("../../components/fx/layout_attributes");var f=e("../get_data").getSubplotData;r.name="gl2d";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=s.idRegex;r.attrRegex=s.attrRegex;r.attributes=e("../cartesian/attributes");r.supplyLayoutDefaults=function(e,t,r){if(!t._has("cartesian")){l.supplyLayoutDefaults(e,t,r)}};r.layoutAttrOverrides=n(l.layoutAttributes,"plot","from-root");r.baseLayoutAttrOverrides=n({plot_bgcolor:i.plot_bgcolor,hoverlabel:u.hoverlabel},"plot","nested");r.plot=function e(t){var r=t._fullLayout;var n=t._fullData;var i=r._subplots.gl2d;for(var o=0;o<i.length;o++){var s=i[o],l=r._plots[s],u=f(n,"gl2d",s);var c=l._scene2d;if(c===undefined){c=new a({id:s,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r);l._scene2d=c}c.plot(u,t.calcdata,r,t.layout)}};r.clean=function(e,t,r,n){var a=n._subplots.gl2d||[];for(var i=0;i<a.length;i++){var o=a[i],s=n._plots[o];if(!s._scene2d)continue;var u=f(e,"gl2d",o);if(u.length===0){s._scene2d.destroy();delete n._plots[o]}}l.clean.apply(this,arguments)};r.drawFramework=function(e){if(!e._context.staticPlot){l.drawFramework(e)}};r.toSVG=function(e){var t=e._fullLayout;var r=t._subplots.gl2d;for(var n=0;n<r.length;n++){var a=t._plots[r[n]],i=a._scene2d;var s=i.toImage("png");var l=t._glimages.append("svg:image");l.attr({xmlns:o.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});i.destroy()}};r.updateFx=function(e){var t=e._subplots.gl2d;for(var r=0;r<t.length;r++){var n=e._plots[t[r]]._scene2d;n.updateFx(e.dragmode)}}},{"../../components/fx/layout_attributes":366,"../../constants/xmlns_namespaces":426,"../../plot_api/edit_types":475,"../cartesian":503,"../cartesian/attributes":490,"../cartesian/constants":497,"../get_data":520,"../layout_attributes":526,"./scene2d":524}],524:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../plots/cartesian/axes");var i=e("../../components/fx");var o=e("gl-plot2d");var s=e("gl-spikes2d");var l=e("gl-select-box");var u=e("webgl-context");var f=e("./convert");var c=e("./camera");var h=e("../../lib/html2unicode");var d=e("../../lib/show_no_webgl_msg");var v=e("../cartesian/constraints");var p=v.enforce;var g=v.clean;var m=e("../cartesian/autorange").doAutoRange;var y=["xaxis","yaxis"];var b,x;var _=e("../cartesian/constants").SUBPLOT_PATTERN;function w(e,t){this.container=e.container;this.graphDiv=e.graphDiv;this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio;this.id=e.id;this.staticPlot=!!e.staticPlot;this.scrollZoom=this.graphDiv._context.scrollZoom;this.fullData=null;this.updateRefs(t);this.makeFramework();if(this.stopped)return;this.glplotOptions=f(this);this.glplotOptions.merge(t);this.glplot=o(this.glplotOptions);this.camera=c(this);this.traces={};this.spikes=s(this.glplot);this.selectBox=l(this.glplot,{innerFill:false,outerFill:true});this.lastButtonState=0;this.pickResult=null;this.isMouseOver=true;this.stopped=false;this.redraw=this.draw.bind(this);this.redraw()}t.exports=w;var A=w.prototype;A.makeFramework=function(){if(this.staticPlot){if(!x){b=document.createElement("canvas");x=u({canvas:b,preserveDrawingBuffer:false,premultipliedAlpha:true,antialias:true});if(!x){throw new Error("Error creating static canvas/context for image server")}}this.canvas=b;this.gl=x}else{var e=this.container.querySelector(".gl-canvas-focus");var t=u({canvas:e,preserveDrawingBuffer:true,premultipliedAlpha:true});if(!t){d(this);this.stopped=true;return}this.canvas=e;this.gl=t}var r=this.canvas;r.style.width="100%";r.style.height="100%";r.style.position="absolute";r.style.top="0px";r.style.left="0px";r.style["pointer-events"]="none";this.updateSize(r);r.className+=" user-select-none";var n=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute";n.style.top=n.style.left="0px";n.style.width=n.style.height="100%";n.style["z-index"]=20;n.style["pointer-events"]="none";var a=this.mouseContainer=document.createElement("div");a.style.position="absolute";a.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var i=this.container;i.appendChild(n);i.appendChild(a);var o=this;a.addEventListener("mouseout",function(){o.isMouseOver=false;o.unhover()});a.addEventListener("mouseover",function(){o.isMouseOver=true})};A.toImage=function(e){if(!e)e="png";this.stopped=true;if(this.staticPlot)this.container.appendChild(b);this.updateSize(this.canvas);var t=this.glplot.gl,r=t.drawingBufferWidth,n=t.drawingBufferHeight;t.clearColor(1,1,1,0);t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();t.bindFramebuffer(t.FRAMEBUFFER,null);var a=new Uint8Array(r*n*4);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,a);for(var i=0,o=n-1;i<o;++i,--o){for(var s=0;s<r;++s){for(var l=0;l<4;++l){var u=a[4*(r*i+s)+l];a[4*(r*i+s)+l]=a[4*(r*o+s)+l];a[4*(r*o+s)+l]=u}}}var f=document.createElement("canvas");f.width=r;f.height=n;var c=f.getContext("2d");var h=c.createImageData(r,n);h.data.set(a);c.putImageData(h,0,0);var d;switch(e){case"jpeg":d=f.toDataURL("image/jpeg");break;case"webp":d=f.toDataURL("image/webp");break;default:d=f.toDataURL("image/png")}if(this.staticPlot)this.container.removeChild(b);return d};A.updateSize=function(e){if(!e)e=this.canvas;var t=this.pixelRatio,r=this.fullLayout;var n=r.width,a=r.height,i=Math.ceil(t*n)|0,o=Math.ceil(t*a)|0;if(e.width!==i||e.height!==o){e.width=i;e.height=o}return e};A.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();var e=[a.calcTicks(this.xaxis),a.calcTicks(this.yaxis)];for(var t=0;t<2;++t){for(var r=0;r<e[t].length;++r){e[t][r].text=h(e[t][r].text+"")}}return e};function k(e,t){for(var r=0;r<2;++r){var n=e[r],a=t[r];if(n.length!==a.length)return true;for(var i=0;i<n.length;++i){if(n[i].x!==a[i].x)return true}}return false}A.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(_);var r="xaxis"+t[1];var n="yaxis"+t[2];this.xaxis=this.fullLayout[r];this.yaxis=this.fullLayout[n]};A.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,r=this.yaxis,n=e.layout;n.xaxis.autorange=t.autorange;n.xaxis.range=t.range.slice(0);n.yaxis.autorange=r.autorange;n.yaxis.range=r.range.slice(0);var a={lastInputTime:this.camera.lastInputTime};a[t._name]=t.range.slice(0);a[r._name]=r.range.slice(0);e.emit("plotly_relayout",a)};A.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks();var r=this.glplotOptions.ticks;if(k(t,r)){this.glplotOptions.ticks=t;this.glplotOptions.dataBox=e.dataBox;this.glplot.update(this.glplotOptions);this.handleAnnotations()}};A.handleAnnotations=function(){var e=this.graphDiv,t=this.fullLayout.annotations;for(var r=0;r<t.length;r++){var a=t[r];if(a.xref===this.xaxis._id&&a.yref===this.yaxis._id){n.getComponentMethod("annotations","drawOne")(e,r)}}};A.destroy=function(){if(!this.glplot)return;var e=this.traces;if(e){Object.keys(e).map(function(t){e[t].dispose();delete e[t]})}this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.fullData=null;this.glplot=null;this.stopped=true;this.camera.mouseListener.enabled=false;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null};A.plot=function(e,t,r){var n=this.glplot;this.updateRefs(r);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(e,t);this.updateFx(r.dragmode);var a=r.width,i=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r);o.screenBox=[0,0,a,i];var s={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};g(s,this.xaxis);g(s,this.yaxis);var l=r._size,u=this.xaxis.domain,f=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,a-l.r-(1-u[1])*l.w,i-l.t-(1-f[1])*l.h];this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px";this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px";this.mouseContainer.height=l.h*(f[1]-f[0]);this.mouseContainer.style.left=l.l+u[0]*l.w+"px";this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,h;for(h=0;h<2;++h){c=this[y[h]];c._length=o.viewBox[h+2]-o.viewBox[h];m(c);c.setScale()}p(s);o.ticks=this.computeTickMarks();o.dataBox=this.calcDataBox();o.merge(r);n.update(o);this.glplot.draw()};A.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,r=e.range,n=t.range,a=e.r2l,i=t.r2l;return[a(r[0]),i(n[0]),a(r[1]),i(n[1])]};A.setRanges=function(e){var t=this.xaxis,r=this.yaxis,n=t.l2r,a=r.l2r;t.range=[n(e[0]),n(e[2])];r.range=[a(e[1]),a(e[3])]};A.updateTraces=function(e,t){var r=Object.keys(this.traces);var n,a,i;this.fullData=e;e:for(n=0;n<r.length;n++){var o=r[n],s=this.traces[o];for(a=0;a<e.length;a++){i=e[a];if(i.uid===o&&i.type===s.type){continue e}}s.dispose();delete this.traces[o]}for(n=0;n<e.length;n++){i=e[n];var l=t[n],u=this.traces[i.uid];if(u)u.update(i,l);else{u=i._module.plot(this,i,l);this.traces[i.uid]=u}}this.glplot.objects.sort(function(e,t){return e._trace.index-t._trace.index})};A.updateFx=function(e){if(e==="lasso"||e==="select"){this.pickCanvas.style["pointer-events"]="none";this.mouseContainer.style["pointer-events"]="none"}else{this.pickCanvas.style["pointer-events"]="auto";this.mouseContainer.style["pointer-events"]="auto"}if(e==="pan"){this.mouseContainer.style.cursor="move"}else if(e==="zoom"){this.mouseContainer.style.cursor="crosshair"}else{this.mouseContainer.style.cursor=null}};A.emitPointAction=function(e,t){var r=e.trace.uid;var n=e.pointIndex;var a;for(var o=0;o<this.fullData.length;o++){if(this.fullData[o].uid===r){a=this.fullData[o]}}var s={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:a.index,pointNumber:n,data:a._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};i.appendArrayPointValue(s,a,n);this.graphDiv.emit(t,{points:[s]})};A.draw=function(){if(this.stopped)return;requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,r=t.mouseListener,n=this.lastButtonState===1&&r.buttons===0,a=this.fullLayout;this.lastButtonState=r.buttons;this.cameraChanged();var o=r.x*e.pixelRatio;var s=this.canvas.height-e.pixelRatio*r.y;var l;if(t.boxEnabled&&a.dragmode==="zoom"){this.selectBox.enabled=true;var u=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])];for(var f=0;f<2;f++){if(t.boxStart[f]===t.boxEnd[f]){u[f]=e.dataBox[f];u[f+2]=e.dataBox[f+2]}}e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=false;var c=a._size,h=this.xaxis.domain,d=this.yaxis.domain;l=e.pick(o/e.pixelRatio+c.l+h[0]*c.w,s/e.pixelRatio-(c.t+(1-d[1])*c.h));var v=l&&l.object._trace.handlePick(l);if(v&&n){this.emitPointAction(v,"plotly_click")}if(l&&l.object._trace.hoverinfo!=="skip"&&a.hovermode){if(v&&(!this.lastPickResult||this.lastPickResult.traceUid!==v.trace.uid||this.lastPickResult.dataCoord[0]!==v.dataCoord[0]||this.lastPickResult.dataCoord[1]!==v.dataCoord[1])){var p=v;this.lastPickResult={traceUid:v.trace?v.trace.uid:null,dataCoord:v.dataCoord.slice()};this.spikes.update({center:l.dataCoord});p.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(l.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(l.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio];this.emitPointAction(v,"plotly_hover");var g=this.fullData[p.trace.index]||{};var m=p.pointIndex;var y=i.castHoverinfo(g,a,m);if(y&&y!=="all"){var b=y.split("+");if(b.indexOf("x")===-1)p.traceCoord[0]=undefined;if(b.indexOf("y")===-1)p.traceCoord[1]=undefined;if(b.indexOf("z")===-1)p.traceCoord[2]=undefined;if(b.indexOf("text")===-1)p.textLabel=undefined;if(b.indexOf("name")===-1)p.name=undefined}i.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:i.castHoverOption(g,m,"bgcolor")||p.color,borderColor:i.castHoverOption(g,m,"bordercolor"),fontFamily:i.castHoverOption(g,m,"font.family"),fontSize:i.castHoverOption(g,m,"font.size"),fontColor:i.castHoverOption(g,m,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}}if(!l){this.unhover()}e.draw()};A.unhover=function(){if(this.lastPickResult){this.spikes.update({});this.lastPickResult=null;this.graphDiv.emit("plotly_unhover");i.loneUnhover(this.svgContainer)}};A.hoverFormatter=function(e,t){if(t===undefined)return undefined;var r=this[e];return a.tickText(r,r.c2l(t),"hover").text}},{"../../components/fx":365,"../../lib/html2unicode":443,"../../lib/show_no_webgl_msg":466,"../../plots/cartesian/axes":492,"../../registry":536,"../cartesian/autorange":491,"../cartesian/constants":497,"../cartesian/constraints":499,"./camera":521,"./convert":522,"gl-plot2d":176,"gl-select-box":180,"gl-spikes2d":189,"webgl-context":304}],525:[function(e,t,r){"use strict";function n(e,t){var r=[0,0,0,0];var n,a;for(n=0;n<4;++n){for(a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function a(e,t){var r=n(e.projection,n(e.view,n(e.model,[t[0],t[1],t[2],1])));return r}t.exports=a},{}],526:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("../components/color/attributes");var i=n({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif';i.size.dflt=12;i.color.dflt=a.defaultLine;t.exports={font:i,title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},template:{valType:"any",editType:"calc"}}},{"../components/color/attributes":322,"./font_attributes":518}],527:[function(e,t,r){"use strict";t.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],528:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../registry");var o=e("../plot_api/plot_schema");var s=e("../plot_api/plot_template");var l=e("../lib");var u=e("../components/color");var f=e("../constants/numerical").BADNUM;var c=e("../plots/cartesian/axis_ids");var h=e("./sort_modules").sortBasePlotModules;var d=e("./animation_attributes");var v=e("./frame_attributes");var p=l.relinkPrivateKeys;var g=l._;var m=t.exports={};l.extendFlat(m,i);m.attributes=e("./attributes");m.attributes.type.values=m.allTypes;m.fontAttrs=e("./font_attributes");m.layoutAttributes=e("./layout_attributes");m.fontWeight="normal";var y=m.transformsRegistry;var b=e("./command");m.executeAPICommand=b.executeAPICommand;m.computeAPICommandBindings=b.computeAPICommandBindings;m.manageCommandObserver=b.manageCommandObserver;m.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;m.redrawText=function(e){e=l.getGraphDiv(e);if(e.data&&e.data[0]&&e.data[0].r)return;return new Promise(function(t){setTimeout(function(){i.getComponentMethod("annotations","draw")(e);i.getComponentMethod("legend","draw")(e);(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()});t(m.previousPromises(e))},300)})};m.resize=function(e){e=l.getGraphDiv(e);return new Promise(function(t,r){function n(e){var t=window.getComputedStyle(e).display;return!t||t==="none"}if(!e||n(e)){r(new Error("Resize must be passed a displayed plot div element."))}if(e._redrawTimer)clearTimeout(e._redrawTimer);e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||n(e)){t(e);return}delete e.layout.width;delete e.layout.height;var r=e.changed;e.autoplay=true;i.call("relayout",e,{autosize:true}).then(function(){e.changed=r;t(e)})},100)})};m.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};m.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=l.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var e=n.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var a=r.node();var i={y:t._paper.attr("height")-9};if(document.body.contains(a)&&a.getComputedTextLength()>=t.width-20){i["text-anchor"]="start";i.x=5}else{i["text-anchor"]="end";i.x=t._paper.attr("width")-7}r.attr(i);var o=r.select(".js-link-to-tool"),s=r.select(".js-link-spacer"),f=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)x(e,o);s.text(o.text()&&f.text()?" - ":"")};function x(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){m.sendDataToCloud(e)})}else{var n=window.location.pathname.split("/");var a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}m.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;var r=n.select(e).append("div").attr("id","hiddenform").style("display","none");var a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var i=a.append("input").attr({type:"text",name:"data"});i.node().value=m.graphJson(e,false,"keepdata");a.node().submit();r.remove();e.emit("plotly_afterexport");return false};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var w=["year","month","dayMonth","dayMonthYear"];m.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var n=e._fullLayout||{};if(n._skipDefaults){delete n._skipDefaults;return}var a=e._fullLayout={};var o=e.layout||{};var s=e._fullData||[];var u=e._fullData=[];var f=e.data||[];var d=e.calcdata||[];var v=e._context||{};var y;if(!e._transitionData)m.createTransitionData(e);a._dfltTitle={plot:g(e,"Click to enter Plot title"),x:g(e,"Click to enter X axis title"),y:g(e,"Click to enter Y axis title"),colorbar:g(e,"Click to enter Colorscale title"),annotation:g(e,"new text")};a._traceWord=g(e,"trace");var b=M(e,_);a._mapboxAccessToken=v.mapboxAccessToken;if(n._initialAutoSizeIsDone){var x=n.width,k=n.height;m.supplyLayoutGlobalDefaults(o,a,b);if(!o.width)a.width=x;if(!o.height)a.height=k;m.sanitizeMargins(a)}else{m.supplyLayoutGlobalDefaults(o,a,b);var C=!o.width||!o.height,S=a.autosize,L=v.autosizable,O=C&&(S||L);if(O)m.plotAutoSize(e,o,a);else if(C)m.sanitizeMargins(a);if(!S&&C){o.width=a.width;o.height=a.height}}a._d3locale=E(b,a.separators);a._extraFormat=M(e,w);a._initialAutoSizeIsDone=true;a._dataLength=f.length;a._modules=[];a._basePlotModules=[];var I=a._subplots=T();var D=a._splomAxes={x:{},y:{}};var R=a._splomSubplots={};a._splomGridDflt={};a._requestRangeslider={};a._traceUids=A(s,f);a._globalTransforms=(e._context||{}).globalTransforms;m.supplyDataDefaults(f,u,o,a);var P=Object.keys(D.x);var z=Object.keys(D.y);if(P.length>1&&z.length>1){i.getComponentMethod("grid","sizeDefaults")(o,a);for(y=0;y<P.length;y++){l.pushUnique(I.xaxis,P[y])}for(y=0;y<z.length;y++){l.pushUnique(I.yaxis,z[y])}for(var F in R){l.pushUnique(I.cartesian,F)}}a._has=m._hasPlotType.bind(a);var B=a._modules;for(y=0;y<B.length;y++){var N=B[y];if(N.cleanData)N.cleanData(u)}if(s.length===u.length){for(y=0;y<u.length;y++){p(u[y],s[y])}}m.supplyLayoutModuleDefaults(o,a,u,e._transitionData);a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&P.length>15&&z.length>15&&a.shapes.length===0&&a.images.length===0;a._hasCartesian=a._has("cartesian");a._hasGeo=a._has("geo");a._hasGL3D=a._has("gl3d");a._hasGL2D=a._has("gl2d");a._hasTernary=a._has("ternary");a._hasPie=a._has("pie");m.linkSubplots(u,a,s,n);m.cleanPlot(u,a,s,n,d);p(a,n);m.doAutoMargin(e);var j=c.list(e);for(y=0;y<j.length;y++){var U=j[y];U.setScale()}if(!r&&d.length===u.length){m.supplyDefaultsUpdateCalc(d,u)}a._basePlotModules.sort(h)};m.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=e[r][0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var s,u,f;for(s=0;s<o.length;s++){u=o[s];f=l.nestedProperty(i,u).get().slice();l.nestedProperty(n,u).set(f)}}a.trace=n}}};function A(e,t){var r=t.length;var n=[];var a,i;for(a=0;a<e.length;a++){var o=e[a]._fullInput;if(o!==i)n.push(o);i=o}var s=n.length;var u=new Array(r);var f={};function c(e,t){u[t]=e;f[e]=1}function h(e,t){if(e&&typeof e==="string"&&!f[e]){c(e,t);return true}}for(a=0;a<r;a++){if(h(t[a].uid,a))continue;if(a<s&&h(n[a].uid,a))continue;c(l.randstr(f),a)}return u}var k;function T(){var e={};var t,r;if(!k){k=[];var n=i.subplotsRegistry;for(var a in n){var o=n[a];var s=o.attr;if(s){k.push(a);if(Array.isArray(s)){for(r=0;r<s.length;r++){l.pushUnique(k,s[r])}}}}}for(t=0;t<k.length;t++){e[k[t]]=[]}return e}function M(e,t){var r=e._context.locale;if(!r)r==="en-US";var n=false;var a={};function o(e){var r=true;for(var i=0;i<t.length;i++){var o=t[i];if(!a[o]){if(e[o]){a[o]=e[o]}else r=false}}if(r)n=true}for(var s=0;s<2;s++){var l=e._context.locales;for(var u=0;u<2;u++){var f=(l[r]||{}).format;if(f){o(f);if(n)break}l=i.localeRegistry}var c=r.split("-")[0];if(n||c===r)break;r=c}if(!n)o(i.localeRegistry.en.format);return a}function E(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return n.locale(e)}m.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};m._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var n=this._modules||[];for(t=0;t<n.length;t++){var a=n[t].name;if(a===e)return true;var o=i.modules[a];if(o&&o.categories[e])return true}return false};m.cleanPlot=function(e,t,r,n,a){var i,o;var s=n._basePlotModules||[];for(i=0;i<s.length;i++){var l=s[i];if(l.clean){l.clean(e,t,r,n,a)}}var u=n._has&&n._has("gl");var f=t._has&&t._has("gl");if(u&&!f){if(n._glcontainer!==undefined){n._glcontainer.selectAll(".gl-canvas").remove();n._glcontainer.selectAll(".no-webgl").remove();n._glcanvas=null}}var c=!!n._infolayer;e:for(i=0;i<r.length;i++){var h=r[i],d=h.uid;for(o=0;o<e.length;o++){var v=e[o];if(d===v.uid)continue e}if(c){n._infolayer.select(".cb"+d).remove()}}if(n._zoomlayer){n._zoomlayer.selectAll(".select-outline").remove()}};m.linkSubplots=function(e,t,r,n){var a=n._plots||{};var i=t._plots={};var o=t._subplots;var s={_fullData:e,_fullLayout:t};var l=o.cartesian.concat(o.gl2d||[]);var u,f,h,d;for(u=0;u<l.length;u++){h=l[u];var v=a[h];var p=c.getFromId(s,h,"x");var g=c.getFromId(s,h,"y");var m;if(v){m=i[h]=v;if(m.xaxis.layer!==p.layer){m.xlines.attr("d",null);m.xaxislayer.selectAll("*").remove()}if(m.yaxis.layer!==g.layer){m.ylines.attr("d",null);m.yaxislayer.selectAll("*").remove()}}else{m=i[h]={};m.id=h}m.xaxis=p;m.yaxis=g;m._hasClipOnAxisFalse=false;for(f=0;f<e.length;f++){var y=e[f];if(y.xaxis===m.xaxis._id&&y.yaxis===m.yaxis._id&&y.cliponaxis===false){m._hasClipOnAxisFalse=true;break}}}var b=c.list(s,null,true);for(u=0;u<b.length;u++){d=b[u];var x=null;if(d.overlaying){x=c.getFromId(s,d.overlaying);if(x&&x.overlaying){d.overlaying=false;x=null}}d._mainAxis=x||d;if(x)d.domain=x.domain.slice();d._anchorAxis=d.anchor==="free"?null:c.getFromId(s,d.anchor)}};m.clearExpandedTraceDefaultColors=function(e){var t,r,n;function a(e,n,a,i){r[i]=n;r.length=i+1;if(e.valType==="color"&&e.dflt===undefined){t.push(r.join("."))}}r=[];t=e._module._colorAttrs;if(!t){e._module._colorAttrs=t=[];o.crawl(e._module.attributes,a)}for(n=0;n<t.length;n++){var i=l.nestedProperty(e,"_input."+t[n]);if(!i.get()){l.nestedProperty(e,t[n]).set(null)}}};m.supplyDataDefaults=function(e,t,r,n){var a=n._modules;var o=n._basePlotModules;var u=0;var f=0;var c,h,d;n._transformModules=[];function v(e){t.push(e);var r=e._module;if(!r)return;if(e.visible===true)l.pushUnique(a,r);l.pushUnique(o,e._module.basePlotModule);u++;if(e._input.visible!==false)f++}var g={};var y=[];var b=(r.template||{}).data||{};var x=s.traceTemplater(b);for(c=0;c<e.length;c++){d=e[c];h=x.newTrace(d);h.uid=n._traceUids[c];m.supplyTraceDefaults(d,h,f,n,c);h.uid=n._traceUids[c];h.index=c;h._input=d;h._expandedIndex=u;if(h.transforms&&h.transforms.length){var _=S(h,t,r,n);for(var w=0;w<_.length;w++){var A=_[w];var k={_template:h._template,type:h.type,uid:h.uid+w};m.supplyTraceDefaults(A,k,u,n,c);p(k,A);k.index=c;k._input=d;k._fullInput=h;k._expandedIndex=u;k._expandedInput=A;v(k)}}else{h._fullInput=h;h._expandedInput=h;v(h)}if(i.traceIs(h,"carpetAxis")){g[h.carpet]=h}if(i.traceIs(h,"carpetDependent")){y.push(c)}}for(c=0;c<y.length;c++){h=t[y[c]];if(!h.visible)continue;var T=g[h.carpet];h._carpet=T;if(!T||!T.visible){h.visible=false;continue}h.xaxis=T.xaxis;h.yaxis=T.yaxis}};m.supplyAnimationDefaults=function(e){e=e||{};var t;var r={};function n(t,n){return l.coerce(e||{},r,d,t,n)}n("mode");n("direction");n("fromcurrent");if(Array.isArray(e.frame)){r.frame=[];for(t=0;t<e.frame.length;t++){r.frame[t]=m.supplyAnimationFrameDefaults(e.frame[t]||{})}}else{r.frame=m.supplyAnimationFrameDefaults(e.frame||{})}if(Array.isArray(e.transition)){r.transition=[];for(t=0;t<e.transition.length;t++){r.transition[t]=m.supplyAnimationTransitionDefaults(e.transition[t]||{})}}else{r.transition=m.supplyAnimationTransitionDefaults(e.transition||{})}return r};m.supplyAnimationFrameDefaults=function(e){var t={};function r(r,n){return l.coerce(e||{},t,d.frame,r,n)}r("duration");r("redraw");return t};m.supplyAnimationTransitionDefaults=function(e){var t={};function r(r,n){return l.coerce(e||{},t,d.transition,r,n)}r("duration");r("easing");return t};m.supplyFrameDefaults=function(e){var t={};function r(r,n){return l.coerce(e,t,v,r,n)}r("group");r("name");r("traces");r("baseframe");r("data");r("layout");return t};m.supplyTraceDefaults=function(e,t,r,n,a){var o=n.colorway||u.defaults;var s=o[r%o.length];var f;function c(r,n){return l.coerce(e,t,m.attributes,r,n)}var h=c("visible");c("type");c("name",n._traceWord+" "+a);var d=m.getModule(t);t._module=d;if(d){var v=d.basePlotModule;var p=v.attr;var g=v.attributes;if(p&&g){var y=n._subplots;var b="";if(v.name!=="gl2d"||h){if(Array.isArray(p)){for(f=0;f<p.length;f++){var x=p[f];var _=l.coerce(e,t,g,x);if(y[x])l.pushUnique(y[x],_);b+=_}}else{b=l.coerce(e,t,g,p)}if(y[v.name]){l.pushUnique(y[v.name],b)}}}}if(h){c("customdata");c("ids");if(i.traceIs(t,"showLegend")){c("showlegend");c("legendgroup")}i.getComponentMethod("fx","supplyDefaults")(e,t,s,n);if(d){d.supplyDefaults(e,t,s,n);l.coerceHoverinfo(e,t,n)}if(!i.traceIs(t,"noOpacity"))c("opacity");if(i.traceIs(t,"notLegendIsolatable")){t.visible=!!t.visible}if(d&&d.selectPoints){c("selectedpoints")}m.supplyTransformDefaults(e,t,n)}return t};function C(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var n=y[t[r].type];if(n&&n.makesData)return true}}return false}m.supplyTransformDefaults=function(e,t,r){if(!(t._length||C(e)))return;var n=r._globalTransforms||[];var a=r._transformModules||[];if(!Array.isArray(e.transforms)&&n.length===0)return;var i=e.transforms||[],o=n.concat(i),s=t.transforms=[];for(var u=0;u<o.length;u++){var f=o[u],c=f.type,h=y[c],d;var v=!(f._module&&f._module===h),p=h&&typeof h.transform==="function";if(!h)l.warn("Unrecognized transform type "+c+".");if(h&&h.supplyDefaults&&(v||p)){d=h.supplyDefaults(f,t,r,e);d.type=c;d._module=h;l.pushUnique(a,h)}else{d=l.extendFlat({},f)}s.push(d)}};function S(e,t,r,n){var a=e.transforms,i=[e];for(var o=0;o<a.length;o++){var s=a[o],l=y[s.type];if(l&&l.transform){i=l.transform(i,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o})}}return i}m.supplyLayoutGlobalDefaults=function(e,t,r){function n(r,n){return l.coerce(e,t,m.layoutAttributes,r,n)}var a=e.template;if(l.isPlainObject(a)){t.template=a;t._template=a.layout;t._dataTemplate=a.data}var o=l.coerceFont(n,"font");n("title",t._dfltTitle.plot);l.coerceFont(n,"titlefont",{family:o.family,size:Math.round(o.size*1.4),color:o.color});n("autosize",!(e.width&&e.height));n("width");n("height");n("margin.l");n("margin.r");n("margin.t");n("margin.b");n("margin.pad");n("margin.autoexpand");if(e.width&&e.height)m.sanitizeMargins(t);i.getComponentMethod("grid","sizeDefaults")(e,t);n("paper_bgcolor");n("separators",r.decimal+r.thousands);n("hidesources");n("colorway");n("datarevision");i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar");i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,n)};m.plotAutoSize=function e(t,r,n){var i=t._context||{},o=i.frameMargins,s,u;var f=l.isPlotDiv(t);if(f)t.emit("plotly_autosize");if(i.fillFrame){s=window.innerWidth;u=window.innerHeight;document.body.style.overflow="hidden"}else if(a(o)&&o>0){var c=L(t._boundingBoxMargins),h=c.left+c.right,d=c.bottom+c.top,v=1-2*o;var p=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};s=Math.round(v*(p.width-h));u=Math.round(v*(p.height-d))}else{var g=f?window.getComputedStyle(t):{};s=parseFloat(g.width)||n.width;u=parseFloat(g.height)||n.height}var y=m.layoutAttributes.width.min,b=m.layoutAttributes.height.min;if(s<y)s=y;if(u<b)u=b;var x=!r.width&&Math.abs(n.width-s)>1,_=!r.height&&Math.abs(n.height-u)>1;if(_||x){if(x)n.width=s;if(_)n.height=u}if(!t._initialAutoSize){t._initialAutoSize={width:s,height:u}}m.sanitizeMargins(n)};function L(e){var t={left:0,right:0,bottom:0,top:0},r;if(e){for(r in e){if(e.hasOwnProperty(r)){t.left+=e[r].left||0;t.right+=e[r].right||0;t.bottom+=e[r].bottom||0;t.top+=e[r].top||0}}}return t}m.supplyLayoutModuleDefaults=function(e,t,r,n){var a=i.componentsRegistry;var o=t._basePlotModules;var s,u,f;var c=i.subplotsRegistry.cartesian;for(s in a){f=a[s];if(f.includeBasePlot){f.includeBasePlot(e,t)}}if(!o.length){o.push(c)}if(t._has("cartesian")){i.getComponentMethod("grid","contentDefaults")(e,t);c.finalizeSubplots(e,t)}for(var h in t._subplots){t._subplots[h].sort(l.subplotSort)}for(u=0;u<o.length;u++){f=o[u];if(f.supplyLayoutDefaults){f.supplyLayoutDefaults(e,t,r)}}var d=t._modules;for(u=0;u<d.length;u++){f=d[u];if(f.supplyLayoutDefaults){f.supplyLayoutDefaults(e,t,r)}}var v=t._transformModules;for(u=0;u<v.length;u++){f=v[u];if(f.supplyLayoutDefaults){f.supplyLayoutDefaults(e,t,r,n)}}for(s in a){f=a[s];if(f.supplyLayoutDefaults){f.supplyLayoutDefaults(e,t,r)}}};m.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._geocontainer!==undefined)t._geocontainer.remove();if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}l.clearThrottle();delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.framework;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e.firstscatter;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._replotPending;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};m.style=function(e){var t=e._fullLayout._modules;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];if(a.style){l.pushUnique(r,a.style)}}for(n=0;n<r.length;n++){r[n](e)}};m.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width,r=e.height,n=e.margin,a=t-(n.l+n.r),i=r-(n.t+n.b),o;if(a<0){o=(t-1)/(n.l+n.r);n.l=Math.floor(o*n.l);n.r=Math.floor(o*n.r)}if(i<0){o=(r-1)/(n.t+n.b);n.t=Math.floor(o*n.t);n.b=Math.floor(o*n.b)}};m.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};m.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function O(e){if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}m.autoMargin=function(e,t,r){var n=e._fullLayout;O(n);var a=n._pushmargin;var i=n._pushmarginIds;if(n.margin.autoexpand!==false){if(!r){delete a[t];delete i[t]}else{var o=r.pad;if(o===undefined){var s=n.margin;o=Math.min(12,s.l,s.r,s.t,s.b)}if(r.l+r.r>n.width*.5)r.l=r.r=0;if(r.b+r.t>n.height*.5)r.b=r.t=0;var l=r.xl!==undefined?r.xl:r.x;var u=r.xr!==undefined?r.xr:r.x;var f=r.yt!==undefined?r.yt:r.y;var c=r.yb!==undefined?r.yb:r.y;a[t]={l:{val:l,size:r.l+o},r:{val:u,size:r.r+o},b:{val:c,size:r.b+o},t:{val:f,size:r.t+o}};i[t]=1}if(!n._replotting)m.doAutoMargin(e)}};m.doAutoMargin=function(e){var t=e._fullLayout;if(!t._size)t._size={};O(t);var r=t._size,n=JSON.stringify(r);var o=Math.max(t.margin.l||0,0);var s=Math.max(t.margin.r||0,0);var l=Math.max(t.margin.t||0,0);var u=Math.max(t.margin.b||0,0);var f=t._pushmargin;var c=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var h in f){if(!c[h])delete f[h]}f.base={l:{val:0,size:o},r:{val:1,size:s},t:{val:1,size:l},b:{val:0,size:u}};for(var d in f){var v=f[d].l||{},p=f[d].b||{},g=v.val,m=v.size,y=p.val,b=p.size;for(var x in f){if(a(m)&&f[x].r){var _=f[x].r.val,w=f[x].r.size;if(_>g){var A=(m*_+(w-t.width)*g)/(_-g),k=(w*(1-g)+(m-t.width)*(1-_))/(_-g);if(A>=0&&k>=0&&A+k>o+s){o=A;s=k}}}if(a(b)&&f[x].t){var T=f[x].t.val,M=f[x].t.size;if(T>y){var E=(b*T+(M-t.height)*y)/(T-y),C=(M*(1-y)+(b-t.height)*(1-T))/(T-y);if(E>=0&&C>=0&&E+C>u+l){u=E;l=C}}}}}}r.l=Math.round(o);r.r=Math.round(s);r.t=Math.round(l);r.b=Math.round(u);r.p=Math.round(t.margin.pad);r.w=Math.round(t.width)-r.l-r.r;r.h=Math.round(t.height)-r.t-r.b;if(!t._replotting&&n!=="{}"&&n!==JSON.stringify(t._size)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}return i.call("plot",e)}};m.graphJson=function(e,t,r,n,a){if(a&&t&&!e._fullData||a&&!t&&!e._fullLayout){m.supplyDefaults(e)}var i=a?e._fullData:e.data,o=a?e._fullLayout:e.layout,s=(e._transitionData||{})._frames;function u(e){if(typeof e==="function"){return null}if(l.isPlainObject(e)){var t={},n,a;for(n in e){if(typeof e[n]==="function"||["_","["].indexOf(n.charAt(0))!==-1){continue}if(r==="keepdata"){if(n.substr(n.length-3)==="src"){continue}}else if(r==="keepstream"){a=e[n+"src"];if(typeof a==="string"&&a.indexOf(":")>0){if(!l.isPlainObject(e.stream)){continue}}}else if(r!=="keepall"){a=e[n+"src"];if(typeof a==="string"&&a.indexOf(":")>0){continue}}t[n]=u(e[n])}return t}if(Array.isArray(e)){return e.map(u)}if(l.isJSDate(e))return l.ms2DateTimeLocal(+e);return e}var f={data:(i||[]).map(function(e){var r=u(e);if(t){delete r.fit}return r})};if(!t){f.layout=u(o)}if(e.framework&&e.framework.isPolar)f=e.framework.getConfig();if(s)f.frames=u(s);return n==="object"?f:JSON.stringify(f)};m.modifyFrames=function(e,t){var r,n,a;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){n=t[r];switch(n.type){case"replace":a=n.value;var s=(i[n.index]||{}).name;var l=a.name;i[n.index]=o[l]=a;if(l!==s){delete o[s];o[l]=a}break;case"insert":a=n.value;o[a.name]=a;i.splice(n.index,0,a);break;case"delete":a=i[n.index];delete o[a.name];i.splice(n.index,1);break}}return Promise.resolve()};m.computeFrame=function(e,t){var r=e._transitionData._frameHash;var n,a,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var s=r[t.toString()];if(!s){return false}var l=[s];var u=[s.name];while(s.baseframe&&(s=r[s.baseframe.toString()])){if(u.indexOf(s.name)!==-1)break;l.push(s);u.push(s.name)}var f={};while(s=l.pop()){if(s.layout){f.layout=m.extendLayout(f.layout,s.layout)}if(s.data){if(!f.data){f.data=[]}a=s.traces;if(!a){a=[];for(n=0;n<s.data.length;n++){a[n]=n}}if(!f.traces){f.traces=[]}for(n=0;n<s.data.length;n++){i=a[n];if(i===undefined||i===null){continue}o=f.traces.indexOf(i);if(o===-1){o=f.data.length;f.traces[o]=i}f.data[o]=m.extendTrace(f.data[o],s.data[n])}}}return f};m.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var n=0;n<r.length;n++){var a=r[n];if(a&&a.name){t[a.name]=a}}};m.extendObjectWithContainers=function(e,t,r){var n,a,i,o,s,u,f,c;var h=l.extendDeepNoArrays({},t||{});var d=l.expandObjectPaths(h);var v={};if(r&&r.length){for(i=0;i<r.length;i++){n=l.nestedProperty(d,r[i]);a=n.get();if(a===undefined){l.nestedProperty(v,r[i]).set(null)}else{n.set(null);l.nestedProperty(v,r[i]).set(a)}}}e=l.extendDeepNoArrays(e||{},d);if(r&&r.length){for(i=0;i<r.length;i++){s=l.nestedProperty(v,r[i]);f=s.get();if(!f)continue;u=l.nestedProperty(e,r[i]);c=u.get();if(!Array.isArray(c)){c=[];u.set(c)}for(o=0;o<f.length;o++){var p=f[o];if(p===null)c[o]=null;else{c[o]=m.extendObjectWithContainers(c[o],p)}}u.set(c)}}return e};m.dataArrayContainers=["transforms","dimensions"];m.layoutArrayContainers=i.layoutArrayContainers;m.extendTrace=function(e,t){return m.extendObjectWithContainers(e,t,m.dataArrayContainers)};m.extendLayout=function(e,t){return m.extendObjectWithContainers(e,t,m.layoutArrayContainers)};m.transition=function(e,t,r,n,a,o){var s,u;var f=Array.isArray(t)?t.length:0;var c=n.slice(0,f);var h=[];function d(){var n;for(n=0;n<c.length;n++){var a=c[n];var o=e._fullData[a];var s=o._module;if(!s)continue;if(s.animatable){h.push(a)}e.data[c[n]]=m.extendTrace(e.data[c[n]],t[n])}var u=l.expandObjectPaths(l.extendDeepNoArrays({},r));var f=/^[xy]axis[0-9]*$/;for(var d in u){if(!f.test(d))continue;delete u[d].range}m.extendLayout(e.layout,u);delete e.calcdata;m.supplyDefaults(e);m.doCalcdata(e);i.getComponentMethod("errorbars","calc")(e);return Promise.resolve()}function v(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function p(e){if(!e)return;while(e.length){e.shift()}}var g=false;function y(){e.emit("plotly_transitioning",[]);return new Promise(function(t){e._transitioning=true;if(o.duration>0){e._transitioningWithDuration=true}e._transitionData._interruptCallbacks.push(function(){g=true});if(a.redraw){e._transitionData._interruptCallbacks.push(function(){return i.call("redraw",e)})}e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var n=0;var s=0;function u(){n++;return function(){s++;if(!g&&s===n){b(t)}}}var f;var c;var d=e._fullLayout._basePlotModules;var v=false;if(r){for(c=0;c<d.length;c++){if(d[c].transitionAxes){var p=l.expandObjectPaths(r);v=d[c].transitionAxes(e,p,o,u)||v}}}if(v){f=l.extendFlat({},o);f.duration=0}else{f=o}for(c=0;c<d.length;c++){d[c].plot(e,h,f,u)}setTimeout(u())})}function b(t){if(!e._transitionData)return;p(e._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(a.redraw){return i.call("redraw",e)}}).then(function(){e._transitioning=false;e._transitioningWithDuration=false;e.emit("plotly_transitioned",[])}).then(t)}function x(){if(!e._transitionData)return;e._transitioning=false;return v(e._transitionData._interruptCallbacks)}for(s=0;s<c.length;s++){u=c[s];var _=e._fullData[u];var w=_._module;if(!w)continue}var A=[m.previousPromises,x,d,m.rehover,y];var k=l.syncOrAsync(A,e);if(!k||!k.then){k=Promise.resolve()}return k.then(function(){return e})};m.doCalcdata=function(e,t){var r=c.list(e),n=e._fullData,a=e._fullLayout;var s,l,u,h;var d=new Array(n.length);var v=(e.calcdata||[]).slice(0);e.calcdata=d;e.firstscatter=true;a._numBoxes=0;a._numViolins=0;a._violinScaleGroupStats={};e._hmpixcount=0;e._hmlumcount=0;a._piecolormap={};a._piecolorway=null;a._piedefaultcolorcount=0;for(u=0;u<n.length;u++){if(Array.isArray(t)&&t.indexOf(u)===-1){d[u]=v[u];continue}}for(u=0;u<n.length;u++){s=n[u];s._arrayAttrs=o.findArrayAttributes(s)}var p=a._subplots.polar||[];for(u=0;u<p.length;u++){r.push(a[p[u]].radialaxis,a[p[u]].angularaxis)}I(r);var g=false;for(u=0;u<n.length;u++){s=n[u];if(s.visible===true&&s.transforms){l=s._module;if(l&&l.calc){var m=l.calc(e,s);if(m[0]&&m[0].t&&m[0].t._scene){delete m[0].t._scene.dirty}}for(h=0;h<s.transforms.length;h++){var b=s.transforms[h];l=y[b.type];if(l&&l.calcTransform){s._hasCalcTransform=true;g=true;l.calcTransform(e,s,b)}}}}if(g)I(r);function x(t,r){s=n[t];l=s._module;if(!!l.isContainer!==r)return;var a=[];if(s.visible===true){var i=s.transforms||[];for(h=i.length-1;h>=0;h--){if(i[h].enabled){s._indexToPoints=i[h]._indexToPoints;break}}if(l&&l.calc){a=l.calc(e,s)}}if(!Array.isArray(a)||!a[0]){a=[{x:f,y:f}]}if(!a[0].t)a[0].t={};a[0].trace=s;d[t]=a}for(u=0;u<n.length;u++)x(u,true);for(u=0;u<n.length;u++)x(u,false);i.getComponentMethod("fx","calc")(e)};function I(e){for(var t=0;t<e.length;t++){e[t].clearCalc()}}m.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};m.generalUpdatePerTraceModule=function(e,t,r,n){var a=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var s=r[o],u=s[0].trace;if(u.visible){i[u.type]=i[u.type]||[];i[u.type].push(s)}}for(var f in a){if(!i[f]){var c=a[f][0],h=c[0].trace;h.visible=false;i[f]=[c]}}for(var d in i){var v=i[d];var p=v[0][0].trace._module;p.plot(e,t,l.filterVisible(v),n)}t.traceHash=i}},{"../components/color":323,"../constants/numerical":424,"../lib":445,"../plot_api/plot_schema":481,"../plot_api/plot_template":482,"../plots/cartesian/axis_ids":495,"../registry":536,"./animation_attributes":487,"./attributes":489,"./command":516,"./font_attributes":518,"./frame_attributes":519,"./layout_attributes":526,"./sort_modules":535,d3:86,"fast-isnumeric":151}],529:[function(e,t,r){"use strict";var n=e("../../../traces/scatter/attributes");var a=n.marker;t.exports={r:n.r,t:n.t,marker:{color:a.color,size:a.size,symbol:a.symbol,opacity:a.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":597}],530:[function(e,t,r){"use strict";var n=e("../../cartesian/layout_attributes");var a=e("../../../lib/extend").extendFlat;var i=e("../../../plot_api/edit_types").overrideAll;var o=a({},n.domain,{});function s(e,t){var r={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return a({},t,r)}t.exports=i({radialaxis:s("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:o,orientation:{valType:"number"}}),angularaxis:s("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:o}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":436,"../../../plot_api/edit_types":475,"../../cartesian/layout_attributes":504}],531:[function(e,t,r){"use strict";var n=t.exports=e("./micropolar");n.manager=e("./micropolar_manager")},{"./micropolar":532,"./micropolar_manager":533}],532:[function(e,t,r){var n=e("d3");var a=e("../../../lib");var i=a.extendDeepAll;var o=e("../../../constants/alignment").MID_SHIFT;var s=t.exports={version:"0.2.2"};s.Axis=function e(){var t={data:[],layout:{}},r={},a={};var l,u,f=n.dispatch("hover"),c,h;var d={};function v(e){u=e||u;var r=t.data;var f=t.layout;if(typeof u=="string"||u.nodeName)u=n.select(u);u.datum(r).each(function(e,t){var r=e.slice();a={data:s.util.cloneJson(r),layout:s.util.cloneJson(f)};var u=0;r.forEach(function(e,t){if(!e.color){e.color=f.defaultColorRange[u];u=(u+1)%f.defaultColorRange.length}if(!e.strokeColor){e.strokeColor=e.geometry==="LinePlot"?e.color:n.rgb(e.color).darker().toString()}a.data[t].color=e.color;a.data[t].strokeColor=e.strokeColor;a.data[t].strokeDash=e.strokeDash;a.data[t].strokeSize=e.strokeSize});var d=r.filter(function(e,t){var r=e.visible;return typeof r==="undefined"||r===true});var v=false;var p=d.map(function(e,t){v=v||typeof e.groupId!=="undefined";return e});if(v){var g=n.nest().key(function(e,t){return typeof e.groupId!="undefined"?e.groupId:"unstacked"}).entries(p);var m=[];var y=g.map(function(e,t){if(e.key==="unstacked")return e.values;else{var r=e.values[0].r.map(function(e,t){return 0});e.values.forEach(function(e,t,n){e.yStack=[r];m.push(r);r=s.util.sumArrays(e.r,r)});return e.values}});d=n.merge(y)}d.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t];e.r=Array.isArray(e.r[0])?e.r:[e.r]});var b=Math.min(f.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;b=Math.max(10,b);var x=[f.margin.left+b,f.margin.top+b];var _;if(v){var w=n.max(s.util.sumArrays(s.util.arrayLast(d).r[0],s.util.arrayLast(m)));_=[0,w]}else _=n.extent(s.util.flattenArray(d.map(function(e,t){return e.r})));if(f.radialAxis.domain!=s.DATAEXTENT)_[0]=0;c=n.scale.linear().domain(f.radialAxis.domain!=s.DATAEXTENT&&f.radialAxis.domain?f.radialAxis.domain:_).range([0,b]);a.layout.radialAxis.domain=c.domain();var A=s.util.flattenArray(d.map(function(e,t){return e.t}));var k=typeof A[0]==="string";var T;if(k){A=s.util.deduplicate(A);T=A.slice();A=n.range(A.length);d=d.map(function(e,t){var r=e;e.t=[A];if(v)r.yStack=e.yStack;return r})}var M=d.filter(function(e,t){return e.geometry==="LinePlot"||e.geometry==="DotPlot"}).length===d.length;var E=f.needsEndSpacing===null?k||!M:f.needsEndSpacing;var C=f.angularAxis.domain&&f.angularAxis.domain!=s.DATAEXTENT&&!k&&f.angularAxis.domain[0]>=0;var S=C?f.angularAxis.domain:n.extent(A);var L=Math.abs(A[1]-A[0]);if(M&&!k)L=0;var O=S.slice();if(E&&k)O[1]+=L;var I=f.angularAxis.ticksCount||4;if(I>8)I=I/(I/8)+I%8;if(f.angularAxis.ticksStep){I=(O[1]-O[0])/I}var D=f.angularAxis.ticksStep||(O[1]-O[0])/(I*(f.minorTicks+1));if(T)D=Math.max(Math.round(D),1);if(!O[2])O[2]=D;var R=n.range.apply(this,O);R=R.map(function(e,t){return parseFloat(e.toPrecision(12))});h=n.scale.linear().domain(O.slice(0,2)).range(f.direction==="clockwise"?[0,360]:[360,0]);a.layout.angularAxis.domain=h.domain();a.layout.angularAxis.endPadding=E?L:0;l=n.select(this).select("svg.chart-root");if(typeof l==="undefined"||l.empty()){var P="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>";var z=(new DOMParser).parseFromString(P,"application/xml");var F=this.appendChild(this.ownerDocument.importNode(z.documentElement,true));l=n.select(F)}l.select(".guides-group").style({"pointer-events":"none"});l.select(".angular.axis-group").style({"pointer-events":"none"});l.select(".radial.axis-group").style({"pointer-events":"none"});var B=l.select(".chart-group");var N={fill:"none",stroke:f.tickColor};var j={"font-size":f.font.size,"font-family":f.font.family,fill:f.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+f.font.outlineColor}).join(",")};var U;if(f.showLegend){U=l.select(".legend-group").attr({transform:"translate("+[b,f.margin.top]+")"}).style({display:"block"});var V=d.map(function(e,t){var r=s.util.cloneJson(e);r.symbol=e.geometry==="DotPlot"?e.dotType||"circle":e.geometry!="LinePlot"?"square":"line";r.visibleInLegend=typeof e.visibleInLegend==="undefined"||e.visibleInLegend;r.color=e.geometry==="LinePlot"?e.strokeColor:e.color;return r});s.Legend().config({data:d.map(function(e,t){return e.name||"Element"+t}),legendConfig:i({},s.Legend.defaultConfig().legendConfig,{container:U,elements:V,reverseOrder:f.legend.reverseOrder})})();var H=U.node().getBBox();b=Math.min(f.width-H.width-f.margin.left-f.margin.right,f.height-f.margin.top-f.margin.bottom)/2;b=Math.max(10,b);x=[f.margin.left+b,f.margin.top+b];c.range([0,b]);a.layout.radialAxis.domain=c.domain();U.attr("transform","translate("+[x[0]+b,x[1]-b]+")")}else{U=l.select(".legend-group").style({display:"none"})}l.attr({width:f.width,height:f.height}).style({opacity:f.opacity});B.attr("transform","translate("+x+")").style({cursor:"crosshair"});var q=[(f.width-(f.margin.left+f.margin.right+b*2+(H?H.width:0)))/2,(f.height-(f.margin.top+f.margin.bottom+b*2))/2];q[0]=Math.max(0,q[0]);q[1]=Math.max(0,q[1]);l.select(".outer-group").attr("transform","translate("+q+")");if(f.title){var G=l.select("g.title-group text").style(j).text(f.title);var X=G.node().getBBox();G.attr({x:x[0]-X.width/2,y:x[1]-b-20})}var W=l.select(".radial.axis-group");if(f.radialAxis.gridLinesVisible){var Y=W.selectAll("circle.grid-circle").data(c.ticks(5));Y.enter().append("circle").attr({class:"grid-circle"}).style(N);Y.attr("r",c);Y.exit().remove()}W.select("circle.outside-circle").attr({r:b}).style(N);var Z=l.select("circle.background-circle").attr({r:b}).style({fill:f.backgroundColor,stroke:f.stroke});function J(e,t){return h(e)%360+f.orientation}if(f.radialAxis.visible){var Q=n.svg.axis().scale(c).ticks(5).tickSize(5);W.call(Q).attr({transform:"rotate("+f.radialAxis.orientation+")"});W.selectAll(".domain").style(N);W.selectAll("g>text").text(function(e,t){return this.textContent+f.radialAxis.ticksSuffix}).style(j).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){if(f.radialAxis.tickOrientation==="horizontal"){return"rotate("+-f.radialAxis.orientation+") translate("+[0,j["font-size"]]+")"}else return"translate("+[0,j["font-size"]]+")"}});W.selectAll("g>line").style({stroke:"black"})}var $=l.select(".angular.axis-group").selectAll("g.angular-tick").data(R);var K=$.enter().append("g").classed("angular-tick",true);$.attr({transform:function(e,t){return"rotate("+J(e,t)+")"}}).style({display:f.angularAxis.visible?"block":"none"});$.exit().remove();K.append("line").classed("grid-line",true).classed("major",function(e,t){return t%(f.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(f.minorTicks+1)==0)}).style(N);K.selectAll(".minor").style({stroke:f.minorTickColor});$.select("line.grid-line").attr({x1:f.tickLength?b-f.tickLength:0,x2:b}).style({display:f.angularAxis.gridLinesVisible?"block":"none"});K.append("text").classed("axis-text",true).style(j);var ee=$.select("text.axis-text").attr({x:b+f.labelOffset,dy:o+"em",transform:function(e,t){var r=J(e,t);var n=b+f.labelOffset;var a=f.angularAxis.tickOrientation;if(a=="horizontal")return"rotate("+-r+" "+n+" 0)";else if(a=="radial")return r<270&&r>90?"rotate(180 "+n+" 0)":null;else return"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:f.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){if(t%(f.minorTicks+1)!=0)return"";if(T){return T[e]+f.angularAxis.ticksSuffix}else return e+f.angularAxis.ticksSuffix}).style(j);if(f.angularAxis.rewriteTicks)ee.text(function(e,t){if(t%(f.minorTicks+1)!=0)return"";return f.angularAxis.rewriteTicks(this.textContent,t)});var te=n.max(B.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));U.attr({transform:"translate("+[b+te,f.margin.top]+")"});var re=l.select("g.geometry-group").selectAll("g").size()>0;var ne=l.select("g.geometry-group").selectAll("g.geometry").data(d);ne.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}});ne.exit().remove();if(d[0]||re){var ae=[];d.forEach(function(e,t){var r={};r.radialScale=c;r.angularScale=h;r.container=ne.filter(function(e,r){return r==t});r.geometry=e.geometry;r.orientation=f.orientation;r.direction=f.direction;r.index=t;ae.push({data:e,geometryConfig:r})});var ie=n.nest().key(function(e,t){return typeof e.data.groupId!="undefined"||"unstacked"}).entries(ae);var oe=[];ie.forEach(function(e,t){if(e.key==="unstacked")oe=oe.concat(e.values.map(function(e,t){return[e]}));else oe.push(e.values)});oe.forEach(function(e,t){var r;if(Array.isArray(e))r=e[0].geometryConfig.geometry;else r=e.geometryConfig.geometry;var n=e.map(function(e,t){return i(s[r].defaultConfig(),e)});s[r]().config(n)()})}var se=l.select(".guides-group");var le=l.select(".tooltips-group");var ue=s.tooltipPanel().config({container:le,fontSize:8})();var fe=s.tooltipPanel().config({container:le,fontSize:8})();var ce=s.tooltipPanel().config({container:le,hasTick:true})();var he,de;if(!k){var ve=se.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});B.on("mousemove.angular-guide",function(e,t){var r=s.util.getMousePos(Z).angle;ve.attr({x2:-b,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-f.orientation)%360;he=h.invert(n);var a=s.util.convertToCartesian(b+12,r+180);ue.text(s.util.round(he)).move([a[0]+x[0],a[1]+x[1]])}).on("mouseout.angular-guide",function(e,t){se.select("line").style({opacity:0})})}var pe=se.select("circle").style({stroke:"grey",fill:"none"});B.on("mousemove.radial-guide",function(e,t){var r=s.util.getMousePos(Z).radius;pe.attr({r:r}).style({opacity:.5});de=c.invert(s.util.getMousePos(Z).radius);var n=s.util.convertToCartesian(r,f.radialAxis.orientation);fe.text(s.util.round(de)).move([n[0]+x[0],n[1]+x[1]])}).on("mouseout.radial-guide",function(e,t){pe.style({opacity:0});ce.hide();ue.hide();fe.hide()});l.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,t){var r=n.select(this);var a=this.style.fill;var i="black";var o=this.style.opacity||1;r.attr({"data-opacity":o});if(a&&a!=="none"){r.attr({"data-fill":a});i=n.hsl(a).darker().toString();r.style({fill:i,opacity:1});var u={t:s.util.round(e[0]),r:s.util.round(e[1])};if(k)u.t=T[e[0]];var f="t: "+u.t+", r: "+u.r;var c=this.getBoundingClientRect();var h=l.node().getBoundingClientRect();var d=[c.left+c.width/2-q[0]-h.left,c.top+c.height/2-q[1]-h.top];ce.config({color:i}).text(f);ce.move(d)}else{a=this.style.stroke||"black";r.attr({"data-stroke":a});i=n.hsl(a).darker().toString();r.style({stroke:i,opacity:1})}}).on("mousemove.tooltip",function(e,t){if(n.event.which!=0)return false;if(n.select(this).attr("data-fill"))ce.show()}).on("mouseout.tooltip",function(e,t){ce.hide();var r=n.select(this);var a=r.attr("data-fill");if(a)r.style({fill:a,opacity:r.attr("data-opacity")});else r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})})});return d}d.render=function(e){v(e);return this};d.config=function(e){if(!arguments.length)return t;var r=s.util.cloneJson(e);r.data.forEach(function(e,r){if(!t.data[r])t.data[r]={};i(t.data[r],s.Axis.defaultConfig().data[0]);i(t.data[r],e)});i(t.layout,s.Axis.defaultConfig().layout);i(t.layout,r.layout);return this};d.getLiveConfig=function(){return a};d.getinputConfig=function(){return r};d.radialScale=function(e){return c};d.angularScale=function(e){return h};d.svg=function(){return l};n.rebind(d,f,"on");return d};s.Axis.defaultConfig=function(e,t){var r={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:true,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:true,gridLinesVisible:true,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:true,gridLinesVisible:true,labelsVisible:true,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:true,legend:{reverseOrder:false},opacity:1}};return r};s.util={};s.DATAEXTENT="dataExtent";s.AREA="AreaChart";s.LINE="LinePlot";s.DOT="DotPlot";s.BAR="BarChart";s.util._override=function(e,t){for(var r in e)if(r in t)t[r]=e[r]};s.util._extend=function(e,t){for(var r in e)t[r]=e[r]};s.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)};s.util.dataFromEquation2=function(e,t){var r=t||6;var a=n.range(0,360+r,r).map(function(t,r){var n=t*Math.PI/180;var a=e(n);return[t,a]});return a};s.util.dataFromEquation=function(e,t,r){var a=t||6;var i=[],o=[];n.range(0,360+a,a).forEach(function(t,r){var n=t*Math.PI/180;var a=e(n);i.push(t);o.push(a)});var s={t:i,r:o};if(r)s.name=r;return s};s.util.ensureArray=function(e,t){if(typeof e==="undefined")return null;var r=[].concat(e);return n.range(t).map(function(e,t){return r[t]||r[0]})};s.util.fillArrays=function(e,t,r){t.forEach(function(t,n){e[t]=s.util.ensureArray(e[t],r)});return e};s.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))};s.util.validateKeys=function(e,t){if(typeof t==="string")t=t.split(".");var r=t.shift();return e[r]&&(!t.length||objHasKeys(e[r],t))};s.util.sumArrays=function(e,t){return n.zip(e,t).map(function(e,t){return n.sum(e)})};s.util.arrayLast=function(e){return e[e.length-1]};s.util.arrayEqual=function(e,t){var r=Math.max(e.length,t.length,1);while(r-- >=0&&e[r]===t[r]);return r===-2};s.util.flattenArray=function(e){var t=[];while(!s.util.arrayEqual(t,e)){t=e;e=[].concat.apply([],e)}return e};s.util.deduplicate=function(e){return e.filter(function(e,t,r){return r.indexOf(e)==t})};s.util.convertToCartesian=function(e,t){var r=t*Math.PI/180;var n=e*Math.cos(r);var a=e*Math.sin(r);return[n,a]};s.util.round=function(e,t){var r=t||2;var n=Math.pow(10,r);return Math.round(e*n)/n};s.util.getMousePos=function(e){var t=n.mouse(e.node());var r=t[0];var a=t[1];var i={};i.x=r;i.y=a;i.pos=t;i.angle=(Math.atan2(a,r)+Math.PI)*180/Math.PI;i.radius=Math.sqrt(r*r+a*a);return i};s.util.duplicatesCount=function(e){var t={},r;var n={};for(var a=0,i=e.length;a<i;a++){r=e[a];if(r in t){t[r]++;n[r]=t[r]}else{t[r]=1}}return n};s.util.duplicates=function(e){return Object.keys(s.util.duplicatesCount(e))};s.util.translator=function(e,t,r,n){if(n){var a=r.slice();r=t;t=a}var i=t.reduce(function(e,t){if(typeof e!="undefined")return e[t]},e);if(typeof i==="undefined")return;t.reduce(function(e,r,n){if(typeof e=="undefined")return;if(n===t.length-1)delete e[r];return e[r]},e);r.reduce(function(e,t,n){if(typeof e[t]==="undefined")e[t]={};if(n===r.length-1)e[t]=i;return e[t]},e)};s.PolyChart=function e(){var t=[s.PolyChart.defaultConfig()];var r=n.dispatch("hover");var a={solid:"none",dash:[5,2],dot:[2,5]};var o;function l(){var e=t[0].geometryConfig;var r=e.container;if(typeof r=="string")r=n.select(r);r.datum(t).each(function(t,r){var i=!!t[0].data.yStack;var o=t.map(function(e,t){if(i)return n.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]);else return n.zip(e.data.t[0],e.data.r[0])});var s=e.angularScale;var l=e.radialScale.domain()[0];var u={};u.bar=function(r,a,i){var o=t[i].data;var l=e.radialScale(r[1])-e.radialScale(0);var u=e.radialScale(r[2]||0);var f=o.barWidth;n.select(this).attr({class:"mark bar",d:"M"+[[l+u,-f/2],[l+u,f/2],[u,f/2],[u,-f/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+s(t[0]))+")"}})};u.dot=function(e,r,a){var i=e[2]?[e[0],e[1]+e[2]]:e;var o=n.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(e,r);n.select(this).attr({class:"mark dot",d:o,transform:function(e,t){var r=y(m(i));return"translate("+[r.x,r.y]+")"}})};var f=n.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});u.line=function(r,a,i){var s=r[2]?o[i].map(function(e,t){return[e[0],e[1]+e[2]]}):o[i];n.select(this).each(u["dot"]).style({opacity:function(e,r){return+t[i].data.dotVisible},fill:v.stroke(r,a,i)}).attr({class:"mark dot"});if(a>0)return;var l=n.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path");l.attr({class:"line",d:f(s),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return v.fill(r,a,i)},"fill-opacity":0,stroke:function(e,t){return v.stroke(r,a,i)},"stroke-width":function(e,t){return v["stroke-width"](r,a,i)},"stroke-dasharray":function(e,t){return v["stroke-dasharray"](r,a,i)},opacity:function(e,t){return v.opacity(r,a,i)},display:function(e,t){return v.display(r,a,i)}})};var c=e.angularScale.range();var h=Math.abs(c[1]-c[0])/o[0].length*Math.PI/180;var d=n.svg.arc().startAngle(function(e){return-h/2}).endAngle(function(e){return h/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});u.arc=function(t,r,a){n.select(this).attr({class:"mark arc",d:d,transform:function(t,r){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var v={fill:function(e,r,n){return t[n].data.color},stroke:function(e,r,n){return t[n].data.strokeColor},"stroke-width":function(e,r,n){return t[n].data.strokeSize+"px"},"stroke-dasharray":function(e,r,n){return a[t[n].data.strokeDash]},opacity:function(e,r,n){return t[n].data.opacity},display:function(e,r,n){return typeof t[n].data.visible==="undefined"||t[n].data.visible?"block":"none"}};var p=n.select(this).selectAll("g.layer").data(o);p.enter().append("g").attr({class:"layer"});var g=p.selectAll("path.mark").data(function(e,t){return e});g.enter().append("path").attr({class:"mark"});g.style(v).each(u[e.geometryType]);g.exit().remove();p.exit().remove();function m(t,r){var n=e.radialScale(t[1]);var a=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:n,t:a}}function y(e){var t=e.r*Math.cos(e.t);var r=e.r*Math.sin(e.t);return{x:t,y:r}}})}l.config=function(e){if(!arguments.length)return t;e.forEach(function(e,r){if(!t[r])t[r]={};i(t[r],s.PolyChart.defaultConfig());i(t[r],e)});return this};l.getColorScale=function(){return o};n.rebind(l,r,"on");return l};s.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:false,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:true,visibleInLegend:true},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}};return e};s.BarChart=function e(){return s.PolyChart()};s.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e};s.AreaChart=function e(){return s.PolyChart()};s.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e};s.DotPlot=function e(){return s.PolyChart()};s.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e};s.LinePlot=function e(){return s.PolyChart()};s.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e};s.Legend=function e(){var t=s.Legend.defaultConfig();var r=n.dispatch("hover");function a(){var e=t.legendConfig;var r=t.data.map(function(t,r){return[].concat(t).map(function(t,n){var a=i({},e.elements[r]);a.name=t;a.color=[].concat(e.elements[r].color)[n];return a})});var o=n.merge(r);o=o.filter(function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||typeof e.elements[r].visibleInLegend==="undefined")});if(e.reverseOrder)o=o.reverse();var s=e.container;if(typeof s=="string"||s.nodeName)s=n.select(s);var l=o.map(function(e,t){return e.color});var u=e.fontSize;var f=e.isContinuous==null?typeof o[0]==="number":e.isContinuous;var c=f?e.height:u*o.length;var h=s.classed("legend-group",true);var d=h.selectAll("svg").data([0]);var v=d.enter().append("svg").attr({width:300,height:c+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});v.append("g").classed("legend-axis",true);v.append("g").classed("legend-marks",true);var p=n.range(o.length);var g=n.scale[f?"linear":"ordinal"]().domain(p).range(l);var m=n.scale[f?"linear":"ordinal"]().domain(p)[f?"range":"rangePoints"]([0,c]);var y=function(e,t){var r=t*3;if(e==="line"){return"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z"}else if(n.svg.symbolTypes.indexOf(e)!=-1)return n.svg.symbol().type(e).size(r)();else return n.svg.symbol().type("square").size(r)()};if(f){var b=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);b.enter().append("stop");b.attr({offset:function(e,t){return t/(l.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}});d.append("rect").classed("legend-mark",true).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var x=d.select(".legend-marks").selectAll("path.legend-mark").data(o);x.enter().append("path").classed("legend-mark",true);x.attr({transform:function(e,t){return"translate("+[u/2,m(t)+u/2]+")"},d:function(e,t){var r=e.symbol;return y(r,u)},fill:function(e,t){return g(t)}});x.exit().remove()}var _=n.svg.axis().scale(m).orient("right");var w=d.select("g.legend-axis").attr({transform:"translate("+[f?e.colorBandWidth:u,u/2]+")"}).call(_);w.selectAll(".domain").style({fill:"none",stroke:"none"});w.selectAll("line").style({fill:"none",stroke:f?e.textColor:"none"});w.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(e,t){return o[t].name});return a}a.config=function(e){if(!arguments.length)return t;i(t,e);return this};n.rebind(a,r,"on");return a};s.Legend.defaultConfig=function(e,t){var r={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:false}};return r};s.tooltipPanel=function(){var e,t,r;var a={container:null,hasTick:false,fontSize:12,color:"white",padding:5};var o="tooltip-"+s.tooltipPanel.uid++;var l=10;var u=function(){e=a.container.selectAll("g."+o).data([0]);var n=e.enter().append("g").classed(o,true).style({"pointer-events":"none",display:"none"});r=n.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});t=n.append("text").attr({dx:a.padding+l,dy:+a.fontSize*.3});return u};u.text=function(i){var o=n.hsl(a.color).l;var s=o>=.5?"#aaa":"white";var f=o>=.5?"black":"white";var c=i||"";t.style({fill:f,"font-size":a.fontSize+"px"}).text(c);var h=a.padding;var d=t.node().getBBox();var v={fill:a.color,stroke:s,"stroke-width":"2px"};var p=d.width+h*2+l;var g=d.height+h*2;r.attr({d:"M"+[[l,-g/2],[l,-g/4],[a.hasTick?0:l,0],[l,g/4],[l,g/2],[p,g/2],[p,-g/2]].join("L")+"Z"}).style(v);e.attr({transform:"translate("+[l,-g/2+h*2]+")"});e.style({display:"block"});return u};u.move=function(t){if(!e)return;e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"});return u};u.hide=function(){if(!e)return;e.style({display:"none"});return u};u.show=function(){if(!e)return;e.style({display:"block"});return u};u.config=function(e){i(a,e);return u};return u};s.tooltipPanel.uid=1;s.adapter={};s.adapter.plotly=function e(){var t={};t.convert=function(e,t){var r={};if(e.data){r.data=e.data.map(function(e,r){var n=i({},e);var a=[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]];a.forEach(function(e,r){s.util.translator.apply(null,e.concat(t))});if(!t)delete n.marker;if(t)delete n.groupId;if(!t){if(n.type==="scatter"){if(n.mode==="lines")n.geometry="LinePlot";else if(n.mode==="markers")n.geometry="DotPlot";else if(n.mode==="lines+markers"){n.geometry="LinePlot";n.dotVisible=true}}else if(n.type==="area")n.geometry="AreaChart";else if(n.type==="bar")n.geometry="BarChart";delete n.mode;delete n.type}else{if(n.geometry==="LinePlot"){n.type="scatter";if(n.dotVisible===true){delete n.dotVisible;n.mode="lines+markers"}else n.mode="lines"}else if(n.geometry==="DotPlot"){n.type="scatter";n.mode="markers"}else if(n.geometry==="AreaChart")n.type="area";else if(n.geometry==="BarChart")n.type="bar";delete n.geometry}return n});if(!t&&e.layout&&e.layout.barmode==="stack"){var a=s.util.duplicates(r.data.map(function(e,t){return e.geometry}));r.data.forEach(function(e,t){var n=a.indexOf(e.geometry);if(n!=-1)r.data[t].groupId=n})}}if(e.layout){var o=i({},e.layout);var l=[[o,["plot_bgcolor"],["backgroundColor"]],[o,["showlegend"],["showLegend"]],[o,["radialaxis"],["radialAxis"]],[o,["angularaxis"],["angularAxis"]],[o.angularaxis,["showline"],["gridLinesVisible"]],[o.angularaxis,["showticklabels"],["labelsVisible"]],[o.angularaxis,["nticks"],["ticksCount"]],[o.angularaxis,["tickorientation"],["tickOrientation"]],[o.angularaxis,["ticksuffix"],["ticksSuffix"]],[o.angularaxis,["range"],["domain"]],[o.angularaxis,["endpadding"],["endPadding"]],[o.radialaxis,["showline"],["gridLinesVisible"]],[o.radialaxis,["tickorientation"],["tickOrientation"]],[o.radialaxis,["ticksuffix"],["ticksSuffix"]],[o.radialaxis,["range"],["domain"]],[o.angularAxis,["showline"],["gridLinesVisible"]],[o.angularAxis,["showticklabels"],["labelsVisible"]],[o.angularAxis,["nticks"],["ticksCount"]],[o.angularAxis,["tickorientation"],["tickOrientation"]],[o.angularAxis,["ticksuffix"],["ticksSuffix"]],[o.angularAxis,["range"],["domain"]],[o.angularAxis,["endpadding"],["endPadding"]],[o.radialAxis,["showline"],["gridLinesVisible"]],[o.radialAxis,["tickorientation"],["tickOrientation"]],[o.radialAxis,["ticksuffix"],["ticksSuffix"]],[o.radialAxis,["range"],["domain"]],[o.font,["outlinecolor"],["outlineColor"]],[o.legend,["traceorder"],["reverseOrder"]],[o,["labeloffset"],["labelOffset"]],[o,["defaultcolorrange"],["defaultColorRange"]]];l.forEach(function(e,r){s.util.translator.apply(null,e.concat(t))});if(!t){if(o.angularAxis&&typeof o.angularAxis.ticklen!=="undefined")o.tickLength=o.angularAxis.ticklen;if(o.angularAxis&&typeof o.angularAxis.tickcolor!=="undefined")o.tickColor=o.angularAxis.tickcolor}else{if(typeof o.tickLength!=="undefined"){o.angularaxis.ticklen=o.tickLength;delete o.tickLength}if(o.tickColor){o.angularaxis.tickcolor=o.tickColor;delete o.tickColor}}if(o.legend&&typeof o.legend.reverseOrder!="boolean"){o.legend.reverseOrder=o.legend.reverseOrder!="normal"}if(o.legend&&typeof o.legend.traceorder=="boolean"){o.legend.traceorder=o.legend.traceorder?"reversed":"normal";delete o.legend.reverseOrder}if(o.margin&&typeof o.margin.t!="undefined"){var u=["t","r","b","l","pad"];var f=["top","right","bottom","left","pad"];var c={};n.entries(o.margin).forEach(function(e,t){c[f[u.indexOf(e.key)]]=e.value});o.margin=c}if(t){delete o.needsEndSpacing;delete o.minorTickColor;delete o.minorTicks;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksStep;delete o.angularaxis.rewriteTicks;delete o.angularaxis.nticks;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksStep;delete o.radialaxis.rewriteTicks;delete o.radialaxis.nticks}r.layout=o}return r};return t}},{"../../../constants/alignment":421,"../../../lib":445,d3:86}],533:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../../lib");var i=e("../../../components/color");var o=e("./micropolar");var s=e("./undo_manager");var l=a.extendDeepAll;var u=t.exports={};u.framework=function(e){var t,r,a,i,f;var c=new s;function h(r,s){if(s)f=s;n.select(n.select(f).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove();t=!t?r:l(t,r);if(!a)a=o.Axis();i=o.adapter.plotly().convert(t);a.config(i).render(f);e.data=t.data;e.layout=t.layout;u.fillLayout(e);return t}h.isPolar=true;h.svg=function(){return a.svg()};h.getConfig=function(){return t};h.getLiveConfig=function(){return o.adapter.plotly().convert(a.getLiveConfig(),true)};h.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}};h.setUndoPoint=function(){var e=this;var n=o.util.cloneJson(t);(function(t,r){c.add({undo:function(){if(r)e(r)},redo:function(){e(t)}})})(n,r);r=o.util.cloneJson(n)};h.undo=function(){c.undo()};h.redo=function(){c.redo()};return h};u.fillLayout=function(e){var t=n.select(e).selectAll(".plot-container"),r=t.selectAll(".svg-container"),a=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:i.background,_container:t,_paperdiv:r,_paper:a};e._fullLayout=l(o,e.layout)}},{"../../../components/color":323,"../../../lib":445,"./micropolar":532,"./undo_manager":534,d3:86}],534:[function(e,t,r){"use strict";t.exports=function e(){var t=[],r=-1,n=false,a;function i(e,t){if(!e)return this;n=true;e[t]();n=false;return this}return{add:function(e){if(n)return this;t.splice(r+1,t.length-r);t.push(e);r=t.length-1;return this},setCallback:function(e){a=e},undo:function(){var e=t[r];if(!e)return this;i(e,"undo");r-=1;if(a)a(e.undo);return this},redo:function(){var e=t[r+1];if(!e)return this;i(e,"redo");r+=1;if(a)a(e.redo);return this},clear:function(){t=[];r=-1},hasUndo:function(){return r!==-1},hasRedo:function(){return r<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[r-1]},getIndex:function(){return r}}}},{}],535:[function(e,t,r){"use strict";function n(e,t){if(e==="splom")return-1;if(t==="splom")return 1;return 0}function a(e,t){return n(e.name,t.name)}t.exports={sortBasePlotModules:a,sortModules:n}},{}],536:[function(e,t,r){"use strict";var n=e("./lib/loggers");var a=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var s=e("./lib/extend");var l=e("./plots/attributes");var u=e("./plots/layout_attributes");var f=s.extendFlat;var c=s.extendDeepAll;r.modules={};r.allCategories={};r.allTypes=[];r.subplotsRegistry={};r.transformsRegistry={};r.componentsRegistry={};r.layoutArrayContainers=[];r.layoutArrayRegexes=[];r.traceLayoutAttributes={};r.localeRegistry={};r.apiMethodRegistry={};r.register=function e(t){if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var n=0;n<t.length;n++){var a=t[n];if(!a){throw new Error("Invalid module was attempted to be registered!")}switch(a.moduleType){case"trace":h(a);break;case"transform":p(a);break;case"component":v(a);break;case"locale":g(a);break;case"apiMethod":var i=a.name;r.apiMethodRegistry[i]=a.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};r.getModule=function(e){var t=r.modules[_(e)];if(!t)return false;return t._module};r.traceIs=function(e,t){e=_(e);if(e==="various")return false;var a=r.modules[e];if(!a){if(e&&e!=="area"){n.log("Unrecognized trace type "+e+".")}a=r.modules[l.type.dflt]}return!!a.categories[t]};r.getTransformIndices=function(e,t){var r=[];var n=e.transforms||[];for(var a=0;a<n.length;a++){if(n[a].type===t){r.push(a)}}return r};r.hasTransform=function(e,t){var r=e.transforms||[];for(var n=0;n<r.length;n++){if(r[n].type===t){return true}}return false};r.getComponentMethod=function(e,t){var n=r.componentsRegistry[e];if(!n)return a;return n[t]||a};r.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return r.apiMethodRegistry[e].apply(null,t)};function h(e){var t=e.name;var a=e.categories;var i=e.meta;if(r.modules[t]){n.log("Type "+t+" already registered");return}if(!r.subplotsRegistry[e.basePlotModule.name]){d(e.basePlotModule)}var o={};for(var s=0;s<a.length;s++){o[a[s]]=true;r.allCategories[a[s]]=true}r.modules[t]={_module:e,categories:o};if(i&&Object.keys(i).length){r.modules[t].meta=i}r.allTypes.push(t);for(var l in r.componentsRegistry){y(l,t)}if(e.layoutAttributes){f(r.traceLayoutAttributes,e.layoutAttributes)}}function d(e){var t=e.name;if(r.subplotsRegistry[t]){n.log("Plot type "+t+" already registered.");return}m(e);r.subplotsRegistry[t]=e;for(var a in r.componentsRegistry){x(a,e.name)}}function v(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;r.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(r.layoutArrayContainers,t)}m(e)}for(var n in r.modules){y(t,n)}for(var a in r.subplotsRegistry){x(t,a)}for(var o in r.transformsRegistry){b(t,o)}if(e.schema&&e.schema.layout){c(u,e.schema.layout)}}function p(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var a=typeof e.transform==="function";var i=typeof e.calcTransform==="function";if(!a&&!i){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(a&&i){n.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){n.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){n.log(t+" registered without a *supplyDefaults* method.")}r.transformsRegistry[e.name]=e;for(var s in r.componentsRegistry){b(s,e.name)}}function g(e){var t=e.name;var n=t.split("-")[0];var a=e.dictionary;var i=e.format;var o=a&&Object.keys(a).length;var s=i&&Object.keys(i).length;var l=r.localeRegistry;var u=l[t];if(!u)l[t]=u={};if(n!==t){var f=l[n];if(!f)l[n]=f={};if(o&&f.dictionary===u.dictionary){f.dictionary=a}if(s&&f.format===u.format){f.format=i}}if(o)u.dictionary=a;if(s)u.format=i}function m(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var n=0;n<t.length;n++){i(r.layoutArrayRegexes,t[n])}}}}function y(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.traces)return;var a=n.traces[t];if(a){c(r.modules[t]._module.attributes,a)}}function b(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.transforms)return;var a=n.transforms[t];if(a){c(r.transformsRegistry[t].attributes,a)}}function x(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.subplots)return;var a=r.subplotsRegistry[t];var i=a.layoutAttributes;var o=a.attr==="subplot"?a.name:a.attr;if(Array.isArray(o))o=o[0];var s=n.subplots[o];if(i&&s){c(i,s)}}function _(e){if(typeof e==="object")e=e.type;return e}},{"./lib/extend":436,"./lib/is_plain_object":447,"./lib/loggers":450,"./lib/noop":454,"./lib/push_unique":459,"./plots/attributes":489,"./plots/layout_attributes":526}],537:[function(e,t,r){"use strict";var n=e("../lib");var a=n.extendFlat;var i=n.extendDeep;function o(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:"",showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function s(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){if(t.framework&&t.framework.isPolar){t=t.framework.getConfig()}var n;var l=t.data;var u=t.layout;var f=i([],l);var c=i({},u,o(r.tileClass));var h=t._context||{};if(r.width)c.width=r.width;if(r.height)c.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){c.annotations=[];var d=Object.keys(c);for(n=0;n<d.length;n++){if(s(d[n])){c[d[n]].title=""}}for(n=0;n<f.length;n++){var v=f[n];v.showscale=false;if(v.marker)v.marker.showscale=false;if(v.type==="pie")v.textposition="none"}}if(Array.isArray(r.annotations)){for(n=0;n<r.annotations.length;n++){c.annotations.push(r.annotations[n])}}var p=Object.keys(c).filter(function(e){return e.match(/^scene\d*$/)});if(p.length){var g={};if(r.tileClass==="thumbnail"){g={title:"",showaxeslabels:false,showticklabels:false,linetickenable:false}}for(n=0;n<p.length;n++){var m=c[p[n]];if(!m.xaxis){m.xaxis={}}if(!m.yaxis){m.yaxis={}}if(!m.zaxis){m.zaxis={}}a(m.xaxis,g);a(m.yaxis,g);a(m.zaxis,g);m._scene=null}}var y=document.createElement("div");if(r.tileClass)y.className=r.tileClass;var b={gd:y,td:y,layout:c,data:f,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:h.mapboxAccessToken}};if(r.setBackground!=="transparent"){b.config.setBackground=r.setBackground||"opaque"}b.gd.defaultLayout=o(r.tileClass);return b}},{"../lib":445}],538:[function(e,t,r){"use strict";var n=e("../plot_api/to_image");var a=e("../lib");var i=e("./filesaver");function o(e,t){t=t||{};t.format=t.format||"png";return new Promise(function(r,o){if(e._snapshotInProgress){o(new Error("Snapshotting already in progress."))}if(a.isIE()&&t.format!=="svg"){o(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."))}e._snapshotInProgress=true;var s=n(e,t);var l=t.filename||e.fn||"newplot";l+="."+t.format;s.then(function(t){e._snapshotInProgress=false;return i(t,l)}).then(function(e){r(e)}).catch(function(t){e._snapshotInProgress=false;o(t)})})}t.exports=o},{"../lib":445,"../plot_api/to_image":485,"./filesaver":539}],539:[function(e,t,r){"use strict";var n=function(e,t){var r=document.createElement("a");var n="download"in r;var a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);var i=new Promise(function(i,o){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){o(new Error("IE < 10 unsupported"))}if(a){document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/));i(t)}if(!t){t="download"}if(n){r.href=e;r.download=t;document.body.appendChild(r);r.click();document.body.removeChild(r);i(t)}if(typeof navigator!=="undefined"&&navigator.msSaveBlob){var s=e.split(/^data:image\/svg\+xml,/)[1];var l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),t);i(t)}o(new Error("download error"))});return i};t.exports=n},{}],540:[function(e,t,r){"use strict";r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){var t=e._fullLayout||{};var r=t._has&&t._has("polar");var n=!r&&e.data&&e.data[0]&&e.data[0].r;if(n)return;return function(){(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()})}}},{}],541:[function(e,t,r){"use strict";var n=e("./helpers");var a={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":537,"./download":538,"./helpers":540,"./svgtoimg":542,"./toimage":543,"./tosvg":544}],542:[function(e,t,r){"use strict";var n=e("../lib");var a=e("events").EventEmitter;function i(e){var t=e.emitter||new a;var r=new Promise(function(a,i){var o=window.Image;var s=e.svg;var l=e.format||"png";if(n.isIE()&&l!=="svg"){var u=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");i(u);if(!e.promise){return t.emit("error",u)}else{return r}}var f=e.canvas;var c=e.scale||1;var h=e.width||300;var d=e.height||150;var v=c*h;var p=c*d;var g=f.getContext("2d");var m=new o;var y="data:image/svg+xml,"+encodeURIComponent(s);f.width=v;f.height=p;m.onload=function(){var r;if(l!=="svg"){g.drawImage(m,0,0,v,p)}switch(l){case"jpeg":r=f.toDataURL("image/jpeg");break;case"png":r=f.toDataURL("image/png");break;case"webp":r=f.toDataURL("image/webp");break;case"svg":r=y;break;default:var n="Image format is not jpeg, png, svg or webp.";i(new Error(n));if(!e.promise){return t.emit("error",n)}}a(r);if(!e.promise){t.emit("success",r)}};m.onerror=function(r){i(r);if(!e.promise){return t.emit("error",r)}};m.src=y});if(e.promise){return r}return t}t.exports=i},{"../lib":445,events:150}],543:[function(e,t,r){"use strict";var n=e("events").EventEmitter;var a=e("../registry");var i=e("../lib");var o=e("./helpers");var s=e("./cloneplot");var l=e("./tosvg");var u=e("./svgtoimg");function f(e,t){var r=new n;var f=s(e,{format:"png"});var c=f.gd;c.style.position="absolute";c.style.left="-5000px";document.body.appendChild(c);function h(){var e=o.getDelay(c._fullLayout);setTimeout(function(){var e=l(c);var n=document.createElement("canvas");n.id=i.randstr();r=u({format:t.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:n,emitter:r,svg:e});r.clean=function(){if(c)document.body.removeChild(c)}},e)}var d=o.getRedrawFunc(c);a.call("plot",c,f.data,f.layout,f.config).then(d).then(h).catch(function(e){r.emit("error",e)});return r}t.exports=f},{"../lib":445,"../registry":536,"./cloneplot":537,"./helpers":540,"./svgtoimg":542,"./tosvg":544,events:150}],544:[function(e,t,r){"use strict";var n=e("d3");var a=e("../lib");var i=e("../components/drawing");var o=e("../components/color");var s=e("../constants/xmlns_namespaces");var l=/"/g;var u="TOBESTRIPPED";var f=new RegExp('("'+u+")|("+u+'")',"g");function c(e){var t=n.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function h(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,d){var v=t._fullLayout;var p=v._paper;var g=v._toppaper;var m=v.width;var y=v.height;var b;p.insert("rect",":first-child").call(i.setRect,0,0,m,y).call(o.fill,v.paper_bgcolor);var x=v._basePlotModules||[];for(b=0;b<x.length;b++){var _=x[b];if(_.toSVG)_.toSVG(t)}if(g){var w=g.node().childNodes;var A=Array.prototype.slice.call(w);for(b=0;b<A.length;b++){var k=A[b];if(k.childNodes.length)p.node().appendChild(k)}}if(v._draggers){v._draggers.remove()}p.node().style.background="";p.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=n.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(l,u))}});p.selectAll(".point,.scatterpts").each(function(){var e=n.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(l,u))}});if(r==="pdf"||r==="eps"){p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}p.node().setAttributeNS(s.xmlns,"xmlns",s.svg);p.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink);if(r==="svg"&&d){p.attr("width",d*m);p.attr("height",d*y);p.attr("viewBox","0 0 "+m+" "+y)}var T=(new window.XMLSerializer).serializeToString(p.node());T=c(T);T=h(T);T=T.replace(f,"'");if(a.isIE()){T=T.replace(/"/gi,"'");T=T.replace(/(\('#)([^']*)('\))/gi,'("#$2")');T=T.replace(/(\\')/gi,'"')}return T}},{"../components/color":323,"../components/drawing":348,"../constants/xmlns_namespaces":426,"../lib":445,d3:86}],545:[function(e,t,r){"use strict";var n=e("../heatmap/attributes");var a=e("../scatter/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/colorbar/attributes");var s=e("../../components/drawing/attributes").dash;var l=e("../../plots/font_attributes");var u=e("../../lib/extend").extendFlat;var f=e("../../constants/filter_ops");var c=f.COMPARISON_OPS2;var h=f.INTERVAL_OPS;var d=a.line;t.exports=u({z:n.z,x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,text:n.text,transpose:n.transpose,xtype:n.xtype,ytype:n.ytype,zhoverformat:n.zhoverformat,connectgaps:n.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"contours.start":undefined,"contours.end":undefined,"contours.size":undefined}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":false}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":false}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:true,editType:"plot"},showlabels:{valType:"boolean",dflt:false,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(c).concat(h),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:false}},line:{color:u({},d.color,{editType:"style+colorbars"}),width:u({},d.width,{editType:"style+colorbars"}),dash:s,smoothing:u({},d.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:false,editTypeOverride:"calc"}),{colorbar:o})},{"../../components/colorbar/attributes":324,"../../components/colorscale/attributes":330,"../../components/drawing/attributes":347,"../../constants/filter_ops":422,"../../lib/extend":436,"../../plots/font_attributes":518,"../heatmap/attributes":558,"../scatter/attributes":597}],546:[function(e,t,r){"use strict";var n=e("../heatmap/calc");var a=e("./set_contours");t.exports=function e(t,r){var i=n(t,r);a(r);return i}},{"../heatmap/calc":559,"./set_contours":554}],547:[function(e,t,r){"use strict";var n=e("../../components/colorbar/draw");var a=e("./make_color_map");var i=e("./end_plus");t.exports=function e(t,r){var o=r[0].trace,s="cb"+o.uid;t._fullLayout._infolayer.selectAll("."+s).remove();if(!o.showscale)return;var l=n(t,s);r[0].t.cb=l;var u=o.contours,f=o.line,c=u.size||1,h=u.coloring;var d=a(o,{isColorbar:true});if(h==="heatmap"){l.filllevels({start:o.zmin,end:o.zmax,size:(o.zmax-o.zmin)/254})}l.fillcolor(h==="fill"||h==="heatmap"?d:"").line({color:h==="lines"?d:f.color,width:u.showlines!==false?f.width:0,dash:f.dash}).levels({start:u.start,end:i(u),size:c}).options(o.colorbar)()}},{"../../components/colorbar/draw":328,"./end_plus":551,"./make_color_map":553}],548:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./label_defaults");var i=e("../../components/color");var o=i.addOpacity;var s=i.opacity;var l=e("../../constants/filter_ops");var u=l.CONSTRAINT_REDUCTION;var f=l.COMPARISON_OPS2;t.exports=function e(t,r,n,i,l,f){var h=r.contours;var d,v,p;var g=n("contours.operation");h._operation=u[g];c(n,h);if(g==="="){d=h.showlines=true}else{d=n("contours.showlines");p=n("fillcolor",o((t.line||{}).color||l,.5))}if(d){var m=p&&s(p)?o(r.fillcolor,1):l;v=n("line.color",m);n("line.width",2);n("line.dash")}n("line.smoothing");a(n,i,v,f)};function c(e,t){var r;if(f.indexOf(t.operation)===-1){e("contours.value",[0,1]);if(!Array.isArray(t.value)){if(n(t.value)){r=parseFloat(t.value);t.value=[r,r+1]}}else if(t.value.length>2){t.value=t.value.slice(2)}else if(t.length===0){t.value=[0,1]}else if(t.length<2){r=parseFloat(t.value[0]);t.value=[r,r+1]}else{t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]}}else{e("contours.value",0);if(!n(t.value)){if(Array.isArray(t.value)){t.value=parseFloat(t.value[0])}else{t.value=0}}}}},{"../../components/color":323,"../../constants/filter_ops":422,"./label_defaults":552,"fast-isnumeric":151}],549:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a){var i=a("contours.start");var o=a("contours.end");var s=i===false||o===false;var l=n("contours.size");var u;if(s)u=r.autocontour=true;else u=n("autocontour",false);if(u||!l)n("ncontours")}},{}],550:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../heatmap/xyz_defaults");var i=e("./constraint_defaults");var o=e("./contours_defaults");var s=e("./style_defaults");var l=e("./attributes");t.exports=function e(t,r,u,f){function c(e,a){return n.coerce(t,r,l,e,a)}function h(e){return n.coerce2(t,r,l,e)}var d=a(t,r,c,f);if(!d){r.visible=false;return}c("text");var v=c("contours.type")==="constraint";c("connectgaps",n.isArray1D(r.z));if(!v)delete r.showlegend;if(v){i(t,r,c,f,u)}else{o(t,r,c,h);s(t,r,c,f)}}},{"../../lib":445,"../heatmap/xyz_defaults":569,"./attributes":545,"./constraint_defaults":548,"./contours_defaults":549,"./style_defaults":555}],551:[function(e,t,r){"use strict";t.exports=function e(t){return t.end+t.size/1e6}},{}],552:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r,a,i){if(!i)i={};var o=t("contours.showlabels");if(o){var s=r.font;n.coerceFont(t,"contours.labelfont",{family:s.family,size:s.size,color:a});t("contours.labelformat")}if(i.hasHover!==false)t("zhoverformat")}},{"../../lib":445}],553:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/colorscale");var i=e("./end_plus");t.exports=function e(t){var r=t.contours,o=r.start,s=i(r),l=r.size||1,u=Math.floor((s-o)/l)+1,f=r.coloring==="lines"?0:1;if(!isFinite(l)){l=1;u=1}var c=t.colorscale,h=c.length;var d=new Array(h),v=new Array(h);var p,g;if(r.coloring==="heatmap"){if(t.zauto&&t.autocontour===false){t.zmin=o-l/2;t.zmax=t.zmin+u*l}for(g=0;g<h;g++){p=c[g];d[g]=p[0]*(t.zmax-t.zmin)+t.zmin;v[g]=p[1]}var m=n.extent([t.zmin,t.zmax,r.start,r.start+l*(u-1)]),y=m[t.zmin<t.zmax?0:1],b=m[t.zmin<t.zmax?1:0];if(y!==t.zmin){d.splice(0,0,y);v.splice(0,0,Range[0])}if(b!==t.zmax){d.push(b);v.push(v[v.length-1])}}else{for(g=0;g<h;g++){p=c[g];d[g]=(p[0]*(u+f-1)-f/2)*l+o;v[g]=p[1]}}return a.makeColorScaleFunc({domain:d,range:v},{noNumericCheck:true})}},{"../../components/colorscale":338,"./end_plus":551,d3:86}],554:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axes");var a=e("../../lib");t.exports=function e(t){var r=t.contours;if(t.autocontour){var o=t.zmin;var s=t.zmax;if(o===undefined||s===undefined){o=a.aggNums(Math.min,null,t._z);s=a.aggNums(Math.max,null,t._z)}var l=i(o,s,t.ncontours);r.size=l.dtick;r.start=n.tickFirst(l);l.range.reverse();r.end=n.tickFirst(l);if(r.start===o)r.start+=r.size;if(r.end===s)r.end-=r.size;if(r.start>r.end){r.start=r.end=(r.start+r.end)/2}if(!t._input.contours)t._input.contours={};a.extendFlat(t._input.contours,{start:r.start,end:r.end,size:r.size});t._input.autocontour=true}else if(r.type!=="constraint"){var u=r.start,f=r.end,c=t._input.contours;if(u>f){r.start=c.start=f;f=r.end=c.end=u;u=r.start}if(!(r.size>0)){var h;if(u===f)h=1;else h=i(u,f,t.ncontours).dtick;c.size=r.size=h}}};function i(e,t,r){var a={type:"linear",range:[e,t]};n.autoTicks(a,(t-e)/(r||15));return a}},{"../../lib":445,"../../plots/cartesian/axes":492}],555:[function(e,t,r){"use strict";var n=e("../../components/colorscale/defaults");var a=e("./label_defaults");t.exports=function e(t,r,i,o,s){var l=i("contours.coloring");var u;var f="";if(l==="fill")u=i("contours.showlines");if(u!==false){if(l!=="lines")f=i("line.color","#000");i("line.width",.5);i("line.dash")}if(l!=="none"){n(t,r,o,i,{prefix:"",cLetter:"z"})}i("line.smoothing");a(i,o,f,s)}},{"../../components/colorscale/defaults":333,"./label_defaults":552}],556:[function(e,t,r){"use strict";var n=e("gl-contour2d");var a=e("gl-heatmap2d");var i=e("../../plots/cartesian/axes");var o=e("../contour/make_color_map");var s=e("../../lib/str2rgbarray");function l(e,t){this.scene=e;this.uid=t;this.type="contourgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.contourOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],levels:[0],levelColors:[0,0,0,1],lineWidth:1};this.contour=n(e.glplot,this.contourOptions);this.contour._trace=this;this.heatmapOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,0]};this.heatmap=a(e.glplot,this.heatmapOptions);this.heatmap._trace=this}var u=l.prototype;u.handlePick=function(e){var t=this.heatmapOptions,r=t.shape,n=e.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[a],t.y[i],t.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}};u.update=function(e,t){var r=t[0];this.index=e.index;this.name=e.name;this.hoverinfo=e.hoverinfo;var n=r.z,a=n[0].length,o=n.length,s;this.contourOptions.z=f(n,a,o);this.heatmapOptions.z=[].concat.apply([],n);this.contourOptions.shape=this.heatmapOptions.shape=[a,o];this.contourOptions.x=this.heatmapOptions.x=r.x;this.contourOptions.y=this.heatmapOptions.y=r.y;if(e.contours.coloring==="fill"){s=c(e,{fill:true});this.contourOptions.levels=s.levels.slice(1);this.contourOptions.fillColors=s.levelColors;this.contourOptions.levelColors=[].concat.apply([],this.contourOptions.levels.map(function(){return[.25,.25,.25,1]}))}else{s=c(e,{fill:false});this.contourOptions.levels=s.levels;this.contourOptions.levelColors=s.levelColors}this.textLabels=[].concat.apply([],e.text);this.contour.update(this.contourOptions);this.heatmap.update(this.heatmapOptions);i.expand(this.scene.xaxis,r.x);i.expand(this.scene.yaxis,r.y)};u.dispose=function(){this.contour.dispose();this.heatmap.dispose()};function f(e,t,r){var n=new Float32Array(t*r);var a=0;for(var i=0;i<t;i++){for(var o=0;o<r;o++){n[a++]=e[o][i]}}return n}function c(e,t){var r=e.contours,n=r.start,a=r.end,i=r.size||1,l=t.fill;var u=o(e);var f=Math.floor((a-n)/i)+(l?2:1),c=new Array(f),h=new Array(4*f);for(var d=0;d<f;d++){var v=c[d]=n+i*d-(l?i/2:0);var p=s(u(v));for(var g=0;g<4;g++){h[4*d+g]=p[g]}}return{levels:c,levelColors:h}}function h(e,t,r){var n=new l(e,t.uid);n.update(t,r);return n}t.exports=h},{"../../lib/str2rgbarray":468,"../../plots/cartesian/axes":492,"../contour/make_color_map":553,"gl-contour2d":161,"gl-heatmap2d":166}],557:[function(e,t,r){"use strict";var n=e("../../plot_api/edit_types").overrideAll;var a={};a.attributes=n(e("../contour/attributes"),"calc","nested");a.supplyDefaults=e("../contour/defaults");a.colorbar=e("../contour/colorbar");a.calc=e("../contour/calc");a.plot=e("./convert");a.moduleType="trace";a.name="contourgl";a.basePlotModule=e("../../plots/gl2d");a.categories=["gl","gl2d","2dMap"];a.meta={};t.exports=a},{"../../plot_api/edit_types":475,"../../plots/gl2d":523,"../contour/attributes":545,"../contour/calc":546,"../contour/colorbar":547,"../contour/defaults":550,"./convert":556}],558:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../../components/colorscale/attributes");var i=e("../../components/colorbar/attributes");var o=e("../../lib/extend").extendFlat;t.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},n.x,{impliedEdits:{xtype:"array"}}),x0:o({},n.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},n.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},n.y,{impliedEdits:{ytype:"array"}}),y0:o({},n.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},n.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:false,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",false],dflt:false,editType:"calc"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},a("",{cLetter:"z",autoColorDflt:false}),{colorbar:i})},{"../../components/colorbar/attributes":324,"../../components/colorscale/attributes":330,"../../lib/extend":436,"../scatter/attributes":597}],559:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../histogram2d/calc");var s=e("../../components/colorscale/calc");var l=e("./convert_column_xyz");var u=e("./max_row_length");var f=e("./clean_2d_array");var c=e("./interp2d");var h=e("./find_empties");var d=e("./make_bound_array");t.exports=function e(t,r){var v=i.getFromId(t,r.xaxis||"x"),p=i.getFromId(t,r.yaxis||"y"),g=n.traceIs(r,"contour"),m=n.traceIs(r,"histogram"),y=n.traceIs(r,"gl2d"),b=g?"best":r.zsmooth,x,_,w,A,k,T,M,E,C;v._minDtick=0;p._minDtick=0;if(m){C=o(t,r);x=C.x;_=C.x0;w=C.dx;A=C.y;k=C.y0;T=C.dy;M=C.z}else{var S=r.z;if(a.isArray1D(S)){l(r,v,p,"x","y",["z"]);x=r._x;A=r._y;S=r._z}else{x=r.x?v.makeCalcdata(r,"x"):[];A=r.y?p.makeCalcdata(r,"y"):[]}_=r.x0||0;w=r.dx||1;k=r.y0||0;T=r.dy||1;M=f(S,r.transpose);if(g||r.connectgaps){r._emptypoints=h(M);c(M,r._emptypoints)}}function L(e){b=r._input.zsmooth=r.zsmooth=false;a.warn('cannot use zsmooth: "fast": '+e)}if(b==="fast"){if(v.type==="log"||p.type==="log"){L("log axis found")}else if(!m){if(x.length){var O=(x[x.length-1]-x[0])/(x.length-1),I=Math.abs(O/100);for(E=0;E<x.length-1;E++){if(Math.abs(x[E+1]-x[E]-O)>I){L("x scale is not linear");break}}}if(A.length&&b==="fast"){var D=(A[A.length-1]-A[0])/(A.length-1),R=Math.abs(D/100);for(E=0;E<A.length-1;E++){if(Math.abs(A[E+1]-A[E]-D)>R){L("y scale is not linear");break}}}}}var P=u(M);var z=r.xtype==="scaled"?"":x;var F=d(r,z,_,w,P,v);var B=r.ytype==="scaled"?"":A;var N=d(r,B,k,T,M.length,p);if(!y){i.expand(v,F);i.expand(p,N)}var j={x:F,y:N,z:M,text:r._text||r.text};if(z&&z.length===F.length-1)j.xCenter=z;if(B&&B.length===N.length-1)j.yCenter=B;if(m){j.xRanges=C.xRanges;j.yRanges=C.yRanges;j.pts=C.pts}if(!g||r.contours.type!=="constraint"){s(r,M,"","z")}if(g&&r.contours&&r.contours.coloring==="heatmap"){var U={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};j.xfill=d(U,z,_,w,P,v);j.yfill=d(U,B,k,T,M.length,p)}return[j]}},{"../../components/colorscale/calc":331,"../../lib":445,"../../plots/cartesian/axes":492,"../../registry":536,"../histogram2d/calc":578,"./clean_2d_array":560,"./convert_column_xyz":562,"./find_empties":564,"./interp2d":565,"./make_bound_array":566,"./max_row_length":567}],560:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t,r){var a,i,o,s,l,u;function f(e){if(!n(e))return undefined;return+e}if(r){a=0;for(l=0;l<t.length;l++)a=Math.max(a,t[l].length);if(a===0)return false;o=function(e){return e.length};s=function(e,t,r){return e[r][t]}}else{a=t.length;o=function(e,t){return e[t].length};s=function(e,t,r){return e[t][r]}}var c=new Array(a);for(l=0;l<a;l++){i=o(t,l);c[l]=new Array(i);for(u=0;u<i;u++)c[l][u]=f(s(t,l,u))}return c}},{"fast-isnumeric":151}],561:[function(e,t,r){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],562:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../constants/numerical").BADNUM;t.exports=function e(t,r,i,o,s,l){var u=t._length;var f=t[o].slice(0,u);var c=t[s].slice(0,u);var h=t.text;var d=h!==undefined&&n.isArray1D(h);var v=t[o+"calendar"];var p=t[s+"calendar"];var g,m,y,b,x;for(g=0;g<u;g++){f[g]=r.d2c(f[g],0,v);c[g]=i.d2c(c[g],0,p)}var _=n.distinctVals(f),w=_.vals,A=n.distinctVals(c),k=A.vals,T=[];for(g=0;g<l.length;g++){T[g]=n.init2dArray(k.length,w.length)}var M,E,C;if(d)C=n.init2dArray(k.length,w.length);for(g=0;g<u;g++){if(f[g]!==a&&c[g]!==a){M=n.findBin(f[g]+_.minDiff/2,w);E=n.findBin(c[g]+A.minDiff/2,k);for(m=0;m<l.length;m++){x=l[m];y=t[x];b=T[m];b[E][M]=y[g]}if(d)C[E][M]=h[g]}}t["_"+o]=w;t["_"+s]=k;for(m=0;m<l.length;m++){t["_"+l[m]]=T[m]}if(d)t._text=C}},{"../../constants/numerical":424,"../../lib":445}],563:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./xyz_defaults");var i=e("./style_defaults");var o=e("../../components/colorscale/defaults");var s=e("./attributes");t.exports=function e(t,r,l,u){function f(e,a){return n.coerce(t,r,s,e,a)}var c=a(t,r,f,u);if(!c){r.visible=false;return}f("text");i(t,r,f,u);f("connectgaps",n.isArray1D(r.z)&&r.zsmooth!==false);o(t,r,u,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":333,"../../lib":445,"./attributes":558,"./style_defaults":568,"./xyz_defaults":569}],564:[function(e,t,r){"use strict";var n=e("./max_row_length");t.exports=function e(t){var r=[],a={},i=[],o=t[0],s=[],l=[0,0,0],u=n(t),f,c,h,d,v,p,g,m;for(c=0;c<t.length;c++){f=s;s=o;o=t[c+1]||[];for(h=0;h<u;h++){if(s[h]===undefined){p=(s[h-1]!==undefined?1:0)+(s[h+1]!==undefined?1:0)+(f[h]!==undefined?1:0)+(o[h]!==undefined?1:0);if(p){if(c===0)p++;if(h===0)p++;if(c===t.length-1)p++;if(h===s.length-1)p++;if(p<4){a[[c,h]]=[c,h,p]}r.push([c,h,p])}else i.push([c,h])}}}while(i.length){g={};m=false;for(v=i.length-1;v>=0;v--){d=i[v];c=d[0];h=d[1];p=((a[[c-1,h]]||l)[2]+(a[[c+1,h]]||l)[2]+(a[[c,h-1]]||l)[2]+(a[[c,h+1]]||l)[2])/20;if(p){g[d]=[c,h,p];i.splice(v,1);m=true}}if(!m){throw"findEmpties iterated with no new neighbors"}for(d in g){a[d]=g[d];r.push(g[d])}}return r.sort(function(e,t){return t[2]-e[2]})}},{"./max_row_length":567}],565:[function(e,t,r){"use strict";var n=e("../../lib");var a=.01;var i=[[-1,0],[1,0],[0,-1],[0,1]];function o(e){return.5-.25*Math.min(1,e*.5)}t.exports=function e(t,r){var i=1;var l;s(t,r);for(l=0;l<r.length;l++){if(r[l][2]<4)break}r=r.slice(l);for(l=0;l<100&&i>a;l++){i=s(t,r,o(i))}if(i>a){n.log("interp2d didn't converge quickly",i)}return t};function s(e,t,r){var n=0,a,o,s,l,u,f,c,h,d,v,p,g,m;for(l=0;l<t.length;l++){a=t[l];o=a[0];s=a[1];p=e[o][s];v=0;d=0;for(u=0;u<4;u++){f=i[u];c=e[o+f[0]];if(!c)continue;h=c[s+f[1]];if(h!==undefined){if(v===0){g=m=h}else{g=Math.min(g,h);m=Math.max(m,h)}d++;v+=h}}if(d===0){throw"iterateInterp2d order is wrong: no defined neighbors"}e[o][s]=v/d;if(p===undefined){if(d<4)n=1}else{e[o][s]=(1+r)*e[o][s]-r*p;if(m>g){n=Math.max(n,Math.abs(e[o][s]-p)/(m-g))}}}return n}},{"../../lib":445}],566:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,i,o,s,l){var u=[],f=n.traceIs(t,"contour"),c=n.traceIs(t,"histogram"),h=n.traceIs(t,"gl2d"),d,v,p;var g=a(r)&&r.length>1;if(g&&!c&&l.type!=="category"){var m=r.length;if(m<=s){if(f||h)u=r.slice(0,s);else if(s===1){u=[r[0]-.5,r[0]+.5]}else{u=[1.5*r[0]-.5*r[1]];for(p=1;p<m;p++){u.push((r[p-1]+r[p])*.5)}u.push(1.5*r[m-1]-.5*r[m-2])}if(m<s){var y=u[u.length-1],b=y-u[u.length-2];for(p=m;p<s;p++){y+=b;u.push(y)}}}else{return f?r.slice(0,s):r.slice(0,s+1)}}else{v=o||1;var x=t[l._id.charAt(0)+"calendar"];if(c||l.type==="category")d=l.r2c(i,0,x)||0;else if(a(r)&&r.length===1)d=r[0];else if(i===undefined)d=0;else d=l.d2c(i,0,x);for(p=f||h?0:-.5;p<s;p++){u.push(d+v*p)}}return u}},{"../../lib":445,"../../registry":536}],567:[function(e,t,r){"use strict";t.exports=function e(t){var r=0;for(var n=0;n<t.length;n++){r=Math.max(r,t[n].length)}return r}},{}],568:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("zsmooth");if(a===false){n("xgap");n("ygap")}n("zhoverformat")}},{}],569:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../registry");t.exports=function e(t,r,n,l,u,f){var c=n("z");u=u||"x";f=f||"y";var h,d;if(c===undefined||!c.length)return 0;if(a.isArray1D(t.z)){h=n(u);d=n(f);if(!(h&&h.length&&d&&d.length))return 0;r._length=Math.min(h.length,d.length,c.length)}else{h=o(u,n);d=o(f,n);if(!s(c))return 0;n("transpose");r._length=null}var v=i.getComponentMethod("calendars","handleTraceDefaults");v(t,r,[u,f],l);return true};function o(e,t){var r=t(e),n=r?t(e+"type","array"):"scaled";if(n==="scaled"){t(e+"0");t("d"+e)}return r}function s(e){var t=true,r=false,i=false,o;for(var s=0;s<e.length;s++){o=e[s];if(!a.isArrayOrTypedArray(o)){t=false;break}if(o.length>0)r=true;for(var l=0;l<o.length;l++){if(n(o[l])){i=true;break}}}return t&&r&&i}},{"../../lib":445,"../../registry":536,"fast-isnumeric":151}],570:[function(e,t,r){"use strict";var n=e("../heatmap/attributes");var a=e("../../components/colorscale/attributes");var i=e("../../components/colorbar/attributes");var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/edit_types").overrideAll;var l=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"];var u={};for(var f=0;f<l.length;f++){var c=l[f];u[c]=n[c]}o(u,a("",{cLetter:"z",autoColorDflt:false}),{colorbar:i});t.exports=s(u,"calc","nested")},{"../../components/colorbar/attributes":324,"../../components/colorscale/attributes":330,"../../lib/extend":436,"../../plot_api/edit_types":475,"../heatmap/attributes":558}],571:[function(e,t,r){"use strict";var n=e("gl-heatmap2d");var a=e("../../plots/cartesian/axes");var i=e("../../lib/str2rgbarray");function o(e,t){this.scene=e;this.uid=t;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(e.glplot,this.options);this.heatmap._trace=this}var s=o.prototype;s.handlePick=function(e){var t=this.options,r=t.shape,n=e.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[a],t.y[i],t.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}};s.update=function(e,t){var r=t[0];this.index=e.index;this.name=e.name;this.hoverinfo=e.hoverinfo;var n=r.z;this.options.z=[].concat.apply([],n);var i=n[0].length,o=n.length;this.options.shape=[i,o];this.options.x=r.x;this.options.y=r.y;var s=l(e);this.options.colorLevels=s.colorLevels;this.options.colorValues=s.colorValues;this.textLabels=[].concat.apply([],e.text);this.heatmap.update(this.options);a.expand(this.scene.xaxis,r.x);a.expand(this.scene.yaxis,r.y)};s.dispose=function(){this.heatmap.dispose()};function l(e){var t=e.colorscale,r=e.zmin,n=e.zmax;var a=t.length,o=new Array(a),s=new Array(4*a);for(var l=0;l<a;l++){var u=t[l];var f=i(u[1]);o[l]=r+u[0]*(n-r);for(var c=0;c<4;c++){s[4*l+c]=f[c]}}return{colorLevels:o,colorValues:s}}function u(e,t,r){var n=new o(e,t.uid);n.update(t,r);return n}t.exports=u},{"../../lib/str2rgbarray":468,"../../plots/cartesian/axes":492,"gl-heatmap2d":166}],572:[function(e,t,r){"use strict";var n={};n.attributes=e("./attributes");n.supplyDefaults=e("../heatmap/defaults");n.colorbar=e("../heatmap/colorbar");n.calc=e("../heatmap/calc");n.plot=e("./convert");n.moduleType="trace";n.name="heatmapgl";n.basePlotModule=e("../../plots/gl2d");n.categories=["gl","gl2d","2dMap"];n.meta={};t.exports=n},{"../../plots/gl2d":523,"../heatmap/calc":559,"../heatmap/colorbar":561,"../heatmap/defaults":563,"./attributes":570,"./convert":571}],573:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.length,a=0;for(var i=0;i<n;i++){if(r[i]){t[i]/=r[i];a+=t[i]}else t[i]=null}return a}},{}],574:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports={count:function(e,t,r){r[e]++;return 1},sum:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);r[e]+=i;return i}return 0},avg:function(e,t,r,a,i){var o=a[t];if(n(o)){o=Number(o);r[e]+=o;i[e]++}return 0},min:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);if(!n(r[e])){r[e]=i;return i}else if(r[e]>i){var o=i-r[e];r[e]=i;return o}}return 0},max:function(e,t,r,a){var i=a[t];if(n(i)){i=Number(i);if(!n(r[e])){r[e]=i;return i}else if(r[e]<i){var o=i-r[e];r[e]=i;return o}}return 0}}},{"fast-isnumeric":151}],575:[function(e,t,r){"use strict";var n=e("../../constants/numerical");var a=n.ONEAVGYEAR;var i=n.ONEAVGMONTH;var o=n.ONEDAY;var s=n.ONEHOUR;var l=n.ONEMIN;var u=n.ONESEC;var f=e("../../plots/cartesian/axes").tickIncrement;t.exports=function e(t,r,n,i,s){var l=-1.1*r;var u=-.1*r;var h=t-u;var d=n[0];var v=n[1];var p=Math.min(c(d+u,d+h,i,s),c(v+u,v+h,i,s));var g=Math.min(c(d+l,d+u,i,s),c(v+l,v+u,i,s));var m,y;if(p>g&&g<Math.abs(v-d)/4e3){m=p;y=false}else{m=Math.min(p,g);y=true}if(i.type==="date"&&m>o){var b=m===a?1:6;var x=m===a?"M12":"M1";return function(e,r){var n=i.c2d(e,a,s);var o=n.indexOf("-",b);if(o>0)n=n.substr(0,o);var l=i.d2c(n,0,s);if(l<e){var u=f(l,x,false,s);if((l+u)/2<e+t)l=u}if(r&&y){return f(l,x,true,s)}return l}}return function(e,r){var n=m*Math.round(e/m);if(n+m/10<e&&n+m*.9<e+t){n+=m}if(r&&y){n-=m}return n}};function c(e,t,r,n){if(e*t<=0)return Infinity;var a=Math.abs(t-e);var i=r.type==="date";var o=h(a,i);for(var s=0;s<10;s++){var l=h(o*80,i);if(o===l)break;if(d(l,e,t,i,r,n))o=l;else break}return o}function h(e,t){if(t&&e>u){if(e>o){if(e>a*1.1)return a;if(e>i*1.1)return i;return o}if(e>s)return s;if(e>l)return l;return u}return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function d(e,t,r,n,i,s){if(n&&e>o){var l=v(t,i,s);var u=v(r,i,s);var f=e===a?0:1;return l[f]!==u[f]}return Math.floor(r/e)-Math.floor(t/e)>.1}function v(e,t,r){var n=t.c2d(e,a,r).split("-");if(n[0]===""){n.unshift();n[0]="-"+n[0]}return n}},{"../../constants/numerical":424,"../../plots/cartesian/axes":492}],576:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib").cleanDate;var i=e("../../constants/numerical");var o=i.ONEDAY;var s=i.BADNUM;t.exports=function e(t,r,i){var l=r.type,u=i+"bins",f=t[u];if(!f)f=t[u]={};var c=l==="date"?function(e){return e||e===0?a(e,s,f.calendar):null}:function(e){return n(e)?Number(e):null};f.start=c(f.start);f.end=c(f.end);var h=l==="date"?o:1,d=f.size;if(n(d)){f.size=d>0?Number(d):h}else if(typeof d!=="string"){f.size=h}else{var v=d.charAt(0),p=d.substr(1);p=n(p)?Number(p):0;if(p<=0||!(l==="date"&&v==="M"&&p===Math.round(p))){f.size=h}}var g="autobin"+i;if(typeof t[g]!=="boolean"){t[g]=t._fullInput[g]=t._input[g]=!((f.start||f.start===0)&&(f.end||f.end===0))}if(!t[g]){delete t["nbins"+i];delete t._fullInput["nbins"+i]}}},{"../../constants/numerical":424,"../../lib":445,"fast-isnumeric":151}],577:[function(e,t,r){"use strict";t.exports={percent:function(e,t){var r=e.length,n=100/t;for(var a=0;a<r;a++)e[a]*=n},probability:function(e,t){var r=e.length;for(var n=0;n<r;n++)e[n]/=t},density:function(e,t,r,n){var a=e.length;n=n||1;for(var i=0;i<a;i++)e[i]*=r[i]*n},"probability density":function(e,t,r,n){var a=e.length;if(n)t/=n;for(var i=0;i<a;i++)e[i]*=r[i]/t}}},{}],578:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../histogram/bin_functions");var o=e("../histogram/norm_functions");var s=e("../histogram/average");var l=e("../histogram/clean_bins");var u=e("../histogram/bin_label_vals");t.exports=function e(t,r){var l=a.getFromId(t,r.xaxis||"x");var u=r.x?l.makeCalcdata(r,"x"):[];var v=a.getFromId(t,r.yaxis||"y");var p=r.y?v.makeCalcdata(r,"y"):[];var g=r.xcalendar;var m=r.ycalendar;var y=function(e){return l.r2c(e,0,g)};var b=function(e){return v.r2c(e,0,m)};var x=function(e){return l.c2r(e,0,g)};var _=function(e){return v.c2r(e,0,m)};var w,A,k,T;var M=r._length;if(u.length>M)u.splice(M,u.length-M);if(p.length>M)p.splice(M,p.length-M);f(r,"x",u,l,y,x,g);f(r,"y",p,v,b,_,m);var E=[];var C=[];var S=[];var L=typeof r.xbins.size==="string";var O=typeof r.ybins.size==="string";var I=[];var D=[];var R=L?I:r.xbins;var P=O?D:r.ybins;var z=0;var F=[];var B=[];var N=r.histnorm;var j=r.histfunc;var U=N.indexOf("density")!==-1;var V=j==="max"||j==="min";var H=V?null:0;var q=i.count;var G=o[N];var X=false;var W=[];var Y=[];var Z="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";if(Z&&j!=="count"){X=j==="avg";q=i[j]}var J=r.xbins,Q=y(J.start),$=y(J.end)+(Q-a.tickIncrement(Q,J.size,false,g))/1e6;for(w=Q;w<$;w=a.tickIncrement(w,J.size,false,g)){C.push(H);I.push(w);if(X)S.push(0)}I.push(w);var K=C.length;var ee=y(r.xbins.start);var te=(w-ee)/K;var re=x(ee+te/2);J=r.ybins;Q=b(J.start);$=b(J.end)+(Q-a.tickIncrement(Q,J.size,false,m))/1e6;for(w=Q;w<$;w=a.tickIncrement(w,J.size,false,m)){E.push(C.slice());D.push(w);var ne=new Array(K);for(A=0;A<K;A++)ne[A]=[];B.push(ne);if(X)F.push(S.slice())}D.push(w);var ae=E.length;var ie=b(r.ybins.start);var oe=(w-ie)/ae;var se=_(ie+oe/2);if(U){W=c(C.length,R,te,L);Y=c(E.length,P,oe,O)}if(!L&&l.type==="date")R=h(y,R);if(!O&&v.type==="date")P=h(b,P);var le=true;var ue=true;var fe=new Array(K);var ce=new Array(ae);var he=Infinity;var de=Infinity;var ve=Infinity;var pe=Infinity;for(w=0;w<M;w++){var ge=u[w];var me=p[w];k=n.findBin(ge,R);T=n.findBin(me,P);if(k>=0&&k<K&&T>=0&&T<ae){z+=q(k,w,E[T],Z,F[T]);B[T][k].push(w);if(le){if(fe[k]===undefined)fe[k]=ge;else if(fe[k]!==ge)le=false}if(ue){if(ce[k]===undefined)ce[k]=me;else if(ce[k]!==me)ue=false}he=Math.min(he,ge-I[k]);de=Math.min(de,I[k+1]-ge);ve=Math.min(ve,me-D[T]);pe=Math.min(pe,D[T+1]-me)}}if(X){for(T=0;T<ae;T++)z+=s(E[T],F[T])}if(G){for(T=0;T<ae;T++)G(E[T],z,W,Y[T])}return{x:u,xRanges:d(I,le&&fe,he,de,l,g),x0:re,dx:te,y:p,yRanges:d(D,ue&&ce,ve,pe,v,m),y0:se,dy:oe,z:E,pts:B}};function f(e,t,r,n,i,o,s){var u=t+"bins";var f="autobin"+t;var c=e[u];l(e,n,t);if(e[f]||!c||c.start===null||c.end===null){c=a.autoBin(r,n,e["nbins"+t],"2d",s);if(e.type==="histogram2dcontour"){c.start=o(a.tickIncrement(i(c.start),c.size,true,s));c.end=o(a.tickIncrement(i(c.end),c.size,false,s))}e._input[u]=e[u]=c;e._input[f]=e[f]}}function c(e,t,r,n){var a=new Array(e);var i;if(n){for(i=0;i<e;i++)a[i]=1/(t[i+1]-t[i])}else{var o=1/r;for(i=0;i<e;i++)a[i]=o}return a}function h(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function d(e,t,r,n,a,i){var o;var s=e.length-1;var l=new Array(s);if(t){for(o=0;o<s;o++)l[o]=[t[o],t[o]]}else{var f=u(r,n,e,a,i);for(o=0;o<s;o++)l[o]=[f(e[o]),f(e[o+1],true)]}return l}},{"../../lib":445,"../../plots/cartesian/axes":492,"../histogram/average":573,"../histogram/bin_functions":574,"../histogram/bin_label_vals":575,"../histogram/clean_bins":576,"../histogram/norm_functions":577}],579:[function(e,t,r){"use strict";var n=e("../../components/colorscale/attributes");var a=e("../../components/colorbar/attributes");var i=e("../../plots/cartesian/layout_attributes");var o=e("../../plots/font_attributes");var s=e("../../plots/domain").attributes;var l=e("../../lib/extend").extendFlat;var u=e("../../plot_api/plot_template").templatedArray;t.exports={domain:s({name:"parcoords",trace:true,editType:"calc"}),labelfont:o({editType:"calc"}),tickfont:o({editType:"calc"}),rangefont:o({editType:"calc"}),dimensions:u("dimension",{label:{valType:"string",editType:"calc"},tickvals:l({},i.tickvals,{editType:"calc"}),ticktext:l({},i.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:true,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",freeLength:true,dimensions:"1-2",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},multiselect:{valType:"boolean",dflt:true,editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:l(n("line",{colorscaleDflt:"Viridis",autoColorDflt:false,editTypeOverride:"calc"}),{colorbar:a,editType:"calc"})}},{"../../components/colorbar/attributes":324,"../../components/colorscale/attributes":330,"../../lib/extend":436,"../../plot_api/plot_template":482,"../../plots/cartesian/layout_attributes":504,"../../plots/domain":517,"../../plots/font_attributes":518}],580:[function(e,t,r){"use strict";var n=e("./constants");var a=e("d3");var i=e("../../lib/gup").keyFun;var o=e("../../lib/gup").repeat;var s=e("../../lib").sorterAsc;var l=n.bar.snapRatio;function u(e,t){return e*(1-l)+t*l}var f=n.bar.snapClose;function c(e,t){return e*(1-f)+t*f}function h(e,t,r){if(v(t,r))return t;var n=e[0];var a=n;for(var i=1;i<e.length;i++){var o=e[i];if(t<c(n,o))return u(n,a);if(t<o||i===e.length-1)return u(o,n);a=n;n=o}}function d(e,t,r){if(v(t,r))return t;var n=e[e.length-1];var a=n;for(var i=e.length-2;i>=0;i--){var o=e[i];if(t>c(n,o))return u(n,a);if(t>o||i===e.length-1)return u(o,n);a=n;n=o}}function v(e,t){for(var r=0;r<t.length;r++){if(e>=t[r][0]&&e<=t[r][1])return true}return false}function p(e){e.attr("x",-n.bar.captureWidth/2).attr("width",n.bar.captureWidth)}function g(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(e){if(!e.brush.filterSpecified){return"0,"+e.height}var t=y(e.brush.filter.getConsolidated(),e.height);var r=[0];var n,a,i;var o=t.length?t[0][0]:null;for(var s=0;s<t.length;s++){n=t[s];a=n[1]-n[0];r.push(o);r.push(a);i=s+1;if(i<t.length){o=t[i][0]-n[1]}}r.push(e.height);return r}function y(e,t){return e.map(function(e){return e.map(function(e){return e*t}).sort(s)})}function b(e,t){var r=n.bar.handleHeight;if(t>e[1]+r||t<e[0]-r)return;if(t>=.9*e[1]+.1*e[0])return"n";if(t<=.9*e[0]+.1*e[1])return"s";return"ns"}function x(){a.select(document.body).style("cursor",null)}function _(e){e.attr("stroke-dasharray",m)}function w(e,t){var r=a.select(e).selectAll(".highlight, .highlight-shadow");var i=t?r.transition().duration(n.bar.snapDuration).each("end",t):r;_(i)}function A(e,t){var r=e.brush;var n=r.filterSpecified;var a=NaN;var i={};var o;if(n){var s=e.height;var l=r.filter.getConsolidated();var u=y(l,s);var f=NaN;var c=NaN;var h=NaN;for(o=0;o<=u.length;o++){var d=u[o];if(d&&d[0]<=t&&t<=d[1]){f=o;break}else{c=o?o-1:NaN;if(d&&d[0]>t){h=o;break}}}a=f;if(isNaN(a)){if(isNaN(c)||isNaN(h)){a=isNaN(c)?h:c}else{a=t-u[c][1]<u[h][0]-t?c:h}}if(!isNaN(a)){var v=u[a];var p=b(v,t);if(p){i.interval=l[a];i.intervalPix=v;i.region=p}}}if(e.ordinal&&!i.region){var g=e.unitTickvals;var m=e.unitToPaddedPx.invert(t);for(o=0;o<g.length;o++){var x=[g[Math.max(o-1,0)]*.25+g[o]*.75,g[Math.min(o+1,g.length-1)]*.25+g[o]*.75];if(m>=x[0]&&m<=x[1]){i.clickableOrdinalRange=x;break}}}return i}function k(e){e.on("mousemove",function(e){a.event.preventDefault();if(!e.parent.inBrushDrag){var t=e.height-a.mouse(this)[1]-2*n.verticalPadding;var r=A(e,t);var i="crosshair";if(r.clickableOrdinalRange)i="pointer";else if(r.region)i=r.region+"-resize";a.select(document.body).style("cursor",i)}}).on("mouseleave",function(e){if(!e.parent.inBrushDrag)x()}).call(a.behavior.drag().on("dragstart",function(e){a.event.sourceEvent.stopPropagation();var t=e.height-a.mouse(this)[1]-2*n.verticalPadding;var r=e.unitToPaddedPx.invert(t);var i=e.brush;var o=A(e,t);var s=o.interval;var l=i.svgBrush;l.wasDragged=false;l.grabbingBar=o.region==="ns";if(l.grabbingBar){var u=s.map(e.unitToPaddedPx);l.grabPoint=t-u[0]-n.verticalPadding;l.barLength=u[1]-u[0]}l.clickableOrdinalRange=o.clickableOrdinalRange;l.stayingIntervals=e.multiselect&&i.filterSpecified?i.filter.getConsolidated():[];if(s){l.stayingIntervals=l.stayingIntervals.filter(function(e){return e[0]!==s[0]&&e[1]!==s[1]})}l.startExtent=o.region?s[o.region==="s"?1:0]:r;e.parent.inBrushDrag=true;l.brushStartCallback()}).on("drag",function(e){a.event.sourceEvent.stopPropagation();var t=e.height-a.mouse(this)[1]-2*n.verticalPadding;var r=e.brush.svgBrush;r.wasDragged=true;if(r.grabbingBar){r.newExtent=[t-r.grabPoint,t+r.barLength-r.grabPoint].map(e.unitToPaddedPx.invert)}else{r.newExtent=[r.startExtent,e.unitToPaddedPx.invert(t)].sort(s)}var i=Math.max(0,-r.newExtent[0]);var o=Math.max(0,r.newExtent[1]-1);r.newExtent[0]+=i;r.newExtent[1]-=o;if(r.grabbingBar){r.newExtent[1]+=i;r.newExtent[0]-=o}e.brush.filterSpecified=true;r.extent=r.stayingIntervals.concat([r.newExtent]);r.brushCallback(e);w(this.parentNode)}).on("dragend",function(e){var t=a.event;t.sourceEvent.stopPropagation();var r=e.brush;var n=r.filter;var i=r.svgBrush;var o=i.grabbingBar;i.grabbingBar=false;i.grabLocation=undefined;e.parent.inBrushDrag=false;x();if(!i.wasDragged){i.wasDragged=undefined;if(i.clickableOrdinalRange){if(r.filterSpecified&&e.multiselect){i.extent.push(i.clickableOrdinalRange)}else{i.extent=[i.clickableOrdinalRange];r.filterSpecified=true}}else if(o){i.extent=i.stayingIntervals;if(i.extent.length===0){S(r)}}else{S(r)}i.brushCallback(e);w(this.parentNode);i.brushEndCallback(r.filterSpecified?n.getConsolidated():[]);return}var s=function(){n.set(n.getConsolidated())};if(e.ordinal){var l=e.unitTickvals;if(l[l.length-1]<l[0])l.reverse();i.newExtent=[h(l,i.newExtent[0],i.stayingIntervals),d(l,i.newExtent[1],i.stayingIntervals)];var u=i.newExtent[1]>i.newExtent[0];i.extent=i.stayingIntervals.concat(u?[i.newExtent]:[]);if(!i.extent.length){S(r)}i.brushCallback(e);if(u){w(this.parentNode,s)}else{s();w(this.parentNode)}}else{s()}i.brushEndCallback(r.filterSpecified?n.getConsolidated():[])}))}function T(e,t){return e[0]-t[0]}function M(e){var t=e.selectAll(".background").data(o);t.enter().append("rect").classed("background",true).call(p).call(g).style("pointer-events","auto").attr("transform","translate(0 "+n.verticalPadding+")");t.call(k).attr("height",function(e){return e.height-n.verticalPadding});var r=e.selectAll(".highlight-shadow").data(o);r.enter().append("line").classed("highlight-shadow",true).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width+n.bar.strokeWidth).attr("stroke",n.bar.strokeColor).attr("opacity",n.bar.strokeOpacity).attr("stroke-linecap","butt");r.attr("y1",function(e){return e.height}).call(_);var a=e.selectAll(".highlight").data(o);a.enter().append("line").classed("highlight",true).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width-n.bar.strokeWidth).attr("stroke",n.bar.fillColor).attr("opacity",n.bar.fillOpacity).attr("stroke-linecap","butt");a.attr("y1",function(e){return e.height}).call(_)}function E(e){var t=e.selectAll("."+n.cn.axisBrush).data(o,i);t.enter().append("g").classed(n.cn.axisBrush,true);M(t)}function C(e){return e.svgBrush.extent.map(function(e){return e.slice()})}function S(e){e.filterSpecified=false;e.svgBrush.extent=[[0,1]]}function L(e){return function t(r){var n=r.brush;var a=C(n);var i=a.slice();n.filter.set(i);e()}}function O(e){var t=e.slice();var r=[];var n;var a=t.shift();while(a){n=a.slice();while((a=t.shift())&&a[0]<=n[1]){n[1]=Math.max(n[1],a[1])}r.push(n)}return r}function I(){var e=[];var t;var r;return{set:function(n){e=n.map(function(e){return e.slice().sort(s)}).sort(T);t=O(e);r=e.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[Infinity,-Infinity])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function D(e,t,r,n,a,i){var o=I();o.set(r);return{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:n,brushCallback:L(a),brushEndCallback:i}}}function R(e,t){if(Array.isArray(e[0])){e=e.map(function(e){return e.sort(s)});if(!t.multiselect)e=[e[0]];else e=O(e.sort(T))}else e=[e.sort(s)];if(t.tickvals){var r=t.tickvals.slice().sort(s);e=e.map(function(e){var t=[h(r,e[0],[]),d(r,e[1],[])];if(t[1]>t[0])return t}).filter(function(e){return e});if(!e.length)return}return e.length>1?e:e[0]}t.exports={makeBrush:D,ensureAxisBrush:E,cleanRanges:R}},{"../../lib":445,"../../lib/gup":442,"./constants":583,d3:86}],581:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../plots/get_data").getModuleCalcData;var i=e("./plot");var o=e("../../constants/xmlns_namespaces");var s="parcoords";r.name=s;r.plot=function(e){var t=a(e.calcdata,s)[0];if(t.length)i(e,t)};r.clean=function(e,t,r,n){var a=n._has&&n._has(s);var i=t._has&&t._has(s);if(a&&!i){n._paperdiv.selectAll(".parcoords").remove();n._glimages.selectAll("*").remove()}};r.toSVG=function(e){var t=e._fullLayout._glimages;var r=n.select(e).selectAll(".svg-container");var a=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var n=t.append("svg:image");n.attr({xmlns:o.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}a.each(i);window.setTimeout(function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":426,"../../plots/get_data":520,"./plot":589,d3:86}],582:[function(e,t,r){"use strict";var n=e("../../components/colorscale/has_colorscale");var a=e("../../components/colorscale/calc");var i=e("../../lib");var o=e("../../lib/gup").wrap;t.exports=function e(t,r){var l=!!r.line.colorscale&&i.isArrayOrTypedArray(r.line.color);var u=l?r.line.color:s(r._length);var f=l?r.line.colorscale:[[0,r.line.color],[1,r.line.color]];if(n(r,"line")){a(r,u,"line","c")}return o({lineColor:u,cscale:f})};function s(e){var t=new Array(e);for(var r=0;r<e;r++){t[r]=.5}return t}},{"../../components/colorscale/calc":331,"../../components/colorscale/has_colorscale":337,"../../lib":445,"../../lib/gup":442}],583:[function(e,t,r){"use strict";t.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],584:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");var o=e("../../plots/domain").defaults;var s=e("../../plots/array_container_defaults");var l=e("./attributes");var u=e("./axisbrush");var f=e("./constants").maxDimensionCount;var c=e("./merge_length");function h(e,t,r,o,s){var l=s("line.color",r);if(a(e,"line")&&n.isArrayOrTypedArray(l)){if(l.length){s("line.colorscale");i(e,t,o,s,{prefix:"line.",cLetter:"c"});return l.length}else{t.line.color=r}}return Infinity}function d(e,t){function r(r,a){return n.coerce(e,t,l.dimensions,r,a)}var a=r("values");var i=r("visible");if(!(a&&a.length)){i=t.visible=false}if(i){r("label");r("tickvals");r("ticktext");r("tickformat");r("range");r("multiselect");var o=r("constraintrange");if(o){t.constraintrange=u.cleanRanges(o,t)}}}t.exports=function e(t,r,a,i){function u(e,a){return n.coerce(t,r,l,e,a)}var v=t.dimensions;if(Array.isArray(v)&&v.length>f){n.log("parcoords traces support up to "+f+" dimensions at the moment");v.splice(f)}var p=s(t,r,{name:"dimensions",handleItemDefaults:d});var g=h(t,r,a,i,u);o(r,i,u);if(!Array.isArray(p)||!p.length){r.visible=false}c(r,p,"values",g);var m={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};n.coerceFont(u,"labelfont",m);n.coerceFont(u,"tickfont",m);n.coerceFont(u,"rangefont",m)}},{"../../components/colorscale/defaults":333,"../../components/colorscale/has_colorscale":337,"../../lib":445,"../../plots/array_container_defaults":488,"../../plots/domain":517,"./attributes":579,"./axisbrush":580,"./constants":583,"./merge_length":587}],585:[function(e,t,r){"use strict";var n={};n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.calc=e("./calc");n.plot=e("./plot");n.colorbar={container:"line",min:"cmin",max:"cmax"};n.moduleType="trace";n.name="parcoords";n.basePlotModule=e("./base_plot");n.categories=["gl","regl","noOpacity"];n.meta={};t.exports=n},{"./attributes":579,"./base_plot":581,"./calc":582,"./defaults":584,"./plot":589}],586:[function(e,t,r){"use strict";var n=e("glslify");var a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]);var i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec2 xyProjection = vec2(1, 1);\n\nvec4 unit = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depth,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]);var o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    fragColor = vec4(pf.rgb, 1.0);\n}\n"]);var s=n(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]);var l=e("../../lib");var u=1e-6;var f=1e-7;var c=2048;var h=64;var d=2;var v=4;var p=8;var g=h/p;var m=[119,119,119];var y=new Uint8Array(4);var b=new Uint8Array(4);var x={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function _(e){e.read({x:0,y:0,width:1,height:1,data:y})}function w(e,t,r,n,a){var i=e._gl;i.enable(i.SCISSOR_TEST);i.scissor(t,r,n,a);e.clear({color:[0,0,0,0],depth:1})}function A(e,t,r,n,a,i){var o=i.key;function s(l){var u;u=Math.min(n,a-l*n);i.offset=d*l*n;i.count=d*u;if(l===0){window.cancelAnimationFrame(r.currentRafs[o]);delete r.currentRafs[o];w(e,i.scissorX,i.scissorY,i.scissorWidth,i.viewBoxSize[1])}if(r.clearOnly){return}t(i);if(l*n+u<a){r.currentRafs[o]=window.requestAnimationFrame(function(){s(l+1)})}r.drawCompleted=false}if(!r.drawCompleted){_(e);r.drawCompleted=true}s(0)}function k(e){return Math.max(u,Math.min(1-u,e))}function T(e,t,r){var n=[];for(var a=0;a<256;a++){var i=e(a/255);n.push((t?m:i).concat(r))}return n}function M(e,t){return(e>>>8*t)%256/255}function E(e,t,r){var n=t.length;var a=[];for(var i=0;i<e;i++){for(var o=0;o<h;o++){a.push(o<n?t[o].paddedUnitValues[i]:o===h-1?k(r[i]):o>=h-4?M(i,h-2-o):.5)}}return a}function C(e,t,r){var n,a,i;var o=[];for(a=0;a<e;a++){for(i=0;i<d;i++){for(n=0;n<v;n++){o.push(t[a*h+r*v+n]);if(r*v+n===h-1&&i%2===0){o[o.length-1]*=-1}}}}return o}function S(e,t,r){for(var n=0;n<16;n++){e["p"+n.toString(16)](C(t,r,n))}}function L(e){var t={};for(var r=0;r<16;r++){t["p"+r.toString(16)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)})}return t}t.exports=function(e,t){var r=t.context;var n=t.pick;var u=t.regl;var h={currentRafs:{},drawCompleted:true,clearOnly:false};var d;var v;var m;var y;var _=L(u);var k;var M=u.texture(x);O(t);var C=u({profile:false,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:true,func:"less",range:[0,1]},cull:{enable:true,face:"back"},scissor:{enable:true,box:{x:u.prop("scissorX"),y:u.prop("scissorY"),width:u.prop("scissorWidth"),height:u.prop("scissorHeight")}},viewport:{x:u.prop("viewportX"),y:u.prop("viewportY"),width:u.prop("viewportWidth"),height:u.prop("viewportHeight")},dither:false,vert:n?o:r?i:a,frag:s,primitive:"lines",lineWidth:1,attributes:_,uniforms:{resolution:u.prop("resolution"),viewBoxPosition:u.prop("viewBoxPosition"),viewBoxSize:u.prop("viewBoxSize"),dim1A:u.prop("dim1A"),dim2A:u.prop("dim2A"),dim1B:u.prop("dim1B"),dim2B:u.prop("dim2B"),dim1C:u.prop("dim1C"),dim2C:u.prop("dim2C"),dim1D:u.prop("dim1D"),dim2D:u.prop("dim2D"),loA:u.prop("loA"),hiA:u.prop("hiA"),loB:u.prop("loB"),hiB:u.prop("hiB"),loC:u.prop("loC"),hiC:u.prop("hiC"),loD:u.prop("loD"),hiD:u.prop("hiD"),palette:M,mask:u.prop("maskTexture"),maskHeight:u.prop("maskHeight"),colorClamp:u.prop("colorClamp")},offset:u.prop("offset"),count:u.prop("count")});function O(e){d=e.model;v=e.viewModel;m=v.dimensions.slice();y=m[0]?m[0].values.length:0;var t=d.lines;var a=n?t.color.map(function(e,r){return r/t.color.length}):t.color;var i=Math.max(1/255,Math.pow(1/a.length,1/3));var o=E(y,m,a);S(_,y,o);M=u.texture(l.extendFlat({data:T(d.unitToColor,r,Math.round((r?i:1)*255))},x))}var I=[0,1];function D(e){I[0]=e[0];I[1]=e[1]}var R=[];function P(e,t,r,n,a,i,o,s,u,f,c){var h,v,p,g;var m=[e,t];var y=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(h=0;h<2;h++){g=m[h];for(v=0;v<4;v++){for(p=0;p<16;p++){y[h][v][p]=p+16*v===g?1:0}}}var b=d.lines.canvasOverdrag;var x=d.domain;var _=d.canvasWidth;var w=d.canvasHeight;var A=l.extendFlat({key:o,resolution:[_,w],viewBoxPosition:[r+b,n],viewBoxSize:[a,i],i:e,ii:t,dim1A:y[0][0],dim1B:y[0][1],dim1C:y[0][2],dim1D:y[0][3],dim2A:y[1][0],dim2B:y[1][1],dim2C:y[1][2],dim2D:y[1][3],colorClamp:I,scissorX:(s===u?0:r+b)+(d.pad.l-b)+d.layoutWidth*x.x[0],scissorWidth:(s===f?_-r+b:a+.5)+(s===u?r+b:0),scissorY:n+d.pad.b+d.layoutHeight*x.y[0],scissorHeight:i,viewportX:d.pad.l-b+d.layoutWidth*x.x[0],viewportY:d.pad.b+d.layoutHeight*x.y[0],viewportWidth:_,viewportHeight:w},c);return A}function z(){var e,t,r;var n=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(e=0;e<2;e++){for(t=0;t<4;t++){for(r=0;r<16;r++){var a=r+16*t;var i;if(a<m.length){i=m[a].brush.filter.getBounds()[e]}else i=e;n[e][t][r]=i+(2*e-1)*f}}}function o(e,t){var r=c-1;return[Math.max(0,Math.floor(t[0]*r)),Math.min(r,Math.ceil(t[1]*r))]}var s=Array.apply(null,new Array(c*g)).map(function(){return 255});for(var l=0;l<m.length;l++){var h=l%p;var d=(l-h)/p;var v=Math.pow(2,h);var y=m[l];var b=y.brush.filter.get();if(b.length<2)continue;var x=o(y,b[0])[1];for(var _=1;_<b.length;_++){var w=o(y,b[_]);for(var A=x+1;A<w[0];A++){s[A*g+d]&=~v}x=Math.max(x,w[1])}}var T={shape:[g,c],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:s};if(k)k(T);else k=u.texture(T);return{maskTexture:k,maskHeight:c,loA:n[0][0],loB:n[0][1],loC:n[0][2],loD:n[0][3],hiA:n[1][0],hiB:n[1][1],hiC:n[1][2],hiD:n[1][3]}}function F(e,t,n){var a=e.length;var i;var o,s,l=Infinity,f=-Infinity;for(i=0;i<a;i++){if(e[i].dim2.canvasX>f){f=e[i].dim2.canvasX;s=i}if(e[i].dim1.canvasX<l){l=e[i].dim1.canvasX;o=i}}if(a===0){w(u,0,0,d.canvasWidth,d.canvasHeight)}var c=r?{}:z();for(i=0;i<a;i++){var v=e[i];var p=v.dim1;var g=p.crossfilterDimensionIndex;var m=v.canvasX;var b=v.canvasY;var x=v.dim2;var _=x.crossfilterDimensionIndex;var k=v.panelSizeX;var T=v.panelSizeY;var M=m+k;if(t||!R[g]||R[g][0]!==m||R[g][1]!==M){R[g]=[m,M];var E=P(g,_,m,b,k,T,p.crossfilterDimensionIndex,i,o,s,c);h.clearOnly=n;A(u,C,h,t?d.lines.blockLineCount:y,y,E)}}}function B(e,t){u.read({x:e,y:t,width:1,height:1,data:b});return b}function N(e,t,r,n){var a=new Uint8Array(4*r*n);u.read({x:e,y:t,width:r,height:n,data:a});return a}function j(){e.style["pointer-events"]="none";M.destroy();if(k)k.destroy();for(var t in _)_[t].destroy()}return{setColorDomain:D,render:F,readPixel:B,readPixels:N,destroy:j,update:O}}},{"../../lib":445,glslify:200}],587:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){if(!n)n=Infinity;var a,i;for(a=0;a<t.length;a++){i=t[a];if(i.visible)n=Math.min(n,i[r].length)}if(n===Infinity)n=0;e._length=n;for(a=0;a<t.length;a++){i=t[a];if(i.visible)i._length=n}return n}},{}],588:[function(e,t,r){"use strict";var n=e("./lines");var a=e("./constants");var i=e("../../lib");var o=e("d3");var s=e("../../components/drawing");var l=e("../../lib/gup");var u=l.keyFun;var f=l.repeat;var c=l.unwrap;var h=e("./axisbrush");function d(e){return!("visible"in e)||e.visible}function v(e){var t=e.range?e.range[0]:i.aggNums(Math.min,null,e.values,e._length);var r=e.range?e.range[1]:i.aggNums(Math.max,null,e.values,e._length);if(isNaN(t)||!isFinite(t)){t=0}if(isNaN(r)||!isFinite(r)){r=0}if(t===r){if(t===0){t-=1;r+=1}else{t*=.9;r*=1.1}}return[t,r]}function p(e,t){if(t){return function(r,n){var a=t[n];if(a===null||a===undefined)return e(r);return a}}return e}function g(e,t,r,n,a){var i=v(r);if(n){return o.scale.ordinal().domain(n.map(p(o.format(r.tickformat),a))).range(n.map(function(r){var n=(r-i[0])/(i[1]-i[0]);return e-t+n*(2*t-e)}))}return o.scale.linear().domain(i).range([e-t,t])}function m(e,t){return o.scale.linear().range([t,e-t])}function y(e,t){return o.scale.linear().domain(v(e)).range([t,1-t])}function b(e){if(!e.tickvals)return;var t=v(e);return o.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(e){return(e-t[0])/(t[1]-t[0])}))}function x(e){var t=e.map(function(e){return e[0]});var r=e.map(function(e){return o.rgb(e[1])});var n=function(e){return function(t){return t[e]}};var a="rgb".split("").map(function(e){return o.scale.linear().clamp(true).domain(t).range(r.map(n(e)))});return function(e){return a.map(function(t){return t(e)})}}function _(e){return e.dimensions.some(function(e){return e.brush.filterSpecified})}function w(e,t,r){var n=c(t),s=n.trace,l=n.lineColor,u=n.cscale,f=s.line,h=s.domain,p=s.dimensions,g=e.width,m=s.labelfont,y=s.tickfont,b=s.rangefont;var _=i.extendDeepNoArrays({},f,{color:l.map(o.scale.linear().domain(v({values:l,range:[f.cmin,f.cmax],_length:s._length}))),blockLineCount:a.blockLineCount,canvasOverdrag:a.overdrag*a.canvasPixelRatio});var w=Math.floor(g*(h.x[1]-h.x[0]));var A=Math.floor(e.height*(h.y[1]-h.y[0]));var k=e.margin||{l:80,r:80,t:100,b:80};var T=w;var M=A;return{key:r,colCount:p.filter(d).length,dimensions:p,tickDistance:a.tickDistance,unitToColor:x(u),lines:_,labelFont:m,tickFont:y,rangeFont:b,layoutWidth:g,layoutHeight:e.height,domain:h,translateX:h.x[0]*g,translateY:e.height-h.y[1]*e.height,pad:k,canvasWidth:T*a.canvasPixelRatio+2*_.canvasOverdrag,canvasHeight:M*a.canvasPixelRatio,width:T,height:M,canvasPixelRatio:a.canvasPixelRatio}}function A(e,t,r){var n=r.width;var s=r.height;var l=r.dimensions;var u=r.canvasPixelRatio;var f=function(e){return n*e/Math.max(1,r.colCount-1)};var c=a.verticalPadding/s;var v=m(s,a.verticalPadding);var p={key:r.key,xScale:f,model:r,inBrushDrag:false};var x={};p.dimensions=l.filter(d).map(function(n,l){var d=y(n,c);var m=x[n.label];x[n.label]=(m||0)+1;var w=n.label+(m?"__"+m:"");var A=n.constraintrange;var k=A&&A.length;if(k&&!Array.isArray(A[0])){A=[A]}var T=k?A.map(function(e){return e.map(d)}):[[0,1]];var M=function(){var t=p;t.focusLayer&&t.focusLayer.render(t.panels,true);var r=_(t);if(!e.contextShown()&&r){t.contextLayer&&t.contextLayer.render(t.panels,true);e.contextShown(true)}else if(e.contextShown()&&!r){t.contextLayer&&t.contextLayer.render(t.panels,true,true);e.contextShown(false)}};var E=n.values;if(E.length>n._length){E=E.slice(0,n._length)}var C=n.tickvals;var S;function L(e,t){return{val:e,text:S[t]}}function O(e,t){return e.val-t.val}if(Array.isArray(C)&&C.length){S=n.ticktext;if(!Array.isArray(S)||!S.length){S=C.map(o.format(n.tickformat))}else if(S.length>C.length){S=S.slice(0,C.length)}else if(C.length>S.length){C=C.slice(0,S.length)}for(var I=1;I<C.length;I++){if(C[I]<C[I-1]){var D=C.map(L).sort(O);for(var R=0;R<C.length;R++){C[R]=D[R].val;S[R]=D[R].text}break}}}else C=undefined;return{key:w,label:n.label,tickFormat:n.tickformat,tickvals:C,ticktext:S,ordinal:!!C,multiselect:n.multiselect,xIndex:l,crossfilterDimensionIndex:l,visibleIndex:n._index,height:s,values:E,paddedUnitValues:E.map(d),unitTickvals:C&&C.map(d),xScale:f,x:f(l),canvasX:f(l)*u,unitToPaddedPx:v,domainScale:g(s,a.verticalPadding,n,C,S),ordinalScale:b(n),parent:p,model:r,brush:h.makeBrush(e,k,T,function(){e.linePickActive(false)},M,function(r){var a=p;a.focusLayer.render(a.panels,true);a.pickLayer&&a.pickLayer.render(a.panels,true);e.linePickActive(true);if(t&&t.filterChanged){var o=d.invert;var s=r.map(function(e){return e.map(o).sort(i.sorterAsc)}).sort(function(e,t){return e[0]-t[0]});t.filterChanged(a.key,n._index,s)}})}});return p}function k(e){e.classed(a.cn.axisExtentText,true).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function T(){var e=true;var t=false;return{linePickActive:function(t){return arguments.length?e=!!t:e},contextShown:function(e){return arguments.length?t=!!e:t}}}t.exports=function(e,t,r,l,d,v){var p=T();var g=l.filter(function(e){return c(e).trace.visible}).map(w.bind(0,d)).map(A.bind(0,p,v));r.each(function(e,t){return i.extendFlat(e,g[t])});var m=r.selectAll(".gl-canvas").each(function(e){e.viewModel=g[0];e.model=e.viewModel?e.viewModel.model:null});var y=null;var b=m.filter(function(e){return e.pick});b.style("pointer-events","auto").on("mousemove",function(e){if(p.linePickActive()&&e.lineLayer&&v&&v.hover){var t=o.event;var r=this.width;var n=this.height;var a=o.mouse(this);var i=a[0];var s=a[1];if(i<0||s<0||i>=r||s>=n){return}var l=e.lineLayer.readPixel(i,n-1-s);var u=l[3]!==0;var f=u?l[2]+256*(l[1]+256*l[0]):null;var c={x:i,y:s,clientX:t.clientX,clientY:t.clientY,dataIndex:e.model.key,curveNumber:f};if(f!==y){if(u){v.hover(c)}else if(v.unhover){v.unhover(c)}y=f}}});m.style("opacity",function(e){return e.pick?.01:1});t.style("background","rgba(255, 255, 255, 0)");var x=t.selectAll("."+a.cn.parcoords).data(g,u);x.exit().remove();x.enter().append("g").classed(a.cn.parcoords,true).style("shape-rendering","crispEdges").style("pointer-events","none");x.attr("transform",function(e){return"translate("+e.model.translateX+","+e.model.translateY+")"});var M=x.selectAll("."+a.cn.parcoordsControlView).data(f,u);M.enter().append("g").classed(a.cn.parcoordsControlView,true);M.attr("transform",function(e){return"translate("+e.model.pad.l+","+e.model.pad.t+")"});var E=M.selectAll("."+a.cn.yAxis).data(function(e){return e.dimensions},u);function C(e,t){var r=t.panels||(t.panels=[]);var n=e.data();var a=n.length-1;for(var i=0;i<a;i++){var o=r[i]||(r[i]={});var s=n[i];var l=n[i+1];o.dim1=s;o.dim2=l;o.canvasX=s.canvasX;o.panelSizeX=l.canvasX-s.canvasX;o.panelSizeY=t.model.canvasHeight;o.y=0;o.canvasY=0}}E.enter().append("g").classed(a.cn.yAxis,true);M.each(function(e){C(E,e)});m.each(function(e){if(e.viewModel){if(e.lineLayer)e.lineLayer.update(e);else e.lineLayer=n(this,e);e.viewModel[e.key]=e.lineLayer;e.lineLayer.render(e.viewModel.panels,!e.context)}});E.attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"});E.call(o.behavior.drag().origin(function(e){return e}).on("drag",function(e){var t=e.parent;p.linePickActive(false);e.x=Math.max(-a.overdrag,Math.min(e.model.width+a.overdrag,o.event.x));e.canvasX=e.x*e.model.canvasPixelRatio;E.sort(function(e,t){return e.x-t.x}).each(function(t,r){t.xIndex=r;t.x=e===t?t.x:t.xScale(t.xIndex);t.canvasX=t.x*t.model.canvasPixelRatio});C(E,t);E.filter(function(t){return Math.abs(e.xIndex-t.xIndex)!==0}).attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"});o.select(this).attr("transform","translate("+e.x+", 0)");E.each(function(r,n,a){if(a===e.parent.key)t.dimensions[n]=r});t.contextLayer&&t.contextLayer.render(t.panels,false,!_(t));t.focusLayer.render&&t.focusLayer.render(t.panels)}).on("dragend",function(e){var t=e.parent;e.x=e.xScale(e.xIndex);e.canvasX=e.x*e.model.canvasPixelRatio;C(E,t);o.select(this).attr("transform",function(e){return"translate("+e.x+", 0)"});t.contextLayer&&t.contextLayer.render(t.panels,false,!_(t));t.focusLayer&&t.focusLayer.render(t.panels);t.pickLayer&&t.pickLayer.render(t.panels,true);p.linePickActive(true);if(v&&v.axesMoved){v.axesMoved(t.key,t.dimensions.map(function(e){return e.crossfilterDimensionIndex}))}}));E.exit().remove();var S=E.selectAll("."+a.cn.axisOverlays).data(f,u);S.enter().append("g").classed(a.cn.axisOverlays,true);S.selectAll("."+a.cn.axis).remove();var L=S.selectAll("."+a.cn.axis).data(f,u);L.enter().append("g").classed(a.cn.axis,true);L.each(function(e){var t=e.model.height/e.model.tickDistance;var r=e.domainScale;var n=r.domain();o.select(this).call(o.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(t,e.tickFormat).tickValues(e.ordinal?n:null).tickFormat(e.ordinal?function(e){return e}:null).scale(r));s.font(L.selectAll("text"),e.model.tickFont)});L.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");L.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var O=S.selectAll("."+a.cn.axisHeading).data(f,u);O.enter().append("g").classed(a.cn.axisHeading,true);var I=O.selectAll("."+a.cn.axisTitle).data(f,u);I.enter().append("text").classed(a.cn.axisTitle,true).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto");I.attr("transform","translate(0,"+-a.axisTitleOffset+")").text(function(e){return e.label}).each(function(e){s.font(o.select(this),e.model.labelFont)});var D=S.selectAll("."+a.cn.axisExtent).data(f,u);D.enter().append("g").classed(a.cn.axisExtent,true);var R=D.selectAll("."+a.cn.axisExtentTop).data(f,u);R.enter().append("g").classed(a.cn.axisExtentTop,true);R.attr("transform","translate("+0+","+-a.axisExtentOffset+")");var P=R.selectAll("."+a.cn.axisExtentTopText).data(f,u);function z(e,t){if(e.ordinal)return"";var r=e.domainScale.domain();return o.format(e.tickFormat)(r[t?r.length-1:0])}P.enter().append("text").classed(a.cn.axisExtentTopText,true).call(k);P.text(function(e){return z(e,true)}).each(function(e){s.font(o.select(this),e.model.rangeFont)});var F=D.selectAll("."+a.cn.axisExtentBottom).data(f,u);F.enter().append("g").classed(a.cn.axisExtentBottom,true);F.attr("transform",function(e){return"translate("+0+","+(e.model.height+a.axisExtentOffset)+")"});var B=F.selectAll("."+a.cn.axisExtentBottomText).data(f,u);B.enter().append("text").classed(a.cn.axisExtentBottomText,true).attr("dy","0.75em").call(k);B.text(function(e){return z(e)}).each(function(e){s.font(o.select(this),e.model.rangeFont)});h.ensureAxisBrush(S)}},{"../../components/drawing":348,"../../lib":445,"../../lib/gup":442,"./axisbrush":580,"./constants":583,"./lines":586,d3:86}],589:[function(e,t,r){"use strict";var n=e("./parcoords");var a=e("../../lib/prepare_regl");t.exports=function e(t,r){var i=t._fullLayout;var o=i._toppaper;var s=i._paperdiv;var l=i._glcontainer;var u=a(t);if(!u)return;var f={};var c={};var h=i._size;r.forEach(function(e,r){f[r]=t.data[r].dimensions;c[r]=t.data[r].dimensions.slice()});var d=function(e,r,n){var a=c[e][r];var i=n.map(function(e){return e.slice()});if(!i.length){delete a.constraintrange;i=null}else{if(i.length===1)i=i[0];a.constraintrange=i;i=[i]}var o={};var s="dimensions["+r+"].constraintrange";o[s]=i;t.emit("plotly_restyle",[o,[e]])};var v=function(e){t.emit("plotly_hover",e)};var p=function(e){t.emit("plotly_unhover",e)};var g=function(e,r){function n(e){return!("visible"in e)||e.visible}function a(e,t,r){var n=t.indexOf(r);var a=e.indexOf(n);if(a===-1){a+=t.length}return a}function i(e){return function t(n,i){var o=a(r,e,n);var s=a(r,e,i);return o-s}}var o=i(c[e].filter(n));f[e].sort(o);c[e].filter(function(e){return!n(e)}).sort(function(t){return c[e].indexOf(t)}).forEach(function(t){f[e].splice(f[e].indexOf(t),1);f[e].splice(c[e].indexOf(t),0,t)});t.emit("plotly_restyle")};n(s,o,l,r,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{filterChanged:d,hover:v,unhover:p,axesMoved:g})}},{"../../lib/prepare_regl":458,"./parcoords":588}],590:[function(e,t,r){"use strict";var n=e("../../lib");r.formatPiePercent=function e(t,r){var a=(t*100).toPrecision(3);if(a.lastIndexOf(".")!==-1){a=a.replace(/[.]?0+$/,"")}return n.numSeparate(a,r)+"%"};r.formatPieValue=function e(t,r){var a=t.toPrecision(10);if(a.lastIndexOf(".")!==-1){a=a.replace(/[.]?0+$/,"")}return n.numSeparate(a,r)};r.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var n=0;n<r.length;n++){var a=t[r[n]];if(a||a===0)return a}};r.castOption=function e(t,n){if(Array.isArray(t))return r.getFirstFilled(t,n);else if(t)return t}},{"../../lib":445}],591:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("./helpers").castOption;t.exports=function e(t,r,i){var o=i.marker.line;var s=a(o.color,r.pts)||n.defaultLine;var l=a(o.width,r.pts)||0;t.style({"stroke-width":l}).call(n.fill,r.color).call(n.stroke,s)}},{"../../components/color":323,"./helpers":590}],592:[function(e,t,r){"use strict";var n=e("../scatter/attributes");t.exports={x:n.x,y:n.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:n.text,marker:{color:{valType:"color",arrayOk:false,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:false,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:false,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}}},{"../scatter/attributes":597}],593:[function(e,t,r){"use strict";var n=e("gl-pointcloud2d");var a=e("../../lib/str2rgbarray");var i=e("../../plots/cartesian/autorange").expand;var o=e("../scatter/get_trace_color");function s(e,t){this.scene=e;this.uid=t;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(e.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var l=s.prototype;l.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};l.update=function(e){this.index=e.index;this.textLabels=e.text;this.name=e.name;this.hoverinfo=e.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(e);this.color=o(e,{})};l.updateFast=function(e){var t=this.xData=this.pickXData=e.x;var r=this.yData=this.pickYData=e.y;var n=this.pickXYData=e.xy;var i=e.xbounds&&e.ybounds;var o=e.indices;var s,l,u,f=this.bounds;var c,h,d;if(n){u=n;s=n.length>>>1;if(i){f[0]=e.xbounds[0];f[2]=e.xbounds[1];f[1]=e.ybounds[0];f[3]=e.ybounds[1]}else{for(d=0;d<s;d++){c=u[d*2];h=u[d*2+1];if(c<f[0])f[0]=c;if(c>f[2])f[2]=c;if(h<f[1])f[1]=h;if(h>f[3])f[3]=h}}if(o){l=o}else{l=new Int32Array(s);for(d=0;d<s;d++){l[d]=d}}}else{s=t.length;u=new Float32Array(2*s);l=new Int32Array(s);for(d=0;d<s;d++){c=t[d];h=r[d];l[d]=d;u[d*2]=c;u[d*2+1]=h;if(c<f[0])f[0]=c;if(c>f[2])f[2]=c;if(h<f[1])f[1]=h;if(h>f[3])f[3]=h}}this.idToIndex=l;this.pointcloudOptions.idToIndex=l;this.pointcloudOptions.positions=u;var v=a(e.marker.color),p=a(e.marker.border.color),g=e.opacity*e.marker.opacity;v[3]*=g;this.pointcloudOptions.color=v;var m=e.marker.blend;if(m===null){var y=100;m=t.length<y||r.length<y}this.pointcloudOptions.blend=m;p[3]*=g;this.pointcloudOptions.borderColor=p;var b=e.marker.sizemin;var x=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=b;this.pointcloudOptions.sizeMax=x;this.pointcloudOptions.areaRatio=e.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);this.expandAxesFast(f,x/2)};l.expandAxesFast=function(e,t){var r=t||.5;i(this.scene.xaxis,[e[0],e[2]],{ppad:r});i(this.scene.yaxis,[e[1],e[3]],{ppad:r})};l.dispose=function(){this.pointcloud.dispose()};function u(e,t){var r=new s(e,t.uid);r.update(t);return r}t.exports=u},{"../../lib/str2rgbarray":468,"../../plots/cartesian/autorange":491,"../scatter/get_trace_color":606,"gl-pointcloud2d":178}],594:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");t.exports=function e(t,r,i){function o(e,i){return n.coerce(t,r,a,e,i)}o("x");o("y");o("xbounds");o("ybounds");if(t.xy&&t.xy instanceof Float32Array){r.xy=t.xy}if(t.indices&&t.indices instanceof Int32Array){r.indices=t.indices}o("text");o("marker.color",i);o("marker.opacity");o("marker.blend");o("marker.sizemin");o("marker.sizemax");o("marker.border.color",i);o("marker.border.arearatio");r._length=null}},{"../../lib":445,"./attributes":592}],595:[function(e,t,r){"use strict";var n={};n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.calc=e("../scatter3d/calc");n.plot=e("./convert");n.moduleType="trace";n.name="pointcloud";n.basePlotModule=e("../../plots/gl2d");n.categories=["gl","gl2d","showLegend"];n.meta={};t.exports=n},{"../../plots/gl2d":523,"../scatter3d/calc":622,"./attributes":592,"./convert":593,"./defaults":594}],596:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;n.mergeArray(r.text,t,"tx");n.mergeArray(r.hovertext,t,"htx");n.mergeArray(r.customdata,t,"data");n.mergeArray(r.textposition,t,"tp");if(r.textfont){n.mergeArray(r.textfont.size,t,"ts");n.mergeArray(r.textfont.color,t,"tc");n.mergeArray(r.textfont.family,t,"tf")}var i=r.marker;if(i){n.mergeArray(i.size,t,"ms");n.mergeArray(i.opacity,t,"mo");n.mergeArray(i.symbol,t,"mx");n.mergeArray(i.color,t,"mc");var o=i.line;if(i.line){n.mergeArray(o.color,t,"mlc");n.mergeArray(o.width,t,"mlw")}var s=i.gradient;if(s&&s.type!=="none"){n.mergeArray(s.type,t,"mgt");n.mergeArray(s.color,t,"mgc")}}}},{"../../lib":445}],597:[function(e,t,r){"use strict";var n=e("../../components/colorscale/attributes");var a=e("../../components/colorbar/attributes");var i=e("../../plots/font_attributes");var o=e("../../components/drawing/attributes").dash;var s=e("../../components/drawing");var l=e("./constants");var u=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:u({symbol:{valType:"enumerated",values:s.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:a,line:u({width:{valType:"number",min:0,arrayOk:true,editType:"style"},editType:"calc"},n("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},n("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:i({editType:"calc",colorEditType:"style",arrayOk:true}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":324,"../../components/colorscale/attributes":330,"../../components/drawing":348,"../../components/drawing/attributes":347,"../../lib/extend":436,"../../plots/font_attributes":518,"./constants":602}],598:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib").isArrayOrTypedArray;var i=e("../../plots/cartesian/axes");var o=e("../../constants/numerical").BADNUM;var s=e("./subtypes");var l=e("./colorscale_calc");var u=e("./arrays_to_calcdata");var f=e("./calc_selection");function c(e,t){var r=i.getFromId(e,t.xaxis||"x");var a=i.getFromId(e,t.yaxis||"y");var s=r.makeCalcdata(t,"x");var c=a.makeCalcdata(t,"y");var v=t._length;var p=new Array(v);var g=d(t,v);h(e,t,r,a,s,c,g);for(var m=0;m<v;m++){p[m]=n(s[m])&&n(c[m])?{x:s[m],y:c[m]}:{x:o,y:o};if(t.ids){p[m].id=String(t.ids[m])}}u(p,t);l(t);f(p,t);e.firstscatter=false;return p}function h(e,t,r,n,a,o,l){var u=t._length;r._minDtick=0;n._minDtick=0;var f={padded:true};var c={padded:true};if(l){f.ppad=c.ppad=l}if((t.fill==="tozerox"||t.fill==="tonextx"&&e.firstscatter)&&(a[0]!==a[u-1]||o[0]!==o[u-1])){f.tozero=true}else if(!(t.error_y||{}).visible&&(["tonexty","tozeroy"].indexOf(t.fill)!==-1||!s.hasMarkers(t)&&!s.hasText(t))){f.padded=false;f.ppad=0}if((t.fill==="tozeroy"||t.fill==="tonexty"&&e.firstscatter)&&(a[0]!==a[u-1]||o[0]!==o[u-1])){c.tozero=true}else if(["tonextx","tozerox"].indexOf(t.fill)!==-1){c.padded=false}i.expand(r,a,f);i.expand(n,o,c)}function d(e,t){if(!s.hasMarkers(e))return;var r=e.marker;var n=1.6*(e.marker.sizeref||1);var o;if(e.marker.sizemode==="area"){o=function(e){return Math.max(Math.sqrt((e||0)/n),3)}}else{o=function(e){return Math.max((e||0)/n,3)}}if(a(r.size)){var l={type:"linear"};i.setConvert(l);var u=l.makeCalcdata(e.marker,"size");var f=new Array(t);for(var c=0;c<t;c++){f[c]=o(u[c])}return f}else{return o(r.size)}}t.exports={calc:c,calcMarkerSize:d,calcAxisExpansion:h}},{"../../constants/numerical":424,"../../lib":445,"../../plots/cartesian/axes":492,"./arrays_to_calcdata":596,"./calc_selection":599,"./colorscale_calc":601,"./subtypes":619,"fast-isnumeric":151}],599:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(t,r)}}},{"../../lib":445}],600:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var n=t[r];if(n.type!=="scatter")continue;var a=n.fill;if(a==="none"||a==="toself")continue;n.opacity=undefined;if(a==="tonexty"||a==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=undefined;break}}}}}},{}],601:[function(e,t,r){"use strict";var n=e("../../components/colorscale/has_colorscale");var a=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t){if(i.hasLines(t)&&n(t,"line")){a(t,t.line.color,"line","c")}if(i.hasMarkers(t)){if(n(t,"marker")){a(t,t.marker.color,"marker","c")}if(n(t,"marker.line")){a(t,t.marker.line.color,"marker.line","c")}}}},{"../../components/colorscale/calc":331,"../../components/colorscale/has_colorscale":337,"./subtypes":619}],602:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],603:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=e("./attributes");var o=e("./constants");var s=e("./subtypes");var l=e("./xy_defaults");var u=e("./marker_defaults");var f=e("./line_defaults");var c=e("./line_shape_defaults");var h=e("./text_defaults");var d=e("./fillcolor_defaults");t.exports=function e(t,r,v,p){function g(e,a){return n.coerce(t,r,i,e,a)}var m=l(t,r,p,g),y=m<o.PTS_LINESONLY?"lines+markers":"lines";if(!m){r.visible=false;return}g("text");g("hovertext");g("mode",y);if(s.hasLines(r)){f(t,r,v,p,g);c(t,r,g);g("connectgaps");g("line.simplify")}if(s.hasMarkers(r)){u(t,r,v,p,g,{gradient:true})}if(s.hasText(r)){h(t,r,p,g)}var b=[];if(s.hasMarkers(r)||s.hasText(r)){g("cliponaxis");g("marker.maxdisplayed");b.push("points")}g("fill");if(r.fill!=="none"){d(t,r,v,g);if(!s.hasLines(r))c(t,r,g)}if(r.fill==="tonext"||r.fill==="toself"){b.push("fills")}g("hoveron",b.join("+")||"points");var x=a.getComponentMethod("errorbars","supplyDefaults");x(t,r,v,{axis:"y"});x(t,r,v,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,g)}},{"../../lib":445,"../../registry":536,"./attributes":597,"./constants":602,"./fillcolor_defaults":605,"./line_defaults":609,"./line_shape_defaults":611,"./marker_defaults":615,"./subtypes":619,"./text_defaults":620,"./xy_defaults":621}],604:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r,i){var o=Array.isArray(i)?function(e){i.push(e)}:function(e){i.text=e};var s=n.extractOption(t,r,"htx","hovertext");if(a(s))return o(s);var l=n.extractOption(t,r,"tx","text");if(a(l))return o(l)};function a(e){return e||e===0}},{"../../lib":445}],605:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,i,o){var s=false;if(r.marker){var l=r.marker.color,u=(r.marker.line||{}).color;if(l&&!a(l)){s=l}else if(u&&!a(u)){s=u}}o("fillcolor",n.addOpacity((r.line||{}).color||s||i,.5))}},{"../../components/color":323,"../../lib":445}],606:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("./subtypes");t.exports=function e(t,r){var i,o;if(t.mode==="lines"){i=t.line.color;return i&&n.opacity(i)?i:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var s=r.mcc||(t.marker||{}).color,l=r.mlcc||((t.marker||{}).line||{}).color;o=s&&n.opacity(s)?s:l&&n.opacity(l)&&(r.mlw||((t.marker||{}).line||{}).width)?l:"";if(o){if(n.opacity(o)<.3){return n.addOpacity(o,.3)}else return o}else{i=(t.line||{}).color;return i&&n.opacity(i)&&a.hasLines(t)&&t.line.width?i:t.fillcolor}}}},{"../../components/color":323,"./subtypes":619}],607:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../components/fx");var i=e("../../registry");var o=e("./get_trace_color");var s=e("../../components/color");var l=e("./fill_hover_text");t.exports=function e(t,r,u,f){var c=t.cd;var h=c[0].trace;var d=t.xa;var v=t.ya;var p=d.c2p(r);var g=v.c2p(u);var m=[p,g];var y=h.hoveron||"";var b=h.mode.indexOf("markers")!==-1?3:.5;if(y.indexOf("points")!==-1){var x=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(d.c2p(e.x)-p);var a=n<t?r*n/t:n-t+r;return a};var _=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(v.c2p(e.y)-g);return n<t?r*n/t:n-t+r};var w=function(e){var t=Math.max(b,e.mrc||0);var r=d.c2p(e.x)-p;var n=v.c2p(e.y)-g;return Math.max(Math.sqrt(r*r+n*n)-t,1-b/t)};var A=a.getDistanceFunction(f,x,_,w);a.getClosest(c,A,t);if(t.index!==false){var k=c[t.index];var T=d.c2p(k.x,true);var M=v.c2p(k.y,true);var E=k.mrc||1;n.extendFlat(t,{color:o(h,k),x0:T-E,x1:T+E,xLabelVal:k.x,y0:M-E,y1:M+E,yLabelVal:k.y,spikeDistance:w(k)});l(k,h,t);i.getComponentMethod("errorbars","hoverInfo")(k,h,t);return[t]}}if(y.indexOf("fills")!==-1&&h._polygons){var C=h._polygons;var S=[];var L=false;var O=Infinity;var I=-Infinity;var D=Infinity;var R=-Infinity;var P,z,F,B,N,j,U,V,H;for(P=0;P<C.length;P++){F=C[P];if(F.contains(m)){L=!L;S.push(F);D=Math.min(D,F.ymin);R=Math.max(R,F.ymax)}}if(L){D=Math.max(D,0);R=Math.min(R,v._length);var q=(D+R)/2;for(P=0;P<S.length;P++){B=S[P].pts;for(z=1;z<B.length;z++){V=B[z-1][1];H=B[z][1];if(V>q!==H>=q){j=B[z-1][0];U=B[z][0];if(H-V){N=j+(U-j)*(q-V)/(H-V);O=Math.min(O,N);I=Math.max(I,N)}}}}O=Math.max(O,0);I=Math.min(I,d._length);var G=s.defaultLine;if(s.opacity(h.fillcolor))G=h.fillcolor;else if(s.opacity((h.line||{}).color)){G=h.line.color}n.extendFlat(t,{distance:t.maxHoverDistance,x0:O,x1:I,y0:q,y1:q,color:G});delete t.index;if(h.text&&!Array.isArray(h.text)){t.text=String(h.text)}else t.text=h.name;return[t]}}}},{"../../components/color":323,"../../components/fx":365,"../../lib":445,"../../registry":536,"./fill_hover_text":604,"./get_trace_color":606}],608:[function(e,t,r){"use strict";var n={};var a=e("./subtypes");n.hasLines=a.hasLines;n.hasMarkers=a.hasMarkers;n.hasText=a.hasText;n.isBubble=a.isBubble;n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.cleanData=e("./clean_data");n.calc=e("./calc").calc;n.arraysToCalcdata=e("./arrays_to_calcdata");n.plot=e("./plot");n.colorbar=e("./marker_colorbar");n.style=e("./style").style;n.styleOnSelect=e("./style").styleOnSelect;n.hoverPoints=e("./hover");n.selectPoints=e("./select");n.animatable=true;n.moduleType="trace";n.name="scatter";n.basePlotModule=e("../../plots/cartesian");n.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"];n.meta={};t.exports=n},{"../../plots/cartesian":503,"./arrays_to_calcdata":596,"./attributes":597,"./calc":598,"./clean_data":600,"./defaults":603,"./hover":607,"./marker_colorbar":614,"./plot":616,"./select":617,"./style":618,"./subtypes":619}],609:[function(e,t,r){"use strict";var n=e("../../lib").isArrayOrTypedArray;var a=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");t.exports=function e(t,r,o,s,l,u){var f=(t.marker||{}).color;l("line.color",o);if(a(t,"line")){i(t,r,s,l,{prefix:"line.",cLetter:"c"})}else{var c=(n(f)?false:f)||o;l("line.color",c)}l("line.width");if(!(u||{}).noDash)l("line.dash")}},{"../../components/colorscale/defaults":333,"../../components/colorscale/has_colorscale":337,"../../lib":445}],610:[function(e,t,r){"use strict";var n=e("../../constants/numerical").BADNUM;var a=e("../../lib");var i=a.segmentsIntersect;var o=a.constrain;var s=e("./constants");t.exports=function e(t,r){var l=r.xaxis;var u=r.yaxis;var f=r.simplify;var c=r.connectGaps;var h=r.baseTolerance;var d=r.shape;var v=d==="linear";var p=[];var g=s.minTolerance;var m=new Array(t.length);var y=0;var b;var x,_,w,A;var k;var T;var M;var E;var C,S,L,O;var I,D,R;if(!f){h=g=-1}function P(e){var r=t[e];if(!r)return false;var a=l.c2p(r.x);var i=u.c2p(r.y);if(a===n||i===n)return r.intoCenter||false;return[a,i]}function z(e,t,r,n){var a=r-e;var i=n-t;var o=.5-e;var s=.5-t;var l=a*a+i*i;var u=a*o+i*s;if(u>0&&u<l){var f=o*i-s*a;if(f*f<l)return true}}var F,B;function N(e,t){var r=e[0]/l._length;var n=e[1]/u._length;var a=Math.max(0,-r,r-1,-n,n-1);if(a&&F!==undefined&&z(r,n,F,B)){a=0}if(a&&t&&z(r,n,t[0]/l._length,t[1]/u._length)){a=0}return(1+s.toleranceGrowth*a)*h}function j(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var U=s.maxScreensAway;var V=-l._length*U;var H=l._length*(1+U);var q=-u._length*U;var G=u._length*(1+U);var X=[[V,q,H,q],[H,q,H,G],[H,G,V,G],[V,G,V,q]];var W,Y,Z,J,Q,$;function K(e,t){var r=[];var n=0;for(var a=0;a<4;a++){var o=X[a];var s=i(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);if(s&&(!n||Math.abs(s.x-r[0][0])>1||Math.abs(s.y-r[0][1])>1)){s=[s.x,s.y];if(n&&j(s,e)<j(r[0],e))r.unshift(s);else r.push(s);n++}}return r}function ee(e){if(e[0]<V||e[0]>H||e[1]<q||e[1]>G){return[o(e[0],V,H),o(e[1],q,G)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===V||e[0]===H))return true;if(e[1]===t[1]&&(e[1]===q||e[1]===G))return true}function re(e,t){var r=[];var n=ee(e);var a=ee(t);if(n&&a&&te(n,a))return r;if(n)r.push(n);if(a)r.push(a);return r}function ne(e,t,r){return function(n,i){var o=ee(n);var s=ee(i);var l=[];if(o&&s&&te(o,s))return l;if(o)l.push(o);if(s)l.push(s);var u=2*a.constrain((n[e]+i[e])/2,t,r)-((o||n)[e]+(s||i)[e]);if(u){var f;if(o&&s){f=u>0===o[e]>s[e]?o:s}else f=o||s;f[e]+=u}return l}}var ae;if(d==="linear"||d==="spline"){ae=K}else if(d==="hv"||d==="vh"){ae=re}else if(d==="hvh")ae=ne(0,V,H);else if(d==="vhv")ae=ne(1,q,G);function ie(e,t){var r=t[0]-e[0];var n=(t[1]-e[1])/r;var a=(e[1]*t[0]-t[1]*e[0])/r;if(a>0)return[n>0?V:H,G];else return[n>0?H:V,q]}function oe(e){var t=e[0];var r=e[1];var n=t===m[y-1][0];var a=r===m[y-1][1];if(n&&a)return;if(y>1){var i=t===m[y-2][0];var o=r===m[y-2][1];if(n&&(t===V||t===H)&&i){if(o)y--;else m[y-1]=e}else if(a&&(r===q||r===G)&&o){if(i)y--;else m[y-1]=e}else m[y++]=e}else m[y++]=e}function se(e){if(m[y-1][0]!==e[0]&&m[y-1][1]!==e[1]){oe([Z,J])}oe(e);Q=null;Z=J=0}function le(e){F=e[0]/l._length;B=e[1]/u._length;W=e[0]<V?V:e[0]>H?H:0;Y=e[1]<q?q:e[1]>G?G:0;if(W||Y){if(!y){m[y++]=[W||e[0],Y||e[1]]}else if(Q){var t=ae(Q,e);if(t.length>1){se(t[0]);m[y++]=t[1]}}else{$=ae(m[y-1],e)[0];m[y++]=$}var r=m[y-1];if(W&&Y&&(r[0]!==W||r[1]!==Y)){if(Q){if(Z!==W&&J!==Y){if(Z&&J){oe(ie(Q,e))}else{oe([Z||W,J||Y])}}else if(Z&&J){oe([Z,J])}}oe([W,Y])}else if(Z-W&&J-Y){oe([W||Z,Y||J])}Q=e;Z=W;J=Y}else{if(Q){se(ae(Q,e)[0])}m[y++]=e}}for(b=0;b<t.length;b++){x=P(b);if(!x)continue;y=0;Q=null;le(x);for(b++;b<t.length;b++){w=P(b);if(!w){if(c)continue;else break}if(!v){le(w);continue}var ue=P(b+1);C=j(w,x);if(C<N(w,ue)*g)continue;M=[(w[0]-x[0])/C,(w[1]-x[1])/C];A=x;S=C;L=I=D=0;T=false;_=w;for(b++;b<t.length;b++){k=ue;ue=P(b+1);if(!k){if(c)continue;else break}E=[k[0]-x[0],k[1]-x[1]];R=E[0]*M[1]-E[1]*M[0];I=Math.min(I,R);D=Math.max(D,R);if(D-I>N(k,ue))break;_=k;O=E[0]*M[0]+E[1]*M[1];if(O>S){S=O;w=k;T=false}else if(O<L){L=O;A=k;T=true}}if(T){le(w);if(_!==A)le(A)}else{if(A!==x)le(A);if(_!==w)le(w)}le(_);if(b>=t.length||!k)break;le(k);x=k}if(Q)oe([Z||Q[0],J||Q[1]]);p.push(m.slice(0,y))}return p}},{"../../constants/numerical":424,"../../lib":445,"./constants":602}],611:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("line.shape");if(a==="spline")n("line.smoothing")}},{}],612:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a,i;var o=null;for(i=0;i<n.length;++i){a=n[i][0].trace;if(a.visible===true){a._nexttrace=null;if(["tonextx","tonexty","tonext"].indexOf(a.fill)!==-1){a._prevtrace=o;if(o){o._nexttrace=a}}o=a}else{a._prevtrace=a._nexttrace=null}}}},{}],613:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t){var r=t.marker,a=r.sizeref||1,i=r.sizemin||0;var o=r.sizemode==="area"?function(e){return Math.sqrt(e/a)}:function(e){return e/a};return function(e){var t=o(e/2);return n(t)&&t>0?Math.max(t,i):0}}},{"fast-isnumeric":151}],614:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],615:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");var o=e("./subtypes");t.exports=function e(t,r,s,l,u,f){var c=o.isBubble(t),h=(t.line||{}).color,d;f=f||{};if(h)s=h;u("marker.symbol");u("marker.opacity",c?.7:1);u("marker.size");u("marker.color",s);if(a(t,"marker")){i(t,r,l,u,{prefix:"marker.",cLetter:"c"})}if(!f.noSelect){u("selected.marker.color");u("unselected.marker.color");u("selected.marker.size");u("unselected.marker.size")}if(!f.noLine){if(h&&!Array.isArray(h)&&r.marker.color!==h){d=h}else if(c)d=n.background;else d=n.defaultLine;u("marker.line.color",d);if(a(t,"marker.line")){i(t,r,l,u,{prefix:"marker.line.",cLetter:"c"})}u("marker.line.width",c?1:0)}if(c){u("marker.sizeref");u("marker.sizemin");u("marker.sizemode")}if(f.gradient){var v=u("marker.gradient.type");if(v!=="none"){u("marker.gradient.color")}}}},{"../../components/color":323,"../../components/colorscale/defaults":333,"../../components/colorscale/has_colorscale":337,"./subtypes":619}],616:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../../components/drawing");var s=e("./subtypes");var l=e("./line_points");var u=e("./link_traces");var f=e("../../lib/polygon").tester;t.exports=function e(t,r,a,i,o,s){var l,f,d,v;var p=!o;var g=!!o&&o.duration>0;d=i.selectAll("g.trace").data(a,function(e){return e[0].trace.uid});d.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);u(t,r,a);c(t,i,r);for(l=0,f={};l<a.length;l++){f[a[l][0].trace.uid]=l}i.selectAll("g.trace").sort(function(e,t){var r=f[e[0].trace.uid];var n=f[t[0].trace.uid];return r>n?1:-1});if(g){if(s){v=s()}var m=n.transition().duration(o.duration).ease(o.easing).each("end",function(){v&&v()}).each("interrupt",function(){v&&v()});m.each(function(){i.selectAll("g.trace").each(function(e,n){h(t,n,r,e,a,this,o)})})}else{i.selectAll("g.trace").each(function(e,n){h(t,n,r,e,a,this,o)})}if(p){d.exit().remove()}i.selectAll("path:not([d])").remove()};function c(e,t,r){var a;t.selectAll("g.trace").each(function(e){var t=n.select(this);a=e[0].trace;if(a._nexttrace){a._nextFill=t.select(".js-fill.js-tonext");if(!a._nextFill.size()){var i=":first-child";if(t.select(".js-fill.js-tozero").size()){i+=" + *"}a._nextFill=t.insert("path",i).attr("class","js-fill js-tonext")}}else{t.selectAll(".js-fill.js-tonext").remove();a._nextFill=null}if(a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace)){a._ownFill=t.select(".js-fill.js-tozero");if(!a._ownFill.size()){a._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero")}}else{t.selectAll(".js-fill.js-tozero").remove();a._ownFill=null}t.selectAll(".js-fill").call(o.setClipUrl,r.layerClipId)})}function h(e,t,r,u,c,h,v){var p,g;d(e,t,r,u,c);var m=!!v&&v.duration>0;function y(e){return m?e.transition():e}var b=r.xaxis,x=r.yaxis;var _=u[0].trace,w=_.line,A=n.select(h);a.getComponentMethod("errorbars","plot")(A,r,v);if(_.visible!==true)return;y(A).style("opacity",_.opacity);var k,T;var M=_.fill.charAt(_.fill.length-1);if(M!=="x"&&M!=="y")M="";if(!r.isRangePlot)u[0].node3=A;var E="";var C=[];var S=_._prevtrace;if(S){E=S._prevRevpath||"";T=S._nextFill;C=S._polygons}var L,O,I="",D="",R,P,z,F,B,N,j;var U=[],V=i.noop;k=_._ownFill;if(s.hasLines(_)||_.fill!=="none"){if(T){T.datum(u)}if(["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1){R=o.steps(w.shape);P=o.steps(w.shape.split("").reverse().join(""))}else if(w.shape==="spline"){R=P=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return o.smoothclosed(e.slice(1),w.smoothing)}else{return o.smoothopen(e,w.smoothing)}}}else{R=P=function(e){return"M"+e.join("L")}}z=function(e){return P(e.reverse())};U=l(u,{xaxis:b,yaxis:x,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify});j=_._polygons=new Array(U.length);for(g=0;g<U.length;g++){_._polygons[g]=f(U[g])}if(U.length){F=U[0][0];B=U[U.length-1];N=B[B.length-1]}V=function(e){return function(t){L=R(t);O=z(t);if(!I){I=L;D=O}else if(M){I+="L"+L.substr(1);D=O+("L"+D.substr(1))}else{I+="Z"+L;D=O+"Z"+D}if(s.hasLines(_)&&t.length>1){var r=n.select(this);r.datum(u);if(e){y(r.style("opacity",0).attr("d",L).call(o.lineGroupStyle)).style("opacity",1)}else{var a=y(r);a.attr("d",L);o.singleLineStyle(u,a)}}}}}var H=A.selectAll(".js-line").data(U);y(H.exit()).style("opacity",0).remove();H.each(V(false));H.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(V(true));o.setClipUrl(H,r.layerClipId);function q(e){y(e).attr("d","M0,0Z")}if(U.length){if(k){if(F&&N){if(M){if(M==="y"){F[1]=N[1]=x.c2p(0,true)}else if(M==="x"){F[0]=N[0]=b.c2p(0,true)}y(k).attr("d","M"+N+"L"+F+"L"+I.substr(1)).call(o.singleFillStyle)}else{y(k).attr("d",I+"Z").call(o.singleFillStyle)}}}else if(T){if(_.fill.substr(0,6)==="tonext"&&I&&E){if(_.fill==="tonext"){y(T).attr("d",I+"Z"+E+"Z").call(o.singleFillStyle)}else{y(T).attr("d",I+"L"+E.substr(1)+"Z").call(o.singleFillStyle)}_._polygons=_._polygons.concat(C)}else{q(T);_._polygons=null}}_._prevRevpath=D;_._prevPolygons=j}else{if(k)q(k);else if(T)q(T);_._polygons=_._prevRevpath=_._prevPolygons=null}function G(e){return e.filter(function(e){return e.vis})}function X(e){return e.id}function W(e){if(e.ids){return X}}function Y(){return false}function Z(t){var a,l,u;var f=t[0].trace;var c=n.select(this);var h=s.hasMarkers(f);var d=s.hasText(f);var v=W(f);var p=Y;var g=Y;if(h){p=f.marker.maxdisplayed||f._needsCull?G:i.identity}if(d){g=f.marker.maxdisplayed||f._needsCull?G:i.identity}l=c.selectAll("path.point");a=l.data(p,v);var _=a.enter().append("path").classed("point",true);if(m){_.call(o.pointStyle,f,e).call(o.translatePoints,b,x).style("opacity",0).transition().style("opacity",1)}a.order();var w;if(h){w=o.makePointStyleFns(f)}a.each(function(t){var a=n.select(this);var i=y(a);u=o.translatePoint(t,i,b,x);if(u){o.singlePointStyle(t,i,f,w,e);if(r.layerClipId){o.hideOutsideRangePoint(t,i,b,x,f.xcalendar,f.ycalendar)}if(f.customdata){a.classed("plotly-customdata",t.data!==null&&t.data!==undefined)}}else{i.remove()}});if(m){a.exit().transition().style("opacity",0).remove()}else{a.exit().remove()}l=c.selectAll("g");a=l.data(g,v);a.enter().append("g").classed("textpoint",true).append("text");a.order();a.each(function(e){var t=n.select(this);var a=y(t.select("text"));u=o.translatePoint(e,a,b,x);if(u){if(r.layerClipId){o.hideOutsideRangePoint(e,t,b,x,f.xcalendar,f.ycalendar)}}else{t.remove()}});a.selectAll("text").call(o.textPointStyle,f,e).each(function(e){var t=b.c2p(e.x);var r=x.c2p(e.y);n.select(this).selectAll("tspan.line").each(function(){y(n.select(this)).attr({x:t,y:r})})});a.exit().remove()}var J=A.selectAll(".points");p=J.data([u]);J.each(Z);p.enter().append("g").classed("points",true).each(Z);p.exit().remove();p.each(function(e){var t=e[0].trace.cliponaxis===false;o.setClipUrl(n.select(this),t?null:r.layerClipId)})}function d(e,t,r,a,o){var l=r.xaxis,u=r.yaxis,f=n.extent(i.simpleMap(l.range,l.r2c)),c=n.extent(i.simpleMap(u.range,u.r2c));var h=a[0].trace;if(!s.hasMarkers(h))return;var d=h.marker.maxdisplayed;if(d===0)return;var v=a.filter(function(e){return e.x>=f[0]&&e.x<=f[1]&&e.y>=c[0]&&e.y<=c[1]}),p=Math.ceil(v.length/d),g=0;o.forEach(function(e,r){var n=e[0].trace;if(s.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<t){g++}});var m=Math.round(g*p/3+Math.floor(g/3)*p/7.1);a.forEach(function(e){delete e.vis});v.forEach(function(e,t){if(Math.round((t+m)%p)===0)e.vis=true})}},{"../../components/drawing":348,"../../lib":445,"../../lib/polygon":457,"../../registry":536,"./line_points":610,"./link_traces":612,"./subtypes":619,d3:86}],617:[function(e,t,r){"use strict";var n=e("./subtypes");t.exports=function e(t,r){var a=t.cd,i=t.xaxis,o=t.yaxis,s=[],l=a[0].trace,u,f,c,h;var d=!n.hasMarkers(l)&&!n.hasText(l);if(d)return[];if(r===false){for(u=0;u<a.length;u++){a[u].selected=0}}else{for(u=0;u<a.length;u++){f=a[u];c=i.c2p(f.x);h=o.c2p(f.y);if(r.contains([c,h])){s.push({pointNumber:u,x:i.c2d(f.x),y:o.c2d(f.y)});f.selected=1}else{f.selected=0}}}return s}},{"./subtypes":619}],618:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/drawing");var i=e("../../registry");function o(e,t){var r=t?t[0].node3:n.select(e).selectAll("g.trace.scatter");r.style("opacity",function(e){return e[0].trace.opacity});r.selectAll("g.points").each(function(t){var r=n.select(this);var a=t.trace||t[0].trace;s(r,a,e)});r.selectAll("g.trace path.js-line").call(a.lineGroupStyle);r.selectAll("g.trace path.js-fill").call(a.fillGroupStyle);i.getComponentMethod("errorbars","style")(r)}function s(e,t,r){a.pointStyle(e.selectAll("path.point"),t,r);a.textPointStyle(e.selectAll("text"),t,r)}function l(e,t){var r=t[0].node3;var n=t[0].trace;if(n.selectedpoints){a.selectedPointStyle(r.selectAll("path.point"),n);a.selectedTextStyle(r.selectAll("text"),n)}else{s(r,n,e)}}t.exports={style:o,stylePoints:s,styleOnSelect:l}},{"../../components/drawing":348,"../../registry":536,d3:86}],619:[function(e,t,r){"use strict";var n=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return n.isPlainObject(e.marker)&&n.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":445}],620:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function(e,t,r,a,i){i=i||{};a("textposition");n.coerceFont(a,"textfont",r.font);if(!i.noSelect){a("selected.textfont.color");a("unselected.textfont.color")}}},{"../../lib":445}],621:[function(e,t,r){"use strict";var n=e("../../registry");t.exports=function e(t,r,a,i){var o,s=i("x"),l=i("y");var u=n.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],a);if(s){if(l){o=Math.min(s.length,l.length)}else{o=s.length;i("y0");i("dy")}}else{if(!l)return 0;o=r.y.length;i("x0");i("dx")}r._length=o;return o}},{"../../registry":536}],622:[function(e,t,r){"use strict";var n=e("../scatter/arrays_to_calcdata");var a=e("../scatter/colorscale_calc");t.exports=function e(t,r){var i=[{x:false,y:false,trace:r,t:{}}];n(i,r);a(r);return i}},{"../scatter/arrays_to_calcdata":596,"../scatter/colorscale_calc":601}],623:[function(e,t,r){"use strict";var n=e("../../plots/attributes");var a=e("../scatter/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../lib/extend").extendFlat;var s=e("../../plot_api/edit_types").overrideAll;var l=e("./constants").DASHES;var u=a.line;var f=a.marker;var c=f.line;var h=t.exports=s({x:a.x,x0:a.x0,dx:a.dx,y:a.y,y0:a.y0,dy:a.dy,text:o({},a.text,{}),hovertext:a.hovertext,textposition:a.textposition,textfont:a.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:u.color,width:u.width,dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid"}},marker:o({},i("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:o({},i("marker.line"),{width:c.width})}),connectgaps:a.connectgaps,fill:a.fill,fillcolor:a.fillcolor,hoveron:a.hoveron,selected:{marker:a.selected.marker,textfont:a.selected.textfont},unselected:{marker:a.unselected.marker,textfont:a.unselected.textfont},opacity:n.opacity},"calc","nested");h.x.editType=h.y.editType=h.x0.editType=h.y0.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":330,"../../lib/extend":436,"../../plot_api/edit_types":475,"../../plots/attributes":489,"../scatter/attributes":597,"./constants":624}],624:[function(e,t,r){"use strict";var n=20;t.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:n,SYMBOL_STROKE:n/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],625:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("svg-path-sdf");var i=e("color-normalize");var o=e("../../registry");var s=e("../../lib");var l=e("../../components/drawing");var u=e("../../plots/cartesian/axes");var f=e("../../plots/cartesian/axis_ids");var c=e("../../lib/gl_format_color").formatColor;var h=e("../scatter/subtypes");var d=e("../scatter/make_bubble_size_func");var v=e("./constants");var p=e("../../constants/interactions").DESELECTDIM;var g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1};function m(e,t){var r;var n={marker:undefined,markerSel:undefined,markerUnsel:undefined,line:undefined,fill:undefined,errorX:undefined,errorY:undefined,text:undefined,textSel:undefined,textUnsel:undefined};if(t.visible!==true)return n;if(h.hasText(t)){n.text=y(t);n.textSel=_(t,t.selected);n.textUnsel=_(t,t.unselected)}if(h.hasMarkers(t)){n.marker=b(t);n.markerSel=x(t,t.selected);n.markerUnsel=x(t,t.unselected);if(!t.unselected&&Array.isArray(t.marker.opacity)){var a=t.marker.opacity;n.markerUnsel.opacity=new Array(a.length);for(r=0;r<a.length;r++){n.markerUnsel.opacity[r]=p*a[r]}}}if(h.hasLines(t)){n.line={overlay:true,thickness:t.line.width,color:t.line.color,opacity:t.opacity};var i=(v.DASHES[t.line.dash]||[1]).slice();for(r=0;r<i.length;++r){i[r]*=t.line.width}n.line.dashes=i}if(t.error_x&&t.error_x.visible){n.errorX=w(t,t.error_x)}if(t.error_y&&t.error_y.visible){n.errorY=w(t,t.error_y)}if(!!t.fill&&t.fill!=="none"){n.fill={closed:true,fill:t.fillcolor,thickness:0}}return n}function y(e){var t=e._length;var r=e.textfont;var a=e.textposition;var i=Array.isArray(a)?a:[a];var o=r.color;var s=r.size;var l=r.family;var u={};var f;u.text=e.text;u.opacity=e.opacity;u.font={};u.align=[];u.baseline=[];for(f=0;f<i.length;f++){var c=i[f].split(/\s+/);switch(c[1]){case"left":u.align.push("right");break;case"right":u.align.push("left");break;default:u.align.push(c[1])}switch(c[0]){case"top":u.baseline.push("bottom");break;case"bottom":u.baseline.push("top");break;default:u.baseline.push(c[0])}}if(Array.isArray(o)){u.color=new Array(t);for(f=0;f<t;f++){u.color[f]=o[f]}}else{u.color=o}if(Array.isArray(s)||Array.isArray(l)){u.font=new Array(t);for(f=0;f<t;f++){var h=u.font[f]={};h.size=Array.isArray(s)?n(s[f])?s[f]:0:s;h.family=Array.isArray(l)?l[f]:l}}else{u.font={size:s,family:l}}return u}function b(e){var t=e._length;var r=e.marker;var n={};var a;var o=Array.isArray(r.symbol);var l=s.isArrayOrTypedArray(r.color);var u=s.isArrayOrTypedArray(r.line.color);var f=s.isArrayOrTypedArray(r.opacity);var h=s.isArrayOrTypedArray(r.size);var p=s.isArrayOrTypedArray(r.line.width);var g;if(!o)g=v.OPEN_RE.test(r.symbol);if(o||l||u||f){n.colors=new Array(t);n.borderColors=new Array(t);var m=c(r,r.opacity,t);var y=c(r.line,r.opacity,t);if(!Array.isArray(y[0])){var b=y;y=Array(t);for(a=0;a<t;a++){y[a]=b}}if(!Array.isArray(m[0])){var x=m;m=Array(t);for(a=0;a<t;a++){m[a]=x}}n.colors=m;n.borderColors=y;for(a=0;a<t;a++){if(o){var _=r.symbol[a];g=v.OPEN_RE.test(_)}if(g){y[a]=m[a].slice();m[a]=m[a].slice();m[a][3]=0}}n.opacity=e.opacity}else{if(g){n.color=i(r.color,"uint8");n.color[3]=0;n.borderColor=i(r.color,"uint8")}else{n.color=i(r.color,"uint8");n.borderColor=i(r.line.color,"uint8")}n.opacity=e.opacity*r.opacity}if(o){n.markers=new Array(t);for(a=0;a<t;a++){n.markers[a]=C(r.symbol[a])}}else{n.marker=C(r.symbol)}var w=d(e);var A;if(h||p){var k=n.sizes=new Array(t);var T=n.borderSizes=new Array(t);var M=0;var E;if(h){for(a=0;a<t;a++){k[a]=w(r.size[a]);M+=k[a]}E=M/t}else{A=w(r.size);for(a=0;a<t;a++){k[a]=A}}if(p){for(a=0;a<t;a++){T[a]=r.line.width[a]/2}}else{A=r.line.width/2;for(a=0;a<t;a++){T[a]=A}}n.sizeAvg=E}else{n.size=w(r&&r.size||10);n.borderSizes=w(r.line.width)}return n}function x(e,t){var r=e.marker;var n={};if(!t)return n;if(t.marker&&t.marker.symbol){n=b(s.extendFlat({},r,t.marker))}else if(t.marker){if(t.marker.size)n.size=t.marker.size/2;if(t.marker.color)n.colors=t.marker.color;if(t.marker.opacity!==undefined)n.opacity=t.marker.opacity}return n}function _(e,t){var r={};if(!t)return r;if(t.textfont){var n={opacity:1,text:e.text,textposition:e.textposition,textfont:s.extendFlat({},e.textfont)};if(t.textfont){s.extendFlat(n.textfont,t.textfont)}r=y(n)}return r}function w(e,t){var r={capSize:t.width*2,lineWidth:t.thickness,color:t.color};if(t.copy_ystyle){r=e.error_y}return r}var A=v.SYMBOL_SDF_SIZE;var k=v.SYMBOL_SIZE;var T=v.SYMBOL_STROKE;var M={};var E=l.symbolFuncs[0](k*.05);function C(e){if(e==="circle")return null;var t,r;var n=l.symbolNumber(e);var i=l.symbolFuncs[n%100];var o=!!l.symbolNoDot[n%100];var s=!!l.symbolNoFill[n%100];var u=v.DOT_RE.test(e);if(M[e])return M[e];if(u&&!o){t=i(k*1.1)+E}else{t=i(k)}r=a(t,{w:A,h:A,viewBox:[-k,-k,k,k],stroke:s?T:-T});M[e]=r;return r||null}function S(e,t,r){var n=r.length/2;var a;var i;if(h.hasLines(t)&&n){if(t.line.shape==="hv"){a=[];for(i=0;i<n-1;i++){if(isNaN(r[i*2])||isNaN(r[i*2+1])){a.push(NaN);a.push(NaN);a.push(NaN);a.push(NaN)}else{a.push(r[i*2]);a.push(r[i*2+1]);a.push(r[i*2+2]);a.push(r[i*2+1])}}a.push(r[r.length-2]);a.push(r[r.length-1])}else if(t.line.shape==="vh"){a=[];for(i=0;i<n-1;i++){if(isNaN(r[i*2])||isNaN(r[i*2+1])){a.push(NaN);a.push(NaN);a.push(NaN);a.push(NaN)}else{a.push(r[i*2]);a.push(r[i*2+1]);a.push(r[i*2]);a.push(r[i*2+3])}}a.push(r[r.length-2]);a.push(r[r.length-1])}else{a=r}}var o=false;for(i=0;i<a.length;i++){if(isNaN(a[i])){o=true;break}}var s=o||a.length>v.TOO_MANY_POINTS?"rect":h.hasMarkers(t)?"rect":"round";if(o&&t.connectgaps){var l=a[0];var u=a[1];for(i=0;i<a.length;i+=2){if(isNaN(a[i])||isNaN(a[i+1])){a[i]=l;a[i+1]=u}else{l=a[i];u=a[i+1]}}}return{join:s,positions:a}}function L(e,t,r,a,i){var s=o.getComponentMethod("errorbars","makeComputeError");var l=f.getFromId(e,t.xaxis);var c=f.getFromId(e,t.yaxis);var h=r.length/2;var d={};function v(e,a){var i=a._id.charAt(0);var o=t["error_"+i];if(o&&o.visible&&(a.type==="linear"||a.type==="log")){var l=s(o);var f={x:0,y:1}[i];var c={x:[0,1,2,3],y:[2,3,0,1]}[i];var v=new Float64Array(4*h);var p=Infinity;var g=-Infinity;for(var m=0,y=0;m<h;m++,y+=4){var b=e[m];if(n(b)){var x=r[m*2+f];var _=l(b,m);var w=_[0];var A=_[1];if(n(w)&&n(A)){var k=b-w;var T=b+A;v[y+c[0]]=x-a.c2l(k);v[y+c[1]]=a.c2l(T)-x;v[y+c[2]]=0;v[y+c[3]]=0;p=Math.min(p,b-w);g=Math.max(g,b+A)}}}u.expand(a,[p,g],{padded:true});d[i]={positions:r,errors:v}}}v(a,l);v(i,c);return d}function O(e,t,r,n){var a=t._length;var i={};var o;if(h.hasMarkers(t)){var s=r.font;var l=r.align;var u=r.baseline;i.offset=new Array(a);for(o=0;o<a;o++){var f=n.sizes?n.sizes[o]:n.size;var c=Array.isArray(s)?s[o].size:s.size;var d=Array.isArray(l)?l.length>1?l[o]:l[0]:l;var v=Array.isArray(u)?u.length>1?u[o]:u[0]:u;var p=g[d];var m=g[v];var y=f?f/.8+1:0;var b=-m*y-m*.5;i.offset[o]=[p*y/c,b/c]}}return i}t.exports={style:m,markerStyle:b,markerSelection:x,linePositions:S,errorBarPositions:L,textPosition:O}},{"../../components/drawing":348,"../../constants/interactions":423,"../../lib":445,"../../lib/gl_format_color":441,"../../plots/cartesian/axes":492,"../../plots/cartesian/axis_ids":495,"../../registry":536,"../scatter/make_bubble_size_func":613,"../scatter/subtypes":619,"./constants":624,"color-normalize":64,"fast-isnumeric":151,"svg-path-sdf":283}],626:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=e("./attributes");var o=e("../scatter/constants");var s=e("../scatter/subtypes");var l=e("../scatter/xy_defaults");var u=e("../scatter/marker_defaults");var f=e("../scatter/line_defaults");var c=e("../scatter/fillcolor_defaults");var h=e("../scatter/text_defaults");t.exports=function e(t,r,d,v){function p(e,a){return n.coerce(t,r,i,e,a)}var g=t.marker?/-open/.test(t.marker.symbol):false;var m=s.isBubble(t);var y=l(t,r,v,p);if(!y){r.visible=false;return}var b=y<o.PTS_LINESONLY?"lines+markers":"lines";p("text");p("hovertext");p("mode",b);if(s.hasLines(r)){p("connectgaps");f(t,r,d,v,p)}var x=[];if(s.hasMarkers(r)){u(t,r,d,v,p);p("marker.line.width",g||m?1:0);x.push("points")}if(s.hasText(r)){h(t,r,v,p)}p("fill");if(r.fill!=="none"){c(t,r,d,p)}if(r.fill==="tonext"||r.fill==="toself"){x.push("fills")}p("hoveron",x.join("+")||"points");var _=a.getComponentMethod("errorbars","supplyDefaults");_(t,r,d,{axis:"y"});_(t,r,d,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,p)}},{"../../lib":445,"../../registry":536,"../scatter/constants":602,"../scatter/fillcolor_defaults":605,"../scatter/line_defaults":609,"../scatter/marker_defaults":615,"../scatter/subtypes":619,"../scatter/text_defaults":620,"../scatter/xy_defaults":621,"./attributes":623}],627:[function(e,t,r){"use strict";var n=e("regl-scatter2d");var a=e("regl-line2d");var i=e("regl-error2d");var o=e("point-cluster");var s=e("array-range");var l=e("@etpinard/gl-text");var u=e("../../registry");var f=e("../../lib");var c=e("../../lib/prepare_regl");var h=e("../../plots/cartesian/axis_ids");var d=e("../../components/color");var v=e("../scatter/subtypes");var p=e("../scatter/calc").calcMarkerSize;var g=e("../scatter/calc").calcAxisExpansion;var m=e("../scatter/colorscale_calc");var y=e("../scatter/link_traces");var b=e("../scatter/get_trace_color");var x=e("../scatter/fill_hover_text");var _=e("./convert");var w=e("../../constants/numerical").BADNUM;var A=e("./constants").TOO_MANY_POINTS;var k=e("../../constants/interactions").DESELECTDIM;function T(e,t){var r=e._fullLayout;var n=h.getFromId(e,t.xaxis);var a=h.getFromId(e,t.yaxis);var i=r._plots[t.xaxis+t.yaxis];var s=t._length;var l=s*2;var u={};var f,c,d;var v=n.makeCalcdata(t,"x");var y=a.makeCalcdata(t,"y");var b=new Array(l);for(f=0;f<s;f++){c=v[f];d=y[f];b[f*2]=c===w?NaN:c;b[f*2+1]=d===w?NaN:d}if(n.type==="log"){for(f=0;f<l;f+=2){b[f]=n.c2l(b[f])}}if(a.type==="log"){for(f=1;f<l;f+=2){b[f]=a.c2l(b[f])}}if(n.type!=="log"&&a.type!=="log"){u.tree=o(b)}else{var x=u.ids=new Array(s);for(f=0;f<s;f++){x[f]=f}}m(t);var _=M(e,i,t,b,v,y);var k=E(e,i);var T;if(s<A){T=p(t,s)}else if(_.marker){T=2*(_.marker.sizeAvg||Math.max(_.marker.size,3))}g(e,t,n,a,v,y,T);if(_.fill&&!k.fill2d)k.fill2d=true;if(_.marker&&!k.scatter2d)k.scatter2d=true;if(_.line&&!k.line2d)k.line2d=true;if((_.errorX||_.errorY)&&!k.error2d)k.error2d=true;if(_.text&&!k.glText)k.glText=true;if(_.marker&&s>=A){_.marker.cluster=u.tree}k.lineOptions.push(_.line);k.errorXOptions.push(_.errorX);k.errorYOptions.push(_.errorY);k.fillOptions.push(_.fill);k.markerOptions.push(_.marker);k.markerSelectedOptions.push(_.markerSel);k.markerUnselectedOptions.push(_.markerUnsel);k.textOptions.push(_.text);k.textSelectedOptions.push(_.textSel);k.textUnselectedOptions.push(_.textUnsel);k.count++;u._scene=k;u.index=k.count-1;u.x=v;u.y=y;u.positions=b;u.count=s;e.firstscatter=false;return[{x:false,y:false,t:u,trace:t}]}function M(e,t,r,n,a,i){var o=_.style(e,r);if(o.marker){o.marker.positions=n}if(o.line&&n.length>1){f.extendFlat(o.line,_.linePositions(e,r,n))}if(o.errorX||o.errorY){var s=_.errorBarPositions(e,r,n,a,i);if(o.errorX){f.extendFlat(o.errorX,s.x)}if(o.errorY){f.extendFlat(o.errorY,s.y)}}if(o.text){f.extendFlat(o.text,{positions:n},_.textPosition(e,r,o.text,o.marker));f.extendFlat(o.textSel,{positions:n},_.textPosition(e,r,o.text,o.markerSel));f.extendFlat(o.textUnsel,{positions:n},_.textPosition(e,r,o.text,o.markerUnsel))}return o}function E(e,t){var r=t._scene;var n=e._fullLayout;var a={count:0,dirty:true,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[]};var i={selectBatch:null,unselectBatch:null,fill2d:false,scatter2d:false,error2d:false,line2d:false,glText:false,select2d:null};if(!t._scene){r=t._scene={};r.init=function e(){f.extendFlat(r,i,a)};r.init();r.update=function e(t){var n;var a=new Array(r.count);for(n=0;n<r.count;n++){a[n]=t}if(r.fill2d)r.fill2d.update(a);if(r.scatter2d)r.scatter2d.update(a);if(r.line2d)r.line2d.update(a);if(r.error2d)r.error2d.update(a.concat(a));if(r.select2d)r.select2d.update(a);if(r.glText){for(n=0;n<r.count;n++){r.glText[n].update(a[n])}}r.draw()};r.draw=function e(){var t;for(t=0;t<r.count;t++){if(r.fill2d&&r.fillOptions[t]){r.fill2d.draw(t)}}for(t=0;t<r.count;t++){if(r.line2d&&r.lineOptions[t]){r.line2d.draw(t)}if(r.error2d&&r.errorXOptions[t]){r.error2d.draw(t)}if(r.error2d&&r.errorYOptions[t]){r.error2d.draw(t+r.count)}if(r.scatter2d&&r.markerOptions[t]&&(!r.selectBatch||!r.selectBatch[t])){r.scatter2d.draw(t)}}if(r.scatter2d&&r.select2d&&r.selectBatch){r.select2d.draw(r.selectBatch);r.scatter2d.draw(r.unselectBatch)}for(t=0;t<r.count;t++){if(r.glText[t]&&r.textOptions[t]){r.glText[t].render()}}r.dirty=false};r.clear=function e(){var a=n._size;var i=n.width;var o=n.height;var s=t.xaxis;var l=t.yaxis;var u=[a.l+s.domain[0]*a.w,a.b+l.domain[0]*a.h,i-a.r-(1-s.domain[1])*a.w,o-a.t-(1-l.domain[1])*a.h];if(r.select2d){C(r.select2d,u)}if(r.scatter2d){C(r.scatter2d,u)}else if(r.glText){C(r.glText[0],u)}};r.destroy=function e(){if(r.fill2d)r.fill2d.destroy();if(r.scatter2d)r.scatter2d.destroy();if(r.error2d)r.error2d.destroy();if(r.line2d)r.line2d.destroy();if(r.select2d)r.select2d.destroy();if(r.glText){r.glText.forEach(function(e){e.destroy()})}r.lineOptions=null;r.fillOptions=null;r.markerOptions=null;r.markerSelectedOptions=null;r.markerUnselectedOptions=null;r.errorXOptions=null;r.errorYOptions=null;r.textOptions=null;r.textSelectedOptions=null;r.textUnselectedOptions=null;r.selectBatch=null;r.unselectBatch=null;t._scene=null}}if(!r.dirty){f.extendFlat(r,a)}return r}function C(e,t){var r=e.regl._gl;r.enable(r.SCISSOR_TEST);r.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT)}function S(e,t,r){if(!r.length)return;var o;var s=e._fullLayout;var u=r[0][0].t._scene;var d=s.dragmode;if(!u)return;var v=s._size;var p=s.width;var g=s.height;var m=c(e,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!m){u.init();return}var b=s._glcanvas.data()[0].regl;y(e,t,r);if(u.dirty){if(u.error2d===true){u.error2d=i(b)}if(u.line2d===true){u.line2d=a(b)}if(u.scatter2d===true){u.scatter2d=n(b)}if(u.fill2d===true){u.fill2d=a(b)}if(u.glText===true){u.glText=new Array(u.count);for(o=0;o<u.count;o++){u.glText[o]=new l(b)}}if(u.glText){for(o=0;o<u.count;o++){u.glText[o].update(u.textOptions[o])}}if(u.line2d){u.line2d.update(u.lineOptions)}if(u.error2d){var x=(u.errorXOptions||[]).concat(u.errorYOptions||[]);u.error2d.update(x)}if(u.scatter2d){u.scatter2d.update(u.markerOptions)}if(u.fill2d){u.fillOptions=u.fillOptions.map(function(e,t){var n=r[t];if(!e||!n||!n[0]||!n[0].trace)return null;var a=n[0];var i=a.trace;var o=a.t;var s=u.lineOptions[t];var l,f;var c=[],h=s&&s.positions||o.positions;if(i.fill==="tozeroy"){c=[h[0],0];c=c.concat(h);c.push(h[h.length-2]);c.push(0)}else if(i.fill==="tozerox"){c=[0,h[1]];c=c.concat(h);c.push(0);c.push(h[h.length-1])}else if(i.fill==="toself"||i.fill==="tonext"){c=[];l=0;for(f=0;f<h.length;f+=2){if(isNaN(h[f])||isNaN(h[f+1])){c=c.concat(h.slice(l,f));c.push(h[l],h[l+1]);l=f+2}}c=c.concat(h.slice(l));if(l){c.push(h[l],h[l+1])}}else{var d=i._nexttrace;if(d){var v=u.lineOptions[t+1];if(v){var p=v.positions;if(i.fill==="tonexty"){c=h.slice();for(t=Math.floor(p.length/2);t--;){var g=p[t*2],m=p[t*2+1];if(isNaN(g)||isNaN(m))continue;c.push(g);c.push(m)}e.fill=d.fillcolor}}}}if(i._prevtrace&&i._prevtrace.fill==="tonext"){var y=u.lineOptions[t-1].positions;var b=c.length/2;l=b;var x=[l];for(f=0;f<y.length;f+=2){if(isNaN(y[f])||isNaN(y[f+1])){x.push(f/2+b+1);l=f+2}}c=c.concat(y);e.hole=x}e.opacity=i.opacity;e.positions=c;return e});u.fill2d.update(u.fillOptions)}}var _=d==="lasso"||d==="select";u.selectBatch=null;u.unselectBatch=null;var w=r.map(function(r){if(!r||!r[0]||!r[0].trace)return;var n=r[0];var a=n.trace;var i=n.t;var o=i.index;var s=i.x;var l=i.y;var c=t.xaxis||h.getFromId(e,a.xaxis||"x");var d=t.yaxis||h.getFromId(e,a.yaxis||"y");var m;var y=[(c._rl||c.range)[0],(d._rl||d.range)[0],(c._rl||c.range)[1],(d._rl||d.range)[1]];var b=[v.l+c.domain[0]*v.w,v.b+d.domain[0]*v.h,p-v.r-(1-c.domain[1])*v.w,g-v.t-(1-d.domain[1])*v.h];if(a.selectedpoints||_){if(!_)_=true;if(!u.selectBatch){u.selectBatch=[];u.unselectBatch=[]}if(a.selectedpoints){var x=u.selectBatch[o]=f.selIndices2selPoints(a);var w={};for(m=0;m<x.length;m++){w[x[m]]=1}var A=[];for(m=0;m<i.count;m++){if(!w[m])A.push(m)}u.unselectBatch[o]=A}var k=new Array(i.count);var T=new Array(i.count);for(m=0;m<i.count;m++){k[m]=c.c2p(s[m]);T[m]=d.c2p(l[m])}i.xpx=k;i.ypx=T}else{i.xpx=i.ypx=null}return a.visible?{viewport:b,range:y}:null});if(_){if(!u.select2d){u.select2d=n(s._glcanvas.data()[1].regl)}if(u.scatter2d&&u.selectBatch&&u.selectBatch.length){u.scatter2d.update(u.markerUnselectedOptions.map(function(e,t){return u.selectBatch[t]?e:null}))}if(u.select2d){u.select2d.update(u.markerOptions);u.select2d.update(u.markerSelectedOptions)}if(u.glText){r.forEach(function(e){if(e&&e[0]&&e[0].trace){R(e)}})}}if(u.fill2d){u.fill2d.update(w)}if(u.line2d){u.line2d.update(w)}if(u.error2d){u.error2d.update(w.concat(w))}if(u.scatter2d){u.scatter2d.update(w)}if(u.select2d){u.select2d.update(w)}if(u.glText){u.glText.forEach(function(e,t){e.update(w[t])})}u.draw();return}function L(e,t,r,n){var a=e.cd;var i=a[0].t;var o=a[0].trace;var s=e.xa;var l=e.ya;var u=i.x;var f=i.y;var c=s.c2p(t);var h=l.c2p(r);var d=e.distance;var v;if(i.tree){var p=s.p2c(c-d);var g=s.p2c(c+d);var m=l.p2c(h-d);var y=l.p2c(h+d);if(n==="x"){v=i.tree.range(Math.min(p,g),Math.min(l._rl[0],l._rl[1]),Math.max(p,g),Math.max(l._rl[0],l._rl[1]))}else{v=i.tree.range(Math.min(p,g),Math.min(m,y),Math.max(p,g),Math.max(m,y))}}else if(i.ids){v=i.ids}else return[e];var b,x,_,w,A,k,T,M;var E=d;if(n==="x"){for(w=0;w<v.length;w++){x=u[v[w]];A=Math.abs(s.c2p(x)-c);if(A<E){E=A;k=l.c2p(f[v[w]])-h;M=Math.sqrt(A*A+k*k);b=v[w]}}}else{for(w=0;w<v.length;w++){x=u[v[w]];_=f[v[w]];A=s.c2p(x)-c;k=l.c2p(_)-h;T=Math.sqrt(A*A+k*k);if(T<E){E=M=T;b=v[w]}}}e.index=b;e.distance=E;e.dxy=M;if(b===undefined)return[e];O(e,u,f,o);return[e]}function O(e,t,r,n){var a=e.xa;var i=e.ya;var o=e.distance;var s=e.dxy;var l=e.index;var c={pointNumber:l,x:t[l],y:r[l]};c.tx=Array.isArray(n.text)?n.text[l]:n.text;c.htx=Array.isArray(n.hovertext)?n.hovertext[l]:n.hovertext;c.data=Array.isArray(n.customdata)?n.customdata[l]:n.customdata;c.tp=Array.isArray(n.textposition)?n.textposition[l]:n.textposition;var h=n.textfont;if(h){c.ts=Array.isArray(h.size)?h.size[l]:h.size;c.tc=Array.isArray(h.color)?h.color[l]:h.color;c.tf=Array.isArray(h.family)?h.family[l]:h.family}var d=n.marker;if(d){c.ms=f.isArrayOrTypedArray(d.size)?d.size[l]:d.size;c.mo=f.isArrayOrTypedArray(d.opacity)?d.opacity[l]:d.opacity;c.mx=Array.isArray(d.symbol)?d.symbol[l]:d.symbol;c.mc=f.isArrayOrTypedArray(d.color)?d.color[l]:d.color}var v=d&&d.line;if(v){c.mlc=Array.isArray(v.color)?v.color[l]:v.color;c.mlw=f.isArrayOrTypedArray(v.width)?v.width[l]:v.width}var p=d&&d.gradient;if(p&&p.type!=="none"){c.mgt=Array.isArray(p.type)?p.type[l]:p.type;c.mgc=Array.isArray(p.color)?p.color[l]:p.color}var g=a.c2p(c.x,true);var m=i.c2p(c.y,true);var y=c.mrc||1;var _=n.hoverlabel;if(_){c.hbg=Array.isArray(_.bgcolor)?_.bgcolor[l]:_.bgcolor;c.hbc=Array.isArray(_.bordercolor)?_.bordercolor[l]:_.bordercolor;c.hts=Array.isArray(_.font.size)?_.font.size[l]:_.font.size;c.htc=Array.isArray(_.font.color)?_.font.color[l]:_.font.color;c.htf=Array.isArray(_.font.family)?_.font.family[l]:_.font.family;c.hnl=Array.isArray(_.namelength)?_.namelength[l]:_.namelength}var w=n.hoverinfo;if(w){c.hi=Array.isArray(w)?w[l]:w}var A={};A[e.index]=c;f.extendFlat(e,{color:b(n,c),x0:g-y,x1:g+y,xLabelVal:c.x,y0:m-y,y1:m+y,yLabelVal:c.y,cd:A,distance:o,spikeDistance:s});if(c.htx)e.text=c.htx;else if(c.tx)e.text=c.tx;else if(n.text)e.text=n.text;x(c,n,e);u.getComponentMethod("errorbars","hoverInfo")(c,n,e);return e}function I(e,t){var r=e.cd;var n=[];var a=r[0].trace;var i=r[0].t;var o=i.x;var l=i.y;var u=i._scene;if(!u)return n;var f=v.hasText(a);var c=v.hasMarkers(a);var h=!c&&!f;if(a.visible!==true||h)return n;var d=null;var p=null;var g;if(t!==false&&!t.degenerate){d=[],p=[];for(g=0;g<i.count;g++){if(t.contains([i.xpx[g],i.ypx[g]])){d.push(g);n.push({pointNumber:g,x:o[g],y:l[g]})}else{p.push(g)}}}else{p=s(i.count)}if(!u.selectBatch){u.selectBatch=[];u.unselectBatch=[]}if(!u.selectBatch[i.index]){for(g=0;g<u.count;g++){u.selectBatch[g]=[];u.unselectBatch[g]=[]}if(c){u.scatter2d.update(u.markerUnselectedOptions)}}u.selectBatch[i.index]=d;u.unselectBatch[i.index]=p;if(f){R(r)}return n}function D(e,t){if(!t)return;var r=t[0][0].t;var n=r._scene;if(!e._fullLayout._has("splom")){n.clear()}n.draw()}function R(e){var t=e[0];var r=t.t;var n=r._scene;var a=r.index;var i=n.selectBatch[a];var o=n.unselectBatch[a];var s=n.textOptions[a];var l=n.textSelectedOptions[a]||{};var u=n.textUnselectedOptions[a]||{};var c=f.extendFlat({},s);var h,v;if(i&&o){var p=l.color;var g=u.color;var m=s.color;var y=Array.isArray(m);c.color=new Array(r.count);for(h=0;h<i.length;h++){v=i[h];c.color[v]=p||(y?m[v]:m)}for(h=0;h<o.length;h++){v=o[h];var b=y?m[v]:m;c.color[v]=g?g:p?b:d.addOpacity(b,k)}}n.glText[a].update(c)}t.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),cleanData:e("../scatter/clean_data"),colorbar:e("../scatter/marker_colorbar"),calc:T,plot:S,hoverPoints:L,style:D,selectPoints:I,sceneOptions:M,sceneUpdate:E,calcHover:O,meta:{}}},{"../../components/color":323,"../../constants/interactions":423,"../../constants/numerical":424,"../../lib":445,"../../lib/prepare_regl":458,"../../plots/cartesian":503,"../../plots/cartesian/axis_ids":495,"../../registry":536,"../scatter/calc":598,"../scatter/clean_data":600,"../scatter/colorscale_calc":601,"../scatter/fill_hover_text":604,"../scatter/get_trace_color":606,"../scatter/link_traces":612,"../scatter/marker_colorbar":614,"../scatter/subtypes":619,"./attributes":623,"./constants":624,"./convert":625,"./defaults":626,"@etpinard/gl-text":11,"array-range":20,"point-cluster":236,"regl-error2d":254,"regl-line2d":255,"regl-scatter2d":256}],628:[function(e,t,r){"use strict";var n=e("../scattergl/attributes");var a=e("../../plots/cartesian/constants").idRegex;var i=e("../../plot_api/plot_template").templatedArray;function o(e){return{valType:"info_array",freeLength:true,editType:"calc",items:{valType:"subplotid",regex:a[e],editType:"plot"}}}t.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:true,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n.text,marker:n.marker,xaxes:o("x"),yaxes:o("y"),diagonal:{visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:true,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:true,editType:"calc"},selected:{marker:n.selected.marker,editType:"calc"},unselected:{marker:n.unselected.marker,editType:"calc"},opacity:n.opacity}},{"../../plot_api/plot_template":482,"../../plots/cartesian/constants":497,"../scattergl/attributes":623}],629:[function(e,t,r){"use strict";var n=e("regl-line2d");var a=e("../../registry");var i=e("../../lib");var o=e("../../lib/prepare_regl");var s=e("../../plots/get_data").getModuleCalcData;var l=e("../../plots/cartesian");var u=e("../../plots/cartesian/axis_ids");var f="splom";function c(e){var t=e._fullLayout;var r=a.getModule(f);var n=s(e.calcdata,r)[0];var i=o(e,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!i)return;if(t._hasOnlyLargeSploms){v(e)}r.plot(e,{},n)}function h(e){var t=e.calcdata;var r=e._fullLayout;if(r._hasOnlyLargeSploms){v(e)}for(var n=0;n<t.length;n++){var a=t[n][0];var i=a.trace;var o=a.t._scene;if(i.type==="splom"&&o&&o.matrix){d(e,i,o)}}}function d(e,t,r){var n=t.dimensions;var a=r.matrixOptions.data.length;var i=new Array(a);for(var o=0,s=0;o<n.length;o++){if(n[o].visible){var l=i[s]=new Array(4);var f=u.getFromId(e,t._diag[o][0]);if(f){l[0]=f.r2l(f.range[0]);l[2]=f.r2l(f.range[1])}var c=u.getFromId(e,t._diag[o][1]);if(c){l[1]=c.r2l(c.range[0]);l[3]=c.r2l(c.range[1])}s++}}if(r.selectBatch){r.matrix.update({ranges:i},{ranges:i});r.matrix.draw(r.unselectBatch,r.selectBatch)}else{r.matrix.update({ranges:i});r.matrix.draw()}}function v(e){var t=e._fullLayout;var r=t._glcanvas.data()[0].regl;var a=t._splomGrid;if(!a){a=t._splomGrid=n(r)}a.update(p(e));a.draw()}function p(e){var t=e._fullLayout;var r=t._size;var n=[0,0,t.width,t.height];var a={};var i;function o(e,t,r,i,o,s){var l=t[e+"color"];var u=t[e+"width"];var f=String(l+u);if(f in a){a[f].data.push(NaN,NaN,r,i,o,s)}else{a[f]={data:[r,i,o,s],join:"rect",thickness:u,color:l,viewport:n,range:n,overlay:false}}}for(i in t._splomSubplots){var s=t._plots[i];var l=s.xaxis;var u=s.yaxis;var f=l._vals;var c=u._vals;var h=r.b+u.domain[0]*r.h;var d=-u._m;var v=-d*u.r2l(u.range[0],u.calendar);var p,m;if(l.showgrid){for(i=0;i<f.length;i++){p=l._offset+l.l2p(f[i].x);o("grid",l,p,h,p,h+u._length)}}if(g(l)){p=l._offset+l.l2p(0);o("zeroline",l,p,h,p,h+u._length)}if(u.showgrid){for(i=0;i<c.length;i++){m=h+v+d*c[i].x;o("grid",u,l._offset,m,l._offset+l._length,m)}}if(g(u)){m=h+v+0;o("zeroline",u,l._offset,m,l._offset+l._length,m)}}var y=[];for(i in a){y.push(a[i])}return y}function g(e){var t=i.simpleMap(e.range,e.r2l);var r=e.l2p(0);return e.zeroline&&e._vals&&e._vals.length&&t[0]*t[1]<=0&&(e.type==="linear"||e.type==="-")&&(r>1&&r<e._length-1||!e.showline)}function m(e,t,r,n,a){var i=n._modules||[];var o=t._modules||[];var s,u;var f;for(f=0;f<i.length;f++){if(i[f].name==="splom"){s=true;break}}for(f=0;f<o.length;f++){if(o[f].name==="splom"){u=true;break}}if(s&&!u){for(f=0;f<a.length;f++){var c=a[f][0];var h=c.trace;var d=c.t._scene;if(h.type==="splom"&&d&&d.matrix&&d.matrix.destroy){d.matrix.destroy();c.t._scene=null}}}if(n._splomGrid&&(!t._hasOnlyLargeSploms&&n._hasOnlyLargeSploms)){n._splomGrid.destroy();n._splomGrid=null}l.clean(e,t,r,n)}t.exports={name:f,attr:l.attr,attrRegex:l.attrRegex,layoutAttributes:l.layoutAttributes,supplyLayoutDefaults:l.supplyLayoutDefaults,drawFramework:l.drawFramework,plot:c,drag:h,clean:m,updateFx:l.updateFx,toSVG:l.toSVG}},{"../../lib":445,"../../lib/prepare_regl":458,"../../plots/cartesian":503,"../../plots/cartesian/axis_ids":495,"../../plots/get_data":520,"../../registry":536,"regl-line2d":255}],630:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("../scatter/subtypes");var s=e("../scatter/marker_defaults");var l=e("../parcoords/merge_length");var u=/-open/;t.exports=function e(t,r,h,d){function v(e,a){return n.coerce(t,r,i,e,a)}var p=a(t,r,{name:"dimensions",handleItemDefaults:f});var g=v("diagonal.visible");var m=v("showupperhalf");var y=v("showlowerhalf");var b=l(r,p,"values");if(!b||!g&&!m&&!y){r.visible=false;return}v("text");s(t,r,h,d,v);var x=u.test(r.marker.symbol);var _=o.isBubble(r);v("marker.line.width",x||_?1:0);c(t,r,d,v);n.coerceSelectionMarkerOpacity(r,v)};function f(e,t){function r(r,a){return n.coerce(e,t,i.dimensions,r,a)}r("label");var a=r("values");if(!(a&&a.length))t.visible=false;else r("visible")}function c(e,t,r,n){var a=t.dimensions;var i=a.length;var o=t.showupperhalf;var s=t.showlowerhalf;var l=t.diagonal.visible;var u,f;var c=!l&&(!o||!s)?i-1:i;var p=n("xaxes",h("x",c));var g=n("yaxes",h("y",c));t._xaxes=v(p);t._yaxes=v(g);var m=Math.min(c,p.length,g.length);for(u=0;u<m;u++){for(f=0;f<m;f++){var y=[p[u]+g[f]];if(u>f&&o){r._splomSubplots[y]=1}else if(u<f&&s){r._splomSubplots[y]=1}else if(u===f&&(l||!s||!o)){r._splomSubplots[y]=1}}}var b=t._diag=new Array(i);var x=!l&&!s?-1:0;var _=!l&&!o?-1:0;for(u=0;u<i;u++){var w=a[u];var A=p[u+x];var k=g[u+_];d(r,A,w);d(r,k,w);b[u]=[A,k]}if(!s){r._splomGridDflt.xside="bottom";r._splomGridDflt.yside="left"}}function h(e,t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=e+(n?n+1:"")}return r}function d(e,t,r){if(!t)return;var n=t.charAt(0);var a=e._splomAxes[n];if(!(t in a)){a[t]=(r||{}).label||""}}function v(e){var t={};for(var r=0;r<e.length;r++){t[e[r]]=1}return t}},{"../../lib":445,"../../plots/array_container_defaults":488,"../parcoords/merge_length":587,"../scatter/marker_defaults":615,"../scatter/subtypes":619,"./attributes":628}],631:[function(e,t,r){"use strict";var n=e("regl-splom");var a=e("array-range");var i=e("../../registry");var o=e("../../components/grid");var s=e("../../lib");var l=e("../../plots/cartesian/axis_ids");var u=e("../scatter/subtypes");var f=e("../scatter/calc").calcMarkerSize;var c=e("../scatter/calc").calcAxisExpansion;var h=e("../scatter/colorscale_calc");var d=e("../scattergl/convert").markerSelection;var v=e("../scattergl/convert").markerStyle;var p=e("../scattergl").calcHover;var g=e("../../constants/numerical").BADNUM;var m=e("../scattergl/constants").TOO_MANY_POINTS;function y(e,t){var r=t.dimensions;var n=t._length;var a={};var i={};var o=i.cdata=[];var u=i.data=[];var p,g,y;for(p=0;p<r.length;p++){y=r[p];if(y.visible){var _=t._diag[p][0]||t._diag[p][1];var w=l.getFromId(e,_);if(w){var A=b(w,t,y);var k=w.type==="log"?s.simpleMap(A,w.c2l):A;o.push(A);u.push(k)}}}h(t);s.extendFlat(i,v(t));var T=o.length;var M=T*n>m;for(p=0,g=0;p<r.length;p++){y=r[p];if(y.visible){var E=l.getFromId(e,t._diag[p][0])||{};var C=l.getFromId(e,t._diag[p][1])||{};var S;if(M){S=2*(i.sizeAvg||Math.max(i.size,3))}else{S=f(t,n)}c(e,t,E,C,o[g],o[g],S);g++}}var L=a._scene=x(e,a);if(!L.matrix)L.matrix=true;L.matrixOptions=i;L.selectedOptions=d(t,t.selected);L.unselectedOptions=d(t,t.unselected);return[{x:false,y:false,t:a,trace:t}]}function b(e,t,r){var n=e.makeCalcdata({v:r.values,vcalendar:t.calendar},"v");for(var a=0;a<n.length;a++){n[a]=n[a]===g?NaN:n[a]}return n}function x(e,t){var r=t._scene;var n={dirty:true};var a={selectBatch:null,unselectBatch:null,matrix:false,select:null};if(!r){r=t._scene=s.extendFlat({},n,a);r.draw=function e(){if(r.matrix&&r.selectBatch){r.matrix.draw(r.unselectBatch,r.selectBatch)}else if(r.matrix){r.matrix.draw()}r.dirty=false};r.destroy=function e(){if(r.matrix)r.matrix.destroy();r.matrixOptions=null;r.selectBatch=null;r.unselectBatch=null;t._scene=null}}if(!r.dirty){s.extendFlat(r,n)}return r}function _(e,t,r){if(!r.length)return;for(var n=0;n<r.length;n++){w(e,r[n][0])}}function w(e,t){var r=e._fullLayout;var a=r._size;var i=t.trace;var o=t.t;var s=o._scene;var u=s.matrixOptions;var f=u.cdata;var c=r._glcanvas.data()[0].regl;var h=r.dragmode;var d,v;var p,g,m;if(f.length===0)return;u.lower=i.showupperhalf;u.upper=i.showlowerhalf;u.diagonal=i.diagonal.visible;var y=i.dimensions;var b=f.length;var x={};x.ranges=new Array(b);x.domains=new Array(b);for(p=0,m=0;p<y.length;p++){if(i.dimensions[p].visible){var _=x.ranges[m]=new Array(4);var w=x.domains[m]=new Array(4);d=l.getFromId(e,i._diag[p][0]);if(d){_[0]=d._rl[0];_[2]=d._rl[1];w[0]=d.domain[0];w[2]=d.domain[1]}v=l.getFromId(e,i._diag[p][1]);if(v){_[1]=v._rl[0];_[3]=v._rl[1];w[1]=v.domain[0];w[3]=v.domain[1]}m++}}x.viewport=[a.l,a.b,a.w+a.l,a.h+a.b];if(s.matrix===true){s.matrix=n(c)}var A=h==="lasso"||h==="select"||!!i.selectedpoints;s.selectBatch=null;s.unselectBatch=null;if(A){var k=i._length;if(!s.selectBatch){s.selectBatch=[];s.unselectBatch=[]}if(i.selectedpoints){s.selectBatch=i.selectedpoints;var T=i.selectedpoints;var M={};for(p=0;p<T.length;p++){M[T[p]]=true}var E=[];for(p=0;p<k;p++){if(!M[p])E.push(p)}s.unselectBatch=E}var C=o.xpx=new Array(b);var S=o.ypx=new Array(b);for(p=0,m=0;p<y.length;p++){if(i.dimensions[p].visible){d=l.getFromId(e,i._diag[p][0]);if(d){C[m]=new Array(k);for(g=0;g<k;g++){C[m][g]=d.c2p(f[m][g])}}v=l.getFromId(e,i._diag[p][1]);if(v){S[m]=new Array(k);for(g=0;g<k;g++){S[m][g]=v.c2p(f[m][g])}}m++}}if(s.selectBatch){s.matrix.update(u,u);s.matrix.update(s.unselectedOptions,s.selectedOptions);s.matrix.update(x,x)}else{s.matrix.update(x,null)}}else{s.matrix.update(u);s.matrix.update(x);o.xpx=o.ypx=null}s.draw()}function A(e,t,r){var n=e.cd;var a=n[0].trace;var i=n[0].t;var o=i._scene;var s=o.matrixOptions.cdata;var l=e.xa;var u=e.ya;var f=l.c2p(t);var c=u.c2p(r);var h=e.distance;var d=M(a,l);var v=M(a,u);if(d===false||v===false)return[e];var g=s[d];var m=s[v];var y,b;var x=h;for(var _=0;_<g.length;_++){var w=g[_];var A=m[_];var k=l.c2p(w)-f;var T=u.c2p(A)-c;var E=Math.sqrt(k*k+T*T);if(E<x){x=b=E;y=_}}e.index=y;e.distance=x;e.dxy=b;if(y===undefined)return[e];p(e,g,m,a);return[e]}function k(e,t){var r=e.cd;var n=r[0].trace;var i=r[0].t;var o=i._scene;var s=o.matrixOptions.cdata;var l=e.xaxis;var f=e.yaxis;var c=[];var h;if(!o)return c;var d=!u.hasMarkers(n)&&!u.hasText(n);if(n.visible!==true||d)return c;var v=M(n,l);var p=M(n,f);if(v===false||p===false)return c;var g=i.xpx[v];var m=i.ypx[p];var y=s[v];var b=s[p];var x=null;var _=null;if(t!==false&&!t.degenerate){x=[],_=[];for(h=0;h<y.length;h++){if(t.contains([g[h],m[h]])){x.push(h);c.push({pointNumber:h,x:y[h],y:b[h]})}else{_.push(h)}}}else{_=a(i.count)}if(!o.selectBatch){o.selectBatch=[];o.unselectBatch=[]}if(!o.selectBatch){for(h=0;h<o.count;h++){o.selectBatch=[];o.unselectBatch=[]}o.matrix.update(o.unselectedOptions,o.selectedOptions)}o.selectBatch=x;o.unselectBatch=_;return c}function T(e,t){if(!t)return;var r=e._fullLayout;var n=t[0];var a=n[0].t._scene;a.matrix.regl.clear({color:true,depth:true});if(r._splomGrid){r._splomGrid.draw()}for(var i=0;i<t.length;i++){var o=t[i][0].t._scene;o.draw()}if(r._has("cartesian")){for(var s in r._plots){var l=r._plots[s];if(l._scene)l._scene.draw()}}}function M(e,t){var r=t._id;var n=r.charAt(0);var a={x:0,y:1}[n];var i=e.dimensions;for(var o=0,s=0;o<i.length;o++){if(i[o].visible){if(e._diag[o][a]===r)return s;s++}}return false}t.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:y,plot:_,hoverPoints:A,selectPoints:k,style:T,meta:{}};i.register(o)},{"../../components/grid":369,"../../constants/numerical":424,"../../lib":445,"../../plots/cartesian/axis_ids":495,"../../registry":536,"../scatter/calc":598,"../scatter/colorscale_calc":601,"../scatter/marker_colorbar":614,"../scatter/subtypes":619,"../scattergl":627,"../scattergl/constants":624,"../scattergl/convert":625,"./attributes":628,"./base_plot":629,"./defaults":630,"array-range":20,"regl-splom":258}]},{},[6])(6)});