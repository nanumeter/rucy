/**
* plotly.js (geo - minified) v1.39.1
* Copyright 2012-2018, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.Plotly=e()}})(function(){var e,t,r;return function(){function e(t,r,n){function a(o,l){if(!r[o]){if(!t[o]){var s=typeof require=="function"&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<n.length;o++)a(n[o]);return a}return e}()({1:[function(e,t,r){"use strict";var n=e("../src/lib");var a={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in a){var o=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(o,a[i])}},{"../src/lib":164}],2:[function(e,t,r){"use strict";t.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:1e3,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:1e3,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"}}},{}],3:[function(e,t,r){"use strict";t.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":272}],4:[function(e,t,r){"use strict";t.exports=e("../src/core")},{"../src/core":147}],5:[function(e,t,r){"use strict";var n=e("./core");n.register([e("./scattergeo"),e("./choropleth")]);t.exports=n},{"./choropleth":3,"./core":4,"./scattergeo":6}],6:[function(e,t,r){"use strict";t.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":310}],7:[function(e,t,r){t.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],8:[function(t,r,n){!function(){var t={version:"3.5.17"};var n=[].slice,a=function(e){return n.call(e)};var i=this.document;function o(e){return e&&(e.ownerDocument||e.document||e).documentElement}function l(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(i){try{a(i.documentElement.childNodes)[0].nodeType}catch(e){a=function(e){var t=e.length,r=new Array(t);while(t--)r[t]=e[t];return r}}}if(!Date.now)Date.now=function(){return+new Date};if(i){try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var s=this.Element.prototype,u=s.setAttribute,c=s.setAttributeNS,f=this.CSSStyleDeclaration.prototype,d=f.setProperty;s.setAttribute=function(e,t){u.call(this,e,t+"")};s.setAttributeNS=function(e,t,r){c.call(this,e,t,r+"")};f.setProperty=function(e,t,r){d.call(this,e,t+"",r)}}}t.ascending=p;function p(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}t.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};t.min=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&a>i)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&a>i)a=i}return a};t.max=function(e,t){var r=-1,n=e.length,a,i;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=i;break}while(++r<n)if((i=e[r])!=null&&i>a)a=i}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>a)a=i}return a};t.extent=function(e,t){var r=-1,n=e.length,a,i,o;if(arguments.length===1){while(++r<n)if((i=e[r])!=null&&i>=i){a=o=i;break}while(++r<n)if((i=e[r])!=null){if(a>i)a=i;if(o<i)o=i}}else{while(++r<n)if((i=t.call(e,e[r],r))!=null&&i>=i){a=o=i;break}while(++r<n)if((i=t.call(e,e[r],r))!=null){if(a>i)a=i;if(o<i)o=i}}return[a,o]};function v(e){return e===null?NaN:+e}function h(e){return!isNaN(e)}t.sum=function(e,t){var r=0,n=e.length,a,i=-1;if(arguments.length===1){while(++i<n)if(h(a=+e[i]))r+=a}else{while(++i<n)if(h(a=+t.call(e,e[i],i)))r+=a}return r};t.mean=function(e,t){var r=0,n=e.length,a,i=-1,o=n;if(arguments.length===1){while(++i<n)if(h(a=v(e[i])))r+=a;else--o}else{while(++i<n)if(h(a=v(t.call(e,e[i],i))))r+=a;else--o}if(o)return r/o};t.quantile=function(e,t){var r=(e.length-1)*t+1,n=Math.floor(r),a=+e[n-1],i=r-n;return i?a+i*(e[n]-a):a};t.median=function(e,r){var n=[],a=e.length,i,o=-1;if(arguments.length===1){while(++o<a)if(h(i=v(e[o])))n.push(i)}else{while(++o<a)if(h(i=v(r.call(e,e[o],o))))n.push(i)}if(n.length)return t.quantile(n.sort(p),.5)};t.variance=function(e,t){var r=e.length,n=0,a,i,o=0,l=-1,s=0;if(arguments.length===1){while(++l<r){if(h(a=v(e[l]))){i=a-n;n+=i/++s;o+=i*(a-n)}}}else{while(++l<r){if(h(a=v(t.call(e,e[l],l)))){i=a-n;n+=i/++s;o+=i*(a-n)}}}if(s>1)return o/(s-1)};t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};function g(e){return{left:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)<0)n=i+1;else a=i}return n},right:function(t,r,n,a){if(arguments.length<3)n=0;if(arguments.length<4)a=t.length;while(n<a){var i=n+a>>>1;if(e(t[i],r)>0)a=i;else n=i+1}return n}}}var y=g(p);t.bisectLeft=y.left;t.bisect=t.bisectRight=y.right;t.bisector=function(e){return g(e.length===1?function(t,r){return p(e(t),r)}:e)};t.shuffle=function(e,t,r){if((n=arguments.length)<3){r=e.length;if(n<2)t=0}var n=r-t,a,i;while(n){i=Math.random()*n--|0;a=e[n+t],e[n+t]=e[i+t],e[i+t]=a}return e};t.permute=function(e,t){var r=t.length,n=new Array(r);while(r--)n[r]=e[t[r]];return n};t.pairs=function(e){var t=0,r=e.length-1,n,a=e[0],i=new Array(r<0?0:r);while(t<r)i[t]=[n=a,a=e[++t]];return i};t.transpose=function(e){if(!(o=e.length))return[];for(var r=-1,n=t.min(e,m),a=new Array(n);++r<n;){for(var i=-1,o,l=a[r]=new Array(o);++i<o;){l[i]=e[i][r]}}return a};function m(e){return e.length}t.zip=function(){return t.transpose(arguments)};t.keys=function(e){var t=[];for(var r in e)t.push(r);return t};t.values=function(e){var t=[];for(var r in e)t.push(e[r]);return t};t.entries=function(e){var t=[];for(var r in e)t.push({key:r,value:e[r]});return t};t.merge=function(e){var t=e.length,r,n=-1,a=0,i,o;while(++n<t)a+=e[n].length;i=new Array(a);while(--t>=0){o=e[t];r=o.length;while(--r>=0){i[--a]=o[r]}}return i};var x=Math.abs;t.range=function(e,t,r){if(arguments.length<3){r=1;if(arguments.length<2){t=e;e=0}}if((t-e)/r===Infinity)throw new Error("infinite range");var n=[],a=b(x(r)),i=-1,o;e*=a,t*=a,r*=a;if(r<0)while((o=e+r*++i)>t)n.push(o/a);else while((o=e+r*++i)<t)n.push(o/a);return n};function b(e){var t=1;while(e*t%1)t*=10;return t}function _(e,t){for(var r in t){Object.defineProperty(e.prototype,r,{value:t[r],enumerable:false})}}t.map=function(e,t){var r=new w;if(e instanceof w){e.forEach(function(e,t){r.set(e,t)})}else if(Array.isArray(e)){var n=-1,a=e.length,i;if(arguments.length===1)while(++n<a)r.set(n,e[n]);else while(++n<a)r.set(t.call(e,i=e[n],n),i)}else{for(var o in e)r.set(o,e[o])}return r};function w(){this._=Object.create(null)}var k="__proto__",M="\0";_(w,{has:L,get:function(e){return this._[A(e)]},set:function(e,t){return this._[A(e)]=t},remove:S,keys:C,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:P,empty:z,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}});function A(e){return(e+="")===k||e[0]===M?M+e:e}function T(e){return(e+="")[0]===M?e.slice(1):e}function L(e){return A(e)in this._}function S(e){return(e=A(e))in this._&&delete this._[e]}function C(){var e=[];for(var t in this._)e.push(T(t));return e}function P(){var e=0;for(var t in this._)++e;return e}function z(){for(var e in this._)return false;return true}t.nest=function(){var e={},r=[],n=[],a,i;function o(t,n,l){if(l>=r.length)return i?i.call(e,n):a?n.sort(a):n;var s=-1,u=n.length,c=r[l++],f,d,p,v=new w,h;while(++s<u){if(h=v.get(f=c(d=n[s]))){h.push(d)}else{v.set(f,[d])}}if(t){d=t();p=function(e,r){d.set(e,o(t,r,l))}}else{d={};p=function(e,r){d[e]=o(t,r,l)}}v.forEach(p);return d}function l(e,t){if(t>=r.length)return e;var a=[],i=n[t++];e.forEach(function(e,r){a.push({key:e,values:l(r,t)})});return i?a.sort(function(e,t){return i(e.key,t.key)}):a}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return l(o(t.map,e,0),0)};e.key=function(t){r.push(t);return e};e.sortKeys=function(t){n[r.length-1]=t;return e};e.sortValues=function(t){a=t;return e};e.rollup=function(t){i=t;return e};return e};t.set=function(e){var t=new O;if(e)for(var r=0,n=e.length;r<n;++r)t.add(e[r]);return t};function O(){this._=Object.create(null)}_(O,{has:L,add:function(e){this._[A(e+="")]=true;return e},remove:S,values:C,size:P,empty:z,forEach:function(e){for(var t in this._)e.call(this,T(t))}});t.behavior={};function D(e){return e}t.rebind=function(e,t){var r=1,n=arguments.length,a;while(++r<n)e[a=arguments[r]]=E(e,t,t[a]);return e};function E(e,t,r){return function(){var n=r.apply(t,arguments);return n===t?e:n}}function R(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var r=0,n=I.length;r<n;++r){var a=I[r]+t;if(a in e)return a}}var I=["webkit","ms","moz","Moz","o","O"];function N(){}t.dispatch=function(){var e=new F,t=-1,r=arguments.length;while(++t<r)e[arguments[t]]=j(e);return e};function F(){}F.prototype.on=function(e,t){var r=e.indexOf("."),n="";if(r>=0){n=e.slice(r+1);e=e.slice(0,r)}if(e)return arguments.length<2?this[e].on(n):this[e].on(n,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(n,null)}return this}};function j(e){var t=[],r=new w;function n(){var r=t,n=-1,a=r.length,i;while(++n<a)if(i=r[n].on)i.apply(this,arguments);return e}n.on=function(n,a){var i=r.get(n),o;if(arguments.length<2)return i&&i.on;if(i){i.on=null;t=t.slice(0,o=t.indexOf(i)).concat(t.slice(o+1));r.remove(n)}if(a)t.push(r.set(n,{on:a}));return e};return n}t.event=null;function B(){t.event.preventDefault()}function q(){var e=t.event,r;while(r=e.sourceEvent)e=r;return e}function H(e){var r=new F,n=0,a=arguments.length;while(++n<a)r[arguments[n]]=j(r);r.of=function(n,a){return function(i){try{var o=i.sourceEvent=t.event;i.target=e;t.event=i;r[i.type].apply(n,a)}finally{t.event=o}}};return r}t.requote=function(e){return e.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var V={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)e[r]=t[r]};function G(e){V(e,W);return e}var Y=function(e,t){return t.querySelector(e)},Z=function(e,t){return t.querySelectorAll(e)},X=function(e,t){var r=e.matches||e[R(e,"matchesSelector")];X=function(e,t){return r.call(e,t)};return X(e,t)};if(typeof Sizzle==="function"){Y=function(e,t){return Sizzle(e,t)[0]||null};Z=Sizzle;X=Sizzle.matchesSelector}t.selection=function(){return t.select(i.documentElement)};var W=t.selection.prototype=[];W.select=function(e){var t=[],r,n,a,i;e=J(e);for(var o=-1,l=this.length;++o<l;){t.push(r=[]);r.parentNode=(a=this[o]).parentNode;for(var s=-1,u=a.length;++s<u;){if(i=a[s]){r.push(n=e.call(i,i.__data__,s,o));if(n&&"__data__"in i)n.__data__=i.__data__}else{r.push(null)}}}return G(t)};function J(e){return typeof e==="function"?e:function(){return Y(e,this)}}W.selectAll=function(e){var t=[],r,n;e=Q(e);for(var i=-1,o=this.length;++i<o;){for(var l=this[i],s=-1,u=l.length;++s<u;){if(n=l[s]){t.push(r=a(e.call(n,n.__data__,s,i)));r.parentNode=n}}}return G(t)};function Q(e){return typeof e==="function"?e:function(){return Z(e,this)}}var $="http://www.w3.org/1999/xhtml";var K={svg:"http://www.w3.org/2000/svg",xhtml:$,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};t.ns={prefix:K,qualify:function(e){var t=e.indexOf(":"),r=e;if(t>=0&&(r=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return K.hasOwnProperty(r)?{space:K[r],local:e}:e}};W.attr=function(e,r){if(arguments.length<2){if(typeof e==="string"){var n=this.node();e=t.ns.qualify(e);return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(r in e)this.each(ee(r,e[r]));return this}return this.each(ee(e,r))};function ee(e,r){e=t.ns.qualify(e);function n(){this.removeAttribute(e)}function a(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,r)}function o(){this.setAttributeNS(e.space,e.local,r)}function l(){var t=r.apply(this,arguments);if(t==null)this.removeAttribute(e);else this.setAttribute(e,t)}function s(){var t=r.apply(this,arguments);if(t==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,t)}return r==null?e.local?a:n:typeof r==="function"?e.local?s:l:e.local?o:i}function te(e){return e.trim().replace(/\s+/g," ")}W.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var r=this.node(),n=(e=ne(e)).length,a=-1;if(t=r.classList){while(++a<n)if(!t.contains(e[a]))return false}else{t=r.getAttribute("class");while(++a<n)if(!re(e[a]).test(t))return false}return true}for(t in e)this.each(ae(t,e[t]));return this}return this.each(ae(e,t))};function re(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function ne(e){return(e+"").trim().split(/^|\s+/)}function ae(e,t){e=ne(e).map(ie);var r=e.length;function n(){var n=-1;while(++n<r)e[n](this,t)}function a(){var n=-1,a=t.apply(this,arguments);while(++n<r)e[n](this,a)}return typeof t==="function"?a:n}function ie(e){var t=re(e);return function(r,n){if(a=r.classList)return n?a.add(e):a.remove(e);var a=r.getAttribute("class")||"";if(n){t.lastIndex=0;if(!t.test(a))r.setAttribute("class",te(a+" "+e))}else{r.setAttribute("class",te(a.replace(t," ")))}}}W.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.each(oe(r,e[r],t));return this}if(n<2){var a=this.node();return l(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(oe(e,t,r))};function oe(e,t,r){function n(){this.style.removeProperty(e)}function a(){this.style.setProperty(e,t,r)}function i(){var n=t.apply(this,arguments);if(n==null)this.style.removeProperty(e);else this.style.setProperty(e,n,r)}return t==null?n:typeof t==="function"?i:a}W.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(le(t,e[t]));return this}return this.each(le(e,t))};function le(e,t){function r(){delete this[e]}function n(){this[e]=t}function a(){var r=t.apply(this,arguments);if(r==null)delete this[e];else this[e]=r}return t==null?r:typeof t==="function"?a:n}W.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};W.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};W.append=function(e){e=se(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function se(e){function r(){var t=this.ownerDocument,r=this.namespaceURI;return r===$&&t.documentElement.namespaceURI===$?t.createElement(e):t.createElementNS(r,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=t.ns.qualify(e)).local?n:r}W.insert=function(e,t){e=se(e);t=J(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};W.remove=function(){return this.each(ue)};function ue(){var e=this.parentNode;if(e)e.removeChild(this)}W.data=function(e,t){var r=-1,n=this.length,a,i;if(!arguments.length){e=new Array(n=(a=this[0]).length);while(++r<n){if(i=a[r]){e[r]=i.__data__}}return e}function o(e,r){var n,a=e.length,i=r.length,o=Math.min(a,i),c=new Array(i),f=new Array(i),d=new Array(a),p,v;if(t){var h=new w,g=new Array(a),y;for(n=-1;++n<a;){if(p=e[n]){if(h.has(y=t.call(p,p.__data__,n))){d[n]=p}else{h.set(y,p)}g[n]=y}}for(n=-1;++n<i;){if(!(p=h.get(y=t.call(r,v=r[n],n)))){f[n]=ce(v)}else if(p!==true){c[n]=p;p.__data__=v}h.set(y,true)}for(n=-1;++n<a;){if(n in g&&h.get(g[n])!==true){d[n]=e[n]}}}else{for(n=-1;++n<o;){p=e[n];v=r[n];if(p){p.__data__=v;c[n]=p}else{f[n]=ce(v)}}for(;n<i;++n){f[n]=ce(r[n])}for(;n<a;++n){d[n]=e[n]}}f.update=c;f.parentNode=c.parentNode=d.parentNode=e.parentNode;l.push(f);s.push(c);u.push(d)}var l=ve([]),s=G([]),u=G([]);if(typeof e==="function"){while(++r<n){o(a=this[r],e.call(a,a.parentNode.__data__,r))}}else{while(++r<n){o(a=this[r],e)}}s.enter=function(){return l};s.exit=function(){return u};return s};function ce(e){return{__data__:e}}W.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};W.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=fe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);r.parentNode=(n=this[i]).parentNode;for(var l=0,s=n.length;l<s;l++){if((a=n[l])&&e.call(a,a.__data__,l,i)){r.push(a)}}}return G(t)};function fe(e){return function(){return X(this,e)}}W.order=function(){for(var e=-1,t=this.length;++e<t;){for(var r=this[e],n=r.length-1,a=r[n],i;--n>=0;){if(i=r[n]){if(a&&a!==i.nextSibling)a.parentNode.insertBefore(i,a);a=i}}}return this};W.sort=function(e){e=de.apply(this,arguments);for(var t=-1,r=this.length;++t<r;)this[t].sort(e);return this.order()};function de(e){if(!arguments.length)e=p;return function(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}}W.each=function(e){return pe(this,function(t,r,n){e.call(t,t.__data__,r,n)})};function pe(e,t){for(var r=0,n=e.length;r<n;r++){for(var a=e[r],i=0,o=a.length,l;i<o;i++){if(l=a[i])t(l,i,r)}}return e}W.call=function(e){var t=a(arguments);e.apply(t[0]=this,t);return this};W.empty=function(){return!this.node()};W.node=function(){for(var e=0,t=this.length;e<t;e++){for(var r=this[e],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}}return null};W.size=function(){var e=0;pe(this,function(){++e});return e};function ve(e){V(e,he);return e}var he=[];t.selection.enter=ve;t.selection.enter.prototype=he;he.append=W.append;he.empty=W.empty;he.node=W.node;he.call=W.call;he.size=W.size;he.select=function(e){var t=[],r,n,a,i,o;for(var l=-1,s=this.length;++l<s;){a=(i=this[l]).update;t.push(r=[]);r.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;){if(o=i[u]){r.push(a[u]=n=e.call(i.parentNode,o.__data__,u,l));n.__data__=o.__data__}else{r.push(null)}}}return G(t)};he.insert=function(e,t){if(arguments.length<2)t=ge(this);return W.insert.call(this,e,t)};function ge(e){var t,r;return function(n,a,i){var o=e[i].update,l=o.length,s;if(i!=r)r=i,t=0;if(a>=t)t=a+1;while(!(s=o[t])&&++t<l);return s}}t.select=function(e){var t;if(typeof e==="string"){t=[Y(e,i)];t.parentNode=i.documentElement}else{t=[e];t.parentNode=o(e)}return G([t])};t.selectAll=function(e){var t;if(typeof e==="string"){t=a(Z(e,i));t.parentNode=i.documentElement}else{t=a(e);t.parentNode=null}return G([t])};W.on=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t=false;for(r in e)this.each(ye(r,e[r],t));return this}if(n<2)return(n=this.node()["__on"+e])&&n._;r=false}return this.each(ye(e,t,r))};function ye(e,r,n){var i="__on"+e,o=e.indexOf("."),l=xe;if(o>0)e=e.slice(0,o);var s=me.get(e);if(s)e=s,l=be;function u(){var t=this[i];if(t){this.removeEventListener(e,t,t.$);delete this[i]}}function c(){var t=l(r,a(arguments));u.call(this);this.addEventListener(e,this[i]=t,t.$=n);t._=r}function f(){var r=new RegExp("^__on([^.]+)"+t.requote(e)+"$"),n;for(var a in this){if(n=a.match(r)){var i=this[a];this.removeEventListener(n[1],i,i.$);delete this[a]}}}return o?r?c:u:r?N:f}var me=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(i){me.forEach(function(e){if("on"+e in i)me.remove(e)})}function xe(e,r){return function(n){var a=t.event;t.event=n;r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=a}}}function be(e,t){var r=xe(e,t);return function(e){var t=this,n=e.relatedTarget;if(!n||n!==t&&!(n.compareDocumentPosition(t)&8)){r.call(t,e)}}}var _e,we=0;function ke(e){var r=".dragsuppress-"+ ++we,n="click"+r,a=t.select(l(e)).on("touchmove"+r,B).on("dragstart"+r,B).on("selectstart"+r,B);if(_e==null){_e="onselectstart"in e?false:R(e.style,"userSelect")}if(_e){var i=o(e).style,s=i[_e];i[_e]="none"}return function(e){a.on(r,null);if(_e)i[_e]=s;if(e){var t=function(){a.on(n,null)};a.on(n,function(){B();t()},true);setTimeout(t,0)}}}t.mouse=function(e){return Ae(e,q())};var Me=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ae(e,r){if(r.changedTouches)r=r.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();if(Me<0){var i=l(e);if(i.scrollX||i.scrollY){n=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();Me=!(o.f||o.e);n.remove()}}if(Me)a.x=r.pageX,a.y=r.pageY;else a.x=r.clientX,a.y=r.clientY;a=a.matrixTransform(e.getScreenCTM().inverse());return[a.x,a.y]}var s=e.getBoundingClientRect();return[r.clientX-s.left-e.clientLeft,r.clientY-s.top-e.clientTop]}t.touch=function(e,t,r){if(arguments.length<3)r=t,t=q().changedTouches;if(t)for(var n=0,a=t.length,i;n<a;++n){if((i=t[n]).identifier===r){return Ae(e,i)}}};t.behavior.drag=function(){var e=H(i,"drag","dragstart","dragend"),r=null,n=o(N,t.mouse,l,"mousemove","mouseup"),a=o(Te,t.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",a)}function o(n,a,i,o,l){return function(){var s=this,u=t.event.target.correspondingElement||t.event.target,c=s.parentNode,f=e.of(s,arguments),d=0,p=n(),v=".drag"+(p==null?"":"-"+p),h,g=t.select(i(u)).on(o+v,x).on(l+v,b),y=ke(u),m=a(c,p);if(r){h=r.apply(s,arguments);h=[h.x-m[0],h.y-m[1]]}else{h=[0,0]}f({type:"dragstart"});function x(){var e=a(c,p),t,r;if(!e)return;t=e[0]-m[0];r=e[1]-m[1];d|=t|r;m=e;f({type:"drag",x:e[0]+h[0],y:e[1]+h[1],dx:t,dy:r})}function b(){if(!a(c,p))return;g.on(o+v,null).on(l+v,null);y(d);f({type:"dragend"})}}}i.origin=function(e){if(!arguments.length)return r;r=e;return i};return t.rebind(i,e,"on")};function Te(){return t.event.changedTouches[0].identifier}t.touches=function(e,t){if(arguments.length<2)t=q().touches;return t?a(t).map(function(t){var r=Ae(e,t);r.identifier=t.identifier;return r}):[]};var Le=1e-6,Se=Le*Le,Ce=Math.PI,Pe=2*Ce,ze=Pe-Le,Oe=Ce/2,De=Ce/180,Ee=180/Ce;function Re(e){return e>0?1:e<0?-1:0}function Ie(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0])}function Ne(e){return e>1?0:e<-1?Ce:Math.acos(e)}function Fe(e){return e>1?Oe:e<-1?-Oe:Math.asin(e)}function je(e){return((e=Math.exp(e))-1/e)/2}function Be(e){return((e=Math.exp(e))+1/e)/2}function qe(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Ue=Math.SQRT2,Ve=2,Ge=4;t.interpolateZoom=function(e,t){var r=e[0],n=e[1],a=e[2],i=t[0],o=t[1],l=t[2],s=i-r,u=o-n,c=s*s+u*u,f,d;if(c<Se){d=Math.log(l/a)/Ue;f=function(e){return[r+e*s,n+e*u,a*Math.exp(Ue*e*d)]}}else{var p=Math.sqrt(c),v=(l*l-a*a+Ge*c)/(2*a*Ve*p),h=(l*l-a*a-Ge*c)/(2*l*Ve*p),g=Math.log(Math.sqrt(v*v+1)-v),y=Math.log(Math.sqrt(h*h+1)-h);d=(y-g)/Ue;f=function(e){var t=e*d,i=Be(g),o=a/(Ve*p)*(i*qe(Ue*t+g)-je(g));return[r+o*s,n+o*u,a*i/Be(Ue*t+g)]}}f.duration=d*1e3;return f};t.behavior.zoom=function(){var e={x:0,y:0,k:1},r,n,a,o=[960,500],s=Ye,u=250,c=0,f="mousedown.zoom",d="mousemove.zoom",p="mouseup.zoom",v,h="touchstart.zoom",g,y=H(w,"zoomstart","zoom","zoomend"),m,x,b,_;if(!Xe){Xe="onwheel"in i?(Ze=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ze=function(){return t.event.wheelDelta},"mousewheel"):(Ze=function(){return-t.event.detail},"MozMousePixelScroll")}function w(e){e.on(f,O).on(Xe+".zoom",E).on("dblclick.zoom",R).on(h,D)}w.event=function(r){r.each(function(){var r=y.of(this,arguments),a=e;if(Os){t.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};C(r)}).tween("zoom:zoom",function(){var i=o[0],l=o[1],s=n?n[0]:i/2,u=n?n[1]:l/2,c=t.interpolateZoom([(s-e.x)/e.k,(u-e.y)/e.k,i/e.k],[(s-a.x)/a.k,(u-a.y)/a.k,i/a.k]);return function(t){var n=c(t),a=i/n[2];this.__chart__=e={x:s-n[0]*a,y:u-n[1]*a,k:a};P(r)}}).each("interrupt.zoom",function(){z(r)}).each("end.zoom",function(){z(r)})}else{this.__chart__=e;C(r);P(r);z(r)}})};w.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};S();return w};w.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};A(+t);S();return w};w.scaleExtent=function(e){if(!arguments.length)return s;s=e==null?Ye:[+e[0],+e[1]];return w};w.center=function(e){if(!arguments.length)return a;a=e&&[+e[0],+e[1]];return w};w.size=function(e){if(!arguments.length)return o;o=e&&[+e[0],+e[1]];return w};w.duration=function(e){if(!arguments.length)return u;u=+e;return w};w.x=function(t){if(!arguments.length)return x;x=t;m=t.copy();e={x:0,y:0,k:1};return w};w.y=function(t){if(!arguments.length)return _;_=t;b=t.copy();e={x:0,y:0,k:1};return w};function k(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function M(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function A(t){e.k=Math.max(s[0],Math.min(s[1],t))}function T(t,r){r=M(r);e.x+=t[0]-r[0];e.y+=t[1]-r[1]}function L(r,a,i,o){r.__chart__={x:e.x,y:e.y,k:e.k};A(Math.pow(2,o));T(n=a,i);r=t.select(r);if(u>0)r=r.transition().duration(u);r.call(w.event)}function S(){if(x)x.domain(m.range().map(function(t){return(t-e.x)/e.k}).map(m.invert));if(_)_.domain(b.range().map(function(t){return(t-e.y)/e.k}).map(b.invert))}function C(e){if(!c++)e({type:"zoomstart"})}function P(t){S();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function z(e){if(!--c)e({type:"zoomend"}),n=null}function O(){var e=this,r=y.of(e,arguments),n=0,a=t.select(l(e)).on(d,s).on(p,u),i=k(t.mouse(e)),o=ke(e);Ls.call(e);C(r);function s(){n=1;T(t.mouse(e),i);P(r)}function u(){a.on(d,null).on(p,null);o(n);z(r)}}function D(){var r=this,n=y.of(r,arguments),a={},i=0,o,l=".zoom-"+t.event.changedTouches[0].identifier,s="touchmove"+l,u="touchend"+l,c=[],d=t.select(r),p=ke(r);m();C(n);d.on(f,null).on(h,m);function v(){var n=t.touches(r);o=e.k;n.forEach(function(e){if(e.identifier in a)a[e.identifier]=k(e)});return n}function m(){var n=t.event.target;t.select(n).on(s,x).on(u,b);c.push(n);var o=t.event.changedTouches;for(var l=0,f=o.length;l<f;++l){a[o[l].identifier]=null}var d=v(),p=Date.now();if(d.length===1){if(p-g<500){var h=d[0];L(r,h,a[h.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);B()}g=p}else if(d.length>1){var h=d[0],y=d[1],m=h[0]-y[0],_=h[1]-y[1];i=m*m+_*_}}function x(){var e=t.touches(r),l,s,u,c;Ls.call(r);for(var f=0,d=e.length;f<d;++f,c=null){u=e[f];if(c=a[u.identifier]){if(s)break;l=u,s=c}}if(c){var p=(p=u[0]-l[0])*p+(p=u[1]-l[1])*p,v=i&&Math.sqrt(p/i);l=[(l[0]+u[0])/2,(l[1]+u[1])/2];s=[(s[0]+c[0])/2,(s[1]+c[1])/2];A(v*o)}g=null;T(l,s);P(n)}function b(){if(t.event.touches.length){var e=t.event.changedTouches;for(var r=0,i=e.length;r<i;++r){delete a[e[r].identifier]}for(var o in a){return void v()}}t.selectAll(c).on(l,null);d.on(f,O).on(h,D);p();z(n)}}function E(){var i=y.of(this,arguments);if(v)clearTimeout(v);else Ls.call(this),r=k(n=a||t.mouse(this)),C(i);v=setTimeout(function(){v=null;z(i)},50);B();A(Math.pow(2,Ze()*.002)*e.k);T(n,r);P(i)}function R(){var r=t.mouse(this),n=Math.log(e.k)/Math.LN2;L(this,r,k(r),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return t.rebind(w,y,"on")};var Ye=[0,Infinity],Ze,Xe;t.color=We;function We(){}We.prototype.toString=function(){return this.rgb()+""};t.hsl=Je;function Je(e,t,r){return this instanceof Je?void(this.h=+e,this.s=+t,this.l=+r):arguments.length<2?e instanceof Je?new Je(e.h,e.s,e.l):mt(""+e,xt,Je):new Je(e,t,r)}var Qe=Je.prototype=new We;Qe.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new Je(this.h,this.s,this.l/e)};Qe.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new Je(this.h,this.s,e*this.l)};Qe.rgb=function(){return $e(this.h,this.s,this.l)};function $e(e,t,r){var n,a;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;r=r<0?0:r>1?1:r;a=r<=.5?r*(1+t):r+t-r*t;n=2*r-a;function i(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return n+(a-n)*e/60;if(e<180)return a;if(e<240)return n+(a-n)*(240-e)/60;return n}function o(e){return Math.round(i(e)*255)}return new pt(o(e+120),o(e),o(e-120))}t.hcl=Ke;function Ke(e,r,n){return this instanceof Ke?void(this.h=+e,this.c=+r,this.l=+n):arguments.length<2?e instanceof Ke?new Ke(e.h,e.c,e.l):e instanceof rt?ut(e.l,e.a,e.b):ut((e=bt((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ke(e,r,n)}var et=Ke.prototype=new We;et.brighter=function(e){return new Ke(this.h,this.c,Math.min(100,this.l+nt*(arguments.length?e:1)))};et.darker=function(e){return new Ke(this.h,this.c,Math.max(0,this.l-nt*(arguments.length?e:1)))};et.rgb=function(){return tt(this.h,this.c,this.l).rgb()};function tt(e,t,r){if(isNaN(e))e=0;if(isNaN(t))t=0;return new rt(r,Math.cos(e*=De)*t,Math.sin(e)*t)}t.lab=rt;function rt(e,t,r){return this instanceof rt?void(this.l=+e,this.a=+t,this.b=+r):arguments.length<2?e instanceof rt?new rt(e.l,e.a,e.b):e instanceof Ke?tt(e.h,e.c,e.l):bt((e=pt(e)).r,e.g,e.b):new rt(e,t,r)}var nt=18;var at=.95047,it=1,ot=1.08883;var lt=rt.prototype=new We;lt.brighter=function(e){return new rt(Math.min(100,this.l+nt*(arguments.length?e:1)),this.a,this.b)};lt.darker=function(e){return new rt(Math.max(0,this.l-nt*(arguments.length?e:1)),this.a,this.b)};lt.rgb=function(){return st(this.l,this.a,this.b)};function st(e,t,r){var n=(e+16)/116,a=n+t/500,i=n-r/200;a=ct(a)*at;n=ct(n)*it;i=ct(i)*ot;return new pt(dt(3.2404542*a-1.5371385*n-.4985314*i),dt(-.969266*a+1.8760108*n+.041556*i),dt(.0556434*a-.2040259*n+1.0572252*i))}function ut(e,t,r){return e>0?new Ke(Math.atan2(r,t)*Ee,Math.sqrt(t*t+r*r),e):new Ke(NaN,NaN,e)}function ct(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ft(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function dt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}t.rgb=pt;function pt(e,t,r){return this instanceof pt?void(this.r=~~e,this.g=~~t,this.b=~~r):arguments.length<2?e instanceof pt?new pt(e.r,e.g,e.b):mt(""+e,pt,$e):new pt(e,t,r)}function vt(e){return new pt(e>>16,e>>8&255,e&255)}function ht(e){return vt(e)+""}var gt=pt.prototype=new We;gt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,r=this.g,n=this.b,a=30;if(!t&&!r&&!n)return new pt(a,a,a);if(t&&t<a)t=a;if(r&&r<a)r=a;if(n&&n<a)n=a;return new pt(Math.min(255,t/e),Math.min(255,r/e),Math.min(255,n/e))};gt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new pt(e*this.r,e*this.g,e*this.b)};gt.hsl=function(){return xt(this.r,this.g,this.b)};gt.toString=function(){return"#"+yt(this.r)+yt(this.g)+yt(this.b)};function yt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function mt(e,t,r){var n=0,a=0,i=0,o,l,s;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){l=o[2].split(",");switch(o[1]){case"hsl":{return r(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100)}case"rgb":{return t(wt(l[0]),wt(l[1]),wt(l[2]))}}}if(s=kt.get(e)){return t(s.r,s.g,s.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(s=parseInt(e.slice(1),16))){if(e.length===4){n=(s&3840)>>4;n=n>>4|n;a=s&240;a=a>>4|a;i=s&15;i=i<<4|i}else if(e.length===7){n=(s&16711680)>>16;a=(s&65280)>>8;i=s&255}}return t(n,a,i)}function xt(e,t,r){var n=Math.min(e/=255,t/=255,r/=255),a=Math.max(e,t,r),i=a-n,o,l,s=(a+n)/2;if(i){l=s<.5?i/(a+n):i/(2-a-n);if(e==a)o=(t-r)/i+(t<r?6:0);else if(t==a)o=(r-e)/i+2;else o=(e-t)/i+4;o*=60}else{o=NaN;l=s>0&&s<1?0:o}return new Je(o,l,s)}function bt(e,t,r){e=_t(e);t=_t(t);r=_t(r);var n=ft((.4124564*e+.3575761*t+.1804375*r)/at),a=ft((.2126729*e+.7151522*t+.072175*r)/it),i=ft((.0193339*e+.119192*t+.9503041*r)/ot);return rt(116*a-16,500*(n-a),200*(a-i))}function _t(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function wt(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var kt=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});kt.forEach(function(e,t){kt.set(e,vt(t))});function Mt(e){return typeof e==="function"?e:function(){return e}}t.functor=Mt;t.xhr=At(D);function At(e){return function(t,r,n){if(arguments.length===2&&typeof r==="function")n=r,r=null;return Tt(t,r,e,n)}}function Tt(e,r,n,i){var o={},l=t.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in u)&&/^(http(s)?:)?\/\//.test(e))u=new XDomainRequest;"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()};function f(){var e=u.status,t;if(!e&&St(u)||e>=200&&e<300||e===304){try{t=n.call(o,u)}catch(e){l.error.call(o,e);return}l.load.call(o,t)}else{l.error.call(o,u)}}u.onprogress=function(e){var r=t.event;t.event=e;try{l.progress.call(o,u)}finally{t.event=r}};o.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return s[e];if(t==null)delete s[e];else s[e]=t+"";return o};o.mimeType=function(e){if(!arguments.length)return r;r=e==null?null:e+"";return o};o.responseType=function(e){if(!arguments.length)return c;c=e;return o};o.response=function(e){n=e;return o};["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(a(arguments)))}});o.send=function(t,n,a){if(arguments.length===2&&typeof n==="function")a=n,n=null;u.open(t,e,true);if(r!=null&&!("accept"in s))s["accept"]=r+",*/*";if(u.setRequestHeader)for(var i in s)u.setRequestHeader(i,s[i]);if(r!=null&&u.overrideMimeType)u.overrideMimeType(r);if(c!=null)u.responseType=c;if(a!=null)o.on("error",a).on("load",function(e){a(null,e)});l.beforesend.call(o,u);u.send(n==null?null:n);return o};o.abort=function(){u.abort();return o};t.rebind(o,l,"on");return i==null?o:o.get(Lt(i))}function Lt(e){return e.length===1?function(t,r){e(t==null?r:null)}:e}function St(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}t.dsv=function(e,t){var r=new RegExp('["'+e+"\n]"),n=e.charCodeAt(0);function a(e,r,n){if(arguments.length<3)n=r,r=null;var a=Tt(e,t,r==null?i:o(r),n);a.row=function(e){return arguments.length?a.response((r=e)==null?i:o(e)):r};return a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}a.parse=function(e,t){var r;return a.parseRows(e,function(e,n){if(r)return r(e,n-1);var a=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,r){return t(a(e),r)}:a})};a.parseRows=function(e,t){var r={},a={},i=[],o=e.length,l=0,s=0,u,c;function f(){if(l>=o)return a;if(c)return c=false,r;var t=l;if(e.charCodeAt(t)===34){var i=t;while(i++<o){if(e.charCodeAt(i)===34){if(e.charCodeAt(i+1)!==34)break;++i}}l=i+2;var s=e.charCodeAt(i+1);if(s===13){c=true;if(e.charCodeAt(i+2)===10)++l}else if(s===10){c=true}return e.slice(t+1,i).replace(/""/g,'"')}while(l<o){var s=e.charCodeAt(l++),u=1;if(s===10)c=true;else if(s===13){c=true;if(e.charCodeAt(l)===10)++l,++u}else if(s!==n)continue;return e.slice(t,l-u)}return e.slice(t)}while((u=f())!==a){var d=[];while(u!==r&&u!==a){d.push(u);u=f()}if(t&&(d=t(d,s++))==null)continue;i.push(d)}return i};a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var r=new O,n=[];t.forEach(function(e){for(var t in e){if(!r.has(t)){n.push(r.add(t))}}});return[n.map(s).join(e)].concat(t.map(function(t){return n.map(function(e){return s(t[e])}).join(e)})).join("\n")};a.formatRows=function(e){return e.map(l).join("\n")};function l(t){return t.map(s).join(e)}function s(e){return r.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a};t.csv=t.dsv(",","text/csv");t.tsv=t.dsv("\t","text/tab-separated-values");var Ct,Pt,zt,Ot,Dt=this[R(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};t.timer=function(){Et.apply(this,arguments)};function Et(e,t,r){var n=arguments.length;if(n<2)t=0;if(n<3)r=Date.now();var a=r+t,i={c:e,t:a,n:null};if(Pt)Pt.n=i;else Ct=i;Pt=i;if(!zt){Ot=clearTimeout(Ot);zt=1;Dt(Rt)}return i}function Rt(){var e=It(),t=Nt()-e;if(t>24){if(isFinite(t)){clearTimeout(Ot);Ot=setTimeout(Rt,t)}zt=0}else{zt=1;Dt(Rt)}}t.timer.flush=function(){It();Nt()};function It(){var e=Date.now(),t=Ct;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Nt(){var e,t=Ct,r=Infinity;while(t){if(t.c){if(t.t<r)r=t.t;t=(e=t).n}else{t=e?e.n=t.n:Ct=t.n}}Pt=e;return r}function Ft(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}t.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var jt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Bt);t.formatPrefix=function(e,r){var n=0;if(e=+e){if(e<0)e*=-1;if(r)e=t.round(e,Ft(e,r));n=1+Math.floor(1e-12+Math.log(e)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return jt[8+n/3]};function Bt(e,t){var r=Math.pow(10,x(8-t)*3);return{scale:t>8?function(e){return e/r}:function(e){return e*r},symbol:e}}function qt(e){var r=e.decimal,n=e.thousands,a=e.grouping,i=e.currency,o=a&&n?function(e,t){var r=e.length,i=[],o=0,l=a[0],s=0;while(r>0&&l>0){if(s+l+1>t)l=Math.max(1,t-s);i.push(e.substring(r-=l,r+l));if((s+=l+1)>t)break;l=a[o=(o+1)%a.length]}return i.reverse().join(n)}:D;return function(e){var n=Ht.exec(e),a=n[1]||" ",l=n[2]||">",s=n[3]||"-",u=n[4]||"",c=n[5],f=+n[6],d=n[7],p=n[8],v=n[9],h=1,g="",y="",m=false,x=true;if(p)p=+p.substring(1);if(c||a==="0"&&l==="="){c=a="0";l="="}switch(v){case"n":d=true;v="g";break;case"%":h=100;y="%";v="f";break;case"p":h=100;y="%";v="r";break;case"b":case"o":case"x":case"X":if(u==="#")g="0"+v.toLowerCase();case"c":x=false;case"d":m=true;p=0;break;case"s":h=-1;v="r";break}if(u==="$")g=i[0],y=i[1];if(v=="r"&&!p)v="g";if(p!=null){if(v=="g")p=Math.max(1,Math.min(21,p));else if(v=="e"||v=="f")p=Math.max(0,Math.min(20,p))}v=Ut.get(v)||Vt;var b=c&&d;return function(e){var n=y;if(m&&e%1)return"";var i=e<0||e===0&&1/e<0?(e=-e,"-"):s==="-"?"":s;if(h<0){var u=t.formatPrefix(e,p);e=u.scale(e);n=u.symbol+y}else{e*=h}e=v(e,p);var _=e.lastIndexOf("."),w,k;if(_<0){var M=x?e.lastIndexOf("e"):-1;if(M<0)w=e,k="";else w=e.substring(0,M),k=e.substring(M)}else{w=e.substring(0,_);k=r+e.substring(_+1)}if(!c&&d)w=o(w,Infinity);var A=g.length+w.length+k.length+(b?0:i.length),T=A<f?new Array(A=f-A+1).join(a):"";if(b)w=o(T+w,T.length?f-k.length:Infinity);i+=g;e=w+k;return(l==="<"?i+e+T:l===">"?T+i+e:l==="^"?T.substring(0,A>>=1)+i+e+T.substring(A):i+(b?e:T+e))+n}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Ut=t.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,r){return(e=t.round(e,Ft(e,r))).toFixed(Math.max(0,Math.min(20,Ft(e*(1+1e-15),r))))}});function Vt(e){return e+""}var Gt=t.time={},Yt=Date;function Zt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Zt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xt.setUTCDate.apply(this._,arguments)},setDay:function(){Xt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xt.setTime.apply(this._,arguments)}};var Xt=Date.prototype;function Wt(e,t,r){function n(t){var r=e(t),n=i(r,1);return t-r<n-t?r:n}function a(r){t(r=e(new Yt(r-1)),1);return r}function i(e,r){t(e=new Yt(+e),r);return e}function o(e,n,i){var o=a(e),l=[];if(i>1){while(o<n){if(!(r(o)%i))l.push(new Date(+o));t(o,1)}}else{while(o<n)l.push(new Date(+o)),t(o,1)}return l}function l(e,t,r){try{Yt=Zt;var n=new Zt;n._=e;return o(n,t,r)}finally{Yt=Date}}e.floor=e;e.round=n;e.ceil=a;e.offset=i;e.range=o;var s=e.utc=Jt(e);s.floor=s;s.round=Jt(n);s.ceil=Jt(a);s.offset=Jt(i);s.range=l;return e}function Jt(e){return function(t,r){try{Yt=Zt;var n=new Zt;n._=t;return e(n,r)._}finally{Yt=Date}}}Gt.year=Wt(function(e){e=Gt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});Gt.years=Gt.year.range;Gt.years.utc=Gt.year.utc.range;Gt.day=Wt(function(e){var t=new Yt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});Gt.days=Gt.day.range;Gt.days.utc=Gt.day.utc.range;Gt.dayOfYear=function(e){var t=Gt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var r=Gt[e]=Wt(function(e){(e=Gt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)-(r!==t)});Gt[e+"s"]=r.range;Gt[e+"s"].utc=r.utc.range;Gt[e+"OfYear"]=function(e){var r=Gt.year(e).getDay();return Math.floor((Gt.dayOfYear(e)+(r+t)%7)/7)}});Gt.week=Gt.sunday;Gt.weeks=Gt.sunday.range;Gt.weeks.utc=Gt.sunday.utc.range;Gt.weekOfYear=Gt.sundayOfYear;function Qt(e){var r=e.dateTime,n=e.date,a=e.time,i=e.periods,o=e.days,l=e.shortDays,s=e.months,u=e.shortMonths;function c(e){var t=e.length;function r(r){var n=[],a=-1,i=0,o,l,s;while(++a<t){if(e.charCodeAt(a)===37){n.push(e.slice(i,a));if((l=$t[o=e.charAt(++a)])!=null)o=e.charAt(++a);if(s=_[o])o=s(r,l==null?o==="e"?" ":"0":l);n.push(o);i=a+1}}n.push(e.slice(i,a));return n.join("")}r.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},n=f(r,e,t,0);if(n!=t.length)return null;if("p"in r)r.H=r.H%12+r.p*12;var a=r.Z!=null&&Yt!==Zt,i=new(a?Zt:Yt);if("j"in r)i.setFullYear(r.y,0,r.j);else if("W"in r||"U"in r){if(!("w"in r))r.w="W"in r?1:0;i.setFullYear(r.y,0,1);i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+r.W*7-(i.getDay()+5)%7:r.w+r.U*7-(i.getDay()+6)%7)}else i.setFullYear(r.y,r.m,r.d);i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L);return a?i._:i};r.toString=function(){return e};return r}function f(e,t,r,n){var a,i,o,l=0,s=t.length,u=r.length;while(l<s){if(n>=u)return-1;a=t.charCodeAt(l++);if(a===37){o=t.charAt(l++);i=w[o in $t?t.charAt(l++):o];if(!i||(n=i(e,r,n))<0)return-1}else if(a!=r.charCodeAt(n++)){return-1}}return n}c.utc=function(e){var t=c(e);function r(e){try{Yt=Zt;var r=new Yt;r._=e;return t(r)}finally{Yt=Date}}r.parse=function(e){try{Yt=Zt;var r=t.parse(e);return r&&r._}finally{Yt=Date}};r.toString=t.toString;return r};c.multi=c.utc.multi=br;var d=t.map(),p=rr(o),v=nr(o),h=rr(l),g=nr(l),y=rr(s),m=nr(s),x=rr(u),b=nr(u);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var _={a:function(e){return l[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:c(r),d:function(e,t){return tr(e.getDate(),t,2)},e:function(e,t){return tr(e.getDate(),t,2)},H:function(e,t){return tr(e.getHours(),t,2)},I:function(e,t){return tr(e.getHours()%12||12,t,2)},j:function(e,t){return tr(1+Gt.dayOfYear(e),t,3)},L:function(e,t){return tr(e.getMilliseconds(),t,3)},m:function(e,t){return tr(e.getMonth()+1,t,2)},M:function(e,t){return tr(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return tr(e.getSeconds(),t,2)},U:function(e,t){return tr(Gt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return tr(Gt.mondayOfYear(e),t,2)},x:c(n),X:c(a),y:function(e,t){return tr(e.getFullYear()%100,t,2)},Y:function(e,t){return tr(e.getFullYear()%1e4,t,4)},Z:mr,"%":function(){return"%"}};var w={a:k,A:M,b:A,B:T,c:L,d:dr,e:dr,H:vr,I:vr,j:pr,L:yr,m:fr,M:hr,p:P,S:gr,U:ir,w:ar,W:or,x:S,X:C,y:sr,Y:lr,Z:ur,"%":xr};function k(e,t,r){h.lastIndex=0;var n=h.exec(t.slice(r));return n?(e.w=g.get(n[0].toLowerCase()),r+n[0].length):-1}function M(e,t,r){p.lastIndex=0;var n=p.exec(t.slice(r));return n?(e.w=v.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){x.lastIndex=0;var n=x.exec(t.slice(r));return n?(e.m=b.get(n[0].toLowerCase()),r+n[0].length):-1}function T(e,t,r){y.lastIndex=0;var n=y.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1}function L(e,t,r){return f(e,_.c.toString(),t,r)}function S(e,t,r){return f(e,_.x.toString(),t,r)}function C(e,t,r){return f(e,_.X.toString(),t,r)}function P(e,t,r){var n=d.get(t.slice(r,r+=2).toLowerCase());return n==null?-1:(e.p=n,r)}return c}var $t={"-":"",_:" ",0:"0"},Kt=/^\s*\d+/,er=/^%/;function tr(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function rr(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function nr(e){var t=new w,r=-1,n=e.length;while(++r<n)t.set(e[r].toLowerCase(),r);return t}function ar(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ir(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r));return n?(e.U=+n[0],r+n[0].length):-1}function or(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r));return n?(e.W=+n[0],r+n[0].length):-1}function lr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.y=cr(+n[0]),r+n[0].length):-1}function ur(e,t,r){return/^[+-]\d{4}$/.test(t=t.slice(r,r+5))?(e.Z=-t,r+5):-1}function cr(e){return e+(e>68?1900:2e3)}function fr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function dr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function pr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+3));return n?(e.j=+n[0],r+n[0].length):-1}function vr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function yr(e,t,r){Kt.lastIndex=0;var n=Kt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mr(e){var t=e.getTimezoneOffset(),r=t>0?"-":"+",n=x(t)/60|0,a=x(t)%60;return r+tr(n,"0",2)+tr(a,"0",2)}function xr(e,t,r){er.lastIndex=0;var n=er.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function br(e){var t=e.length,r=-1;while(++r<t)e[r][0]=this(e[r][0]);return function(t){var r=0,n=e[r];while(!n[1](t))n=e[++r];return n[0](t)}}t.locale=function(e){return{numberFormat:qt(e),timeFormat:Qt(e)}};var _r=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});t.format=_r.numberFormat;t.geo={};function wr(){}wr.prototype={s:0,t:0,add:function(e){Mr(e,this.t,kr);Mr(kr.s,this.s,this);if(this.s)this.t+=kr.t;else this.s=kr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var kr=new wr;function Mr(e,t,r){var n=r.s=e+t,a=n-e,i=n-a;r.t=e-i+(t-a)}t.geo.stream=function(e,t){if(e&&Tr.hasOwnProperty(e.type)){Tr[e.type](e,t)}else{Ar(e,t)}};function Ar(e,t){if(e&&Lr.hasOwnProperty(e.type)){Lr[e.type](e,t)}}var Tr={Feature:function(e,t){Ar(e.geometry,t)},FeatureCollection:function(e,t){var r=e.features,n=-1,a=r.length;while(++n<a)Ar(r[n].geometry,t)}};var Lr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sr(e.coordinates,t,0)},MultiLineString:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Sr(r[n],t,0)},Polygon:function(e,t){Cr(e.coordinates,t)},MultiPolygon:function(e,t){var r=e.coordinates,n=-1,a=r.length;while(++n<a)Cr(r[n],t)},GeometryCollection:function(e,t){var r=e.geometries,n=-1,a=r.length;while(++n<a)Ar(r[n],t)}};function Sr(e,t,r){var n=-1,a=e.length-r,i;t.lineStart();while(++n<a)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Cr(e,t){var r=-1,n=e.length;t.polygonStart();while(++r<n)Sr(e[r],t,1);t.polygonEnd()}t.geo.area=function(e){Pr=0;t.geo.stream(e,Or);return Pr};var Pr,zr=new wr;var Or={sphere:function(){Pr+=4*Ce},point:N,lineStart:N,lineEnd:N,polygonStart:function(){zr.reset();Or.lineStart=Dr},polygonEnd:function(){var e=2*zr;Pr+=e<0?4*Ce+e:e;Or.lineStart=Or.lineEnd=Or.point=N}};function Dr(){var e,t,r,n,a;Or.point=function(o,l){Or.point=i;r=(e=o)*De,n=Math.cos(l=(t=l)*De/2+Ce/4),a=Math.sin(l)};function i(e,t){e*=De;t=t*De/2+Ce/4;var i=e-r,o=i>=0?1:-1,l=o*i,s=Math.cos(t),u=Math.sin(t),c=a*u,f=n*s+c*Math.cos(l),d=c*o*Math.sin(l);zr.add(Math.atan2(d,f));r=e,n=s,a=u}Or.lineEnd=function(){i(e,t)}}function Er(e){var t=e[0],r=e[1],n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function Rr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ir(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Nr(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Fr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jr(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Br(e){return[Math.atan2(e[1],e[0]),Fe(e[2])]}function qr(e,t){return x(e[0]-t[0])<Le&&x(e[1]-t[1])<Le}t.geo.bounds=function(){var e,r,n,a,i,o,l,s,u,c,f;var d={point:p,lineStart:h,lineEnd:g,polygonStart:function(){d.point=y;d.lineStart=m;d.lineEnd=b;u=0;Or.polygonStart()},polygonEnd:function(){Or.polygonEnd();d.point=p;d.lineStart=h;d.lineEnd=g;if(zr<0)e=-(n=180),r=-(a=90);else if(u>Le)a=90;else if(u<-Le)r=-90;f[0]=e,f[1]=n}};function p(t,i){c.push(f=[e=t,n=t]);if(i<r)r=i;if(i>a)a=i}function v(t,o){var l=Er([t*De,o*De]);if(s){var u=Ir(s,l),c=[u[1],-u[0],0],f=Ir(c,u);jr(f);f=Br(f);var d=t-i,v=d>0?1:-1,h=f[0]*Ee*v,g=x(d)>180;if(g^(v*i<h&&h<v*t)){var y=f[1]*Ee;if(y>a)a=y}else if(h=(h+360)%360-180,g^(v*i<h&&h<v*t)){var y=-f[1]*Ee;if(y<r)r=y}else{if(o<r)r=o;if(o>a)a=o}if(g){if(t<i){if(_(e,t)>_(e,n))n=t}else{if(_(t,n)>_(e,n))e=t}}else{if(n>=e){if(t<e)e=t;if(t>n)n=t}else{if(t>i){if(_(e,t)>_(e,n))n=t}else{if(_(t,n)>_(e,n))e=t}}}}else{p(t,o)}s=l,i=t}function h(){d.point=v}function g(){f[0]=e,f[1]=n;d.point=p;s=null}function y(e,t){if(s){var r=e-i;u+=x(r)>180?r+(r>0?360:-360):r}else o=e,l=t;Or.point(e,t);v(e,t)}function m(){Or.lineStart()}function b(){y(o,l);Or.lineEnd();if(x(u)>Le)e=-(n=180);f[0]=e,f[1]=n;s=null}function _(e,t){return(t-=e)<0?t+360:t}function w(e,t){return e[0]-t[0]}function k(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){a=n=-(e=r=Infinity);c=[];t.geo.stream(i,d);var o=c.length;if(o){c.sort(w);for(var l=1,s=c[0],u,p=[s];l<o;++l){u=c[l];if(k(u[0],s)||k(u[1],s)){if(_(s[0],u[1])>_(s[0],s[1]))s[1]=u[1];if(_(u[0],s[1])>_(s[0],s[1]))s[0]=u[0]}else{p.push(s=u)}}var v=-Infinity,h;for(var o=p.length-1,l=0,s=p[o],u;l<=o;s=u,++l){u=p[l];if((h=_(s[1],u[0]))>v)v=h,e=u[0],n=s[1]}}c=f=null;return e===Infinity||r===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,r],[n,a]]}}();t.geo.centroid=function(e){Hr=Ur=Vr=Gr=Yr=Zr=Xr=Wr=Jr=Qr=$r=0;t.geo.stream(e,Kr);var r=Jr,n=Qr,a=$r,i=r*r+n*n+a*a;if(i<Se){r=Zr,n=Xr,a=Wr;if(Ur<Le)r=Vr,n=Gr,a=Yr;i=r*r+n*n+a*a;if(i<Se)return[NaN,NaN]}return[Math.atan2(n,r)*Ee,Fe(a/Math.sqrt(i))*Ee]};var Hr,Ur,Vr,Gr,Yr,Zr,Xr,Wr,Jr,Qr,$r;var Kr={sphere:N,point:en,lineStart:rn,lineEnd:nn,polygonStart:function(){Kr.lineStart=an},polygonEnd:function(){Kr.lineStart=rn}};function en(e,t){e*=De;var r=Math.cos(t*=De);tn(r*Math.cos(e),r*Math.sin(e),Math.sin(t))}function tn(e,t,r){++Hr;Vr+=(e-Vr)/Hr;Gr+=(t-Gr)/Hr;Yr+=(r-Yr)/Hr}function rn(){var e,t,r;Kr.point=function(a,i){a*=De;var o=Math.cos(i*=De);e=o*Math.cos(a);t=o*Math.sin(a);r=Math.sin(i);Kr.point=n;tn(e,t,r)};function n(n,a){n*=De;var i=Math.cos(a*=De),o=i*Math.cos(n),l=i*Math.sin(n),s=Math.sin(a),u=Math.atan2(Math.sqrt((u=t*s-r*l)*u+(u=r*o-e*s)*u+(u=e*l-t*o)*u),e*o+t*l+r*s);Ur+=u;Zr+=u*(e+(e=o));Xr+=u*(t+(t=l));Wr+=u*(r+(r=s));tn(e,t,r)}}function nn(){Kr.point=en}function an(){var e,t,r,n,a;Kr.point=function(o,l){e=o,t=l;Kr.point=i;o*=De;var s=Math.cos(l*=De);r=s*Math.cos(o);n=s*Math.sin(o);a=Math.sin(l);tn(r,n,a)};Kr.lineEnd=function(){i(e,t);Kr.lineEnd=nn;Kr.point=en};function i(e,t){e*=De;var i=Math.cos(t*=De),o=i*Math.cos(e),l=i*Math.sin(e),s=Math.sin(t),u=n*s-a*l,c=a*o-r*s,f=r*l-n*o,d=Math.sqrt(u*u+c*c+f*f),p=r*o+n*l+a*s,v=d&&-Ne(p)/d,h=Math.atan2(d,p);Jr+=v*u;Qr+=v*c;$r+=v*f;Ur+=h;Zr+=h*(r+(r=o));Xr+=h*(n+(n=l));Wr+=h*(a+(a=s));tn(r,n,a)}}function on(e,t){function r(r,n){return r=e(r,n),t(r[0],r[1])}if(e.invert&&t.invert)r.invert=function(r,n){return r=t.invert(r,n),r&&e.invert(r[0],r[1])};return r}function ln(){return true}function sn(e,t,r,n,a){var i=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,r=e[0],n=e[t];if(qr(r,n)){a.lineStart();for(var l=0;l<t;++l)a.point((r=e[l])[0],r[1]);a.lineEnd();return}var s=new cn(r,e,null,true),u=new cn(r,null,s,false);s.o=u;i.push(s);o.push(u);s=new cn(n,e,null,false);u=new cn(n,null,s,true);s.o=u;i.push(s);o.push(u)});o.sort(t);un(i);un(o);if(!i.length)return;for(var l=0,s=r,u=o.length;l<u;++l){o[l].e=s=!s}var c=i[0],f,d;while(1){var p=c,v=true;while(p.v)if((p=p.n)===c)return;f=p.z;a.lineStart();do{p.v=p.o.v=true;if(p.e){if(v){for(var l=0,u=f.length;l<u;++l)a.point((d=f[l])[0],d[1])}else{n(p.x,p.n.x,1,a)}p=p.n}else{if(v){f=p.p.z;for(var l=f.length-1;l>=0;--l)a.point((d=f[l])[0],d[1])}else{n(p.x,p.p.x,-1,a)}p=p.p}p=p.o;f=p.z;v=!v}while(!p.v);a.lineEnd()}}function un(e){if(!(t=e.length))return;var t,r=0,n=e[0],a;while(++r<t){n.n=a=e[r];a.p=n;n=a}n.n=a=e[0];a.p=n}function cn(e,t,r,n){this.x=e;this.z=t;this.o=r;this.e=n;this.v=false;this.n=this.p=null}function fn(e,r,n,a){return function(i,o){var l=r(o),s=i.invert(a[0],a[1]);var u={point:c,lineStart:d,lineEnd:p,polygonStart:function(){u.point=b;u.lineStart=_;u.lineEnd=w;v=[];m=[]},polygonEnd:function(){u.point=c;u.lineStart=d;u.lineEnd=p;v=t.merge(v);var e=xn(s,m);if(v.length){if(!y)o.polygonStart(),y=true;sn(v,vn,e,n,o)}else if(e){if(!y)o.polygonStart(),y=true;o.lineStart();n(null,null,1,o);o.lineEnd()}if(y)o.polygonEnd(),y=false;v=m=null},sphere:function(){o.polygonStart();o.lineStart();n(null,null,1,o);o.lineEnd();o.polygonEnd()}};function c(t,r){var n=i(t,r);if(e(t=n[0],r=n[1]))o.point(t,r)}function f(e,t){var r=i(e,t);l.point(r[0],r[1])}function d(){u.point=f;l.lineStart()}function p(){u.point=c;l.lineEnd()}var v;var h=pn(),g=r(h),y=false,m,x;function b(e,t){x.push([e,t]);var r=i(e,t);g.point(r[0],r[1])}function _(){g.lineStart();x=[]}function w(){b(x[0][0],x[0][1]);g.lineEnd();var e=g.clean(),t=h.buffer(),r,n=t.length;x.pop();m.push(x);x=null;if(!n)return;if(e&1){r=t[0];var n=r.length-1,a=-1,i;if(n>0){if(!y)o.polygonStart(),y=true;o.lineStart();while(++a<n)o.point((i=r[a])[0],i[1]);o.lineEnd()}return}if(n>1&&e&2)t.push(t.pop().concat(t.shift()));v.push(t.filter(dn))}return u}}function dn(e){return e.length>1}function pn(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:N,buffer:function(){var r=e;e=[];t=null;return r},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function vn(e,t){return((e=e.x)[0]<0?e[1]-Oe-Le:Oe-e[1])-((t=t.x)[0]<0?t[1]-Oe-Le:Oe-t[1])}var hn=fn(ln,gn,mn,[-Ce,-Ce/2]);function gn(e){var t=NaN,r=NaN,n=NaN,a;return{lineStart:function(){e.lineStart();a=1},point:function(i,o){var l=i>0?Ce:-Ce,s=x(i-t);if(x(s-Ce)<Le){e.point(t,r=(r+o)/2>0?Oe:-Oe);e.point(n,r);e.lineEnd();e.lineStart();e.point(l,r);e.point(i,r);a=0}else if(n!==l&&s>=Ce){if(x(t-n)<Le)t-=n*Le;if(x(i-l)<Le)i-=l*Le;r=yn(t,r,i,o);e.point(n,r);e.lineEnd();e.lineStart();e.point(l,r);a=0}e.point(t=i,r=o);n=l},lineEnd:function(){e.lineEnd();t=r=NaN},clean:function(){return 2-a}}}function yn(e,t,r,n){var a,i,o=Math.sin(e-r);return x(o)>Le?Math.atan((Math.sin(t)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+n)/2}function mn(e,t,r,n){var a;if(e==null){a=r*Oe;n.point(-Ce,a);n.point(0,a);n.point(Ce,a);n.point(Ce,0);n.point(Ce,-a);n.point(0,-a);n.point(-Ce,-a);n.point(-Ce,0);n.point(-Ce,a)}else if(x(e[0]-t[0])>Le){var i=e[0]<t[0]?Ce:-Ce;a=r*i/2;n.point(-i,a);n.point(0,a);n.point(i,a)}else{n.point(t[0],t[1])}}function xn(e,t){var r=e[0],n=e[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;zr.reset();for(var l=0,s=t.length;l<s;++l){var u=t[l],c=u.length;if(!c)continue;var f=u[0],d=f[0],p=f[1]/2+Ce/4,v=Math.sin(p),h=Math.cos(p),g=1;while(true){if(g===c)g=0;e=u[g];var y=e[0],m=e[1]/2+Ce/4,x=Math.sin(m),b=Math.cos(m),_=y-d,w=_>=0?1:-1,k=w*_,M=k>Ce,A=v*x;zr.add(Math.atan2(A*w*Math.sin(k),h*b+A*Math.cos(k)));i+=M?_+w*Pe:_;if(M^d>=r^y>=r){var T=Ir(Er(f),Er(e));jr(T);var L=Ir(a,T);jr(L);var S=(M^_>=0?-1:1)*Fe(L[2]);if(n>S||n===S&&(T[0]||T[1])){o+=M^_>=0?1:-1}}if(!g++)break;d=y,v=x,h=b,f=e}}return(i<-Le||i<Le&&zr<-Le)^o&1}function bn(e){var t=Math.cos(e),r=t>0,n=x(t)>Le,a=na(e,6*De);return fn(i,o,a,r?[0,-e]:[-Ce,e-Ce]);function i(e,r){return Math.cos(e)*Math.cos(r)>t}function o(e){var t,a,o,u,c;return{lineStart:function(){u=o=false;c=1},point:function(f,d){var p=[f,d],v,h=i(f,d),g=r?h?0:s(f,d):h?s(f+(f<0?Ce:-Ce),d):0;if(!t&&(u=o=h))e.lineStart();if(h!==o){v=l(t,p);if(qr(t,v)||qr(p,v)){p[0]+=Le;p[1]+=Le;h=i(p[0],p[1])}}if(h!==o){c=0;if(h){e.lineStart();v=l(p,t);e.point(v[0],v[1])}else{v=l(t,p);e.point(v[0],v[1]);e.lineEnd()}t=v}else if(n&&t&&r^h){var y;if(!(g&a)&&(y=l(p,t,true))){c=0;if(r){e.lineStart();e.point(y[0][0],y[0][1]);e.point(y[1][0],y[1][1]);e.lineEnd()}else{e.point(y[1][0],y[1][1]);e.lineEnd();e.lineStart();e.point(y[0][0],y[0][1])}}}if(h&&(!t||!qr(t,p))){e.point(p[0],p[1])}t=p,o=h,a=g},lineEnd:function(){if(o)e.lineEnd();t=null},clean:function(){return c|(u&&o)<<1}}}function l(e,r,n){var a=Er(e),i=Er(r);var o=[1,0,0],l=Ir(a,i),s=Rr(l,l),u=l[0],c=s-u*u;if(!c)return!n&&e;var f=t*s/c,d=-t*u/c,p=Ir(o,l),v=Fr(o,f),h=Fr(l,d);Nr(v,h);var g=p,y=Rr(v,g),m=Rr(g,g),b=y*y-m*(Rr(v,v)-1);if(b<0)return;var _=Math.sqrt(b),w=Fr(g,(-y-_)/m);Nr(w,v);w=Br(w);if(!n)return w;var k=e[0],M=r[0],A=e[1],T=r[1],L;if(M<k)L=k,k=M,M=L;var S=M-k,C=x(S-Ce)<Le,P=C||S<Le;if(!C&&T<A)L=A,A=T,T=L;if(P?C?A+T>0^w[1]<(x(w[0]-k)<Le?A:T):A<=w[1]&&w[1]<=T:S>Ce^(k<=w[0]&&w[0]<=M)){var z=Fr(g,(-y+_)/m);Nr(z,v);return[w,Br(z)]}}function s(t,n){var a=r?e:Ce-e,i=0;if(t<-a)i|=1;else if(t>a)i|=2;if(n<-a)i|=4;else if(n>a)i|=8;return i}}function _n(e,t,r,n){return function(a){var i=a.a,o=a.b,l=i.x,s=i.y,u=o.x,c=o.y,f=0,d=1,p=u-l,v=c-s,h;h=e-l;if(!p&&h>0)return;h/=p;if(p<0){if(h<f)return;if(h<d)d=h}else if(p>0){if(h>d)return;if(h>f)f=h}h=r-l;if(!p&&h<0)return;h/=p;if(p<0){if(h>d)return;if(h>f)f=h}else if(p>0){if(h<f)return;if(h<d)d=h}h=t-s;if(!v&&h>0)return;h/=v;if(v<0){if(h<f)return;if(h<d)d=h}else if(v>0){if(h>d)return;if(h>f)f=h}h=n-s;if(!v&&h<0)return;h/=v;if(v<0){if(h>d)return;if(h>f)f=h}else if(v>0){if(h<f)return;if(h<d)d=h}if(f>0)a.a={x:l+f*p,y:s+f*v};if(d<1)a.b={x:l+d*p,y:s+d*v};return a}}var wn=1e9;t.geo.clipExtent=function(){var e,t,r,n,a,i,o={stream:function(e){if(a)a.valid=false;a=i(e);a.valid=true;return a},extent:function(l){if(!arguments.length)return[[e,t],[r,n]];i=kn(e=+l[0][0],t=+l[0][1],r=+l[1][0],n=+l[1][1]);if(a)a.valid=false,a=null;return o}};return o.extent([[0,0],[960,500]])};function kn(e,r,n,a){return function(s){var u=s,c=pn(),f=_n(e,r,n,a),d,p,v;var h={point:x,lineStart:S,lineEnd:C,polygonStart:function(){s=c;d=[];p=[];L=true},polygonEnd:function(){s=u;d=t.merge(d);var r=g([e,a]),n=L&&r,i=d.length;if(n||i){s.polygonStart();if(n){s.lineStart();y(null,null,1,s);s.lineEnd()}if(i){sn(d,o,r,y,s)}s.polygonEnd()}d=p=v=null}};function g(e){var t=0,r=p.length,n=e[1];for(var a=0;a<r;++a){for(var i=1,o=p[a],l=o.length,s=o[0],u;i<l;++i){u=o[i];if(s[1]<=n){if(u[1]>n&&Ie(s,u,e)>0)++t}else{if(u[1]<=n&&Ie(s,u,e)<0)--t}s=u}}return t!==0}function y(t,o,s,u){var c=0,f=0;if(t==null||(c=i(t,s))!==(f=i(o,s))||l(t,o)<0^s>0){do{u.point(c===0||c===3?e:n,c>1?a:r)}while((c=(c+s+4)%4)!==f)}else{u.point(o[0],o[1])}}function m(t,i){return e<=t&&t<=n&&r<=i&&i<=a}function x(e,t){if(m(e,t))s.point(e,t)}var b,_,w,k,M,A,T,L;function S(){h.point=P;if(p)p.push(v=[]);T=true;A=false;k=M=NaN}function C(){if(d){P(b,_);if(w&&A)c.rejoin();d.push(c.buffer())}h.point=x;if(A)s.lineEnd()}function P(e,t){e=Math.max(-wn,Math.min(wn,e));t=Math.max(-wn,Math.min(wn,t));var r=m(e,t);if(p)v.push([e,t]);if(T){b=e,_=t,w=r;T=false;if(r){s.lineStart();s.point(e,t)}}else{if(r&&A)s.point(e,t);else{var n={a:{x:k,y:M},b:{x:e,y:t}};if(f(n)){if(!A){s.lineStart();s.point(n.a.x,n.a.y)}s.point(n.b.x,n.b.y);if(!r)s.lineEnd();L=false}else if(r){s.lineStart();s.point(e,t);L=false}}}k=e,M=t,A=r}return h};function i(t,a){return x(t[0]-e)<Le?a>0?0:3:x(t[0]-n)<Le?a>0?2:1:x(t[1]-r)<Le?a>0?1:0:a>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var r=i(e,1),n=i(t,1);return r!==n?r-n:r===0?t[1]-e[1]:r===1?e[0]-t[0]:r===2?e[1]-t[1]:t[0]-e[0]}}function Mn(e){var t=0,r=Ce/3,n=Wn(e),a=n(t,r);a.parallels=function(e){if(!arguments.length)return[t/Ce*180,r/Ce*180];return n(t=e[0]*Ce/180,r=e[1]*Ce/180)};return a}function An(e,t){var r=Math.sin(e),n=(r+Math.sin(t))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(e,t){var r=Math.sqrt(a-2*n*Math.sin(t))/n;return[r*Math.sin(e*=n),i-r*Math.cos(e)]}o.invert=function(e,t){var r=i-t;return[Math.atan2(e,r)/n,Fe((a-(e*e+r*r)*n*n)/(2*n))]};return o}(t.geo.conicEqualArea=function(){return Mn(An)}).raw=An;t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};t.geo.albersUsa=function(){var e=t.geo.albers();var r=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var a,i={point:function(e,t){a=[e,t]}},o,l,s;function u(e){var t=e[0],r=e[1];a=null;(o(t,r),a)||(l(t,r),a)||s(t,r);return a}u.invert=function(t){var a=e.scale(),i=e.translate(),o=(t[0]-i[0])/a,l=(t[1]-i[1])/a;return(l>=.12&&l<.234&&o>=-.425&&o<-.214?r:l>=.166&&l<.234&&o>=-.214&&o<-.115?n:e).invert(t)};u.stream=function(t){var a=e.stream(t),i=r.stream(t),o=n.stream(t);return{point:function(e,t){a.point(e,t);i.point(e,t);o.point(e,t)},sphere:function(){a.sphere();i.sphere();o.sphere()},lineStart:function(){a.lineStart();i.lineStart();o.lineStart()},lineEnd:function(){a.lineEnd();i.lineEnd();o.lineEnd()},polygonStart:function(){a.polygonStart();i.polygonStart();o.polygonStart()},polygonEnd:function(){a.polygonEnd();i.polygonEnd();o.polygonEnd()}}};u.precision=function(t){if(!arguments.length)return e.precision();e.precision(t);r.precision(t);n.precision(t);return u};u.scale=function(t){if(!arguments.length)return e.scale();e.scale(t);r.scale(t*.35);n.scale(t);return u.translate(e.translate())};u.translate=function(t){if(!arguments.length)return e.translate();var a=e.scale(),c=+t[0],f=+t[1];o=e.translate(t).clipExtent([[c-.455*a,f-.238*a],[c+.455*a,f+.238*a]]).stream(i).point;l=r.translate([c-.307*a,f+.201*a]).clipExtent([[c-.425*a+Le,f+.12*a+Le],[c-.214*a-Le,f+.234*a-Le]]).stream(i).point;s=n.translate([c-.205*a,f+.212*a]).clipExtent([[c-.214*a+Le,f+.166*a+Le],[c-.115*a-Le,f+.234*a-Le]]).stream(i).point;return u};return u.scale(1070)};var Tn,Ln,Sn={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Ln=0;Sn.lineStart=Cn},polygonEnd:function(){Sn.lineStart=Sn.lineEnd=Sn.point=N;Tn+=x(Ln/2)}};function Cn(){var e,t,r,n;Sn.point=function(i,o){Sn.point=a;e=r=i,t=n=o};function a(e,t){Ln+=n*e-r*t;r=e,n=t}Sn.lineEnd=function(){a(e,t)}}var Pn,zn,On,Dn;var En={point:Rn,lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N};function Rn(e,t){if(e<Pn)Pn=e;if(e>On)On=e;if(t<zn)zn=t;if(t>Dn)Dn=t}function In(){var e=Nn(4.5),t=[];var r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o;r.point=n},pointRadius:function(t){e=Nn(t);return r},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function n(r,n){t.push("M",r,",",n,e)}function a(e,n){t.push("M",e,",",n);r.point=i}function i(e,r){t.push("L",e,",",r)}function o(){r.point=n}function l(){t.push("Z")}return r}function Nn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Fn={point:jn,lineStart:Bn,lineEnd:qn,polygonStart:function(){Fn.lineStart=Hn},polygonEnd:function(){Fn.point=jn;Fn.lineStart=Bn;Fn.lineEnd=qn}};function jn(e,t){Vr+=e;Gr+=t;++Yr}function Bn(){var e,t;Fn.point=function(n,a){Fn.point=r;jn(e=n,t=a)};function r(r,n){var a=r-e,i=n-t,o=Math.sqrt(a*a+i*i);Zr+=o*(e+r)/2;Xr+=o*(t+n)/2;Wr+=o;jn(e=r,t=n)}}function qn(){Fn.point=jn}function Hn(){var e,t,r,n;Fn.point=function(i,o){Fn.point=a;jn(e=r=i,t=n=o)};function a(e,t){var a=e-r,i=t-n,o=Math.sqrt(a*a+i*i);Zr+=o*(r+e)/2;Xr+=o*(n+t)/2;Wr+=o;o=n*e-r*t;Jr+=o*(r+e);Qr+=o*(n+t);$r+=o*3;jn(r=e,n=t)}Fn.lineEnd=function(){a(e,t)}}function Un(e){var t=4.5;var r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o;r.point=n},pointRadius:function(e){t=e;return r},result:N};function n(r,n){e.moveTo(r+t,n);e.arc(r,n,t,0,Pe)}function a(t,n){e.moveTo(t,n);r.point=i}function i(t,r){e.lineTo(t,r)}function o(){r.point=n}function l(){e.closePath()}return r}function Vn(e){var t=.5,r=Math.cos(30*De),n=16;function a(e){return(n?o:i)(e)}function i(t){return Zn(t,function(r,n){r=e(r,n);t.point(r[0],r[1])})}function o(t){var r,a,i,o,s,u,c,f,d,p,v,h,g;var y={point:m,lineStart:x,lineEnd:_,polygonStart:function(){t.polygonStart();y.lineStart=w},polygonEnd:function(){t.polygonEnd();y.lineStart=x}};function m(r,n){r=e(r,n);t.point(r[0],r[1])}function x(){d=NaN;y.point=b;t.lineStart()}function b(r,a){var i=Er([r,a]),o=e(r,a);l(d,p,f,v,h,g,d=o[0],p=o[1],f=r,v=i[0],h=i[1],g=i[2],n,t);t.point(d,p)}function _(){y.point=m;t.lineEnd()}function w(){x();y.point=k;y.lineEnd=M}function k(e,t){b(r=e,a=t),i=d,o=p,s=v,u=h,c=g;y.point=b}function M(){l(d,p,f,v,h,g,i,o,r,s,u,c,n,t);y.lineEnd=_;_()}return y}function l(n,a,i,o,s,u,c,f,d,p,v,h,g,y){var m=c-n,b=f-a,_=m*m+b*b;if(_>4*t&&g--){var w=o+p,k=s+v,M=u+h,A=Math.sqrt(w*w+k*k+M*M),T=Math.asin(M/=A),L=x(x(M)-1)<Le||x(i-d)<Le?(i+d)/2:Math.atan2(k,w),S=e(L,T),C=S[0],P=S[1],z=C-n,O=P-a,D=b*z-m*O;if(D*D/_>t||x((m*z+b*O)/_-.5)>.3||o*p+s*v+u*h<r){l(n,a,i,o,s,u,C,P,L,w/=A,k/=A,M,g,y);y.point(C,P);l(C,P,L,w,k,M,c,f,d,p,v,h,g,y)}}}a.precision=function(e){if(!arguments.length)return Math.sqrt(t);n=(t=e*e)>0&&16;return a};return a}t.geo.path=function(){var e=4.5,r,n,a,i,o;function l(r){if(r){if(typeof e==="function")i.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=a(i);t.geo.stream(r,o)}return i.result()}l.area=function(e){Tn=0;t.geo.stream(e,a(Sn));return Tn};l.centroid=function(e){Vr=Gr=Yr=Zr=Xr=Wr=Jr=Qr=$r=0;t.geo.stream(e,a(Fn));return $r?[Jr/$r,Qr/$r]:Wr?[Zr/Wr,Xr/Wr]:Yr?[Vr/Yr,Gr/Yr]:[NaN,NaN]};l.bounds=function(e){On=Dn=-(Pn=zn=Infinity);t.geo.stream(e,a(En));return[[Pn,zn],[On,Dn]]};l.projection=function(e){if(!arguments.length)return r;a=(r=e)?e.stream||Gn(e):D;return s()};l.context=function(t){if(!arguments.length)return n;i=(n=t)==null?new In:new Un(t);if(typeof e!=="function")i.pointRadius(e);return s()};l.pointRadius=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:(i.pointRadius(+t),+t);return l};function s(){o=null;return l}return l.projection(t.geo.albersUsa()).context(null)};function Gn(e){var t=Vn(function(t,r){return e([t*Ee,r*Ee])});return function(e){return Jn(t(e))}}t.geo.transform=function(e){return{stream:function(t){var r=new Yn(t);for(var n in e)r[n]=e[n];return r}}};function Yn(e){this.stream=e}Yn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}t.geo.projection=Xn;t.geo.projectionMutator=Wn;function Xn(e){return Wn(function(){return e})()}function Wn(e){var r,n,a,i=Vn(function(e,t){e=r(e,t);return[e[0]*o+v,h-e[1]*o]}),o=150,l=480,s=250,u=0,c=0,f=0,d=0,p=0,v,h,g=hn,y=D,m=null,x=null,b;function _(e){e=a(e[0]*De,e[1]*De);return[e[0]*o+v,h-e[1]*o]}function w(e){e=a.invert((e[0]-v)/o,(h-e[1])/o);return e&&[e[0]*Ee,e[1]*Ee]}_.stream=function(e){if(b)b.valid=false;b=Jn(g(n,i(y(e))));b.valid=true;return b};_.clipAngle=function(e){if(!arguments.length)return m;g=e==null?(m=e,hn):bn((m=+e)*De);return M()};_.clipExtent=function(e){if(!arguments.length)return x;x=e;y=e?kn(e[0][0],e[0][1],e[1][0],e[1][1]):D;return M()};_.scale=function(e){if(!arguments.length)return o;o=+e;return k()};_.translate=function(e){if(!arguments.length)return[l,s];l=+e[0];s=+e[1];return k()};_.center=function(e){if(!arguments.length)return[u*Ee,c*Ee];u=e[0]%360*De;c=e[1]%360*De;return k()};_.rotate=function(e){if(!arguments.length)return[f*Ee,d*Ee,p*Ee];f=e[0]%360*De;d=e[1]%360*De;p=e.length>2?e[2]%360*De:0;return k()};t.rebind(_,i,"precision");function k(){a=on(n=Kn(f,d,p),r);var e=r(u,c);v=l-e[0]*o;h=s+e[1]*o;return M()}function M(){if(b)b.valid=false,b=null;return _}return function(){r=e.apply(this,arguments);_.invert=r.invert&&w;return k()}}function Jn(e){return Zn(e,function(t,r){e.point(t*De,r*De)})}function Qn(e,t){return[e,t]}(t.geo.equirectangular=function(){return Xn(Qn)}).raw=Qn.invert=Qn;t.geo.rotation=function(e){e=Kn(e[0]%360*De,e[1]*De,e.length>2?e[2]*De:0);function t(t){t=e(t[0]*De,t[1]*De);return t[0]*=Ee,t[1]*=Ee,t}t.invert=function(t){t=e.invert(t[0]*De,t[1]*De);return t[0]*=Ee,t[1]*=Ee,t};return t};function $n(e,t){return[e>Ce?e-Pe:e<-Ce?e+Pe:e,t]}$n.invert=Qn;function Kn(e,t,r){return e?t||r?on(ta(e),ra(t,r)):ta(e):t||r?ra(t,r):$n}function ea(e){return function(t,r){return t+=e,[t>Ce?t-Pe:t<-Ce?t+Pe:t,r]}}function ta(e){var t=ea(e);t.invert=ea(-e);return t}function ra(e,t){var r=Math.cos(e),n=Math.sin(e),a=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,u=Math.sin(t),c=u*r+l*n;return[Math.atan2(s*a-c*i,l*r-u*n),Fe(c*a+s*i)]}o.invert=function(e,t){var o=Math.cos(t),l=Math.cos(e)*o,s=Math.sin(e)*o,u=Math.sin(t),c=u*a-s*i;return[Math.atan2(s*a+u*i,l*r+c*n),Fe(c*r-l*n)]};return o}t.geo.circle=function(){var e=[0,0],t,r=6,n;function a(){var t=typeof e==="function"?e.apply(this,arguments):e,r=Kn(-t[0]*De,-t[1]*De,0).invert,a=[];n(null,null,1,{point:function(e,t){a.push(e=r(e,t));e[0]*=Ee,e[1]*=Ee}});return{type:"Polygon",coordinates:[a]}}a.origin=function(t){if(!arguments.length)return e;e=t;return a};a.angle=function(e){if(!arguments.length)return t;n=na((t=+e)*De,r*De);return a};a.precision=function(e){if(!arguments.length)return r;n=na(t*De,(r=+e)*De);return a};return a.angle(90)};function na(e,t){var r=Math.cos(e),n=Math.sin(e);return function(a,i,o,l){var s=o*t;if(a!=null){a=aa(r,a);i=aa(r,i);if(o>0?a<i:a>i)a+=o*Pe}else{a=e+o*Pe;i=e-.5*s}for(var u,c=a;o>0?c>i:c<i;c-=s){l.point((u=Br([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}}function aa(e,t){var r=Er(t);r[0]-=e;jr(r);var n=Ne(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-Le)%(2*Math.PI)}t.geo.distance=function(e,t){var r=(t[0]-e[0])*De,n=e[1]*De,a=t[1]*De,i=Math.sin(r),o=Math.cos(r),l=Math.sin(n),s=Math.cos(n),u=Math.sin(a),c=Math.cos(a),f;return Math.atan2(Math.sqrt((f=c*i)*f+(f=s*u-l*c*o)*f),l*u+s*c*o)};t.geo.graticule=function(){var e,r,n,a,i,o,l,s,u=10,c=u,f=90,d=360,p,v,h,g,y=2.5;function m(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(a/f)*f,n,f).map(h).concat(t.range(Math.ceil(s/d)*d,l,d).map(g)).concat(t.range(Math.ceil(r/u)*u,e,u).filter(function(e){return x(e%f)>Le}).map(p)).concat(t.range(Math.ceil(o/c)*c,i,c).filter(function(e){return x(e%d)>Le}).map(v))}m.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})};m.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(g(l).slice(1),h(n).reverse().slice(1),g(s).reverse().slice(1))]}};m.extent=function(e){if(!arguments.length)return m.minorExtent();return m.majorExtent(e).minorExtent(e)};m.majorExtent=function(e){if(!arguments.length)return[[a,s],[n,l]];a=+e[0][0],n=+e[1][0];s=+e[0][1],l=+e[1][1];if(a>n)e=a,a=n,n=e;if(s>l)e=s,s=l,l=e;return m.precision(y)};m.minorExtent=function(t){if(!arguments.length)return[[r,o],[e,i]];r=+t[0][0],e=+t[1][0];o=+t[0][1],i=+t[1][1];if(r>e)t=r,r=e,e=t;if(o>i)t=o,o=i,i=t;return m.precision(y)};m.step=function(e){if(!arguments.length)return m.minorStep();return m.majorStep(e).minorStep(e)};m.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return m};m.minorStep=function(e){if(!arguments.length)return[u,c];u=+e[0],c=+e[1];return m};m.precision=function(t){if(!arguments.length)return y;y=+t;p=ia(o,i,90);v=oa(r,e,y);h=ia(s,l,90);g=oa(a,n,y);return m};return m.majorExtent([[-180,-90+Le],[180,90-Le]]).minorExtent([[-180,-80-Le],[180,80+Le]])};function ia(e,r,n){var a=t.range(e,r-Le,n).concat(r);return function(e){return a.map(function(t){return[e,t]})}}function oa(e,r,n){var a=t.range(e,r-Le,n).concat(r);return function(e){return a.map(function(t){return[t,e]})}}function la(e){return e.source}function sa(e){return e.target}t.geo.greatArc=function(){var e=la,r,n=sa,a;function i(){return{type:"LineString",coordinates:[r||e.apply(this,arguments),a||n.apply(this,arguments)]}}i.distance=function(){return t.geo.distance(r||e.apply(this,arguments),a||n.apply(this,arguments))};i.source=function(t){if(!arguments.length)return e;e=t,r=typeof t==="function"?null:t;return i};i.target=function(e){if(!arguments.length)return n;n=e,a=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};t.geo.interpolate=function(e,t){return ua(e[0]*De,e[1]*De,t[0]*De,t[1]*De)};function ua(e,t,r,n){var a=Math.cos(t),i=Math.sin(t),o=Math.cos(n),l=Math.sin(n),s=a*Math.cos(e),u=a*Math.sin(e),c=o*Math.cos(r),f=o*Math.sin(r),d=2*Math.asin(Math.sqrt(He(n-t)+a*o*He(r-e))),p=1/Math.sin(d);var v=d?function(e){var t=Math.sin(e*=d)*p,r=Math.sin(d-e)*p,n=r*s+t*c,a=r*u+t*f,o=r*i+t*l;return[Math.atan2(a,n)*Ee,Math.atan2(o,Math.sqrt(n*n+a*a))*Ee]}:function(){return[e*Ee,t*Ee]};v.distance=d;return v}t.geo.length=function(e){ca=0;t.geo.stream(e,fa);return ca};var ca;var fa={sphere:N,point:N,lineStart:da,lineEnd:N,polygonStart:N,polygonEnd:N};function da(){var e,t,r;fa.point=function(a,i){e=a*De,t=Math.sin(i*=De),r=Math.cos(i);fa.point=n};fa.lineEnd=function(){fa.point=fa.lineEnd=N};function n(n,a){var i=Math.sin(a*=De),o=Math.cos(a),l=x((n*=De)-e),s=Math.cos(l);ca+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=r*i-t*o*s)*l),t*i+r*o*s);e=n,t=i,r=o}}function pa(e,t){function r(t,r){var n=Math.cos(t),a=Math.cos(r),i=e(n*a);return[i*a*Math.sin(t),i*Math.sin(r)]}r.invert=function(e,r){var n=Math.sqrt(e*e+r*r),a=t(n),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(e*i,n*o),Math.asin(n&&r*i/n)]};return r}var va=pa(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(t.geo.azimuthalEqualArea=function(){return Xn(va)}).raw=va;var ha=pa(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},D);(t.geo.azimuthalEquidistant=function(){return Xn(ha)}).raw=ha;function ga(e,t){var r=Math.cos(e),n=function(e){return Math.tan(Ce/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(n(t)/n(e)),i=r*Math.pow(n(e),a)/a;if(!a)return xa;function o(e,t){if(i>0){if(t<-Oe+Le)t=-Oe+Le}else{if(t>Oe-Le)t=Oe-Le}var r=i/Math.pow(n(t),a);return[r*Math.sin(a*e),i-r*Math.cos(a*e)]}o.invert=function(e,t){var r=i-t,n=Re(a)*Math.sqrt(e*e+r*r);return[Math.atan2(e,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Oe]};return o}(t.geo.conicConformal=function(){return Mn(ga)}).raw=ga;function ya(e,t){var r=Math.cos(e),n=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/n+e;if(x(n)<Le)return Qn;function i(e,t){var r=a-t;return[r*Math.sin(n*e),a-r*Math.cos(n*e)]}i.invert=function(e,t){var r=a-t;return[Math.atan2(e,r)/n,a-Re(n)*Math.sqrt(e*e+r*r)]};return i}(t.geo.conicEquidistant=function(){return Mn(ya)}).raw=ya;var ma=pa(function(e){return 1/e},Math.atan);(t.geo.gnomonic=function(){return Xn(ma)}).raw=ma;function xa(e,t){return[e,Math.log(Math.tan(Ce/4+t/2))]}xa.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Oe]};function ba(e){var t=Xn(e),r=t.scale,n=t.translate,a=t.clipExtent,i;t.scale=function(){var e=r.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.translate=function(){var e=n.apply(t,arguments);return e===t?i?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=a.apply(t,arguments);if(o===t){if(i=e==null){var l=Ce*r(),s=n();a([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else if(i){o=null}return o};return t.clipExtent(null)}(t.geo.mercator=function(){return ba(xa)}).raw=xa;var _a=pa(function(){return 1},Math.asin);(t.geo.orthographic=function(){return Xn(_a)}).raw=_a;var wa=pa(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(t.geo.stereographic=function(){return Xn(wa)}).raw=wa;function ka(e,t){return[Math.log(Math.tan(Ce/4+t/2)),-e]}ka.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Oe]};(t.geo.transverseMercator=function(){var e=ba(ka),t=e.center,r=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?r([e[0],e[1],e.length>2?e[2]+90:90]):(e=r(),[e[0],e[1],e[2]-90])};return r([0,0,90])}).raw=ka;t.geom={};function Ma(e){return e[0]}function Aa(e){return e[1]}t.geom.hull=function(e){var t=Ma,r=Aa;if(arguments.length)return n(e);function n(e){if(e.length<3)return[];var n=Mt(t),a=Mt(r),i,o=e.length,l=[],s=[];for(i=0;i<o;i++){l.push([+n.call(this,e[i],i),+a.call(this,e[i],i),i])}l.sort(La);for(i=0;i<o;i++)s.push([l[i][0],-l[i][1]]);var u=Ta(l),c=Ta(s);var f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],p=[];for(i=u.length-1;i>=0;--i)p.push(e[l[u[i]][2]]);for(i=+f;i<c.length-d;++i)p.push(e[l[c[i]][2]]);return p}n.x=function(e){return arguments.length?(t=e,n):t};n.y=function(e){return arguments.length?(r=e,n):r};return n};function Ta(e){var t=e.length,r=[0,1],n=2;for(var a=2;a<t;a++){while(n>1&&Ie(e[r[n-2]],e[r[n-1]],e[a])<=0)--n;r[n++]=a}return r.slice(0,n)}function La(e,t){return e[0]-t[0]||e[1]-t[1]}t.geom.polygon=function(e){V(e,Sa);return e};var Sa=t.geom.polygon.prototype=[];Sa.area=function(){var e=-1,t=this.length,r,n=this[t-1],a=0;while(++e<t){r=n;n=this[e];a+=r[1]*n[0]-r[0]*n[1]}return a*.5};Sa.centroid=function(e){var t=-1,r=this.length,n=0,a=0,i,o=this[r-1],l;if(!arguments.length)e=-1/(6*this.area());while(++t<r){i=o;o=this[t];l=i[0]*o[1]-o[0]*i[1];n+=(i[0]+o[0])*l;a+=(i[1]+o[1])*l}return[n*e,a*e]};Sa.clip=function(e){var t,r=za(e),n=-1,a=this.length-za(this),i,o,l=this[a-1],s,u,c;while(++n<a){t=e.slice();e.length=0;s=this[n];u=t[(o=t.length-r)-1];i=-1;while(++i<o){c=t[i];if(Ca(c,l,s)){if(!Ca(u,l,s)){e.push(Pa(u,c,l,s))}e.push(c)}else if(Ca(u,l,s)){e.push(Pa(u,c,l,s))}u=c}if(r)e.push(e[0]);l=s}return e};function Ca(e,t,r){return(r[0]-t[0])*(e[1]-t[1])<(r[1]-t[1])*(e[0]-t[0])}function Pa(e,t,r,n){var a=e[0],i=r[0],o=t[0]-a,l=n[0]-i,s=e[1],u=r[1],c=t[1]-s,f=n[1]-u,d=(l*(s-u)-f*(a-i))/(f*o-l*c);return[a+d*o,s+d*c]}function za(e){var t=e[0],r=e[e.length-1];return!(t[0]-r[0]||t[1]-r[1])}var Oa,Da,Ea,Ra=[],Ia,Na,Fa=[];function ja(){oi(this);this.edge=this.site=this.circle=null}function Ba(e){var t=Ra.pop()||new ja;t.site=e;return t}function qa(e){Qa(e);Ea.remove(e);Ra.push(e);oi(e)}function Ha(e){var t=e.circle,r=t.x,n=t.cy,a={x:r,y:n},i=e.P,o=e.N,l=[e];qa(e);var s=i;while(s.circle&&x(r-s.circle.x)<Le&&x(n-s.circle.cy)<Le){i=s.P;l.unshift(s);qa(s);s=i}l.unshift(s);Qa(s);var u=o;while(u.circle&&x(r-u.circle.x)<Le&&x(n-u.circle.cy)<Le){o=u.N;l.push(u);qa(u);u=o}l.push(u);Qa(u);var c=l.length,f;for(f=1;f<c;++f){u=l[f];s=l[f-1];ni(u.edge,s.site,u.site,a)}s=l[0];u=l[c-1];u.edge=ti(s.site,u.site,null,a);Ja(s);Ja(u)}function Ua(e){var t=e.x,r=e.y,n,a,i,o,l=Ea._;while(l){i=Va(l,r)-t;if(i>Le)l=l.L;else{o=t-Ga(l,r);if(o>Le){if(!l.R){n=l;break}l=l.R}else{if(i>-Le){n=l.P;a=l}else if(o>-Le){n=l;a=l.N}else{n=a=l}break}}}var s=Ba(e);Ea.insert(n,s);if(!n&&!a)return;if(n===a){Qa(n);a=Ba(n.site);Ea.insert(s,a);s.edge=a.edge=ti(n.site,s.site);Ja(n);Ja(a);return}if(!a){s.edge=ti(n.site,s.site);return}Qa(n);Qa(a);var u=n.site,c=u.x,f=u.y,d=e.x-c,p=e.y-f,v=a.site,h=v.x-c,g=v.y-f,y=2*(d*g-p*h),m=d*d+p*p,x=h*h+g*g,b={x:(g*m-p*x)/y+c,y:(d*x-h*m)/y+f};ni(a.edge,u,v,b);s.edge=ti(u,e,null,b);a.edge=ti(e,v,null,b);Ja(n);Ja(a)}function Va(e,t){var r=e.site,n=r.x,a=r.y,i=a-t;if(!i)return n;var o=e.P;if(!o)return-Infinity;r=o.site;var l=r.x,s=r.y,u=s-t;if(!u)return l;var c=l-n,f=1/i-1/u,d=c/u;if(f)return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-s+u/2+a-i/2)))/f+n;return(n+l)/2}function Ga(e,t){var r=e.N;if(r)return Va(r,t);var n=e.site;return n.y===t?n.x:Infinity}function Ya(e){this.site=e;this.edges=[]}Ya.prototype.prepare=function(){var e=this.edges,t=e.length,r;while(t--){r=e[t].edge;if(!r.b||!r.a)e.splice(t,1)}e.sort(Xa);return e.length};function Za(e){var t=e[0][0],r=e[1][0],n=e[0][1],a=e[1][1],i,o,l,s,u=Da,c=u.length,f,d,p,v,h,g;while(c--){f=u[c];if(!f||!f.prepare())continue;p=f.edges;v=p.length;d=0;while(d<v){g=p[d].end(),l=g.x,s=g.y;h=p[++d%v].start(),i=h.x,o=h.y;if(x(l-i)>Le||x(s-o)>Le){p.splice(d,0,new ai(ri(f.site,g,x(l-t)<Le&&a-s>Le?{x:t,y:x(i-t)<Le?o:a}:x(s-a)<Le&&r-l>Le?{x:x(o-a)<Le?i:r,y:a}:x(l-r)<Le&&s-n>Le?{x:r,y:x(i-r)<Le?o:n}:x(s-n)<Le&&l-t>Le?{x:x(o-n)<Le?i:t,y:n}:null),f.site,null));++v}}}}function Xa(e,t){return t.angle-e.angle}function Wa(){oi(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ja(e){var t=e.P,r=e.N;if(!t||!r)return;var n=t.site,a=e.site,i=r.site;if(n===i)return;var o=a.x,l=a.y,s=n.x-o,u=n.y-l,c=i.x-o,f=i.y-l;var d=2*(s*f-u*c);if(d>=-Se)return;var p=s*s+u*u,v=c*c+f*f,h=(f*p-u*v)/d,g=(s*v-c*p)/d,f=g+l;var y=Fa.pop()||new Wa;y.arc=e;y.site=a;y.x=h+o;y.y=f+Math.sqrt(h*h+g*g);y.cy=f;e.circle=y;var m=null,x=Na._;while(x){if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(x.L)x=x.L;else{m=x.P;break}}else{if(x.R)x=x.R;else{m=x;break}}}Na.insert(m,y);if(!m)Ia=y}function Qa(e){var t=e.circle;if(t){if(!t.P)Ia=t.N;Na.remove(t);Fa.push(t);oi(t);e.circle=null}}function $a(e){var t=Oa,r=_n(e[0][0],e[0][1],e[1][0],e[1][1]),n=t.length,a;while(n--){a=t[n];if(!Ka(a,e)||!r(a)||x(a.a.x-a.b.x)<Le&&x(a.a.y-a.b.y)<Le){a.a=a.b=null;t.splice(n,1)}}}function Ka(e,t){var r=e.b;if(r)return true;var n=e.a,a=t[0][0],i=t[1][0],o=t[0][1],l=t[1][1],s=e.l,u=e.r,c=s.x,f=s.y,d=u.x,p=u.y,v=(c+d)/2,h=(f+p)/2,g,y;if(p===f){if(v<a||v>=i)return;if(c>d){if(!n)n={x:v,y:o};else if(n.y>=l)return;r={x:v,y:l}}else{if(!n)n={x:v,y:l};else if(n.y<o)return;r={x:v,y:o}}}else{g=(c-d)/(p-f);y=h-g*v;if(g<-1||g>1){if(c>d){if(!n)n={x:(o-y)/g,y:o};else if(n.y>=l)return;r={x:(l-y)/g,y:l}}else{if(!n)n={x:(l-y)/g,y:l};else if(n.y<o)return;r={x:(o-y)/g,y:o}}}else{if(f<p){if(!n)n={x:a,y:g*a+y};else if(n.x>=i)return;r={x:i,y:g*i+y}}else{if(!n)n={x:i,y:g*i+y};else if(n.x<a)return;r={x:a,y:g*a+y}}}}e.a=n;e.b=r;return true}function ei(e,t){this.l=e;this.r=t;this.a=this.b=null}function ti(e,t,r,n){var a=new ei(e,t);Oa.push(a);if(r)ni(a,e,t,r);if(n)ni(a,t,e,n);Da[e.i].edges.push(new ai(a,e,t));Da[t.i].edges.push(new ai(a,t,e));return a}function ri(e,t,r){var n=new ei(e,null);n.a=t;n.b=r;Oa.push(n);return n}function ni(e,t,r,n){if(!e.a&&!e.b){e.a=n;e.l=t;e.r=r}else if(e.l===r){e.b=n}else{e.a=n}}function ai(e,t,r){var n=e.a,a=e.b;this.edge=e;this.site=t;this.angle=r?Math.atan2(r.y-t.y,r.x-t.x):e.l===t?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}ai.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ii(){this._=null}function oi(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ii.prototype={insert:function(e,t){var r,n,a;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}r=e}else if(this._){e=ui(this._);t.P=null;t.N=e;e.P=e.L=t;r=e}else{t.P=t.N=null;this._=t;r=null}t.L=t.R=null;t.U=r;t.C=true;e=t;while(r&&r.C){n=r.U;if(r===n.L){a=n.R;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.R){li(this,r);e=r;r=e.U}r.C=false;n.C=true;si(this,n)}}else{a=n.L;if(a&&a.C){r.C=a.C=false;n.C=true;e=n}else{if(e===r.L){si(this,r);e=r;r=e.U}r.C=false;n.C=true;li(this,n)}}r=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,r,n=e.L,a=e.R,i,o;if(!n)i=a;else if(!a)i=n;else i=ui(a);if(t){if(t.L===e)t.L=i;else t.R=i}else{this._=i}if(n&&a){o=i.C;i.C=e.C;i.L=n;n.U=i;if(i!==a){t=i.U;i.U=e.U;e=i.R;t.L=e;i.R=a;a.U=i}else{i.U=t;t=i;e=i.R}}else{o=e.C;e=i}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){r=t.R;if(r.C){r.C=false;t.C=true;li(this,t);r=t.R}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.R||!r.R.C){r.L.C=false;r.C=true;si(this,r);r=t.R}r.C=t.C;t.C=r.R.C=false;li(this,t);e=this._;break}}else{r=t.L;if(r.C){r.C=false;t.C=true;si(this,t);r=t.L}if(r.L&&r.L.C||r.R&&r.R.C){if(!r.L||!r.L.C){r.R.C=false;r.C=true;li(this,r);r=t.L}r.C=t.C;t.C=r.L.C=false;si(this,t);e=this._;break}}r.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function li(e,t){var r=t,n=t.R,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.R=n.L;if(r.R)r.R.U=r;n.L=r}function si(e,t){var r=t,n=t.L,a=r.U;if(a){if(a.L===r)a.L=n;else a.R=n}else{e._=n}n.U=a;r.U=n;r.L=n.R;if(r.L)r.L.U=r;n.R=r}function ui(e){while(e.L)e=e.L;return e}function ci(e,t){var r=e.sort(fi).pop(),n,a,i;Oa=[];Da=new Array(e.length);Ea=new ii;Na=new ii;while(true){i=Ia;if(r&&(!i||r.y<i.y||r.y===i.y&&r.x<i.x)){if(r.x!==n||r.y!==a){Da[r.i]=new Ya(r);Ua(r);n=r.x,a=r.y}r=e.pop()}else if(i){Ha(i.arc)}else{break}}if(t)$a(t),Za(t);var o={cells:Da,edges:Oa};Ea=Na=Oa=Da=null;return o}function fi(e,t){return t.y-e.y||t.x-e.x}t.geom.voronoi=function(e){var t=Ma,r=Aa,n=t,a=r,i=di;if(e)return o(e);function o(e){var t=new Array(e.length),r=i[0][0],n=i[0][1],a=i[1][0],o=i[1][1];ci(l(e),i).cells.forEach(function(i,l){var s=i.edges,u=i.site,c=t[l]=s.length?s.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=n&&u.y<=o?[[r,o],[a,o],[a,n],[r,n]]:[];c.point=e[l]});return t}function l(e){return e.map(function(e,t){return{x:Math.round(n(e,t)/Le)*Le,y:Math.round(a(e,t)/Le)*Le,i:t}})}o.links=function(e){return ci(l(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];ci(l(e)).cells.forEach(function(r,n){var a=r.site,i=r.edges.sort(Xa),o=-1,l=i.length,s,u,c=i[l-1].edge,f=c.l===a?c.r:c.l;while(++o<l){s=c;u=f;c=i[o].edge;f=c.l===a?c.r:c.l;if(n<u.i&&n<f.i&&pi(a,u,f)<0){t.push([e[n],e[u.i],e[f.i]])}}});return t};o.x=function(e){return arguments.length?(n=Mt(t=e),o):t};o.y=function(e){return arguments.length?(a=Mt(r=e),o):r};o.clipExtent=function(e){if(!arguments.length)return i===di?null:i;i=e==null?di:e;return o};o.size=function(e){if(!arguments.length)return i===di?null:i&&i[1];return o.clipExtent(e&&[[0,0],e])};return o};var di=[[-1e6,-1e6],[1e6,1e6]];function pi(e,t,r){return(e.x-r.x)*(t.y-e.y)-(e.x-t.x)*(r.y-e.y)}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)};t.geom.quadtree=function(e,t,r,n,a){var i=Ma,o=Aa,l;if(l=arguments.length){i=vi;o=hi;if(l===3){a=r;n=t;r=t=0}return s(e)}function s(e){var s,u=Mt(i),c=Mt(o),f,d,p,v,h,g,y,m;if(t!=null){h=t,g=r,y=n,m=a}else{y=m=-(h=g=Infinity);f=[],d=[];v=e.length;if(l)for(p=0;p<v;++p){s=e[p];if(s.x<h)h=s.x;if(s.y<g)g=s.y;if(s.x>y)y=s.x;if(s.y>m)m=s.y;f.push(s.x);d.push(s.y)}else for(p=0;p<v;++p){var b=+u(s=e[p],p),_=+c(s,p);if(b<h)h=b;if(_<g)g=_;if(b>y)y=b;if(_>m)m=_;f.push(b);d.push(_)}}var w=y-h,k=m-g;if(w>k)m=g+w;else y=h+k;function M(e,t,r,n,a,i,o,l){if(isNaN(r)||isNaN(n))return;if(e.leaf){var s=e.x,u=e.y;if(s!=null){if(x(s-r)+x(u-n)<.01){A(e,t,r,n,a,i,o,l)}else{var c=e.point;e.x=e.y=e.point=null;A(e,c,s,u,a,i,o,l);A(e,t,r,n,a,i,o,l)}}else{e.x=r,e.y=n,e.point=t}}else{A(e,t,r,n,a,i,o,l)}}function A(e,t,r,n,a,i,o,l){var s=(a+o)*.5,u=(i+l)*.5,c=r>=s,f=n>=u,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=gi());if(c)a=s;else o=s;if(f)i=u;else l=u;M(e,t,r,n,a,i,o,l)}var T=gi();T.add=function(e){M(T,e,+u(e,++p),+c(e,p),h,g,y,m)};T.visit=function(e){yi(e,T,h,g,y,m)};T.find=function(e){return mi(T,e[0],e[1],h,g,y,m)};p=-1;if(t==null){while(++p<v){M(T,e[p],f[p],d[p],h,g,y,m)}--p}else e.forEach(T.add);f=d=e=s=null;return T}s.x=function(e){return arguments.length?(i=e,s):i};s.y=function(e){return arguments.length?(o=e,s):o};s.extent=function(e){if(!arguments.length)return t==null?null:[[t,r],[n,a]];if(e==null)t=r=n=a=null;else t=+e[0][0],r=+e[0][1],n=+e[1][0],a=+e[1][1];return s};s.size=function(e){if(!arguments.length)return t==null?null:[n-t,a-r];if(e==null)t=r=n=a=null;else t=r=0,n=+e[0],a=+e[1];return s};return s};function vi(e){return e.x}function hi(e){return e.y}function gi(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function yi(e,t,r,n,a,i){if(!e(t,r,n,a,i)){var o=(r+a)*.5,l=(n+i)*.5,s=t.nodes;if(s[0])yi(e,s[0],r,n,o,l);if(s[1])yi(e,s[1],o,n,a,l);if(s[2])yi(e,s[2],r,l,o,i);if(s[3])yi(e,s[3],o,l,a,i)}}function mi(e,t,r,n,a,i,o){var l=Infinity,s;(function e(u,c,f,d,p){if(c>i||f>o||d<n||p<a)return;if(v=u.point){var v,h=t-u.x,g=r-u.y,y=h*h+g*g;if(y<l){var m=Math.sqrt(l=y);n=t-m,a=r-m;i=t+m,o=r+m;s=v}}var x=u.nodes,b=(c+d)*.5,_=(f+p)*.5,w=t>=b,k=r>=_;for(var M=k<<1|w,A=M+4;M<A;++M){if(u=x[M&3])switch(M&3){case 0:e(u,c,f,b,_);break;case 1:e(u,b,f,d,_);break;case 2:e(u,c,_,b,p);break;case 3:e(u,b,_,d,p);break}}})(e,n,a,i,o);return s}t.interpolateRgb=xi;function xi(e,r){e=t.rgb(e);r=t.rgb(r);var n=e.r,a=e.g,i=e.b,o=r.r-n,l=r.g-a,s=r.b-i;return function(e){return"#"+yt(Math.round(n+o*e))+yt(Math.round(a+l*e))+yt(Math.round(i+s*e))}}t.interpolateObject=bi;function bi(e,t){var r={},n={},a;for(a in e){if(a in t){r[a]=Ai(e[a],t[a])}else{n[a]=e[a]}}for(a in t){if(!(a in e)){n[a]=t[a]}}return function(e){for(a in r)n[a]=r[a](e);return n}}t.interpolateNumber=_i;function _i(e,t){e=+e,t=+t;return function(r){return e*(1-r)+t*r}}t.interpolateString=wi;function wi(e,t){var r=ki.lastIndex=Mi.lastIndex=0,n,a,i,o=-1,l=[],s=[];e=e+"",t=t+"";while((n=ki.exec(e))&&(a=Mi.exec(t))){if((i=a.index)>r){i=t.slice(r,i);if(l[o])l[o]+=i;else l[++o]=i}if((n=n[0])===(a=a[0])){if(l[o])l[o]+=a;else l[++o]=a}else{l[++o]=null;s.push({i:o,x:_i(n,a)})}r=Mi.lastIndex}if(r<t.length){i=t.slice(r);if(l[o])l[o]+=i;else l[++o]=i}return l.length<2?s[0]?(t=s[0].x,function(e){return t(e)+""}):function(){return t}:(t=s.length,function(e){for(var r=0,n;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}var ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mi=new RegExp(ki.source,"g");t.interpolate=Ai;function Ai(e,r){var n=t.interpolators.length,a;while(--n>=0&&!(a=t.interpolators[n](e,r)));return a}t.interpolators=[function(e,t){var r=typeof t;return(r==="string"?kt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?xi:wi:t instanceof We?xi:Array.isArray(t)?Ti:r==="object"&&isNaN(t)?bi:_i)(e,t)}];t.interpolateArray=Ti;function Ti(e,t){var r=[],n=[],a=e.length,i=t.length,o=Math.min(e.length,t.length),l;for(l=0;l<o;++l)r.push(Ai(e[l],t[l]));for(;l<a;++l)n[l]=e[l];for(;l<i;++l)n[l]=t[l];return function(e){for(l=0;l<o;++l)n[l]=r[l](e);return n}}var Li=function(){return D};var Si=t.map({linear:Li,poly:Ii,quad:function(){return Di},cubic:function(){return Ei},sin:function(){return Ni},exp:function(){return Fi},circle:function(){return ji},elastic:Bi,back:qi,bounce:function(){return Hi}});var Ci=t.map({in:D,out:zi,"in-out":Oi,"out-in":function(e){return Oi(zi(e))}});t.ease=function(e){var t=e.indexOf("-"),r=t>=0?e.slice(0,t):e,a=t>=0?e.slice(t+1):"in";r=Si.get(r)||Li;a=Ci.get(a)||D;return Pi(a(r.apply(null,n.call(arguments,1))))};function Pi(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function zi(e){return function(t){return 1-e(1-t)}}function Oi(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Di(e){return e*e}function Ei(e){return e*e*e}function Ri(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}function Ii(e){return function(t){return Math.pow(t,e)}}function Ni(e){return 1-Math.cos(e*Oe)}function Fi(e){return Math.pow(2,10*(e-1))}function ji(e){return 1-Math.sqrt(1-e*e)}function Bi(e,t){var r;if(arguments.length<2)t=.45;if(arguments.length)r=t/Pe*Math.asin(1/e);else e=1,r=t/4;return function(n){return 1+e*Math.pow(2,-10*n)*Math.sin((n-r)*Pe/t)}}function qi(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Hi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}t.interpolateHcl=Ui;function Ui(e,r){e=t.hcl(e);r=t.hcl(r);var n=e.h,a=e.c,i=e.l,o=r.h-n,l=r.c-a,s=r.l-i;if(isNaN(l))l=0,a=isNaN(a)?r.c:a;if(isNaN(o))o=0,n=isNaN(n)?r.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(n+o*e,a+l*e,i+s*e)+""}}t.interpolateHsl=Vi;function Vi(e,r){e=t.hsl(e);r=t.hsl(r);var n=e.h,a=e.s,i=e.l,o=r.h-n,l=r.s-a,s=r.l-i;if(isNaN(l))l=0,a=isNaN(a)?r.s:a;if(isNaN(o))o=0,n=isNaN(n)?r.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return $e(n+o*e,a+l*e,i+s*e)+""}}t.interpolateLab=Gi;function Gi(e,r){e=t.lab(e);r=t.lab(r);var n=e.l,a=e.a,i=e.b,o=r.l-n,l=r.a-a,s=r.b-i;return function(e){return st(n+o*e,a+l*e,i+s*e)+""}}t.interpolateRound=Yi;function Yi(e,t){t-=e;return function(r){return Math.round(e+t*r)}}t.transform=function(e){var r=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(e){if(e!=null){r.setAttribute("transform",e);var t=r.transform.baseVal.consolidate()}return new Zi(t?t.matrix:Qi)})(e)};function Zi(e){var t=[e.a,e.b],r=[e.c,e.d],n=Wi(t),a=Xi(t,r),i=Wi(Ji(r,t,-a))||0;if(t[0]*r[1]<r[0]*t[1]){t[0]*=-1;t[1]*=-1;n*=-1;a*=-1}this.rotate=(n?Math.atan2(t[1],t[0]):Math.atan2(-r[0],r[1]))*Ee;this.translate=[e.e,e.f];this.scale=[n,i];this.skew=i?Math.atan2(a,i)*Ee:0}Zi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Xi(e,t){return e[0]*t[0]+e[1]*t[1]}function Wi(e){var t=Math.sqrt(Xi(e,e));if(t){e[0]/=t;e[1]/=t}return t}function Ji(e,t,r){e[0]+=r*t[0];e[1]+=r*t[1];return e}var Qi={a:1,b:0,c:0,d:1,e:0,f:0};t.interpolateTransform=no;function $i(e){return e.length?e.pop()+",":""}function Ki(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:_i(e[0],t[0])},{i:a-2,x:_i(e[1],t[1])})}else if(t[0]||t[1]){r.push("translate("+t+")")}}function eo(e,t,r,n){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;n.push({i:r.push($i(r)+"rotate(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"rotate("+t+")")}}function to(e,t,r,n){if(e!==t){n.push({i:r.push($i(r)+"skewX(",null,")")-2,x:_i(e,t)})}else if(t){r.push($i(r)+"skewX("+t+")")}}function ro(e,t,r,n){if(e[0]!==t[0]||e[1]!==t[1]){var a=r.push($i(r)+"scale(",null,",",null,")");n.push({i:a-4,x:_i(e[0],t[0])},{i:a-2,x:_i(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){r.push($i(r)+"scale("+t+")")}}function no(e,r){var n=[],a=[];e=t.transform(e),r=t.transform(r);Ki(e.translate,r.translate,n,a);eo(e.rotate,r.rotate,n,a);to(e.skew,r.skew,n,a);ro(e.scale,r.scale,n,a);e=r=null;return function(e){var t=-1,r=a.length,i;while(++t<r)n[(i=a[t]).i]=i.x(e);return n.join("")}}function ao(e,t){t=(t-=e=+e)||1/t;return function(r){return(r-e)/t}}function io(e,t){t=(t-=e=+e)||1/t;return function(r){return Math.max(0,Math.min(1,(r-e)/t))}}t.layout={};t.layout.bundle=function(){return function(e){var t=[],r=-1,n=e.length;while(++r<n)t.push(oo(e[r]));return t}};function oo(e){var t=e.source,r=e.target,n=so(t,r),a=[t];while(t!==n){t=t.parent;a.push(t)}var i=a.length;while(r!==n){a.splice(i,0,r);r=r.parent}return a}function lo(e){var t=[],r=e.parent;while(r!=null){t.push(e);e=r;r=r.parent}t.push(e);return t}function so(e,t){if(e===t)return e;var r=lo(e),n=lo(t),a=r.pop(),i=n.pop(),o=null;while(a===i){o=a;a=r.pop();i=n.pop()}return o}t.layout.chord=function(){var e={},r,n,a,i,o=0,l,s,u;function c(){var e={},c=[],d=t.range(i),p=[],v,h,g,y,m;r=[];n=[];v=0,y=-1;while(++y<i){h=0,m=-1;while(++m<i){h+=a[y][m]}c.push(h);p.push(t.range(i));v+=h}if(l){d.sort(function(e,t){return l(c[e],c[t])})}if(s){p.forEach(function(e,t){e.sort(function(e,r){return s(a[t][e],a[t][r])})})}v=(Pe-o*i)/v;h=0,y=-1;while(++y<i){g=h,m=-1;while(++m<i){var x=d[y],b=p[x][m],_=a[x][b],w=h,k=h+=_*v;e[x+"-"+b]={index:x,subindex:b,startAngle:w,endAngle:k,value:_}}n[x]={index:x,startAngle:g,endAngle:h,value:c[x]};h+=o}y=-1;while(++y<i){m=y-1;while(++m<i){var M=e[y+"-"+m],A=e[m+"-"+y];if(M.value||A.value){r.push(M.value<A.value?{source:A,target:M}:{source:M,target:A})}}}if(u)f()}function f(){r.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(t){if(!arguments.length)return a;i=(a=t)&&a.length;r=n=null;return e};e.padding=function(t){if(!arguments.length)return o;o=t;r=n=null;return e};e.sortGroups=function(t){if(!arguments.length)return l;l=t;r=n=null;return e};e.sortSubgroups=function(t){if(!arguments.length)return s;s=t;r=null;return e};e.sortChords=function(t){if(!arguments.length)return u;u=t;if(r)f();return e};e.chords=function(){if(!r)c();return r};e.groups=function(){if(!n)c();return n};return e};t.layout.force=function(){var e={},r=t.dispatch("start","tick","end"),n,a=[1,1],i,o,l=.9,s=ho,u=go,c=-30,f=yo,d=.1,p=.64,v=[],h=[],g,y,m;function x(e){return function(t,r,n,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,l=a-r,s=i*i+o*o;if(l*l/p<s){if(s<f){var u=t.charge/s;e.px-=i*u;e.py-=o*u}return true}if(t.point&&s&&s<f){var u=t.pointCharge/s;e.px-=i*u;e.py-=o*u}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){n=null;r.end({type:"end",alpha:o=0});return true}var e=v.length,i=h.length,s,u,f,p,b,_,w,k,M;for(u=0;u<i;++u){f=h[u];p=f.source;b=f.target;k=b.x-p.x;M=b.y-p.y;if(_=k*k+M*M){_=o*y[u]*((_=Math.sqrt(_))-g[u])/_;k*=_;M*=_;b.x-=k*(w=p.weight+b.weight?p.weight/(p.weight+b.weight):.5);b.y-=M*w;p.x+=k*(w=1-w);p.y+=M*w}}if(w=o*d){k=a[0]/2;M=a[1]/2;u=-1;if(w)while(++u<e){f=v[u];f.x+=(k-f.x)*w;f.y+=(M-f.y)*w}}if(c){vo(s=t.geom.quadtree(v),o,m);u=-1;while(++u<e){if(!(f=v[u]).fixed){s.visit(x(f))}}}u=-1;while(++u<e){f=v[u];if(f.fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*l;f.y-=(f.py-(f.py=f.y))*l}}r.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return v;v=t;return e};e.links=function(t){if(!arguments.length)return h;h=t;return e};e.size=function(t){if(!arguments.length)return a;a=t;return e};e.linkDistance=function(t){if(!arguments.length)return s;s=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return l;l=+t;return e};e.charge=function(t){if(!arguments.length)return c;c=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(f);f=t*t;return e};e.gravity=function(t){if(!arguments.length)return d;d=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(p);p=t*t;return e};e.alpha=function(t){if(!arguments.length)return o;t=+t;if(o){if(t>0){o=t}else{n.c=null,n.t=NaN,n=null;r.end({type:"end",alpha:o=0})}}else if(t>0){r.start({type:"start",alpha:o=t});n=Et(e.tick)}return e};e.start=function(){var t,r=v.length,n=h.length,i=a[0],o=a[1],l,f;for(t=0;t<r;++t){(f=v[t]).index=t;f.weight=0}for(t=0;t<n;++t){f=h[t];if(typeof f.source=="number")f.source=v[f.source];if(typeof f.target=="number")f.target=v[f.target];++f.source.weight;++f.target.weight}for(t=0;t<r;++t){f=v[t];if(isNaN(f.x))f.x=d("x",i);if(isNaN(f.y))f.y=d("y",o);if(isNaN(f.px))f.px=f.x;if(isNaN(f.py))f.py=f.y}g=[];if(typeof s==="function")for(t=0;t<n;++t)g[t]=+s.call(this,h[t],t);else for(t=0;t<n;++t)g[t]=s;y=[];if(typeof u==="function")for(t=0;t<n;++t)y[t]=+u.call(this,h[t],t);else for(t=0;t<n;++t)y[t]=u;m=[];if(typeof c==="function")for(t=0;t<r;++t)m[t]=+c.call(this,v[t],t);else for(t=0;t<r;++t)m[t]=c;function d(e,a){if(!l){l=new Array(r);for(s=0;s<r;++s){l[s]=[]}for(s=0;s<n;++s){var i=h[s];l[i.source.index].push(i.target);l[i.target.index].push(i.source)}}var o=l[t],s=-1,u=o.length,c;while(++s<u)if(!isNaN(c=o[s][e]))return c;return Math.random()*a}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!i)i=t.behavior.drag().origin(D).on("dragstart.force",uo).on("drag.force",b).on("dragend.force",co);if(!arguments.length)return i;this.on("mouseover.force",fo).on("mouseout.force",po).call(i)};function b(r){r.px=t.event.x,r.py=t.event.y;e.resume()}return t.rebind(e,r,"on")};function uo(e){e.fixed|=2}function co(e){e.fixed&=~6}function fo(e){e.fixed|=4;e.px=e.x,e.py=e.y}function po(e){e.fixed&=~4}function vo(e,t,r){var n=0,a=0;e.charge=0;if(!e.leaf){var i=e.nodes,o=i.length,l=-1,s;while(++l<o){s=i[l];if(s==null)continue;vo(s,t,r);e.charge+=s.charge;n+=s.charge*s.cx;a+=s.charge*s.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var u=t*r[e.point.index];e.charge+=e.pointCharge=u;n+=u*e.point.x;a+=u*e.point.y}e.cx=n/e.charge;e.cy=a/e.charge}var ho=20,go=1,yo=Infinity;t.layout.hierarchy=function(){var e=ko,t=_o,r=wo;function n(a){var i=[a],o=[],l;a.depth=0;while((l=i.pop())!=null){o.push(l);if((u=t.call(n,l,l.depth))&&(s=u.length)){var s,u,c;while(--s>=0){i.push(c=u[s]);c.parent=l;c.depth=l.depth+1}if(r)l.value=0;l.children=u}else{if(r)l.value=+r.call(n,l,l.depth)||0;delete l.children}}bo(a,function(t){var n,a;if(e&&(n=t.children))n.sort(e);if(r&&(a=t.parent))a.value+=t.value});return o}n.sort=function(t){if(!arguments.length)return e;e=t;return n};n.children=function(e){if(!arguments.length)return t;t=e;return n};n.value=function(e){if(!arguments.length)return r;r=e;return n};n.revalue=function(e){if(r){xo(e,function(e){if(e.children)e.value=0});bo(e,function(e){var t;if(!e.children)e.value=+r.call(n,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return n};function mo(e,r){t.rebind(e,r,"sort","children","value");e.nodes=e;e.links=Mo;return e}function xo(e,t){var r=[e];while((e=r.pop())!=null){t(e);if((a=e.children)&&(n=a.length)){var n,a;while(--n>=0)r.push(a[n])}}}function bo(e,t){var r=[e],n=[];while((e=r.pop())!=null){n.push(e);if((o=e.children)&&(i=o.length)){var a=-1,i,o;while(++a<i)r.push(o[a])}}while((e=n.pop())!=null){t(e)}}function _o(e){return e.children}function wo(e){return e.value}function ko(e,t){return t.value-e.value}function Mo(e){return t.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function n(e,t,r,a){var i=e.children;e.x=t;e.y=e.depth*a;e.dx=r;e.dy=a;if(i&&(l=i.length)){var o=-1,l,s,u;r=e.value?r/e.value:0;while(++o<l){n(s=i[o],t,u=s.value*r,a);t+=u}}}function a(e){var t=e.children,r=0;if(t&&(i=t.length)){var n=-1,i;while(++n<i)r=Math.max(r,a(t[n]))}return 1+r}function i(t,i){var o=e.call(this,t,i);n(o[0],0,r[0],r[1]/a(o[0]));return o}i.size=function(e){if(!arguments.length)return r;r=e;return i};return mo(i,e)};t.layout.pie=function(){var e=Number,r=Ao,n=0,a=Pe,i=0;function o(l){var s=l.length,u=l.map(function(t,r){return+e.call(o,t,r)}),c=+(typeof n==="function"?n.apply(this,arguments):n),f=(typeof a==="function"?a.apply(this,arguments):a)-c,d=Math.min(Math.abs(f)/s,+(typeof i==="function"?i.apply(this,arguments):i)),p=d*(f<0?-1:1),v=t.sum(u),h=v?(f-s*p)/v:0,g=t.range(s),y=[],m;if(r!=null)g.sort(r===Ao?function(e,t){return u[t]-u[e]}:function(e,t){return r(l[e],l[t])});g.forEach(function(e){y[e]={data:l[e],value:m=u[e],startAngle:c,endAngle:c+=m*h+p,padAngle:d}});return y}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return r;r=e;return o};o.startAngle=function(e){if(!arguments.length)return n;n=e;return o};o.endAngle=function(e){if(!arguments.length)return a;a=e;return o};o.padAngle=function(e){if(!arguments.length)return i;i=e;return o};return o};var Ao={};t.layout.stack=function(){var e=D,r=zo,n=Oo,a=So,i=To,o=Lo;function l(s,u){if(!(h=s.length))return s;var c=s.map(function(t,r){return e.call(l,t,r)});var f=c.map(function(e){return e.map(function(e,t){return[i.call(l,e,t),o.call(l,e,t)]})});var d=r.call(l,f,u);c=t.permute(c,d);f=t.permute(f,d);var p=n.call(l,f,u);var v=c[0].length,h,g,y,m;for(y=0;y<v;++y){a.call(l,c[0][y],m=p[y],f[0][y][1]);for(g=1;g<h;++g){a.call(l,c[g][y],m+=f[g-1][y][1],f[g][y][1])}}return s}l.values=function(t){if(!arguments.length)return e;e=t;return l};l.order=function(e){if(!arguments.length)return r;r=typeof e==="function"?e:Co.get(e)||zo;return l};l.offset=function(e){if(!arguments.length)return n;n=typeof e==="function"?e:Po.get(e)||Oo;return l};l.x=function(e){if(!arguments.length)return i;i=e;return l};l.y=function(e){if(!arguments.length)return o;o=e;return l};l.out=function(e){if(!arguments.length)return a;a=e;return l};return l};function To(e){return e.x}function Lo(e){return e.y}function So(e,t,r){e.y0=t;e.y=r}var Co=t.map({"inside-out":function(e){var r=e.length,n,a,i=e.map(Do),o=e.map(Eo),l=t.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,c=[],f=[];for(n=0;n<r;++n){a=l[n];if(s<u){s+=o[a];c.push(a)}else{u+=o[a];f.push(a)}}return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:zo});var Po=t.map({silhouette:function(e){var t=e.length,r=e[0].length,n=[],a=0,i,o,l,s=[];for(o=0;o<r;++o){for(i=0,l=0;i<t;i++)l+=e[i][o][1];if(l>a)a=l;n.push(l)}for(o=0;o<r;++o){s[o]=(a-n[o])/2}return s},wiggle:function(e){var t=e.length,r=e[0],n=r.length,a,i,o,l,s,u,c,f,d,p=[];p[0]=f=d=0;for(i=1;i<n;++i){for(a=0,l=0;a<t;++a)l+=e[a][i][1];for(a=0,s=0,c=r[i][0]-r[i-1][0];a<t;++a){for(o=0,u=(e[a][i][1]-e[a][i-1][1])/(2*c);o<a;++o){u+=(e[o][i][1]-e[o][i-1][1])/c}s+=u*e[a][i][1]}p[i]=f-=l?s/l*c:0;if(f<d)d=f}for(i=0;i<n;++i)p[i]-=d;return p},expand:function(e){var t=e.length,r=e[0].length,n=1/t,a,i,o,l=[];for(i=0;i<r;++i){for(a=0,o=0;a<t;a++)o+=e[a][i][1];if(o)for(a=0;a<t;a++)e[a][i][1]/=o;else for(a=0;a<t;a++)e[a][i][1]=n}for(i=0;i<r;++i)l[i]=0;return l},zero:Oo});function zo(e){return t.range(e.length)}function Oo(e){var t=-1,r=e[0].length,n=[];while(++t<r)n[t]=0;return n}function Do(e){var t=1,r=0,n=e[0][1],a,i=e.length;for(;t<i;++t){if((a=e[t][1])>n){r=t;n=a}}return r}function Eo(e){return e.reduce(Ro,0)}function Ro(e,t){return e+t[1]}t.layout.histogram=function(){var e=true,r=Number,n=Fo,a=Io;function i(i,o){var l=[],s=i.map(r,this),u=n.call(this,s,o),c=a.call(this,u,s,o),f,o=-1,d=s.length,p=c.length-1,v=e?1:1/d,h;while(++o<p){f=l[o]=[];f.dx=c[o+1]-(f.x=c[o]);f.y=0}if(p>0){o=-1;while(++o<d){h=s[o];if(h>=u[0]&&h<=u[1]){f=l[t.bisect(c,h,1,p)-1];f.y+=v;f.push(i[o])}}}return l}i.value=function(e){if(!arguments.length)return r;r=e;return i};i.range=function(e){if(!arguments.length)return n;n=Mt(e);return i};i.bins=function(e){if(!arguments.length)return a;a=typeof e==="number"?function(t){return No(t,e)}:Mt(e);return i};i.frequency=function(t){if(!arguments.length)return e;e=!!t;return i};return i};function Io(e,t){return No(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function No(e,t){var r=-1,n=+e[0],a=(e[1]-n)/t,i=[];while(++r<=t)i[r]=a*r+n;return i}function Fo(e){return[t.min(e),t.max(e)]}t.layout.pack=function(){var e=t.layout.hierarchy().sort(jo),r=0,n=[1,1],a;function i(t,i){var o=e.call(this,t,i),l=o[0],s=n[0],u=n[1],c=a==null?Math.sqrt:typeof a==="function"?a:function(){return a};l.x=l.y=0;bo(l,function(e){e.r=+c(e.value)});bo(l,Uo);if(r){var f=r*(a?1:Math.max(2*l.r/s,2*l.r/u))/2;bo(l,function(e){e.r+=f});bo(l,Uo);bo(l,function(e){e.r-=f})}Yo(l,s/2,u/2,a?1:1/Math.max(2*l.r/s,2*l.r/u));return o}i.size=function(e){if(!arguments.length)return n;n=e;return i};i.radius=function(e){if(!arguments.length)return a;a=e==null||typeof e==="function"?e:+e;return i};i.padding=function(e){if(!arguments.length)return r;r=+e;return i};return mo(i,e)};function jo(e,t){return e.value-t.value}function Bo(e,t){var r=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=r;r._pack_prev=t}function qo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var r=t.x-e.x,n=t.y-e.y,a=e.r+t.r;return.999*a*a>r*r+n*n}function Uo(e){if(!(t=e.children)||!(d=t.length))return;var t,r=Infinity,n=-Infinity,a=Infinity,i=-Infinity,o,l,s,u,c,f,d;function p(e){r=Math.min(e.x-e.r,r);n=Math.max(e.x+e.r,n);a=Math.min(e.y-e.r,a);i=Math.max(e.y+e.r,i)}t.forEach(Vo);o=t[0];o.x=-o.r;o.y=0;p(o);if(d>1){l=t[1];l.x=l.r;l.y=0;p(l);if(d>2){s=t[2];Zo(o,l,s);p(s);Bo(o,s);o._pack_prev=s;Bo(s,l);l=o._pack_next;for(u=3;u<d;u++){Zo(o,l,s=t[u]);var v=0,h=1,g=1;for(c=l._pack_next;c!==l;c=c._pack_next,h++){if(Ho(c,s)){v=1;break}}if(v==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,g++){if(Ho(f,s)){break}}}if(v){if(h<g||h==g&&l.r<o.r)qo(o,l=c);else qo(o=f,l);u--}else{Bo(o,s);l=s;p(s)}}}}var y=(r+n)/2,m=(a+i)/2,x=0;for(u=0;u<d;u++){s=t[u];s.x-=y;s.y-=m;x=Math.max(x,s.r+Math.sqrt(s.x*s.x+s.y*s.y))}e.r=x;t.forEach(Go)}function Vo(e){e._pack_next=e._pack_prev=e}function Go(e){delete e._pack_next;delete e._pack_prev}function Yo(e,t,r,n){var a=e.children;e.x=t+=n*e.x;e.y=r+=n*e.y;e.r*=n;if(a){var i=-1,o=a.length;while(++i<o)Yo(a[i],t,r,n)}}function Zo(e,t,r){var n=e.r+r.r,a=t.x-e.x,i=t.y-e.y;if(n&&(a||i)){var o=t.r+r.r,l=a*a+i*i;o*=o;n*=n;var s=.5+(n-o)/(2*l),u=Math.sqrt(Math.max(0,2*o*(n+l)-(n-=l)*n-o*o))/(2*l);r.x=e.x+s*a+u*i;r.y=e.y+s*i-u*a}else{r.x=e.x+n;r.y=e.y}}t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Xo,n=[1,1],a=null;function i(t,i){var u=e.call(this,t,i),f=u[0],d=o(f);bo(d,l),d.parent.m=-d.z;xo(d,s);if(a)xo(f,c);else{var p=f,v=f,h=f;xo(f,function(e){if(e.x<p.x)p=e;if(e.x>v.x)v=e;if(e.depth>h.depth)h=e});var g=r(p,v)/2-p.x,y=n[0]/(v.x+r(v,p)/2+g),m=n[1]/(h.depth||1);xo(f,function(e){e.x=(e.x+g)*y;e.y=e.depth*m})}return u}function o(e){var t={A:null,children:[e]},r=[t],n;while((n=r.pop())!=null){for(var a=n.children,i,o=0,l=a.length;o<l;++o){r.push((a[o]=i={_:a[o],parent:n,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i)}}return t.children[0]}function l(e){var t=e.children,n=e.parent.children,a=e.i?n[e.i-1]:null;if(t.length){$o(e);var i=(t[0].z+t[t.length-1].z)/2;if(a){e.z=a.z+r(e._,a._);e.m=e.z-i}else{e.z=i}}else if(a){e.z=a.z+r(e._,a._)}e.parent.A=u(e,a,e.parent.A||n[0])}function s(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function u(e,t,n){if(t){var a=e,i=e,o=t,l=a.parent.children[0],s=a.m,u=i.m,c=o.m,f=l.m,d;while(o=Jo(o),a=Wo(a),o&&a){l=Wo(l);i=Jo(i);i.a=e;d=o.z+c-a.z-s+r(o._,a._);if(d>0){Qo(Ko(o,e,n),e,d);s+=d;u+=d}c+=o.m;s+=a.m;f+=l.m;u+=i.m}if(o&&!Jo(i)){i.t=o;i.m+=c-u}if(a&&!Wo(l)){l.t=a;l.m+=s-f;n=e}}return n}function c(e){e.x*=n[0];e.y=e.depth*n[1]}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return a?null:n;a=(n=e)==null?c:null;return i};i.nodeSize=function(e){if(!arguments.length)return a?n:null;a=(n=e)==null?null:c;return i};return mo(i,e)};function Xo(e,t){return e.parent==t.parent?1:2}function Wo(e){var t=e.children;return t.length?t[0]:e.t}function Jo(e){var t=e.children,r;return(r=t.length)?t[r-1]:e.t}function Qo(e,t,r){var n=r/(t.i-e.i);t.c-=n;t.s+=r;e.c+=n;t.z+=r;t.m+=r}function $o(e){var t=0,r=0,n=e.children,a=n.length,i;while(--a>=0){i=n[a];i.z+=t;i.m+=t;t+=i.s+(r+=i.c)}}function Ko(e,t,r){return e.a.parent===t.parent?e.a:r}t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=Xo,n=[1,1],a=false;function i(t,i){var o=e.call(this,t,i),l=o[0],s,u=0;bo(l,function(e){var t=e.children;if(t&&t.length){e.x=tl(t);e.y=el(t)}else{e.x=s?u+=r(e,s):0;e.y=0;s=e}});var c=rl(l),f=nl(l),d=c.x-r(c,f)/2,p=f.x+r(f,c)/2;bo(l,a?function(e){e.x=(e.x-l.x)*n[0];e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-d)/(p-d)*n[0];e.y=(1-(l.y?e.y/l.y:1))*n[1]});return o}i.separation=function(e){if(!arguments.length)return r;r=e;return i};i.size=function(e){if(!arguments.length)return a?null:n;a=(n=e)==null;return i};i.nodeSize=function(e){if(!arguments.length)return a?n:null;a=(n=e)!=null;return i};return mo(i,e)};function el(e){return 1+t.max(e,function(e){return e.y})}function tl(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function rl(e){var t=e.children;return t&&t.length?rl(t[0]):e}function nl(e){var t=e.children,r;return t&&(r=t.length)?nl(t[r-1]):e}t.layout.treemap=function(){var e=t.layout.hierarchy(),r=Math.round,n=[1,1],a=null,i=al,o=false,l,s="squarify",u=.5*(1+Math.sqrt(5));function c(e,t){var r=-1,n=e.length,a,i;while(++r<n){i=(a=e[r]).value*(t<0?0:t);a.area=isNaN(i)||i<=0?0:i}}function f(e){var t=e.children;if(t&&t.length){var r=i(e),n=[],a=t.slice(),o,l=Infinity,u,d=s==="slice"?r.dx:s==="dice"?r.dy:s==="slice-dice"?e.depth&1?r.dy:r.dx:Math.min(r.dx,r.dy),h;c(a,r.dx*r.dy/e.value);n.area=0;while((h=a.length)>0){n.push(o=a[h-1]);n.area+=o.area;if(s!=="squarify"||(u=p(n,d))<=l){a.pop();l=u}else{n.area-=n.pop().area;v(n,d,r,false);d=Math.min(r.dx,r.dy);n.length=n.area=0;l=Infinity}}if(n.length){v(n,d,r,true);n.length=n.area=0}t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var r=i(e),n=t.slice(),a,o=[];c(n,r.dx*r.dy/e.value);o.area=0;while(a=n.pop()){o.push(a);o.area+=a.area;if(a.z!=null){v(o,a.z?r.dx:r.dy,r,!n.length);o.length=o.area=0}}t.forEach(d)}}function p(e,t){var r=e.area,n,a=0,i=Infinity,o=-1,l=e.length;while(++o<l){if(!(n=e[o].area))continue;if(n<i)i=n;if(n>a)a=n}r*=r;t*=t;return r?Math.max(t*a*u/r,r/(t*i*u)):Infinity}function v(e,t,n,a){var i=-1,o=e.length,l=n.x,s=n.y,u=t?r(e.area/t):0,c;if(t==n.dx){if(a||u>n.dy)u=n.dy;while(++i<o){c=e[i];c.x=l;c.y=s;c.dy=u;l+=c.dx=Math.min(n.x+n.dx-l,u?r(c.area/u):0)}c.z=true;c.dx+=n.x+n.dx-l;n.y+=u;n.dy-=u}else{if(a||u>n.dx)u=n.dx;while(++i<o){c=e[i];c.x=l;c.y=s;c.dx=u;s+=c.dy=Math.min(n.y+n.dy-s,u?r(c.area/u):0)}c.z=false;c.dy+=n.y+n.dy-s;n.x+=u;n.dx-=u}}function h(t){var r=l||e(t),a=r[0];a.x=a.y=0;if(a.value)a.dx=n[0],a.dy=n[1];else a.dx=a.dy=0;if(l)e.revalue(a);c([a],a.dx*a.dy/a.value);(l?d:f)(a);if(o)l=r;return r}h.size=function(e){if(!arguments.length)return n;n=e;return h};h.padding=function(e){if(!arguments.length)return a;function t(t){var r=e.call(h,t,t.depth);return r==null?al(t):il(t,typeof r==="number"?[r,r,r,r]:r)}function r(t){return il(t,e)}var n;i=(a=e)==null?al:(n=typeof e)==="function"?t:n==="number"?(e=[e,e,e,e],r):r;return h};h.round=function(e){if(!arguments.length)return r!=Number;r=e?Math.round:Number;return h};h.sticky=function(e){if(!arguments.length)return o;o=e;l=null;return h};h.ratio=function(e){if(!arguments.length)return u;u=e;return h};h.mode=function(e){if(!arguments.length)return s;s=e+"";return h};return mo(h,e)};function al(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function il(e,t){var r=e.x+t[3],n=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];if(a<0){r+=a/2;a=0}if(i<0){n+=i/2;i=0}return{x:r,y:n,dx:a,dy:i}}t.random={normal:function(e,t){var r=arguments.length;if(r<2)t=1;if(r<1)e=0;return function(){var r,n,a;do{r=Math.random()*2-1;n=Math.random()*2-1;a=r*r+n*n}while(!a||a>1);return e+t*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(e){return function(){for(var t=0,r=0;r<e;r++)t+=Math.random();return t}}};t.scale={};function ol(e){var t=e[0],r=e[e.length-1];return t<r?[t,r]:[r,t]}function ll(e){return e.rangeExtent?e.rangeExtent():ol(e.range())}function sl(e,t,r,n){var a=r(e[0],e[1]),i=n(t[0],t[1]);return function(e){return i(a(e))}}function ul(e,t){var r=0,n=e.length-1,a=e[r],i=e[n],o;if(i<a){o=r,r=n,n=o;o=a,a=i,i=o}e[r]=t.floor(a);e[n]=t.ceil(i);return e}function cl(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:fl}var fl={floor:D,ceil:D};function dl(e,r,n,a){var i=[],o=[],l=0,s=Math.min(e.length,r.length)-1;if(e[s]<e[0]){e=e.slice().reverse();r=r.slice().reverse()}while(++l<=s){i.push(n(e[l-1],e[l]));o.push(a(r[l-1],r[l]))}return function(r){var n=t.bisect(e,r,1,s)-1;return o[n](i[n](r))}}t.scale.linear=function(){return pl([0,1],[0,1],Ai,false)};function pl(e,t,r,n){var a,i;function o(){var o=Math.min(e.length,t.length)>2?dl:sl,s=n?io:ao;a=o(e,t,s,r);i=o(t,e,s,Ai);return l}function l(e){return a(e)}l.invert=function(e){return i(e)};l.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};l.range=function(e){if(!arguments.length)return t;t=e;return o()};l.rangeRound=function(e){return l.range(e).interpolate(Yi)};l.clamp=function(e){if(!arguments.length)return n;n=e;return o()};l.interpolate=function(e){if(!arguments.length)return r;r=e;return o()};l.ticks=function(t){return yl(e,t)};l.tickFormat=function(t,r){return ml(e,t,r)};l.nice=function(t){hl(e,t);return o()};l.copy=function(){return pl(e,t,r,n)};return o()}function vl(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function hl(e,t){ul(e,cl(gl(e,t)[2]));ul(e,cl(gl(e,t)[2]));return e}function gl(e,t){if(t==null)t=10;var r=ol(e),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/t)/Math.LN10)),i=t/n*a;if(i<=.15)a*=10;else if(i<=.35)a*=5;else if(i<=.75)a*=2;r[0]=Math.ceil(r[0]/a)*a;r[1]=Math.floor(r[1]/a)*a+a*.5;r[2]=a;return r}function yl(e,r){return t.range.apply(t,gl(e,r))}function ml(e,r,n){var a=gl(e,r);if(n){var i=Ht.exec(n);i.shift();if(i[8]==="s"){var o=t.formatPrefix(Math.max(x(a[0]),x(a[1])));if(!i[7])i[7]="."+bl(o.scale(a[2]));i[8]="f";n=t.format(i.join(""));return function(e){return n(o.scale(e))+o.symbol}}if(!i[7])i[7]="."+_l(i[8],a);n=i.join("")}else{n=",."+bl(a[2])+"f"}return t.format(n)}var xl={s:1,g:1,p:1,r:1,e:1};function bl(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function _l(e,t){var r=bl(t[2]);return e in xl?Math.abs(r-bl(Math.max(x(t[0]),x(t[1]))))+ +(e!=="e"):r-(e==="%")*2}t.scale.log=function(){return wl(t.scale.linear().domain([0,1]),10,true,[1,10])};function wl(e,r,n,a){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(r)}function o(e){return n?Math.pow(r,e):-Math.pow(r,-e)}function l(t){return e(i(t))}l.invert=function(t){return o(e.invert(t))};l.domain=function(t){if(!arguments.length)return a;n=t[0]>=0;e.domain((a=t.map(Number)).map(i));return l};l.base=function(t){if(!arguments.length)return r;r=+t;e.domain(a.map(i));return l};l.nice=function(){var t=ul(a.map(i),n?Math:Ml);e.domain(t);a=t.map(o);return l};l.ticks=function(){var e=ol(a),t=[],l=e[0],s=e[1],u=Math.floor(i(l)),c=Math.ceil(i(s)),f=r%1?2:r;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var d=1;d<f;d++)t.push(o(u)*d);t.push(o(u))}else{t.push(o(u));for(;u++<c;)for(var d=f-1;d>0;d--)t.push(o(u)*d)}for(u=0;t[u]<l;u++){}for(c=t.length;t[c-1]>s;c--){}t=t.slice(u,c)}return t};l.tickFormat=function(e,n){if(!arguments.length)return kl;if(arguments.length<2)n=kl;else if(typeof n!=="function")n=t.format(n);var a=Math.max(1,r*e/l.ticks().length);return function(e){var t=e/o(Math.round(i(e)));if(t*r<r-.5)t*=r;return t<=a?n(e):""}};l.copy=function(){return wl(e.copy(),r,n,a)};return vl(l,e)}var kl=t.format(".0e"),Ml={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};t.scale.pow=function(){return Al(t.scale.linear(),1,[0,1])};function Al(e,t,r){var n=Tl(t),a=Tl(1/t);function i(t){return e(n(t))}i.invert=function(t){return a(e.invert(t))};i.domain=function(t){if(!arguments.length)return r;e.domain((r=t.map(Number)).map(n));return i};i.ticks=function(e){return yl(r,e)};i.tickFormat=function(e,t){return ml(r,e,t)};i.nice=function(e){return i.domain(hl(r,e))};i.exponent=function(o){if(!arguments.length)return t;n=Tl(t=o);a=Tl(1/t);e.domain(r.map(n));return i};i.copy=function(){return Al(e.copy(),t,r)};return vl(i,e)}function Tl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}t.scale.sqrt=function(){return t.scale.pow().exponent(.5)};t.scale.ordinal=function(){return Ll([],{t:"range",a:[[]]})};function Ll(e,r){var n,a,i;function o(t){return a[((n.get(t)||(r.t==="range"?n.set(t,e.push(t)):NaN))-1)%a.length]}function l(r,n){return t.range(e.length).map(function(e){return r+n*e})}o.domain=function(t){if(!arguments.length)return e;e=[];n=new w;var a=-1,i=t.length,l;while(++a<i)if(!n.has(l=t[a]))n.set(l,e.push(l));return o[r.t].apply(o,r.a)};o.range=function(e){if(!arguments.length)return a;a=e;i=0;r={t:"range",a:arguments};return o};o.rangePoints=function(t,n){if(arguments.length<2)n=0;var s=t[0],u=t[1],c=e.length<2?(s=(s+u)/2,0):(u-s)/(e.length-1+n);a=l(s+c*n/2,c);i=0;r={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(t,n){if(arguments.length<2)n=0;var s=t[0],u=t[1],c=e.length<2?(s=u=Math.round((s+u)/2),0):(u-s)/(e.length-1+n)|0;a=l(s+Math.round(c*n/2+(u-s-(e.length-1+n)*c)/2),c);i=0;r={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(t,n,s){if(arguments.length<2)n=0;if(arguments.length<3)s=n;var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=(f-c)/(e.length-n+2*s);a=l(c+d*s,d);if(u)a.reverse();i=d*(1-n);r={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(t,n,s){if(arguments.length<2)n=0;if(arguments.length<3)s=n;var u=t[1]<t[0],c=t[u-0],f=t[1-u],d=Math.floor((f-c)/(e.length-n+2*s));a=l(c+Math.round((f-c-(e.length-n)*d)/2),d);if(u)a.reverse();i=Math.round(d*(1-n));r={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return ol(r.a[0])};o.copy=function(){return Ll(e,r)};return o.domain(e)}t.scale.category10=function(){return t.scale.ordinal().range(Sl)};t.scale.category20=function(){return t.scale.ordinal().range(Cl)};t.scale.category20b=function(){return t.scale.ordinal().range(Pl)};t.scale.category20c=function(){return t.scale.ordinal().range(zl)};var Sl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ht);var Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ht);var Pl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ht);var zl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ht);t.scale.quantile=function(){return Ol([],[])};function Ol(e,r){var n;function a(){var a=0,o=r.length;n=[];while(++a<o)n[a-1]=t.quantile(e,a/o);return i}function i(e){if(!isNaN(e=+e))return r[t.bisect(n,e)]}i.domain=function(t){if(!arguments.length)return e;e=t.map(v).filter(h).sort(p);return a()};i.range=function(e){if(!arguments.length)return r;r=e;return a()};i.quantiles=function(){return n};i.invertExtent=function(t){t=r.indexOf(t);return t<0?[NaN,NaN]:[t>0?n[t-1]:e[0],t<n.length?n[t]:e[e.length-1]]};i.copy=function(){return Ol(e,r)};return a()}t.scale.quantize=function(){return Dl(0,1,[0,1])};function Dl(e,t,r){var n,a;function i(t){return r[Math.max(0,Math.min(a,Math.floor(n*(t-e))))]}function o(){n=r.length/(t-e);a=r.length-1;return i}i.domain=function(r){if(!arguments.length)return[e,t];e=+r[0];t=+r[r.length-1];return o()};i.range=function(e){if(!arguments.length)return r;r=e;return o()};i.invertExtent=function(t){t=r.indexOf(t);t=t<0?NaN:t/n+e;return[t,t+1/n]};i.copy=function(){return Dl(e,t,r)};return o()}t.scale.threshold=function(){return El([.5],[0,1])};function El(e,r){function n(n){if(n<=n)return r[t.bisect(e,n)]}n.domain=function(t){if(!arguments.length)return e;e=t;return n};n.range=function(e){if(!arguments.length)return r;r=e;return n};n.invertExtent=function(t){t=r.indexOf(t);return[e[t-1],e[t]]};n.copy=function(){return El(e,r)};return n}t.scale.identity=function(){return Rl([0,1])};function Rl(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(r){if(!arguments.length)return e;e=r.map(t);return t};t.ticks=function(t){return yl(e,t)};t.tickFormat=function(t,r){return ml(e,t,r)};t.copy=function(){return Rl(e)};return t}t.svg={};function Il(){return 0}t.svg.arc=function(){var e=Fl,t=jl,r=Il,n=Nl,a=Bl,i=ql,o=Hl;function l(){var l=Math.max(0,+e.apply(this,arguments)),u=Math.max(0,+t.apply(this,arguments)),c=a.apply(this,arguments)-Oe,f=i.apply(this,arguments)-Oe,d=Math.abs(f-c),p=c>f?0:1;if(u<l)v=u,u=l,l=v;if(d>=ze)return s(u,p)+(l?s(l,1-p):"")+"Z";var v,h,g,y,m=0,x=0,b,_,w,k,M,A,T,L,S=[];if(y=(+o.apply(this,arguments)||0)/2){g=n===Nl?Math.sqrt(l*l+u*u):+n.apply(this,arguments);if(!p)x*=-1;if(u)x=Fe(g/u*Math.sin(y));if(l)m=Fe(g/l*Math.sin(y))}if(u){b=u*Math.cos(c+x);_=u*Math.sin(c+x);w=u*Math.cos(f-x);k=u*Math.sin(f-x);var C=Math.abs(f-c-2*x)<=Ce?0:1;if(x&&Ul(b,_,w,k)===p^C){var P=(c+f)/2;b=u*Math.cos(P);_=u*Math.sin(P);w=k=null}}else{b=_=0}if(l){M=l*Math.cos(f-m);A=l*Math.sin(f-m);T=l*Math.cos(c+m);L=l*Math.sin(c+m);var z=Math.abs(c-f+2*m)<=Ce?0:1;if(m&&Ul(M,A,T,L)===1-p^z){var O=(c+f)/2;M=l*Math.cos(O);A=l*Math.sin(O);T=L=null}}else{M=A=0}if(d>Le&&(v=Math.min(Math.abs(u-l)/2,+r.apply(this,arguments)))>.001){h=l<u^p?0:1;var D=v,E=v;if(d<Ce){var R=T==null?[M,A]:w==null?[b,_]:Pa([b,_],[T,L],[w,k],[M,A]),I=b-R[0],N=_-R[1],F=w-R[0],j=k-R[1],B=1/Math.sin(Math.acos((I*F+N*j)/(Math.sqrt(I*I+N*N)*Math.sqrt(F*F+j*j)))/2),q=Math.sqrt(R[0]*R[0]+R[1]*R[1]);E=Math.min(v,(l-q)/(B-1));D=Math.min(v,(u-q)/(B+1))}if(w!=null){var H=Vl(T==null?[M,A]:[T,L],[b,_],u,D,p),U=Vl([w,k],[M,A],u,D,p);if(v===D){S.push("M",H[0],"A",D,",",D," 0 0,",h," ",H[1],"A",u,",",u," 0 ",1-p^Ul(H[1][0],H[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",D,",",D," 0 0,",h," ",U[0])}else{S.push("M",H[0],"A",D,",",D," 0 1,",h," ",U[0])}}else{S.push("M",b,",",_)}if(T!=null){var V=Vl([b,_],[T,L],l,-E,p),G=Vl([M,A],w==null?[b,_]:[w,k],l,-E,p);if(v===E){S.push("L",G[0],"A",E,",",E," 0 0,",h," ",G[1],"A",l,",",l," 0 ",p^Ul(G[1][0],G[1][1],V[1][0],V[1][1]),",",1-p," ",V[1],"A",E,",",E," 0 0,",h," ",V[0])}else{S.push("L",G[0],"A",E,",",E," 0 0,",h," ",V[0])}}else{S.push("L",M,",",A)}}else{S.push("M",b,",",_);if(w!=null)S.push("A",u,",",u," 0 ",C,",",p," ",w,",",k);S.push("L",M,",",A);if(T!=null)S.push("A",l,",",l," 0 ",z,",",1-p," ",T,",",L)}S.push("Z");return S.join("")}function s(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}l.innerRadius=function(t){if(!arguments.length)return e;e=Mt(t);return l};l.outerRadius=function(e){if(!arguments.length)return t;t=Mt(e);return l};l.cornerRadius=function(e){if(!arguments.length)return r;r=Mt(e);return l};l.padRadius=function(e){if(!arguments.length)return n;n=e==Nl?Nl:Mt(e);return l};l.startAngle=function(e){if(!arguments.length)return a;a=Mt(e);return l};l.endAngle=function(e){if(!arguments.length)return i;i=Mt(e);return l};l.padAngle=function(e){if(!arguments.length)return o;o=Mt(e);return l};l.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Oe;return[Math.cos(n)*r,Math.sin(n)*r]};return l};var Nl="auto";function Fl(e){return e.innerRadius}function jl(e){return e.outerRadius}function Bl(e){return e.startAngle}function ql(e){return e.endAngle}function Hl(e){return e&&e.padAngle}function Ul(e,t,r,n){return(e-r)*t-(t-n)*e>0?0:1}function Vl(e,t,r,n,a){var i=e[0]-t[0],o=e[1]-t[1],l=(a?n:-n)/Math.sqrt(i*i+o*o),s=l*o,u=-l*i,c=e[0]+s,f=e[1]+u,d=t[0]+s,p=t[1]+u,v=(c+d)/2,h=(f+p)/2,g=d-c,y=p-f,m=g*g+y*y,x=r-n,b=c*p-d*f,_=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),w=(b*y-g*_)/m,k=(-b*g-y*_)/m,M=(b*y+g*_)/m,A=(-b*g+y*_)/m,T=w-v,L=k-h,S=M-v,C=A-h;if(T*T+L*L>S*S+C*C)w=M,k=A;return[[w-s,k-u],[w*r/x,k*r/x]]}function Gl(e){var t=Ma,r=Aa,n=ln,a=Zl,i=a.key,o=.7;function l(i){var l=[],s=[],u=-1,c=i.length,f,d=Mt(t),p=Mt(r);function v(){l.push("M",a(e(s),o))}while(++u<c){if(n.call(this,f=i[u],u)){s.push([+d.call(this,f,u),+p.call(this,f,u)])}else if(s.length){v();s=[]}}if(s.length)v();return l.length?l.join(""):null}l.x=function(e){if(!arguments.length)return t;t=e;return l};l.y=function(e){if(!arguments.length)return r;r=e;return l};l.defined=function(e){if(!arguments.length)return n;n=e;return l};l.interpolate=function(e){if(!arguments.length)return i;if(typeof e==="function")i=a=e;else i=(a=Yl.get(e)||Zl).key;return l};l.tension=function(e){if(!arguments.length)return o;o=e;return l};return l}t.svg.line=function(){return Gl(D)};var Yl=t.map({linear:Zl,"linear-closed":Xl,step:Wl,"step-before":Jl,"step-after":Ql,basis:ns,"basis-open":as,"basis-closed":is,bundle:os,cardinal:es,"cardinal-open":$l,"cardinal-closed":Kl,monotone:hs});Yl.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Zl(e){return e.length>1?e.join("L"):e+"Z"}function Xl(e){return e.join("L")+"Z"}function Wl(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n[0]+(n=e[t])[0])/2,"V",n[1]);if(r>1)a.push("H",n[0]);return a.join("")}function Jl(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("V",(n=e[t])[1],"H",n[0]);return a.join("")}function Ql(e){var t=0,r=e.length,n=e[0],a=[n[0],",",n[1]];while(++t<r)a.push("H",(n=e[t])[0],"V",n[1]);return a.join("")}function $l(e,t){return e.length<4?Zl(e):e[1]+ts(e.slice(1,-1),rs(e,t))}function Kl(e,t){return e.length<3?Xl(e):e[0]+ts((e.push(e[0]),e),rs([e[e.length-2]].concat(e,[e[1]]),t))}function es(e,t){return e.length<3?Zl(e):e[0]+ts(e,rs(e,t))}function ts(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Zl(e)}var r=e.length!=t.length,n="",a=e[0],i=e[1],o=t[0],l=o,s=1;if(r){n+="Q"+(i[0]-o[0]*2/3)+","+(i[1]-o[1]*2/3)+","+i[0]+","+i[1];a=e[1];s=2}if(t.length>1){l=t[1];i=e[s];s++;n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,s++){i=e[s];l=t[u];n+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}}if(r){var c=e[s];n+="Q"+(i[0]+l[0]*2/3)+","+(i[1]+l[1]*2/3)+","+c[0]+","+c[1]}return n}function rs(e,t){var r=[],n=(1-t)/2,a,i=e[0],o=e[1],l=1,s=e.length;while(++l<s){a=i;i=o;o=e[l];r.push([n*(o[0]-a[0]),n*(o[1]-a[1])])}return r}function ns(e){if(e.length<3)return Zl(e);var t=1,r=e.length,n=e[0],a=n[0],i=n[1],o=[a,a,a,(n=e[1])[0]],l=[i,i,i,n[1]],s=[a,",",i,"L",ls(cs,o),",",ls(cs,l)];e.push(e[r-1]);while(++t<=r){n=e[t];o.shift();o.push(n[0]);l.shift();l.push(n[1]);fs(s,o,l)}e.pop();s.push("L",n);return s.join("")}function as(e){if(e.length<4)return Zl(e);var t=[],r=-1,n=e.length,a,i=[0],o=[0];while(++r<3){a=e[r];i.push(a[0]);o.push(a[1])}t.push(ls(cs,i)+","+ls(cs,o));--r;while(++r<n){a=e[r];i.shift();i.push(a[0]);o.shift();o.push(a[1]);fs(t,i,o)}return t.join("")}function is(e){var t,r=-1,n=e.length,a=n+4,i,o=[],l=[];while(++r<4){i=e[r%n];o.push(i[0]);l.push(i[1])}t=[ls(cs,o),",",ls(cs,l)];--r;while(++r<a){i=e[r%n];o.shift();o.push(i[0]);l.shift();l.push(i[1]);fs(t,o,l)}return t.join("")}function os(e,t){var r=e.length-1;if(r){var n=e[0][0],a=e[0][1],i=e[r][0]-n,o=e[r][1]-a,l=-1,s,u;while(++l<=r){s=e[l];u=l/r;s[0]=t*s[0]+(1-t)*(n+u*i);s[1]=t*s[1]+(1-t)*(a+u*o)}}return ns(e)}function ls(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var ss=[0,2/3,1/3,0],us=[0,1/3,2/3,0],cs=[0,1/6,2/3,1/6];function fs(e,t,r){e.push("C",ls(ss,t),",",ls(ss,r),",",ls(us,t),",",ls(us,r),",",ls(cs,t),",",ls(cs,r))}function ds(e,t){return(t[1]-e[1])/(t[0]-e[0])}function ps(e){var t=0,r=e.length-1,n=[],a=e[0],i=e[1],o=n[0]=ds(a,i);while(++t<r){n[t]=(o+(o=ds(a=i,i=e[t+1])))/2}n[t]=o;return n}function vs(e){var t=[],r,n,a,i,o=ps(e),l=-1,s=e.length-1;while(++l<s){r=ds(e[l],e[l+1]);if(x(r)<Le){o[l]=o[l+1]=0}else{n=o[l]/r;a=o[l+1]/r;i=n*n+a*a;if(i>9){i=r*3/Math.sqrt(i);o[l]=i*n;o[l+1]=i*a}}}l=-1;while(++l<=s){i=(e[Math.min(s,l+1)][0]-e[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l]));t.push([i||0,o[l]*i||0])}return t}function hs(e){return e.length<3?Zl(e):e[0]+ts(e,vs(e))}t.svg.line.radial=function(){var e=Gl(gs);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function gs(e){var t,r=-1,n=e.length,a,i;while(++r<n){t=e[r];a=t[0];i=t[1]-Oe;t[0]=a*Math.cos(i);t[1]=a*Math.sin(i)}return e}function ys(e){var t=Ma,r=Ma,n=0,a=Aa,i=ln,o=Zl,l=o.key,s=o,u="L",c=.7;function f(l){var f=[],d=[],p=[],v=-1,h=l.length,g,y=Mt(t),m=Mt(n),x=t===r?function(){return _}:Mt(r),b=n===a?function(){return w}:Mt(a),_,w;function k(){f.push("M",o(e(p),c),u,s(e(d.reverse()),c),"Z")}while(++v<h){if(i.call(this,g=l[v],v)){d.push([_=+y.call(this,g,v),w=+m.call(this,g,v)]);p.push([+x.call(this,g,v),+b.call(this,g,v)])}else if(d.length){k();d=[];p=[]}}if(d.length)k();return f.length?f.join(""):null}f.x=function(e){if(!arguments.length)return r;t=r=e;return f};f.x0=function(e){if(!arguments.length)return t;t=e;return f};f.x1=function(e){if(!arguments.length)return r;r=e;return f};f.y=function(e){if(!arguments.length)return a;n=a=e;return f};f.y0=function(e){if(!arguments.length)return n;n=e;return f};f.y1=function(e){if(!arguments.length)return a;a=e;return f};f.defined=function(e){if(!arguments.length)return i;i=e;return f};f.interpolate=function(e){if(!arguments.length)return l;if(typeof e==="function")l=o=e;else l=(o=Yl.get(e)||Zl).key;s=o.reverse||o;u=o.closed?"M":"L";return f};f.tension=function(e){if(!arguments.length)return c;c=e;return f};return f}Jl.reverse=Ql;Ql.reverse=Jl;t.svg.area=function(){return ys(D)};t.svg.area.radial=function(){var e=ys(gs);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};t.svg.chord=function(){var e=la,t=sa,r=ms,n=Bl,a=ql;function i(r,n){var a=o(this,e,r,n),i=o(this,t,r,n);return"M"+a.p0+s(a.r,a.p1,a.a1-a.a0)+(l(a,i)?u(a.r,a.p1,a.r,a.p0):u(a.r,a.p1,i.r,i.p0)+s(i.r,i.p1,i.a1-i.a0)+u(i.r,i.p1,a.r,a.p0))+"Z"}function o(e,t,i,o){var l=t.call(e,i,o),s=r.call(e,l,o),u=n.call(e,l,o)-Oe,c=a.call(e,l,o)-Oe;return{r:s,a0:u,a1:c,p0:[s*Math.cos(u),s*Math.sin(u)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function l(e,t){return e.a0==t.a0&&e.a1==t.a1}function s(e,t,r){return"A"+e+","+e+" 0 "+ +(r>Ce)+",1 "+t}function u(e,t,r,n){return"Q 0,0 "+n}i.radius=function(e){if(!arguments.length)return r;r=Mt(e);return i};i.source=function(t){if(!arguments.length)return e;e=Mt(t);return i};i.target=function(e){if(!arguments.length)return t;t=Mt(e);return i};i.startAngle=function(e){if(!arguments.length)return n;n=Mt(e);return i};i.endAngle=function(e){if(!arguments.length)return a;a=Mt(e);return i};return i};function ms(e){return e.radius}t.svg.diagonal=function(){var e=la,t=sa,r=xs;function n(n,a){var i=e.call(this,n,a),o=t.call(this,n,a),l=(i.y+o.y)/2,s=[i,{x:i.x,y:l},{x:o.x,y:l},o];s=s.map(r);return"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}n.source=function(t){if(!arguments.length)return e;e=Mt(t);return n};n.target=function(e){if(!arguments.length)return t;t=Mt(e);return n};n.projection=function(e){if(!arguments.length)return r;r=e;return n};return n};function xs(e){return[e.x,e.y]}t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=xs,n=e.projection;e.projection=function(e){return arguments.length?n(bs(r=e)):r};return e};function bs(e){return function(){var t=e.apply(this,arguments),r=t[0],n=t[1]-Oe;return[r*Math.cos(n),r*Math.sin(n)]}}t.svg.symbol=function(){var e=ws,t=_s;function r(r,n){return(Ms.get(e.call(this,r,n))||ks)(t.call(this,r,n))}r.type=function(t){if(!arguments.length)return e;e=Mt(t);return r};r.size=function(e){if(!arguments.length)return t;t=Mt(e);return r};return r};function _s(){return 64}function ws(){return"circle"}function ks(e){var t=Math.sqrt(e/Ce);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Ms=t.map({circle:ks,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ts)),r=t*Ts;return"M0,"+-t+"L"+r+",0"+" 0,"+t+" "+-r+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/As),r=t*As/2;return"M0,"+r+"L"+t+","+-r+" "+-t+","+-r+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/As),r=t*As/2;return"M0,"+-r+"L"+t+","+r+" "+-t+","+r+"Z"}});t.svg.symbolTypes=Ms.keys();var As=Math.sqrt(3),Ts=Math.tan(30*De);W.transition=function(e){var t=Os||++zs,r=Is(e),n=[],a,i,o=Ds||{time:Date.now(),ease:Ri,delay:0,duration:250};for(var l=-1,s=this.length;++l<s;){n.push(a=[]);for(var u=this[l],c=-1,f=u.length;++c<f;){if(i=u[c])Ns(i,c,r,t,o);a.push(i)}}return Cs(n,r,t)};W.interrupt=function(e){return this.each(e==null?Ls:Ss(Is(e)))};var Ls=Ss(Is());function Ss(e){return function(){var t,r,n;if((t=this[e])&&(n=t[r=t.active])){n.timer.c=null;n.timer.t=NaN;if(--t.count)delete t[r];else delete this[e];t.active+=.5;n.event&&n.event.interrupt.call(this,this.__data__,n.index)}}}function Cs(e,t,r){V(e,Ps);e.namespace=t;e.id=r;return e}var Ps=[],zs=0,Os,Ds;Ps.call=W.call;Ps.empty=W.empty;Ps.node=W.node;Ps.size=W.size;t.transition=function(e,r){return e&&e.transition?Os?e.transition(r):e:t.selection().transition(e)};t.transition.prototype=Ps;Ps.select=function(e){var t=this.id,r=this.namespace,n=[],a,i,o;e=J(e);for(var l=-1,s=this.length;++l<s;){n.push(a=[]);for(var u=this[l],c=-1,f=u.length;++c<f;){if((o=u[c])&&(i=e.call(o,o.__data__,c,l))){if("__data__"in o)i.__data__=o.__data__;Ns(i,c,r,t,o[r][t]);a.push(i)}else{a.push(null)}}}return Cs(n,r,t)};Ps.selectAll=function(e){var t=this.id,r=this.namespace,n=[],a,i,o,l,s;e=Q(e);for(var u=-1,c=this.length;++u<c;){for(var f=this[u],d=-1,p=f.length;++d<p;){if(o=f[d]){s=o[r][t];i=e.call(o,o.__data__,d,u);n.push(a=[]);for(var v=-1,h=i.length;++v<h;){if(l=i[v])Ns(l,v,r,t,s);a.push(l)}}}}return Cs(n,r,t)};Ps.filter=function(e){var t=[],r,n,a;if(typeof e!=="function")e=fe(e);for(var i=0,o=this.length;i<o;i++){t.push(r=[]);for(var n=this[i],l=0,s=n.length;l<s;l++){if((a=n[l])&&e.call(a,a.__data__,l,i)){r.push(a)}}}return Cs(t,this.namespace,this.id)};Ps.tween=function(e,t){var r=this.id,n=this.namespace;if(arguments.length<2)return this.node()[n][r].tween.get(e);return pe(this,t==null?function(t){t[n][r].tween.remove(e)}:function(a){a[n][r].tween.set(e,t)})};function Es(e,t,r,n){var a=e.id,i=e.namespace;return pe(e,typeof r==="function"?function(e,o,l){e[i][a].tween.set(t,n(r.call(e,e.__data__,o,l)))}:(r=n(r),function(e){e[i][a].tween.set(t,r)}))}Ps.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var n=e=="transform"?no:Ai,a=t.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}function l(e){return e==null?i:(e+="",function(){var t=this.getAttribute(a),r;return t!==e&&(r=n(t,e),function(e){this.setAttribute(a,r(e))})})}function s(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(a.space,a.local),r;return t!==e&&(r=n(t,e),function(e){this.setAttributeNS(a.space,a.local,r(e))})})}return Es(this,"attr."+e,r,a.local?s:l)};Ps.attrTween=function(e,r){var n=t.ns.qualify(e);function a(e,t){var a=r.call(this,e,t,this.getAttribute(n));return a&&function(e){this.setAttribute(n,a(e))}}function i(e,t){var a=r.call(this,e,t,this.getAttributeNS(n.space,n.local));return a&&function(e){this.setAttributeNS(n.space,n.local,a(e))}}return this.tween("attr."+e,n.local?i:a)};Ps.style=function(e,t,r){var n=arguments.length;if(n<3){if(typeof e!=="string"){if(n<2)t="";for(r in e)this.style(r,e[r],t);return this}r=""}function a(){this.style.removeProperty(e)}function i(t){return t==null?a:(t+="",function(){var n=l(this).getComputedStyle(this,null).getPropertyValue(e),a;return n!==t&&(a=Ai(n,t),function(t){this.style.setProperty(e,a(t),r)})})}return Es(this,"style."+e,t,i)};Ps.styleTween=function(e,t,r){if(arguments.length<3)r="";function n(n,a){var i=t.call(this,n,a,l(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),r)}}return this.tween("style."+e,n)};Ps.text=function(e){return Es(this,"text",e,Rs)};function Rs(e){if(e==null)e="";return function(){this.textContent=e}}Ps.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})};Ps.ease=function(e){var r=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][r].ease;if(typeof e!=="function")e=t.ease.apply(t,arguments);return pe(this,function(t){t[n][r].ease=e})};Ps.delay=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].delay;return pe(this,typeof e==="function"?function(n,a,i){n[r][t].delay=+e.call(n,n.__data__,a,i)}:(e=+e,function(n){n[r][t].delay=e}))};Ps.duration=function(e){var t=this.id,r=this.namespace;if(arguments.length<1)return this.node()[r][t].duration;return pe(this,typeof e==="function"?function(n,a,i){n[r][t].duration=Math.max(1,e.call(n,n.__data__,a,i))}:(e=Math.max(1,e),function(n){n[r][t].duration=e}))};Ps.each=function(e,r){var n=this.id,a=this.namespace;if(arguments.length<2){var i=Ds,o=Os;try{Os=n;pe(this,function(t,r,i){Ds=t[a][n];e.call(t,t.__data__,r,i)})}finally{Ds=i;Os=o}}else{pe(this,function(i){var o=i[a][n];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,r)})}return this};Ps.transition=function(){var e=this.id,t=++zs,r=this.namespace,n=[],a,i,o,l;for(var s=0,u=this.length;s<u;s++){n.push(a=[]);for(var i=this[s],c=0,f=i.length;c<f;c++){if(o=i[c]){l=o[r][e];Ns(o,c,r,t,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration})}a.push(o)}}return Cs(n,r,t)};function Is(e){return e==null?"__transition__":"__transition_"+e+"__"}function Ns(e,t,r,n,a){var i=e[r]||(e[r]={active:0,count:0}),o=i[n],l,s,u,c,f;function d(e){var t=o.delay;s.t=t+l;if(t<=e)return p(e-t);s.c=p}function p(r){var a=i.active,d=i[a];if(d){d.timer.c=null;d.timer.t=NaN;--i.count;delete i[a];d.event&&d.event.interrupt.call(e,e.__data__,d.index)}for(var p in i){if(+p<n){var h=i[p];h.timer.c=null;h.timer.t=NaN;--i.count;delete i[p]}}s.c=v;Et(function(){if(s.c&&v(r||1)){s.c=null;s.t=NaN}return 1},0,l);i.active=n;o.event&&o.event.start.call(e,e.__data__,t);f=[];o.tween.forEach(function(r,n){if(n=n.call(e,e.__data__,t)){f.push(n)}});c=o.ease;u=o.duration}function v(a){var l=a/u,s=c(l),d=f.length;while(d>0){f[--d].call(e,s)}if(l>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--i.count)delete i[n];else delete e[r];return 1}}if(!o){l=a.time;s=Et(d,0,l);o=i[n]={tween:new w,time:l,timer:s,delay:a.delay,duration:a.duration,ease:a.ease,index:t};a=null;++i.count}}t.svg.axis=function(){var e=t.scale.linear(),r=Fs,n=6,i=6,o=3,l=[10],s=null,u;function c(a){a.each(function(){var a=t.select(this);var c=this.__chart__||e,f=this.__chart__=e.copy();var d=s==null?f.ticks?f.ticks.apply(f,l):f.domain():s,p=u==null?f.tickFormat?f.tickFormat.apply(f,l):D:u,v=a.selectAll(".tick").data(d,f),h=v.enter().insert("g",".domain").attr("class","tick").style("opacity",Le),g=t.transition(v.exit()).style("opacity",Le).remove(),y=t.transition(v.order()).style("opacity",1),m=Math.max(n,0)+o,x;var b=ll(f),_=a.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),t.transition(_));h.append("line");h.append("text");var k=h.select("line"),M=y.select("line"),A=v.select("text").text(p),T=h.select("text"),L=y.select("text"),S=r==="top"||r==="left"?-1:1,C,P,z,O;if(r==="bottom"||r==="top"){x=Bs,C="x",z="y",P="x2",O="y2";A.attr("dy",S<0?"0em":".71em").style("text-anchor","middle");w.attr("d","M"+b[0]+","+S*i+"V0H"+b[1]+"V"+S*i)}else{x=qs,C="y",z="x",P="y2",O="x2";A.attr("dy",".32em").style("text-anchor",S<0?"end":"start");w.attr("d","M"+S*i+","+b[0]+"H0V"+b[1]+"H"+S*i)}k.attr(O,S*n);T.attr(z,S*m);M.attr(P,0).attr(O,S*n);L.attr(C,0).attr(z,S*m);if(f.rangeBand){var E=f,R=E.rangeBand()/2;c=f=function(e){return E(e)+R}}else if(c.rangeBand){c=f}else{g.call(x,f,c)}h.call(x,c,f);y.call(x,f,f)})}c.scale=function(t){if(!arguments.length)return e;e=t;return c};c.orient=function(e){if(!arguments.length)return r;r=e in js?e+"":Fs;return c};c.ticks=function(){if(!arguments.length)return l;l=a(arguments);return c};c.tickValues=function(e){if(!arguments.length)return s;s=e;return c};c.tickFormat=function(e){if(!arguments.length)return u;u=e;return c};c.tickSize=function(e){var t=arguments.length;if(!t)return n;n=+e;i=+arguments[t-1];return c};c.innerTickSize=function(e){if(!arguments.length)return n;n=+e;return c};c.outerTickSize=function(e){if(!arguments.length)return i;i=+e;return c};c.tickPadding=function(e){if(!arguments.length)return o;o=+e;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Fs="bottom",js={top:1,right:1,bottom:1,left:1};function Bs(e,t,r){e.attr("transform",function(e){var n=t(e);return"translate("+(isFinite(n)?n:r(e))+",0)"})}function qs(e,t,r){e.attr("transform",function(e){var n=t(e);return"translate(0,"+(isFinite(n)?n:r(e))+")"})}t.svg.brush=function(){var e=H(d,"brushstart","brush","brushend"),r=null,n=null,a=[0,0],i=[0,0],o,s,u=true,c=true,f=Us[0];function d(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g);var a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(f,D);i.exit().remove();i.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hs[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",d.empty()?"none":null);var o=t.transition(e),l=t.transition(a),s;if(r){s=ll(r);l.attr("x",s[0]).attr("width",s[1]-s[0]);v(o)}if(n){s=ll(n);l.attr("y",s[0]).attr("height",s[1]-s[0]);h(o)}p(o)})}d.event=function(r){r.each(function(){var r=e.of(this,arguments),n={x:a,y:i,i:o,j:s},l=this.__chart__||n;this.__chart__=n;if(Os){t.select(this).transition().each("start.brush",function(){o=l.i;s=l.j;a=l.x;i=l.y;r({type:"brushstart"})}).tween("brush:brush",function(){var e=Ti(a,n.x),t=Ti(i,n.y);o=s=null;return function(o){a=n.x=e(o);i=n.y=t(o);r({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i;s=n.j;r({type:"brush",mode:"resize"});r({type:"brushend"})})}else{r({type:"brushstart"});r({type:"brush",mode:"resize"});r({type:"brushend"})}})};function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+a[+/e$/.test(e)]+","+i[+/^s/.test(e)]+")"})}function v(e){e.select(".extent").attr("x",a[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function h(e){e.select(".extent").attr("y",i[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function g(){var f=this,g=t.select(t.event.target),y=e.of(f,arguments),m=t.select(f),x=g.datum(),b=!/^(n|s)$/.test(x)&&r,_=!/^(e|w)$/.test(x)&&n,w=g.classed("extent"),k=ke(f),M,A=t.mouse(f),T;var L=t.select(l(f)).on("keydown.brush",P).on("keyup.brush",z);if(t.event.changedTouches){L.on("touchmove.brush",O).on("touchend.brush",E)}else{L.on("mousemove.brush",O).on("mouseup.brush",E)}m.interrupt().selectAll("*").interrupt();if(w){A[0]=a[0]-A[0];A[1]=i[0]-A[1]}else if(x){var S=+/w$/.test(x),C=+/^n/.test(x);T=[a[1-S]-A[0],i[1-C]-A[1]];A[0]=a[S];A[1]=i[C]}else if(t.event.altKey)M=A.slice();m.style("pointer-events","none").selectAll(".resize").style("display",null);t.select("body").style("cursor",g.style("cursor"));y({type:"brushstart"});O();function P(){if(t.event.keyCode==32){if(!w){M=null;A[0]-=a[1];A[1]-=i[1];w=2}B()}}function z(){if(t.event.keyCode==32&&w==2){A[0]+=a[1];A[1]+=i[1];w=0;B()}}function O(){var e=t.mouse(f),o=false;if(T){e[0]+=T[0];e[1]+=T[1]}if(!w){if(t.event.altKey){if(!M)M=[(a[0]+a[1])/2,(i[0]+i[1])/2];A[0]=a[+(e[0]<M[0])];A[1]=i[+(e[1]<M[1])]}else M=null}if(b&&D(e,r,0)){v(m);o=true}if(_&&D(e,n,1)){h(m);o=true}if(o){p(m);y({type:"brush",mode:w?"move":"resize"})}}function D(e,t,r){var n=ll(t),l=n[0],f=n[1],d=A[r],p=r?i:a,v=p[1]-p[0],h,g;if(w){l-=d;f-=v+d}h=(r?c:u)?Math.max(l,Math.min(f,e[r])):e[r];if(w){g=(h+=d)+v}else{if(M)d=Math.max(l,Math.min(f,2*M[r]-h));if(d<h){g=h;h=d}else{g=d}}if(p[0]!=h||p[1]!=g){if(r)s=null;else o=null;p[0]=h;p[1]=g;return true}}function E(){O();m.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);t.select("body").style("cursor",null);L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);k();y({type:"brushend"})}}d.x=function(e){if(!arguments.length)return r;r=e;f=Us[!r<<1|!n];return d};d.y=function(e){if(!arguments.length)return n;n=e;f=Us[!r<<1|!n];return d};d.clamp=function(e){if(!arguments.length)return r&&n?[u,c]:r?u:n?c:null;if(r&&n)u=!!e[0],c=!!e[1];else if(r)u=!!e;else if(n)c=!!e;return d};d.extent=function(e){var t,l,u,c,f;if(!arguments.length){if(r){if(o){t=o[0],l=o[1]}else{t=a[0],l=a[1];if(r.invert)t=r.invert(t),l=r.invert(l);if(l<t)f=t,t=l,l=f}}if(n){if(s){u=s[0],c=s[1]}else{u=i[0],c=i[1];if(n.invert)u=n.invert(u),c=n.invert(c);if(c<u)f=u,u=c,c=f}}return r&&n?[[t,u],[l,c]]:r?[t,l]:n&&[u,c]}if(r){t=e[0],l=e[1];if(n)t=t[0],l=l[0];o=[t,l];if(r.invert)t=r(t),l=r(l);if(l<t)f=t,t=l,l=f;if(t!=a[0]||l!=a[1])a=[t,l]}if(n){u=e[0],c=e[1];if(r)u=u[1],c=c[1];s=[u,c];if(n.invert)u=n(u),c=n(c);if(c<u)f=u,u=c,c=f;if(u!=i[0]||c!=i[1])i=[u,c]}return d};d.clear=function(){if(!d.empty()){a=[0,0],i=[0,0];o=s=null}return d};d.empty=function(){return!!r&&a[0]==a[1]||!!n&&i[0]==i[1]};return t.rebind(d,e,"on")};var Hs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Us=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Vs=Gt.format=_r.timeFormat;var Gs=Vs.utc;var Ys=Gs("%Y-%m-%dT%H:%M:%S.%LZ");Vs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zs:Ys;function Zs(e){return e.toISOString()}Zs.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Zs.toString=Ys.toString;Gt.second=Wt(function(e){return new Yt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});Gt.seconds=Gt.second.range;Gt.seconds.utc=Gt.second.utc.range;Gt.minute=Wt(function(e){return new Yt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});Gt.minutes=Gt.minute.range;Gt.minutes.utc=Gt.minute.utc.range;Gt.hour=Wt(function(e){var t=e.getTimezoneOffset()/60;return new Yt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});Gt.hours=Gt.hour.range;Gt.hours.utc=Gt.hour.utc.range;Gt.month=Wt(function(e){e=Gt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});Gt.months=Gt.month.range;Gt.months.utc=Gt.month.utc.range;function Xs(e,r,n){function a(t){return e(t)}a.invert=function(t){return Ws(e.invert(t))};a.domain=function(t){if(!arguments.length)return e.domain().map(Ws);e.domain(t);return a};function i(e,n){var a=e[1]-e[0],i=a/n,o=t.bisect(Js,i);return o==Js.length?[r.year,gl(e.map(function(e){return e/31536e6}),n)[2]]:!o?[Ks,gl(e,n)[2]]:r[i/Js[o-1]<Js[o]/i?o-1:o]}a.nice=function(e,t){var r=a.domain(),n=ol(r),o=e==null?i(n,10):typeof e==="number"&&i(n,e);if(o)e=o[0],t=o[1];function l(r){return!isNaN(r)&&!e.range(r,Ws(+r+1),t).length}return a.domain(ul(r,t>1?{floor:function(t){while(l(t=e.floor(t)))t=Ws(t-1);return t},ceil:function(t){while(l(t=e.ceil(t)))t=Ws(+t+1);return t}}:e))};a.ticks=function(e,t){var r=ol(a.domain()),n=e==null?i(r,10):typeof e==="number"?i(r,e):!e.range&&[{range:e},t];if(n)e=n[0],t=n[1];return e.range(r[0],Ws(+r[1]+1),t<1?1:t)};a.tickFormat=function(){return n};a.copy=function(){return Xs(e.copy(),r,n)};return vl(a,e)}function Ws(e){return new Date(e)}var Js=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var Qs=[[Gt.second,1],[Gt.second,5],[Gt.second,15],[Gt.second,30],[Gt.minute,1],[Gt.minute,5],[Gt.minute,15],[Gt.minute,30],[Gt.hour,1],[Gt.hour,3],[Gt.hour,6],[Gt.hour,12],[Gt.day,1],[Gt.day,2],[Gt.week,1],[Gt.month,1],[Gt.month,3],[Gt.year,1]];var $s=Vs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",ln]]);var Ks={range:function(e,r,n){return t.range(Math.ceil(e/n)*n,+r,n).map(Ws)},floor:D,ceil:D};Qs.year=Gt.year;Gt.scale=function(){return Xs(t.scale.linear(),Qs,$s)};var eu=Qs.map(function(e){return[e[0].utc,e[1]]});var tu=Gs.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",ln]]);eu.year=Gt.year.utc;Gt.scale.utc=function(){return Xs(t.scale.linear(),eu,tu)};t.text=At(function(e){return e.responseText});t.json=function(e,t){return Tt(e,"application/json",ru,t)};function ru(e){return JSON.parse(e.responseText)}t.html=function(e,t){return Tt(e,"text/html",nu,t)};function nu(e){var t=i.createRange();t.selectNode(i.body);return t.createContextualFragment(e.responseText)}t.xml=At(function(e){return e.responseXML});if(typeof e==="function"&&e.amd)this.d3=t,e(t);else if(typeof r==="object"&&r.exports)r.exports=t;else this.d3=t}()},{}],9:[function(t,r,n){(function(a,i){(function(t,a){typeof n==="object"&&typeof r!=="undefined"?r.exports=a():typeof e==="function"&&e.amd?e(a):t.ES6Promise=a()})(this,function(){"use strict";function e(e){return typeof e==="function"||typeof e==="object"&&e!==null}function r(e){return typeof e==="function"}var n=undefined;if(!Array.isArray){n=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{n=Array.isArray}var o=n;var l=0;var s=undefined;var u=undefined;var c=function e(t,r){k[l]=t;k[l+1]=r;l+=2;if(l===2){if(u){u(M)}else{T()}}};function f(e){u=e}function d(e){c=e}var p=typeof window!=="undefined"?window:undefined;var v=p||{};var h=v.MutationObserver||v.WebKitMutationObserver;var g=typeof self==="undefined"&&typeof a!=="undefined"&&{}.toString.call(a)==="[object process]";var y=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function m(){return function(){return a.nextTick(M)}}function x(){return function(){s(M)}}function b(){var e=0;var t=new h(M);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function _(){var e=new MessageChannel;e.port1.onmessage=M;return function(){return e.port2.postMessage(0)}}function w(){var e=setTimeout;return function(){return e(M,1)}}var k=new Array(1e3);function M(){for(var e=0;e<l;e+=2){var t=k[e];var r=k[e+1];t(r);k[e]=undefined;k[e+1]=undefined}l=0}function A(){try{var e=t;var r=e("vertx");s=r.runOnLoop||r.runOnContext;return x()}catch(e){return w()}}var T=undefined;if(g){T=m()}else if(h){T=b()}else if(y){T=_()}else if(p===undefined&&typeof t==="function"){T=A()}else{T=w()}function L(e,t){var r=arguments;var n=this;var a=new this.constructor(P);if(a[C]===undefined){te(a)}var i=n._state;if(i){(function(){var e=r[i-1];c(function(){return Q(i,a,e,n._result)})})()}else{Y(n,a,e,t)}return a}function S(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(P);H(r,e);return r}var C=Math.random().toString(36).substring(16);function P(){}var z=void 0;var O=1;var D=2;var E=new X;function R(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function N(e){try{return e.then}catch(e){E.error=e;return E}}function F(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function j(e,t,r){c(function(e){var n=false;var a=F(r,t,function(r){if(n){return}n=true;if(t!==r){H(e,r)}else{V(e,r)}},function(t){if(n){return}n=true;G(e,t)},"Settle: "+(e._label||" unknown promise"));if(!n&&a){n=true;G(e,a)}},e)}function B(e,t){if(t._state===O){V(e,t._result)}else if(t._state===D){G(e,t._result)}else{Y(t,undefined,function(t){return H(e,t)},function(t){return G(e,t)})}}function q(e,t,n){if(t.constructor===e.constructor&&n===L&&t.constructor.resolve===S){B(e,t)}else{if(n===E){G(e,E.error)}else if(n===undefined){V(e,t)}else if(r(n)){j(e,t,n)}else{V(e,t)}}}function H(t,r){if(t===r){G(t,R())}else if(e(r)){q(t,r,N(r))}else{V(t,r)}}function U(e){if(e._onerror){e._onerror(e._result)}Z(e)}function V(e,t){if(e._state!==z){return}e._result=t;e._state=O;if(e._subscribers.length!==0){c(Z,e)}}function G(e,t){if(e._state!==z){return}e._state=D;e._result=t;c(U,e)}function Y(e,t,r,n){var a=e._subscribers;var i=a.length;e._onerror=null;a[i]=t;a[i+O]=r;a[i+D]=n;if(i===0&&e._state){c(Z,e)}}function Z(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,a=undefined,i=e._result;for(var o=0;o<t.length;o+=3){n=t[o];a=t[o+r];if(n){Q(r,n,a,i)}else{a(i)}}e._subscribers.length=0}function X(){this.error=null}var W=new X;function J(e,t){try{return e(t)}catch(e){W.error=e;return W}}function Q(e,t,n,a){var i=r(n),o=undefined,l=undefined,s=undefined,u=undefined;if(i){o=J(n,a);if(o===W){u=true;l=o.error;o=null}else{s=true}if(t===o){G(t,I());return}}else{o=a;s=true}if(t._state!==z){}else if(i&&s){H(t,o)}else if(u){G(t,l)}else if(e===O){V(t,o)}else if(e===D){G(t,o)}}function $(e,t){try{t(function t(r){H(e,r)},function t(r){G(e,r)})}catch(t){G(e,t)}}var K=0;function ee(){return K++}function te(e){e[C]=K++;e._state=undefined;e._result=undefined;e._subscribers=[]}function re(e,t){this._instanceConstructor=e;this.promise=new e(P);if(!this.promise[C]){te(this.promise)}if(o(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){V(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){V(this.promise,this._result)}}}else{G(this.promise,ne())}}function ne(){return new Error("Array Methods must be provided an Array")}re.prototype._enumerate=function(){var e=this.length;var t=this._input;for(var r=0;this._state===z&&r<e;r++){this._eachEntry(t[r],r)}};re.prototype._eachEntry=function(e,t){var r=this._instanceConstructor;var n=r.resolve;if(n===S){var a=N(e);if(a===L&&e._state!==z){this._settledAt(e._state,t,e._result)}else if(typeof a!=="function"){this._remaining--;this._result[t]=e}else if(r===ue){var i=new r(P);q(i,e,a);this._willSettleAt(i,t)}else{this._willSettleAt(new r(function(t){return t(e)}),t)}}else{this._willSettleAt(n(e),t)}};re.prototype._settledAt=function(e,t,r){var n=this.promise;if(n._state===z){this._remaining--;if(e===D){G(n,r)}else{this._result[t]=r}}if(this._remaining===0){V(n,this._result)}};re.prototype._willSettleAt=function(e,t){var r=this;Y(e,undefined,function(e){return r._settledAt(O,t,e)},function(e){return r._settledAt(D,t,e)})};function ae(e){return new re(this,e).promise}function ie(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(r,n){var a=e.length;for(var i=0;i<a;i++){t.resolve(e[i]).then(r,n)}})}}function oe(e){var t=this;var r=new t(P);G(r,e);return r}function le(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function se(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ue(e){this[C]=ee();this._result=this._state=undefined;this._subscribers=[];if(P!==e){typeof e!=="function"&&le();this instanceof ue?$(this,e):se()}}ue.all=ae;ue.race=ie;ue.resolve=S;ue.reject=oe;ue._setScheduler=f;ue._setAsap=d;ue._asap=c;ue.prototype={constructor:ue,then:L,catch:function e(t){return this.then(null,t)}};function ce(){var e=undefined;if(typeof i!=="undefined"){e=i}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ue}ce();ue.polyfill=ce;ue.Promise=ue;return ue})}).call(this,t("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:25}],10:[function(e,t,r){function n(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}t.exports=n;n.EventEmitter=n;n.prototype._events=undefined;n.prototype._maxListeners=undefined;n.defaultMaxListeners=10;n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};n.prototype.emit=function(e){var t,r,n,i,s,u;if(!this._events)this._events={};if(e==="error"){if(!this._events.error||o(this._events.error)&&!this._events.error.length){t=arguments[1];if(t instanceof Error){throw t}else{var c=new Error('Uncaught, unspecified "error" event. ('+t+")");c.context=t;throw c}}}r=this._events[e];if(l(r))return false;if(a(r)){switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1);r.apply(this,i)}}else if(o(r)){i=Array.prototype.slice.call(arguments,1);u=r.slice();n=u.length;for(s=0;s<n;s++)u[s].apply(this,i)}return true};n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",e,a(t.listener)?t.listener:t);if(!this._events[e])this._events[e]=t;else if(o(this._events[e]))this._events[e].push(t);else this._events[e]=[this._events[e],t];if(o(this._events[e])&&!this._events[e].warned){if(!l(this._maxListeners)){r=this._maxListeners}else{r=n.defaultMaxListeners}if(r&&r>0&&this._events[e].length>r){this._events[e].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[e].length);if(typeof console.trace==="function"){console.trace()}}}return this};n.prototype.on=n.prototype.addListener;n.prototype.once=function(e,t){if(!a(t))throw TypeError("listener must be a function");var r=false;function n(){this.removeListener(e,n);if(!r){r=true;t.apply(this,arguments)}}n.listener=t;this.on(e,n);return this};n.prototype.removeListener=function(e,t){var r,n,i,l;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;r=this._events[e];i=r.length;n=-1;if(r===t||a(r.listener)&&r.listener===t){delete this._events[e];if(this._events.removeListener)this.emit("removeListener",e,t)}else if(o(r)){for(l=i;l-- >0;){if(r[l]===t||r[l].listener&&r[l].listener===t){n=l;break}}if(n<0)return this;if(r.length===1){r.length=0;delete this._events[e]}else{r.splice(n,1)}if(this._events.removeListener)this.emit("removeListener",e,t)}return this};n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[e])delete this._events[e];return this}if(arguments.length===0){for(t in this._events){if(t==="removeListener")continue;this.removeAllListeners(t)}this.removeAllListeners("removeListener");this._events={};return this}r=this._events[e];if(a(r)){this.removeListener(e,r)}else if(r){while(r.length)this.removeListener(e,r[r.length-1])}delete this._events[e];return this};n.prototype.listeners=function(e){var t;if(!this._events||!this._events[e])t=[];else if(a(this._events[e]))t=[this._events[e]];else t=this._events[e].slice();return t};n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;else if(t)return t.length}return 0};n.listenerCount=function(e,t){return e.listenerCount(t)};function a(e){return typeof e==="function"}function i(e){return typeof e==="number"}function o(e){return typeof e==="object"&&e!==null}function l(e){return e===void 0}},{}],11:[function(e,t,r){"use strict";function n(e){var t=e.length,r;for(var n=0;n<t;n++){r=e.charCodeAt(n);if((r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279){return false}}return true}t.exports=function(e){var t=typeof e;if(t==="string"){var r=e;e=+e;if(e===0&&n(r))return false}else if(t!=="number")return false;return e-e<1}},{}],12:[function(e,t,r){t.exports=n;function n(e,t){var r=t[0],n=t[1],a=t[2],i=t[3],o=r+r,l=n+n,s=a+a,u=r*o,c=n*o,f=n*l,d=a*o,p=a*l,v=a*s,h=i*o,g=i*l,y=i*s;e[0]=1-f-v;e[1]=c+y;e[2]=d-g;e[3]=0;e[4]=c-y;e[5]=1-u-v;e[6]=p+h;e[7]=0;e[8]=d+g;e[9]=p-h;e[10]=1-u-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},{}],13:[function(e,t,r){(function(r){"use strict";var n=e("is-browser");var a;if(typeof r.matchMedia==="function"){a=!r.matchMedia("(hover: none)").matches}else{a=n}t.exports=a}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"is-browser":15}],14:[function(e,t,r){"use strict";var n=e("is-browser");function a(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t);window.removeEventListener("test",null,t)}catch(t){e=false}return e}t.exports=n&&a()},{"is-browser":15}],15:[function(e,t,r){t.exports=true},{}],16:[function(e,t,r){var n={left:0,top:0};t.exports=a;function a(e,t,r){t=t||e.currentTarget||e.srcElement;if(!Array.isArray(r)){r=[0,0]}var n=e.clientX||0;var a=e.clientY||0;var o=i(t);r[0]=n-o.left;r[1]=a-o.top;return r}function i(e){if(e===window||e===document||e===document.body){return n}else{return e.getBoundingClientRect()}}},{}],17:[function(e,t,r){var n=e("./lib/build-log");var a=e("./lib/epsilon");var i=e("./lib/intersecter");var o=e("./lib/segment-chainer");var l=e("./lib/segment-selector");var s=e("./lib/geojson");var u=false;var c=a();var f;f={buildLog:function(e){if(e===true)u=n();else if(e===false)u=false;return u===false?false:u.list},epsilon:function(e){return c.epsilon(e)},segments:function(e){var t=i(true,c,u);e.regions.forEach(t.addRegion);return{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=i(false,c,u);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:l.union(e.combined,u),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:l.intersect(e.combined,u),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:l.difference(e.combined,u),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:l.differenceRev(e.combined,u),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:l.xor(e.combined,u),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:o(e.segments,c,u),inverted:e.inverted}},polygonFromGeoJSON:function(e){return s.toPolygon(f,e)},polygonToGeoJSON:function(e){return s.fromPolygon(f,c,e)},union:function(e,t){return d(e,t,f.selectUnion)},intersect:function(e,t){return d(e,t,f.selectIntersect)},difference:function(e,t){return d(e,t,f.selectDifference)},differenceRev:function(e,t){return d(e,t,f.selectDifferenceRev)},xor:function(e,t){return d(e,t,f.selectXor)}};function d(e,t,r){var n=f.segments(e);var a=f.segments(t);var i=f.combine(n,a);var o=r(i);return f.polygon(o)}if(typeof window==="object")window.PolyBool=f;t.exports=f},{"./lib/build-log":18,"./lib/epsilon":19,"./lib/geojson":20,"./lib/intersecter":21,"./lib/segment-chainer":23,"./lib/segment-selector":24}],18:[function(e,t,r){function n(){var e;var t=0;var r=false;function n(t,r){e.list.push({type:t,data:r?JSON.parse(JSON.stringify(r)):void 0});return e}e={list:[],segmentId:function(){return t++},checkIntersection:function(e,t){return n("check",{seg1:e,seg2:t})},segmentChop:function(e,t){n("div_seg",{seg:e,pt:t});return n("chop",{seg:e,pt:t})},statusRemove:function(e){return n("pop_seg",{seg:e})},segmentUpdate:function(e){return n("seg_update",{seg:e})},segmentNew:function(e,t){return n("new_seg",{seg:e,primary:t})},segmentRemove:function(e){return n("rem_seg",{seg:e})},tempStatus:function(e,t,r){return n("temp_status",{seg:e,above:t,below:r})},rewind:function(e){return n("rewind",{seg:e})},status:function(e,t,r){return n("status",{seg:e,above:t,below:r})},vert:function(t){if(t===r)return e;r=t;return n("vert",{x:t})},log:function(e){if(typeof e!=="string")e=JSON.stringify(e,false,"  ");return n("log",{txt:e})},reset:function(){return n("reset")},selected:function(e){return n("selected",{segs:e})},chainStart:function(e){return n("chain_start",{seg:e})},chainRemoveHead:function(e,t){return n("chain_rem_head",{index:e,pt:t})},chainRemoveTail:function(e,t){return n("chain_rem_tail",{index:e,pt:t})},chainNew:function(e,t){return n("chain_new",{pt1:e,pt2:t})},chainMatch:function(e){return n("chain_match",{index:e})},chainClose:function(e){return n("chain_close",{index:e})},chainAddHead:function(e,t){return n("chain_add_head",{index:e,pt:t})},chainAddTail:function(e,t){return n("chain_add_tail",{index:e,pt:t})},chainConnect:function(e,t){return n("chain_con",{index1:e,index2:t})},chainReverse:function(e){return n("chain_rev",{index:e})},chainJoin:function(e,t){return n("chain_join",{index1:e,index2:t})},done:function(){return n("done")}};return e}t.exports=n},{}],19:[function(e,t,r){function n(e){if(typeof e!=="number")e=1e-10;var t={epsilon:function(t){if(typeof t==="number")e=t;return e},pointAboveOrOnLine:function(t,r,n){var a=r[0];var i=r[1];var o=n[0];var l=n[1];var s=t[0];var u=t[1];return(o-a)*(u-i)-(l-i)*(s-a)>=-e},pointBetween:function(t,r,n){var a=t[1]-r[1];var i=n[0]-r[0];var o=t[0]-r[0];var l=n[1]-r[1];var s=o*i+a*l;if(s<e)return false;var u=i*i+l*l;if(s-u>-e)return false;return true},pointsSameX:function(t,r){return Math.abs(t[0]-r[0])<e},pointsSameY:function(t,r){return Math.abs(t[1]-r[1])<e},pointsSame:function(e,r){return t.pointsSameX(e,r)&&t.pointsSameY(e,r)},pointsCompare:function(e,r){if(t.pointsSameX(e,r))return t.pointsSameY(e,r)?0:e[1]<r[1]?-1:1;return e[0]<r[0]?-1:1},pointsCollinear:function(t,r,n){var a=t[0]-r[0];var i=t[1]-r[1];var o=r[0]-n[0];var l=r[1]-n[1];return Math.abs(a*l-o*i)<e},linesIntersect:function(t,r,n,a){var i=r[0]-t[0];var o=r[1]-t[1];var l=a[0]-n[0];var s=a[1]-n[1];var u=i*s-o*l;if(Math.abs(u)<e)return false;var c=t[0]-n[0];var f=t[1]-n[1];var d=(l*f-s*c)/u;var p=(i*f-o*c)/u;var v={alongA:0,alongB:0,pt:[t[0]+d*i,t[1]+d*o]};if(d<=-e)v.alongA=-2;else if(d<e)v.alongA=-1;else if(d-1<=-e)v.alongA=0;else if(d-1<e)v.alongA=1;else v.alongA=2;if(p<=-e)v.alongB=-2;else if(p<e)v.alongB=-1;else if(p-1<=-e)v.alongB=0;else if(p-1<e)v.alongB=1;else v.alongB=2;return v},pointInsideRegion:function(t,r){var n=t[0];var a=t[1];var i=r[r.length-1][0];var o=r[r.length-1][1];var l=false;for(var s=0;s<r.length;s++){var u=r[s][0];var c=r[s][1];if(c-a>e!=o-a>e&&(i-u)*(a-c)/(o-c)+u-n>e)l=!l;i=u;o=c}return l}};return t}t.exports=n},{}],20:[function(e,t,r){var n={toPolygon:function(e,t){function r(t){if(t.length<=0)return e.segments({inverted:false,regions:[]});function r(t){var r=t.slice(0,t.length-1);return e.segments({inverted:false,regions:[r]})}var n=r(t[0]);for(var a=1;a<t.length;a++)n=e.selectDifference(e.combine(n,r(t[a])));return n}if(t.type==="Polygon"){return e.polygon(r(t.coordinates))}else if(t.type==="MultiPolygon"){var n=e.segments({inverted:false,regions:[]});for(var a=0;a<t.coordinates.length;a++)n=e.selectUnion(e.combine(n,r(t.coordinates[a])));return e.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function n(e,r){return t.pointInsideRegion([(e[0][0]+e[1][0])*.5,(e[0][1]+e[1][1])*.5],r)}function a(e){return{region:e,children:[]}}var i=a(null);function o(e,t){for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(t,i.region)){o(i,t);return}}var l=a(t);for(var r=0;r<e.children.length;r++){var i=e.children[r];if(n(i.region,t)){l.children.push(i);e.children.splice(r,1);r--}}e.children.push(l)}for(var l=0;l<r.regions.length;l++){var s=r.regions[l];if(s.length<3)continue;o(i,s)}function u(e,t){var r=0;var n=e[e.length-1][0];var a=e[e.length-1][1];var i=[];for(var o=0;o<e.length;o++){var l=e[o][0];var s=e[o][1];i.push([l,s]);r+=s*n-l*a;n=l;a=s}var u=r<0;if(u!==t)i.reverse();i.push([i[0][0],i[0][1]]);return i}var c=[];function f(e){var t=[u(e.region,false)];c.push(t);for(var r=0;r<e.children.length;r++)t.push(d(e.children[r]))}function d(e){for(var t=0;t<e.children.length;t++)f(e.children[t]);return u(e.region,true)}for(var l=0;l<i.children.length;l++)f(i.children[l]);if(c.length<=0)return{type:"Polygon",coordinates:[]};if(c.length==1)return{type:"Polygon",coordinates:c[0]};return{type:"MultiPolygon",coordinates:c}}};t.exports=n},{}],21:[function(e,t,r){var n=e("./linked-list");function a(e,t,r){function a(e,t){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,n){return{id:r?r.segmentId():-1,start:e,end:t,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var o=n.create();function l(e,r,n,a,i,o){var l=t.pointsCompare(r,i);if(l!==0)return l;if(t.pointsSame(n,o))return 0;if(e!==a)return e?1:-1;return t.pointAboveOrOnLine(n,a?i:o,a?o:i)?1:-1}function s(e,t){o.insertBefore(e,function(r){var n=l(e.isStart,e.pt,t,r.isStart,r.pt,r.other.pt);return n<0})}function u(e,t){var r=n.node({isStart:true,pt:e.start,seg:e,primary:t,other:null,status:null});s(r,e.end);return r}function c(e,t,r){var a=n.node({isStart:false,pt:t.end,seg:t,primary:r,other:e,status:null});e.other=a;s(a,e.pt)}function f(e,t){var r=u(e,t);c(r,e,t);return r}function d(e,t){if(r)r.segmentChop(e.seg,t);e.other.remove();e.seg.end=t;e.other.pt=t;s(e.other,e.pt)}function p(e,t){var r=i(t,e.seg.end,e.seg);d(e,t);return f(r,e.primary)}function v(a,i){var l=n.create();function s(e,r){var n=e.seg.start;var a=e.seg.end;var i=r.seg.start;var o=r.seg.end;if(t.pointsCollinear(n,i,o)){if(t.pointsCollinear(a,i,o))return 1;return t.pointAboveOrOnLine(a,i,o)?1:-1}return t.pointAboveOrOnLine(n,i,o)?1:-1}function u(e){return l.findTransition(function(t){var r=s(e,t.ev);return r>0})}function c(e,n){var a=e.seg;var i=n.seg;var o=a.start;var l=a.end;var s=i.start;var u=i.end;if(r)r.checkIntersection(a,i);var c=t.linesIntersect(o,l,s,u);if(c===false){if(!t.pointsCollinear(o,l,s))return false;if(t.pointsSame(o,u)||t.pointsSame(l,s))return false;var f=t.pointsSame(o,s);var d=t.pointsSame(l,u);if(f&&d)return n;var v=!f&&t.pointBetween(o,s,u);var h=!d&&t.pointBetween(l,s,u);if(f){if(h){p(n,l)}else{p(e,u)}return n}else if(v){if(!d){if(h){p(n,l)}else{p(e,u)}}p(n,o)}}else{if(c.alongA===0){if(c.alongB===-1)p(e,s);else if(c.alongB===0)p(e,c.pt);else if(c.alongB===1)p(e,u)}if(c.alongB===0){if(c.alongA===-1)p(n,o);else if(c.alongA===0)p(n,c.pt);else if(c.alongA===1)p(n,l)}}return false}var f=[];while(!o.isEmpty()){var d=o.getHead();if(r)r.vert(d.pt[0]);if(d.isStart){if(r)r.segmentNew(d.seg,d.primary);var v=u(d);var h=v.before?v.before.ev:null;var g=v.after?v.after.ev:null;if(r){r.tempStatus(d.seg,h?h.seg:false,g?g.seg:false)}function y(){if(h){var e=c(d,h);if(e)return e}if(g)return c(d,g);return false}var m=y();if(m){if(e){var x;if(d.seg.myFill.below===null)x=true;else x=d.seg.myFill.above!==d.seg.myFill.below;if(x)m.seg.myFill.above=!m.seg.myFill.above}else{m.seg.otherFill=d.seg.myFill}if(r)r.segmentUpdate(m.seg);d.other.remove();d.remove()}if(o.getHead()!==d){if(r)r.rewind(d.seg);continue}if(e){var x;if(d.seg.myFill.below===null)x=true;else x=d.seg.myFill.above!==d.seg.myFill.below;if(!g){d.seg.myFill.below=a}else{d.seg.myFill.below=g.seg.myFill.above}if(x)d.seg.myFill.above=!d.seg.myFill.below;else d.seg.myFill.above=d.seg.myFill.below}else{if(d.seg.otherFill===null){var b;if(!g){b=d.primary?i:a}else{if(d.primary===g.primary)b=g.seg.otherFill.above;else b=g.seg.myFill.above}d.seg.otherFill={above:b,below:b}}}if(r){r.status(d.seg,h?h.seg:false,g?g.seg:false)}d.other.status=v.insert(n.node({ev:d}))}else{var _=d.status;if(_===null){throw new Error("PolyBool: Zero-length segment detected; your epsilon is "+"probably too small or too large")}if(l.exists(_.prev)&&l.exists(_.next))c(_.prev.ev,_.next.ev);if(r)r.statusRemove(_.ev.seg);_.remove();if(!d.primary){var w=d.seg.myFill;d.seg.myFill=d.seg.otherFill;d.seg.otherFill=w}f.push(d.seg)}o.getHead().remove()}if(r)r.done();return f}if(!e){return{calculate:function(e,t,r,n){e.forEach(function(e){f(i(e.start,e.end,e),true)});r.forEach(function(e){f(i(e.start,e.end,e),false)});return v(t,n)}}}return{addRegion:function(e){var r;var n=e[e.length-1];for(var i=0;i<e.length;i++){r=n;n=e[i];var o=t.pointsCompare(r,n);if(o===0)continue;f(a(o<0?r:n,o<0?n:r),true)}},calculate:function(e){return v(e,false)}}}t.exports=a},{"./linked-list":22}],22:[function(e,t,r){var n={create:function(){var e={root:{root:true,next:null},exists:function(t){if(t===null||t===e.root)return false;return true},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){var n=e.root;var a=e.root.next;while(a!==null){if(r(a)){t.prev=a.prev;t.next=a;a.prev.next=t;a.prev=t;return}n=a;a=a.next}n.next=t;t.prev=n;t.next=null},findTransition:function(t){var r=e.root;var n=e.root.next;while(n!==null){if(t(n))break;r=n;n=n.next}return{before:r===e.root?null:r,after:n,insert:function(e){e.prev=r;e.next=n;r.next=e;if(n!==null)n.prev=e;return e}}}};return e},node:function(e){e.prev=null;e.next=null;e.remove=function(){e.prev.next=e.next;if(e.next)e.next.prev=e.prev;e.prev=null;e.next=null};return e}};t.exports=n},{}],23:[function(e,t,r){function n(e,t,r){var n=[];var a=[];e.forEach(function(e){var i=e.start;var o=e.end;if(t.pointsSame(i,o)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is "+"probably too small or too large");return}if(r)r.chainStart(e);var l={index:0,matches_head:false,matches_pt1:false};var s={index:0,matches_head:false,matches_pt1:false};var u=l;function c(e,t,r){u.index=e;u.matches_head=t;u.matches_pt1=r;if(u===l){u=s;return false}u=null;return true}for(var f=0;f<n.length;f++){var d=n[f];var p=d[0];var v=d[1];var h=d[d.length-1];var g=d[d.length-2];if(t.pointsSame(p,i)){if(c(f,true,true))break}else if(t.pointsSame(p,o)){if(c(f,true,false))break}else if(t.pointsSame(h,i)){if(c(f,false,true))break}else if(t.pointsSame(h,o)){if(c(f,false,false))break}}if(u===l){n.push([i,o]);if(r)r.chainNew(i,o);return}if(u===s){if(r)r.chainMatch(l.index);var y=l.index;var m=l.matches_pt1?o:i;var x=l.matches_head;var d=n[y];var b=x?d[0]:d[d.length-1];var _=x?d[1]:d[d.length-2];var w=x?d[d.length-1]:d[0];var k=x?d[d.length-2]:d[1];if(t.pointsCollinear(_,b,m)){if(x){if(r)r.chainRemoveHead(l.index,m);d.shift()}else{if(r)r.chainRemoveTail(l.index,m);d.pop()}b=_}if(t.pointsSame(w,m)){n.splice(y,1);if(t.pointsCollinear(k,w,b)){if(x){if(r)r.chainRemoveTail(l.index,b);d.pop()}else{if(r)r.chainRemoveHead(l.index,b);d.shift()}}if(r)r.chainClose(l.index);a.push(d);return}if(x){if(r)r.chainAddHead(l.index,m);d.unshift(m)}else{if(r)r.chainAddTail(l.index,m);d.push(m)}return}function M(e){if(r)r.chainReverse(e);n[e].reverse()}function A(e,a){var i=n[e];var o=n[a];var l=i[i.length-1];var s=i[i.length-2];var u=o[0];var c=o[1];if(t.pointsCollinear(s,l,u)){if(r)r.chainRemoveTail(e,l);i.pop();l=s}if(t.pointsCollinear(l,u,c)){if(r)r.chainRemoveHead(a,u);o.shift()}if(r)r.chainJoin(e,a);n[e]=i.concat(o);n.splice(a,1)}var T=l.index;var L=s.index;if(r)r.chainConnect(T,L);var S=n[T].length<n[L].length;if(l.matches_head){if(s.matches_head){if(S){M(T);A(T,L)}else{M(L);A(L,T)}}else{A(L,T)}}else{if(s.matches_head){A(T,L)}else{if(S){M(T);A(L,T)}else{M(L);A(T,L)}}}});return a}t.exports=n},{}],24:[function(e,t,r){function n(e,t,r){var n=[];e.forEach(function(e){var a=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);if(t[a]!==0){n.push({id:r?r.segmentId():-1,start:e.start,end:e.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}});if(r)r.selected(n);return n}var a={union:function(e,t){return n(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return n(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return n(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return n(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return n(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};t.exports=a},{}],25:[function(e,t,r){var n=t.exports={};var a;var i;function o(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){a=setTimeout}else{a=o}}catch(e){a=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=l}}catch(e){i=l}})();function s(e){if(a===setTimeout){return setTimeout(e,0)}if((a===o||!a)&&setTimeout){a=setTimeout;return setTimeout(e,0)}try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}function u(e){if(i===clearTimeout){return clearTimeout(e)}if((i===l||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var c=[];var f=false;var d;var p=-1;function v(){if(!f||!d){return}f=false;if(d.length){c=d.concat(c)}else{p=-1}if(c.length){h()}}function h(){if(f){return}var e=s(v);f=true;var t=c.length;while(t){d=c;c=[];while(++p<t){if(d){d[p].run()}}p=-1;t=c.length}d=null;f=false;u(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new g(e,t));if(c.length===1&&!f){s(h)}};function g(e,t){this.fun=e;this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function y(){}n.on=y;n.addListener=y;n.once=y;n.off=y;n.removeListener=y;n.removeAllListeners=y;n.emit=y;n.prependListener=y;n.prependOnceListener=y;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},{}],26:[function(t,r,n){(function(t){var n=/^\s+/,a=/\s+$/,i=0,o=t.round,l=t.min,s=t.max,u=t.random;function c(e,t){e=e?e:"";t=t||{};if(e instanceof c){return e}if(!(this instanceof c)){return new c(e,t)}var r=f(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=o(100*this._a)/100,this._format=t.format||r.format;this._gradientType=t.gradientType;if(this._r<1){this._r=o(this._r)}if(this._g<1){this._g=o(this._g)}if(this._b<1){this._b=o(this._b)}this._ok=r.ok;this._tc_id=i++}c.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb();var r,n,a,i,o,l;r=e.r/255;n=e.g/255;a=e.b/255;if(r<=.03928){i=r/12.92}else{i=t.pow((r+.055)/1.055,2.4)}if(n<=.03928){o=n/12.92}else{o=t.pow((n+.055)/1.055,2.4)}if(a<=.03928){l=a/12.92}else{l=t.pow((a+.055)/1.055,2.4)}return.2126*i+.7152*o+.0722*l},setAlpha:function(e){this._a=I(e);this._roundA=o(100*this._a)/100;return this},toHsv:function(){var e=h(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=h(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b);var t=o(e.h*360),r=o(e.s*100),n=o(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return y(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return m(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(N(this._r,255)*100)+"%",g:o(N(this._g,255)*100)+"%",b:o(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(N(this._r,255)*100)+"%, "+o(N(this._g,255)*100)+"%, "+o(N(this._b,255)*100)+"%)":"rgba("+o(N(this._r,255)*100)+"%, "+o(N(this._g,255)*100)+"%, "+o(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return E[y(this._r,this._g,this._b,true)]||false},toFilter:function(e){var t="#"+x(this._r,this._g,this._b,this._a);var r=t;var n=this._gradientType?"GradientType = 1, ":"";if(e){var a=c(e);r="#"+x(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=false;var n=this._a<1&&this._a>=0;var a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");if(a){if(e==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(e==="rgb"){r=this.toRgbString()}if(e==="prgb"){r=this.toPercentageRgbString()}if(e==="hex"||e==="hex6"){r=this.toHexString()}if(e==="hex3"){r=this.toHexString(true)}if(e==="hex4"){r=this.toHex8String(true)}if(e==="hex8"){r=this.toHex8String()}if(e==="name"){r=this.toName()}if(e==="hsl"){r=this.toHslString()}if(e==="hsv"){r=this.toHsvString()}return r||this.toHexString()},clone:function(){return c(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));this._r=r._r;this._g=r._g;this._b=r._b;this.setAlpha(r._a);return this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}};c.fromRatio=function(e,t){if(typeof e=="object"){var r={};for(var n in e){if(e.hasOwnProperty(n)){if(n==="a"){r[n]=e[n]}else{r[n]=U(e[n])}}}e=r}return c(e,t)};function f(e){var t={r:0,g:0,b:0};var r=1;var n=null;var a=null;var i=null;var o=false;var u=false;if(typeof e=="string"){e=X(e)}if(typeof e=="object"){if(Z(e.r)&&Z(e.g)&&Z(e.b)){t=d(e.r,e.g,e.b);o=true;u=String(e.r).substr(-1)==="%"?"prgb":"rgb"}else if(Z(e.h)&&Z(e.s)&&Z(e.v)){n=U(e.s);a=U(e.v);t=g(e.h,n,a);o=true;u="hsv"}else if(Z(e.h)&&Z(e.s)&&Z(e.l)){n=U(e.s);i=U(e.l);t=v(e.h,n,i);o=true;u="hsl"}if(e.hasOwnProperty("a")){r=e.a}}r=I(r);return{ok:o,format:e.format||u,r:l(255,s(t.r,0)),g:l(255,s(t.g,0)),b:l(255,s(t.b,0)),a:r}}function d(e,t,r){return{r:N(e,255)*255,g:N(t,255)*255,b:N(r,255)*255}}function p(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var n=s(e,t,r),a=l(e,t,r);var i,o,u=(n+a)/2;if(n==a){i=o=0}else{var c=n-a;o=u>.5?c/(2-n-a):c/(n+a);switch(n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:o,l:u}}function v(e,t,r){var n,a,i;e=N(e,360);t=N(t,100);r=N(r,100);function o(e,t,r){if(r<0)r+=1;if(r>1)r-=1;if(r<1/6)return e+(t-e)*6*r;if(r<1/2)return t;if(r<2/3)return e+(t-e)*(2/3-r)*6;return e}if(t===0){n=a=i=r}else{var l=r<.5?r*(1+t):r+t-r*t;var s=2*r-l;n=o(s,l,e+1/3);a=o(s,l,e);i=o(s,l,e-1/3)}return{r:n*255,g:a*255,b:i*255}}function h(e,t,r){e=N(e,255);t=N(t,255);r=N(r,255);var n=s(e,t,r),a=l(e,t,r);var i,o,u=n;var c=n-a;o=n===0?0:c/n;if(n==a){i=0}else{switch(n){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4;break}i/=6}return{h:i,s:o,v:u}}function g(e,r,n){e=N(e,360)*6;r=N(r,100);n=N(n,100);var a=t.floor(e),i=e-a,o=n*(1-r),l=n*(1-i*r),s=n*(1-(1-i)*r),u=a%6,c=[n,l,o,o,s,n][u],f=[s,n,n,l,o,o][u],d=[o,o,s,n,n,l][u];return{r:c*255,g:f*255,b:d*255}}function y(e,t,r,n){var a=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];if(n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)){return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)}return a.join("")}function m(e,t,r,n,a){var i=[H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16)),H(V(n))];if(a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)){return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0)}return i.join("")}function x(e,t,r,n){var a=[H(V(n)),H(o(e).toString(16)),H(o(t).toString(16)),H(o(r).toString(16))];return a.join("")}c.equals=function(e,t){if(!e||!t){return false}return c(e).toRgbString()==c(t).toRgbString()};c.random=function(){return c.fromRatio({r:u(),g:u(),b:u()})};function b(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s-=t/100;r.s=F(r.s);return c(r)}function _(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.s+=t/100;r.s=F(r.s);return c(r)}function w(e){return c(e).desaturate(100)}function k(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l+=t/100;r.l=F(r.l);return c(r)}function M(e,t){t=t===0?0:t||10;var r=c(e).toRgb();r.r=s(0,l(255,r.r-o(255*-(t/100))));r.g=s(0,l(255,r.g-o(255*-(t/100))));r.b=s(0,l(255,r.b-o(255*-(t/100))));return c(r)}function A(e,t){t=t===0?0:t||10;var r=c(e).toHsl();r.l-=t/100;r.l=F(r.l);return c(r)}function T(e,t){var r=c(e).toHsl();var n=(r.h+t)%360;r.h=n<0?360+n:n;return c(r)}function L(e){var t=c(e).toHsl();t.h=(t.h+180)%360;return c(t)}function S(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+120)%360,s:t.s,l:t.l}),c({h:(r+240)%360,s:t.s,l:t.l})]}function C(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+90)%360,s:t.s,l:t.l}),c({h:(r+180)%360,s:t.s,l:t.l}),c({h:(r+270)%360,s:t.s,l:t.l})]}function P(e){var t=c(e).toHsl();var r=t.h;return[c(e),c({h:(r+72)%360,s:t.s,l:t.l}),c({h:(r+216)%360,s:t.s,l:t.l})]}function z(e,t,r){t=t||6;r=r||30;var n=c(e).toHsl();var a=360/r;var i=[c(e)];for(n.h=(n.h-(a*t>>1)+720)%360;--t;){n.h=(n.h+a)%360;i.push(c(n))}return i}function O(e,t){t=t||6;var r=c(e).toHsv();var n=r.h,a=r.s,i=r.v;var o=[];var l=1/t;while(t--){o.push(c({h:n,s:a,v:i}));i=(i+l)%1}return o}c.mix=function(e,t,r){r=r===0?0:r||50;var n=c(e).toRgb();var a=c(t).toRgb();var i=r/100;var o={r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a};return c(o)};c.readability=function(e,r){var n=c(e);var a=c(r);return(t.max(n.getLuminance(),a.getLuminance())+.05)/(t.min(n.getLuminance(),a.getLuminance())+.05)};c.isReadable=function(e,t,r){var n=c.readability(e,t);var a,i;i=false;a=W(r);switch(a.level+a.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};c.mostReadable=function(e,t,r){var n=null;var a=0;var i;var o,l,s;r=r||{};o=r.includeFallbackColors;l=r.level;s=r.size;for(var u=0;u<t.length;u++){i=c.readability(e,t[u]);if(i>a){a=i;n=c(t[u])}}if(c.isReadable(e,n,{level:l,size:s})||!o){return n}else{r.includeFallbackColors=false;return c.mostReadable(e,["#fff","#000"],r)}};var D=c.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var E=c.hexNames=R(D);function R(e){var t={};for(var r in e){if(e.hasOwnProperty(r)){t[e[r]]=r}}return t}function I(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1){e=1}return e}function N(e,r){if(B(e)){e="100%"}var n=q(e);e=l(r,s(0,parseFloat(e)));if(n){e=parseInt(e*r,10)/100}if(t.abs(e-r)<1e-6){return 1}return e%r/parseFloat(r)}function F(e){return l(1,s(0,e))}function j(e){return parseInt(e,16)}function B(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function q(e){return typeof e==="string"&&e.indexOf("%")!=-1}function H(e){return e.length==1?"0"+e:""+e}function U(e){if(e<=1){e=e*100+"%"}return e}function V(e){return t.round(parseFloat(e)*255).toString(16)}function G(e){return j(e)/255}var Y=function(){var e="[-\\+]?\\d+%?";var t="[-\\+]?\\d*\\.\\d+%?";var r="(?:"+t+")|(?:"+e+")";var n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";var a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Z(e){return!!Y.CSS_UNIT.exec(e)}function X(e){e=e.replace(n,"").replace(a,"").toLowerCase();var t=false;if(D[e]){e=D[e];t=true}else if(e=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var r;if(r=Y.rgb.exec(e)){return{r:r[1],g:r[2],b:r[3]}}if(r=Y.rgba.exec(e)){return{r:r[1],g:r[2],b:r[3],a:r[4]}}if(r=Y.hsl.exec(e)){return{h:r[1],s:r[2],l:r[3]}}if(r=Y.hsla.exec(e)){return{h:r[1],s:r[2],l:r[3],a:r[4]}}if(r=Y.hsv.exec(e)){return{h:r[1],s:r[2],v:r[3]}}if(r=Y.hsva.exec(e)){return{h:r[1],s:r[2],v:r[3],a:r[4]}}if(r=Y.hex8.exec(e)){return{r:j(r[1]),g:j(r[2]),b:j(r[3]),a:G(r[4]),format:t?"name":"hex8"}}if(r=Y.hex6.exec(e)){return{r:j(r[1]),g:j(r[2]),b:j(r[3]),format:t?"name":"hex"}}if(r=Y.hex4.exec(e)){return{r:j(r[1]+""+r[1]),g:j(r[2]+""+r[2]),b:j(r[3]+""+r[3]),a:G(r[4]+""+r[4]),format:t?"name":"hex8"}}if(r=Y.hex3.exec(e)){return{r:j(r[1]+""+r[1]),g:j(r[2]+""+r[2]),b:j(r[3]+""+r[3]),format:t?"name":"hex"}}return false}function W(e){var t,r;e=e||{level:"AA",size:"small"};t=(e.level||"AA").toUpperCase();r=(e.size||"small").toLowerCase();if(t!=="AA"&&t!=="AAA"){t="AA"}if(r!=="small"&&r!=="large"){r="small"}return{level:t,size:r}}if(typeof r!=="undefined"&&r.exports){r.exports=c}else if(typeof e==="function"&&e.amd){e(function(){return c})}else{window.tinycolor=c}})(Math)},{}],27:[function(t,r,n){(function(t,a){typeof n==="object"&&typeof r!=="undefined"?a(n):typeof e==="function"&&e.amd?e(["exports"],a):a(t.topojson=t.topojson||{})})(this,function(e){"use strict";var t=function(e){return e};var r=function(e){if((r=e.transform)==null)return t;var r,n,a,i=r.scale[0],o=r.scale[1],l=r.translate[0],s=r.translate[1];return function(e,t){if(!t)n=a=0;e[0]=(n+=e[0])*i+l;e[1]=(a+=e[1])*o+s;return e}};var n=function(e){var t=e.bbox;function n(e){l[0]=e[0],l[1]=e[1],i(l);if(l[0]<u)u=l[0];if(l[0]>f)f=l[0];if(l[1]<c)c=l[1];if(l[1]>d)d=l[1]}function a(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(a);break;case"Point":n(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(n);break}}if(!t){var i=r(e),o,l=new Array(2),s,u=Infinity,c=u,f=-u,d=-u;e.arcs.forEach(function(e){var t=-1,r=e.length;while(++t<r){o=e[t],l[0]=o[0],l[1]=o[1],i(l,t);if(l[0]<u)u=l[0];if(l[0]>f)f=l[0];if(l[1]<c)c=l[1];if(l[1]>d)d=l[1]}});for(s in e.objects){a(e.objects[s])}t=e.bbox=[u,c,f,d]}return t};var a=function(e,t){var r,n=e.length,a=n-t;while(a<--n)r=e[a],e[a++]=e[n],e[n]=r};var i=function(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return o(e,t)})}:o(e,t)};function o(e,t){var r=t.id,n=t.bbox,a=t.properties==null?{}:t.properties,i=l(e,t);return r==null&&n==null?{type:"Feature",properties:a,geometry:i}:n==null?{type:"Feature",id:r,properties:a,geometry:i}:{type:"Feature",id:r,bbox:n,properties:a,geometry:i}}function l(e,t){var n=r(e),i=e.arcs;function o(e,t){if(t.length)t.pop();for(var r=i[e<0?~e:e],o=0,l=r.length;o<l;++o){t.push(n(r[o].slice(),o))}if(e<0)a(t,l)}function l(e){return n(e.slice())}function s(e){var t=[];for(var r=0,n=e.length;r<n;++r)o(e[r],t);if(t.length<2)t.push(t[0].slice());return t}function u(e){var t=s(e);while(t.length<4)t.push(t[0].slice());return t}function c(e){return e.map(u)}function f(e){var t=e.type,r;switch(t){case"GeometryCollection":return{type:t,geometries:e.geometries.map(f)};case"Point":r=l(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(l);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=c(e.arcs);break;case"MultiPolygon":r=e.arcs.map(c);break;default:return null}return{type:t,coordinates:r}}return f(t)}var s=function(e,t){var r={},n={},a={},i=[],o=-1;t.forEach(function(r,n){var a=e.arcs[r<0?~r:r],i;if(a.length<3&&!a[1][0]&&!a[1][1]){i=t[++o],t[o]=r,t[n]=i}});t.forEach(function(e){var t=l(e),r=t[0],i=t[1],o,s;if(o=a[r]){delete a[o.end];o.push(e);o.end=i;if(s=n[i]){delete n[s.start];var u=s===o?o:o.concat(s);n[u.start=o.start]=a[u.end=s.end]=u}else{n[o.start]=a[o.end]=o}}else if(o=n[i]){delete n[o.start];o.unshift(e);o.start=r;if(s=a[r]){delete a[s.end];var c=s===o?o:s.concat(o);n[c.start=s.start]=a[c.end=o.end]=c}else{n[o.start]=a[o.end]=o}}else{o=[e];n[o.start=r]=a[o.end=i]=o}});function l(t){var r=e.arcs[t<0?~t:t],n=r[0],a;if(e.transform)a=[0,0],r.forEach(function(e){a[0]+=e[0],a[1]+=e[1]});else a=r[r.length-1];return t<0?[a,n]:[n,a]}function s(e,t){for(var n in e){var a=e[n];delete t[a.start];delete a.start;delete a.end;a.forEach(function(e){r[e<0?~e:e]=1});i.push(a)}}s(a,n);s(n,a);t.forEach(function(e){if(!r[e<0?~e:e])i.push([e])});return i};var u=function(e){return l(e,c.apply(this,arguments))};function c(e,t,r){var n,a,i;if(arguments.length>1)n=f(e,t,r);else for(a=0,n=new Array(i=e.arcs.length);a<i;++a)n[a]=a;return{type:"MultiLineString",arcs:s(e,n)}}function f(e,t,r){var n=[],a=[],i;function o(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:i})}function l(e){e.forEach(o)}function s(e){e.forEach(l)}function u(e){e.forEach(s)}function c(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"LineString":l(e.arcs);break;case"MultiLineString":case"Polygon":s(e.arcs);break;case"MultiPolygon":u(e.arcs);break}}c(t);a.forEach(r==null?function(e){n.push(e[0].i)}:function(e){if(r(e[0].g,e[e.length-1].g))n.push(e[0].i)});return n}function d(e){var t=-1,r=e.length,n,a=e[r-1],i=0;while(++t<r)n=a,a=e[t],i+=n[0]*a[1]-n[1]*a[0];return Math.abs(i)}var p=function(e){return l(e,v.apply(this,arguments))};function v(e,t){var r={},n=[],a=[];t.forEach(i);function i(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(i);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o);break}}function o(e){e.forEach(function(t){t.forEach(function(t){(r[t=t<0?~t:t]||(r[t]=[])).push(e)})});n.push(e)}function u(t){return d(l(e,{type:"Polygon",arcs:[t]}).coordinates[0])}n.forEach(function(e){if(!e._){var t=[],n=[e];e._=1;a.push(t);while(e=n.pop()){t.push(e);e.forEach(function(e){e.forEach(function(e){r[e<0?~e:e].forEach(function(e){if(!e._){e._=1;n.push(e)}})})})}}});n.forEach(function(e){delete e._});return{type:"MultiPolygon",arcs:a.map(function(t){var n=[],a;t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){if(r[e<0?~e:e].length<2){n.push(e)}})})});n=s(e,n);if((a=n.length)>1){for(var i=1,o=u(n[0]),l,c;i<a;++i){if((l=u(n[i]))>o){c=n[0],n[0]=n[i],n[i]=c,o=l}}}return n})}}var h=function(e,t){var r=0,n=e.length;while(r<n){var a=r+n>>>1;if(e[a]<t)r=a+1;else n=a}return r};var g=function(e){var t={},r=e.map(function(){return[]});function n(e,r){e.forEach(function(e){if(e<0)e=~e;var n=t[e];if(n)n.push(r);else t[e]=[r]})}function a(e,t){e.forEach(function(e){n(e,t)})}function i(e,t){if(e.type==="GeometryCollection")e.geometries.forEach(function(e){i(e,t)});else if(e.type in o)o[e.type](e.arcs,t)}var o={LineString:n,MultiLineString:a,Polygon:a,MultiPolygon:function(e,t){e.forEach(function(e){a(e,t)})}};e.forEach(i);for(var l in t){for(var s=t[l],u=s.length,c=0;c<u;++c){for(var f=c+1;f<u;++f){var d=s[c],p=s[f],v;if((v=r[d])[l=h(v,p)]!==p)v.splice(l,0,p);if((v=r[p])[l=h(v,d)]!==d)v.splice(l,0,d)}}}return r};var y=function(e,t){if(!((t=Math.floor(t))>=2))throw new Error("n must be \u22652");if(e.transform)throw new Error("already quantized");var r=n(e),a,i=r[0],o=(r[2]-i)/(t-1)||1,l=r[1],s=(r[3]-l)/(t-1)||1;function u(e){e[0]=Math.round((e[0]-i)/o);e[1]=Math.round((e[1]-l)/s)}function c(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"Point":u(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(u);break}}e.arcs.forEach(function(e){var t=1,r=1,n=e.length,a=e[0],u=a[0]=Math.round((a[0]-i)/o),c=a[1]=Math.round((a[1]-l)/s),f,d,p;for(;t<n;++t){a=e[t];d=Math.round((a[0]-i)/o);p=Math.round((a[1]-l)/s);if(d!==u||p!==c){f=e[r++];f[0]=d-u,u=d;f[1]=p-c,c=p}}if(r<2){f=e[r++];f[0]=0;f[1]=0}e.length=r});for(a in e.objects){c(e.objects[a])}e.transform={scale:[o,s],translate:[i,l]};return e};var m=function(e){if((r=e.transform)==null)return t;var r,n,a,i=r.scale[0],o=r.scale[1],l=r.translate[0],s=r.translate[1];return function(e,t){if(!t)n=a=0;var r=Math.round((e[0]-l)/i),u=Math.round((e[1]-s)/o);e[0]=r-n,n=r;e[1]=u-a,a=u;return e}};e.bbox=n;e.feature=i;e.mesh=u;e.meshArcs=c;e.merge=p;e.mergeArcs=v;e.neighbors=g;e.quantize=y;e.transform=r;e.untransform=m;Object.defineProperty(e,"__esModule",{value:true})})},{}],28:[function(e,t,r){"use strict";t.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:true},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:true}]},{}],29:[function(e,t,r){"use strict";var n=e("./arrow_paths");var a=e("../../plots/font_attributes");var i=e("../../plots/cartesian/constants");var o=e("../../plot_api/plot_template").templatedArray;t.exports=o("annotation",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:a({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[false,"onoff","onout"],dflt:false,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:a({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":199,"../../plots/cartesian/constants":214,"../../plots/font_attributes":235,"./arrow_paths":28}],30:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("./draw").draw;t.exports=function e(t){var r=t._fullLayout,l=n.filterVisible(r.annotations);if(!l.length||!t._fullData.length)return;var s={};l.forEach(function(e){s[e.xref]=1;s[e.yref]=1});for(var u in s){var c=a.getFromId(t,u);if(c&&c.autorange){return n.syncOrAsync([i,o],t)}}};function o(e){var t=e._fullLayout;n.filterVisible(t.annotations).forEach(function(t){var r=a.getFromId(e,t.xref),n=a.getFromId(e,t.yref),i=3*t.arrowsize*t.arrowwidth||0,o=3*t.startarrowsize*t.arrowwidth||0;var l,s,u,c;if(r&&r.autorange){l=i+t.xshift;s=i-t.xshift;u=o+t.xshift;c=o-t.xshift;if(t.axref===t.xref){a.expand(r,[r.r2c(t.x)],{ppadplus:l,ppadminus:s});a.expand(r,[r.r2c(t.ax)],{ppadplus:Math.max(t._xpadplus,u),ppadminus:Math.max(t._xpadminus,c)})}else{u=t.ax?u+t.ax:u;c=t.ax?c-t.ax:c;a.expand(r,[r.r2c(t.x)],{ppadplus:Math.max(t._xpadplus,l,u),ppadminus:Math.max(t._xpadminus,s,c)})}}if(n&&n.autorange){l=i-t.yshift;s=i+t.yshift;u=o-t.yshift;c=o+t.yshift;if(t.ayref===t.yref){a.expand(n,[n.r2c(t.y)],{ppadplus:l,ppadminus:s});a.expand(n,[n.r2c(t.ay)],{ppadplus:Math.max(t._ypadplus,u),ppadminus:Math.max(t._ypadminus,c)})}else{u=t.ay?u+t.ay:u;c=t.ay?c-t.ay:c;a.expand(n,[n.r2c(t.y)],{ppadplus:Math.max(t._ypadplus,l,u),ppadminus:Math.max(t._ypadminus,s,c)})}}})}},{"../../lib":164,"../../plots/cartesian/axes":209,"./draw":35}],31:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=e("../../plot_api/plot_template").arrayEditor;t.exports={hasClickToShow:o,onClick:l};function o(e,t){var r=s(e,t);return r.on.length>0||r.explicitOff.length>0}function l(e,t){var r=s(e,t);var o=r.on;var l=r.off.concat(r.explicitOff);var u={};var c=e._fullLayout.annotations;var f,d;if(!(o.length||l.length))return;for(f=0;f<o.length;f++){d=i(e.layout,"annotations",c[o[f]]);d.modifyItem("visible",true);n.extendFlat(u,d.getUpdateObj())}for(f=0;f<l.length;f++){d=i(e.layout,"annotations",c[l[f]]);d.modifyItem("visible",false);n.extendFlat(u,d.getUpdateObj())}return a.call("update",e,{},u)}function s(e,t){var r=e._fullLayout.annotations,n=[],a=[],i=[],o=(t||[]).length;var l,s,c,f,d,p,v,h;for(l=0;l<r.length;l++){c=r[l];f=c.clicktoshow;if(f){for(s=0;s<o;s++){d=t[s];p=d.xaxis;v=d.yaxis;if(p._id===c.xref&&v._id===c.yref&&p.d2r(d.x)===u(c._xclick,p)&&v.d2r(d.y)===u(c._yclick,v)){if(c.visible){if(f==="onout")h=a;else h=i}else{h=n}h.push(l);break}}if(s===o){if(c.visible&&f==="onout")a.push(l)}}}return{on:n,off:a,explicitOff:i}}function u(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}},{"../../lib":164,"../../plot_api/plot_template":199,"../../registry":258}],32:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../color");t.exports=function e(t,r,i,o){o("opacity");var l=o("bgcolor");var s=o("bordercolor");var u=a.opacity(s);o("borderpad");var c=o("borderwidth");var f=o("showarrow");o("text",f?" ":i._dfltTitle.annotation);o("textangle");n.coerceFont(o,"font",i.font);o("width");o("align");var d=o("height");if(d)o("valign");if(f){var p=o("arrowside");var v;var h;if(p.indexOf("end")!==-1){v=o("arrowhead");h=o("arrowsize")}if(p.indexOf("start")!==-1){o("startarrowhead",v);o("startarrowsize",h)}o("arrowcolor",u?r.bordercolor:a.defaultLine);o("arrowwidth",(u&&c||1)*2);o("standoff");o("startstandoff")}var g=o("hovertext");var y=i.hoverlabel||{};if(g){var m=o("hoverlabel.bgcolor",y.bgcolor||(a.opacity(l)?a.rgb(l):a.defaultLine));var x=o("hoverlabel.bordercolor",y.bordercolor||a.contrast(m));n.coerceFont(o,"hoverlabel.font",{family:y.font.family,size:y.font.size,color:y.font.color||x})}o("captureevents",!!g)}},{"../../lib":164,"../color":44}],33:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var l=i==="log"&&r.type==="linear",s=i==="linear"&&r.type==="log";if(!(l||s))return;var u=t._fullLayout.annotations,c=r._id.charAt(0),f,d;function p(e){var t=f[e],i=null;if(l)i=a(t,r.range);else i=Math.pow(10,t);if(!n(i))i=null;o(d+e,i)}for(var v=0;v<u.length;v++){f=u[v];d="annotations["+v+"].";if(f[c+"ref"]===r._id)p(c);if(f["a"+c+"ref"]===r._id)p("a"+c)}}},{"../../lib/to_log_range":187,"fast-isnumeric":11}],34:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./common_defaults");var l=e("./attributes");t.exports=function e(t,r){i(t,r,{name:"annotations",handleItemDefaults:s})};function s(e,t,r){function i(r,a){return n.coerce(e,t,l,r,a)}var s=i("visible");var u=i("clicktoshow");if(!(s||u))return;o(e,t,r,i);var c=t.showarrow;var f=["x","y"],d=[-10,-30],p={_fullLayout:r};for(var v=0;v<2;v++){var h=f[v];var g=a.coerceRef(e,t,p,h,"","paper");a.coercePosition(t,p,i,g,h,.5);if(c){var y="a"+h,m=a.coerceRef(e,t,p,y,"pixel");if(m!=="pixel"&&m!==g){m=t[y]="pixel"}var x=m==="pixel"?d[v]:.4;a.coercePosition(t,p,i,m,y,x)}i(h+"anchor");i(h+"shift")}n.noneOrAll(e,t,["x","y"]);if(c){n.noneOrAll(e,t,["ax","ay"])}if(u){var b=i("xclick");var _=i("yclick");t._xclick=b===undefined?t.x:a.cleanPosition(b,p,t.xref);t._yclick=_===undefined?t.y:a.cleanPosition(_,p,t.yref)}}},{"../../lib":164,"../../plots/array_container_defaults":205,"../../plots/cartesian/axes":209,"./attributes":29,"./common_defaults":32}],35:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var l=e("../../plots/cartesian/axes");var s=e("../color");var u=e("../drawing");var c=e("../fx");var f=e("../../lib/svg_text_utils");var d=e("../../lib/setcursor");var p=e("../dragelement");var v=e("../../plot_api/plot_template").arrayEditor;var h=e("./draw_arrow_head");t.exports={draw:g,drawOne:y,drawRaw:m};function g(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++){if(t.annotations[r].visible){y(e,r)}}return i.previousPromises(e)}function y(e,t){var r=e._fullLayout;var n=r.annotations[t]||{};var a=l.getFromId(e,n.xref);var i=l.getFromId(e,n.yref);m(e,n,t,false,a,i)}function m(e,t,r,i,l,g){var y=e._fullLayout;var m=e._fullLayout._size;var x=e._context.edits;var b,_;if(i){b="annotation-"+i;_=i+".annotations"}else{b="annotation";_="annotations"}var w=v(e.layout,_,t);var k=w.modifyBase;var M=w.modifyItem;var A=w.getUpdateObj;y._infolayer.selectAll("."+b+'[data-index="'+r+'"]').remove();var T="clip"+y._uid+"_ann"+r;if(!t._input||t.visible===false){n.selectAll("#"+T).remove();return}var L={x:{},y:{}},S=+t.textangle||0;var C=y._infolayer.append("g").classed(b,true).attr("data-index",String(r)).style("opacity",t.opacity);var P=C.append("g").classed("annotation-text-g",true);var z=x[t.showarrow?"annotationTail":"annotationPosition"];var O=t.captureevents||x.annotationText||z;var D=P.append("g").style("pointer-events",O?"all":null).call(d,"pointer").on("click",function(){e._dragging=false;var a={index:r,annotation:t._input,fullAnnotation:t,event:n.event};if(i){a.subplotId=i}e.emit("plotly_clickannotation",a)});if(t.hovertext){D.on("mouseover",function(){var r=t.hoverlabel;var n=r.font;var a=this.getBoundingClientRect();var i=e.getBoundingClientRect();c.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:t.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:e})}).on("mouseout",function(){c.loneUnhover(y._hoverlayer.node())})}var E=t.borderwidth,R=t.borderpad,I=E+R;var N=D.append("rect").attr("class","bg").style("stroke-width",E+"px").call(s.stroke,t.bordercolor).call(s.fill,t.bgcolor);var F=t.width||t.height;var j=y._topclips.selectAll("#"+T).data(F?[0]:[]);j.enter().append("clipPath").classed("annclip",true).attr("id",T).append("rect");j.exit().remove();var B=t.font;var q=D.append("text").classed("annotation-text",true).text(t.text);function H(r){r.call(u.font,B).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"});f.convertToTspans(r,e,U);return r}function U(){var r=q.selectAll("a");if(r.size()===1&&r.text()===q.text()){var n=D.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"});n.node().appendChild(N.node())}var c=D.select(".annotation-text-math-group");var v=!c.empty();var b=u.bBox((v?c:q).node());var _=b.width;var w=b.height;var O=t.width||_;var R=t.height||w;var B=Math.round(O+2*I);var H=Math.round(R+2*I);t._w=O;t._h=R;function U(e,t){if(t==="auto"){if(e<1/3)t="left";else if(e>2/3)t="right";else t="center"}return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var V=false;var G=["x","y"];for(var Y=0;Y<G.length;Y++){var Z=G[Y],X=t[Z+"ref"]||Z,W=t["a"+Z+"ref"],J={x:l,y:g}[Z],Q=(S+(Z==="x"?0:-90))*Math.PI/180,$=B*Math.cos(Q),K=H*Math.sin(Q),ee=Math.abs($)+Math.abs(K),te=t[Z+"anchor"],re=t[Z+"shift"]*(Z==="x"?1:-1),ne=L[Z],ae,ie,oe,le,se;if(J){var ue=J.r2fraction(t[Z]);if((e._dragging||!J.autorange)&&(ue<0||ue>1)){if(W===X){ue=J.r2fraction(t["a"+Z]);if(ue<0||ue>1){V=true}}else{V=true}if(V)continue}ae=J._offset+J.r2p(t[Z]);le=.5}else{if(Z==="x"){oe=t[Z];ae=m.l+m.w*oe}else{oe=1-t[Z];ae=m.t+m.h*oe}le=t.showarrow?.5:oe}if(t.showarrow){ne.head=ae;var ce=t["a"+Z];se=$*U(.5,t.xanchor)-K*U(.5,t.yanchor);if(W===X){ne.tail=J._offset+J.r2p(ce);ie=se}else{ne.tail=ae+ce;ie=se+ce}ne.text=ne.tail+se;var fe=y[Z==="x"?"width":"height"];if(X==="paper"){ne.head=o.constrain(ne.head,1,fe-1)}if(W==="pixel"){var de=-Math.max(ne.tail-3,ne.text),pe=Math.min(ne.tail+3,ne.text)-fe;if(de>0){ne.tail+=de;ne.text+=de}else if(pe>0){ne.tail-=pe;ne.text-=pe}}ne.tail+=re;ne.head+=re}else{se=ee*U(le,te);ie=se;ne.text=ae+se}ne.text+=re;se+=re;ie+=re;t["_"+Z+"padplus"]=ee/2+ie;t["_"+Z+"padminus"]=ee/2-ie;t["_"+Z+"size"]=ee;t["_"+Z+"shift"]=se}if(V){D.remove();return}var ve=0;var he=0;if(t.align!=="left"){ve=(O-_)*(t.align==="center"?.5:1)}if(t.valign!=="top"){he=(R-w)*(t.valign==="middle"?.5:1)}if(v){c.select("svg").attr({x:I+ve-1,y:I+he}).call(u.setClipUrl,F?T:null)}else{var ge=I+he-b.top;var ye=I+ve-b.left;q.call(f.positionText,ye,ge).call(u.setClipUrl,F?T:null)}j.select("rect").call(u.setRect,I,I,O,R);N.call(u.setRect,E/2,E/2,B-E,H-E);D.call(u.setTranslate,Math.round(L.x.text-B/2),Math.round(L.y.text-H/2));P.attr({transform:"rotate("+S+","+L.x.text+","+L.y.text+")"});var me=function(r,n){C.selectAll(".annotation-arrow-g").remove();var c=L.x.head,f=L.y.head,d=L.x.tail+r,v=L.y.tail+n,y=L.x.text+r,b=L.y.text+n,_=o.rotationXYMatrix(S,y,b),w=o.apply2DTransform(_),T=o.apply2DTransform2(_),z=+N.attr("width"),O=+N.attr("height"),E=y-.5*z,R=E+z,I=b-.5*O,F=I+O,j=[[E,I,E,F],[E,F,R,F],[R,F,R,I],[R,I,E,I]].map(T);if(j.reduce(function(e,t){return e^!!o.segmentsIntersect(c,f,c+1e6,f+1e6,t[0],t[1],t[2],t[3])},false)){return}j.forEach(function(e){var t=o.segmentsIntersect(d,v,c,f,e[0],e[1],e[2],e[3]);if(t){d=t.x;v=t.y}});var B=t.arrowwidth,q=t.arrowcolor,H=t.arrowside;var U=C.append("g").style({opacity:s.opacity(q)}).classed("annotation-arrow-g",true);var V=U.append("path").attr("d","M"+d+","+v+"L"+c+","+f).style("stroke-width",B+"px").call(s.stroke,s.rgb(q));h(V,H,t);if(x.annotationPosition&&V.node().parentNode&&!i){var G=c;var Y=f;if(t.standoff){var Z=Math.sqrt(Math.pow(c-d,2)+Math.pow(f-v,2));G+=t.standoff*(d-c)/Z;Y+=t.standoff*(v-f)/Z}var X=U.append("path").classed("annotation-arrow",true).classed("anndrag",true).classed("cursor-move",true).attr({d:"M3,3H-3V-3H3ZM0,0L"+(d-G)+","+(v-Y),transform:"translate("+G+","+Y+")"}).style("stroke-width",B+6+"px").call(s.stroke,"rgba(0,0,0,0)").call(s.fill,"rgba(0,0,0,0)");var W,J;p.init({element:X.node(),gd:e,prepFn:function(){var e=u.getTranslate(D);W=e.x;J=e.y;if(l&&l.autorange){k(l._name+".autorange",true)}if(g&&g.autorange){k(g._name+".autorange",true)}},moveFn:function(e,r){var n=w(W,J),a=n[0]+e,i=n[1]+r;D.call(u.setTranslate,a,i);M("x",l?l.p2r(l.r2p(t.x)+e):t.x+e/m.w);M("y",g?g.p2r(g.r2p(t.y)+r):t.y-r/m.h);if(t.axref===t.xref){M("ax",l.p2r(l.r2p(t.ax)+e))}if(t.ayref===t.yref){M("ay",g.p2r(g.r2p(t.ay)+r))}U.attr("transform","translate("+e+","+r+")");P.attr({transform:"rotate("+S+","+a+","+i+")"})},doneFn:function(){a.call("relayout",e,A());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}};if(t.showarrow)me(0,0);if(z){var xe;p.init({element:D.node(),gd:e,prepFn:function(){xe=P.attr("transform")},moveFn:function(e,r){var n="pointer";if(t.showarrow){if(t.axref===t.xref){M("ax",l.p2r(l.r2p(t.ax)+e))}else{M("ax",t.ax+e)}if(t.ayref===t.yref){M("ay",g.p2r(g.r2p(t.ay)+r))}else{M("ay",t.ay+r)}me(e,r)}else if(!i){var a,o;if(l){a=l.p2r(l.r2p(t.x)+e)}else{var s=t._xsize/m.w,u=t.x+(t._xshift-t.xshift)/m.w-s/2;a=p.align(u+e/m.w,s,0,1,t.xanchor)}if(g){o=g.p2r(g.r2p(t.y)+r)}else{var c=t._ysize/m.h,f=t.y-(t._yshift+t.yshift)/m.h-c/2;o=p.align(f-r/m.h,c,0,1,t.yanchor)}M("x",a);M("y",o);if(!l||!g){n=p.getCursor(l?.5:a,g?.5:o,t.xanchor,t.yanchor)}}else return;P.attr({transform:"translate("+e+","+r+")"+xe});d(D,n)},doneFn:function(){d(D);a.call("relayout",e,A());var t=document.querySelector(".js-notes-box-panel");if(t)t.redraw(t.selectedObj)}})}}if(x.annotationText){q.call(f.makeEditable,{delegate:D,gd:e}).call(H).on("edit",function(r){t.text=r;this.call(H);M("text",r);if(l&&l.autorange){k(l._name+".autorange",true)}if(g&&g.autorange){k(g._name+".autorange",true)}a.call("relayout",e,A())})}else q.call(H)}},{"../../lib":164,"../../lib/setcursor":183,"../../lib/svg_text_utils":185,"../../plot_api/plot_template":199,"../../plots/cartesian/axes":209,"../../plots/plots":249,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"../fx":86,"./draw_arrow_head":36,d3:8}],36:[function(e,t,r){"use strict";var n=e("d3");var a=e("../color");var i=e("./arrow_paths");t.exports=function e(t,r,o){var l=t.node();var s=i[o.arrowhead||0];var u=i[o.startarrowhead||0];var c=(o.arrowwidth||1)*(o.arrowsize||1);var f=(o.arrowwidth||1)*(o.startarrowsize||1);var d=r.indexOf("start")>=0;var p=r.indexOf("end")>=0;var v=s.backoff*c+o.standoff;var h=u.backoff*f+o.startstandoff;var g,y,m,x;if(l.nodeName==="line"){g={x:+t.attr("x1"),y:+t.attr("y1")};y={x:+t.attr("x2"),y:+t.attr("y2")};var b=g.x-y.x;var _=g.y-y.y;m=Math.atan2(_,b);x=m+Math.PI;if(v&&h){if(v+h>Math.sqrt(b*b+_*_)){D();return}}if(v){if(v*v>b*b+_*_){D();return}var w=v*Math.cos(m),k=v*Math.sin(m);y.x+=w;y.y+=k;t.attr({x2:y.x,y2:y.y})}if(h){if(h*h>b*b+_*_){D();return}var M=h*Math.cos(m),A=h*Math.sin(m);g.x-=M;g.y-=A;t.attr({x1:g.x,y1:g.y})}}else if(l.nodeName==="path"){var T=l.getTotalLength(),L="";if(T<v+h){D();return}var S=l.getPointAtLength(0);var C=l.getPointAtLength(.1);m=Math.atan2(S.y-C.y,S.x-C.x);g=l.getPointAtLength(Math.min(h,T));L="0px,"+h+"px,";var P=l.getPointAtLength(T);var z=l.getPointAtLength(T-.1);x=Math.atan2(P.y-z.y,P.x-z.x);y=l.getPointAtLength(Math.max(0,T-v));var O=L?h+v:v;L+=T-O+"px,"+T+"px";t.style("stroke-dasharray",L)}function D(){t.style("stroke-dasharray","0px,100px")}function E(e,r,i,s){if(!e.path)return;if(e.noRotate)i=0;n.select(l.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+r.x+","+r.y+")"+(i?"rotate("+i*180/Math.PI+")":"")+"scale("+s+")"}).style({fill:a.rgb(o.arrowcolor),"stroke-width":0})}if(d)E(u,g,m,f);if(p)E(s,y,x,c)}},{"../color":44,"./arrow_paths":28,d3:8}],37:[function(e,t,r){"use strict";var n=e("./draw");var a=e("./click");t.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:a.hasClickToShow,onClick:a.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":219,"./attributes":29,"./calc_autorange":30,"./click":31,"./convert_coords":33,"./defaults":34,"./draw":35}],38:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../plot_api/edit_types").overrideAll;var i=e("../../plot_api/plot_template").templatedArray;t.exports=a(i("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":192,"../../plot_api/plot_template":199,"../annotations/attributes":29}],39:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");t.exports=function e(t){var r=t.fullSceneLayout;var n=r.annotations;for(var a=0;a<n.length;a++){i(n[a],t)}t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function i(e,t){var r=t.fullSceneLayout;var i=r.domain;var o=t.fullLayout._size;var l={pdata:null,type:"linear",autorange:false,range:[-Infinity,Infinity]};e._xa={};n.extendFlat(e._xa,l);a.setConvert(e._xa);e._xa._offset=o.l+i.x[0]*o.w;e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*o.w*(i.x[1]-i.x[0])};e._ya={};n.extendFlat(e._ya,l);a.setConvert(e._ya);e._ya._offset=o.t+(1-i.y[1])*o.h;e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*o.h*(i.y[1]-i.y[0])}}},{"../../lib":164,"../../plots/cartesian/axes":209}],40:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("../annotations/common_defaults");var l=e("./attributes");t.exports=function e(t,r,n){i(t,r,{name:"annotations",handleItemDefaults:s,fullLayout:n.fullLayout})};function s(e,t,r,i){function s(r,a){return n.coerce(e,t,l,r,a)}function u(e){var n=e+"axis";var i={_fullLayout:{}};i._fullLayout[n]=r[n];return a.coercePosition(t,i,s,e,e,.5)}var c=s("visible");if(!c)return;o(e,t,i.fullLayout,s);u("x");u("y");u("z");n.noneOrAll(e,t,["x","y","z"]);t.xref="x";t.yref="y";t.zref="z";s("xanchor");s("yanchor");s("xshift");s("yshift");if(t.showarrow){t.axref="pixel";t.ayref="pixel";s("ax",-10);s("ay",-30);n.noneOrAll(e,t,["ax","ay"])}}},{"../../lib":164,"../../plots/array_container_defaults":205,"../../plots/cartesian/axes":209,"../annotations/common_defaults":32,"./attributes":38}],41:[function(e,t,r){"use strict";var n=e("../annotations/draw").drawRaw;var a=e("../../plots/gl3d/project");var i=["x","y","z"];t.exports=function e(t){var r=t.fullSceneLayout;var o=t.dataScale;var l=r.annotations;for(var s=0;s<l.length;s++){var u=l[s];var c=false;for(var f=0;f<3;f++){var d=i[f];var p=u[d];var v=r[d+"axis"];var h=v.r2fraction(p);if(h<0||h>1){c=true;break}}if(c){t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove()}else{u._pdata=a(t.glplot.cameraParams,[r.xaxis.r2l(u.x)*o[0],r.yaxis.r2l(u.y)*o[1],r.zaxis.r2l(u.z)*o[2]]);n(t.graphDiv,u,s,t.id,u._xa,u._ya)}}}},{"../../plots/gl3d/project":246,"../annotations/draw":35}],42:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");t.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:i,convert:e("./convert"),draw:e("./draw")};function i(e,t){var r=n.subplotsRegistry.gl3d;if(!r)return;var i=r.attrRegex;var o=Object.keys(e);for(var l=0;l<o.length;l++){var s=o[l];if(i.test(s)&&(e[s].annotations||[]).length){a.pushUnique(t._basePlotModules,r);a.pushUnique(t._subplots.gl3d,s)}}}},{"../../lib":164,"../../registry":258,"./attributes":38,"./convert":39,"./defaults":40,"./draw":41}],43:[function(e,t,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];r.defaultLine="#444";r.lightLine="#eee";r.background="#fff";r.borderLine="#BEC8D9";r.lightFraction=100*(14-4)/(15-4)},{}],44:[function(e,t,r){"use strict";var n=e("tinycolor2");var a=e("fast-isnumeric");var i=t.exports={};var o=e("./attributes");i.defaults=o.defaults;var l=i.defaultLine=o.defaultLine;i.lightLine=o.lightLine;var s=i.background=o.background;i.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};i.rgb=function(e){return i.tinyRGB(n(e))};i.opacity=function(e){return e?n(e).getAlpha():0};i.addOpacity=function(e,t){var r=n(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};i.combine=function(e,t){var r=n(e).toRgb();if(r.a===1)return n(e).toRgbString();var a=n(t||s).toRgb(),i=a.a===1?a:{r:255*(1-a.a)+a.r*a.a,g:255*(1-a.a)+a.g*a.a,b:255*(1-a.a)+a.b*a.a},o={r:i.r*(1-r.a)+r.r*r.a,g:i.g*(1-r.a)+r.g*r.a,b:i.b*(1-r.a)+r.b*r.a};return n(o).toRgbString()};i.contrast=function(e,t,r){var a=n(e);if(a.getAlpha()!==1)a=n(i.combine(e,s));var o=a.isDark()?t?a.lighten(t):s:r?a.darken(r):l;return o.toString()};i.stroke=function(e,t){var r=n(t);e.style({stroke:i.tinyRGB(r),"stroke-opacity":r.getAlpha()})};i.fill=function(e,t){var r=n(t);e.style({fill:i.tinyRGB(r),"fill-opacity":r.getAlpha()})};i.clean=function(e){if(!e||typeof e!=="object")return;var t=Object.keys(e),r,n,a,o;for(r=0;r<t.length;r++){a=t[r];o=e[a];if(a.substr(a.length-5)==="color"){if(Array.isArray(o)){for(n=0;n<o.length;n++)o[n]=u(o[n])}else e[a]=u(o)}else if(a.substr(a.length-10)==="colorscale"&&Array.isArray(o)){for(n=0;n<o.length;n++){if(Array.isArray(o[n]))o[n][1]=u(o[n][1])}}else if(Array.isArray(o)){var l=o[0];if(!Array.isArray(l)&&l&&typeof l==="object"){for(n=0;n<o.length;n++)i.clean(o[n])}}else if(o&&typeof o==="object")i.clean(o)}};function u(e){if(a(e)||typeof e!=="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var n=r[1].trim().split(/\s*[\s,]\s*/),i=t.charAt(3)==="a"&&n.length===4;if(!i&&n.length!==3)return e;for(var o=0;o<n.length;o++){if(!n[o].length)return e;n[o]=Number(n[o]);if(!(n[o]>=0))return e;if(o===3){if(n[o]>1)n[o]=1}else if(n[o]>=1)return e}var l=Math.round(n[0]*255)+", "+Math.round(n[1]*255)+", "+Math.round(n[2]*255);if(i)return"rgba("+l+", "+n[3]+")";return"rgb("+l+")"}},{"./attributes":43,"fast-isnumeric":11,tinycolor2:26}],45:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/layout_attributes");var a=e("../../plots/font_attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;t.exports=o({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:i({},n.ticks,{dflt:""}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:a({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,showexponent:n.showexponent,title:{valType:"string"},titlefont:a({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root")},{"../../lib/extend":156,"../../plot_api/edit_types":192,"../../plots/cartesian/layout_attributes":221,"../../plots/font_attributes":235}],46:[function(e,t,r){"use strict";var n=e("../colorscale");var a=e("./draw");t.exports=function e(t,r,i){if(typeof i==="function")return i(t,r);var o=r[0].trace;var l="cb"+o.uid;var s=i.container;var u=s?o[s]:o;t._fullLayout._infolayer.selectAll("."+l).remove();if(!u||!u.showscale)return;var c=u[i.min];var f=u[i.max];var d=r[0].t.cb=a(t,l);var p=n.makeColorScaleFunc(n.extractScale(u.colorscale,c,f),{noNumericCheck:true});d.fillcolor(p).filllevels({start:c,end:f,size:(f-c)/254}).options(u.colorbar)()}},{"../colorscale":59,"./draw":49}],47:[function(e,t,r){"use strict";t.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],48:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/tick_value_defaults");var o=e("../../plots/cartesian/tick_mark_defaults");var l=e("../../plots/cartesian/tick_label_defaults");var s=e("./attributes");t.exports=function e(t,r,u){var c=a.newContainer(r,"colorbar"),f=t.colorbar||{};function d(e,t){return n.coerce(f,c,s,e,t)}var p=d("thicknessmode");d("thickness",p==="fraction"?30/(u.width-u.margin.l-u.margin.r):30);var v=d("lenmode");d("len",v==="fraction"?1:u.height-u.margin.t-u.margin.b);d("x");d("xanchor");d("xpad");d("y");d("yanchor");d("ypad");n.noneOrAll(f,c,["x","y"]);d("outlinecolor");d("outlinewidth");d("bordercolor");d("borderwidth");d("bgcolor");i(f,c,d,"linear");var h={outerTicks:false,font:u.font};l(f,c,d,"linear",h);o(f,c,d,"linear",h);d("title",u._dfltTitle.colorbar);n.coerceFont(d,"titlefont",u.font);d("titleside")}},{"../../lib":164,"../../plot_api/plot_template":199,"../../plots/cartesian/tick_label_defaults":228,"../../plots/cartesian/tick_mark_defaults":229,"../../plots/cartesian/tick_value_defaults":230,"./attributes":45}],49:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../plots/cartesian/axes");var s=e("../dragelement");var u=e("../../lib");var c=e("../../lib/extend").extendFlat;var f=e("../../lib/setcursor");var d=e("../drawing");var p=e("../color");var v=e("../titles");var h=e("../../lib/svg_text_utils");var g=e("../../constants/alignment");var y=g.LINE_SPACING;var m=g.FROM_TL;var x=g.FROM_BR;var b=e("../../plots/cartesian/axis_defaults");var _=e("../../plots/cartesian/position_defaults");var w=e("../../plots/cartesian/layout_attributes");var k=e("./attributes");var M=e("./constants").cn;t.exports=function e(t,r){var g={};Object.keys(k).forEach(function(e){g[e]=null});g.fillcolor=null;g.line={color:null,width:null,dash:null};g.levels={start:null,end:null,size:null};g.filllevels=null;function A(){var e=t._fullLayout,k=e._size;if(typeof g.fillcolor!=="function"&&typeof g.line.color!=="function"){e._infolayer.selectAll("g."+r).remove();return}var L=n.extent((typeof g.fillcolor==="function"?g.fillcolor:g.line.color).domain());var S=[];var C=[];var P=typeof g.line.color==="function"?g.line.color:function(){return g.line.color};var z=typeof g.fillcolor==="function"?g.fillcolor:function(){return g.fillcolor};var O;var D;var E=g.levels.end+g.levels.size/100,R=g.levels.size,I=1.001*L[0]-.001*L[1],N=1.001*L[1]-.001*L[0];for(D=0;D<1e5;D++){O=g.levels.start+D*R;if(R>0?O>=E:O<=E)break;if(O>I&&O<N)S.push(O)}if(typeof g.fillcolor==="function"){if(g.filllevels){E=g.filllevels.end+g.filllevels.size/100;R=g.filllevels.size;for(D=0;D<1e5;D++){O=g.filllevels.start+D*R;if(R>0?O>=E:O<=E)break;if(O>L[0]&&O<L[1])C.push(O)}}else{C=S.map(function(e){return e-g.levels.size/2});C.push(C[C.length-1]+g.levels.size)}}else if(g.fillcolor&&typeof g.fillcolor==="string"){C=[0]}if(g.levels.size<0){S.reverse();C.reverse()}var F=k.h,j=k.w,B=Math.round(g.thickness*(g.thicknessmode==="fraction"?j:1)),q=B/k.w,H=Math.round(g.len*(g.lenmode==="fraction"?F:1)),U=H/k.h,V=g.xpad/k.w,G=(g.borderwidth+g.outlinewidth)/2,Y=g.ypad/k.h,Z=Math.round(g.x*k.w+g.xpad),X=g.x-q*({middle:.5,right:1}[g.xanchor]||0),W=g.y+U*(({top:-.5,bottom:.5}[g.yanchor]||0)-.5),J=Math.round(k.h*(1-W)),Q=J-H,$,K={type:"linear",range:L,tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,exponentformat:g.exponentformat,separatethousands:g.separatethousands,showexponent:g.showexponent,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,title:g.title,titlefont:g.titlefont,showline:true,anchor:"free",position:1},ee={type:"linear",_id:"y"+r},te={letter:"y",font:e.font,noHover:true,calendar:e.calendar};function re(e,t){return u.coerce(K,ee,w,e,t)}b(K,ee,re,te,e);_(K,ee,re,te);ee.position=g.x+V+q;A.axis=ee;if(["top","bottom"].indexOf(g.titleside)!==-1){ee.titleside=g.titleside;ee.titlex=g.x+V;ee.titley=W+(g.titleside==="top"?U-Y:Y)}if(g.line.color&&g.tickmode==="auto"){ee.tickmode="linear";ee.tick0=g.levels.start;var ne=g.levels.size;var ae=u.constrain((J-Q)/50,4,15)+1,ie=(L[1]-L[0])/((g.nticks||ae)*ne);if(ie>1){var oe=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));ne*=oe*u.roundUp(ie/oe,[2,5,10]);if((Math.abs(g.levels.start)/g.levels.size+1e-6)%1<2e-6){ee.tick0=0}}ee.dtick=ne}ee.domain=[W+Y,W+U-Y];ee.setScale();var le=u.ensureSingle(e._infolayer,"g",r,function(e){e.classed(M.colorbar,true).each(function(){var e=n.select(this);e.append("rect").classed(M.cbbg,true);e.append("g").classed(M.cbfills,true);e.append("g").classed(M.cblines,true);e.append("g").classed(M.cbaxis,true).classed(M.crisp,true);e.append("g").classed(M.cbtitleunshift,true).append("g").classed(M.cbtitle,true);e.append("rect").classed(M.cboutline,true);e.select(".cbtitle").datum(0)})});le.attr("transform","translate("+Math.round(k.l)+","+Math.round(k.t)+")");var se=le.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(k.l)+",-"+Math.round(k.t)+")");ee._axislayer=le.select(".cbaxis");var ue=0;if(["top","bottom"].indexOf(g.titleside)!==-1){var ce=k.l+(g.x+V)*k.w,fe=ee.titlefont.size,de;if(g.titleside==="top"){de=(1-(W+U-Y))*k.h+k.t+3+fe*.75}else{de=(1-(W+Y))*k.h+k.t-3-fe*.25}ve(ee._id+"title",{attributes:{x:ce,y:de,"text-anchor":"start"}})}function pe(){if(["top","bottom"].indexOf(g.titleside)!==-1){var r=le.select(".cbtitle"),i=r.select("text"),o=[-g.outlinewidth/2,g.outlinewidth/2],s=r.select(".h"+ee._id+"title-math-group").node(),c=15.6;if(i.node()){c=parseInt(i.node().style.fontSize,10)*y}if(s){ue=d.bBox(s).height;if(ue>c){o[1]-=(ue-c)/2}}else if(i.node()&&!i.classed(M.jsPlaceholder)){ue=d.bBox(i.node()).height}if(ue){ue+=5;if(g.titleside==="top"){ee.domain[1]-=ue/k.h;o[1]*=-1}else{ee.domain[0]+=ue/k.h;var f=h.lineCount(i);o[1]+=(1-f)*c}r.attr("transform","translate("+o+")");ee.setScale()}}le.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(k.h*(1-ee.domain[1]))+")");ee._axislayer.attr("transform","translate(0,"+Math.round(-k.t)+")");var p=le.select(".cbfills").selectAll("rect.cbfill").data(C);p.enter().append("rect").classed(M.cbfill,true).style("stroke","none");p.exit().remove();p.each(function(e,t){var r=[t===0?L[0]:(C[t]+C[t-1])/2,t===C.length-1?L[1]:(C[t]+C[t+1])/2].map(ee.c2p).map(Math.round);if(t!==C.length-1){r[1]+=r[1]>r[0]?1:-1}var i=z(e).replace("e-",""),o=a(i).toHexString();n.select(this).attr({x:Z,width:Math.max(B,2),y:n.min(r),height:Math.max(n.max(r)-n.min(r),2),fill:o})});var v=le.select(".cblines").selectAll("path.cbline").data(g.line.color&&g.line.width?S:[]);v.enter().append("path").classed(M.cbline,true);v.exit().remove();v.each(function(e){n.select(this).attr("d","M"+Z+","+(Math.round(ee.c2p(e))+g.line.width/2%1)+"h"+B).call(d.lineGroupStyle,g.line.width,P(e),g.line.dash)});ee._axislayer.selectAll("g."+ee._id+"tick,path").remove();ee._pos=Z+B+(g.outlinewidth||0)/2-(g.ticks==="outside"?1:0);ee.side="right";return u.syncOrAsync([function(){return l.doTicksSingle(t,ee,true)},function(){if(["top","bottom"].indexOf(g.titleside)===-1){var r=ee.titlefont.size,a=ee._offset+ee._length/2,i=k.l+(ee.position||0)*k.w+(ee.side==="right"?10+r*(ee.showticklabels?1:.5):-10-r*(ee.showticklabels?.5:0));ve("h"+ee._id+"title",{avoid:{selection:n.select(t).selectAll("g."+ee._id+"tick"),side:g.titleside,offsetLeft:k.l,offsetTop:0,maxShift:e.width},attributes:{x:i,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function ve(r,n){var a=T();var i="colorbar.title";var o=a._module.colorbar.container;if(o)i=o+"."+i;var l={propContainer:ee,propName:i,traceIndex:a.index,placeholder:e._dfltTitle.colorbar,containerGroup:le.select(".cbtitle")};var s=r.charAt(0)==="h"?r.substr(1):"h"+r;le.selectAll("."+s+",."+s+"-math-group").remove();v.draw(t,r,c(l,n||{}))}function he(){var e=B+g.outlinewidth/2+d.bBox(ee._axislayer.node()).width;$=se.select("text");if($.node()&&!$.classed(M.jsPlaceholder)){var n=se.select(".h"+ee._id+"title-math-group").node(),a;if(n&&["top","bottom"].indexOf(g.titleside)!==-1){a=d.bBox(n).width}else{a=d.bBox(se.node()).right-Z-k.l}e=Math.max(e,a)}var o=2*g.xpad+e+g.borderwidth+g.outlinewidth/2,l=J-Q;le.select(".cbbg").attr({x:Z-g.xpad-(g.borderwidth+g.outlinewidth)/2,y:Q-G,width:Math.max(o,2),height:Math.max(l+2*G,2)}).call(p.fill,g.bgcolor).call(p.stroke,g.bordercolor).style({"stroke-width":g.borderwidth});le.selectAll(".cboutline").attr({x:Z,y:Q+g.ypad+(g.titleside==="top"?ue:0),width:Math.max(B,2),height:Math.max(l-2*g.ypad-ue,2)}).call(p.stroke,g.outlinecolor).style({fill:"None","stroke-width":g.outlinewidth});var s=({center:.5,right:1}[g.xanchor]||0)*o;le.attr("transform","translate("+(k.l-s)+","+k.t+")");var u={};var c=m[g.yanchor];var f=x[g.yanchor];if(g.lenmode==="pixels"){u.y=g.y;u.t=l*c;u.b=l*f}else{u.t=u.b=0;u.yt=g.y+g.len*c;u.yb=g.y-g.len*f}var v=m[g.xanchor];var h=x[g.xanchor];if(g.thicknessmode==="pixels"){u.x=g.x;u.l=o*v;u.r=o*h}else{var y=o-B;u.l=y*v;u.r=y*h;u.xl=g.x-g.thickness*v;u.xr=g.x+g.thickness*h}i.autoMargin(t,r,u)}var ge=u.syncOrAsync([i.previousPromises,pe,i.previousPromises,he],t);if(ge&&ge.then)(t._promises||[]).push(ge);if(t._context.edits.colorbarPosition){var ye,me,xe;s.init({element:le.node(),gd:t,prepFn:function(){ye=le.attr("transform");f(le)},moveFn:function(e,t){le.attr("transform",ye+" "+"translate("+e+","+t+")");me=s.align(X+e/k.w,q,0,1,g.xanchor);xe=s.align(W-t/k.h,U,0,1,g.yanchor);var r=s.getCursor(me,xe,g.xanchor,g.yanchor);f(le,r)},doneFn:function(){f(le);if(me!==undefined&&xe!==undefined){o.call("restyle",t,{"colorbar.x":me,"colorbar.y":xe},T().index)}}})}return ge}function T(){var e=r.substr(2),n,a;for(n=0;n<t._fullData.length;n++){a=t._fullData[n];if(a.uid===e)return a}}Object.keys(g).forEach(function(e){A[e]=function(t){if(!arguments.length)return g[e];g[e]=u.isPlainObject(g[e])?u.extendFlat(g[e],t):t;return A}});A.options=function(e){Object.keys(e).forEach(function(t){if(typeof A[t]==="function"){A[t](e[t])}});return A};A._opts=g;return A}},{"../../constants/alignment":142,"../../lib":164,"../../lib/extend":156,"../../lib/setcursor":183,"../../lib/svg_text_utils":185,"../../plots/cartesian/axes":209,"../../plots/cartesian/axis_defaults":211,"../../plots/cartesian/layout_attributes":221,"../../plots/cartesian/position_defaults":224,"../../plots/plots":249,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"../titles":135,"./attributes":45,"./constants":47,d3:8,tinycolor2:26}],50:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t){return n.isPlainObject(t.colorbar)}},{"../../lib":164}],51:[function(e,t,r){"use strict";var n=e("./scales.js");var a=Object.keys(n);function i(e){return"`"+e+"`"}t.exports=function e(t,r){t=t||"";r=r||{};var a=r.cLetter||"c";var o="onlyIfNumerical"in r?r.onlyIfNumerical:Boolean(t);var l="noScale"in r?r.noScale:t==="marker.line";var s="showScaleDflt"in r?r.showScaleDflt:a==="z";var u=typeof r.colorscaleDflt==="string"?n[r.colorscaleDflt]:null;var c=r.editTypeOverride||"";var f=t?t+".":"";var d,p;if("colorAttr"in r){d=r.colorAttr;p=r.colorAttr}else{d={z:"z",c:"color"}[a];p="in "+i(f+d)}var v=o?" Has an effect only if "+p+"is set to a numerical array.":"";var h=a+"auto";var g=a+"min";var y=a+"max";var m=i(f+g);var x=i(f+y);var b=m+" and "+x;var _={};_[g]=_[y]=undefined;var w={};w[h]=false;var k={};if(d==="color"){k.color={valType:"color",arrayOk:true,editType:c||"style"}}k[h]={valType:"boolean",dflt:true,editType:"calc",impliedEdits:_};k[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:w};k[y]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:w};k.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:false}};k.autocolorscale={valType:"boolean",dflt:r.autoColorDflt===false?false:true,editType:"calc",impliedEdits:{colorscale:undefined}};k.reversescale={valType:"boolean",dflt:false,editType:"calc"};if(!l){k.showscale={valType:"boolean",dflt:s,editType:"calc"}}return k}},{"./scales.js":63}],52:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./scales");var i=e("./flip_scale");t.exports=function e(t,r,o,l){var s=t;var u=t._input;var c=t._fullInput;var f=t.updateStyle;function d(e,r,n){if(n===undefined)n=r;if(f){f(t._input,o?o+"."+e:e,r)}else{u[e]=r}s[e]=n;if(c&&t!==t._fullInput){if(f){f(t._fullInput,o?o+"."+e:e,n)}else{c[e]=n}}}if(o){s=n.nestedProperty(s,o).get();u=n.nestedProperty(u,o).get();c=n.nestedProperty(c,o).get()||{}}var p=l+"auto";var v=l+"min";var h=l+"max";var g=s[p];var y=s[v];var m=s[h];var x=s.colorscale;if(g!==false||y===undefined){y=n.aggNums(Math.min,null,r)}if(g!==false||m===undefined){m=n.aggNums(Math.max,null,r)}if(y===m){y-=.5;m+=.5}d(v,y);d(h,m);d(p,g!==false||y===undefined&&m===undefined);if(s.autocolorscale){if(y*m<0)x=a.RdBu;else if(y>=0)x=a.Reds;else x=a.Blues;d("colorscale",x,s.reversescale?i(x):x);if(!u.autocolorscale){d("autocolorscale",false)}}}},{"../../lib":164,"./flip_scale":56,"./scales":63}],53:[function(e,t,r){"use strict";var n=e("./scales");t.exports=n.RdBu},{"./scales":63}],54:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../colorbar/has_colorbar");var o=e("../colorbar/defaults");var l=e("./is_valid_scale");var s=e("./flip_scale");t.exports=function e(t,r,u,c,f){var d=f.prefix,p=f.cLetter,v=d.slice(0,d.length-1),h=d?a.nestedProperty(t,v).get()||{}:t,g=d?a.nestedProperty(r,v).get()||{}:r,y=h[p+"min"],m=h[p+"max"],x=h.colorscale;var b=n(y)&&n(m)&&y<m;c(d+p+"auto",!b);c(d+p+"min");c(d+p+"max");var _;if(x!==undefined)_=!l(x);c(d+"autocolorscale",_);var w=c(d+"colorscale");var k=c(d+"reversescale");if(k)g.colorscale=s(w);if(d==="marker.line.")return;var M;if(d)M=i(h);var A=c(d+"showscale",M);if(A)o(h,g,u)}},{"../../lib":164,"../colorbar/defaults":48,"../colorbar/has_colorbar":50,"./flip_scale":56,"./is_valid_scale":60,"fast-isnumeric":11}],55:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=t.length,i=new Array(a),o=new Array(a);for(var l=0;l<a;l++){var s=t[l];i[l]=r+s[0]*(n-r);o[l]=s[1]}return{domain:i,range:o}}},{}],56:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.length,n=new Array(r),a;for(var i=r-1,o=0;i>=0;i--,o++){a=t[i];n[o]=[1-a[0],a[1]]}return n}},{}],57:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./default_scale");var i=e("./is_valid_scale_array");t.exports=function e(t,r){if(!r)r=a;if(!t)return r;function o(){try{t=n[t]||JSON.parse(t)}catch(e){t=r}}if(typeof t==="string"){o();if(typeof t==="string")o()}if(!i(t))return r;return t}},{"./default_scale":53,"./is_valid_scale_array":61,"./scales":63}],58:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("./is_valid_scale");t.exports=function e(t,r){var o=r?a.nestedProperty(t,r).get()||{}:t;var l=o.color;var s=false;if(a.isArrayOrTypedArray(l)){for(var u=0;u<l.length;u++){if(n(l[u])){s=true;break}}}return a.isPlainObject(o)&&(s||o.showscale===true||n(o.cmin)&&n(o.cmax)||i(o.colorscale)||a.isPlainObject(o.colorbar))}},{"../../lib":164,"./is_valid_scale":60,"fast-isnumeric":11}],59:[function(e,t,r){"use strict";r.scales=e("./scales");r.defaultScale=e("./default_scale");r.attributes=e("./attributes");r.handleDefaults=e("./defaults");r.calc=e("./calc");r.hasColorscale=e("./has_colorscale");r.isValidScale=e("./is_valid_scale");r.getScale=e("./get_scale");r.flipScale=e("./flip_scale");r.extractScale=e("./extract_scale");r.makeColorScaleFunc=e("./make_color_scale_func")},{"./attributes":51,"./calc":52,"./default_scale":53,"./defaults":54,"./extract_scale":55,"./flip_scale":56,"./get_scale":57,"./has_colorscale":58,"./is_valid_scale":60,"./make_color_scale_func":62,"./scales":63}],60:[function(e,t,r){"use strict";var n=e("./scales");var a=e("./is_valid_scale_array");t.exports=function e(t){if(n[t]!==undefined)return true;else return a(t)}},{"./is_valid_scale_array":61,"./scales":63}],61:[function(e,t,r){"use strict";var n=e("tinycolor2");t.exports=function e(t){var r=0;if(!Array.isArray(t)||t.length<2)return false;if(!t[0]||!t[t.length-1])return false;if(+t[0][0]!==0||+t[t.length-1][0]!==1)return false;for(var a=0;a<t.length;a++){var i=t[a];if(i.length!==2||+i[0]<r||!n(i[1]).isValid()){return false}r=+i[0]}return true}},{tinycolor2:26}],62:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("fast-isnumeric");var o=e("../color");t.exports=function e(t,r){r=r||{};var s=t.domain,u=t.range,c=u.length,f=new Array(c);for(var d=0;d<c;d++){var p=a(u[d]).toRgb();f[d]=[p.r,p.g,p.b,p.a]}var v=n.scale.linear().domain(s).range(f).clamp(true);var h=r.noNumericCheck,g=r.returnArray,y;if(h&&g){y=v}else if(h){y=function(e){return l(v(e))}}else if(g){y=function(e){if(i(e))return v(e);else if(a(e).isValid())return e;else return o.defaultLine}}else{y=function(e){if(i(e))return l(v(e));else if(a(e).isValid())return e;else return o.defaultLine}}y.domain=v.domain;y.range=function(){return u};return y};function l(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return a(t).toRgbString()}},{"../color":44,d3:8,"fast-isnumeric":11,tinycolor2:26}],63:[function(e,t,r){"use strict";t.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]}},{}],64:[function(e,t,r){"use strict";t.exports=function e(t,r,n,a,i){var o=(t-n)/(a-n),l=o+r/(a-n),s=(o+l)/2;if(i==="left"||i==="bottom")return o;if(i==="center"||i==="middle")return s;if(i==="right"||i==="top")return l;if(o<2/3-s)return o;if(l>4/3-s)return l;return s}},{}],65:[function(e,t,r){"use strict";var n=e("../../lib");var a=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];t.exports=function e(t,r,i,o){if(i==="left")t=0;else if(i==="center")t=1;else if(i==="right")t=2;else t=n.constrain(Math.floor(t*3),0,2);if(o==="bottom")r=0;else if(o==="middle")r=1;else if(o==="top")r=2;else r=n.constrain(Math.floor(r*3),0,2);return a[r][t]}},{"../../lib":164}],66:[function(e,t,r){"use strict";var n=e("mouse-event-offset");var a=e("has-hover");var i=e("has-passive-events");var o=e("../../registry");var l=e("../../lib");var s=e("../../plots/cartesian/constants");var u=e("../../constants/interactions");var c=t.exports={};c.align=e("./align");c.getCursor=e("./cursor");var f=e("./unhover");c.unhover=f.wrapped;c.unhoverRaw=f.raw;c.init=function e(t){var r=t.gd;var n=1;var o=u.DBLCLICKDELAY;var f=t.element;var h,g,y,m,x,b,_,w;if(!r._mouseDownTime)r._mouseDownTime=0;f.style.pointerEvents="all";f.onmousedown=A;if(!i){f.ontouchstart=A}else{if(f._ontouchstart){f.removeEventListener("touchstart",f._ontouchstart)}f._ontouchstart=A;f.addEventListener("touchstart",A,{passive:false})}function k(e,t,r){if(Math.abs(e)<r)e=0;if(Math.abs(t)<r)t=0;return[e,t]}var M=t.clampFn||k;function A(e){e.preventDefault();r._dragged=false;r._dragging=true;var i=v(e);h=i[0];g=i[1];_=e.target;b=e;w=e.buttons===2||e.ctrlKey;y=(new Date).getTime();if(y-r._mouseDownTime<o){n+=1}else{n=1;r._mouseDownTime=y}if(t.prepFn)t.prepFn(e,h,g);if(a&&!w){x=d();x.style.cursor=window.getComputedStyle(f).cursor}else if(!a){x=document;m=window.getComputedStyle(document.documentElement).cursor;document.documentElement.style.cursor=window.getComputedStyle(f).cursor}document.addEventListener("mousemove",T);document.addEventListener("mouseup",L);document.addEventListener("touchmove",T);document.addEventListener("touchend",L);return}function T(e){e.preventDefault();var n=v(e);var a=t.minDrag||s.MINDRAG;var i=M(n[0]-h,n[1]-g,a);var o=i[0];var l=i[1];if(o||l){r._dragged=true;c.unhover(r)}if(r._dragged&&t.moveFn&&!w)t.moveFn(o,l);return}function L(e){document.removeEventListener("mousemove",T);document.removeEventListener("mouseup",L);document.removeEventListener("touchmove",T);document.removeEventListener("touchend",L);e.preventDefault();if(a){l.removeElement(x)}else if(m){x.documentElement.style.cursor=m;m=null}if(!r._dragging){r._dragged=false;return}r._dragging=false;if((new Date).getTime()-r._mouseDownTime>o){n=Math.max(n-1,1)}if(r._dragged){if(t.doneFn)t.doneFn()}else{if(t.clickFn)t.clickFn(n,b);if(!w){var i;try{i=new MouseEvent("click",e)}catch(t){var s=v(e);i=document.createEvent("MouseEvents");i.initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,s[0],s[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}_.dispatchEvent(i)}}p(r);r._dragged=false;return}};function d(){var e=document.createElement("div");e.className="dragcover";var t=e.style;t.position="fixed";t.left=0;t.right=0;t.top=0;t.bottom=0;t.zIndex=999999999;t.background="none";document.body.appendChild(e);return e}c.coverSlip=d;function p(e){e._dragging=false;if(e._replotPending)o.call("plot",e)}function v(e){return n(e.changedTouches?e.changedTouches[0]:e,document.body)}},{"../../constants/interactions":143,"../../lib":164,"../../plots/cartesian/constants":214,"../../registry":258,"./align":64,"./cursor":65,"./unhover":67,"has-hover":13,"has-passive-events":14,"mouse-event-offset":16}],67:[function(e,t,r){"use strict";var n=e("../../lib/events");var a=e("../../lib/throttle");var i=e("../../lib/get_graph_div");var o=e("../fx/constants");var l=t.exports={};l.wrapped=function(e,t,r){e=i(e);if(e._fullLayout){a.clear(e._fullLayout._uid+o.HOVERID)}l.raw(e,t,r)};l.raw=function e(t,r){var a=t._fullLayout;var i=t._hoverdata;if(!r)r={};if(r.target&&n.triggerHandler(t,"plotly_beforehover",r)===false){return}a._hoverlayer.selectAll("g").remove();a._hoverlayer.selectAll("line").remove();a._hoverlayer.selectAll("circle").remove();t._hoverdata=undefined;if(r.target&&i){t.emit("plotly_unhover",{event:r,points:i})}}},{"../../lib/events":155,"../../lib/get_graph_div":162,"../../lib/throttle":186,"../fx/constants":81}],68:[function(e,t,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],69:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../registry");var l=e("../color");var s=e("../colorscale");var u=e("../../lib");var c=e("../../lib/svg_text_utils");var f=e("../../constants/xmlns_namespaces");var d=e("../../constants/alignment");var p=d.LINE_SPACING;var v=e("../../constants/interactions").DESELECTDIM;var h=e("../../traces/scatter/subtypes");var g=e("../../traces/scatter/make_bubble_size_func");var y=t.exports={};y.font=function(e,t,r,n){if(u.isPlainObject(t)){n=t.color;r=t.size;t=t.family}if(t)e.style("font-family",t);if(r+1)e.style("font-size",r+"px");if(n)e.call(l.fill,n)};y.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};y.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};y.setRect=function(e,t,r,n,a){e.call(y.setPosition,t,r).call(y.setSize,n,a)};y.translatePoint=function(e,t,r,n){var i=r.c2p(e.x);var o=n.c2p(e.y);if(a(i)&&a(o)&&t.node()){if(t.node().nodeName==="text"){t.attr("x",i).attr("y",o)}else{t.attr("transform","translate("+i+","+o+")")}}else{return false}return true};y.translatePoints=function(e,t,r){e.each(function(e){var a=n.select(this);y.translatePoint(e,a,t,r)})};y.hideOutsideRangePoint=function(e,t,r,n,a,i){t.attr("display",r.isPtWithinRange(e,a)&&n.isPtWithinRange(e,i)?null:"none")};y.hideOutsideRangePoints=function(e,t){if(!t._hasClipOnAxisFalse)return;var r=t.xaxis;var a=t.yaxis;e.each(function(t){var i=t[0].trace;var o=i.xcalendar;var l=i.ycalendar;var s=i.type==="bar"?".bartext":".point,.textpoint";e.selectAll(s).each(function(e){y.hideOutsideRangePoint(e,n.select(this),r,a,o,l)})})};y.crispRound=function(e,t,r){if(!t||!a(t))return r||0;if(e._context.staticPlot)return t;if(t<1)return 1;return Math.round(t)};y.singleLineStyle=function(e,t,r,n,a){t.style("fill","none");var i=(((e||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,s=a||i.dash||"";l.stroke(t,n||i.color);y.dashLine(t,s,o)};y.lineGroupStyle=function(e,t,r,a){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=t||i.width||0,s=a||i.dash||"";n.select(this).call(l.stroke,r||i.color).call(y.dashLine,s,o)})};y.dashLine=function(e,t,r){r=+r||0;t=y.dashStyle(t,r);e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};y.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);if(e==="solid")e="";else if(e==="dot")e=r+"px,"+r+"px";else if(e==="dash")e=3*r+"px,"+3*r+"px";else if(e==="longdash")e=5*r+"px,"+5*r+"px";else if(e==="dashdot"){e=3*r+"px,"+r+"px,"+r+"px,"+r+"px"}else if(e==="longdashdot"){e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"}return e};y.singleFillStyle=function(e){var t=n.select(e.node());var r=t.data();var a=(((r[0]||[])[0]||{}).trace||{}).fillcolor;if(a){e.call(l.fill,a)}};y.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var r=n.select(this);try{r.call(l.fill,t[0].trace.fillcolor)}catch(t){u.error(t,e);r.remove()}})};var m=e("./symbol_defs");y.symbolNames=[];y.symbolFuncs=[];y.symbolNeedLines={};y.symbolNoDot={};y.symbolNoFill={};y.symbolList=[];Object.keys(m).forEach(function(e){var t=m[e];y.symbolList=y.symbolList.concat([t.n,e,t.n+100,e+"-open"]);y.symbolNames[t.n]=e;y.symbolFuncs[t.n]=t.f;if(t.needLine){y.symbolNeedLines[t.n]=true}if(t.noDot){y.symbolNoDot[t.n]=true}else{y.symbolList=y.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"])}if(t.noFill){y.symbolNoFill[t.n]=true}});var x=y.symbolNames.length,b="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";y.symbolNumber=function(e){if(typeof e==="string"){var t=0;if(e.indexOf("-open")>0){t=100;e=e.replace("-open","")}if(e.indexOf("-dot")>0){t+=200;e=e.replace("-dot","")}e=y.symbolNames.indexOf(e);if(e>=0){e+=t}}if(e%100>=x||e>=400){return 0}return Math.floor(Math.max(e,0))};function _(e,t){var r=e%100;return y.symbolFuncs[r](t)+(e>=200?b:"")}var w={x1:1,x2:0,y1:0,y2:0};var k={x1:0,x2:0,y1:1,y2:0};y.gradient=function(e,t,r,a,o,s){var c=t._fullLayout._defs.select(".gradients").selectAll("#"+r).data([a+o+s],u.identity);c.exit().remove();c.enter().append(a==="radial"?"radialGradient":"linearGradient").each(function(){var e=n.select(this);if(a==="horizontal")e.attr(w);else if(a==="vertical")e.attr(k);e.attr("id",r);var t=i(o);var u=i(s);e.append("stop").attr({offset:"0%","stop-color":l.tinyRGB(u),"stop-opacity":u.getAlpha()});e.append("stop").attr({offset:"100%","stop-color":l.tinyRGB(t),"stop-opacity":t.getAlpha()})});e.style({fill:"url(#"+r+")","fill-opacity":null})};y.initGradients=function(e){var t=u.ensureSingle(e._fullLayout._defs,"g","gradients");t.selectAll("linearGradient,radialGradient").remove()};y.pointStyle=function(e,t,r){if(!e.size())return;var a=y.makePointStyleFns(t);e.each(function(e){y.singlePointStyle(e,n.select(this),t,a,r)})};y.singlePointStyle=function(e,t,r,n,a){var i=r.marker;var o=i.line;t.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(e):e.mo===undefined?i.opacity:e.mo);if(n.ms2mrc){var s;if(e.ms==="various"||i.size==="various"){s=3}else{s=n.ms2mrc(e.ms)}e.mrc=s;if(n.selectedSizeFn){s=e.mrc=n.selectedSizeFn(e)}var c=y.symbolNumber(e.mx||i.symbol)||0;e.om=c%200>=100;t.attr("d",_(c,s))}var f=false;var d,p,v;if(e.so){v=o.outlierwidth;p=o.outliercolor;d=i.outliercolor}else{var h=(o||{}).width;v=(e.mlw+1||h+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0;if("mlc"in e)p=e.mlcc=n.lineScale(e.mlc);else if(u.isArrayOrTypedArray(o.color))p=l.defaultLine;else p=o.color;if(u.isArrayOrTypedArray(i.color)){d=l.defaultLine;f=true}if("mc"in e){d=e.mcc=n.markerScale(e.mc)}else{d=i.color||"rgba(0,0,0,0)"}if(n.selectedColorFn){d=n.selectedColorFn(e)}}if(e.om){t.call(l.stroke,d).style({"stroke-width":(v||1)+"px",fill:"none"})}else{t.style("stroke-width",v+"px");var g=i.gradient;var m=e.mgt;if(m)f=true;else m=g&&g.type;if(m&&m!=="none"){var x=e.mgc;if(x)f=true;else x=g.color;var b="g"+a._fullLayout._uid+"-"+r.uid;if(f)b+="-"+e.i;t.call(y.gradient,a,b,m,d,x)}else{t.call(l.fill,d)}if(v){t.call(l.stroke,p)}}};y.makePointStyleFns=function(e){var t={};var r=e.marker;t.markerScale=y.tryColorscale(r,"");t.lineScale=y.tryColorscale(r,"line");if(o.traceIs(e,"symbols")){t.ms2mrc=h.isBubble(e)?g(e):function(){return(r.size||6)/2}}if(e.selectedpoints){u.extendFlat(t,y.makeSelectedPointStyleFns(e))}return t};y.makeSelectedPointStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.marker||{};var i=r.marker||{};var l=n.marker||{};var s=a.opacity;var c=i.opacity;var f=l.opacity;var d=c!==undefined;var p=f!==undefined;if(u.isArrayOrTypedArray(s)||d||p){t.selectedOpacityFn=function(e){var t=e.mo===undefined?a.opacity:e.mo;if(e.selected){return d?c:t}else{return p?f:v*t}}}var h=a.color;var g=i.color;var y=l.color;if(g||y){t.selectedColorFn=function(e){var t=e.mcc||h;if(e.selected){return g||t}else{return y||t}}}var m=a.size;var x=i.size;var b=l.size;var _=x!==undefined;var w=b!==undefined;if(o.traceIs(e,"symbols")&&(_||w)){t.selectedSizeFn=function(e){var t=e.mrc||m/2;if(e.selected){return _?x/2:t}else{return w?b/2:t}}}return t};y.makeSelectedTextStyleFns=function(e){var t={};var r=e.selected||{};var n=e.unselected||{};var a=e.textfont||{};var i=r.textfont||{};var o=n.textfont||{};var s=a.color;var u=i.color;var c=o.color;t.selectedTextColorFn=function(e){var t=e.tc||s;if(e.selected){return u||t}else{if(c)return c;else return u?t:l.addOpacity(t,v)}};return t};y.selectedPointStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=y.makeSelectedPointStyleFns(t);var a=t.marker||{};var i=[];if(r.selectedOpacityFn){i.push(function(e,t){e.style("opacity",r.selectedOpacityFn(t))})}if(r.selectedColorFn){i.push(function(e,t){l.fill(e,r.selectedColorFn(t))})}if(r.selectedSizeFn){i.push(function(e,t){var n=t.mx||a.symbol||0;var i=r.selectedSizeFn(t);e.attr("d",_(y.symbolNumber(n),i));t.mrc2=i})}if(i.length){e.each(function(e){var t=n.select(this);for(var r=0;r<i.length;r++){i[r](t,e)}})}};y.tryColorscale=function(e,t){var r=t?u.nestedProperty(e,t).get():e;if(r){var n=r.colorscale;var a=r.color;if(n&&u.isArrayOrTypedArray(a)){return s.makeColorScaleFunc(s.extractScale(n,r.cmin,r.cmax))}}return u.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function A(e,t,r,a){var i=n.select(e.node().parentNode);var o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle";var l=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle";var s=a?a/.8+1:0;var u=(c.lineCount(e)-1)*p+1;var f=M[l]*s;var d=r*.75+M[o]*s+(M[o]-1)*u*r/2;e.attr("text-anchor",l);i.attr("transform","translate("+f+","+d+")")}function T(e,t){var r=e.ts||t.textfont.size;return a(r)&&r>0?r:0}y.textPointStyle=function(e,t,r){if(!e.size())return;var a;if(t.selectedpoints){var i=y.makeSelectedTextStyleFns(t);a=i.selectedTextColorFn}e.each(function(e){var i=n.select(this);var o=u.extractOption(e,t,"tx","text");if(!o&&o!==0){i.remove();return}var l=e.tp||t.textposition;var s=T(e,t);var f=a?a(e):e.tc||t.textfont.color;i.call(y.font,e.tf||t.textfont.family,s,f).text(o).call(c.convertToTspans,r).call(A,l,s,e.mrc)})};y.selectedTextStyle=function(e,t){if(!e.size()||!t.selectedpoints)return;var r=y.makeSelectedTextStyleFns(t);e.each(function(e){var a=n.select(this);var i=r.selectedTextColorFn(e);var o=e.tp||t.textposition;var s=T(e,t);l.fill(a,i);A(a,o,s,e.mrc2||e.mrc)})};var L=.5;y.smoothopen=function(e,t){if(e.length<3){return"M"+e.join("L")}var r="M"+e[0],n=[],a;for(a=1;a<e.length-1;a++){n.push(S(e[a-1],e[a],e[a+1],t))}r+="Q"+n[0][0]+" "+e[1];for(a=2;a<e.length-1;a++){r+="C"+n[a-2][1]+" "+n[a-1][0]+" "+e[a]}r+="Q"+n[e.length-3][1]+" "+e[e.length-1];return r};y.smoothclosed=function(e,t){if(e.length<3){return"M"+e.join("L")+"Z"}var r="M"+e[0],n=e.length-1,a=[S(e[n],e[0],e[1],t)],i;for(i=1;i<n;i++){a.push(S(e[i-1],e[i],e[i+1],t))}a.push(S(e[n-1],e[n],e[0],t));for(i=1;i<=n;i++){r+="C"+a[i-1][1]+" "+a[i][0]+" "+e[i]}r+="C"+a[n][1]+" "+a[0][0]+" "+e[0]+"Z";return r};function S(e,t,r,a){var i=e[0]-t[0],o=e[1]-t[1],l=r[0]-t[0],s=r[1]-t[1],u=Math.pow(i*i+o*o,L/2),c=Math.pow(l*l+s*s,L/2),f=(c*c*i-u*u*l)*a,d=(c*c*o-u*u*s)*a,p=3*c*(u+c),v=3*u*(u+c);return[[n.round(t[0]+(p&&f/p),2),n.round(t[1]+(p&&d/p),2)],[n.round(t[0]-(v&&f/v),2),n.round(t[1]-(v&&d/v),2)]]}var C={hv:function(e,t){return"H"+n.round(t[0],2)+"V"+n.round(t[1],2)},vh:function(e,t){return"V"+n.round(t[1],2)+"H"+n.round(t[0],2)},hvh:function(e,t){return"H"+n.round((e[0]+t[0])/2,2)+"V"+n.round(t[1],2)+"H"+n.round(t[0],2)},vhv:function(e,t){return"V"+n.round((e[1]+t[1])/2,2)+"H"+n.round(t[0],2)+"V"+n.round(t[1],2)}};var P=function(e,t){return"L"+n.round(t[0],2)+","+n.round(t[1],2)};y.steps=function(e){var t=C[e]||P;return function(e){var r="M"+n.round(e[0][0],2)+","+n.round(e[0][1],2);for(var a=1;a<e.length;a++){r+=t(e[a-1],e[a])}return r}};y.makeTester=function(){var e=u.ensureSingleById(n.select("body"),"svg","js-plotly-tester",function(e){e.attr(f.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})});var t=u.ensureSingle(e,"path","js-reference-point",function(e){e.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});y.tester=e;y.testref=t};y.savedBBoxes={};var z=0;var O=1e4;y.bBox=function(e,t,r){if(!r)r=D(e);var a;if(r){a=y.savedBBoxes[r];if(a)return u.extendFlat({},a)}else if(e.childNodes.length===1){var i=e.childNodes[0];r=D(i);if(r){var o=+i.getAttribute("x")||0;var l=+i.getAttribute("y")||0;var s=i.getAttribute("transform");if(!s){var f=y.bBox(i,false,r);if(o){f.left+=o;f.right+=o}if(l){f.top+=l;f.bottom+=l}return f}r+="~"+o+"~"+l+"~"+s;a=y.savedBBoxes[r];if(a)return u.extendFlat({},a)}}var d,p;if(t){d=e}else{p=y.tester.node();d=e.cloneNode(true);p.appendChild(d)}n.select(d).attr("transform",null).call(c.positionText,0,0);var v=d.getBoundingClientRect();var h=y.testref.node().getBoundingClientRect();if(!t)p.removeChild(d);var g={height:v.height,width:v.width,left:v.left-h.left,top:v.top-h.top,right:v.right-h.left,bottom:v.bottom-h.top};if(z>=O){y.savedBBoxes={};z=0}if(r)y.savedBBoxes[r]=g;z++;return u.extendFlat({},g)};function D(e){var t=e.getAttribute("data-unformatted");if(t===null)return;return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}y.setClipUrl=function(e,t){if(!t){e.attr("clip-path",null);return}if(y.baseUrl===undefined){var r=n.select("base");if(r.size()&&r.attr("href")){y.baseUrl=window.location.href.split("#")[0]}else{y.baseUrl=""}}e.attr("clip-path","url("+y.baseUrl+"#"+t+")")};y.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||0,y:+a[1]||0}};y.setTranslate=function(e,t,r){var n=/(\btranslate\(.*?\);?)/,a=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[a]("transform")||"";t=t||0;r=r||0;o=o.replace(n,"").trim();o+=" translate("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};y.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",n=e[r]("transform")||"";var a=n.replace(t,function(e,t,r){return[t,r].join(" ")}).split(" ");return{x:+a[0]||1,y:+a[1]||1}};y.setScale=function(e,t,r){var n=/(\bscale\(.*?\);?)/,a=e.attr?"attr":"getAttribute",i=e.attr?"attr":"setAttribute",o=e[a]("transform")||"";t=t||1;r=r||1;o=o.replace(n,"").trim();o+=" scale("+t+", "+r+")";o=o.trim();e[i]("transform",o);return o};var E=/\s*sc.*/;y.setPointGroupScale=function(e,t,r){t=t||1;r=r||1;if(!e)return;var n=t===1&&r===1?"":" scale("+t+","+r+")";e.each(function(){var e=(this.getAttribute("transform")||"").replace(E,"");e+=n;e=e.trim();this.setAttribute("transform",e)})};var R=/translate\([^)]*\)\s*$/;y.setTextPointsScale=function(e,t,r){if(!e)return;e.each(function(){var e;var a=n.select(this);var i=a.select("text");if(!i.node())return;var o=parseFloat(i.attr("x")||0);var l=parseFloat(i.attr("y")||0);var s=(a.attr("transform")||"").match(R);if(t===1&&r===1){e=[]}else{e=["translate("+o+","+l+")","scale("+t+","+r+")","translate("+-o+","+-l+")"]}if(s){e.push(s)}a.attr("transform",e.join(" "))})}},{"../../constants/alignment":142,"../../constants/interactions":143,"../../constants/xmlns_namespaces":146,"../../lib":164,"../../lib/svg_text_utils":185,"../../registry":258,"../../traces/scatter/make_bubble_size_func":296,"../../traces/scatter/subtypes":302,"../color":44,"../colorscale":59,"./symbol_defs":70,d3:8,"fast-isnumeric":11,tinycolor2:26}],70:[function(e,t,r){"use strict";var n=e("d3");t.exports={circle:{n:0,f:function(e){var t=n.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=n.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=n.round(e*.4,2),r=n.round(e*1.2,2);return"M"+r+","+t+"H"+t+"V"+r+"H-"+t+"V"+t+"H-"+r+"V-"+t+"H-"+t+"V-"+r+"H"+t+"V-"+t+"H"+r+"Z"}},x:{n:4,f:function(e){var t=n.round(e*.8/Math.sqrt(2),2),r="l"+t+","+t,a="l"+t+",-"+t,i="l-"+t+",-"+t,o="l-"+t+","+t;return"M0,"+t+r+a+i+a+i+o+i+o+r+o+r+"Z"}},"triangle-up":{n:5,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+t+","+r+"H"+t+"L0,-"+a+"Z"}},"triangle-down":{n:6,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+t+",-"+r+"H"+t+"L0,"+a+"Z"}},"triangle-left":{n:7,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M"+r+",-"+t+"V"+t+"L-"+a+",0Z"}},"triangle-right":{n:8,f:function(e){var t=n.round(e*2/Math.sqrt(3),2),r=n.round(e/2,2),a=n.round(e,2);return"M-"+r+",-"+t+"V"+t+"L"+a+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M-"+r+",-"+t+"H"+t+"V"+r+"Z"}},"triangle-se":{n:10,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M"+t+",-"+r+"V"+t+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M"+r+","+t+"H-"+t+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(e){var t=n.round(e*.6,2),r=n.round(e*1.2,2);return"M-"+t+","+r+"V-"+t+"H"+r+"Z"}},pentagon:{n:13,f:function(e){var t=n.round(e*.951,2),r=n.round(e*.588,2),a=n.round(-e,2),i=n.round(e*-.309,2),o=n.round(e*.809,2);return"M"+t+","+i+"L"+r+","+o+"H-"+r+"L-"+t+","+i+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var t=n.round(e,2),r=n.round(e/2,2),a=n.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+t+"L-"+a+","+r+"V-"+r+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=n.round(e,2),r=n.round(e/2,2),a=n.round(e*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+t+",0L"+r+",-"+a+"H-"+r+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=n.round(e*.924,2),r=n.round(e*.383,2);return"M-"+r+",-"+t+"H"+r+"L"+t+",-"+r+"V"+r+"L"+r+","+t+"H-"+r+"L-"+t+","+r+"V-"+r+"Z"}},star:{n:17,f:function(e){var t=e*1.4,r=n.round(t*.225,2),a=n.round(t*.951,2),i=n.round(t*.363,2),o=n.round(t*.588,2),l=n.round(-t,2),s=n.round(t*-.309,2),u=n.round(t*.118,2),c=n.round(t*.809,2),f=n.round(t*.382,2);return"M"+r+","+s+"H"+a+"L"+i+","+u+"L"+o+","+c+"L0,"+f+"L-"+o+","+c+"L-"+i+","+u+"L-"+a+","+s+"H-"+r+"L0,"+l+"Z"}},hexagram:{n:18,f:function(e){var t=n.round(e*.66,2),r=n.round(e*.38,2),a=n.round(e*.76,2);return"M-"+a+",0l-"+r+",-"+t+"h"+a+"l"+r+",-"+t+"l"+r+","+t+"h"+a+"l-"+r+","+t+"l"+r+","+t+"h-"+a+"l-"+r+","+t+"l-"+r+",-"+t+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=n.round(e*Math.sqrt(3)*.8,2),r=n.round(e*.8,2),a=n.round(e*1.6,2),i=n.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+t+","+r+o+t+","+r+o+"0,-"+a+o+"-"+t+","+r+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=n.round(e*Math.sqrt(3)*.8,2),r=n.round(e*.8,2),a=n.round(e*1.6,2),i=n.round(e*4,2),o="A "+i+","+i+" 0 0 1 ";return"M"+t+",-"+r+o+"-"+t+",-"+r+o+"0,"+a+o+t+",-"+r+"Z"}},"star-square":{n:21,f:function(e){var t=n.round(e*1.1,2),r=n.round(e*2,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",-"+t+a+"-"+t+","+t+a+t+","+t+a+t+",-"+t+a+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=n.round(e*1.4,2),r=n.round(e*1.9,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+t+",0"+a+"0,"+t+a+t+",0"+a+"0,-"+t+a+"-"+t+",0"+"Z"}},"diamond-tall":{n:23,f:function(e){var t=n.round(e*.7,2),r=n.round(e*1.4,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=n.round(e*1.4,2),r=n.round(e*.7,2);return"M0,"+r+"L"+t+",0L0,-"+r+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:true},bowtie:{n:26,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:true},"circle-cross":{n:27,f:function(e){var t=n.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"circle-x":{n:28,f:function(e){var t=n.round(e,2),r=n.round(e/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:true,noDot:true},"square-cross":{n:29,f:function(e){var t=n.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"square-x":{n:30,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:true,noDot:true},"diamond-cross":{n:31,f:function(e){var t=n.round(e*1.3,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:true,noDot:true},"diamond-x":{n:32,f:function(e){var t=n.round(e*1.3,2),r=n.round(e*.65,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"+"M-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:true,noDot:true},"cross-thin":{n:33,f:function(e){var t=n.round(e*1.4,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"x-thin":{n:34,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},asterisk:{n:35,f:function(e){var t=n.round(e*1.2,2);var r=n.round(e*.85,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:true,noDot:true,noFill:true},hash:{n:36,f:function(e){var t=n.round(e/2,2),r=n.round(e,2);return"M"+t+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+t+"H-"+r+"m0,-"+r+"H"+r},needLine:true,noFill:true},"y-up":{n:37,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+t+","+a+"L0,0M"+t+","+a+"L0,0M0,-"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-down":{n:38,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+t+",-"+a+"L0,0M"+t+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:true,noDot:true,noFill:true},"y-left":{n:39,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M"+a+","+t+"L0,0M"+a+",-"+t+"L0,0M-"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"y-right":{n:40,f:function(e){var t=n.round(e*1.2,2),r=n.round(e*1.6,2),a=n.round(e*.8,2);return"M-"+a+","+t+"L0,0M-"+a+",-"+t+"L0,0M"+r+",0L0,0"},needLine:true,noDot:true,noFill:true},"line-ew":{n:41,f:function(e){var t=n.round(e*1.4,2);return"M"+t+",0H-"+t},needLine:true,noDot:true,noFill:true},"line-ns":{n:42,f:function(e){var t=n.round(e*1.4,2);return"M0,"+t+"V-"+t},needLine:true,noDot:true,noFill:true},"line-ne":{n:43,f:function(e){var t=n.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:true,noDot:true,noFill:true},"line-nw":{n:44,f:function(e){var t=n.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:true,noDot:true,noFill:true}}},{d3:8}],71:[function(e,t,r){"use strict";t.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],72:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../registry");var i=e("../../plots/cartesian/axes");var o=e("./compute_error");t.exports=function e(t){var r=t.calcdata;for(var n=0;n<r.length;n++){var o=r[n],s=o[0].trace;if(!a.traceIs(s,"errorBarsOK"))continue;var u=i.getFromId(t,s.xaxis),c=i.getFromId(t,s.yaxis);l(o,s,u,"x");l(o,s,c,"y")}};function l(e,t,r,a){var l=t["error_"+a]||{},s=l.visible&&["linear","log"].indexOf(r.type)!==-1,u=[];if(!s)return;var c=o(l);for(var f=0;f<e.length;f++){var d=e[f],p=d[a];if(!n(r.c2l(p)))continue;var v=c(p,f);if(n(v[0])&&n(v[1])){var h=d[a+"s"]=p-v[0],g=d[a+"h"]=p+v[1];u.push(h,g)}}i.expand(r,u,{padded:true})}},{"../../plots/cartesian/axes":209,"../../registry":258,"./compute_error":73,"fast-isnumeric":11}],73:[function(e,t,r){"use strict";t.exports=function e(t){var r=t.type,a=t.symmetric;if(r==="data"){var i=t.array||[];if(a){return function e(t,r){var n=+i[r];return[n,n]}}else{var o=t.arrayminus||[];return function e(t,r){var n=+i[r];var a=+o[r];if(!isNaN(n)||!isNaN(a)){return[a||0,n||0]}return[NaN,NaN]}}}else{var l=n(r,t.value),s=n(r,t.valueminus);if(a||t.valueminus===undefined){return function e(t){var r=l(t);return[r,r]}}else{return function e(t){return[s(t),l(t)]}}}};function n(e,t){if(e==="percent"){return function(e){return Math.abs(e*t/100)}}if(e==="constant"){return function(){return Math.abs(t)}}if(e==="sqrt"){return function(e){return Math.sqrt(Math.abs(e))}}}},{}],74:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../registry");var i=e("../../lib");var o=e("../../plot_api/plot_template");var l=e("./attributes");t.exports=function(e,t,r,s){var u="error_"+s.axis;var c=o.newContainer(t,u);var f=e[u]||{};function d(e,t){return i.coerce(f,c,l,e,t)}var p=f.array!==undefined||f.value!==undefined||f.type==="sqrt";var v=d("visible",p);if(v===false)return;var h=d("type","array"in f?"data":"percent"),g=true;if(h!=="sqrt"){g=d("symmetric",!((h==="data"?"arrayminus":"valueminus")in f))}if(h==="data"){d("array");d("traceref");if(!g){d("arrayminus");d("tracerefminus")}}else if(h==="percent"||h==="constant"){d("value");if(!g)d("valueminus")}var y="copy_"+s.inherit+"style";if(s.inherit){var m=t["error_"+s.inherit];if((m||{}).visible){d(y,!(f.color||n(f.thickness)||n(f.width)))}}if(!s.inherit||!c[y]){d("color",r);d("thickness");d("width",a.traceIs(t,"gl3d")?0:4)}}},{"../../lib":164,"../../plot_api/plot_template":199,"../../registry":258,"./attributes":71,"fast-isnumeric":11}],75:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/edit_types").overrideAll;var i=e("./attributes");var o={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i)};delete o.error_x.copy_zstyle;delete o.error_y.copy_zstyle;delete o.error_y.copy_ystyle;var l={error_x:n.extendFlat({},i),error_y:n.extendFlat({},i),error_z:n.extendFlat({},i)};delete l.error_x.copy_ystyle;delete l.error_y.copy_ystyle;delete l.error_z.copy_ystyle;delete l.error_z.copy_zstyle;t.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:o,bar:o,histogram:o,scatter3d:a(l,"calc","nested"),scattergl:a(o,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:s};function s(e,t,r){if((t.error_y||{}).visible){r.yerr=e.yh-e.y;if(!t.error_y.symmetric)r.yerrneg=e.y-e.ys}if((t.error_x||{}).visible){r.xerr=e.xh-e.x;if(!t.error_x.symmetric)r.xerrneg=e.x-e.xs}}},{"../../lib":164,"../../plot_api/edit_types":192,"./attributes":71,"./calc":72,"./compute_error":73,"./defaults":74,"./plot":76,"./style":77}],76:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../drawing");var o=e("../../traces/scatter/subtypes");t.exports=function e(t,r,s){var u;var c=r.xaxis;var f=r.yaxis;var d=s&&s.duration>0;t.each(function(e){var t=e[0].trace,p=t.error_x||{},v=t.error_y||{};var h;if(t.ids){h=function(e){return e.id}}var g=o.hasMarkers(t)&&t.marker.maxdisplayed>0;if(!v.visible&&!p.visible)e=[];var y=n.select(this).selectAll("g.errorbar").data(e,h);y.exit().remove();if(!e.length)return;if(!p.visible)y.selectAll("path.xerror").remove();if(!v.visible)y.selectAll("path.yerror").remove();y.style("opacity",1);var m=y.enter().append("g").classed("errorbar",true);if(d){m.style("opacity",0).transition().duration(s.duration).style("opacity",1)}i.setClipUrl(y,r.layerClipId);y.each(function(e){var t=n.select(this);var r=l(e,c,f);if(g&&!e.vis)return;var i;var o=t.select("path.yerror");if(v.visible&&a(r.x)&&a(r.yh)&&a(r.ys)){var h=v.width;i="M"+(r.x-h)+","+r.yh+"h"+2*h+"m-"+h+",0V"+r.ys;if(!r.noYS)i+="m-"+h+",0h"+2*h;u=!o.size();if(u){o=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",true)}else if(d){o=o.transition().duration(s.duration).ease(s.easing)}o.attr("d",i)}else o.remove();var y=t.select("path.xerror");if(p.visible&&a(r.y)&&a(r.xh)&&a(r.xs)){var m=(p.copy_ystyle?v:p).width;i="M"+r.xh+","+(r.y-m)+"v"+2*m+"m0,-"+m+"H"+r.xs;if(!r.noXS)i+="m0,-"+m+"v"+2*m;u=!y.size();if(u){y=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",true)}else if(d){y=y.transition().duration(s.duration).ease(s.easing)}y.attr("d",i)}else y.remove()})})};function l(e,t,r){var n={x:t.c2p(e.x),y:r.c2p(e.y)};if(e.yh!==undefined){n.yh=r.c2p(e.yh);n.ys=r.c2p(e.ys);if(!a(n.ys)){n.noYS=true;n.ys=r.c2p(e.ys,true)}}if(e.xh!==undefined){n.xh=t.c2p(e.xh);n.xs=t.c2p(e.xs);if(!a(n.xs)){n.noXS=true;n.xs=t.c2p(e.xs,true)}}return n}},{"../../traces/scatter/subtypes":302,"../drawing":69,d3:8,"fast-isnumeric":11}],77:[function(e,t,r){"use strict";var n=e("d3");var a=e("../color");t.exports=function e(t){t.each(function(e){var t=e[0].trace,r=t.error_y||{},i=t.error_x||{};var o=n.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(a.stroke,r.color);if(i.copy_ystyle)i=r;o.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(a.stroke,i.color)})}},{"../color":44,d3:8}],78:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");t.exports={hoverlabel:{bgcolor:{valType:"color",arrayOk:true,editType:"none"},bordercolor:{valType:"color",arrayOk:true,editType:"none"},font:n({arrayOk:true,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:true,editType:"none"},editType:"calc"}}},{"../../plots/font_attributes":235}],79:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");t.exports=function e(t){var r=t.calcdata;var o=t._fullLayout;function l(e){return function(t){return n.coerceHoverinfo({hoverinfo:t},{_module:e._module},o)}}for(var s=0;s<r.length;s++){var u=r[s];var c=u[0].trace;if(a.traceIs(c,"pie"))continue;var f=a.traceIs(c,"2dMap")?i:n.fillArray;f(c.hoverinfo,u,"hi",l(c));if(!c.hoverlabel)continue;f(c.hoverlabel.bgcolor,u,"hbg");f(c.hoverlabel.bordercolor,u,"hbc");f(c.hoverlabel.font.size,u,"hts");f(c.hoverlabel.font.color,u,"htc");f(c.hoverlabel.font.family,u,"htf");f(c.hoverlabel.namelength,u,"hnl")}};function i(e,t,r,a){a=a||n.identity;if(Array.isArray(e)){t[0][r]=a(e)}}},{"../../lib":164,"../../registry":258}],80:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./hover").hover;t.exports=function e(t,r,i){var o=n.getComponentMethod("annotations","onClick")(t,t._hoverdata);if(i!==undefined){a(t,r,i,true)}function l(){t.emit("plotly_click",{points:t._hoverdata,event:r})}if(t._hoverdata&&r&&r.target){if(o&&o.then){o.then(l)}else l();if(r.stopImmediatePropagation)r.stopImmediatePropagation()}}},{"../../registry":258,"./hover":84}],81:[function(e,t,r){"use strict";t.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],82:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./hoverlabel_defaults");t.exports=function e(t,r,o,l){function s(e,i){return n.coerce(t,r,a,e,i)}i(t,r,s,l.hoverlabel)}},{"../../lib":164,"./attributes":78,"./hoverlabel_defaults":85}],83:[function(e,t,r){"use strict";var n=e("../../lib");r.getSubplot=function e(t){return t.subplot||t.xaxis+t.yaxis||t.geo};r.isTraceInSubplots=function e(t,n){if(t.type==="splom"){var a=t.xaxes||[];var i=t.yaxes||[];for(var o=0;o<a.length;o++){for(var l=0;l<i.length;l++){if(n.indexOf(a[o]+i[l])!==-1){return true}}}return false}return n.indexOf(r.getSubplot(t))!==-1};r.flat=function e(t,r){var n=new Array(t.length);for(var a=0;a<t.length;a++){n[a]=r}return n};r.p2c=function e(t,r){var n=new Array(t.length);for(var a=0;a<t.length;a++){n[a]=t[a].p2c(r)}return n};r.getDistanceFunction=function e(t,n,a,i){if(t==="closest")return i||r.quadrature(n,a);return t==="x"?n:a};r.getClosest=function e(t,r,n){if(n.index!==false){if(n.index>=0&&n.index<t.length){n.distance=0}else n.index=false}else{for(var a=0;a<t.length;a++){var i=r(t[a]);if(i<=n.distance){n.index=a;n.distance=i}}}return n};r.inbox=function e(t,r,n){return t*r<0||t===0?n:Infinity};r.quadrature=function e(t,r){return function(e){var n=t(e),a=r(e);return Math.sqrt(n*n+a*a)}};r.makeEventData=function e(t,n,a){var i="index"in t?t.index:t.pointNumber;var o={data:n._input,fullData:n,curveNumber:n.index,pointNumber:i};if(n._indexToPoints){var l=n._indexToPoints[i];if(l.length===1){o.pointIndex=l[0]}else{o.pointIndices=l}}else{o.pointIndex=i}if(n._module.eventData){o=n._module.eventData(o,t,n,a,i)}else{if("xVal"in t)o.x=t.xVal;else if("x"in t)o.x=t.x;if("yVal"in t)o.y=t.yVal;else if("y"in t)o.y=t.y;if(t.xa)o.xaxis=t.xa;if(t.ya)o.yaxis=t.ya;if(t.zLabelVal!==undefined)o.z=t.zLabelVal}r.appendArrayPointValue(o,n,i);return o};r.appendArrayPointValue=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var l=0;l<a.length;l++){var s=a[l];var u=i(s);if(e[u]===undefined){var c=n.nestedProperty(t,s).get();var f=o(c,r);if(f!==undefined)e[u]=f}}};r.appendArrayMultiPointValues=function(e,t,r){var a=t._arrayAttrs;if(!a){return}for(var l=0;l<a.length;l++){var s=a[l];var u=i(s);if(e[u]===undefined){var c=n.nestedProperty(t,s).get();var f=new Array(r.length);for(var d=0;d<r.length;d++){f[d]=o(c,r[d])}e[u]=f}}};var a={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function i(e){return a[e]||e}function o(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]])){return e[t[0]][t[1]]}}else{return e[t]}}},{"../../lib":164}],84:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("tinycolor2");var o=e("../../lib");var l=e("../../lib/events");var s=e("../../lib/svg_text_utils");var u=e("../../lib/override_cursor");var c=e("../drawing");var f=e("../color");var d=e("../dragelement");var p=e("../../plots/cartesian/axes");var v=e("../../registry");var h=e("./helpers");var g=e("./constants");var y=g.YANGLE;var m=Math.PI*y/180;var x=1/Math.sin(m);var b=Math.cos(m);var _=Math.sin(m);var w=g.HOVERARROWSIZE;var k=g.HOVERTEXTPAD;r.hover=function e(t,r,n,a){t=o.getGraphDiv(t);o.throttle(t._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){M(t,r,n,a)})};r.loneHover=function e(t,r){var a={color:t.color||f.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0};var i=n.select(r.container),o=r.outerContainer?n.select(r.outerContainer):i;var l={hovermode:"closest",rotateLabels:false,bgColor:r.bgColor||f.background,container:i,outerContainer:o};var s=A([a],l,r.gd);L(s,l.rotateLabels);return s.node()};function M(e,t,r,i){if(!r)r="xy";var s=Array.isArray(r)?r:[r];var c=e._fullLayout;var g=c._plots||[];var y=g[r];var m=c._has("cartesian");if(y){var x=y.overlays.map(function(e){return e.id});s=s.concat(x)}var b=s.length;var _=new Array(b);var w=new Array(b);var k=false;for(var M=0;M<b;M++){var O=s[M];var D=g[O];if(D){k=true;_[M]=p.getFromId(e,D.xaxis._id);w[M]=p.getFromId(e,D.yaxis._id);continue}var E=c[O]._subplot;_[M]=E.xaxis;w[M]=E.yaxis}var R=t.hovermode||c.hovermode;if(R&&!k)R="closest";if(["x","y","closest"].indexOf(R)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging){return d.unhoverRaw(e,t)}var I=c.hoverdistance===-1?Infinity:c.hoverdistance;var N=c.spikedistance===-1?Infinity:c.spikedistance;var F=[],j=[],B,q,H,U,V,G,Y,Z,X,W,J,Q,$,K={hLinePoint:null,vLinePoint:null};if(Array.isArray(t)){R="array";for(H=0;H<t.length;H++){V=e.calcdata[t[H].curveNumber||0];if(V[0].trace.hoverinfo!=="skip"){j.push(V)}}}else{for(U=0;U<e.calcdata.length;U++){V=e.calcdata[U];G=V[0].trace;if(G.hoverinfo!=="skip"&&h.isTraceInSubplots(G,s)){j.push(V)}}var ee=!t.target,te,re;if(ee){if("xpx"in t)te=t.xpx;else te=_[0]._length/2;if("ypx"in t)re=t.ypx;else re=w[0]._length/2}else{if(l.triggerHandler(e,"plotly_beforehover",t)===false){return}var ne=t.target.getBoundingClientRect();te=t.clientX-ne.left;re=t.clientY-ne.top;if(te<0||te>_[0]._length||re<0||re>w[0]._length){return d.unhoverRaw(e,t)}}t.pointerX=te+_[0]._offset;t.pointerY=re+w[0]._offset;if("xval"in t)B=h.flat(s,t.xval);else B=h.p2c(_,te);if("yval"in t)q=h.flat(s,t.yval);else q=h.p2c(w,re);if(!a(B[0])||!a(q[0])){o.warn("Fx.hover failed",t,e);return d.unhoverRaw(e,t)}}var ae=Infinity;for(U=0;U<j.length;U++){V=j[U];if(!V||!V[0]||!V[0].trace||V[0].trace.visible!==true)continue;G=V[0].trace;if(["carpet","contourcarpet"].indexOf(G._module.name)!==-1)continue;if(G.type==="splom"){Z=0;Y=s[Z]}else{Y=h.getSubplot(G);Z=s.indexOf(Y)}X=R;Q={cd:V,trace:G,xa:_[Z],ya:w[Z],maxHoverDistance:I,maxSpikeDistance:N,index:false,distance:Math.min(ae,I),spikeDistance:Infinity,xSpike:undefined,ySpike:undefined,color:f.defaultLine,name:G.name,x0:undefined,x1:undefined,y0:undefined,y1:undefined,xLabelVal:undefined,yLabelVal:undefined,zLabelVal:undefined,text:undefined};if(c[Y]){Q.subplot=c[Y]._subplot}$=F.length;if(X==="array"){var ie=t[U];if("pointNumber"in ie){Q.index=ie.pointNumber;X="closest"}else{X="";if("xval"in ie){W=ie.xval;X="x"}if("yval"in ie){J=ie.yval;X=X?"closest":"y"}}}else{W=B[Z];J=q[Z]}if(I!==0){if(G._module&&G._module.hoverPoints){var oe=G._module.hoverPoints(Q,W,J,X,c._hoverlayer);if(oe){var le;for(var se=0;se<oe.length;se++){le=oe[se];if(a(le.x0)&&a(le.y0)){F.push(S(le,R))}}}}else{o.log("Unrecognized trace type in hover:",G)}}if(R==="closest"&&F.length>$){F.splice(0,$);ae=F[0].distance}if(m&&N!==0){if(F.length===0){Q.distance=N;Q.index=false;var ue=G._module.hoverPoints(Q,W,J,"closest",c._hoverlayer);if(ue){ue=ue.filter(function(e){return e.spikeDistance<=N})}if(ue&&ue.length){var ce;var fe=ue.filter(function(e){return e.xa.showspikes});if(fe.length){var de=fe[0];if(a(de.x0)&&a(de.y0)){ce=ge(de);if(!K.vLinePoint||K.vLinePoint.spikeDistance>ce.spikeDistance){K.vLinePoint=ce}}}var pe=ue.filter(function(e){return e.ya.showspikes});if(pe.length){var ve=pe[0];if(a(ve.x0)&&a(ve.y0)){ce=ge(ve);if(!K.hLinePoint||K.hLinePoint.spikeDistance>ce.spikeDistance){K.hLinePoint=ce}}}}}}}function he(e,t){var r=null;var n=Infinity;var a;for(var i=0;i<e.length;i++){a=e[i].spikeDistance;if(a<n&&a<=t){r=e[i];n=a}}return r}function ge(e){if(!e)return null;return{xa:e.xa,ya:e.ya,x:e.xSpike!==undefined?e.xSpike:(e.x0+e.x1)/2,y:e.ySpike!==undefined?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}}var ye={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:t};var me=e._spikepoints,xe={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};e._spikepoints=xe;if(m&&N!==0){if(F.length!==0){var be=F.filter(function(e){return e.ya.showspikes});var _e=he(be,N);K.hLinePoint=ge(_e);var we=F.filter(function(e){return e.xa.showspikes});var ke=he(we,N);K.vLinePoint=ge(ke)}}if(F.length===0){var Me=d.unhoverRaw(e,t);if(m&&(K.hLinePoint!==null||K.vLinePoint!==null)){if(z(me)){C(K,ye)}}return Me}if(m){if(z(me)){C(K,ye)}}F.sort(function(e,t){return e.distance-t.distance});var Ae=e._hoverdata,Te=[];for(H=0;H<F.length;H++){var Le=F[H];Te.push(h.makeEventData(Le,Le.trace,Le.cd))}e._hoverdata=Te;var Se=R==="y"&&j.length>1;var Ce=f.combine(c.plot_bgcolor||f.background,c.paper_bgcolor);var Pe={hovermode:R,rotateLabels:Se,bgColor:Ce,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance};var ze=A(F,Pe,e);T(F,Se?"xa":"ya",c);L(ze,Se);if(t.target&&t.target.tagName){var Oe=v.getComponentMethod("annotations","hasClickToShow")(e,Te);u(n.select(t.target),Oe?"pointer":"")}if(!t.target||i||!P(e,t,Ae))return;if(Ae){e.emit("plotly_unhover",{event:t,points:Ae})}e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:_,yaxes:w,xvals:B,yvals:q})}function A(e,t,r){var a=t.hovermode;var i=t.rotateLabels;var l=t.bgColor;var u=t.container;var d=t.outerContainer;var p=t.commonLabelOpts||{};var v=t.fontFamily||g.HOVERFONT;var h=t.fontSize||g.HOVERFONTSIZE;var m=e[0];var x=m.xa;var b=m.ya;var _=a==="y"?"yLabel":"xLabel";var M=m[_];var A=(String(M)||"").split(" ")[0];var T=d.node().getBoundingClientRect();var L=T.top;var S=T.width;var C=T.height;var P=M!==undefined&&m.distance<=t.hoverdistance&&(a==="x"||a==="y");if(P){var z,O;var D=true;for(z=0;z<e.length;z++){if(D&&e[z].zLabel===undefined)D=false;O=e[z].hoverinfo||e[z].trace.hoverinfo;var E=Array.isArray(O)?O:O.split("+");if(E.indexOf("all")===-1&&E.indexOf(a)===-1){P=false;break}}if(D)P=false}var R=u.selectAll("g.axistext").data(P?[0]:[]);R.enter().append("g").classed("axistext",true);R.exit().remove();R.each(function(){var t=n.select(this);var i=o.ensureSingle(t,"path","",function(e){e.style({"stroke-width":"1px"})});var l=o.ensureSingle(t,"text","",function(e){e.attr("data-notex",1)});var u=p.bgcolor||f.defaultLine;var d=p.bordercolor||f.contrast(u);i.style({fill:u,stroke:d});l.text(M).call(c.font,p.font.family||v,p.font.size||h,p.font.color||f.background).call(s.positionText,0,0).call(s.convertToTspans,r);t.attr("transform","");var g=l.node().getBoundingClientRect();if(a==="x"){l.attr("text-anchor","middle").call(s.positionText,0,x.side==="top"?L-g.bottom-w-k:L-g.top+w+k);var y=x.side==="top"?"-":"";i.attr("d","M0,0"+"L"+w+","+y+w+"H"+(k+g.width/2)+"v"+y+(k*2+g.height)+"H-"+(k+g.width/2)+"V"+y+w+"H-"+w+"Z");t.attr("transform","translate("+(x._offset+(m.x0+m.x1)/2)+","+(b._offset+(x.side==="top"?0:b._length))+")")}else{l.attr("text-anchor",b.side==="right"?"start":"end").call(s.positionText,(b.side==="right"?1:-1)*(k+w),L-g.top-g.height/2);var T=b.side==="right"?"":"-";i.attr("d","M0,0"+"L"+T+w+","+w+"V"+(k+g.height/2)+"h"+T+(k*2+g.width)+"V-"+(k+g.height/2)+"H"+T+w+"V-"+w+"Z");t.attr("transform","translate("+(x._offset+(b.side==="right"?x._length:0))+","+(b._offset+(m.y0+m.y1)/2)+")")}e=e.filter(function(e){return e.zLabelVal!==undefined||(e[_]||"").split(" ")[0]===A})});var I=u.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});I.enter().append("g").classed("hovertext",true).each(function(){var e=n.select(this);e.append("rect").call(f.fill,f.addOpacity(l,.8));e.append("text").classed("name",true);e.append("path").style("stroke-width","1px");e.append("text").classed("nums",true).call(c.font,v,h)});I.exit().remove();I.each(function(e){var t=n.select(this).attr("transform",""),o="",u="";var d=f.opacity(e.color)?e.color:f.defaultLine;var p=f.combine(d,l);var g=e.borderColor||f.contrast(p);if(e.nameOverride!==undefined)e.name=e.nameOverride;if(e.name){o=s.plainText(e.name||"");var m=Math.round(e.nameLength);if(m>-1&&o.length>m){if(m>3)o=o.substr(0,m-3)+"...";else o=o.substr(0,m)}}if(e.zLabel!==undefined){if(e.xLabel!==undefined)u+="x: "+e.xLabel+"<br>";if(e.yLabel!==undefined)u+="y: "+e.yLabel+"<br>";u+=(u?"z: ":"")+e.zLabel}else if(P&&e[a+"Label"]===M){u=e[(a==="x"?"y":"x")+"Label"]||""}else if(e.xLabel===undefined){if(e.yLabel!==undefined)u=e.yLabel}else if(e.yLabel===undefined)u=e.xLabel;else u="("+e.xLabel+", "+e.yLabel+")";if((e.text||e.text===0)&&!Array.isArray(e.text)){u+=(u?"<br>":"")+e.text}if(e.extraText!==undefined)u+=(u?"<br>":"")+e.extraText;if(u===""){if(o==="")t.remove();u=o}var x=t.select("text.nums").call(c.font,e.fontFamily||v,e.fontSize||h,e.fontColor||g).text(u).attr("data-notex",1).call(s.positionText,0,0).call(s.convertToTspans,r);var b=t.select("text.name"),_=0;if(o&&o!==u){b.call(c.font,e.fontFamily||v,e.fontSize||h,p).text(o).attr("data-notex",1).call(s.positionText,0,0).call(s.convertToTspans,r);_=b.node().getBoundingClientRect().width+2*k}else{b.remove();t.select("rect").remove()}t.select("path").style({fill:p,stroke:g});var A=x.node().getBoundingClientRect(),T=e.xa._offset+(e.x0+e.x1)/2,z=e.ya._offset+(e.y0+e.y1)/2,O=Math.abs(e.x1-e.x0),D=Math.abs(e.y1-e.y0),E=A.width+w+k+_,R,I;e.ty0=L-A.top;e.bx=A.width+2*k;e.by=A.height+2*k;e.anchor="start";e.txwidth=A.width;e.tx2width=_;e.offset=0;if(i){e.pos=T;R=z+D/2+E<=C;I=z-D/2-E>=0;if((e.idealAlign==="top"||!R)&&I){z-=D/2;e.anchor="end"}else if(R){z+=D/2;e.anchor="start"}else e.anchor="middle"}else{e.pos=z;R=T+O/2+E<=S;I=T-O/2-E>=0;if((e.idealAlign==="left"||!R)&&I){T-=O/2;e.anchor="end"}else if(R){T+=O/2;e.anchor="start"}else e.anchor="middle"}x.attr("text-anchor",e.anchor);if(_)b.attr("text-anchor",e.anchor);t.attr("transform","translate("+T+","+z+")"+(i?"rotate("+y+")":""))});return I}function T(e,t,r){var n=0,a=e.map(function(e,n){var a=e[t];return[{i:n,dp:0,pos:e.pos,posref:e.posref,size:e.by*(a._id.charAt(0)==="x"?x:1)/2,pmin:0,pmax:a._id.charAt(0)==="x"?r.width:r.height}]}).sort(function(e,t){return e[0].posref-t[0].posref}),i,o,l,s,u,c,f;function d(e){var t=e[0],r=e[e.length-1];o=t.pmin-t.pos-t.dp+t.size;l=r.pos+r.dp+r.size-t.pmax;if(o>.01){for(u=e.length-1;u>=0;u--)e[u].dp+=o;i=false}if(l<.01)return;if(o<-.01){for(u=e.length-1;u>=0;u--)e[u].dp-=l;i=false}if(!i)return;var n=0;for(s=0;s<e.length;s++){c=e[s];if(c.pos+c.dp+c.size>t.pmax)n++}for(s=e.length-1;s>=0;s--){if(n<=0)break;c=e[s];if(c.pos>t.pmax-1){c.del=true;n--}}for(s=0;s<e.length;s++){if(n<=0)break;c=e[s];if(c.pos<t.pmin+1){c.del=true;n--;l=c.size*2;for(u=e.length-1;u>=0;u--)e[u].dp-=l}}for(s=e.length-1;s>=0;s--){if(n<=0)break;c=e[s];if(c.pos+c.dp+c.size>t.pmax){c.del=true;n--}}}while(!i&&n<=e.length){n++;i=true;s=0;while(s<a.length-1){var p=a[s],v=a[s+1],h=p[p.length-1],g=v[0];o=h.pos+h.dp+h.size-g.pos-g.dp+g.size;if(o>.01&&h.pmin===g.pmin&&h.pmax===g.pmax){for(u=v.length-1;u>=0;u--)v[u].dp+=o;p.push.apply(p,v);a.splice(s+1,1);f=0;for(u=p.length-1;u>=0;u--)f+=p[u].dp;l=f/p.length;for(u=p.length-1;u>=0;u--)p[u].dp-=l;i=false}else s++}a.forEach(d)}for(s=a.length-1;s>=0;s--){var y=a[s];for(u=y.length-1;u>=0;u--){var m=y[u],b=e[m.i];b.offset=m.dp;b.del=m.del}}}function L(e,t){e.each(function(e){var r=n.select(this);if(e.del){r.remove();return}var a=e.anchor==="end"?-1:1,i=r.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],l=o*(w+k),u=l+o*(e.txwidth+k),f=0,d=e.offset;if(e.anchor==="middle"){l-=e.tx2width/2;u+=e.txwidth/2+k}if(t){d*=-_;f=e.offset*b}r.select("path").attr("d",e.anchor==="middle"?"M-"+(e.bx/2+e.tx2width/2)+","+(d-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(a*w+f)+","+(w+d)+"v"+(e.by/2-w)+"h"+a*e.bx+"v-"+e.by+"H"+(a*w+f)+"V"+(d-w)+"Z");i.call(s.positionText,l+f,d+e.ty0-e.by/2+k);if(e.tx2width){r.select("text.name").call(s.positionText,u+o*k+f,d+e.ty0-e.by/2+k);r.select("rect").call(c.setRect,u+(o-1)*e.tx2width/2+f,d-e.by/2-1,e.tx2width,e.by+2)}})}function S(e,t){var r=e.index;var n=e.trace||{};var a=e.cd[0];var i=e.cd[r]||{};var l=Array.isArray(r)?function(e,t){return o.castOption(a,r,e)||o.extractOption({},n,"",t)}:function(e,t){return o.extractOption(i,n,e,t)};function s(t,r,n){var a=l(r,n);if(a)e[t]=a}s("hoverinfo","hi","hoverinfo");s("color","hbg","hoverlabel.bgcolor");s("borderColor","hbc","hoverlabel.bordercolor");s("fontFamily","htf","hoverlabel.font.family");s("fontSize","hts","hoverlabel.font.size");s("fontColor","htc","hoverlabel.font.color");s("nameLength","hnl","hoverlabel.namelength");e.posref=t==="y"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2;e.x0=o.constrain(e.x0,0,e.xa._length);e.x1=o.constrain(e.x1,0,e.xa._length);e.y0=o.constrain(e.y0,0,e.ya._length);e.y1=o.constrain(e.y1,0,e.ya._length);if(e.xLabelVal!==undefined){e.xLabel="xLabel"in e?e.xLabel:p.hoverLabelText(e.xa,e.xLabelVal);e.xVal=e.xa.c2d(e.xLabelVal)}if(e.yLabelVal!==undefined){e.yLabel="yLabel"in e?e.yLabel:p.hoverLabelText(e.ya,e.yLabelVal);e.yVal=e.ya.c2d(e.yLabelVal)}if(e.zLabelVal!==undefined&&e.zLabel===undefined){e.zLabel=String(e.zLabelVal)}if(!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=p.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;if(e.xerrneg!==undefined){e.xLabel+=" +"+u+" / -"+p.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text}else e.xLabel+=" \xb1 "+u;if(t==="x")e.distance+=1}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var c=p.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;if(e.yerrneg!==undefined){e.yLabel+=" +"+c+" / -"+p.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text}else e.yLabel+=" \xb1 "+c;if(t==="y")e.distance+=1}var f=e.hoverinfo||e.trace.hoverinfo;if(f!=="all"){f=Array.isArray(f)?f:f.split("+");if(f.indexOf("x")===-1)e.xLabel=undefined;if(f.indexOf("y")===-1)e.yLabel=undefined;if(f.indexOf("z")===-1)e.zLabel=undefined;if(f.indexOf("text")===-1)e.text=undefined;if(f.indexOf("name")===-1)e.name=undefined}return e}function C(e,t){var r=t.container;var n=t.fullLayout;var a=t.event;var o,l;var s=!!e.hLinePoint;var u=!!e.vLinePoint;r.selectAll(".spikeline").remove();if(!(u||s))return;var d=f.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var p=e.hLinePoint,v,h;o=p&&p.xa;l=p&&p.ya;var g=l.spikesnap;if(g==="cursor"){v=a.pointerX;h=a.pointerY}else{v=o._offset+p.x;h=l._offset+p.y}var y=i.readability(p.color,d)<1.5?f.contrast(d):p.color;var m=l.spikemode,x=l.spikethickness,b=l.spikecolor||y,_=l._boundingBox,w=(_.left+_.right)/2<v?_.right:_.left,k,M;if(m.indexOf("toaxis")!==-1||m.indexOf("across")!==-1){if(m.indexOf("toaxis")!==-1){k=w;M=v}if(m.indexOf("across")!==-1){k=l._counterSpan[0];M=l._counterSpan[1]}r.insert("line",":first-child").attr({x1:k,x2:M,y1:h,y2:h,"stroke-width":x,stroke:b,"stroke-dasharray":c.dashStyle(l.spikedash,x)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:k,x2:M,y1:h,y2:h,"stroke-width":x+2,stroke:d}).classed("spikeline",true).classed("crisp",true)}if(m.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:w+(l.side!=="right"?x:-x),cy:h,r:x,fill:b}).classed("spikeline",true)}}if(u){var A=e.vLinePoint,T,L;o=A&&A.xa;l=A&&A.ya;var S=o.spikesnap;if(S==="cursor"){T=a.pointerX;L=a.pointerY}else{T=o._offset+A.x;L=l._offset+A.y}var C=i.readability(A.color,d)<1.5?f.contrast(d):A.color;var P=o.spikemode,z=o.spikethickness,O=o.spikecolor||C,D=o._boundingBox,E=(D.top+D.bottom)/2<L?D.bottom:D.top,R,I;if(P.indexOf("toaxis")!==-1||P.indexOf("across")!==-1){if(P.indexOf("toaxis")!==-1){R=E;I=L}if(P.indexOf("across")!==-1){R=o._counterSpan[0];I=o._counterSpan[1]}r.insert("line",":first-child").attr({x1:T,x2:T,y1:R,y2:I,"stroke-width":z,stroke:O,"stroke-dasharray":c.dashStyle(o.spikedash,z)}).classed("spikeline",true).classed("crisp",true);r.insert("line",":first-child").attr({x1:T,x2:T,y1:R,y2:I,"stroke-width":z+2,stroke:d}).classed("spikeline",true).classed("crisp",true)}if(P.indexOf("marker")!==-1){r.insert("circle",":first-child").attr({cx:T,cy:E-(o.side!=="top"?z:-z),r:z,fill:O}).classed("spikeline",true)}}}function P(e,t,r){if(!r||r.length!==e._hoverdata.length)return true;for(var n=r.length-1;n>=0;n--){var a=r[n],i=e._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber)){return true}}return false}function z(e,t){if(!t)return true;if(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)return true;return false}},{"../../lib":164,"../../lib/events":155,"../../lib/override_cursor":175,"../../lib/svg_text_utils":185,"../../plots/cartesian/axes":209,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"./constants":81,"./helpers":83,d3:8,"fast-isnumeric":11,tinycolor2:26}],85:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r,a,i){i=i||{};a("hoverlabel.bgcolor",i.bgcolor);a("hoverlabel.bordercolor",i.bordercolor);a("hoverlabel.namelength",i.namelength);n.coerceFont(a,"hoverlabel.font",i.font)}},{"../../lib":164}],86:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../dragelement");var o=e("./helpers");var l=e("./layout_attributes");t.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:l},attributes:e("./attributes"),layoutAttributes:l,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:o.getDistanceFunction,getClosest:o.getClosest,inbox:o.inbox,quadrature:o.quadrature,appendArrayPointValue:o.appendArrayPointValue,castHoverOption:u,castHoverinfo:c,hover:e("./hover").hover,unhover:i.unhover,loneHover:e("./hover").loneHover,loneUnhover:s,click:e("./click")};function s(e){var t=a.isD3Selection(e)?e:n.select(e);t.selectAll("g.hovertext").remove();t.selectAll(".spikeline").remove()}function u(e,t,r){return a.castOption(e,t,"hoverlabel."+r)}function c(e,t,r){function n(r){return a.coerceHoverinfo({hoverinfo:r},{_module:e._module},t)}return a.castOption(e,r,"hoverinfo",n)}},{"../../lib":164,"../dragelement":66,"./attributes":78,"./calc":79,"./click":80,"./constants":81,"./defaults":82,"./helpers":83,"./hover":84,"./layout_attributes":87,"./layout_defaults":88,"./layout_global_defaults":89,d3:8}],87:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../plots/font_attributes")({editType:"none"});a.family.dflt=n.HOVERFONT;a.size.dflt=n.HOVERFONTSIZE;t.exports={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",false],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:a,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":235,"./constants":81}],88:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");t.exports=function e(t,r,o){function l(e,i){return n.coerce(t,r,a,e,i)}var s=l("dragmode");if(s==="select")l("selectdirection");var u;if(r._has("cartesian")){r._isHoriz=i(o);u=r._isHoriz?"y":"x"}else u="closest";var c=l("hovermode",u);if(c){l("hoverdistance");l("spikedistance")}var f=r._has("mapbox");var d=r._has("geo");var p=r._basePlotModules.length;if(r.dragmode==="zoom"&&((f||d)&&p===1||f&&d&&p===2)){r.dragmode="pan"}};function i(e){var t=true;for(var r=0;r<e.length;r++){var n=e[r];if(n.orientation!=="h"){t=false;break}}return t}},{"../../lib":164,"./layout_attributes":87}],89:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./hoverlabel_defaults");var i=e("./layout_attributes");t.exports=function e(t,r){function o(e,a){return n.coerce(t,r,i,e,a)}a(t,r,o)}},{"../../lib":164,"./hoverlabel_defaults":85,"./layout_attributes":87}],90:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../lib/regex").counter;var i=e("../../plots/domain").attributes;var o=e("../../plots/cartesian/constants").idRegex;var l=e("../../plot_api/plot_template");var s={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:true,dimensions:2,items:{valType:"enumerated",values:[a("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:true,items:{valType:"enumerated",values:[o.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:true},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function u(e,t,r){var n=t[r+"axes"];var a=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(n))return n;if(a.length)return a}function c(e,t){var r=e.grid||{};var a=u(t,r,"x");var i=u(t,r,"y");if(!e.grid&&!a&&!i)return;var o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]);var c=Array.isArray(a);var d=Array.isArray(i);var p=c&&a!==r.xaxes&&d&&i!==r.yaxes;var v,h;if(o){v=r.subplots.length;h=r.subplots[0].length}else{if(d)v=i.length;if(c)h=a.length}var g=l.newContainer(t,"grid");function y(e,t){return n.coerce(r,g,s,e,t)}var m=y("rows",v);var x=y("columns",h);if(!(m*x>1)){delete t.grid;return}if(!o&&!c&&!d){var b=y("pattern")==="independent";if(b)o=true}g._hasSubplotGrid=o;var _=y("roworder");var w=_==="top to bottom";var k=o?.2:.1;var M=o?.3:.1;var A,T;if(p&&t._splomGridDflt){A=t._splomGridDflt.xside;T=t._splomGridDflt.yside}g._domains={x:f("x",y,k,A,x),y:f("y",y,M,T,m,w)}}function f(e,t,r,n,a,i){var o=t(e+"gap",r);var l=t("domain."+e);t(e+"side",n);var s=new Array(a);var u=l[0];var c=(l[1]-u)/(a-o);var f=c*(1-o);for(var d=0;d<a;d++){var p=u+c*d;s[i?a-1-d:d]=[p,p+f]}return s}function d(e,t){var r=t.grid;if(!r||!r._domains)return;var n=e.grid||{};var a=t._subplots;var i=r._hasSubplotGrid;var o=r.rows;var l=r.columns;var s=r.pattern==="independent";var c,f,d,v,h,g,y;var m=r._axisMap={};if(i){var x=n.subplots||[];g=r.subplots=new Array(o);var b=1;for(c=0;c<o;c++){var _=g[c]=new Array(l);var w=x[c]||[];for(f=0;f<l;f++){if(s){h=b===1?"xy":"x"+b+"y"+b;b++}else h=w[f];_[f]="";if(a.cartesian.indexOf(h)!==-1){y=h.indexOf("y");d=h.slice(0,y);v=h.slice(y);if(m[d]!==undefined&&m[d]!==f||m[v]!==undefined&&m[v]!==c){continue}_[f]=h;m[d]=f;m[v]=c}}}}else{var k=u(t,n,"x");var M=u(t,n,"y");r.xaxes=p(k,a.xaxis,l,m,"x");r.yaxes=p(M,a.yaxis,o,m,"y")}var A=r._anchors={};var T=r.roworder==="top to bottom";for(var L in m){var S=L.charAt(0);var C=r[S+"side"];var P,z,O;if(C.length<8){A[L]="free"}else if(S==="x"){if(C.charAt(0)==="t"===T){P=0;z=1;O=o}else{P=o-1;z=-1;O=-1}if(i){var D=m[L];for(c=P;c!==O;c+=z){h=g[c][D];if(!h)continue;y=h.indexOf("y");if(h.slice(0,y)===L){A[L]=h.slice(y);break}}}else{for(c=P;c!==O;c+=z){v=r.yaxes[c];if(a.cartesian.indexOf(L+v)!==-1){A[L]=v;break}}}}else{if(C.charAt(0)==="l"){P=0;z=1;O=l}else{P=l-1;z=-1;O=-1}if(i){var E=m[L];for(c=P;c!==O;c+=z){h=g[E][c];if(!h)continue;y=h.indexOf("y");if(h.slice(y)===L){A[L]=h.slice(0,y);break}}}else{for(c=P;c!==O;c+=z){d=r.xaxes[c];if(a.cartesian.indexOf(d+L)!==-1){A[L]=d;break}}}}}}function p(e,t,r,n,a){var i=new Array(r);var o;function l(e,r){if(t.indexOf(r)!==-1&&n[r]===undefined){i[e]=r;n[r]=e}else i[e]=""}if(Array.isArray(e)){for(o=0;o<r;o++){l(o,e[o])}}else{l(0,a);for(o=1;o<r;o++){l(o,a+(o+1))}}return i}t.exports={moduleType:"component",name:"grid",schema:{layout:{grid:s}},layoutAttributes:s,sizeDefaults:c,contentDefaults:d}},{"../../lib":164,"../../lib/regex":179,"../../plot_api/plot_template":199,"../../plots/cartesian/constants":214,"../../plots/domain":234}],91:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/constants");var a=e("../../plot_api/plot_template").templatedArray;t.exports=a("image",{visible:{valType:"boolean",dflt:true,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":199,"../../plots/cartesian/constants":214}],92:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib/to_log_range");t.exports=function e(t,r,i,o){r=r||{};var l=i==="log"&&r.type==="linear",s=i==="linear"&&r.type==="log";if(!(l||s))return;var u=t._fullLayout.images,c=r._id.charAt(0),f,d;for(var p=0;p<u.length;p++){f=u[p];d="images["+p+"].";if(f[c+"ref"]===r._id){var v=f[c],h=f["size"+c],g=null,y=null;if(l){g=a(v,r.range);var m=h/Math.pow(10,g)/2;y=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else{g=Math.pow(10,v);y=g*(Math.pow(10,h/2)-Math.pow(10,-h/2))}if(!n(g)){g=null;y=null}else if(!n(y))y=null;o(d+c,g);o(d+"size"+c,y)}}}},{"../../lib/to_log_range":187,"fast-isnumeric":11}],93:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var l="images";t.exports=function e(t,r){var n={name:l,handleItemDefaults:s};i(t,r,n)};function s(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var l=i("source");var s=i("visible",!!l);if(!s)return t;i("layer");i("xanchor");i("yanchor");i("sizex");i("sizey");i("sizing");i("opacity");var u={_fullLayout:r},c=["x","y"];for(var f=0;f<2;f++){var d=c[f],p=a.coerceRef(e,t,u,d,"paper");a.coercePosition(t,u,i,p,d,0)}return t}},{"../../lib":164,"../../plots/array_container_defaults":205,"../../plots/cartesian/axes":209,"./attributes":91}],94:[function(e,t,r){"use strict";var n=e("d3");var a=e("../drawing");var i=e("../../plots/cartesian/axes");var o=e("../../constants/xmlns_namespaces");t.exports=function e(t){var r=t._fullLayout,l=[],s={},u=[],c,f;for(f=0;f<r.images.length;f++){var d=r.images[f];if(d.visible){if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){c=d.xref+d.yref;var p=r._plots[c];if(!p){u.push(d);continue}if(p.mainplot){c=p.mainplot.id}if(!s[c]){s[c]=[]}s[c].push(d)}else if(d.layer==="above"){l.push(d)}else{u.push(d)}}}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function h(e){var r=n.select(this);if(this.img&&this.img.src===e.source){return}r.attr("xmlns",o.svg);var a=new Promise(function(t){var n=new Image;this.img=n;n.setAttribute("crossOrigin","anonymous");n.onerror=a;n.onload=function(){var e=document.createElement("canvas");e.width=this.width;e.height=this.height;var n=e.getContext("2d");n.drawImage(this,0,0);var a=e.toDataURL("image/png");r.attr("xlink:href",a);t()};r.on("error",a);n.src=e.source;function a(){r.remove();t()}}.bind(this));t._promises.push(a)}function g(e){var o=n.select(this);var l=i.getFromId(t,e.xref),s=i.getFromId(t,e.yref);var u=r._size,c=l?Math.abs(l.l2p(e.sizex)-l.l2p(0)):e.sizex*u.w,f=s?Math.abs(s.l2p(e.sizey)-s.l2p(0)):e.sizey*u.h;var d=c*v.x[e.xanchor].offset,p=f*v.y[e.yanchor].offset;var h=v.x[e.xanchor].sizing+v.y[e.yanchor].sizing;var g=(l?l.r2p(e.x)+l._offset:e.x*u.w+u.l)+d,y=(s?s.r2p(e.y)+s._offset:u.h-e.y*u.h+u.t)+p;switch(e.sizing){case"fill":h+=" slice";break;case"stretch":h="none";break}o.attr({x:g,y:y,width:c,height:f,preserveAspectRatio:h,opacity:e.opacity});var m=l?l._id:"",x=s?s._id:"",b=m+x;o.call(a.setClipUrl,b?"clip"+r._uid+b:null)}var y=r._imageLowerLayer.selectAll("image").data(u),m=r._imageUpperLayer.selectAll("image").data(l);y.enter().append("image");m.enter().append("image");y.exit().remove();m.exit().remove();y.each(function(e){h.bind(this)(e);g.bind(this)(e)});m.each(function(e){h.bind(this)(e);g.bind(this)(e)});var x=Object.keys(r._plots);for(f=0;f<x.length;f++){c=x[f];var b=r._plots[c];if(!b.imagelayer)continue;var _=b.imagelayer.selectAll("image").data(s[c]||[]);_.enter().append("image");_.exit().remove();_.each(function(e){h.bind(this)(e);g.bind(this)(e)})}}},{"../../constants/xmlns_namespaces":146,"../../plots/cartesian/axes":209,"../drawing":69,d3:8}],95:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":219,"./attributes":91,"./convert_coords":92,"./defaults":93,"./draw":94}],96:[function(e,t,r){"use strict";r.isRightAnchor=function e(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};r.isCenterAnchor=function e(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};r.isBottomAnchor=function e(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3};r.isMiddleAnchor=function e(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3}},{}],97:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");t.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":235,"../color/attributes":43}],98:[function(e,t,r){"use strict";t.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4}},{}],99:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../plot_api/plot_template");var o=e("./attributes");var l=e("../../plots/layout_attributes");var s=e("./helpers");t.exports=function e(t,r,u){var c=t.legend||{};var f=0;var d="normal";var p,v,h,g;for(var y=0;y<u.length;y++){var m=u[y];if(s.legendGetsTrace(m)){f++;if(n.traceIs(m,"pie"))f++}if(n.traceIs(m,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(m.fill)!==-1){d=s.isGrouped({traceorder:d})?"grouped+reversed":"reversed"}if(m.legendgroup!==undefined&&m.legendgroup!==""){d=s.isReversed({traceorder:d})?"reversed+grouped":"grouped"}}var x=a.coerce(t,r,l,"showlegend",f>1);if(x===false)return;var b=i.newContainer(r,"legend");function _(e,t){return a.coerce(c,b,o,e,t)}_("bgcolor",r.paper_bgcolor);_("bordercolor");_("borderwidth");a.coerceFont(_,"font",r.font);_("orientation");if(b.orientation==="h"){var w=t.xaxis;if(w&&w.rangeslider&&w.rangeslider.visible){p=0;h="left";v=1.1;g="bottom"}else{p=0;h="left";v=-.1;g="top"}}_("traceorder",d);if(s.isGrouped(r.legend))_("tracegroupgap");_("x",p);_("xanchor",h);_("y",v);_("yanchor",g);a.noneOrAll(c,b,["x","y"])}},{"../../lib":164,"../../plot_api/plot_template":199,"../../plots/layout_attributes":247,"../../registry":258,"./attributes":97,"./helpers":103}],100:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib/events");var s=e("../dragelement");var u=e("../drawing");var c=e("../color");var f=e("../../lib/svg_text_utils");var d=e("./handle_click");var p=e("./constants");var v=e("../../constants/interactions");var h=e("../../constants/alignment");var g=h.LINE_SPACING;var y=h.FROM_TL;var m=h.FROM_BR;var x=e("./get_legend_data");var b=e("./style");var _=e("./helpers");var w=e("./anchor_utils");var k=v.DBLCLICKDELAY;t.exports=function e(t){var r=t._fullLayout;var l="legend"+r._uid;if(!r._infolayer||!t.calcdata)return;if(!t._legendMouseDownTime)t._legendMouseDownTime=0;var f=r.legend;var d=r.showlegend&&x(t.calcdata,f);var v=r.hiddenlabels||[];if(!r.showlegend||!d.length){r._infolayer.selectAll(".legend").remove();r._topdefs.select("#"+l).remove();i.autoMargin(t,"legend");return}var h=0;for(var g=0;g<d.length;g++){for(var y=0;y<d[g].length;y++){var m=d[g][y][0];var _=m.trace;var k=o.traceIs(_,"pie");var T=k?m.label:_.name;h=Math.max(h,T&&T.length||0)}}var S=false;var O=a.ensureSingle(r._infolayer,"g","legend",function(e){e.attr("pointer-events","all");S=true});var D=a.ensureSingleById(r._topdefs,"clipPath",l,function(e){e.append("rect")});var E=a.ensureSingle(O,"rect","bg",function(e){e.attr("shape-rendering","crispEdges")});E.call(c.stroke,f.bordercolor).call(c.fill,f.bgcolor).style("stroke-width",f.borderwidth+"px");var R=a.ensureSingle(O,"g","scrollbox");var I=a.ensureSingle(O,"rect","scrollbar",function(e){e.attr({rx:20,ry:3,width:0,height:0}).call(c.fill,"#808BA4")});var N=R.selectAll("g.groups").data(d);N.enter().append("g").attr("class","groups");N.exit().remove();var F=N.selectAll("g.traces").data(a.identity);F.enter().append("g").attr("class","traces");F.exit().remove();F.call(b,t).style("opacity",function(e){var t=e[0].trace;if(o.traceIs(t,"pie")){return v.indexOf(e[0].label)!==-1?.5:1}else{return t.visible==="legendonly"?.5:1}}).each(function(){n.select(this).call(A,t,h).call(L,t)});if(S){C(t,N,F);P(t)}var j=0,B=r.width,q=0,H=r.height;C(t,N,F);if(f._height>H){z(t)}else{P(t)}var U=r._size,V=U.l+U.w*f.x,G=U.t+U.h*(1-f.y);if(w.isRightAnchor(f)){V-=f._width}else if(w.isCenterAnchor(f)){V-=f._width/2}if(w.isBottomAnchor(f)){G-=f._height}else if(w.isMiddleAnchor(f)){G-=f._height/2}var Y=f._width,Z=U.w;if(Y>Z){V=U.l;Y=Z}else{if(V+Y>B)V=B-Y;if(V<j)V=j;Y=Math.min(B-V,f._width)}var X=f._height,W=U.h;if(X>W){G=U.t;X=W}else{if(G+X>H)G=H-X;if(G<q)G=q;X=Math.min(H-G,f._height)}u.setTranslate(O,V,G);I.on(".drag",null);O.on("wheel",null);if(f._height<=X||t._context.staticPlot){E.attr({width:Y-f.borderwidth,height:X-f.borderwidth,x:f.borderwidth/2,y:f.borderwidth/2});u.setTranslate(R,0,0);D.select("rect").attr({width:Y-2*f.borderwidth,height:X-2*f.borderwidth,x:f.borderwidth,y:f.borderwidth});u.setClipUrl(R,l);u.setRect(I,0,0,0,0);delete f._scrollY}else{var J=Math.max(p.scrollBarMinHeight,X*X/f._height);var Q=X-J-2*p.scrollBarMargin;var $=f._height-X;var K=Q/$;var ee=Math.min(f._scrollY||0,$);E.attr({width:Y-2*f.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:X-f.borderwidth,x:f.borderwidth/2,y:f.borderwidth/2});D.select("rect").attr({width:Y-2*f.borderwidth+p.scrollBarWidth+p.scrollBarMargin,height:X-2*f.borderwidth,x:f.borderwidth,y:f.borderwidth+ee});u.setClipUrl(R,l);ae(ee,J,K);O.on("wheel",function(){ee=a.constrain(f._scrollY+n.event.deltaY/Q*$,0,$);ae(ee,J,K);if(ee!==0&&ee!==$){n.event.preventDefault()}});var te,re;var ne=n.behavior.drag().on("dragstart",function(){te=n.event.sourceEvent.clientY;re=ee}).on("drag",function(){var e=n.event.sourceEvent;if(e.buttons===2||e.ctrlKey)return;ee=a.constrain((e.clientY-te)/K+re,0,$);ae(ee,J,K)});I.call(ne)}function ae(e,r,n){f._scrollY=t._fullLayout.legend._scrollY=e;u.setTranslate(R,0,-e);u.setRect(I,Y,p.scrollBarMargin+e*n,p.scrollBarWidth,r);D.select("rect").attr({y:f.borderwidth+e})}if(t._context.edits.legendPosition){var ie,oe,le,se;O.classed("cursor-move",true);s.init({element:O.node(),gd:t,prepFn:function(){var e=u.getTranslate(O);le=e.x;se=e.y},moveFn:function(e,t){var r=le+e,n=se+t;u.setTranslate(O,r,n);ie=s.align(r,0,U.l,U.l+U.w,f.xanchor);oe=s.align(n,0,U.t+U.h,U.t,f.yanchor)},doneFn:function(){if(ie!==undefined&&oe!==undefined){o.call("relayout",t,{"legend.x":ie,"legend.y":oe})}},clickFn:function(e,n){var a=r._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return n.clientX>=e.left&&n.clientX<=e.right&&n.clientY>=e.top&&n.clientY<=e.bottom});if(a.size()>0){M(t,O,a,e,n)}}})}};function M(e,t,r,n,a){var i=r.data()[0][0].trace;var o={event:a,node:r.node(),curveNumber:i.index,expandedIndex:i._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};if(i._group){o.group=i._group}if(i.type==="pie"){o.label=r.datum()[0].label}var s=l.triggerHandler(e,"plotly_legendclick",o);if(s===false)return;if(n===1){t._clickTimeout=setTimeout(function(){d(r,e,n)},k)}else if(n===2){if(t._clickTimeout)clearTimeout(t._clickTimeout);e._legendMouseDownTime=0;var u=l.triggerHandler(e,"plotly_legenddoubleclick",o);if(u!==false)d(r,e,n)}}function A(e,t,r){var n=e.data()[0][0];var i=t._fullLayout;var l=n.trace;var s=o.traceIs(l,"pie");var c=l.index;var d=s?n.label:l.name;var p=t._context.edits.legendText&&!s;var v=a.ensureSingle(e,"text","legendtext");v.attr("text-anchor","start").classed("user-select-none",true).call(u.font,i.legend.font).text(p?T(d,r):d);function h(r){f.convertToTspans(r,t,function(){S(e,t)})}if(p){v.call(f.makeEditable,{gd:t,text:d}).call(h).on("edit",function(e){this.text(T(e,r)).call(h);var i=n.trace._fullInput||{};var l={};if(o.hasTransform(i,"groupby")){var s=o.getTransformIndices(i,"groupby");var u=s[s.length-1];var f=a.keyedContainer(i,"transforms["+u+"].styles","target","value.name");f.set(n.trace._group,e);l=f.constructUpdate()}else{l.name=e}return o.call("restyle",t,l,c)})}else{h(v)}}function T(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var n=r-e.length;n>0;n--)e+=" ";return e}function L(e,t){var r,i=1;var o=a.ensureSingle(e,"rect","legendtoggle",function(e){e.style("cursor","pointer").attr("pointer-events","all").call(c.fill,"rgba(0,0,0,0)")});o.on("mousedown",function(){r=(new Date).getTime();if(r-t._legendMouseDownTime<k){i+=1}else{i=1;t._legendMouseDownTime=r}});o.on("mouseup",function(){if(t._dragged||t._editing)return;var r=t._fullLayout.legend;if((new Date).getTime()-t._legendMouseDownTime>k){i=Math.max(i-1,1)}M(t,r,e,i,n.event)})}function S(e,t){var r=e.data()[0][0];if(!r.trace.showlegend){e.remove();return}var n=e.select("g[class*=math-group]");var a=n.node();var i=t._fullLayout.legend;var o=i.font.size*g;var l,s;if(a){var c=u.bBox(a);l=c.height;s=c.width;u.setTranslate(n,0,l/4)}else{var d=e.select(".legendtext");var p=f.lineCount(d);var v=d.node();l=o*p;s=v?u.bBox(v).width:0;var h=o*(.3+(1-p)/2);f.positionText(d,40,h)}l=Math.max(l,16)+3;r.height=l;r.width=s}function C(e,t,r){var a=e._fullLayout;var i=a.legend;var o=i.borderwidth;var l=_.isGrouped(i);var s=0;i._width=0;i._height=0;if(_.isVertical(i)){if(l){t.each(function(e,t){u.setTranslate(this,0,t*i.tracegroupgap)})}r.each(function(e){var t=e[0],r=t.height,n=t.width;u.setTranslate(this,o,5+o+i._height+r/2);i._height+=r;i._width=Math.max(i._width,n)});i._width+=45+o*2;i._height+=10+o*2;if(l){i._height+=(i._lgroupsLength-1)*i.tracegroupgap}s=40}else if(l){var c=[i._width],f=t.data();for(var d=0,p=f.length;d<p;d++){var v=f[d].map(function(e){return e[0].width});var h=40+Math.max.apply(null,v);i._width+=i.tracegroupgap+h;c.push(i._width)}t.each(function(e,t){u.setTranslate(this,c[t],0)});t.each(function(){var e=n.select(this),t=e.selectAll("g.traces"),r=0;t.each(function(e){var t=e[0],n=t.height;u.setTranslate(this,0,5+o+r+n/2);r+=n});i._height=Math.max(i._height,r)});i._height+=10+o*2;i._width+=o*2}else{var g=0,y=0,m=0,x=0,b=0,w=i.tracegroupgap||5,k;r.each(function(e){m=Math.max(40+e[0].width,m);b+=40+e[0].width+w});k=a.width-(a.margin.r+a.margin.l)>o+b-w;r.each(function(e){var t=e[0],r=k?40+e[0].width:m;if(o+x+w+r>a.width-(a.margin.r+a.margin.l)){x=0;g=g+y;i._height=i._height+y;y=0}u.setTranslate(this,o+x,5+o+t.height/2+g);i._width+=w+r;i._height=Math.max(i._height,t.height);x+=w+r;y=Math.max(t.height,y)});i._width+=o*2;i._height+=10+o*2}i._width=Math.ceil(i._width);i._height=Math.ceil(i._height);r.each(function(t){var r=t[0],a=n.select(this).select(".legendtoggle");u.setRect(a,0,-r.height/2,(e._context.edits.legendText?0:i._width)+s,r.height)})}function P(e){var t=e._fullLayout,r=t.legend;var n="left";if(w.isRightAnchor(r)){n="right"}else if(w.isCenterAnchor(r)){n="center"}var a="top";if(w.isBottomAnchor(r)){a="bottom"}else if(w.isMiddleAnchor(r)){a="middle"}i.autoMargin(e,"legend",{x:r.x,y:r.y,l:r._width*y[n],r:r._width*m[n],b:r._height*m[a],t:r._height*y[a]})}function z(e){var t=e._fullLayout,r=t.legend;var n="left";if(w.isRightAnchor(r)){n="right"}else if(w.isCenterAnchor(r)){n="center"}i.autoMargin(e,"legend",{x:r.x,y:.5,l:r._width*y[n],r:r._width*m[n],b:0,t:0})}},{"../../constants/alignment":142,"../../constants/interactions":143,"../../lib":164,"../../lib/events":155,"../../lib/svg_text_utils":185,"../../plots/plots":249,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"./anchor_utils":96,"./constants":98,"./get_legend_data":101,"./handle_click":102,"./helpers":103,"./style":105,d3:8}],101:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./helpers");t.exports=function e(t,r){var i={},o=[],l=false,s={},u=0;var c,f;function d(e,t){if(e===""||!a.isGrouped(r)){var n="~~i"+u;o.push(n);i[n]=[[t]];u++}else if(o.indexOf(e)===-1){o.push(e);l=true;i[e]=[[t]]}else i[e].push([t])}for(c=0;c<t.length;c++){var p=t[c],v=p[0],h=v.trace,g=h.legendgroup;if(!a.legendGetsTrace(h)||!h.showlegend)continue;if(n.traceIs(h,"pie")){if(!s[g])s[g]={};for(f=0;f<p.length;f++){var y=p[f].label;if(!s[g][y]){d(g,{label:y,color:p[f].color,i:p[f].i,trace:h});s[g][y]=true}}}else d(g,v)}if(!o.length)return[];var m=o.length,x,b;if(l&&a.isGrouped(r)){b=new Array(m);for(c=0;c<m;c++){x=i[o[c]];b[c]=a.isReversed(r)?x.reverse():x}}else{b=[new Array(m)];for(c=0;c<m;c++){x=i[o[c]][0];b[0][a.isReversed(r)?m-c-1:c]=x}m=1}r._lgroupsLength=m;return b}},{"../../registry":258,"./helpers":103}],102:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=true;t.exports=function e(t,r,o){if(r._dragged||r._editing)return;var l=r._fullLayout.hiddenlabels?r._fullLayout.hiddenlabels.slice():[];var s=t.data()[0][0];var u=r._fullData;var c=s.trace;var f=c.legendgroup;var d,p,v,h,g,y;var m={};var x=[];var b=[];var _=[];function w(e,t,r){var n=x.indexOf(e);var a=m[t];if(!a){a=m[t]=[]}if(x.indexOf(e)===-1){x.push(e);n=x.length-1}a[n]=r;return n}function k(e,t){var r=e._fullInput;if(a.hasTransform(r,"groupby")){var i=b[r.index];if(!i){var o=a.getTransformIndices(r,"groupby");var l=o[o.length-1];i=n.keyedContainer(r,"transforms["+l+"].styles","target","value.visible");b[r.index]=i}var s=i.get(e._group);if(s===undefined){s=true}if(s!==false){i.set(e._group,t)}_[r.index]=w(r.index,"visible",r.visible===false?false:true)}else{var u=r.visible===false?false:t;w(r.index,"visible",u)}}if(o===1&&i&&r.data&&r._context.showTips){n.notifier(n._(r,"Double-click on legend to isolate one trace"),"long");i=false}else{i=false}if(a.traceIs(c,"pie")){var M=s.label,A=l.indexOf(M);if(o===1){if(A===-1)l.push(M);else l.splice(A,1)}else if(o===2){l=[];r.calcdata[0].forEach(function(e){if(M!==e.label){l.push(e.label)}});if(r._fullLayout.hiddenlabels&&r._fullLayout.hiddenlabels.length===l.length&&A===-1){l=[]}}a.call("relayout",r,"hiddenlabels",l)}else{var T=f&&f.length;var L=[];var S;if(T){for(d=0;d<u.length;d++){S=u[d];if(!S.visible)continue;if(S.legendgroup===f){L.push(d)}}}if(o===1){var C;switch(c.visible){case true:C="legendonly";break;case false:C=false;break;case"legendonly":C=true;break}if(T){for(d=0;d<u.length;d++){if(u[d].visible!==false&&u[d].legendgroup===f){k(u[d],C)}}}else{k(c,C)}}else if(o===2){var P,z,O;var D=true;for(d=0;d<u.length;d++){P=u[d]===c;if(P)continue;z=T&&u[d].legendgroup===f;if(!z&&u[d].visible===true&&!a.traceIs(u[d],"notLegendIsolatable")){D=false;break}}for(d=0;d<u.length;d++){if(u[d].visible===false)continue;if(a.traceIs(u[d],"notLegendIsolatable")){continue}switch(c.visible){case"legendonly":k(u[d],true);break;case true:O=D?true:"legendonly";P=u[d]===c;z=P||T&&u[d].legendgroup===f;k(u[d],z?true:O);break}}}for(d=0;d<b.length;d++){v=b[d];if(!v)continue;var E=v.constructUpdate();var R=Object.keys(E);for(p=0;p<R.length;p++){h=R[p];y=m[h]=m[h]||[];y[_[d]]=E[h]}}g=Object.keys(m);for(d=0;d<g.length;d++){h=g[d];for(p=0;p<x.length;p++){if(!m[h].hasOwnProperty(p)){m[h][p]=undefined}}}a.call("restyle",r,m,x)}}},{"../../lib":164,"../../registry":258}],103:[function(e,t,r){"use strict";r.legendGetsTrace=function e(t){return t.visible&&t.showlegend!==undefined};r.isGrouped=function e(t){return(t.traceorder||"").indexOf("grouped")!==-1};r.isVertical=function e(t){return t.orientation!=="h"};r.isReversed=function e(t){return(t.traceorder||"").indexOf("reversed")!==-1}},{}],104:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":97,"./defaults":99,"./draw":100,"./style":105}],105:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../drawing");var l=e("../color");var s=e("../../traces/scatter/subtypes");var u=e("../../traces/pie/style_one");t.exports=function e(t,r){t.each(function(e){var t=n.select(this);var r=i.ensureSingle(t,"g","layers");r.style("opacity",e[0].trace.opacity);var a=r.selectAll("g.legendfill").data([e]);a.enter().append("g").classed("legendfill",true);var o=r.selectAll("g.legendlines").data([e]);o.enter().append("g").classed("legendlines",true);var l=r.selectAll("g.legendsymbols").data([e]);l.enter().append("g").classed("legendsymbols",true);l.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",true)}).each(d).each(p).each(g).each(c).each(f).each(v).each(h);function c(e){var t=e[0].trace;var r=t.visible&&t.fill&&t.fill!=="none";var a=s.hasLines(t);var i=t.contours;if(i&&i.type==="constraint"){a=i.showlines;r=i._operation!=="="}var l=n.select(this).select(".legendfill").selectAll("path").data(r?[e]:[]);l.enter().append("path").classed("js-fill",true);l.exit().remove();l.attr("d","M5,0h30v6h-30z").call(o.fillGroupStyle);var u=n.select(this).select(".legendlines").selectAll("path").data(a?[e]:[]);u.enter().append("path").classed("js-line",true).attr("d","M5,0h30");u.exit().remove();u.call(o.lineGroupStyle)}function f(e){var t=e[0],a=t.trace,l=s.hasMarkers(a),u=s.hasText(a),c=s.hasLines(a);var f,d;function p(e,t,r){var n=i.nestedProperty(a,e).get(),o=Array.isArray(n)&&t?t(n):n;if(r){if(o<r[0])return r[0];else if(o>r[1])return r[1]}return o}function v(e){return e[0]}if(l||u||c){var h={};var g={};if(l){h.mc=p("marker.color",v);h.mo=p("marker.opacity",i.mean,[.2,1]);h.ms=p("marker.size",i.mean,[2,16]);h.mlc=p("marker.line.color",v);h.mlw=p("marker.line.width",i.mean,[0,5]);g.marker={sizeref:1,sizemin:1,sizemode:"diameter"}}if(c){g.line={width:p("line.width",v,[0,10])}}if(u){h.tx="Aa";h.tp=p("textposition",v);h.ts=10;h.tc=p("textfont.color",v);h.tf=p("textfont.family",v)}f=[i.minExtend(t,h)];d=i.minExtend(a,g);d.selectedpoints=null}var y=n.select(this).select("g.legendpoints");var m=y.selectAll("path.scatterpts").data(l?f:[]);m.enter().append("path").classed("scatterpts",true).attr("transform","translate(20,0)");m.exit().remove();m.call(o.pointStyle,d,r);if(l)f[0].mrc=3;var x=y.selectAll("g.pointtext").data(u?f:[]);x.enter().append("g").classed("pointtext",true).append("text").attr("transform","translate(20,0)");x.exit().remove();x.selectAll("text").call(o.textPointStyle,d,r)}function d(e){var t=e[0].trace,r=t.marker||{},i=r.line||{},o=n.select(this).select("g.legendpoints").selectAll("path.legendbar").data(a.traceIs(t,"bar")?[e]:[]);o.enter().append("path").classed("legendbar",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");o.exit().remove();o.each(function(e){var t=n.select(this),a=e[0],o=(a.mlw+1||i.width+1)-1;t.style("stroke-width",o+"px").call(l.fill,a.mc||r.color);if(o){t.call(l.stroke,a.mlc||i.color)}})}function p(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(a.traceIs(t,"box-violin")&&t.visible?[e]:[]);r.enter().append("path").classed("legendbox",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();r.each(function(){var e=t.line.width,r=n.select(this);r.style("stroke-width",e+"px").call(l.fill,t.fillcolor);if(e){l.stroke(r,t.line.color)}})}function v(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(t.type==="candlestick"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendcandle",true).attr("d",function(e,t){if(t)return"M-15,0H-8M-8,6V-6H8Z";return"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var a=t[r?"increasing":"decreasing"];var i=a.line.width,o=n.select(this);o.style("stroke-width",i+"px").call(l.fill,a.fillcolor);if(i){l.stroke(o,a.line.color)}})}function h(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(t.type==="ohlc"&&t.visible?[e,e]:[]);r.enter().append("path").classed("legendohlc",true).attr("d",function(e,t){if(t)return"M-15,0H0M-8,-6V0";return"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);r.exit().remove();r.each(function(e,r){var a=t[r?"increasing":"decreasing"];var i=a.line.width,s=n.select(this);s.style("fill","none").call(o.dashLine,a.line.dash,i);if(i){l.stroke(s,a.line.color)}})}function g(e){var t=e[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendpie").data(a.traceIs(t,"pie")&&t.visible?[e]:[]);r.enter().append("path").classed("legendpie",true).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");r.exit().remove();if(r.size())r.call(u,e[0],t)}}},{"../../lib":164,"../../registry":258,"../../traces/pie/style_one":278,"../../traces/scatter/subtypes":302,"../color":44,"../drawing":69,d3:8}],106:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../plots/plots");var i=e("../../plots/cartesian/axis_ids");var o=e("../../lib");var l=e("../../../build/ploticon");var s=o._;var u=t.exports={};u.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{};var r=t.format||"png";return r==="png"?s(e,"Download plot as a png"):s(e,"Download plot")},icon:l.camera,click:function(e){var t=e._context.toImageButtonOptions;var r={format:t.format||"png"};o.notifier(s(e,"Taking snapshot - this may take a few seconds"),"long");if(r.format!=="svg"&&o.isIE()){o.notifier(s(e,"IE only supports svg.  Changing format to svg."),"long");r.format="svg"}["filename","width","height","scale"].forEach(function(e){if(t[e]){r[e]=t[e]}});n.call("downloadImage",e,r).then(function(t){o.notifier(s(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){o.notifier(s(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};u.sendDataToCloud={name:"sendDataToCloud",title:function(e){return s(e,"Edit in Chart Studio")},icon:l.disk,click:function(e){a.sendDataToCloud(e)}};u.zoom2d={name:"zoom2d",title:function(e){return s(e,"Zoom")},attr:"dragmode",val:"zoom",icon:l.zoombox,click:c};u.pan2d={name:"pan2d",title:function(e){return s(e,"Pan")},attr:"dragmode",val:"pan",icon:l.pan,click:c};u.select2d={name:"select2d",title:function(e){return s(e,"Box Select")},attr:"dragmode",val:"select",icon:l.selectbox,click:c};u.lasso2d={name:"lasso2d",title:function(e){return s(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:l.lasso,click:c};u.zoomIn2d={name:"zoomIn2d",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:c};u.zoomOut2d={name:"zoomOut2d",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:c};u.autoScale2d={name:"autoScale2d",title:function(e){return s(e,"Autoscale")},attr:"zoom",val:"auto",icon:l.autoscale,click:c};u.resetScale2d={name:"resetScale2d",title:function(e){return s(e,"Reset axes")},attr:"zoom",val:"reset",icon:l.home,click:c};u.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return s(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:c};u.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return s(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:c};function c(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var o=r.getAttribute("data-val")||true;var l=e._fullLayout;var s={};var u=i.list(e,null,true);var c="on";var f,d;if(a==="zoom"){var p=o==="in"?.5:2,v=(1+p)/2,h=(1-p)/2;var g;for(d=0;d<u.length;d++){f=u[d];if(!f.fixedrange){g=f._name;if(o==="auto")s[g+".autorange"]=true;else if(o==="reset"){if(f._rangeInitial===undefined){s[g+".autorange"]=true}else{var y=f._rangeInitial.slice();s[g+".range[0]"]=y[0];s[g+".range[1]"]=y[1]}if(f._showSpikeInitial!==undefined){s[g+".showspikes"]=f._showSpikeInitial;if(c==="on"&&!f._showSpikeInitial){c="off"}}}else{var m=[f.r2l(f.range[0]),f.r2l(f.range[1])];var x=[v*m[0]+h*m[1],v*m[1]+h*m[0]];s[g+".range[0]"]=f.l2r(x[0]);s[g+".range[1]"]=f.l2r(x[1])}}}l._cartesianSpikesEnabled=c}else{if(a==="hovermode"&&(o==="x"||o==="y")){o=l._isHoriz?"y":"x";r.setAttribute("data-val",o)}else if(a==="hovermode"&&o==="closest"){for(d=0;d<u.length;d++){f=u[d];if(c==="on"&&!f.showspikes){c="off"}}l._cartesianSpikesEnabled=c}s[a]=o}n.call("relayout",e,s)}u.zoom3d={name:"zoom3d",title:function(e){return s(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:l.zoombox,click:f};u.pan3d={name:"pan3d",title:function(e){return s(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:l.pan,click:f};u.orbitRotation={name:"orbitRotation",title:function(e){return s(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:l["3d_rotate"],click:f};u.tableRotation={name:"tableRotation",title:function(e){return s(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:l["z-axis"],click:f};function f(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout._subplots.gl3d;var l={};var s=a.split(".");for(var u=0;u<o.length;u++){l[o[u]+"."+s[1]]=i}var c=i==="pan"?i:"zoom";l.dragmode=c;n.call("relayout",e,l)}u.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return s(e,"Reset camera to default")},attr:"resetDefault",icon:l.home,click:d};u.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return s(e,"Reset camera to last save")},attr:"resetLastSave",icon:l.movie,click:d};function d(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=e._fullLayout;var l=i._subplots.gl3d;var s={};for(var u=0;u<l.length;u++){var c=l[u],f=c+".camera",d=i[c]._scene;if(a==="resetDefault"){s[f]=null}else if(a==="resetLastSave"){s[f]=o.extendDeep({},d.cameraInitial)}}n.call("relayout",e,s)}u.hoverClosest3d={name:"hoverClosest3d",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:p};function p(e,t){var r=t.currentTarget;var a=r._previousVal||false;var i=e.layout;var l=e._fullLayout;var s=l._subplots.gl3d;var u=["xaxis","yaxis","zaxis"];var c=["showspikes","spikesides","spikethickness","spikecolor"];var f={};var d={};var p={};if(a){p=o.extendDeep(i,a);r._previousVal=null}else{p={"allaxes.showspikes":false};for(var v=0;v<s.length;v++){var h=s[v],g=l[h],y=f[h]={};y.hovermode=g.hovermode;p[h+".hovermode"]=false;for(var m=0;m<3;m++){var x=u[m];d=y[x]={};for(var b=0;b<c.length;b++){var _=c[b];d[_]=g[x][_]}}}r._previousVal=o.extendDeep({},f)}n.call("relayout",e,p)}u.zoomInGeo={name:"zoomInGeo",title:function(e){return s(e,"Zoom in")},attr:"zoom",val:"in",icon:l.zoom_plus,click:v};u.zoomOutGeo={name:"zoomOutGeo",title:function(e){return s(e,"Zoom out")},attr:"zoom",val:"out",icon:l.zoom_minus,click:v};u.resetGeo={name:"resetGeo",title:function(e){return s(e,"Reset")},attr:"reset",val:null,icon:l.autoscale,click:v};u.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:h};function v(e,t){var r=t.currentTarget;var a=r.getAttribute("data-attr");var i=r.getAttribute("data-val")||true;var o=e._fullLayout;var l=o._subplots.geo;for(var s=0;s<l.length;s++){var u=l[s];var c=o[u];if(a==="zoom"){var f=c.projection.scale;var d=i==="in"?2*f:.5*f;n.call("relayout",e,u+".projection.scale",d)}else if(a==="reset"){y(e,"geo")}}}u.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:h};u.hoverClosestPie={name:"hoverClosestPie",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:h};function h(e){var t=e._fullLayout;var r;if(t._has("cartesian")){r=t._isHoriz?"y":"x"}else r="closest";var a=e._fullLayout.hovermode?false:r;n.call("relayout",e,"hovermode",a)}u.toggleHover={name:"toggleHover",title:function(e){return s(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:true,icon:l.tooltip_basic,gravity:"ne",click:function(e,t){h(e);p(e,t)}};u.resetViews={name:"resetViews",title:function(e){return s(e,"Reset views")},icon:l.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom");r.setAttribute("data-val","reset");c(e,t);r.setAttribute("data-attr","resetLastSave");d(e,t);y(e,"geo");y(e,"mapbox")}};u.toggleSpikelines={name:"toggleSpikelines",title:function(e){return s(e,"Toggle Spike Lines")},icon:l.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled=t._cartesianSpikesEnabled==="on"?"off":"on";var r=g(e);n.call("relayout",e,r)}};function g(e){var t=e._fullLayout;var r=i.list(e,null,true);var n={};var a,o;for(var l=0;l<r.length;l++){a=r[l];o=a._name;n[o+".showspikes"]=t._cartesianSpikesEnabled==="on"?true:a._showSpikeInitial}return n}u.resetViewMapbox={name:"resetViewMapbox",title:function(e){return s(e,"Reset view")},attr:"reset",icon:l.home,click:function(e){y(e,"mapbox")}};function y(e,t){var r=e._fullLayout;var a=r._subplots[t];var i={};for(var o=0;o<a.length;o++){var l=a[o];var s=r[l]._subplot;var u=s.viewInitial;var c=Object.keys(u);for(var f=0;f<c.length;f++){var d=c[f];i[l+"."+d]=u[d]}}n.call("relayout",e,i)}},{"../../../build/ploticon":2,"../../lib":164,"../../plots/cartesian/axis_ids":212,"../../plots/plots":249,"../../registry":258}],107:[function(e,t,r){"use strict";r.manage=e("./manage")},{"./manage":108}],108:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids");var a=e("../../traces/scatter/subtypes");var i=e("../../registry");var o=e("./modebar");var l=e("./buttons");t.exports=function e(t){var r=t._fullLayout,n=t._context,a=r._modeBar;if(!n.displayModeBar){if(a){a.destroy();delete r._modeBar}return}if(!Array.isArray(n.modeBarButtonsToRemove)){throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "))}if(!Array.isArray(n.modeBarButtonsToAdd)){throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "))}var i=n.modeBarButtons;var l;if(Array.isArray(i)&&i.length){l=d(i)}else{l=s(t,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd)}if(a)a.update(t,l);else r._modeBar=o(t,l)};function s(e,t,r){var n=e._fullLayout;var a=e._fullData;var i=n._has("cartesian");var o=n._has("gl3d");var s=n._has("geo");var d=n._has("pie");var p=n._has("gl2d");var v=n._has("ternary");var h=n._has("mapbox");var g=n._has("polar");var y=u(n);var m=[];function x(e){if(!e.length)return;var r=[];for(var n=0;n<e.length;n++){var a=e[n];if(t.indexOf(a)!==-1)continue;r.push(l[a])}m.push(r)}x(["toImage","sendDataToCloud"]);var b=[];var _=[];var w=[];var k=[];if((i||p||d||v)+s+o+h+g>1){_=["toggleHover"];w=["resetViews"]}else if(s){b=["zoomInGeo","zoomOutGeo"];_=["hoverClosestGeo"];w=["resetGeo"]}else if(o){_=["hoverClosest3d"];w=["resetCameraDefault3d","resetCameraLastSave3d"]}else if(h){_=["toggleHover"];w=["resetViewMapbox"]}else if(p){_=["hoverClosestGl2d"]}else if(d){_=["hoverClosestPie"]}else{_=["toggleHover"]}if(i){_=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]}if((i||p)&&!y){b=["zoomIn2d","zoomOut2d","autoScale2d"];if(w[0]!=="resetViews")w=["resetScale2d"]}if(o){k=["zoom3d","pan3d","orbitRotation","tableRotation"]}else if((i||p)&&!y||v){k=["zoom2d","pan2d"]}else if(h||s){k=["pan2d"]}else if(g){k=["zoom2d"]}if(c(a)){k.push("select2d","lasso2d")}x(k);x(b.concat(w));x(_);return f(m,r)}function u(e){var t=n.list({_fullLayout:e},null,true);for(var r=0;r<t.length;r++){if(!t[r].fixedrange){return false}}return true}function c(e){var t=false;for(var r=0;r<e.length;r++){if(t)break;var n=e[r];if(!n._module||!n._module.selectPoints)continue;if(i.traceIs(n,"scatter-like")){if(a.hasMarkers(n)||a.hasText(n)){t=true}}else if(i.traceIs(n,"box-violin")){if(n.boxpoints==="all"||n.points==="all"){t=true}}else t=true}return t}function f(e,t){if(t.length){if(Array.isArray(t[0])){for(var r=0;r<t.length;r++){e.push(t[r])}}else e.push(t)}return e}function d(e){for(var t=0;t<e.length;t++){var r=e[t];for(var n=0;n<r.length;n++){var a=r[n];if(typeof a==="string"){if(l[a]!==undefined){e[t][n]=l[a]}else{throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}}}}return e}},{"../../plots/cartesian/axis_ids":212,"../../registry":258,"../../traces/scatter/subtypes":302,"./buttons":106,"./modebar":109}],109:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../lib");var o=e("../../../build/ploticon");function l(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var s=l.prototype;s.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context;if(r.displayModeBar==="hover"){this.element.className="modebar modebar--hover"}else this.element.className="modebar";var n=!this.hasButtons(t);var a=this.hasLogo!==r.displaylogo;var i=this.locale!==r.locale;this.locale=r.locale;if(n||a||i){this.removeAllButtons();this.updateButtons(t);if(r.displaylogo){this.element.appendChild(this.getLogo());this.hasLogo=true}}this.updateActiveButton()};s.updateButtons=function(e){var t=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(e){var r=t.createGroup();e.forEach(function(e){var n=e.name;if(!n){throw new Error("must provide button 'name' in button config")}if(t.buttonsNames.indexOf(n)!==-1){throw new Error("button name '"+n+"' is taken")}t.buttonsNames.push(n);var a=t.createButton(e);t.buttonElements.push(a);r.appendChild(a)});t.element.appendChild(r)})};s.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};s.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip");r.className="modebar-btn";var a=e.title;if(a===undefined)a=e.name;else if(typeof a==="function")a=a(this.graphInfo);if(a||a===0)r.setAttribute("data-title",a);if(e.attr!==undefined)r.setAttribute("data-attr",e.attr);var i=e.val;if(i!==undefined){if(typeof i==="function")i=i(this.graphInfo);r.setAttribute("data-val",i)}var l=e.click;if(typeof l!=="function"){throw new Error("must provide button 'click' function in button config")}else{r.addEventListener("click",function(r){e.click(t.graphInfo,r);t.updateActiveButton(r.currentTarget)})}r.setAttribute("data-toggle",e.toggle||false);if(e.toggle)n.select(r).classed("active",true);var s=e.icon;if(typeof s==="function"){r.appendChild(s())}else{r.appendChild(this.createIcon(s||o.question))}r.setAttribute("data-gravity",e.gravity||"n");return r};s.createIcon=function(e){var t=a(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg"),i=document.createElementNS(r,"path");n.setAttribute("height","1em");n.setAttribute("width",e.width/t+"em");n.setAttribute("viewBox",[0,0,e.width,t].join(" "));i.setAttribute("d",e.path);if(e.transform){i.setAttribute("transform",e.transform)}else if(e.ascent!==undefined){i.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")")}n.appendChild(i);return n};s.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==undefined?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var a=e.getAttribute("data-val")||true,o=e.getAttribute("data-attr"),l=e.getAttribute("data-toggle")==="true",s=n.select(e);if(l){if(o===r){s.classed("active",!s.classed("active"))}}else{var u=o===null?o:i.nestedProperty(t,o).get();s.classed("active",u===a)}})};s.hasButtons=function(e){var t=this.buttons;if(!t)return false;if(e.length!==t.length)return false;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return false;for(var n=0;n<e[r].length;n++){if(e[r][n].name!==t[r][n].name)return false}}return true};s.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");t.href="https://plot.ly/";t.target="_blank";t.setAttribute("data-title",i._(this.graphInfo,"Produced with Plotly"));t.className="modebar-btn plotlyjsicon modebar-btn--logo";t.appendChild(this.createIcon(o.plotlylogo));e.appendChild(t);return e};s.removeAllButtons=function(){while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.hasLogo=false};s.destroy=function(){i.removeElement(this.container.querySelector(".modebar"))};function u(e,t){var r=e._fullLayout;var a=new l({graphInfo:e,container:r._paperdiv.node(),buttons:t});if(r._privateplot){n.select(a.element).append("span").classed("badge-private float--left",true).text("PRIVATE")}return a}t.exports=u},{"../../../build/ploticon":2,"../../lib":164,d3:8,"fast-isnumeric":11}],110:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../plot_api/plot_template").templatedArray;var o=i("button",{visible:{valType:"boolean",dflt:true,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});t.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:a.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:a.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":199,"../../plots/font_attributes":235,"../color/attributes":43}],111:[function(e,t,r){"use strict";t.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],112:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../color");var i=e("../../plot_api/plot_template");var o=e("../../plots/array_container_defaults");var l=e("./attributes");var s=e("./constants");t.exports=function e(t,r,f,d,p){var v=t.rangeselector||{};var h=i.newContainer(r,"rangeselector");function g(e,t){return n.coerce(v,h,l,e,t)}var y=o(v,h,{name:"buttons",handleItemDefaults:u,calendar:p});var m=g("visible",y.length>0);if(m){var x=c(r,f,d);g("x",x[0]);g("y",x[1]);n.noneOrAll(t,r,["x","y"]);g("xanchor");g("yanchor");n.coerceFont(g,"font",f.font);var b=g("bgcolor");g("activecolor",a.contrast(b,s.lightAmount,s.darkAmount));g("bordercolor");g("borderwidth")}};function u(e,t,r,a){var i=a.calendar;function o(r,a){return n.coerce(e,t,l.buttons,r,a)}var s=o("visible");if(s){var u=o("step");if(u!=="all"){if(i&&i!=="gregorian"&&(u==="month"||u==="year")){t.stepmode="backward"}else{o("stepmode")}o("count")}o("label")}}function c(e,t,r){var n=r.filter(function(r){return t[r].anchor===e._id});var a=0;for(var i=0;i<n.length;i++){var o=t[n[i]].domain;if(o)a=Math.max(o[1],a)}return[e.domain[0],a+s.yPad]}},{"../../lib":164,"../../plot_api/plot_template":199,"../../plots/array_container_defaults":205,"../color":44,"./attributes":110,"./constants":111}],113:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../color");var l=e("../drawing");var s=e("../../lib");var u=e("../../lib/svg_text_utils");var c=e("../../plots/cartesian/axis_ids");var f=e("../legend/anchor_utils");var d=e("../../constants/alignment");var p=d.LINE_SPACING;var v=d.FROM_TL;var h=d.FROM_BR;var g=e("./constants");var y=e("./get_update_object");t.exports=function e(t){var r=t._fullLayout;var i=r._infolayer.selectAll(".rangeselector").data(m(t),x);i.enter().append("g").classed("rangeselector",true);i.exit().remove();i.style({cursor:"pointer","pointer-events":"all"});i.each(function(e){var r=n.select(this),i=e,o=i.rangeselector;var l=r.selectAll("g.button").data(s.filterVisible(o.buttons));l.enter().append("g").classed("button",true);l.exit().remove();l.each(function(e){var r=n.select(this);var l=y(i,e);e._isActive=b(i,e,l);r.call(_,o,e);r.call(k,o,e,t);r.on("click",function(){if(t._dragged)return;a.call("relayout",t,l)});r.on("mouseover",function(){e._isHovered=true;r.call(_,o,e)});r.on("mouseout",function(){e._isHovered=false;r.call(_,o,e)})});A(t,l,o,i._name,r)})};function m(e){var t=c.list(e,"x",true);var r=[];for(var n=0;n<t.length;n++){var a=t[n];if(a.rangeselector&&a.rangeselector.visible){r.push(a)}}return r}function x(e){return e._id}function b(e,t,r){if(t.step==="all"){return e.autorange===true}else{var n=Object.keys(r);return e.range[0]===r[n[0]]&&e.range[1]===r[n[1]]}}function _(e,t,r){var n=s.ensureSingle(e,"rect","selector-rect",function(e){e.attr("shape-rendering","crispEdges")});n.attr({rx:g.rx,ry:g.ry});n.call(o.stroke,t.bordercolor).call(o.fill,w(t,r)).style("stroke-width",t.borderwidth+"px")}function w(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function k(e,t,r,n){function a(e){u.convertToTspans(e,n)}var i=s.ensureSingle(e,"text","selector-text",function(e){e.classed("user-select-none",true).attr("text-anchor","middle")});i.call(l.font,t.font).text(M(r)).call(a)}function M(e){if(e.label)return e.label;if(e.step==="all")return"all";return e.count+e.step.charAt(0)}function A(e,t,r,a,o){var s=0;var c=0;var d=r.borderwidth;t.each(function(){var e=n.select(this);var t=e.select(".selector-text");var a=r.font.size*p;var i=Math.max(a*u.lineCount(t),16)+3;c=Math.max(c,i)});t.each(function(){var e=n.select(this);var t=e.select(".selector-rect");var a=e.select(".selector-text");var i=a.node()&&l.bBox(a.node()).width;var o=r.font.size*p;var f=u.lineCount(a);var v=Math.max(i+10,g.minButtonWidth);e.attr("transform","translate("+(d+s)+","+d+")");t.attr({x:0,y:0,width:v,height:c});u.positionText(a,v/2,c/2-(f-1)*o/2+3);s+=v+5});var y=e._fullLayout._size;var m=y.l+y.w*r.x;var x=y.t+y.h*(1-r.y);var b="left";if(f.isRightAnchor(r)){m-=s;b="right"}if(f.isCenterAnchor(r)){m-=s/2;b="center"}var _="top";if(f.isBottomAnchor(r)){x-=c;_="bottom"}if(f.isMiddleAnchor(r)){x-=c/2;_="middle"}s=Math.ceil(s);c=Math.ceil(c);m=Math.round(m);x=Math.round(x);i.autoMargin(e,a+"-range-selector",{x:r.x,y:r.y,l:s*v[b],r:s*h[b],b:c*h[_],t:c*v[_]});o.attr("transform","translate("+m+","+x+")")}},{"../../constants/alignment":142,"../../lib":164,"../../lib/svg_text_utils":185,"../../plots/cartesian/axis_ids":212,"../../plots/plots":249,"../../registry":258,"../color":44,"../drawing":69,"../legend/anchor_utils":96,"./constants":111,"./get_update_object":114,d3:8}],114:[function(e,t,r){"use strict";var n=e("d3");t.exports=function e(t,r){var n=t._name;var i={};if(r.step==="all"){i[n+".autorange"]=true}else{var o=a(t,r);i[n+".range[0]"]=o[0];i[n+".range[1]"]=o[1]}return i};function a(e,t){var r=e.range;var a=new Date(e.r2l(r[1]));var i=t.step,o=t.count;var l;switch(t.stepmode){case"backward":l=e.l2r(+n.time[i].utc.offset(a,-o));break;case"todate":var s=n.time[i].utc.offset(a,-o);l=e.l2r(+n.time[i].utc.ceil(s));break}var u=r[1];return[l,u]}},{d3:8}],115:[function(e,t,r){"use strict";t.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":110,"./defaults":112,"./draw":113}],116:[function(e,t,r){"use strict";var n=e("../color/attributes");t.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":false}}],editType:"calc",impliedEdits:{autorange:false}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:true,editType:"calc"},editType:"calc"}},{"../color/attributes":43}],117:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axis_ids").list;var a=e("../../plots/cartesian/autorange").getAutoRange;var i=e("./constants");t.exports=function e(t){var r=n(t,"x",true);for(var o=0;o<r.length;o++){var l=r[o],s=l[i.name];if(s&&s.visible&&s.autorange&&l._min.length&&l._max.length){s._input.autorange=true;s._input.range=s.range=a(l)}}}},{"../../plots/cartesian/autorange":208,"../../plots/cartesian/axis_ids":212,"./constants":118}],118:[function(e,t,r){"use strict";t.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],119:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plot_api/plot_template");var i=e("../../plots/cartesian/axis_ids");var o=e("./attributes");var l=e("./oppaxis_attributes");t.exports=function e(t,r,s){var u=t[s];var c=r[s];if(!(u.rangeslider||r._requestRangeslider[c._id]))return;if(!n.isPlainObject(u.rangeslider)){u.rangeslider={}}var f=u.rangeslider;var d=a.newContainer(c,"rangeslider");function p(e,t){return n.coerce(f,d,o,e,t)}var v,h;function g(e,t){return n.coerce(v,h,l,e,t)}var y=p("visible");if(!y)return;p("bgcolor",r.plot_bgcolor);p("bordercolor");p("borderwidth");p("thickness");c._rangesliderAutorange=p("autorange",!c.isValidRange(f.range));p("range");var m=r._subplots;if(m){var x=m.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===i.name2id(s)}).map(function(e){return e.substr(e.indexOf("y"),e.length)});var b=n.simpleMap(x,i.id2name);for(var _=0;_<b.length;_++){var w=b[_];v=f[w]||{};h=a.newContainer(d,w,"yaxis");var k=r[w];var M;if(v.range&&k.isValidRange(v.range)){M="fixed"}var A=g("rangemode",M);if(A!=="match"){g("range",k.range.slice())}k._rangesliderAutorange=A==="auto"}}d._input=f}},{"../../lib":164,"../../plot_api/plot_template":199,"../../plots/cartesian/axis_ids":212,"./attributes":116,"./oppaxis_attributes":122}],120:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../plots/plots");var o=e("../../lib");var l=e("../drawing");var s=e("../color");var u=e("../titles");var c=e("../../plots/cartesian");var f=e("../../plots/cartesian/axes");var d=e("../dragelement");var p=e("../../lib/setcursor");var v=e("./constants");t.exports=function(e){var t=e._fullLayout,r=h(t);function a(e){return e._name}var o=t._infolayer.selectAll("g."+v.containerClassName).data(r,a);o.enter().append("g").classed(v.containerClassName,true).attr("pointer-events","all");o.exit().each(function(e){var r=e[v.name];t._topdefs.select("#"+r._clipId).remove()}).remove();if(r.length===0)return;o.each(function(r){var a=n.select(this),o=r[v.name],l=t[f.id2name(r.anchor)],s=o[f.id2name(r.anchor)];if(o.range){var c=o.range;var d=r.range;c[0]=r.l2r(Math.min(r.r2l(c[0]),r.r2l(d[0])));c[1]=r.l2r(Math.max(r.r2l(c[1]),r.r2l(d[1])));o._input.range=c.slice()}r.cleanRange("rangeslider.range");var p=t.margin;var h=t._size;var y=r.domain;var w=(r._boundingBox||{}).height||0;var T=Infinity;var L=f.getSubplots(e,r);for(var S=0;S<L.length;S++){var C=f.getFromId(e,L[S].substr(L[S].indexOf("y")));T=Math.min(T,C.domain[0])}o._id=v.name+r._id;o._clipId=o._id+"-"+t._uid;o._width=h.w*(y[1]-y[0]);o._height=(t.height-p.b-p.t)*o.thickness;o._offsetShift=Math.floor(o.borderwidth/2);var P=Math.round(p.l+h.w*y[0]);var z=Math.round(h.t+h.h*(1-T)+w+o._offsetShift+v.extraPad);a.attr("transform","translate("+P+","+z+")");var O=r.r2l(o.range[0]),D=r.r2l(o.range[1]),E=D-O;o.p2d=function(e){return e/o._width*E+O};o.d2p=function(e){return(e-O)/E*o._width};o._rl=[O,D];if(s.rangemode!=="match"){var R=l.r2l(s.range[0]),I=l.r2l(s.range[1]),N=I-R;o.d2pOppAxis=function(e){return(e-R)/N*o._height}}a.call(x,e,r,o).call(b,e,r,o).call(_,e,r,o).call(k,e,r,o,s).call(M,e,r,o).call(A,e,r,o);g(a,e,r,o);m(a,e,r,o,l,s);if(r.side==="bottom"){u.draw(e,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:t._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:z+o._height+o._offsetShift+10+1.5*r.titlefont.size,"text-anchor":"middle"}})}i.autoMargin(e,o._id,{x:y[0],y:T,l:0,r:0,t:0,b:o._height+p.b+w,pad:v.extraPad+o._offsetShift*2})})};function h(e){var t=f.list({_fullLayout:e},"x",true),r=v.name,n=[];if(e._has("gl2d"))return n;for(var a=0;a<t.length;a++){var i=t[a];if(i[r]&&i[r].visible)n.push(i)}return n}function g(e,t,r,a){var i=e.select("rect."+v.slideBoxClassName).node(),l=e.select("rect."+v.grabAreaMinClassName).node(),s=e.select("rect."+v.grabAreaMaxClassName).node();e.on("mousedown",function(){var u=n.event,c=u.target,f=u.clientX,v=f-e.node().getBoundingClientRect().left,h=a.d2p(r._rl[0]),g=a.d2p(r._rl[1]);var m=d.coverSlip();m.addEventListener("mousemove",x);m.addEventListener("mouseup",b);function x(o){var u=+o.clientX-f;var d,x,b;switch(c){case i:b="ew-resize";d=h+u;x=g+u;break;case l:b="col-resize";d=h+u;x=g;break;case s:b="col-resize";d=h;x=g+u;break;default:b="ew-resize";d=v;x=v+u;break}if(x<d){var _=x;x=d;d=_}a._pixelMin=d;a._pixelMax=x;p(n.select(m),b);y(e,t,r,a)}function b(){m.removeEventListener("mousemove",x);m.removeEventListener("mouseup",b);o.removeElement(m)}})}function y(e,t,r,n){function i(e){return r.l2r(o.constrain(e,n._rl[0],n._rl[1]))}var l=i(n.p2d(n._pixelMin)),s=i(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){a.call("relayout",t,r._name+".range",[l,s])})}function m(e,t,r,n,a,i){var l=v.handleWidth/2;function s(e){return o.constrain(e,0,n._width)}function u(e){return o.constrain(e,0,n._height)}function c(e){return o.constrain(e,-l,n._width+l)}var f=s(n.d2p(r._rl[0])),d=s(n.d2p(r._rl[1]));e.select("rect."+v.slideBoxClassName).attr("x",f).attr("width",d-f);e.select("rect."+v.maskMinClassName).attr("width",f);e.select("rect."+v.maskMaxClassName).attr("x",d).attr("width",n._width-d);if(i.rangemode!=="match"){var p=n._height-u(n.d2pOppAxis(a._rl[1])),h=n._height-u(n.d2pOppAxis(a._rl[0]));e.select("rect."+v.maskMinOppAxisClassName).attr("x",f).attr("height",p).attr("width",d-f);e.select("rect."+v.maskMaxOppAxisClassName).attr("x",f).attr("y",h).attr("height",n._height-h).attr("width",d-f);e.select("rect."+v.slideBoxClassName).attr("y",p).attr("height",h-p)}var g=.5;var y=Math.round(c(f-l))-g,m=Math.round(c(d-l))+g;e.select("g."+v.grabberMinClassName).attr("transform","translate("+y+","+g+")");e.select("g."+v.grabberMaxClassName).attr("transform","translate("+m+","+g+")")}function x(e,t,r,n){var a=o.ensureSingle(e,"rect",v.bgClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});var i=n.borderwidth%2===0?n.borderwidth:n.borderwidth-1;var s=-n._offsetShift;var u=l.crispRound(t,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:"translate("+s+","+s+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":u})}function b(e,t,r,n){var a=t._fullLayout;var i=o.ensureSingleById(a._topdefs,"clipPath",n._clipId,function(e){e.append("rect").attr({x:0,y:0})});i.select("rect").attr({width:n._width,height:n._height})}function _(e,t,r,a){var s=f.getSubplots(t,r),u=t.calcdata;var d=e.selectAll("g."+v.rangePlotClassName).data(s,o.identity);d.enter().append("g").attr("class",function(e){return v.rangePlotClassName+" "+e}).call(l.setClipUrl,a._clipId);d.order();d.exit().remove();var p;d.each(function(e,o){var l=n.select(this),s=o===0;var d=f.getFromId(t,e,"y"),v=d._name,h=a[v];var g={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:a.range.slice(),calendar:r.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};g.layout[v]={type:d.type,domain:[0,1],range:h.rangemode!=="match"?h.range.slice():d.range.slice(),calendar:d.calendar};i.supplyDefaults(g);var y=g._fullLayout.xaxis;var m=g._fullLayout[v];var x={id:e,plotgroup:l,xaxis:y,yaxis:m,isRangePlot:true};if(s)p=x;else{x.mainplot="xy";x.mainplotinfo=p}c.rangePlot(t,x,w(u,e))})}function w(e,t){var r=[];for(var n=0;n<e.length;n++){var a=e[n],i=a[0].trace;if(i.xaxis+i.yaxis===t){r.push(a)}}return r}function k(e,t,r,n,a){var i=o.ensureSingle(e,"rect",v.maskMinClassName,function(e){e.attr({x:0,y:0,"shape-rendering":"crispEdges"})});i.attr("height",n._height).call(s.fill,v.maskColor);var l=o.ensureSingle(e,"rect",v.maskMaxClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("height",n._height).call(s.fill,v.maskColor);if(a.rangemode!=="match"){var u=o.ensureSingle(e,"rect",v.maskMinOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});u.attr("width",n._width).call(s.fill,v.maskOppAxisColor);var c=o.ensureSingle(e,"rect",v.maskMaxOppAxisClassName,function(e){e.attr({y:0,"shape-rendering":"crispEdges"})});c.attr("width",n._width).style("border-top",v.maskOppBorder).call(s.fill,v.maskOppAxisColor)}}function M(e,t,r,n){if(t._context.staticPlot)return;var a=o.ensureSingle(e,"rect",v.slideBoxClassName,function(e){e.attr({y:0,cursor:v.slideBoxCursor,"shape-rendering":"crispEdges"})});a.attr({height:n._height,fill:v.slideBoxFill})}function A(e,t,r,n){var a=o.ensureSingle(e,"g",v.grabberMinClassName);var i=o.ensureSingle(e,"g",v.grabberMaxClassName);var l={x:0,width:v.handleWidth,rx:v.handleRadius,fill:s.background,stroke:s.defaultLine,"stroke-width":v.handleStrokeWidth,"shape-rendering":"crispEdges"};var u={y:Math.round(n._height/4),height:Math.round(n._height/2)};var c=o.ensureSingle(a,"rect",v.handleMinClassName,function(e){e.attr(l)});c.attr(u);var f=o.ensureSingle(i,"rect",v.handleMaxClassName,function(e){e.attr(l)});f.attr(u);if(t._context.staticPlot)return;var d={width:v.grabAreaWidth,x:0,y:0,fill:v.grabAreaFill,cursor:v.grabAreaCursor};var p=o.ensureSingle(a,"rect",v.grabAreaMinClassName,function(e){e.attr(d)});p.attr("height",n._height);var h=o.ensureSingle(i,"rect",v.grabAreaMaxClassName,function(e){e.attr(d)});h.attr("height",n._height)}},{"../../lib":164,"../../lib/setcursor":183,"../../plots/cartesian":220,"../../plots/cartesian/axes":209,"../../plots/plots":249,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"../titles":135,"./constants":118,d3:8}],121:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./attributes");var i=e("./oppaxis_attributes");t.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},a,{yaxis:i})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw")}},{"../../lib":164,"./attributes":116,"./calc_autorange":117,"./defaults":119,"./draw":120,"./oppaxis_attributes":122}],122:[function(e,t,r){"use strict";t.exports={_isSubplotObj:true,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],123:[function(e,t,r){"use strict";var n=e("../annotations/attributes");var a=e("../../traces/scatter/attributes").line;var i=e("../drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var l=e("../../plot_api/plot_template").templatedArray;t.exports=l("shape",{visible:{valType:"boolean",dflt:true,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:o({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:o({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:o({},a.color,{editType:"arraydraw"}),width:o({},a.width,{editType:"calcIfAutorange+arraydraw"}),dash:o({},i,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":156,"../../plot_api/plot_template":199,"../../traces/scatter/attributes":280,"../annotations/attributes":29,"../drawing/attributes":68}],124:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("./constants");var o=e("./helpers");t.exports=function e(t){var r=t._fullLayout,o=n.filterVisible(r.shapes);if(!o.length||!t._fullData.length)return;for(var u=0;u<o.length;u++){var f=o[u];var d,p;if(f.xref!=="paper"){var v=f.xsizemode==="pixel"?f.xanchor:f.x0,h=f.xsizemode==="pixel"?f.xanchor:f.x1;d=a.getFromId(t,f.xref);p=c(d,v,h,f.path,i.paramIsX);if(p)a.expand(d,p,l(f))}if(f.yref!=="paper"){var g=f.ysizemode==="pixel"?f.yanchor:f.y0,y=f.ysizemode==="pixel"?f.yanchor:f.y1;d=a.getFromId(t,f.yref);p=c(d,g,y,f.path,i.paramIsY);if(p)a.expand(d,p,s(f))}}};function l(e){return u(e.line.width,e.xsizemode,e.x0,e.x1,e.path,false)}function s(e){return u(e.line.width,e.ysizemode,e.y0,e.y1,e.path,true)}function u(e,t,r,a,l,s){var u=e/2,c=s;if(t==="pixel"){var f=l?o.extractPathCoords(l,s?i.paramIsY:i.paramIsX):[r,a];var d=n.aggNums(Math.max,null,f),p=n.aggNums(Math.min,null,f),v=p<0?Math.abs(p)+u:u,h=d>0?d+u:u;return{ppad:u,ppadplus:c?v:h,ppadminus:c?h:v}}else{return{ppad:u}}}function c(e,t,r,n,a){var l=e.type==="category"?e.r2c:e.d2c;if(t!==undefined)return[l(t),l(r)];if(!n)return;var s=Infinity,u=-Infinity,c=n.match(i.segmentRE),f,d,p,v,h;if(e.type==="date")l=o.decodeDate(l);for(f=0;f<c.length;f++){d=c[f];p=a[d.charAt(0)].drawn;if(p===undefined)continue;v=c[f].substr(1).match(i.paramRE);if(!v||v.length<p)continue;h=l(v[p]);if(h<s)s=h;if(h>u)u=h}if(u>=s)return[s,u]}},{"../../lib":164,"../../plots/cartesian/axes":209,"./constants":125,"./helpers":128}],125:[function(e,t,r){"use strict";t.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:true,drawn:0},L:{0:true,drawn:0},H:{0:true,drawn:0},V:{},Q:{0:true,2:true,drawn:2},C:{0:true,2:true,4:true,drawn:4},T:{0:true,drawn:0},S:{0:true,2:true,drawn:2},Z:{}},paramIsY:{M:{1:true,drawn:1},L:{1:true,drawn:1},H:{},V:{0:true,drawn:0},Q:{1:true,3:true,drawn:3},C:{1:true,3:true,5:true,drawn:5},T:{1:true,drawn:1},S:{1:true,3:true,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],126:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/cartesian/axes");var i=e("../../plots/array_container_defaults");var o=e("./attributes");var l=e("./helpers");t.exports=function e(t,r){i(t,r,{name:"shapes",handleItemDefaults:s})};function s(e,t,r){function i(r,a){return n.coerce(e,t,o,r,a)}var s=i("visible");if(!s)return;i("layer");i("opacity");i("fillcolor");i("line.color");i("line.width");i("line.dash");var u=e.path?"path":"rect",c=i("type",u),f=i("xsizemode"),d=i("ysizemode");var p=["x","y"];for(var v=0;v<2;v++){var h=p[v],g=h+"anchor",y=h==="x"?f:d,m={_fullLayout:r},x,b,_;var w=a.coerceRef(e,t,m,h,"","paper");if(w!=="paper"){x=a.getFromId(m,w);_=l.rangeToShapePosition(x);b=l.shapePositionToRange(x)}else{b=_=n.identity}if(c!=="path"){var k=.25,M=.75;var A=h+"0",T=h+"1",L=e[A],S=e[T];e[A]=b(e[A],true);e[T]=b(e[T],true);if(y==="pixel"){i(A,0);i(T,10)}else{a.coercePosition(t,m,i,w,A,k);a.coercePosition(t,m,i,w,T,M)}t[A]=_(t[A]);t[T]=_(t[T]);e[A]=L;e[T]=S}if(y==="pixel"){var C=e[g];e[g]=b(e[g],true);a.coercePosition(t,m,i,w,g,.25);t[g]=_(t[g]);e[g]=C}}if(c==="path"){i("path")}else{n.noneOrAll(e,t,["x0","x1","y0","y1"])}}},{"../../lib":164,"../../plots/array_container_defaults":205,"../../plots/cartesian/axes":209,"./attributes":123,"./helpers":128}],127:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../plots/cartesian/axes");var o=e("../color");var l=e("../drawing");var s=e("../../plot_api/plot_template").arrayEditor;var u=e("../dragelement");var c=e("../../lib/setcursor");var f=e("./constants");var d=e("./helpers");t.exports={draw:p,drawOne:v};function p(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove();t._shapeLowerLayer.selectAll("path").remove();for(var r in t._plots){var n=t._plots[r].shapelayer;if(n)n.selectAll("path").remove()}for(var a=0;a<t.shapes.length;a++){if(t.shapes[a].visible){v(e,a)}}}function v(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=e._fullLayout.shapes[t]||{};if(!r._input||r.visible===false)return;if(r.layer!=="below"){i(e._fullLayout._shapeUpperLayer)}else if(r.xref==="paper"||r.yref==="paper"){i(e._fullLayout._shapeLowerLayer)}else{var n=e._fullLayout._plots[r.xref+r.yref];if(n){var a=n.mainplotinfo||n;i(a.shapelayer)}else{i(e._fullLayout._shapeLowerLayer)}}function i(n){var a={"data-index":t,"fill-rule":"evenodd",d:y(e,r)},i=r.line.width?r.line.color:"rgba(0,0,0,0)";var s=n.append("path").attr(a).style("opacity",r.opacity).call(o.stroke,i).call(o.fill,r.fillcolor).call(l.dashLine,r.line.dash,r.line.width);h(s,e,r);if(e._context.edits.shapePosition)g(e,s,r,t,n)}}function h(e,t,r){var n=(r.xref+r.yref).replace(/paper/g,"");e.call(l.setClipUrl,n?"clip"+t._fullLayout._uid+n:null)}function g(e,t,r,o,p){var v=10;var g=10;var m=r.xsizemode==="pixel";var b=r.ysizemode==="pixel";var _=r.type==="line";var w=r.type==="path";var k=s(e.layout,"shapes",r);var M=k.modifyItem;var A,T,L,S,C,P;var z,O,D,E,R,I,N,F;var j;var B=i.getFromId(e,r.xref),q=i.getFromId(e,r.yref),H=d.getDataToPixel(e,B),U=d.getDataToPixel(e,q,true),V=d.getPixelToData(e,B),G=d.getPixelToData(e,q,true);var Y=W();var Z={element:Y.node(),gd:e,prepFn:$,doneFn:K,clickFn:ee},X;u.init(Z);Y.node().onmousemove=Q;function W(){return _?J():t}function J(){var e=10,n=Math.max(r.line.width,e);var a=p.append("g").attr("data-index",o);a.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":n,"stroke-opacity":"0"});var i={"fill-opacity":"0"};var l=n/2>e?n/2:e;a.append("circle").attr({"data-line-point":"start-point",cx:m?H(r.xanchor)+r.x0:H(r.x0),cy:b?U(r.yanchor)-r.y0:U(r.y0),r:l}).style(i).classed("cursor-grab",true);a.append("circle").attr({"data-line-point":"end-point",cx:m?H(r.xanchor)+r.x1:H(r.x1),cy:b?U(r.yanchor)-r.y1:U(r.y1),r:l}).style(i).classed("cursor-grab",true);return a}function Q(e){if(_){if(e.target.tagName==="path"){X="move"}else{X=e.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point"}}else{var r=Z.element.getBoundingClientRect();var n=r.right-r.left,a=r.bottom-r.top,i=e.clientX-r.left,o=e.clientY-r.top,l=!w&&n>v&&a>g&&!e.shiftKey?u.getCursor(i/n,1-o/a):"move";c(t,l);X=l.split("-")[0]}}function $(n){if(m){C=H(r.xanchor)}if(b){P=U(r.yanchor)}if(r.type==="path"){j=r.path}else{A=m?r.x0:H(r.x0);T=b?r.y0:U(r.y0);L=m?r.x1:H(r.x1);S=b?r.y1:U(r.y1)}if(A<L){D=A;N="x0";E=L;F="x1"}else{D=L;N="x1";E=A;F="x0"}if(!b&&T<S||b&&T>S){z=T;R="y0";O=S;I="y1"}else{z=S;R="y1";O=T;I="y0"}Q(n);ne(p,r);ie(t,r,e);Z.moveFn=X==="move"?te:re}function K(){c(t);ae(p);h(t,e,r);n.call("relayout",e,k.getUpdateObj())}function ee(){ae(p)}function te(n,a){if(r.type==="path"){var i=function(e){return e},o=i,l=i;if(m){M("xanchor",r.xanchor=V(C+n))}else{o=function e(t){return V(H(t)+n)};if(B&&B.type==="date")o=d.encodeDate(o)}if(b){M("yanchor",r.yanchor=G(P+a))}else{l=function e(t){return G(U(t)+a)};if(q&&q.type==="date")l=d.encodeDate(l)}M("path",r.path=x(j,o,l))}else{if(m){M("xanchor",r.xanchor=V(C+n))}else{M("x0",r.x0=V(A+n));M("x1",r.x1=V(L+n))}if(b){M("yanchor",r.yanchor=G(P+a))}else{M("y0",r.y0=G(T+a));M("y1",r.y1=G(S+a))}}t.attr("d",y(e,r));ne(p,r)}function re(n,a){if(w){var i=function(e){return e},o=i,l=i;if(m){M("xanchor",r.xanchor=V(C+n))}else{o=function e(t){return V(H(t)+n)};if(B&&B.type==="date")o=d.encodeDate(o)}if(b){M("yanchor",r.yanchor=G(P+a))}else{l=function e(t){return G(U(t)+a)};if(q&&q.type==="date")l=d.encodeDate(l)}M("path",r.path=x(j,o,l))}else if(_){if(X==="resize-over-start-point"){var s=A+n;var u=b?T-a:T+a;M("x0",r.x0=m?s:V(s));M("y0",r.y0=b?u:G(u))}else if(X==="resize-over-end-point"){var c=L+n;var f=b?S-a:S+a;M("x1",r.x1=m?c:V(c));M("y1",r.y1=b?f:G(f))}}else{var h=~X.indexOf("n")?z+a:z,k=~X.indexOf("s")?O+a:O,Y=~X.indexOf("w")?D+n:D,Z=~X.indexOf("e")?E+n:E;if(~X.indexOf("n")&&b)h=z-a;if(~X.indexOf("s")&&b)k=O-a;if(!b&&k-h>g||b&&h-k>g){M(R,r[R]=b?h:G(h));M(I,r[I]=b?k:G(k))}if(Z-Y>v){M(N,r[N]=m?Y:V(Y));M(F,r[F]=m?Z:V(Z))}}t.attr("d",y(e,r));ne(p,r)}function ne(e,t){if(m||b){r()}function r(){var r=t.type!=="path";var n=e.selectAll(".visual-cue").data([0]);var i=1;n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":i}).classed("visual-cue",true);var o=H(m?t.xanchor:a.midRange(r?[t.x0,t.x1]:d.extractPathCoords(t.path,f.paramIsX)));var l=U(b?t.yanchor:a.midRange(r?[t.y0,t.y1]:d.extractPathCoords(t.path,f.paramIsY)));o=d.roundPositionForSharpStrokeRendering(o,i);l=d.roundPositionForSharpStrokeRendering(l,i);if(m&&b){var s="M"+(o-1-i)+","+(l-1-i)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",s)}else if(m){var u="M"+(o-1-i)+","+(l-9-i)+"v18 h2 v-18 Z";n.attr("d",u)}else{var c="M"+(o-9-i)+","+(l-1-i)+"h18 v2 h-18 Z";n.attr("d",c)}}}function ae(e){e.selectAll(".visual-cue").remove()}function ie(e,t,r){var n=t.xref,a=t.yref,o=i.getFromId(r,n),s=i.getFromId(r,a);var u="";if(n!=="paper"&&!o.autorange)u+=n;if(a!=="paper"&&!s.autorange)u+=a;e.call(l.setClipUrl,u?"clip"+r._fullLayout._uid+u:null)}}function y(e,t){var r=t.type,n=i.getFromId(e,t.xref),a=i.getFromId(e,t.yref),o=e._fullLayout._size,l,s,u,c,f,p,v,h;if(n){l=d.shapePositionToRange(n);s=function(e){return n._offset+n.r2p(l(e,true))}}else{s=function(e){return o.l+o.w*e}}if(a){u=d.shapePositionToRange(a);c=function(e){return a._offset+a.r2p(u(e,true))}}else{c=function(e){return o.t+o.h*(1-e)}}if(r==="path"){if(n&&n.type==="date")s=d.decodeDate(s);if(a&&a.type==="date")c=d.decodeDate(c);return m(t,s,c)}if(t.xsizemode==="pixel"){var g=s(t.xanchor);f=g+t.x0;p=g+t.x1}else{f=s(t.x0);p=s(t.x1)}if(t.ysizemode==="pixel"){var y=c(t.yanchor);v=y-t.y0;h=y-t.y1}else{v=c(t.y0);h=c(t.y1)}if(r==="line")return"M"+f+","+v+"L"+p+","+h;if(r==="rect")return"M"+f+","+v+"H"+p+"V"+h+"H"+f+"Z";var x=(f+p)/2,b=(v+h)/2,_=Math.abs(x-f),w=Math.abs(b-v),k="A"+_+","+w,M=x+_+","+b,A=x+","+(b-w);return"M"+M+k+" 0 1,1 "+A+k+" 0 0,1 "+M+"Z"}function m(e,t,r){var n=e.path,i=e.xsizemode,o=e.ysizemode,l=e.xanchor,s=e.yanchor;return n.replace(f.segmentRE,function(e){var n=0,u=e.charAt(0),c=f.paramIsX[u],d=f.paramIsY[u],p=f.numParams[u];var v=e.substr(1).replace(f.paramRE,function(e){if(c[n]){if(i==="pixel")e=t(l)+Number(e);else e=t(e)}else if(d[n]){if(o==="pixel")e=r(s)-Number(e);else e=r(e)}n++;if(n>p)e="X";return e});if(n>p){v=v.replace(/[\s,]*X.*/,"");a.log("Ignoring extra params in segment "+e)}return u+v})}function x(e,t,r){return e.replace(f.segmentRE,function(e){var n=0,a=e.charAt(0),i=f.paramIsX[a],o=f.paramIsY[a],l=f.numParams[a];var s=e.substr(1).replace(f.paramRE,function(e){if(n>=l)return e;if(i[n])e=t(e);else if(o[n])e=r(e);n++;return e});return a+s})}},{"../../lib":164,"../../lib/setcursor":183,"../../plot_api/plot_template":199,"../../plots/cartesian/axes":209,"../../registry":258,"../color":44,"../dragelement":66,"../drawing":69,"./constants":125,"./helpers":128}],128:[function(e,t,r){"use strict";var n=e("./constants");var a=e("../../lib");r.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(e){return e}};r.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(e){return e}};r.decodeDate=function(e){return function(t){if(t.replace)t=t.replace("_"," ");return e(t)}};r.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};r.extractPathCoords=function(e,t){var r=[];var i=e.match(n.segmentRE);i.forEach(function(e){var i=t[e.charAt(0)].drawn;if(i===undefined)return;var o=e.substr(1).match(n.paramRE);if(!o||o.length<i)return;r.push(a.cleanNumber(o[i]))});return r};r.getDataToPixel=function(e,t,n){var a=e._fullLayout._size,i;if(t){var o=r.shapePositionToRange(t);i=function(e){return t._offset+t.r2p(o(e,true))};if(t.type==="date")i=r.decodeDate(i)}else if(n){i=function(e){return a.t+a.h*(1-e)}}else{i=function(e){return a.l+a.w*e}}return i};r.getPixelToData=function(e,t,n){var a=e._fullLayout._size,i;if(t){var o=r.rangeToShapePosition(t);i=function(e){return o(t.p2r(e-t._offset))}}else if(n){i=function(e){return 1-(e-a.t)/a.h}}else{i=function(e){return(e-a.l)/a.w}}return i};r.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1;var n=Math.round(e);return r?n+.5:n}},{"../../lib":164,"./constants":125}],129:[function(e,t,r){"use strict";var n=e("./draw");t.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:n.draw,drawOne:n.drawOne}},{"../../plots/cartesian/include_components":219,"./attributes":123,"./calc_autorange":124,"./defaults":126,"./draw":127}],130:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../../plots/pad_attributes");var i=e("../../lib/extend").extendDeepAll;var o=e("../../plot_api/edit_types").overrideAll;var l=e("../../plots/animation_attributes");var s=e("../../plot_api/plot_template").templatedArray;var u=e("./constants");var c=s("step",{visible:{valType:"boolean",dflt:true},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:true}});t.exports=o(s("slider",{visible:{valType:"boolean",dflt:true},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i({},a,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:l.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:true},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:u.gripBgActiveColor},bgcolor:{valType:"color",dflt:u.railBgColor},bordercolor:{valType:"color",dflt:u.railBorderColor},borderwidth:{valType:"number",min:0,dflt:u.railBorderWidth},ticklen:{valType:"number",min:0,dflt:u.tickLength},tickcolor:{valType:"color",dflt:u.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:u.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":156,"../../plot_api/edit_types":192,"../../plot_api/plot_template":199,"../../plots/animation_attributes":204,"../../plots/font_attributes":235,"../../plots/pad_attributes":248,"./constants":131}],131:[function(e,t,r){"use strict";t.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],132:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var l=o.name;var s=i.steps;t.exports=function e(t,r){a(t,r,{name:l,handleItemDefaults:u})};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var l=a(e,t,{name:"steps",handleItemDefaults:c});var s=0;for(var u=0;u<l.length;u++){if(l[u].visible)s++}var f;if(s<2)f=t.visible=false;else f=o("visible");if(!f)return;t._stepCount=s;var d=t._visibleSteps=n.filterVisible(l);var p=o("active");if(!(l[p]||{}).visible)t.active=d[0]._index;o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("len");o("lenmode");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);var v=o("currentvalue.visible");if(v){o("currentvalue.xanchor");o("currentvalue.prefix");o("currentvalue.suffix");o("currentvalue.offset");n.coerceFont(o,"currentvalue.font",t.font)}o("transition.duration");o("transition.easing");o("bgcolor");o("activebgcolor");o("bordercolor");o("borderwidth");o("ticklen");o("tickwidth");o("tickcolor");o("minorticklen")}function c(e,t){function r(r,a){return n.coerce(e,t,s,r,a)}var a;if(e.method!=="skip"&&!Array.isArray(e.args)){a=t.visible=false}else a=r("visible");if(a){r("method");r("args");var i=r("label","step-"+t._index);r("value",i);r("execute")}}},{"../../lib":164,"../../plots/array_container_defaults":205,"./attributes":130,"./constants":131}],133:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var c=e("../../plot_api/plot_template").arrayEditor;var f=e("./constants");var d=e("../../constants/alignment");var p=d.LINE_SPACING;var v=d.FROM_TL;var h=d.FROM_BR;t.exports=function e(t){var r=t._fullLayout,i=y(r,t);var o=r._infolayer.selectAll("g."+f.containerClassName).data(i.length>0?[0]:[]);o.enter().append("g").classed(f.containerClassName,true).style("cursor","ew-resize");function l(e){if(e._commandObserver){e._commandObserver.remove();delete e._commandObserver}a.autoMargin(t,g(e))}o.exit().each(function(){n.select(this).selectAll("g."+f.groupClassName).each(l)}).remove();if(i.length===0)return;var s=o.selectAll("g."+f.groupClassName).data(i,m);s.enter().append("g").classed(f.groupClassName,true);s.exit().each(l).remove();for(var u=0;u<i.length;u++){var c=i[u];x(t,c)}s.each(function(e){var r=n.select(this);C(e);a.manageCommandObserver(t,e,e._visibleSteps,function(e){var n=r.data()[0];if(n.active===e.index)return;if(n._dragging)return;T(t,r,n,e.index,false,true)});b(t,n.select(this),e)})};function g(e){return f.autoMarginIdRoot+e._index}function y(e,t){var r=e[f.name],n=[];for(var a=0;a<r.length;a++){var i=r[a];if(!i.visible)continue;i._gd=t;n.push(i)}return n}function m(e){return e._index}function x(e,t){var r=o.tester.selectAll("g."+f.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(f.labelGroupClass,true);var i=0;var l=0;r.each(function(e){var r=n.select(this);var a=k(r,{step:e},t);var s=a.node();if(s){var u=o.bBox(s);l=Math.max(l,u.height);i=Math.max(i,u.width)}});r.remove();var c=t._dims={};c.inputAreaWidth=Math.max(f.railWidth,f.gripHeight);var d=e._fullLayout._size;c.lx=d.l+d.w*t.x;c.ly=d.t+d.h*(1-t.y);if(t.lenmode==="fraction"){c.outerLength=Math.round(d.w*t.len)}else{c.outerLength=t.len}c.inputAreaStart=0;c.inputAreaLength=Math.round(c.outerLength-t.pad.l-t.pad.r);var p=c.inputAreaLength-2*f.stepInset;var y=p/(t._stepCount-1);var m=i+f.labelPadding;c.labelStride=Math.max(1,Math.ceil(m/y));c.labelHeight=l;c.currentValueMaxWidth=0;c.currentValueHeight=0;c.currentValueTotalHeight=0;c.currentValueMaxLines=1;if(t.currentvalue.visible){var x=o.tester.append("g");r.each(function(e){var r=_(x,t,e.label);var n=r.node()&&o.bBox(r.node())||{width:0,height:0};var a=s.lineCount(r);c.currentValueMaxWidth=Math.max(c.currentValueMaxWidth,Math.ceil(n.width));c.currentValueHeight=Math.max(c.currentValueHeight,Math.ceil(n.height));c.currentValueMaxLines=Math.max(c.currentValueMaxLines,a)});c.currentValueTotalHeight=c.currentValueHeight+t.currentvalue.offset;x.remove()}c.height=c.currentValueTotalHeight+f.tickOffset+t.ticklen+f.labelOffset+c.labelHeight+t.pad.t+t.pad.b;var b="left";if(u.isRightAnchor(t)){c.lx-=c.outerLength;b="right"}if(u.isCenterAnchor(t)){c.lx-=c.outerLength/2;b="center"}var w="top";if(u.isBottomAnchor(t)){c.ly-=c.height;w="bottom"}if(u.isMiddleAnchor(t)){c.ly-=c.height/2;w="middle"}c.outerLength=Math.ceil(c.outerLength);c.height=Math.ceil(c.height);c.lx=Math.round(c.lx);c.ly=Math.round(c.ly);var M={y:t.y,b:c.height*h[w],t:c.height*v[w]};if(t.lenmode==="fraction"){M.l=0;M.xl=t.x-t.len*v[b];M.r=0;M.xr=t.x+t.len*h[b]}else{M.x=t.x;M.l=c.outerLength*v[b];M.r=c.outerLength*h[b]}a.autoMargin(e,g(t),M)}function b(e,t,r){if(!(r.steps[r.active]||{}).visible){r.active=r._visibleSteps[0]._index}t.call(_,r).call(E,r).call(M,r).call(S,r).call(D,e,r).call(w,e,r);var n=r._dims;o.setTranslate(t,n.lx+r.pad.l,n.ly+r.pad.t);t.call(P,r,false);t.call(_,r)}function _(e,t,r){if(!t.currentvalue.visible)return;var n=t._dims;var a,i;switch(t.currentvalue.xanchor){case"right":a=n.inputAreaLength-f.currentValueInset-n.currentValueMaxWidth;i="left";break;case"center":a=n.inputAreaLength*.5;i="middle";break;default:a=f.currentValueInset;i="left"}var u=l.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":i,"data-notex":1})});var c=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r==="string"){c+=r}else{var d=t.steps[t.active].label;c+=d}if(t.currentvalue.suffix){c+=t.currentvalue.suffix}u.call(o.font,t.currentvalue.font).text(c).call(s.convertToTspans,t._gd);var v=s.lineCount(u);var h=(n.currentValueMaxLines+1-v)*t.currentvalue.font.size*p;s.positionText(u,a,h);return u}function w(e,t,r){var n=l.ensureSingle(e,"rect",f.gripRectClass,function(n){n.call(L,t,e,r).style("pointer-events","all")});n.attr({width:f.gripWidth,height:f.gripHeight,rx:f.gripRadius,ry:f.gripRadius}).call(i.stroke,r.bordercolor).call(i.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function k(e,t,r){var n=l.ensureSingle(e,"text",f.labelClass,function(e){e.classed("user-select-none",true).attr({"text-anchor":"middle","data-notex":1})});n.call(o.font,r.font).text(t.step.label).call(s.convertToTspans,r._gd);return n}function M(e,t){var r=l.ensureSingle(e,"g",f.labelsClass);var a=t._dims;var i=r.selectAll("g."+f.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(f.labelGroupClass,true);i.exit().remove();i.each(function(e){var r=n.select(this);r.call(k,e,t);o.setTranslate(r,z(t,e.fraction),f.tickOffset+t.ticklen+t.font.size*p+f.labelOffset+a.currentValueTotalHeight)})}function A(e,t,r,n,a){var i=Math.round(n*(r._stepCount-1));var o=r._visibleSteps[i]._index;if(o!==r.active){T(e,t,r,o,true,a)}}function T(e,t,r,n,i,o){var l=r.active;r.active=n;c(e.layout,f.name,r).applyUpdate("active",n);var s=r.steps[r.active];t.call(P,r,o);t.call(_,r);e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:i,previousActive:l});if(s&&s.method&&i){if(t._nextMethod){t._nextMethod.step=s;t._nextMethod.doCallback=i;t._nextMethod.doTransition=o}else{t._nextMethod={step:s,doCallback:i,doTransition:o};t._nextMethodRaf=window.requestAnimationFrame(function(){var r=t._nextMethod.step;if(!r.method)return;if(r.execute){a.executeAPICommand(e,r.method,r.args)}t._nextMethod=null;t._nextMethodRaf=null})}}}function L(e,t,r){var a=r.node();var o=n.select(t);function l(){return r.data()[0]}e.on("mousedown",function(){var e=l();t.emit("plotly_sliderstart",{slider:e});var s=r.select("."+f.gripRectClass);n.event.stopPropagation();n.event.preventDefault();s.call(i.fill,e.activebgcolor);var u=O(e,n.mouse(a)[0]);A(t,r,e,u,true);e._dragging=true;o.on("mousemove",function(){var e=l();var i=O(e,n.mouse(a)[0]);A(t,r,e,i,false)});o.on("mouseup",function(){var e=l();e._dragging=false;s.call(i.fill,e.bgcolor);o.on("mouseup",null);o.on("mousemove",null);t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function S(e,t){var r=e.selectAll("rect."+f.tickRectClass).data(t._visibleSteps);var a=t._dims;r.enter().append("rect").classed(f.tickRectClass,true);r.exit().remove();r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"});r.each(function(e,r){var l=r%a.labelStride===0;var s=n.select(this);s.attr({height:l?t.ticklen:t.minorticklen}).call(i.fill,l?t.tickcolor:t.tickcolor);o.setTranslate(s,z(t,r/(t._stepCount-1))-.5*t.tickwidth,(l?f.tickOffset:f.minorTickOffset)+a.currentValueTotalHeight)})}function C(e){var t=e._dims;t.labelSteps=[];var r=e._stepCount;for(var n=0;n<r;n+=t.labelStride){t.labelSteps.push({fraction:n/(r-1),step:e._visibleSteps[n]})}}function P(e,t,r){var n=e.select("rect."+f.gripRectClass);var a=0;for(var i=0;i<t._stepCount;i++){if(t._visibleSteps[i]._index===t.active){a=i;break}}var o=z(t,a/(t._stepCount-1));if(t._invokingCommand)return;var l=n;if(r&&t.transition.duration>0){l=l.transition().duration(t.transition.duration).ease(t.transition.easing)}l.attr("transform","translate("+(o-f.gripWidth*.5)+","+t._dims.currentValueTotalHeight+")")}function z(e,t){var r=e._dims;return r.inputAreaStart+f.stepInset+(r.inputAreaLength-2*f.stepInset)*Math.min(1,Math.max(0,t))}function O(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-f.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*f.stepInset-2*r.inputAreaStart)))}function D(e,t,r){var n=r._dims;var a=l.ensureSingle(e,"rect",f.railTouchRectClass,function(n){n.call(L,t,e,r).style("pointer-events","all")});a.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,f.tickOffset+r.ticklen+n.labelHeight)}).call(i.fill,r.bgcolor).attr("opacity",0);o.setTranslate(a,0,n.currentValueTotalHeight)}function E(e,t){var r=t._dims;var n=r.inputAreaLength-f.railInset*2;var a=l.ensureSingle(e,"rect",f.railRectClass);a.attr({width:n,height:f.railWidth,rx:f.railRadius,ry:f.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px");o.setTranslate(a,f.railInset,(r.inputAreaWidth-f.railWidth)*.5+r.currentValueTotalHeight)}},{"../../constants/alignment":142,"../../lib":164,"../../lib/svg_text_utils":185,"../../plot_api/plot_template":199,"../../plots/plots":249,"../color":44,"../drawing":69,"../legend/anchor_utils":96,"./constants":131,d3:8}],134:[function(e,t,r){"use strict";var n=e("./constants");t.exports={moduleType:"component",name:n.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":130,"./constants":131,"./defaults":132,"./draw":133}],135:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib");var s=e("../drawing");var u=e("../color");var c=e("../../lib/svg_text_utils");var f=e("../../constants/interactions");t.exports={draw:p};var d=/ [XY][0-9]* /;function p(e,t,r){var p=r.propContainer;var v=r.propName;var h=r.placeholder;var g=r.traceIndex;var y=r.avoid||{};var m=r.attributes;var x=r.transform;var b=r.containerGroup;var _=e._fullLayout;var w=p.titlefont||{};var k=w.family;var M=w.size;var A=w.color;var T=1;var L=false;var S=(p.title||"").trim();var C;if(v==="title")C="titleText";else if(v.indexOf("axis")!==-1)C="axisTitleText";else if(v.indexOf("colorbar"!==-1))C="colorbarTitleText";var P=e._context.edits[C];if(S==="")T=0;else if(S.replace(d," % ")===h.replace(d," % ")){T=.2;L=true;if(!P)S=""}var z=S||P;if(!b){b=l.ensureSingle(_._infolayer,"g","g-"+t)}var O=b.selectAll("text").data(z?[0]:[]);O.enter().append("text");O.text(S).attr("class",t);O.exit().remove();if(!z)return b;function D(e){l.syncOrAsync([E,R],e)}function E(t){var r;if(x){r="";if(x.rotate){r+="rotate("+[x.rotate,m.x,m.y]+")"}if(x.offset){r+="translate(0, "+x.offset+")"}}else{r=null}t.attr("transform",r);t.style({"font-family":k,"font-size":n.round(M,2)+"px",fill:u.rgb(A),opacity:T*u.opacity(A),"font-weight":i.fontWeight}).attr(m).call(c.convertToTspans,e);return i.previousPromises(e)}function R(e){var t=n.select(e.node().parentNode);if(y&&y.selection&&y.side&&S){t.attr("transform",null);var r=0;var i={left:"right",right:"left",top:"bottom",bottom:"top"}[y.side];var o=["left","top"].indexOf(y.side)!==-1?-1:1;var u=a(y.pad)?y.pad:2;var c=s.bBox(t.node());var f={left:0,top:0,right:_.width,bottom:_.height};var d=y.maxShift||(f[y.side]-c[y.side])*(y.side==="left"||y.side==="top"?-1:1);if(d<0)r=d;else{var p=y.offsetLeft||0;var v=y.offsetTop||0;c.left-=p;c.right-=p;c.top-=v;c.bottom-=v;y.selection.each(function(){var e=s.bBox(this);if(l.bBoxIntersect(c,e,u)){r=Math.max(r,o*(e[y.side]-c[i])+u)}});r=Math.min(d,r)}if(r>0||d<0){var h={left:[-r,0],right:[r,0],top:[0,-r],bottom:[0,r]}[y.side];t.attr("transform","translate("+h+")")}}}O.call(D);function I(){T=0;L=true;O.text(h).on("mouseover.opacity",function(){n.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}if(P){if(!S)I();else O.on(".opacity",null);O.call(c.makeEditable,{gd:e}).on("edit",function(t){if(g!==undefined){o.call("restyle",e,v,t,g)}else{o.call("relayout",e,v,t)}}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(D)}).on("input",function(e){this.text(e||" ").call(c.positionText,m.x,m.y)})}O.classed("js-placeholder",L);return b}},{"../../constants/interactions":143,"../../lib":164,"../../lib/svg_text_utils":185,"../../plots/plots":249,"../../registry":258,"../color":44,"../drawing":69,d3:8,"fast-isnumeric":11}],136:[function(e,t,r){"use strict";var n=e("../../plots/font_attributes");var a=e("../color/attributes");var i=e("../../lib/extend").extendFlat;var o=e("../../plot_api/edit_types").overrideAll;var l=e("../../plots/pad_attributes");var s=e("../../plot_api/plot_template").templatedArray;var u=s("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:true,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:true}});t.exports=o(s("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:true},buttons:u,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i({},l,{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:a.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":156,"../../plot_api/edit_types":192,"../../plot_api/plot_template":199,"../../plots/font_attributes":235,"../../plots/pad_attributes":248,"../color/attributes":43}],137:[function(e,t,r){"use strict";t.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],138:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../plots/array_container_defaults");var i=e("./attributes");var o=e("./constants");var l=o.name;var s=i.buttons;t.exports=function e(t,r){var n={name:l,handleItemDefaults:u};a(t,r,n)};function u(e,t,r){function o(r,a){return n.coerce(e,t,i,r,a)}var l=a(e,t,{name:"buttons",handleItemDefaults:c});var s=o("visible",l.length>0);if(!s)return;o("active");o("direction");o("type");o("showactive");o("x");o("y");n.noneOrAll(e,t,["x","y"]);o("xanchor");o("yanchor");o("pad.t");o("pad.r");o("pad.b");o("pad.l");n.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor);o("bordercolor");o("borderwidth")}function c(e,t){function r(r,a){return n.coerce(e,t,s,r,a)}var a=r("visible",e.method==="skip"||Array.isArray(e.args));if(a){r("method");r("args");r("label");r("execute")}}},{"../../lib":164,"../../plots/array_container_defaults":205,"./attributes":136,"./constants":137}],139:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../plots/plots");var i=e("../color");var o=e("../drawing");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../legend/anchor_utils");var c=e("../../plot_api/plot_template").arrayEditor;var f=e("../../constants/alignment").LINE_SPACING;var d=e("./constants");var p=e("./scrollbox");t.exports=function e(t){var r=t._fullLayout,i=l.filterVisible(r[d.name]);function o(e){a.autoMargin(t,C(e))}var s=r._menulayer.selectAll("g."+d.containerClassName).data(i.length>0?[0]:[]);s.enter().append("g").classed(d.containerClassName,true).style("cursor","pointer");s.exit().each(function(){n.select(this).selectAll("g."+d.headerGroupClassName).each(o)}).remove();if(i.length===0)return;var u=s.selectAll("g."+d.headerGroupClassName).data(i,v);u.enter().append("g").classed(d.headerGroupClassName,true);var c=l.ensureSingle(s,"g",d.dropdownButtonGroupClassName,function(e){e.style("pointer-events","all")});for(var f=0;f<i.length;f++){var h=i[f];S(t,h)}var b="updatemenus"+r._uid,_=new p(t,c,b);if(u.enter().size()){c.node().parentNode.appendChild(c.node());c.call(z)}u.exit().each(function(e){c.call(z);o(e)}).remove();u.each(function(e){var r=n.select(this);var i=e.type==="dropdown"?c:null;a.manageCommandObserver(t,e,e.buttons,function(n){y(t,e,e.buttons[n.index],r,i,_,n.index,true)});if(e.type==="dropdown"){m(t,r,c,_,e);if(g(c,e)){x(t,r,c,_,e)}}else{x(t,r,null,null,e)}})};function v(e){return e._index}function h(e){return+e.attr(d.menuIndexAttrName)===-1}function g(e,t){return+e.attr(d.menuIndexAttrName)===t._index}function y(e,t,r,n,a,i,o,l){t.active=o;c(e.layout,d.name,t).applyUpdate("active",o);if(t.type==="buttons"){x(e,n,null,null,t)}else if(t.type==="dropdown"){a.attr(d.menuIndexAttrName,"-1");m(e,n,a,i,t);if(!l){x(e,n,a,i,t)}}}function m(e,t,r,n,a){var i=l.ensureSingle(t,"g",d.headerClassName,function(e){e.style("pointer-events","all")});var s=a._dims;var u=a.active;var c=a.buttons[u]||d.blankHeaderOpts;var f={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0};var p={width:s.headerWidth,height:s.headerHeight};i.call(w,a,c,e).call(P,a,f,p);var v=l.ensureSingle(t,"text",d.headerArrowClassName,function(e){e.classed("user-select-none",true).attr("text-anchor","end").call(o.font,a.font).text(d.arrowSymbol[a.direction])});v.attr({x:s.headerWidth-d.arrowOffsetX+a.pad.l,y:s.headerHeight/2+d.textOffsetY+a.pad.t});i.on("click",function(){r.call(z,String(g(r,a)?-1:a._index));x(e,t,r,n,a)});i.on("mouseover",function(){i.call(T)});i.on("mouseout",function(){i.call(L,a)});o.setTranslate(t,s.lx,s.ly)}function x(e,t,r,i,o){if(!r){r=t;r.attr("pointer-events","all")}var s=!h(r)||o.type==="buttons"?o.buttons:[];var u=o.type==="dropdown"?d.dropdownButtonClassName:d.buttonClassName;var c=r.selectAll("g."+u).data(l.filterVisible(s));var f=c.enter().append("g").classed(u,true);var p=c.exit();if(o.type==="dropdown"){f.attr("opacity","0").transition().attr("opacity","1");p.transition().attr("opacity","0").remove()}else{p.remove()}var v=0;var g=0;var m=o._dims;var x=["up","down"].indexOf(o.direction)!==-1;if(o.type==="dropdown"){if(x){g=m.headerHeight+d.gapButtonHeader}else{v=m.headerWidth+d.gapButtonHeader}}if(o.type==="dropdown"&&o.direction==="up"){g=-d.gapButtonHeader+d.gapButton-m.openHeight}if(o.type==="dropdown"&&o.direction==="left"){v=-d.gapButtonHeader+d.gapButton-m.openWidth}var k={x:m.lx+v+o.pad.l,y:m.ly+g+o.pad.t,yPad:d.gapButton,xPad:d.gapButton,index:0};var M={l:k.x+o.borderwidth,t:k.y+o.borderwidth};c.each(function(l,s){var u=n.select(this);u.call(w,o,l,e).call(P,o,k);u.on("click",function(){if(n.event.defaultPrevented)return;y(e,o,l,t,r,i,s);if(l.execute){a.executeAPICommand(e,l.method,l.args)}e.emit("plotly_buttonclicked",{menu:o,button:l,active:o.active})});u.on("mouseover",function(){u.call(T)});u.on("mouseout",function(){u.call(L,o);c.call(A,o)})});c.call(A,o);if(x){M.w=Math.max(m.openWidth,m.headerWidth);M.h=k.y-M.t}else{M.w=k.x-M.l;M.h=Math.max(m.openHeight,m.headerHeight)}M.direction=o.direction;if(i){if(c.size()){b(e,t,r,i,o,M)}else{_(i)}}}function b(e,t,r,n,a,i){var o=a.direction;var l=o==="up"||o==="down";var s=a._dims;var u=a.active,c,f,p;if(l){f=0;for(p=0;p<u;p++){f+=s.heights[p]+d.gapButton}}else{c=0;for(p=0;p<u;p++){c+=s.widths[p]+d.gapButton}}n.enable(i,c,f);if(n.hbar){n.hbar.attr("opacity","0").transition().attr("opacity","1")}if(n.vbar){n.vbar.attr("opacity","0").transition().attr("opacity","1")}}function _(e){var t=!!e.hbar,r=!!e.vbar;if(t){e.hbar.transition().attr("opacity","0").each("end",function(){t=false;if(!r)e.disable()})}if(r){e.vbar.transition().attr("opacity","0").each("end",function(){r=false;if(!t)e.disable()})}}function w(e,t,r,n){e.call(k,t).call(M,t,r,n)}function k(e,t){var r=l.ensureSingle(e,"rect",d.itemRectClassName,function(e){e.attr({rx:d.rx,ry:d.ry,"shape-rendering":"crispEdges"})});r.call(i.stroke,t.bordercolor).call(i.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function M(e,t,r,n){var a=l.ensureSingle(e,"text",d.itemTextClassName,function(e){e.classed("user-select-none",true).attr({"text-anchor":"start","data-notex":1})});a.call(o.font,t.font).text(r.label).call(s.convertToTspans,n)}function A(e,t){var r=t.active;e.each(function(e,a){var o=n.select(this);if(a===r&&t.showactive){o.select("rect."+d.itemRectClassName).call(i.fill,d.activeColor)}})}function T(e){e.select("rect."+d.itemRectClassName).call(i.fill,d.hoverColor)}function L(e,t){e.select("rect."+d.itemRectClassName).call(i.fill,t.bgcolor)}function S(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0};var i=o.tester.selectAll("g."+d.dropdownButtonClassName).data(l.filterVisible(t.buttons));i.enter().append("g").classed(d.dropdownButtonClassName,true);var c=["up","down"].indexOf(t.direction)!==-1;i.each(function(a,i){var l=n.select(this);l.call(w,t,a,e);var u=l.select("."+d.itemTextClassName);var p=u.node()&&o.bBox(u.node()).width;var v=Math.max(p+d.textPadX,d.minWidth);var h=t.font.size*f;var g=s.lineCount(u);var y=Math.max(h*g,d.minHeight)+d.textOffsetY;y=Math.ceil(y);v=Math.ceil(v);r.widths[i]=v;r.heights[i]=y;r.height1=Math.max(r.height1,y);r.width1=Math.max(r.width1,v);if(c){r.totalWidth=Math.max(r.totalWidth,v);r.openWidth=r.totalWidth;r.totalHeight+=y+d.gapButton;r.openHeight+=y+d.gapButton}else{r.totalWidth+=v+d.gapButton;r.openWidth+=v+d.gapButton;r.totalHeight=Math.max(r.totalHeight,y);r.openHeight=r.totalHeight}});if(c){r.totalHeight-=d.gapButton}else{r.totalWidth-=d.gapButton}r.headerWidth=r.width1+d.arrowPadX;r.headerHeight=r.height1;if(t.type==="dropdown"){if(c){r.width1+=d.arrowPadX;r.totalHeight=r.height1}else{r.totalWidth=r.width1}r.totalWidth+=d.arrowPadX}i.remove();var p=r.totalWidth+t.pad.l+t.pad.r;var v=r.totalHeight+t.pad.t+t.pad.b;var h=e._fullLayout._size;r.lx=h.l+h.w*t.x;r.ly=h.t+h.h*(1-t.y);var g="left";if(u.isRightAnchor(t)){r.lx-=p;g="right"}if(u.isCenterAnchor(t)){r.lx-=p/2;g="center"}var y="top";if(u.isBottomAnchor(t)){r.ly-=v;y="bottom"}if(u.isMiddleAnchor(t)){r.ly-=v/2;y="middle"}r.totalWidth=Math.ceil(r.totalWidth);r.totalHeight=Math.ceil(r.totalHeight);r.lx=Math.round(r.lx);r.ly=Math.round(r.ly);a.autoMargin(e,C(t),{x:t.x,y:t.y,l:p*({right:1,center:.5}[g]||0),r:p*({left:1,center:.5}[g]||0),b:v*({top:1,middle:.5}[y]||0),t:v*({bottom:1,middle:.5}[y]||0)})}function C(e){return d.autoMarginIdRoot+e._index}function P(e,t,r,n){n=n||{};var a=e.select("."+d.itemRectClassName);var i=e.select("."+d.itemTextClassName);var l=t.borderwidth;var u=r.index;var c=t._dims;o.setTranslate(e,l+r.x,l+r.y);var p=["up","down"].indexOf(t.direction)!==-1;var v=n.height||(p?c.heights[u]:c.height1);a.attr({x:0,y:0,width:n.width||(p?c.width1:c.widths[u]),height:v});var h=t.font.size*f;var g=s.lineCount(i);var y=(g-1)*h/2;s.positionText(i,d.textOffsetX,v/2-y+d.textOffsetY);if(p){r.y+=c.heights[u]+r.yPad}else{r.x+=c.widths[u]+r.xPad}r.index++}function z(e,t){e.attr(d.menuIndexAttrName,t||"-1").selectAll("g."+d.dropdownButtonClassName).remove()}},{"../../constants/alignment":142,"../../lib":164,"../../lib/svg_text_utils":185,"../../plot_api/plot_template":199,"../../plots/plots":249,"../color":44,"../drawing":69,"../legend/anchor_utils":96,"./constants":137,"./scrollbox":141,d3:8}],140:[function(e,t,r){arguments[4][134][0].apply(r,arguments)},{"./attributes":136,"./constants":137,"./defaults":138,"./draw":139,dup:134}],141:[function(e,t,r){"use strict";t.exports=l;var n=e("d3");var a=e("../color");var i=e("../drawing");var o=e("../../lib");function l(e,t,r){this.gd=e;this.container=t;this.id=r;this.position=null;this.translateX=null;this.translateY=null;this.hbar=null;this.vbar=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",true).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}l.barWidth=2;l.barLength=20;l.barRadius=2;l.barPad=1;l.barColor="#808BA4";l.prototype.enable=function e(t,r,o){var s=this.gd._fullLayout,u=s.width,c=s.height;this.position=t;var f=this.position.l,d=this.position.w,p=this.position.t,v=this.position.h,h=this.position.direction,g=h==="down",y=h==="left",m=h==="right",x=h==="up",b=d,_=v,w,k,M,A;if(!g&&!y&&!m&&!x){this.position.direction="down";g=true}var T=g||x;if(T){w=f;k=w+b;if(g){M=p;A=Math.min(M+_,c);_=A-M}else{A=p+_;M=Math.max(A-_,0);_=A-M}}else{M=p;A=M+_;if(y){k=f+b;w=Math.max(k-b,0);b=k-w}else{w=f;k=Math.min(w+b,u);b=k-w}}this._box={l:w,t:M,w:b,h:_};var L=d>b,S=l.barLength+2*l.barPad,C=l.barWidth+2*l.barPad,P=f,z=p+v;if(z+C>c)z=c-C;var O=this.container.selectAll("rect.scrollbar-horizontal").data(L?[0]:[]);O.exit().on(".drag",null).remove();O.enter().append("rect").classed("scrollbar-horizontal",true).call(a.fill,l.barColor);if(L){this.hbar=O.attr({rx:l.barRadius,ry:l.barRadius,x:P,y:z,width:S,height:C});this._hbarXMin=P+S/2;this._hbarTranslateMax=b-S}else{delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}var D=v>_,E=l.barWidth+2*l.barPad,R=l.barLength+2*l.barPad,I=f+d,N=p;if(I+E>u)I=u-E;var F=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);F.exit().on(".drag",null).remove();F.enter().append("rect").classed("scrollbar-vertical",true).call(a.fill,l.barColor);if(D){this.vbar=F.attr({rx:l.barRadius,ry:l.barRadius,x:I,y:N,width:E,height:R});this._vbarYMin=N+R/2;this._vbarTranslateMax=_-R}else{delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}var j=this.id,B=w-.5,q=D?k+E+.5:k+.5,H=M-.5,U=L?A+C+.5:A+.5;var V=s._topdefs.selectAll("#"+j).data(L||D?[0]:[]);V.exit().remove();V.enter().append("clipPath").attr("id",j).append("rect");if(L||D){this._clipRect=V.select("rect").attr({x:Math.floor(B),y:Math.floor(H),width:Math.ceil(q)-Math.floor(B),height:Math.ceil(U)-Math.floor(H)});this.container.call(i.setClipUrl,j);this.bg.attr({x:f,y:p,width:d,height:v})}else{this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(L||D){var G=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var Y=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));if(L){this.hbar.on(".drag",null).call(Y)}if(D){this.vbar.on(".drag",null).call(Y)}}this.setTranslate(r,o)};l.prototype.disable=function e(){if(this.hbar||this.vbar){this.bg.attr({width:0,height:0});this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null);delete this._clipRect}if(this.hbar){this.hbar.on(".drag",null);this.hbar.remove();delete this.hbar;delete this._hbarXMin;delete this._hbarTranslateMax}if(this.vbar){this.vbar.on(".drag",null);this.vbar.remove();delete this.vbar;delete this._vbarYMin;delete this._vbarTranslateMax}};l.prototype._onBoxDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t-=n.event.dx}if(this.vbar){r-=n.event.dy}this.setTranslate(t,r)};l.prototype._onBoxWheel=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){t+=n.event.deltaY}if(this.vbar){r+=n.event.deltaY}this.setTranslate(t,r)};l.prototype._onBarDrag=function e(){var t=this.translateX,r=this.translateY;if(this.hbar){var a=t+this._hbarXMin,i=a+this._hbarTranslateMax,l=o.constrain(n.event.x,a,i),s=(l-a)/(i-a);var u=this.position.w-this._box.w;t=s*u}if(this.vbar){var c=r+this._vbarYMin,f=c+this._vbarTranslateMax,d=o.constrain(n.event.y,c,f),p=(d-c)/(f-c);var v=this.position.h-this._box.h;r=p*v}this.setTranslate(t,r)};l.prototype.setTranslate=function e(t,r){var n=this.position.w-this._box.w,a=this.position.h-this._box.h;t=o.constrain(t||0,0,n);r=o.constrain(r||0,0,a);this.translateX=t;this.translateY=r;this.container.call(i.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r);if(this._clipRect){this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)})}if(this.hbar){var l=t/n;this.hbar.call(i.setTranslate,t+l*this._hbarTranslateMax,r)}if(this.vbar){var s=r/a;this.vbar.call(i.setTranslate,t,r+s*this._vbarTranslateMax)}}},{"../../lib":164,"../color":44,"../drawing":69,d3:8}],142:[function(e,t,r){"use strict";t.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],143:[function(e,t,r){"use strict";t.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2}},{}],144:[function(e,t,r){"use strict";t.exports={BADNUM:undefined,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"}},{}],145:[function(e,t,r){"use strict";t.exports={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}}},{}],146:[function(e,t,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/";r.svg="http://www.w3.org/2000/svg";r.xlink="http://www.w3.org/1999/xlink";r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],147:[function(e,t,r){"use strict";r.version="1.39.1";e("es6-promise").polyfill();e("../build/plotcss");e("./fonts/mathjax_config");var n=e("./registry");var a=r.register=n.register;var i=e("./plot_api");var o=Object.keys(i);for(var l=0;l<o.length;l++){var s=o[l];r[s]=i[s];a({moduleType:"apiMethod",name:s,fn:i[s]})}a(e("./traces/scatter"));a([e("./components/fx"),e("./components/legend"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars")]);a([e("./locale-en"),e("./locale-en-us")]);r.Icons=e("../build/ploticon");r.Plots=e("./plots/plots");r.Fx=e("./components/fx");r.Snapshot=e("./snapshot");r.PlotSchema=e("./plot_api/plot_schema");r.Queue=e("./lib/queue");r.d3=e("d3")},{"../build/plotcss":1,"../build/ploticon":2,"./components/annotations":37,"./components/annotations3d":42,"./components/errorbars":75,"./components/fx":86,"./components/grid":90,"./components/images":95,"./components/legend":104,"./components/rangeselector":115,"./components/rangeslider":121,"./components/shapes":129,"./components/sliders":134,"./components/updatemenus":140,"./fonts/mathjax_config":148,"./lib/queue":178,"./locale-en":190,"./locale-en-us":189,"./plot_api":194,"./plot_api/plot_schema":198,"./plots/plots":249,"./registry":258,"./snapshot":263,"./traces/scatter":291,d3:8,"es6-promise":9}],148:[function(e,t,r){"use strict";if(typeof MathJax!=="undefined"){r.MathJax=true;MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:true,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}});MathJax.Hub.Configured()}else{r.MathJax=false}},{}],149:[function(e,t,r){"use strict";var n=Math.PI;r.deg2rad=function(e){return e/180*n};r.rad2deg=function(e){return e/n*180};r.wrap360=function(e){var t=e%360;return t<0?t+360:t};r.wrap180=function(e){if(Math.abs(e)>180)e-=Math.round(e/360)*360;return e}},{}],150:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../constants/numerical").BADNUM;var i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;t.exports=function e(t){if(typeof t==="string"){t=t.replace(i,"")}if(n(t))return Number(t);return a}},{"../constants/numerical":144,"fast-isnumeric":11}],151:[function(e,t,r){"use strict";t.exports=function e(t){var r=t._fullLayout;if(r._glcanvas&&r._glcanvas.size()){r._glcanvas.each(function(e){if(e.regl)e.regl.clear({color:true,depth:true})})}}},{}],152:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("tinycolor2");var i=e("../plots/attributes");var o=e("../components/colorscale/get_scale");var l=Object.keys(e("../components/colorscale/scales"));var s=e("./nested_property");var u=e("./regex").counter;var c=e("../constants/interactions").DESELECTDIM;var f=e("./angles").wrap180;var d=e("./is_array").isArrayOrTypedArray;r.valObjectMeta={data_array:{coerceFunction:function(e,t,r){if(d(e))t.set(e);else if(r!==undefined)t.set(r)}},enumerated:{coerceFunction:function(e,t,r,n){if(n.coerceNumber)e=+e;if(n.values.indexOf(e)===-1)t.set(r);else t.set(e)},validateFunction:function(e,t){if(t.coerceNumber)e=+e;var r=t.values;for(var n=0;n<r.length;n++){var a=String(r[n]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var i=new RegExp(a.substr(1,a.length-2));if(i.test(e))return true}else if(e===r[n])return true}return false}},boolean:{coerceFunction:function(e,t,r){if(e===true||e===false)t.set(e);else t.set(r)}},number:{coerceFunction:function(e,t,r,a){if(!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},integer:{coerceFunction:function(e,t,r,a){if(e%1||!n(e)||a.min!==undefined&&e<a.min||a.max!==undefined&&e>a.max){t.set(r)}else t.set(+e)}},string:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){var a=typeof e==="number";if(n.strict===true||!a)t.set(r);else t.set(String(e))}else if(n.noBlank&&!e)t.set(r);else t.set(e)}},color:{coerceFunction:function(e,t,r){if(a(e).isValid())t.set(e);else t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function n(e){return a(e).isValid()}if(!Array.isArray(e)||!e.length)t.set(r);else if(e.every(n))t.set(e);else t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(o(e,r))}},angle:{coerceFunction:function(e,t,r){if(e==="auto")t.set("auto");else if(!n(e))t.set(r);else t.set(f(+e))}},subplotid:{coerceFunction:function(e,t,r,n){var a=n.regex||u(r);if(typeof e==="string"&&a.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;if(e===r)return true;if(typeof e!=="string")return false;if(u(r).test(e))return true;return false}},flaglist:{coerceFunction:function(e,t,r,n){if(typeof e!=="string"){t.set(r);return}if((n.extras||[]).indexOf(e)!==-1){t.set(e);return}var a=e.split("+"),i=0;while(i<a.length){var o=a[i];if(n.flags.indexOf(o)===-1||a.indexOf(o)<i){a.splice(i,1)}else i++}if(!a.length)t.set(r);else t.set(a.join("+"))}},any:{coerceFunction:function(e,t,r){if(e===undefined)t.set(r);else t.set(e)}},info_array:{coerceFunction:function(e,t,n,a){function i(e,t,n){var a;var i={set:function(e){a=e}};if(n===undefined)n=t.dflt;r.valObjectMeta[t.valType].coerceFunction(e,i,n,t);return a}var o=a.dimensions===2||a.dimensions==="1-2"&&Array.isArray(e)&&Array.isArray(e[0]);if(!Array.isArray(e)){t.set(n);return}var l=a.items;var s=[];var u=Array.isArray(l);var c=u&&o&&Array.isArray(l[0]);var f=o&&u&&!c;var d=u&&!f?l.length:e.length;var p,v,h,g,y,m;n=Array.isArray(n)?n:[];if(o){for(p=0;p<d;p++){s[p]=[];h=Array.isArray(e[p])?e[p]:[];if(f)y=l.length;else if(u)y=l[p].length;else y=h.length;for(v=0;v<y;v++){if(f)g=l[v];else if(u)g=l[p][v];else g=l;m=i(h[v],g,(n[p]||[])[v]);if(m!==undefined)s[p][v]=m}}}else{for(p=0;p<d;p++){m=i(e[p],u?l[p]:l,n[p]);if(m!==undefined)s[p]=m}}t.set(s)},validateFunction:function(e,t){if(!Array.isArray(e))return false;var r=t.items;var n=Array.isArray(r);var a=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return false;for(var i=0;i<e.length;i++){if(a){if(!Array.isArray(e[i])||!t.freeLength&&e[i].length!==r[i].length){return false}for(var o=0;o<e[i].length;o++){if(!p(e[i][o],n?r[i][o]:r)){return false}}}else if(!p(e[i],n?r[i]:r))return false}return true}}};r.coerce=function(e,t,n,a,i){var o=s(n,a).get();var l=s(e,a);var u=s(t,a);var c=l.get();var f=t._template;if(c===undefined&&f){c=s(f,a).get();f=0}if(i===undefined)i=o.dflt;if(o.arrayOk&&d(c)){u.set(c);return c}var v=r.valObjectMeta[o.valType].coerceFunction;v(c,u,i,o);var h=u.get();if(f&&h===i&&!p(c,o)){c=s(f,a).get();v(c,u,i,o);h=u.get()}return h};r.coerce2=function(e,t,n,a,i){var o=s(e,a),l=r.coerce(e,t,n,a,i),u=o.get();return u!==undefined&&u!==null?l:false};r.coerceFont=function(e,t,r){var n={};r=r||{};n.family=e(t+".family",r.family);n.size=e(t+".size",r.size);n.color=e(t+".color",r.color);return n};r.coerceHoverinfo=function(e,t,n){var a=t._module.attributes;var o=a.hoverinfo?a:i;var l=o.hoverinfo;var s;if(n._dataLength===1){var u=l.dflt==="all"?l.flags.slice():l.dflt.split("+");u.splice(u.indexOf("name"),1);s=u.join("+")}return r.coerce(e,t,o,"hoverinfo",s)};r.coerceSelectionMarkerOpacity=function(e,t){if(!e.marker)return;var r=e.marker.opacity;if(r===undefined)return;var n;var a;if(!d(r)&&!e.selected&&!e.unselected){n=r;a=c*r}t("selected.marker.opacity",n);t("unselected.marker.opacity",a)};function p(e,t){var n=r.valObjectMeta[t.valType];if(t.arrayOk&&d(e))return true;if(n.validateFunction){return n.validateFunction(e,t)}var a={},i=a,o={set:function(e){i=e}};n.coerceFunction(e,o,a,t);return i!==a}r.validate=p},{"../components/colorscale/get_scale":57,"../components/colorscale/scales":63,"../constants/interactions":143,"../plots/attributes":206,"./angles":149,"./is_array":165,"./nested_property":172,"./regex":179,"fast-isnumeric":11,tinycolor2:26}],153:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("./loggers");var o=e("./mod");var l=e("../constants/numerical");var s=l.BADNUM;var u=l.ONEDAY;var c=l.ONEHOUR;var f=l.ONEMIN;var d=l.ONESEC;var p=l.EPOCHJD;var v=e("../registry");var h=n.time.format.utc;var g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m;var m=(new Date).getFullYear()-70;function x(e){return e&&v.componentsRegistry.calendars&&typeof e==="string"&&e!=="gregorian"}r.dateTick0=function(e,t){if(x(e)){return t?v.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:v.getComponentMethod("calendars","CANONICAL_TICK")[e]}else{return t?"2000-01-02":"2000-01-01"}};r.dfltRange=function(e){if(x(e)){return v.getComponentMethod("calendars","DFLTRANGE")[e]}else{return["2000-01-01","2001-01-01"]}};r.isJSDate=function(e){return typeof e==="object"&&e!==null&&typeof e.getTime==="function"};var b,_;r.dateTime2ms=function(e,t){if(r.isJSDate(e)){var n=e.getTimezoneOffset()*f;var a=(e.getUTCMinutes()-e.getMinutes())*f+(e.getUTCSeconds()-e.getSeconds())*d+(e.getUTCMilliseconds()-e.getMilliseconds());if(a){var i=3*f;n=n-i/2+o(a-n+i/2,i)}e=Number(e)-n;if(e>=b&&e<=_)return e;return s}if(typeof e!=="string"&&typeof e!=="number")return s;e=String(e);var l=x(t);var h=e.charAt(0);if(l&&(h==="G"||h==="g")){e=e.substr(1);t=""}var w=l&&t.substr(0,7)==="chinese";var k=e.match(w?y:g);if(!k)return s;var M=k[1],A=k[3]||"1",T=Number(k[5]||1),L=Number(k[7]||0),S=Number(k[9]||0),C=Number(k[11]||0);if(l){if(M.length===2)return s;M=Number(M);var P;try{var z=v.getComponentMethod("calendars","getCal")(t);if(w){var O=A.charAt(A.length-1)==="i";A=parseInt(A,10);P=z.newDate(M,z.toMonthIndex(M,A,O),T)}else{P=z.newDate(M,Number(A),T)}}catch(e){return s}if(!P)return s;return(P.toJD()-p)*u+L*c+S*f+C*d}if(M.length===2){M=(Number(M)+2e3-m)%100+m}else M=Number(M);A-=1;var D=new Date(Date.UTC(2e3,A,T,L,S));D.setUTCFullYear(M);if(D.getUTCMonth()!==A)return s;if(D.getUTCDate()!==T)return s;return D.getTime()+C*d};b=r.MIN_MS=r.dateTime2ms("-9999");_=r.MAX_MS=r.dateTime2ms("9999-12-31 23:59:59.9999");r.isDateTime=function(e,t){return r.dateTime2ms(e,t)!==s};function w(e,t){return String(e+Math.pow(10,t)).substr(1)}var k=90*u;var M=3*c;var A=5*f;r.ms2DateTime=function(e,t,r){if(typeof e!=="number"||!(e>=b&&e<=_))return s;if(!t)t=0;var n=Math.floor(o(e+.05,1)*10),a=Math.round(e-n/10),i,l,g,y,m,w;if(x(r)){var L=Math.floor(a/u)+p,S=Math.floor(o(e,u));try{i=v.getComponentMethod("calendars","getCal")(r).fromJD(L).formatDate("yyyy-mm-dd")}catch(e){i=h("G%Y-%m-%d")(new Date(a))}if(i.charAt(0)==="-"){while(i.length<11)i="-0"+i.substr(1)}else{while(i.length<10)i="0"+i}l=t<k?Math.floor(S/c):0;g=t<k?Math.floor(S%c/f):0;y=t<M?Math.floor(S%f/d):0;m=t<A?S%d*10+n:0}else{w=new Date(a);i=h("%Y-%m-%d")(w);l=t<k?w.getUTCHours():0;g=t<k?w.getUTCMinutes():0;y=t<M?w.getUTCSeconds():0;m=t<A?w.getUTCMilliseconds()*10+n:0}return T(i,l,g,y,m)};r.ms2DateTimeLocal=function(e){if(!(e>=b+u&&e<=_-u))return s;var t=Math.floor(o(e+.05,1)*10),r=new Date(Math.round(e-t/10)),a=n.time.format("%Y-%m-%d")(r),i=r.getHours(),l=r.getMinutes(),c=r.getSeconds(),f=r.getUTCMilliseconds()*10+t;return T(a,i,l,c,f)};function T(e,t,r,n,a){if(t||r||n||a){e+=" "+w(t,2)+":"+w(r,2);if(n||a){e+=":"+w(n,2);if(a){var i=4;while(a%10===0){i-=1;a/=10}e+="."+w(a,i)}}}return e}r.cleanDate=function(e,t,n){if(r.isJSDate(e)||typeof e==="number"){if(x(n)){i.error("JS Dates and milliseconds are incompatible with world calendars",e);return t}e=r.ms2DateTimeLocal(+e);if(!e&&t!==undefined)return t}else if(!r.isDateTime(e,n)){i.error("unrecognized date",e);return t}return e};var L=/%\d?f/g;function S(e,t,r,n){e=e.replace(L,function(e){var r=Math.min(+e.charAt(1)||6,6),n=(t/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0";return n});var a=new Date(Math.floor(t+.05));if(x(n)){try{e=v.getComponentMethod("calendars","worldCalFmt")(e,t,n)}catch(e){return"Invalid"}}return r(e)(a)}var C=[59,59.9,59.99,59.999,59.9999];function P(e,t){var r=o(e+.05,u);var n=w(Math.floor(r/c),2)+":"+w(o(Math.floor(r/f),60),2);if(t!=="M"){if(!a(t))t=0;var i=Math.min(o(e/d,60),C[t]);var l=(100+i).toFixed(t).substr(1);if(t>0){l=l.replace(/0+$/,"").replace(/[\.]$/,"")}n+=":"+l}return n}r.formatDate=function(e,t,r,n,a,i){a=x(a)&&a;if(!t){if(r==="y")t=i.year;else if(r==="m")t=i.month;else if(r==="d"){t=i.dayMonth+"\n"+i.year}else{return P(e,r)+"\n"+S(i.dayMonthYear,e,n,a)}}return S(t,e,n,a)};var z=3*u;r.incrementMonth=function(e,t,r){r=x(r)&&r;var n=o(e,u);e=Math.round(e-n);if(r){try{var a=Math.round(e/u)+p,l=v.getComponentMethod("calendars","getCal")(r),s=l.fromJD(a);if(t%12)l.add(s,t,"m");else l.add(s,t/12,"y");return(s.toJD()-p)*u+n}catch(t){i.error("invalid ms "+e+" in calendar "+r)}}var c=new Date(e+z);return c.setUTCMonth(c.getUTCMonth()+t)+n-z};r.findExactDates=function(e,t){var r=0,n=0,i=0,o=0,l,s;var c=x(t)&&v.getComponentMethod("calendars","getCal")(t);for(var f=0;f<e.length;f++){s=e[f];if(!a(s)){o++;continue}if(s%u)continue;if(c){try{l=c.fromJD(s/u+p);if(l.day()===1){if(l.month()===1)r++;else n++}else i++}catch(e){}}else{l=new Date(s);if(l.getUTCDate()===1){if(l.getUTCMonth()===0)r++;else n++}else i++}}n+=r;i+=n;var d=e.length-o;return{exactYears:r/d,exactMonths:n/d,exactDays:i/d}}},{"../constants/numerical":144,"../registry":258,"./loggers":169,"./mod":171,d3:8,"fast-isnumeric":11}],154:[function(e,t,r){"use strict";t.exports=function e(t,r){if(!Array.isArray(t))t=[];t.length=r;return t}},{}],155:[function(e,t,r){"use strict";var n=e("events").EventEmitter;var a={init:function(e){if(e._ev instanceof n)return e;var t=new n;var r=new n;e._ev=t;e._internalEv=r;e.on=t.on.bind(t);e.once=t.once.bind(t);e.removeListener=t.removeListener.bind(t);e.removeAllListeners=t.removeAllListeners.bind(t);e._internalOn=r.on.bind(r);e._internalOnce=r.once.bind(r);e._removeInternalListener=r.removeListener.bind(r);e._removeAllInternalListeners=r.removeAllListeners.bind(r);e.emit=function(n,a){if(typeof jQuery!=="undefined"){jQuery(e).trigger(n,a)}t.emit(n,a);r.emit(n,a)};return e},triggerHandler:function(e,t,r){var n;var a;if(typeof jQuery!=="undefined"){n=jQuery(e).triggerHandler(t,r)}var i=e._ev;if(!i)return n;var o=i._events[t];if(!o)return n;function l(e){if(e.listener){i.removeListener(t,e.listener);if(!e.fired){e.fired=true;return e.listener.apply(i,[r])}}else{return e.apply(i,[r])}}o=Array.isArray(o)?o:[o];var s;for(s=0;s<o.length-1;s++){l(o[s])}a=l(o[s]);return n!==undefined?n:a},purge:function(e){delete e._ev;delete e.on;delete e.once;delete e.removeListener;delete e.removeAllListeners;delete e.emit;delete e._ev;delete e._internalEv;delete e._internalOn;delete e._internalOnce;delete e._removeInternalListener;delete e._removeAllInternalListeners;return e}};t.exports=a},{events:10}],156:[function(e,t,r){"use strict";var n=e("./is_plain_object.js");var a=Array.isArray;function i(e,t){var r,n;for(r=0;r<e.length;r++){n=e[r];if(n!==null&&typeof n==="object"){return false}if(n!==void 0){t[r]=n}}return true}r.extendFlat=function(){return o(arguments,false,false,false)};r.extendDeep=function(){return o(arguments,true,false,false)};r.extendDeepAll=function(){return o(arguments,true,true,false)};r.extendDeepNoArrays=function(){return o(arguments,true,false,true)};function o(e,t,r,l){var s=e[0],u=e.length;var c,f,d,p,v,h,g;if(u===2&&a(s)&&a(e[1])&&s.length===0){g=i(e[1],s);if(g){return s}else{s.splice(0,s.length)}}for(var y=1;y<u;y++){c=e[y];for(f in c){d=s[f];p=c[f];if(l&&a(p)){s[f]=p}else if(t&&p&&(n(p)||(v=a(p)))){if(v){v=false;h=d&&a(d)?d:[]}else{h=d&&n(d)?d:{}}s[f]=o([h,p],t,r,l)}else if(typeof p!=="undefined"||r){s[f]=p}}}return s}},{"./is_plain_object.js":166}],157:[function(e,t,r){"use strict";t.exports=function e(t){var r={},n=[],a=0;for(var i=0;i<t.length;i++){var o=t[i];if(r[o]!==1){r[o]=1;n[a++]=o}}return n}},{}],158:[function(e,t,r){"use strict";t.exports=function e(t){var r=i(t)?a:n;var o=[];for(var l=0;l<t.length;l++){var s=t[l];if(r(s))o.push(s)}return o};function n(e){return e.visible===true}function a(e){return e[0].trace.visible===true}function i(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}},{}],159:[function(e,t,r){"use strict";var n=e("country-regex");var a=e("../lib");var i=Object.keys(n);var o={"ISO-3":a.identity,"USA-states":a.identity,"country names":s};r.locationToFeature=function(e,t,r){if(!t||typeof t!=="string")return false;var n=l(e,t);if(n){for(var i=0;i<r.length;i++){var o=r[i];if(o.id===n)return o}a.log(["Location with id",n,"does not have a matching topojson feature at this resolution."].join(" "))}return false};function l(e,t){var r=o[e];return r(t)}function s(e){for(var t=0;t<i.length;t++){var r=i[t],o=new RegExp(n[r]);if(o.test(e.trim().toLowerCase()))return r}a.log("Unrecognized country name: "+e+".");return false}},{"../lib":164,"country-regex":7}],160:[function(e,t,r){"use strict";var n=e("../constants/numerical").BADNUM;r.calcTraceToLineCoords=function(e){var t=e[0].trace;var r=t.connectgaps;var a=[];var i=[];for(var o=0;o<e.length;o++){var l=e[o];var s=l.lonlat;if(s[0]!==n){i.push(s)}else if(!r&&i.length>0){a.push(i);i=[]}}if(i.length>0){a.push(i)}return a};r.makeLine=function(e){if(e.length===1){return{type:"LineString",coordinates:e[0]}}else{return{type:"MultiLineString",coordinates:e}}};r.makePolygon=function(e){if(e.length===1){return{type:"Polygon",coordinates:e}}else{var t=new Array(e.length);for(var r=0;r<e.length;r++){t[r]=[e[r]]}return{type:"MultiPolygon",coordinates:t}}};r.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":144}],161:[function(e,t,r){"use strict";var n=e("./mod");r.segmentsIntersect=a;function a(e,t,r,n,a,i,o,l){var s=r-e,u=a-e,c=o-a,f=n-t,d=i-t,p=l-i,v=s*p-c*f;if(v===0)return null;var h=(u*p-c*d)/v,g=(u*f-s*d)/v;if(g<0||g>1||h<0||h>1)return null;return{x:e+s*h,y:t+f*h}}r.segmentDistance=function e(t,r,n,o,l,s,u,c){if(a(t,r,n,o,l,s,u,c))return 0;var f=n-t;var d=o-r;var p=u-l;var v=c-s;var h=f*f+d*d;var g=p*p+v*v;var y=Math.min(i(f,d,h,l-t,s-r),i(f,d,h,u-t,c-r),i(p,v,g,t-l,r-s),i(p,v,g,n-l,o-s));return Math.sqrt(y)};function i(e,t,r,n,a){var i=n*e+a*t;if(i<0){return n*n+a*a}else if(i>r){var o=n-e;var l=a-t;return o*o+l*l}else{var s=n*t-a*e;return s*s/r}}var o,l,s;r.getTextLocation=function e(t,r,a,i){if(t!==l||i!==s){o={};l=t;s=i}if(o[a]){return o[a]}var u=t.getPointAtLength(n(a-i/2,r));var c=t.getPointAtLength(n(a+i/2,r));var f=Math.atan((c.y-u.y)/(c.x-u.x));var d=t.getPointAtLength(n(a,r));var p=(d.x*4+u.x+c.x)/6;var v=(d.y*4+u.y+c.y)/6;var h={x:p,y:v,theta:f};o[a]=h;return h};r.clearLocationCache=function(){l=null};r.getVisibleSegment=function e(t,r,n){var a=r.left;var i=r.right;var o=r.top;var l=r.bottom;var s=0;var u=t.getTotalLength();var c=u;var f,d;function p(e){var r=t.getPointAtLength(e);if(e===0)f=r;else if(e===u)d=r;var n=r.x<a?a-r.x:r.x>i?r.x-i:0;var s=r.y<o?o-r.y:r.y>l?r.y-l:0;return Math.sqrt(n*n+s*s)}var v=p(s);while(v){s+=v+n;if(s>c)return;v=p(s)}v=p(c);while(v){c-=v+n;if(s>c)return;v=p(c)}return{min:s,max:c,len:c-s,total:u,isClosed:s===0&&c===u&&Math.abs(f.x-d.x)<.1&&Math.abs(f.y-d.y)<.1}};r.findPointOnPath=function e(t,r,n,a){a=a||{};var i=a.pathLength||t.getTotalLength();var o=a.tolerance||.001;var l=a.iterationLimit||30;var s=t.getPointAtLength(0)[n]>t.getPointAtLength(i)[n]?-1:1;var u=0;var c=0;var f=i;var d;var p;var v;while(u<l){d=(c+f)/2;p=t.getPointAtLength(d);v=p[n]-r;if(Math.abs(v)<o){return p}else{if(s*v>0){f=d}else{c=d}u++}}return p}},{"./mod":171}],162:[function(e,t,r){"use strict";t.exports=function(e){var t;if(typeof e==="string"){t=document.getElementById(e);if(t===null){throw new Error("No DOM element with id '"+e+"' exists on the page.")}return t}else if(e===null||e===undefined){throw new Error("DOM element provided is null or undefined")}return e}},{}],163:[function(e,t,r){"use strict";t.exports=function e(t){return t}},{}],164:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../constants/numerical");var o=i.FP_SAFE;var l=i.BADNUM;var s=t.exports={};s.nestedProperty=e("./nested_property");s.keyedContainer=e("./keyed_container");s.relativeAttr=e("./relative_attr");s.isPlainObject=e("./is_plain_object");s.mod=e("./mod");s.toLogRange=e("./to_log_range");s.relinkPrivateKeys=e("./relink_private");s.ensureArray=e("./ensure_array");var u=e("./is_array");s.isTypedArray=u.isTypedArray;s.isArrayOrTypedArray=u.isArrayOrTypedArray;s.isArray1D=u.isArray1D;var c=e("./coerce");s.valObjectMeta=c.valObjectMeta;s.coerce=c.coerce;s.coerce2=c.coerce2;s.coerceFont=c.coerceFont;s.coerceHoverinfo=c.coerceHoverinfo;s.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity;s.validate=c.validate;var f=e("./dates");s.dateTime2ms=f.dateTime2ms;s.isDateTime=f.isDateTime;s.ms2DateTime=f.ms2DateTime;s.ms2DateTimeLocal=f.ms2DateTimeLocal;s.cleanDate=f.cleanDate;s.isJSDate=f.isJSDate;s.formatDate=f.formatDate;s.incrementMonth=f.incrementMonth;s.dateTick0=f.dateTick0;s.dfltRange=f.dfltRange;s.findExactDates=f.findExactDates;s.MIN_MS=f.MIN_MS;s.MAX_MS=f.MAX_MS;var d=e("./search");s.findBin=d.findBin;s.sorterAsc=d.sorterAsc;s.sorterDes=d.sorterDes;s.distinctVals=d.distinctVals;s.roundUp=d.roundUp;var p=e("./stats");s.aggNums=p.aggNums;s.len=p.len;s.mean=p.mean;s.midRange=p.midRange;s.variance=p.variance;s.stdev=p.stdev;s.interp=p.interp;var v=e("./matrix");s.init2dArray=v.init2dArray;s.transposeRagged=v.transposeRagged;s.dot=v.dot;s.translationMatrix=v.translationMatrix;s.rotationMatrix=v.rotationMatrix;s.rotationXYMatrix=v.rotationXYMatrix;s.apply2DTransform=v.apply2DTransform;s.apply2DTransform2=v.apply2DTransform2;var h=e("./angles");s.deg2rad=h.deg2rad;s.rad2deg=h.rad2deg;s.wrap360=h.wrap360;s.wrap180=h.wrap180;var g=e("./geometry2d");s.segmentsIntersect=g.segmentsIntersect;s.segmentDistance=g.segmentDistance;s.getTextLocation=g.getTextLocation;s.clearLocationCache=g.clearLocationCache;s.getVisibleSegment=g.getVisibleSegment;s.findPointOnPath=g.findPointOnPath;var y=e("./extend");s.extendFlat=y.extendFlat;s.extendDeep=y.extendDeep;s.extendDeepAll=y.extendDeepAll;s.extendDeepNoArrays=y.extendDeepNoArrays;var m=e("./loggers");s.log=m.log;s.warn=m.warn;s.error=m.error;var x=e("./regex");s.counterRegex=x.counter;var b=e("./throttle");s.throttle=b.throttle;s.throttleDone=b.done;s.clearThrottle=b.clear;s.getGraphDiv=e("./get_graph_div");s._=e("./localize");s.notifier=e("./notifier");s.filterUnique=e("./filter_unique");s.filterVisible=e("./filter_visible");s.pushUnique=e("./push_unique");s.cleanNumber=e("./clean_number");s.ensureNumber=function e(t){if(!a(t))return l;t=Number(t);if(t<-o||t>o)return l;return a(t)?Number(t):l};s.isIndex=function(e,t){if(t!==undefined&&e>=t)return false;return a(e)&&e>=0&&e%1===0};s.noop=e("./noop");s.identity=e("./identity");s.swapAttrs=function(e,t,r,n){if(!r)r="x";if(!n)n="y";for(var a=0;a<t.length;a++){var i=t[a],o=s.nestedProperty(e,i.replace("?",r)),l=s.nestedProperty(e,i.replace("?",n)),u=o.get();o.set(l.get());l.set(u)}};s.raiseToTop=function e(t){t.parentNode.appendChild(t)};s.cancelTransition=function(e){return e.transition().duration(0)};s.constrain=function(e,t,r){if(t>r)return Math.max(r,Math.min(t,e));return Math.max(t,Math.min(r,e))};s.bBoxIntersect=function(e,t,r){r=r||0;return e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};s.simpleMap=function(e,t,r,n){var a=e.length,i=new Array(a);for(var o=0;o<a;o++)i[o]=t(e[o],r,n);return i};s.randstr=function e(t,r,n,a){if(!n)n=16;if(r===undefined)r=24;if(r<=0)return"0";var i=Math.log(Math.pow(2,r))/Math.log(n);var o="";var l,u,c;for(l=2;i===Infinity;l*=2){i=Math.log(Math.pow(2,r/l))/Math.log(n)*l}var f=i-Math.floor(i);for(l=0;l<Math.floor(i);l++){c=Math.floor(Math.random()*n).toString(n);o=c+o}if(f){u=Math.pow(n,f);c=Math.floor(Math.random()*u).toString(n);o=c+o}var d=parseInt(o,n);if(t&&t[o]||d!==Infinity&&d>=Math.pow(2,r)){if(a>10){s.warn("randstr failed uniqueness");return o}return e(t,r,n,(a||0)+1)}else return o};s.OptionControl=function(e,t){if(!e)e={};if(!t)t="opt";var r={};r.optionList=[];r._newoption=function(n){n[t]=e;r[n.name]=n;r.optionList.push(n)};r["_"+t]=e;return r};s.smooth=function(e,t){t=Math.round(t)||0;if(t<2)return e;var r=e.length,n=2*r,a=2*t-1,i=new Array(a),o=new Array(r),l,s,u,c;for(l=0;l<a;l++){i[l]=(1-Math.cos(Math.PI*(l+1)/t))/(2*t)}for(l=0;l<r;l++){c=0;for(s=0;s<a;s++){u=l+s+1-t;if(u<-r)u-=n*Math.round(u/n);else if(u>=n)u-=n*Math.floor(u/n);if(u<0)u=-1-u;else if(u>=r)u=n-1-u;c+=e[u]*i[s]}o[l]=c}return o};s.syncOrAsync=function(e,t,r){var n,a;function i(){return s.syncOrAsync(e,t,r)}while(e.length){a=e.splice(0,1)[0];n=a(t);if(n&&n.then){return n.then(i).then(undefined,s.promiseError)}}return r&&r(t)};s.stripTrailingSlash=function(e){if(e.substr(-1)==="/")return e.substr(0,e.length-1);return e};s.noneOrAll=function(e,t,r){if(!e)return;var n=false,a=true,i,o;for(i=0;i<r.length;i++){o=e[r[i]];if(o!==undefined&&o!==null)n=true;else a=false}if(n&&!a){for(i=0;i<r.length;i++){e[r[i]]=t[r[i]]}}};s.mergeArray=function(e,t,r){if(s.isArrayOrTypedArray(e)){var n=Math.min(e.length,t.length);for(var a=0;a<n;a++)t[a][r]=e[a]}};s.fillArray=function(e,t,r,n){n=n||s.identity;if(s.isArrayOrTypedArray(e)){for(var a=0;a<t.length;a++){t[a][r]=n(e[a])}}};s.castOption=function(e,t,r,n){n=n||s.identity;var a=s.nestedProperty(e,r).get();if(s.isArrayOrTypedArray(a)){if(Array.isArray(t)&&s.isArrayOrTypedArray(a[t[0]])){return n(a[t[0]][t[1]])}else{return n(a[t])}}else{return a}};s.extractOption=function(e,t,r,n){if(r in e)return e[r];var a=s.nestedProperty(t,n).get();if(!Array.isArray(a))return a};function _(e){var t={};for(var r in e){var n=e[r];for(var a=0;a<n.length;a++){t[n[a]]=+r}}return t}s.tagSelected=function(e,t,r){var n=t.selectedpoints;var a=t._indexToPoints;var i;if(a){i=_(a)}function o(t){return t!==undefined&&t<e.length}for(var l=0;l<n.length;l++){var u=n[l];if(s.isIndex(u)){var c=i?i[u]:u;var f=r?r[c]:c;if(o(f)){e[f].selected=1}}}};s.selIndices2selPoints=function(e){var t=e.selectedpoints;var r=e._indexToPoints;if(r){var n=_(r);var a=[];for(var i=0;i<t.length;i++){var o=t[i];if(s.isIndex(o)){var l=n[o];if(s.isIndex(l)){a.push(l)}}}return a}else{return t}};s.getTargetArray=function(e,t){var r=t.target;if(typeof r==="string"&&r){var n=s.nestedProperty(e,r).get();return Array.isArray(n)?n:false}else if(Array.isArray(r)){return r}return false};s.minExtend=function(e,t){var r={};if(typeof t!=="object")t={};var n=3,a=Object.keys(e),i,o,l;for(i=0;i<a.length;i++){o=a[i];l=e[o];if(o.charAt(0)==="_"||typeof l==="function")continue;else if(o==="module")r[o]=l;else if(Array.isArray(l))r[o]=l.slice(0,n);else if(l&&typeof l==="object")r[o]=s.minExtend(e[o],t[o]);else r[o]=l}a=Object.keys(t);for(i=0;i<a.length;i++){o=a[i];l=t[o];if(typeof l!=="object"||!(o in r)||typeof r[o]!=="object"){r[o]=l}}return r};s.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};s.containsAny=function(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])!==-1)return true}return false};s.isPlotDiv=function(e){var t=n.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")};s.removeElement=function(e){var t=e&&e.parentNode;if(t)t.removeChild(e)};s.addStyleRule=function(e,t){if(!s.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode(""));document.head.appendChild(r);s.styleSheet=r.sheet}var n=s.styleSheet;if(n.insertRule){n.insertRule(e+"{"+t+"}",0)}else if(n.addRule){n.addRule(e,t,0)}else s.warn("addStyleRule failed")};s.isIE=function(){return typeof window.navigator.msSaveBlob!=="undefined"};s.isD3Selection=function(e){return e&&typeof e.classed==="function"};s.ensureSingle=function(e,t,r,n){var a=e.select(t+(r?"."+r:""));if(a.size())return a;var i=e.append(t).classed(r,true);if(n)i.call(n);return i};s.ensureSingleById=function(e,t,r,n){var a=e.select(t+"#"+r);if(a.size())return a;var i=e.append(t).attr("id",r);if(n)i.call(n);return i};s.objectFromPath=function(e,t){var r=e.split("."),n,a=n={};for(var i=0;i<r.length;i++){var o=r[i];var l=null;var s=r[i].match(/(.*)\[([0-9]+)\]/);if(s){o=s[1];l=s[2];n=n[o]=[];if(i===r.length-1){n[l]=t}else{n[l]={}}n=n[l]}else{if(i===r.length-1){n[o]=t}else{n[o]={}}n=n[o]}}return a};var w=/^([^\[\.]+)\.(.+)?/;var k=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;s.expandObjectPaths=function(e){var t,r,n,a,i,o,l;if(typeof e==="object"&&!Array.isArray(e)){for(r in e){if(e.hasOwnProperty(r)){if(t=r.match(w)){a=e[r];n=t[1];delete e[r];e[n]=s.extendDeepNoArrays(e[n]||{},s.objectFromPath(r,s.expandObjectPaths(a))[n])}else if(t=r.match(k)){a=e[r];n=t[1];i=parseInt(t[2]);delete e[r];e[n]=e[n]||[];if(t[3]==="."){l=t[4];o=e[n][i]=e[n][i]||{};s.extendDeepNoArrays(o,s.objectFromPath(l,s.expandObjectPaths(a)))}else{e[n][i]=s.expandObjectPaths(a)}}else{e[r]=s.expandObjectPaths(e[r])}}}}return e};s.numSeparate=function(e,t,r){if(!r)r=false;if(typeof t!=="string"||t.length===0){throw new Error("Separator string required for formatting!")}if(typeof e==="number"){e=String(e)}var n=/(\d+)(\d{3})/,a=t.charAt(0),i=t.charAt(1);var o=e.split("."),l=o[0],s=o.length>1?a+o[1]:"";if(i&&(o.length>1||l.length>4||r)){while(n.test(l)){l=l.replace(n,"$1"+i+"$2")}}return l+s};var M=/%{([^\s%{}]*)}/g;var A=/^\w*$/;s.templateString=function(e,t){var r={};return e.replace(M,function(e,n){if(A.test(n)){return t[n]||""}r[n]=r[n]||s.nestedProperty(t,n).get;return r[n]()||""})};var T=48;var L=57;s.subplotSort=function(e,t){var r=Math.min(e.length,t.length)+1;var n=0;var a=0;for(var i=0;i<r;i++){var o=e.charCodeAt(i)||0;var l=t.charCodeAt(i)||0;var s=o>=T&&o<=L;var u=l>=T&&l<=L;if(s)n=10*n+o-T;if(u)a=10*a+l-T;if(!s||!u){if(n!==a)return n-a;if(o!==l)return o-l}}return a-n};var S=2e9;s.seedPseudoRandom=function(){S=2e9};s.pseudoRandom=function(){var e=S;S=(69069*S+1)%4294967296;if(Math.abs(S-e)<429496729)return s.pseudoRandom();return S/4294967296}},{"../constants/numerical":144,"./angles":149,"./clean_number":150,"./coerce":152,"./dates":153,"./ensure_array":154,"./extend":156,"./filter_unique":157,"./filter_visible":158,"./geometry2d":161,"./get_graph_div":162,"./identity":163,"./is_array":165,"./is_plain_object":166,"./keyed_container":167,"./localize":168,"./loggers":169,"./matrix":170,"./mod":171,"./nested_property":172,"./noop":173,"./notifier":174,"./push_unique":177,"./regex":179,"./relative_attr":180,"./relink_private":181,"./search":182,"./stats":184,"./throttle":186,"./to_log_range":187,d3:8,"fast-isnumeric":11}],165:[function(e,t,r){"use strict";var n=typeof ArrayBuffer==="undefined"||!ArrayBuffer.isView?{isView:function(){return false}}:ArrayBuffer;var a=typeof DataView==="undefined"?function(){}:DataView;function i(e){return n.isView(e)&&!(e instanceof a)}function o(e){return Array.isArray(e)||i(e)}function l(e){return!o(e[0])}t.exports={isTypedArray:i,isArrayOrTypedArray:o,isArray1D:l}},{}],166:[function(e,t,r){"use strict";t.exports=function e(t){if(window&&window.process&&window.process.versions){return Object.prototype.toString.call(t)==="[object Object]"}return Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t)===Object.prototype}},{}],167:[function(e,t,r){"use strict";var n=e("./nested_property");var a=/^\w*$/;var i=0;var o=1;var l=2;var s=3;var u=4;t.exports=function e(t,r,c,f){c=c||"name";f=f||"value";var d,p,v;var h={};if(r&&r.length){v=n(t,r);p=v.get()}else{p=t}r=r||"";var g={};if(p){for(d=0;d<p.length;d++){g[p[d][c]]=d}}var y=a.test(f);var m={set:function(e,t){var r=t===null?u:i;if(!p){if(!v||r===u)return;p=[];v.set(p)}var a=g[e];if(a===undefined){if(r===u)return;r=r|s;a=p.length;g[e]=a}else if(t!==(y?p[a][f]:n(p[a],f).get())){r=r|l}var o=p[a]=p[a]||{};o[c]=e;if(y){o[f]=t}else{n(o,f).set(t)}if(t!==null){r=r&~u}h[a]=h[a]|r;return m},get:function(e){if(!p)return;var t=g[e];if(t===undefined){return undefined}else if(y){return p[t][f]}else{return n(p[t],f).get()}},rename:function(e,t){var r=g[e];if(r===undefined)return m;h[r]=h[r]|o;g[t]=r;delete g[e];p[r][c]=t;return m},remove:function(e){var t=g[e];if(t===undefined)return m;var r=p[t];if(Object.keys(r).length>2){h[t]=h[t]|l;return m.set(e,null)}if(y){for(d=t;d<p.length;d++){h[d]=h[d]|s}for(d=t;d<p.length;d++){g[p[d][c]]--}p.splice(t,1);delete g[e]}else{n(r,f).set(null);h[t]=h[t]|l|u}return m},constructUpdate:function(){var e,t;var a={};var i=Object.keys(h);for(var s=0;s<i.length;s++){t=i[s];e=r+"["+t+"]";if(p[t]){if(h[t]&o){a[e+"."+c]=p[t][c]}if(h[t]&l){if(y){a[e+"."+f]=h[t]&u?null:p[t][f]}else{a[e+"."+f]=h[t]&u?null:n(p[t],f).get()}}}else{a[e]=null}}return a}};return m}},{"./nested_property":172}],168:[function(e,t,r){"use strict";var n=e("../registry");t.exports=function e(t,r){var a=t._context.locale;for(var i=0;i<2;i++){var o=t._context.locales;for(var l=0;l<2;l++){var s=(o[a]||{}).dictionary;if(s){var u=s[r];if(u)return u}o=n.localeRegistry}var c=a.split("-")[0];if(c===a)break;a=c}return r}},{"../registry":258}],169:[function(e,t,r){"use strict";var n=e("../plot_api/plot_config");var a=t.exports={};a.log=function(){if(n.logging>1){var e=["LOG:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};a.warn=function(){if(n.logging>0){var e=["WARN:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.trace||console.log,e)}};a.error=function(){if(n.logging>0){var e=["ERROR:"];for(var t=0;t<arguments.length;t++){e.push(arguments[t])}i(console.error,e)}};function i(e,t){if(e.apply){e.apply(e,t)}else{for(var r=0;r<t.length;r++){e(t[r])}}}},{"../plot_api/plot_config":197}],170:[function(e,t,r){"use strict";r.init2dArray=function(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=new Array(t);return r};r.transposeRagged=function(e){var t=0,r=e.length,n,a;for(n=0;n<r;n++)t=Math.max(t,e[n].length);var i=new Array(t);for(n=0;n<t;n++){i[n]=new Array(r);for(a=0;a<r;a++)i[n][a]=e[a][n]}return i};r.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var n=e.length,a,i;if(e[0].length){a=new Array(n);for(i=0;i<n;i++)a[i]=r.dot(e[i],t)}else if(t[0].length){var o=r.transposeRagged(t);a=new Array(o.length);for(i=0;i<o.length;i++)a[i]=r.dot(e,o[i])}else{a=0;for(i=0;i<n;i++)a+=e[i]*t[i]}return a};r.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};r.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};r.rotationXYMatrix=function(e,t,n){return r.dot(r.dot(r.translationMatrix(t,n),r.rotationMatrix(e)),r.translationMatrix(-t,-n))};r.apply2DTransform=function(e){return function(){var t=arguments;if(t.length===3){t=t[0]}var n=arguments.length===1?t[0]:[t[0],t[1]];return r.dot(e,[n[0],n[1],1]).slice(0,2)}};r.apply2DTransform2=function(e){var t=r.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}}},{}],171:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t%r;return n<0?n+r:n}},{}],172:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./is_array").isArrayOrTypedArray;t.exports=function e(t,r){if(n(r))r=String(r);else if(typeof r!=="string"||r.substr(r.length-4)==="[-1]"){throw"bad property string"}var a=0,o=r.split("."),l,u,c;while(a<o.length){l=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/);if(l){if(l[1])o[a]=l[1];else if(a===0)o.splice(0,1);else throw"bad property string";u=l[2].substr(1,l[2].length-2).split("][");for(c=0;c<u.length;c++){a++;o.splice(a,0,Number(u[c]))}}a++}if(typeof t!=="object"){return d(t,r,o)}return{set:s(t,o,r),get:i(t,o),astr:r,parts:o,obj:t}};function i(e,t){return function(){var r=e,n,o,l,s,u;for(s=0;s<t.length-1;s++){n=t[s];if(n===-1){o=true;l=[];for(u=0;u<r.length;u++){l[u]=i(r[u],t.slice(s+1))();if(l[u]!==l[0])o=false}return o?l[0]:l}if(typeof n==="number"&&!a(r)){return undefined}r=r[n];if(typeof r!=="object"||r===null){return undefined}}if(typeof r!=="object"||r===null)return undefined;l=r[t[s]];if(l===null)return undefined;return l}}var o=/(^|\.)args\[/;function l(e,t){return e===undefined||e===null&&!t.match(o)}function s(e,t,r){return function(n){var i=e,o="",s=[[e,o]],d=l(n,r),p,v;for(v=0;v<t.length-1;v++){p=t[v];if(typeof p==="number"&&!a(i)){throw"array index but container is not an array"}if(p===-1){d=!c(i,t.slice(v+1),n,r);if(d)break;else return}if(!f(i,p,t[v+1],d)){break}i=i[p];if(typeof i!=="object"||i===null){throw"container is not an object"}o=u(o,p);s.push([i,o])}if(d){if(v===t.length-1){delete i[t[v]];if(Array.isArray(i)&&+t[v]===i.length-1){while(i.length&&i[i.length-1]===undefined){i.pop()}}}}else i[t[v]]=n}}function u(e,t){var r=t;if(n(t))r="["+t+"]";else if(e)r="."+t;return e+r}function c(e,t,r,n){var i=a(r),o=true,u=r,c=n.replace("-1",0),d=i?false:l(r,c),p=t[0],v;for(v=0;v<e.length;v++){c=n.replace("-1",v);if(i){u=r[v%r.length];d=l(u,c)}if(d)o=false;if(!f(e,v,p,d)){continue}s(e[v],t,n.replace("-1",v))(u)}return o}function f(e,t,r,n){if(e[t]===undefined){if(n)return false;if(typeof r==="number")e[t]=[];else e[t]={}}return true}function d(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}},{"./is_array":165,"fast-isnumeric":11}],173:[function(e,t,r){"use strict";t.exports=function e(){}},{}],174:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=[];t.exports=function(e,t){if(i.indexOf(e)!==-1)return;i.push(e);var r=1e3;if(a(t))r=t;else if(t==="long")r=3e3;var o=n.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",true);var l=o.selectAll(".notifier-note").data(i);function s(e){e.duration(700).style("opacity",0).each("end",function(e){var t=i.indexOf(e);if(t!==-1)i.splice(t,1);n.select(this).remove()})}l.enter().append("div").classed("notifier-note",true).style("opacity",0).each(function(e){var t=n.select(this);t.append("button").classed("notifier-close",true).html("&times;").on("click",function(){t.transition().call(s)});var a=t.append("p");var i=e.split(/<br\s*\/?>/g);for(var o=0;o<i.length;o++){if(o)a.append("br");a.append("span").text(i[o])}t.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}},{d3:8,"fast-isnumeric":11}],175:[function(e,t,r){"use strict";var n=e("./setcursor");var a="data-savedcursor";var i="!!";t.exports=function e(t,r){var o=t.attr(a);if(r){if(!o){var l=(t.attr("class")||"").split(" ");for(var s=0;s<l.length;s++){var u=l[s];if(u.indexOf("cursor-")===0){t.attr(a,u.substr(7)).classed(u,false)}}if(!t.attr(a)){t.attr(a,i)}}n(t,r)}else if(o){t.attr(a,null);if(o===i)n(t);else n(t,o)}}},{"./setcursor":183}],176:[function(e,t,r){"use strict";var n=e("./matrix").dot;var a=e("../constants/numerical").BADNUM;var i=t.exports={};i.tester=function e(t){if(Array.isArray(t[0][0]))return i.multitester(t);var r=t.slice(),n=r[0][0],o=n,l=r[0][1],s=l,u;r.push(r[0]);for(u=1;u<r.length;u++){n=Math.min(n,r[u][0]);o=Math.max(o,r[u][0]);l=Math.min(l,r[u][1]);s=Math.max(s,r[u][1])}var c=false,f;if(r.length===5){if(r[0][0]===r[1][0]){if(r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]){c=true;f=function(e){return e[0]===r[0][0]}}}else if(r[0][1]===r[1][1]){if(r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]){c=true;f=function(e){return e[1]===r[0][1]}}}}function d(e,t){var r=e[0],i=e[1];if(r===a||r<n||r>o||i===a||i<l||i>s){return false}if(t&&f(e))return false;return true}function p(e,t){var i=e[0],u=e[1];if(i===a||i<n||i>o||u===a||u<l||u>s){return false}var c=r.length,f=r[0][0],d=r[0][1],p=0,v,h,g,y,m;for(v=1;v<c;v++){h=f;g=d;f=r[v][0];d=r[v][1];y=Math.min(h,f);if(i<y||i>Math.max(h,f)||u>Math.max(g,d)){continue}else if(u<Math.min(g,d)){if(i!==y)p++}else{if(f===h)m=u;else m=g+(i-h)*(d-g)/(f-h);if(u===m){if(v===1&&t)return false;return true}if(u<=m&&i!==y)p++}}return p%2===1}var v=true;var h=r[0];for(u=1;u<r.length;u++){if(h[0]!==r[u][0]||h[1]!==r[u][1]){v=false;break}}return{xmin:n,xmax:o,ymin:l,ymax:s,pts:r,contains:c?d:p,isRect:c,degenerate:v}};i.multitester=function e(t){var r=[],n=t[0][0][0],a=n,o=t[0][0][1],l=o;for(var s=0;s<t.length;s++){var u=i.tester(t[s]);u.subtract=t[s].subtract;r.push(u);n=Math.min(n,u.xmin);a=Math.max(a,u.xmax);o=Math.min(o,u.ymin);l=Math.max(l,u.ymax)}function c(e,t){var n=false;for(var a=0;a<r.length;a++){if(r[a].contains(e,t)){n=r[a].subtract===false}}return n}return{xmin:n,xmax:a,ymin:o,ymax:l,pts:[],contains:c,isRect:false,degenerate:false}};var o=i.isSegmentBent=function e(t,r,a,i){var o=t[r],l=[t[a][0]-o[0],t[a][1]-o[1]],s=n(l,l),u=Math.sqrt(s),c=[-l[1]/u,l[0]/u],f,d,p;for(f=r+1;f<a;f++){d=[t[f][0]-o[0],t[f][1]-o[1]];p=n(d,l);if(p<0||p>s||Math.abs(n(d,c))>i)return true}return false};i.filter=function e(t,r){var n=[t[0]],a=0,i=0;function l(e){t.push(e);var l=n.length,s=a;n.splice(i+1);for(var u=s+1;u<t.length;u++){if(u===t.length-1||o(t,s,u+1,r)){n.push(t[u]);if(n.length<l-2){a=u;i=n.length-1}s=u}}}if(t.length>1){var s=t.pop();l(s)}return{addPt:l,raw:t,filtered:n}}},{"../constants/numerical":144,"./matrix":170}],177:[function(e,t,r){"use strict";t.exports=function e(t,r){if(r instanceof RegExp){var n=r.toString(),a;for(a=0;a<t.length;a++){if(t[a]instanceof RegExp&&t[a].toString()===n){return t}}t.push(r)}else if((r||r===0)&&t.indexOf(r)===-1)t.push(r);return t}},{}],178:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plot_api/plot_config");function i(e,t){var r=[];var a;for(var i=0;i<t.length;i++){a=t[i];if(a===e)r[i]=a;else if(typeof a==="object"){r[i]=Array.isArray(a)?n.extendDeep([],a):n.extendDeepAll({},a)}else r[i]=a}return r}var o={};o.add=function(e,t,r,n,i){var o,l;e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};l=e.undoQueue.index;if(e.autoplay){if(!e.undoQueue.inSequence)e.autoplay=false;return}if(!e.undoQueue.sequence||e.undoQueue.beginSequence){o={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};e.undoQueue.queue.splice(l,e.undoQueue.queue.length-l,o);e.undoQueue.index+=1}else{o=e.undoQueue.queue[l-1]}e.undoQueue.beginSequence=false;if(o){o.undo.calls.unshift(t);o.undo.args.unshift(r);o.redo.calls.push(n);o.redo.args.push(i)}if(e.undoQueue.queue.length>a.queueLength){e.undoQueue.queue.shift();e.undoQueue.index--}};o.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=true;e.undoQueue.beginSequence=true};o.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:false};e.undoQueue.sequence=false;e.undoQueue.beginSequence=false};o.undo=function e(t){var r,n;if(t.framework&&t.framework.isPolar){t.framework.undo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index<=0){return}t.undoQueue.index--;r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.undo.calls.length;n++){o.plotDo(t,r.undo.calls[n],r.undo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false};o.redo=function e(t){var r,n;if(t.framework&&t.framework.isPolar){t.framework.redo();return}if(t.undoQueue===undefined||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length){return}r=t.undoQueue.queue[t.undoQueue.index];t.undoQueue.inSequence=true;for(n=0;n<r.redo.calls.length;n++){o.plotDo(t,r.redo.calls[n],r.redo.args[n])}t.undoQueue.inSequence=false;t.autoplay=false;t.undoQueue.index++};o.plotDo=function(e,t,r){e.autoplay=true;r=i(e,r);t.apply(null,r)};t.exports=o},{"../lib":164,"../plot_api/plot_config":197}],179:[function(e,t,r){"use strict";r.counter=function(e,t,r){var n=(t||"")+(r?"":"$");if(e==="xy"){return new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n)}return new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+n)}},{}],180:[function(e,t,r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/;var a=/^[^\.\[\]]+$/;t.exports=function(e,t){while(t){var r=e.match(n);if(r)e=r[1];else if(e.match(a))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}if(e&&t.charAt(0)!=="["){return e+"."+t}return e+t}},{}],181:[function(e,t,r){"use strict";var n=e("./is_array").isArrayOrTypedArray;var a=e("./is_plain_object");t.exports=function e(t,r){for(var i in r){var o=r[i];var l=t[i];if(l===o){continue}if(i.charAt(0)==="_"||typeof o==="function"){if(i in t)continue;t[i]=o}else if(n(o)&&n(l)&&a(o[0])){if(i==="customdata"||i==="ids")continue;var s=Math.min(o.length,l.length);for(var u=0;u<s;u++){if(l[u]!==o[u]&&a(o[u])&&a(l[u])){e(l[u],o[u])}}}else if(a(o)&&a(l)){e(l,o);if(!Object.keys(l).length)delete t[i]}}}},{"./is_array":165,"./is_plain_object":166}],182:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./loggers");var i=1e-9;r.findBin=function(e,t,r){if(n(t.start)){return r?Math.ceil((e-t.start)/t.size-i)-1:Math.floor((e-t.start)/t.size+i)}else{var c=0;var f=t.length;var d=0;var p=f>1?(t[f-1]-t[0])/(f-1):1;var v,h;if(p>=0){h=r?o:l}else{h=r?u:s}e+=p*i*(r?-1:1)*(p>=0?1:-1);while(c<f&&d++<100){v=Math.floor((c+f)/2);if(h(t[v],e))c=v+1;else f=v}if(d>90)a.log("Long binary search...");return c-1}};function o(e,t){return e<t}function l(e,t){return e<=t}function s(e,t){return e>t}function u(e,t){return e>=t}r.sorterAsc=function(e,t){return e-t};r.sorterDes=function(e,t){return t-e};r.distinctVals=function(e){var t=e.slice();t.sort(r.sorterAsc);var n=t.length-1,a=t[n]-t[0]||1,i=a/(n||1)/1e4,o=[t[0]];for(var l=0;l<n;l++){if(t[l+1]>t[l]+i){a=Math.min(a,t[l+1]-t[l]);o.push(t[l+1])}}return{vals:o,minDiff:a}};r.roundUp=function(e,t,r){var n=0,a=t.length-1,i,o=0,l=r?0:1,s=r?1:0,u=r?Math.ceil:Math.floor;while(n<a&&o++<100){i=u((n+a)/2);if(t[i]<=e)n=i+l;else a=i-s}return t[n]}},{"./loggers":169,"fast-isnumeric":11}],183:[function(e,t,r){"use strict";t.exports=function e(t,r){(t.attr("class")||"").split(" ").forEach(function(e){if(e.indexOf("cursor-")===0)t.classed(e,false)});if(r)t.classed("cursor-"+r,true)}},{}],184:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("./is_array").isArrayOrTypedArray;r.aggNums=function(e,t,i,o){var l,s;if(!o||o>i.length)o=i.length;if(!n(t))t=false;if(a(i[0])){s=new Array(o);for(l=0;l<o;l++)s[l]=r.aggNums(e,t,i[l]);i=s}for(l=0;l<o;l++){if(!n(t))t=i[l];else if(n(i[l]))t=e(+t,+i[l])}return t};r.len=function(e){return r.aggNums(function(e){return e+1},0,e)};r.mean=function(e,t){if(!t)t=r.len(e);return r.aggNums(function(e,t){return e+t},0,e)/t};r.midRange=function(e){if(e===undefined||e.length===0)return undefined;return(r.aggNums(Math.max,null,e)+r.aggNums(Math.min,null,e))/2};r.variance=function(e,t,a){if(!t)t=r.len(e);if(!n(a))a=r.mean(e,t);return r.aggNums(function(e,t){return e+Math.pow(t-a,2)},0,e)/t};r.stdev=function(e,t,n){return Math.sqrt(r.variance(e,t,n))};r.interp=function(e,t){if(!n(t))throw"n should be a finite number";t=t*e.length-.5;if(t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}},{"./is_array":165,"fast-isnumeric":11}],185:[function(e,t,r){"use strict";var n=e("d3");var a=e("../lib");var i=e("../constants/xmlns_namespaces");var o=e("../constants/string_mappings");var l=e("../constants/alignment").LINE_SPACING;function s(e,t){return e.node().getBoundingClientRect()[t]}var u=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(e,t,a){var i=e.text();var o=!e.attr("data-notex")&&typeof MathJax!=="undefined"&&i.match(u);var l=n.select(e.node().parentNode);if(l.empty())return;var c=e.attr("class")?e.attr("class").split(" ")[0]:"text";c+="-math";l.selectAll("svg."+c).remove();l.selectAll("g."+c+"-group").remove();e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function f(){if(!l.empty()){c=e.attr("class")+"-math";l.select("svg."+c).remove()}e.text("").style("white-space","pre");var t=D(e.node(),i);if(t){e.style("pointer-events","all")}r.positionText(e);if(a)a.call(e)}if(o){(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var r=parseInt(e.node().style.fontSize,10);var n={fontSize:r};p(o[2],n,function(n,o,u){l.selectAll("svg."+c).remove();l.selectAll("g."+c+"-group").remove();var d=n&&n.select("svg");if(!d||!d.node()){f();t();return}var p=l.append("g").classed(c+"-group",true).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});p.node().appendChild(d.node());if(o&&o.node()){d.node().insertBefore(o.node().cloneNode(true),d.node().firstChild)}d.attr({class:c,height:u.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var v=e.node().style.fill||"black";d.select("g").attr({fill:v,stroke:v});var h=s(d,"width"),g=s(d,"height"),y=+e.attr("x")-h*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],m=r||s(e,"height"),x=-m/4;if(c[0]==="y"){p.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-h/2,x-g/2]+")"});d.attr({x:+e.attr("x"),y:+e.attr("y")})}else if(c[0]==="l"){d.attr({x:e.attr("x"),y:x-g/2})}else if(c[0]==="a"){d.attr({x:0,y:x})}else{d.attr({x:y,y:+e.attr("y")+x-g/2})}if(a)a.call(e,p);t(p)})}))}else f();return e};var c=/(<|&lt;|&#60;)/g;var f=/(>|&gt;|&#62;)/g;function d(e){return e.replace(c,"\\lt ").replace(f,"\\gt ")}function p(e,t,r){var i="math-output-"+a.randstr({},64);var o=n.select("body").append("div").attr({id:i}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(d(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,o.node()],function(){var t=n.select("body").select("#MathJax_SVG_glyphs");if(o.select(".MathJax_SVG").empty()||!o.select("svg").node()){a.log("There was an error in the tex syntax.",e);r()}else{var i=o.select("svg").node().getBoundingClientRect();r(o.select(".MathJax_SVG"),t,i)}o.remove()})}var v={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"};var h={sub:"0.3em",sup:"-0.6em"};var g={sub:"-0.21em",sup:"0.42em"};var y="\u200b";var m=["http:","https:","mailto:","",undefined,":"];var x=new RegExp("</?("+Object.keys(v).join("|")+")( [^>]*)?/?>","g");var b=Object.keys(o.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:o.entityToUnicode[e]}});var _=/(\r\n?|\n)/g;var w=/(<[^<>]*>)/;var k=/<(\/?)([^ >]*)(\s+(.*))?>/i;var M=/<br(\s+.*)?>/i;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i;var T=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i;var L=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i;var S=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function C(e,t){if(!e)return null;var r=e.match(t);return r&&(r[3]||r[4])}var P=/(^|;)\s*color:/;r.plainText=function(e){return(e||"").replace(x," ")};function z(e,t){if(!e)return"";for(var r=0;r<t.length;r++){var n=t[r];e=e.replace(n.regExp,n.sub)}return e}function O(e){return z(e,b)}function D(e,t){t=O(t).replace(_," ");var r=false;var o=[];var s;var u=-1;function c(){u++;var t=document.createElementNS(i.svg,"tspan");n.select(t).attr({class:"line",dy:u*l+"em"});e.appendChild(t);s=t;var r=o;o=[{node:t}];if(r.length>1){for(var a=1;a<r.length;a++){f(r[a])}}}function f(e){var t=e.type;var r={};var a;if(t==="a"){a="a";var l=e.target;var u=e.href;var c=e.popup;if(u){r={"xlink:xlink:show":l==="_blank"||l.charAt(0)!=="_"?"new":"replace",target:l,"xlink:xlink:href":u};if(c){r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+c+'");return false;'}}}else a="tspan";if(e.style)r.style=e.style;var f=document.createElementNS(i.svg,a);if(t==="sup"||t==="sub"){d(s,y);s.appendChild(f);var p=document.createElementNS(i.svg,"tspan");d(p,y);n.select(p).attr("dy",g[t]);r.dy=h[t];s.appendChild(f);s.appendChild(p)}else{s.appendChild(f)}n.select(f).attr(r);s=e.node=f;o.push(e)}function d(e,t){e.appendChild(document.createTextNode(t))}function p(e){if(o.length===1){a.log("Ignoring unexpected end tag </"+e+">.",t);return}var r=o.pop();if(e!==r.type){a.log("Start tag <"+r.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t)}s=o[o.length-1].node}var x=M.test(t);if(x)c();else{s=e;o=[{node:e}]}var b=t.split(w);for(var z=0;z<b.length;z++){var D=b[z];var E=D.match(k);var R=E&&E[2].toLowerCase();var I=v[R];if(R==="br"){c()}else if(I===undefined){d(s,D)}else{if(E[1]){p(R)}else{var N=E[4];var F={type:R};var j=C(N,A);if(j){j=j.replace(P,"$1 fill:");if(I)j+=";"+I}else if(I)j=I;if(j)F.style=j;if(R==="a"){r=true;var B=C(N,T);if(B){var q=document.createElement("a");q.href=B;if(m.indexOf(q.protocol)!==-1){F.href=encodeURI(decodeURI(B));F.target=C(N,L)||"_blank";F.popup=C(N,S)}}}f(F)}}}return r}r.lineCount=function e(t){return t.selectAll("tspan.line").size()||1};r.positionText=function e(t,r,a){return t.each(function(){var e=n.select(this);function t(t,r){if(r===undefined){r=e.attr(t);if(r===null){e.attr(t,0);r=0}}else e.attr(t,r);return r}var i=t("x",r);var o=t("y",a);if(this.nodeName==="text"){e.selectAll("tspan.line").attr({x:i,y:o})}})};function E(e,t,r){var n=r.horizontalAlign,a=r.verticalAlign||"top",i=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),l,s,u;if(a==="bottom"){s=function(){return i.bottom-l.height}}else if(a==="middle"){s=function(){return i.top+(i.height-l.height)/2}}else{s=function(){return i.top}}if(n==="right"){u=function(){return i.right-l.width}}else if(n==="center"){u=function(){return i.left+(i.width-l.width)/2}}else{u=function(){return i.left}}return function(){l=this.node().getBoundingClientRect();this.style({top:s()-o.top+"px",left:u()-o.left+"px","z-index":1e3});return this}}r.makeEditable=function(e,t){var r=t.gd;var a=t.delegate;var i=n.dispatch("edit","input","cancel");var o=a||e;e.style({"pointer-events":a?"none":"all"});if(e.size()!==1)throw new Error("boo");function l(){u();e.style({opacity:0});var t=o.attr("class"),r;if(t)r="."+t.split(" ")[0]+"-math-group";else r="[class*=-math-group]";if(r){n.select(e.node().parentNode).select(r).style({opacity:0})}}function s(e){var t=e.node();var r=document.createRange();r.selectNodeContents(t);var n=window.getSelection();n.removeAllRanges();n.addRange(r);t.focus()}function u(){var a=n.select(r);var o=a.select(".svg-container");var l=o.append("div");var u=e.node().style;var c=parseFloat(u.fontSize||12);var f=t.text;if(f===undefined)f=e.attr("data-unformatted");l.classed("plugin-editable editable",true).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":c,color:t.fill||u.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:true}).text(f).call(E(e,o,t)).on("blur",function(){r._editing=false;e.text(this.textContent).style({opacity:1});var t=n.select(this).attr("class"),a;if(t)a="."+t.split(" ")[0]+"-math-group";else a="[class*=-math-group]";if(a){n.select(e.node().parentNode).select(a).style({opacity:0})}var o=this.textContent;n.select(this).transition().duration(0).remove();n.select(document).on("mouseup",null);i.edit.call(e,o)}).on("focus",function(){var e=this;r._editing=true;n.select(document).on("mouseup",function(){if(n.event.target===e)return false;if(document.activeElement===l.node())l.node().blur()})}).on("keyup",function(){if(n.event.which===27){r._editing=false;e.style({opacity:1});n.select(this).style({opacity:0}).on("blur",function(){return false}).transition().remove();i.cancel.call(e,this.textContent)}else{i.input.call(e,this.textContent);n.select(this).call(E(e,o,t))}}).on("keydown",function(){if(n.event.which===13)this.blur()}).call(s)}if(t.immediate)l();else o.on("click",l);return n.rebind(e,i,"on")}},{"../constants/alignment":142,"../constants/string_mappings":145,"../constants/xmlns_namespaces":146,"../lib":164,d3:8}],186:[function(e,t,r){"use strict";var n={};r.throttle=function e(t,r,i){var o=n[t];var l=Date.now();if(!o){for(var s in n){if(n[s].ts<l-6e4){delete n[s]}}o=n[t]={ts:0,timer:null}}a(o);function u(){i();o.ts=Date.now();if(o.onDone){o.onDone();o.onDone=null}}if(l>o.ts+r){u();return}o.timer=setTimeout(function(){u();o.timer=null},r)};r.done=function(e){var t=n[e];if(!t||!t.timer)return Promise.resolve();return new Promise(function(e){var r=t.onDone;t.onDone=function n(){if(r)r();e();t.onDone=null}})};r.clear=function(e){if(e){a(n[e]);delete n[e]}else{for(var t in n)r.clear(t)}};function a(e){if(e&&e.timer!==null){clearTimeout(e.timer);e.timer=null}}},{}],187:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t,r){if(t>0)return Math.log(t)/Math.LN10;var a=Math.log(Math.min(r[0],r[1]))/Math.LN10;if(!n(a))a=Math.log(Math.max(r[0],r[1]))/Math.LN10-6;return a}},{"fast-isnumeric":11}],188:[function(e,t,r){"use strict";var n=t.exports={};var a=e("../plots/geo/constants").locationmodeToLayer;var i=e("topojson-client").feature;n.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};n.getTopojsonPath=function(e,t){return e+t+".json"};n.getTopojsonFeatures=function(e,t){var r=a[e.locationmode],n=t.objects[r];return i(t,n).features}},{"../plots/geo/constants":237,"topojson-client":27}],189:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],190:[function(e,t,r){"use strict";t.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],191:[function(e,t,r){"use strict";var n=e("../registry");t.exports=function e(t){var r=n.layoutArrayContainers,a=n.layoutArrayRegexes,i=t.split("[")[0],o,l;for(var s=0;s<a.length;s++){l=t.match(a[s]);if(l&&l.index===0){o=l[0];break}}if(!o)o=r[r.indexOf(i)];if(!o)return false;var u=t.substr(o.length);if(!u)return{array:o,index:"",property:""};l=u.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/);if(!l)return false;return{array:o,index:Number(l[1]),property:l[3]||""}}},{"../registry":258}],192:[function(e,t,r){"use strict";var n=e("../lib");var a=n.extendFlat;var i=n.isPlainObject;var o={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]};var l={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw"]};var s=o.flags.slice().concat(["clearCalc","fullReplot"]);var u=l.flags.slice().concat("layoutReplot");t.exports={traces:o,layout:l,traceFlags:function(){return c(s)},layoutFlags:function(){return c(u)},update:function(e,t){var r=t.editType;if(r&&r!=="none"){var n=r.split("+");for(var a=0;a<n.length;a++){e[n[a]]=true}}},overrideAll:f};function c(e){var t={};for(var r=0;r<e.length;r++)t[e[r]]=false;return t}function f(e,t,r){var n=a({},e);for(var o in n){var l=n[o];if(i(l)){n[o]=d(l,t,r,o)}}if(r==="from-root")n.editType=t;return n}function d(e,t,r,n){if(e.valType){var i=a({},e);i.editType=t;if(Array.isArray(e.items)){i.items=new Array(e.items.length);for(var o=0;o<e.items.length;o++){i.items[o]=d(e.items[o],t,"from-root")}}return i}else{return f(e,t,n.charAt(0)==="_"?"nested":"from-root")}}},{"../lib":164}],193:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("gl-mat4/fromQuat");var i=e("../registry");var o=e("../lib");var l=e("../plots/plots");var s=e("../plots/cartesian/axis_ids");var u=s.cleanId;var c=s.getFromTrace;var f=e("../components/color");r.clearPromiseQueue=function(e){if(Array.isArray(e._promises)&&e._promises.length>0){o.log("Clearing previous rejected promises from queue.")}e._promises=[]};r.cleanLayout=function(e){var t,r;if(!e)e={};if(e.xaxis1){if(!e.xaxis)e.xaxis=e.xaxis1;delete e.xaxis1}if(e.yaxis1){if(!e.yaxis)e.yaxis=e.yaxis1;delete e.yaxis1}if(e.scene1){if(!e.scene)e.scene=e.scene1;delete e.scene1}var n=(l.subplotsRegistry.cartesian||{}).attrRegex;var i=(l.subplotsRegistry.gl3d||{}).attrRegex;var s=Object.keys(e);for(t=0;t<s.length;t++){var c=s[t];if(n&&n.test(c)){var p=e[c];if(p.anchor&&p.anchor!=="free"){p.anchor=u(p.anchor)}if(p.overlaying)p.overlaying=u(p.overlaying);if(!p.type){if(p.isdate)p.type="date";else if(p.islog)p.type="log";else if(p.isdate===false&&p.islog===false)p.type="linear"}if(p.autorange==="withzero"||p.autorange==="tozero"){p.autorange=true;p.rangemode="tozero"}delete p.islog;delete p.isdate;delete p.categories;if(g(p,"domain"))delete p.domain;if(p.autotick!==undefined){if(p.tickmode===undefined){p.tickmode=p.autotick?"auto":"linear"}delete p.autotick}}else if(i&&i.test(c)){var v=e[c];var h=v.cameraposition;if(Array.isArray(h)&&h[0].length===4){var y=h[0],m=h[1],x=h[2],b=a([],y),_=[];for(r=0;r<3;++r){_[r]=m[r]+x*b[2+4*r]}v.camera={eye:{x:_[0],y:_[1],z:_[2]},center:{x:m[0],y:m[1],z:m[2]},up:{x:b[1],y:b[5],z:b[9]}};delete v.cameraposition}}}var w=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<w;t++){var k=e.annotations[t];if(!o.isPlainObject(k))continue;if(k.ref){if(k.ref==="paper"){k.xref="paper";k.yref="paper"}else if(k.ref==="data"){k.xref="x";k.yref="y"}delete k.ref}d(k,"xref");d(k,"yref")}var M=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<M;t++){var A=e.shapes[t];if(!o.isPlainObject(A))continue;d(A,"xref");d(A,"yref")}var T=e.legend;if(T){if(T.x>3){T.x=1.02;T.xanchor="left"}else if(T.x<-2){T.x=-.02;T.xanchor="right"}if(T.y>3){T.y=1.02;T.yanchor="bottom"}else if(T.y<-2){T.y=-.02;T.yanchor="top"}}if(e.dragmode==="rotate")e.dragmode="orbit";f.clean(e);return e};function d(e,t){var r=e[t],n=t.charAt(0);if(r&&r!=="paper"){e[t]=u(r,n)}}r.cleanData=function(e){for(var t=0;t<e.length;t++){var n=e[t];var a;if(n.type==="histogramy"&&"xbins"in n&&!("ybins"in n)){n.ybins=n.xbins;delete n.xbins}if(n.error_y&&"opacity"in n.error_y){var s=f.defaults,c=n.error_y.color||(i.traceIs(n,"bar")?f.defaultLine:s[t%s.length]);n.error_y.color=f.addOpacity(f.rgb(c),f.opacity(c)*n.error_y.opacity);delete n.error_y.opacity}if("bardir"in n){if(n.bardir==="h"&&(i.traceIs(n,"bar")||n.type.substr(0,9)==="histogram")){n.orientation="h";r.swapXYData(n)}delete n.bardir}if(n.type==="histogramy")r.swapXYData(n);if(n.type==="histogramx"||n.type==="histogramy"){n.type="histogram"}if("scl"in n){n.colorscale=n.scl;delete n.scl}if("reversescl"in n){n.reversescale=n.reversescl;delete n.reversescl}if(n.xaxis)n.xaxis=u(n.xaxis,"x");if(n.yaxis)n.yaxis=u(n.yaxis,"y");if(i.traceIs(n,"gl3d")&&n.scene){n.scene=l.subplotsRegistry.gl3d.cleanId(n.scene)}if(!i.traceIs(n,"pie")&&!i.traceIs(n,"bar")){if(Array.isArray(n.textposition)){for(a=0;a<n.textposition.length;a++){n.textposition[a]=h(n.textposition[a])}}else if(n.textposition){n.textposition=h(n.textposition)}}var d=i.getModule(n);if(d&&d.colorbar){var y=d.colorbar.container;var m=y?n[y]:n;if(m&&m.colorscale){if(m.colorscale==="YIGnBu")m.colorscale="YlGnBu";if(m.colorscale==="YIOrRd")m.colorscale="YlOrRd"}}if(n.type==="surface"&&o.isPlainObject(n.contours)){var x=["x","y","z"];for(a=0;a<x.length;a++){var b=n.contours[x[a]];if(!o.isPlainObject(b))continue;if(b.highlightColor){b.highlightcolor=b.highlightColor;delete b.highlightColor}if(b.highlightWidth){b.highlightwidth=b.highlightWidth;delete b.highlightWidth}}}if(n.type==="candlestick"||n.type==="ohlc"){var _=(n.increasing||{}).showlegend!==false;var w=(n.decreasing||{}).showlegend!==false;var k=p(n.increasing);var M=p(n.decreasing);if(k!==false&&M!==false){var A=v(k,M,_,w);if(A)n.name=A}else if((k||M)&&!n.name){n.name=k||M}}if(Array.isArray(n.transforms)){var T=n.transforms;for(a=0;a<T.length;a++){var L=T[a];if(!o.isPlainObject(L))continue;switch(L.type){case"filter":if(L.filtersrc){L.target=L.filtersrc;delete L.filtersrc}if(L.calendar){if(!L.valuecalendar){L.valuecalendar=L.calendar}delete L.calendar}break;case"groupby":L.styles=L.styles||L.style;if(L.styles&&!Array.isArray(L.styles)){var S=L.styles;var C=Object.keys(S);L.styles=[];for(var P=0;P<C.length;P++){L.styles.push({target:C[P],value:S[C[P]]})}}break}}}if(g(n,"line"))delete n.line;if("marker"in n){if(g(n.marker,"line"))delete n.marker.line;if(g(n,"marker"))delete n.marker}f.clean(n)}};function p(e){if(!o.isPlainObject(e))return false;var t=e.name;delete e.name;delete e.showlegend;return(typeof t==="string"||typeof t==="number")&&String(t)}function v(e,t,r,n){if(r&&!n)return e;if(n&&!r)return t;if(!e.trim())return t;if(!t.trim())return e;var a=Math.min(e.length,t.length);var i;for(i=0;i<a;i++){if(e.charAt(i)!==t.charAt(i))break}var o=e.substr(0,i);return o.trim()}function h(e){var t="middle",r="center";if(e.indexOf("top")!==-1)t="top";else if(e.indexOf("bottom")!==-1)t="bottom";if(e.indexOf("left")!==-1)r="left";else if(e.indexOf("right")!==-1)r="right";return t+" "+r}function g(e,t){return t in e&&typeof e[t]==="object"&&Object.keys(e[t]).length===0}r.swapXYData=function(e){var t;o.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]);if(Array.isArray(e.z)&&Array.isArray(e.z[0])){if(e.transpose)delete e.transpose;else e.transpose=true}if(e.error_x&&e.error_y){var r=e.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);o.swapAttrs(e,["error_?.copy_ystyle"]);if(n){o.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}}if(typeof e.hoverinfo==="string"){var a=e.hoverinfo.split("+");for(t=0;t<a.length;t++){if(a[t]==="x")a[t]="y";else if(a[t]==="y")a[t]="x"}e.hoverinfo=a.join("+")}};r.coerceTraceIndices=function(e,t){if(n(t)){return[t]}else if(!Array.isArray(t)||!t.length){return e.data.map(function(e,t){return t})}return t};r.manageArrayContainers=function(e,t,r){var a=e.obj,i=e.parts,l=i.length,s=i[l-1];var u=n(s);if(u&&t===null){var c=i.slice(0,l-1).join("."),f=o.nestedProperty(a,c).get();f.splice(s,1)}else if(u&&e.get()===undefined){if(e.get()===undefined)r[e.astr]=null;e.set(t)}else{e.set(t)}};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function m(e){var t=e.search(y);if(t>0)return e.substr(0,t)}r.hasParent=function(e,t){var r=m(t);while(r){if(r in e)return true;r=m(r)}return false};var x=["x","y","z"];r.clearAxisTypes=function(e,t,r){for(var n=0;n<t.length;n++){var a=e._fullData[n];for(var i=0;i<3;i++){var l=c(e,a,x[i]);if(l&&l.type!=="log"){var s=l._name;var u=l._id.substr(1);if(u.substr(0,5)==="scene"){if(r[u]!==undefined)continue;s=u+"."+s}var f=s+".type";if(r[s]===undefined&&r[f]===undefined){o.nestedProperty(e.layout,f).set(null)}}}}}},{"../components/color":44,"../lib":164,"../plots/cartesian/axis_ids":212,"../plots/plots":249,"../registry":258,"fast-isnumeric":11,"gl-mat4/fromQuat":12}],194:[function(e,t,r){"use strict";var n=e("./plot_api");r.plot=n.plot;r.newPlot=n.newPlot;r.restyle=n.restyle;r.relayout=n.relayout;r.redraw=n.redraw;r.update=n.update;r.react=n.react;r.extendTraces=n.extendTraces;r.prependTraces=n.prependTraces;r.addTraces=n.addTraces;r.deleteTraces=n.deleteTraces;r.moveTraces=n.moveTraces;r.purge=n.purge;r.addFrames=n.addFrames;r.deleteFrames=n.deleteFrames;r.animate=n.animate;r.setPlotConfig=n.setPlotConfig;r.toImage=e("./to_image");r.validate=e("./validate");r.downloadImage=e("../snapshot/download");var a=e("./template_api");r.makeTemplate=a.makeTemplate;r.validateTemplate=a.validateTemplate},{"../snapshot/download":260,"./plot_api":196,"./template_api":201,"./to_image":202,"./validate":203}],195:[function(e,t,r){"use strict";var n=e("../lib/nested_property");var a=e("../lib/is_plain_object");var i=e("../lib/noop");var o=e("../lib/loggers");var l=e("../lib/search").sorterAsc;var s=e("../registry");r.containerArrayMatch=e("./container_array_match");var u=r.isAddVal=function e(t){return t==="add"||a(t)};var c=r.isRemoveVal=function e(t){return t===null||t==="remove"};r.applyContainerArrayChanges=function e(t,r,a,f){var d=r.astr,p=s.getComponentMethod(d,"supplyLayoutDefaults"),v=s.getComponentMethod(d,"draw"),h=s.getComponentMethod(d,"drawOne"),g=f.replot||f.recalc||p===i||v===i,y=t.layout,m=t._fullLayout;if(a[""]){if(Object.keys(a).length>1){o.warn("Full array edits are incompatible with other edits",d)}var x=a[""][""];if(c(x))r.set(null);else if(Array.isArray(x))r.set(x);else{o.warn("Unrecognized full array edit value",d,x);return true}if(g)return false;p(y,m);v(t);return true}var b=Object.keys(a).map(Number).sort(l),_=r.get(),w=_||[],k=n(m,d).get();var M=[],A=-1,T=w.length,L,S,C,P,z,O,D;for(L=0;L<b.length;L++){C=b[L];P=a[C];z=Object.keys(P);O=P[""],D=u(O);if(C<0||C>w.length-(D?0:1)){o.warn("index out of range",d,C);continue}if(O!==undefined){if(z.length>1){o.warn("Insertion & removal are incompatible with edits to the same index.",d,C)}if(c(O)){M.push(C)}else if(D){if(O==="add")O={};w.splice(C,0,O);if(k)k.splice(C,0,{})}else{o.warn("Unrecognized full object edit value",d,C,O)}if(A===-1)A=C}else{for(S=0;S<z.length;S++){n(w[C],z[S]).set(P[z[S]])}}}for(L=M.length-1;L>=0;L--){w.splice(M[L],1);if(k)k.splice(M[L],1)}if(!w.length)r.set(null);else if(!_)r.set(w);if(g)return false;p(y,m);if(h!==i){var E;if(A===-1){E=b}else{T=Math.max(w.length,T);E=[];for(L=0;L<b.length;L++){C=b[L];if(C>=A)break;E.push(C)}for(L=A;L<T;L++){E.push(L)}}for(L=0;L<E.length;L++){h(t,E[L])}}else v(t);return true}},{"../lib/is_plain_object":166,"../lib/loggers":169,"../lib/nested_property":172,"../lib/noop":173,"../lib/search":182,"../registry":258,"./container_array_match":191}],196:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("has-hover");var o=e("../lib");var l=e("../lib/events");var s=e("../lib/queue");var u=e("../registry");var c=e("./plot_schema");var f=e("../plots/plots");var d=e("../plots/polar/legacy");var p=e("../plots/cartesian/axes");var v=e("../components/drawing");var h=e("../components/color");var g=e("../components/colorbar/connect");var y=e("../plots/cartesian/graph_interact").initInteractions;var m=e("../constants/xmlns_namespaces");var x=e("../lib/svg_text_utils");var b=e("./plot_config");var _=e("./manage_arrays");var w=e("./helpers");var k=e("./subroutines");var M=e("./edit_types");var A=e("../plots/cartesian/constants").AX_NAME_PATTERN;var T=0;var L=5;r.plot=function(e,t,a,i){var s;e=o.getGraphDiv(e);l.init(e);if(o.isPlainObject(t)){var c=t;t=c.data;a=c.layout;i=c.config;s=c.frames}var d=l.triggerHandler(e,"plotly_beforeplot",[t,a,i]);if(d===false)return Promise.reject();if(!t&&!a&&!o.isPlotDiv(e)){o.warn("Calling Plotly.plot as if redrawing "+"but this container doesn't yet have a plot.",e)}function h(){if(s){return r.addFrames(e,s)}}z(e,i);if(!a)a={};n.select(e).classed("js-plotly-plot",true);v.makeTester();delete v.baseUrl;if(!Array.isArray(e._promises))e._promises=[];var m=(e.data||[]).length===0&&Array.isArray(t);if(Array.isArray(t)){w.cleanData(t);if(m)e.data=t;else e.data.push.apply(e.data,t);e.empty=false}if(!e.layout||m)e.layout=w.cleanLayout(a);if(e._dragging&&!e._transitioning){e._replotPending=true;return Promise.reject()}else{e._replotPending=false}f.supplyDefaults(e);var x=e._fullLayout;var b=x._has("cartesian");if(!x._has("polar")&&t&&t[0]&&t[0].r){o.log("Legacy polar charts are deprecated!");return O(e,t,a)}x._replotting=true;if(m)ee(e);if(e.framework!==ee){e.framework=ee;ee(e)}v.initGradients(e);if(m)p.saveShowSpikeInitial(e);var _=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;if(_)f.doCalcdata(e);for(var M=0;M<e.calcdata.length;M++){e.calcdata[M][0].trace=e._fullData[M]}var A=JSON.stringify(x._size);function T(){var t=x._basePlotModules;for(var r=0;r<t.length;r++){if(t[r].drawFramework){t[r].drawFramework(e)}}if(!x._glcanvas&&x._has("gl")){x._glcanvas=x._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:true,pick:false},{key:"focusLayer",context:false,pick:false},{key:"pickLayer",context:false,pick:true}],function(e){return e.key});x._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})}if(x._glcanvas){x._glcanvas.attr("width",x.width).attr("height",x.height)}return f.previousPromises(e)}function L(){var t=e.calcdata;var r,n,a;f.clearAutoMarginIds(e);k.drawMarginPushers(e);p.allowAutoMargin(e);for(r=0;r<t.length;r++){n=t[r];a=n[0].trace;var i=a._module.colorbar;if(a.visible!==true||!i){f.autoMargin(e,"cb"+a.uid)}else g(e,n,i)}f.doAutoMargin(e);return f.previousPromises(e)}function C(){if(JSON.stringify(x._size)===A)return;return o.syncOrAsync([L,k.layoutStyles],e)}function P(){if(!_){D();return}var t=x._subplots.cartesian;var r=x._modules;var n=[];var a,i,l;for(l=0;l<r.length;l++){o.pushUnique(n,r[l].setPositions)}if(n.length){for(i=0;i<t.length;i++){a=x._plots[t[i]];for(l=0;l<n.length;l++){n[l](e,a)}}}u.getComponentMethod("errorbars","calc")(e);return o.syncOrAsync([u.getComponentMethod("shapes","calcAutorange"),u.getComponentMethod("annotations","calcAutorange"),D,u.getComponentMethod("rangeslider","calcAutorange")],e)}function D(){if(e._transitioning)return;k.doAutoRangeAndConstraints(e);if(m)p.saveRangeInitial(e)}function E(){return p.doTicks(e,m?"":"redraw")}var R=[f.previousPromises,h,T,L,C];if(b)R.push(P);R.push(k.layoutStyles);if(b)R.push(E);R.push(k.drawData,k.finalDraw,y,f.addLinks,f.rehover,f.doAutoMargin,f.previousPromises);var I=o.syncOrAsync(R,e);if(!I||!I.then)I=Promise.resolve();return I.then(function(){S(e);return e})};function S(e){var t=e._fullLayout;if(t._redrawFromAutoMarginCount){t._redrawFromAutoMarginCount--}else{e.emit("plotly_afterplot")}}r.setPlotConfig=function e(t){return o.extendFlat(b,t)};function C(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){o.error(e)}}function P(e,t){var r=h.combine(t,"white");C(e,r)}function z(e,t){if(!e._context)e._context=o.extendDeep({},b);var r=e._context;var n,a,l;if(t){a=Object.keys(t);for(n=0;n<a.length;n++){l=a[n];if(l==="editable"||l==="edits")continue;if(l in r){if(l==="setBackground"&&t[l]==="opaque"){r[l]=P}else{r[l]=t[l]}}}if(t.plot3dPixelRatio&&!r.plotGlPixelRatio){r.plotGlPixelRatio=r.plot3dPixelRatio}var s=t.editable;if(s!==undefined){r.editable=s;a=Object.keys(r.edits);for(n=0;n<a.length;n++){r.edits[a[n]]=s}}if(t.edits){a=Object.keys(t.edits);for(n=0;n<a.length;n++){l=a[n];if(l in r.edits){r.edits[l]=t.edits[l]}}}}if(r.staticPlot){r.editable=false;r.edits={};r.autosizable=false;r.scrollZoom=false;r.doubleClick=false;r.showTips=false;r.showLink=false;r.displayModeBar=false}if(r.displayModeBar==="hover"&&!i){r.displayModeBar=true}if(r.setBackground==="transparent"||typeof r.setBackground!=="function"){r.setBackground=C}}function O(e,t,r){var a=n.select(e).selectAll(".plot-container").data([0]);a.enter().insert("div",":first-child").classed("plot-container plotly",true);var i=a.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",true).style("position","relative");i.html("");if(t)e.data=t;if(r)e.layout=r;d.manager.fillLayout(e);i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"});e.framework=d.manager.framework(e);e.framework({data:e.data,layout:e.layout},i.node());e.framework.setUndoPoint();var l=e.framework.svg();var s=1;var u=e._fullLayout.title;if(u===""||!u)s=0;var c=function(){this.call(x.convertToTspans,e)};var p=l.select(".title-group text").call(c);if(e._context.edits.titleText){var v=o._(e,"Click to enter Plot title");if(!u||u===v){s=.2;p.attr({"data-unformatted":v}).text(v).style({opacity:s}).on("mouseover.opacity",function(){n.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(1e3).style("opacity",0)})}var h=function(){this.call(x.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}});this.text(t).call(c);this.call(h)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(c)})};p.call(h)}e._context.setBackground(e,e._fullLayout.paper_bgcolor);f.addLinks(e);return Promise.resolve()}r.redraw=function(e){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}w.cleanData(e.data);w.cleanLayout(e.layout);e.calcdata=undefined;return r.plot(e).then(function(){e.emit("plotly_redraw");return e})};r.newPlot=function(e,t,n,a){e=o.getGraphDiv(e);f.cleanPlot([],{},e._fullData||[],e._fullLayout||{},e.calcdata||[]);f.purge(e);return r.plot(e,t,n,a)};function D(e,t){var r=t+1,n=[],a,i;for(a=0;a<e.length;a++){i=e[a];if(i<0){n.push(r+i)}else{n.push(i)}}return n}function E(e,t,r){var n,a;for(n=0;n<t.length;n++){a=t[n];if(a!==parseInt(a,10)){throw new Error("all values in "+r+" must be integers")}if(a>=e.data.length||a<-e.data.length){throw new Error(r+" must be valid indices for gd.data.")}if(t.indexOf(a,n+1)>-1||a>=0&&t.indexOf(-e.data.length+a)>-1||a<0&&t.indexOf(e.data.length+a)>-1){throw new Error("each index in "+r+" must be unique.")}}}function R(e,t,r){if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("currentIndices is a required argument.")}else if(!Array.isArray(t)){t=[t]}E(e,t,"currentIndices");if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"){E(e,r,"newIndices")}if(typeof r!=="undefined"&&t.length!==r.length){throw new Error("current and new indices must be of equal length.")}}function I(e,t,r){var n,a;if(!Array.isArray(e.data)){throw new Error("gd.data must be an array.")}if(typeof t==="undefined"){throw new Error("traces must be defined.")}if(!Array.isArray(t)){t=[t]}for(n=0;n<t.length;n++){a=t[n];if(typeof a!=="object"||(Array.isArray(a)||a===null)){throw new Error("all values in traces array must be non-array objects")}}if(typeof r!=="undefined"&&!Array.isArray(r)){r=[r]}if(typeof r!=="undefined"&&r.length!==t.length){throw new Error("if indices is specified, traces.length must equal indices.length")}}function N(e,t,r,n){var a=o.isPlainObject(n);if(!Array.isArray(e.data)){throw new Error("gd.data must be an array")}if(!o.isPlainObject(t)){throw new Error("update must be a key:value object")}if(typeof r==="undefined"){throw new Error("indices must be an integer or array of integers")}E(e,r,"indices");for(var i in t){if(!Array.isArray(t[i])||t[i].length!==r.length){throw new Error("attribute "+i+" must be an array of length equal to indices array length")}if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==t[i].length)){throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 "+"corrispondence with the keys and number of traces in the update object")}}}function F(e,t,r,n){var i=o.isPlainObject(n),l=[];var s,u,c,f,d;if(!Array.isArray(r))r=[r];r=D(r,e.data.length-1);for(var p in t){for(var v=0;v<r.length;v++){s=e.data[r[v]];c=o.nestedProperty(s,p);u=c.get();f=t[p][v];if(!o.isArrayOrTypedArray(f)){throw new Error("attribute: "+p+" index: "+v+" must be an array")}if(!o.isArrayOrTypedArray(u)){throw new Error("cannot extend missing or non-array attribute: "+p)}if(u.constructor!==f.constructor){throw new Error("cannot extend array with an array of a different type: "+p)}d=i?n[p][v]:n;if(!a(d))d=-1;l.push({prop:c,target:u,insert:f,maxp:Math.floor(d)})}}return l}function j(e,t,r,n,a){N(e,t,r,n);var i=F(e,t,r,n);var o={};var l={};for(var s=0;s<i.length;s++){var u=i[s].prop;var c=i[s].maxp;var f=a(i[s].target,i[s].insert,c);u.set(f[0]);if(!Array.isArray(o[u.astr]))o[u.astr]=[];o[u.astr].push(f[1]);if(!Array.isArray(l[u.astr]))l[u.astr]=[];l[u.astr].push(i[s].target.length)}return{update:o,maxPoints:l}}function B(e,t){var r=new e.constructor(e.length+t.length);r.set(e);r.set(t,e.length);return r}r.extendTraces=function e(t,n,a,i){t=o.getGraphDiv(t);function l(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<0){var i=new e.constructor(0);var l=B(e,t);if(r<0){n=l;a=i}else{n=i;a=l}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(s));a.set(e);a.set(t.subarray(0,s),e.length)}else{var u=r-t.length;var c=e.length-u;n.set(e.subarray(c));n.set(t,u);a.set(e.subarray(0,c))}}}else{n=e.concat(t);a=r>=0&&r<n.length?n.splice(0,n.length-r):[]}return[n,a]}var u=j(t,n,a,i,l);var c=r.redraw(t);var f=[t,u.update,a,u.maxPoints];s.add(t,r.prependTraces,f,e,arguments);return c};r.prependTraces=function e(t,n,a,i){t=o.getGraphDiv(t);function l(e,t,r){var n,a;if(o.isTypedArray(e)){if(r<=0){var i=new e.constructor(0);var l=B(t,e);if(r<0){n=l;a=i}else{n=i;a=l}}else{n=new e.constructor(r);a=new e.constructor(e.length+t.length-r);if(r===t.length){n.set(t);a.set(e)}else if(r<t.length){var s=t.length-r;n.set(t.subarray(0,s));a.set(t.subarray(s));a.set(e,s)}else{var u=r-t.length;n.set(t);n.set(e.subarray(0,u),t.length);a.set(e.subarray(u))}}}else{n=t.concat(e);a=r>=0&&r<n.length?n.splice(r,n.length):[]}return[n,a]}var u=j(t,n,a,i,l);var c=r.redraw(t);var f=[t,u.update,a,u.maxPoints];s.add(t,r.extendTraces,f,e,arguments);return c};r.addTraces=function e(t,n,a){t=o.getGraphDiv(t);var i=[],l=r.deleteTraces,u=e,c=[t,i],f=[t,n],d,p;I(t,n,a);if(!Array.isArray(n)){n=[n]}n=n.map(function(e){return o.extendFlat({},e)});w.cleanData(n);for(d=0;d<n.length;d++){t.data.push(n[d])}for(d=0;d<n.length;d++){i.push(-n.length+d)}if(typeof a==="undefined"){p=r.redraw(t);s.add(t,l,c,u,f);return p}if(!Array.isArray(a)){a=[a]}try{R(t,i,a)}catch(e){t.data.splice(t.data.length-n.length,n.length);throw e}s.startSequence(t);s.add(t,l,c,u,f);p=r.moveTraces(t,i,a);s.stopSequence(t);return p};r.deleteTraces=function e(t,n){t=o.getGraphDiv(t);var a=[],i=r.addTraces,l=e,u=[t,a,n],c=[t,n],f,d;if(typeof n==="undefined"){throw new Error("indices must be an integer or array of integers.")}else if(!Array.isArray(n)){n=[n]}E(t,n,"indices");n=D(n,t.data.length-1);n.sort(o.sorterDes);for(f=0;f<n.length;f+=1){d=t.data.splice(n[f],1)[0];a.push(d)}var p=r.redraw(t);s.add(t,i,u,l,c);return p};r.moveTraces=function e(t,n,a){t=o.getGraphDiv(t);var i=[],l=[],u=e,c=e,f=[t,a,n],d=[t,n,a],p;R(t,n,a);n=Array.isArray(n)?n:[n];if(typeof a==="undefined"){a=[];for(p=0;p<n.length;p++){a.push(-n.length+p)}}a=Array.isArray(a)?a:[a];n=D(n,t.data.length-1);a=D(a,t.data.length-1);for(p=0;p<t.data.length;p++){if(n.indexOf(p)===-1){i.push(t.data[p])}}for(p=0;p<n.length;p++){l.push({newIndex:a[p],trace:t.data[n[p]]})}l.sort(function(e,t){return e.newIndex-t.newIndex});for(p=0;p<l.length;p+=1){i.splice(l[p].newIndex,0,l[p].trace)}t.data=i;var v=r.redraw(t);s.add(t,u,f,c,d);return v};r.restyle=function e(t,n,a,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);var l={};if(typeof n==="string")l[n]=a;else if(o.isPlainObject(n)){l=o.extendFlat({},n);if(i===undefined)i=a}else{o.warn("Restyle fail.",n,a,i);return Promise.reject()}if(Object.keys(l).length)t.changed=true;var u=w.coerceTraceIndices(t,i);var c=H(t,l,u);var d=c.flags;if(d.clearCalc)t.calcdata=undefined;if(d.clearAxisTypes)w.clearAxisTypes(t,u,{});var p=[];if(d.fullReplot){p.push(r.plot)}else{p.push(f.previousPromises);f.supplyDefaults(t);if(d.style)p.push(k.doTraceStyle);if(d.colorbars)p.push(k.doColorBars);p.push(S)}p.push(f.rehover);s.add(t,e,[t,c.undoit,c.traces],e,[t,c.redoit,c.traces]);var v=o.syncOrAsync(p,t);if(!v||!v.then)v=Promise.resolve();return v.then(function(){t.emit("plotly_restyle",c.eventData);return t})};function q(e){if(e===undefined)return null;return e}function H(e,t,r){var n=e._fullLayout,a=e._fullData,i=e.data,l;var s=M.traceFlags();var d={},v={},h;function g(){return r.map(function(){return undefined})}function y(e){var t=p.id2name(e);if(h.indexOf(t)===-1)h.push(t)}function m(e){return"LAYOUT"+e+".autorange"}function x(e){return"LAYOUT"+e+".range"}function b(n,a,l){if(Array.isArray(n)){n.forEach(function(e){b(e,a,l)});return}if(n in t||w.hasParent(t,n))return;var s;if(n.substr(0,6)==="LAYOUT"){s=o.nestedProperty(e.layout,n.replace("LAYOUT",""))}else{s=o.nestedProperty(i[r[l]],n)}if(!(n in v)){v[n]=g()}if(v[n][l]===undefined){v[n][l]=q(s.get())}if(a!==undefined){s.set(a)}}for(var _ in t){if(w.hasParent(t,_)){throw new Error("cannot set "+_+"and a parent attribute simultaneously")}var k=t[_],A,T,L,S,C,P;d[_]=k;if(_.substr(0,6)==="LAYOUT"){L=o.nestedProperty(e.layout,_.replace("LAYOUT",""));v[_]=[q(L.get())];L.set(Array.isArray(k)?k[0]:k);s.calc=true;continue}v[_]=g();for(l=0;l<r.length;l++){A=i[r[l]];T=a[r[l]];L=o.nestedProperty(A,_);S=L.get();C=Array.isArray(k)?k[l%k.length]:k;if(C===undefined)continue;var z=L.parts[L.parts.length-1];var O=_.substr(0,_.length-z.length-1);var D=O?O+".":"";var E=O?o.nestedProperty(T,O).get():T;P=c.getTraceValObject(T,L.parts);if(P&&P.impliedEdits&&C!==null){for(var R in P.impliedEdits){b(o.relativeAttr(_,R),P.impliedEdits[R],l)}}else if((z==="thicknessmode"||z==="lenmode")&&S!==C&&(C==="fraction"||C==="pixels")&&E){var I=n._size;var N=E.orient;var F=N==="top"||N==="bottom";if(z==="thicknessmode"){var j=F?I.h:I.w;b(D+"thickness",E.thickness*(C==="fraction"?1/j:j),l)}else{var B=F?I.w:I.h;b(D+"len",E.len*(C==="fraction"?1/B:B),l)}}else if(_==="type"&&C==="pie"!==(S==="pie")){var H="x",U="y";if((C==="bar"||S==="bar")&&A.orientation==="h"){H="y";U="x"}o.swapAttrs(A,["?","?src"],"labels",H);o.swapAttrs(A,["d?","?0"],"label",H);o.swapAttrs(A,["?","?src"],"values",U);if(S==="pie"){o.nestedProperty(A,"marker.color").set(o.nestedProperty(A,"marker.colors").get());n._pielayer.selectAll("g.trace").remove()}else if(u.traceIs(A,"cartesian")){o.nestedProperty(A,"marker.colors").set(o.nestedProperty(A,"marker.color").get())}}v[_][l]=q(S);var V=["swapxy","swapxyaxes","orientation","orientationaxes"];if(V.indexOf(_)!==-1){if(_==="orientation"){L.set(C);var G=A.x&&!A.y?"h":"v";if((L.get()||G)===T.orientation){continue}}else if(_==="orientationaxes"){A.orientation={v:"h",h:"v"}[T.orientation]}w.swapXYData(A);s.calc=s.clearAxisTypes=true}else if(f.dataArrayContainers.indexOf(L.parts[0])!==-1){w.manageArrayContainers(L,C,v);s.calc=true}else{if(P){if(P.arrayOk&&(o.isArrayOrTypedArray(C)||o.isArrayOrTypedArray(S))){s.calc=true}else M.update(s,P)}else{s.calc=true}L.set(C)}}if(["swapxyaxes","orientationaxes"].indexOf(_)!==-1){p.swap(e,r)}if(_==="orientationaxes"){var Y=o.nestedProperty(e.layout,"hovermode");if(Y.get()==="x"){Y.set("y")}else if(Y.get()==="y"){Y.set("x")}}if(["orientation","type"].indexOf(_)!==-1){h=[];for(l=0;l<r.length;l++){var Z=i[r[l]];if(u.traceIs(Z,"cartesian")){y(Z.xaxis||"x");y(Z.yaxis||"y");if(_==="type"){b(["autobinx","autobiny"],true,l)}}}b(h.map(m),true,0);b(h.map(x),[0,1],0)}}var X=false;var W=p.list(e);for(l=0;l<W.length;l++){if(W[l].autorange){X=true;break}}if(s.calc||s.calcIfAutorange&&X){s.clearCalc=true}if(s.calc||s.plot||s.calcIfAutorange){s.fullReplot=true}return{flags:s,undoit:v,redoit:d,traces:r,eventData:o.extendDeepNoArrays([],[d,r])}}r.relayout=function e(t,r,n){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}var a={};if(typeof r==="string"){a[r]=n}else if(o.isPlainObject(r)){a=o.extendFlat({},r)}else{o.warn("Relayout fail.",r,n);return Promise.reject()}if(Object.keys(a).length)t.changed=true;var i=Z(t,a);var l=i.flags;if(l.calc)t.calcdata=undefined;var u=[f.previousPromises];if(l.layoutReplot){u.push(k.layoutReplot)}else if(Object.keys(a).length){f.supplyDefaults(t);if(l.legend)u.push(k.doLegend);if(l.layoutstyle)u.push(k.layoutStyles);if(l.axrange){U(u,i.rangesAltered)}if(l.ticks)u.push(k.doTicksRelayout);if(l.modebar)u.push(k.doModeBar);if(l.camera)u.push(k.doCamera);u.push(S)}u.push(f.rehover);s.add(t,e,[t,i.undoit],e,[t,i.redoit]);var c=o.syncOrAsync(u,t);if(!c||!c.then)c=Promise.resolve(t);return c.then(function(){t.emit("plotly_relayout",i.eventData);return t})};function U(e,t){var r=t?function(e){return k.doTicksRelayout(e,t)}:k.doTicksRelayout;e.push(r,k.drawData,k.finalDraw)}var V=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/;var G=/^[xyz]axis[0-9]*\.autorange$/;var Y=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Z(e,t){var r=e.layout,n=e._fullLayout,a=Object.keys(t),i=p.list(e),l={},s,f,d;for(f=0;f<a.length;f++){if(a[f].indexOf("allaxes")===0){for(d=0;d<i.length;d++){var v=i[d]._id.substr(1),h=v.indexOf("scene")!==-1?v+".":"",g=a[f].replace("allaxes",h+i[d]._name);if(!t[g])t[g]=t[a[f]]}delete t[a[f]]}}var y=M.layoutFlags();var m={},x={};function b(e,n){if(Array.isArray(e)){e.forEach(function(e){b(e,n)});return}if(e in t||w.hasParent(t,e))return;var a=o.nestedProperty(r,e);if(!(e in x)){x[e]=q(a.get())}if(n!==undefined)a.set(n)}var k={};var T;function L(e){var t=p.name2id(e.split(".")[0]);k[t]=1;return t}for(var S in t){if(w.hasParent(t,S)){throw new Error("cannot set "+S+"and a parent attribute simultaneously")}var C=o.nestedProperty(r,S);var P=t[S];var z=C.parts.length;var O=z-1;while(O>0&&typeof C.parts[O]!=="string")O--;var D=C.parts[O];var E=C.parts[O-1]+"."+D;var R=C.parts.slice(0,O).join(".");var I=o.nestedProperty(e.layout,R).get();var N=o.nestedProperty(n,R).get();var F=C.get();if(P===undefined)continue;m[S]=P;x[S]=D==="reverse"?P:q(F);var j=c.getLayoutValObject(n,C.parts);if(j&&j.impliedEdits&&P!==null){for(var B in j.impliedEdits){b(o.relativeAttr(S,B),j.impliedEdits[B])}}if(["width","height"].indexOf(S)!==-1&&P===null){n[S]=e._initialAutoSize[S]}else if(E.match(V)){L(E);o.nestedProperty(n,R+"._inputRange").set(null)}else if(E.match(G)){L(E);o.nestedProperty(n,R+"._inputRange").set(null);var H=o.nestedProperty(n,R).get();if(H._inputDomain){H._input.domain=H._inputDomain.slice()}}else if(E.match(Y)){o.nestedProperty(n,R+"._inputDomain").set(null)}if(D==="type"){var U=I,Z=N.type==="linear"&&P==="log",J=N.type==="log"&&P==="linear";if(Z||J){if(!U||!U.range){b(R+".autorange",true)}else if(!N.autorange){var Q=U.range[0],$=U.range[1];if(Z){if(Q<=0&&$<=0){b(R+".autorange",true)}if(Q<=0)Q=$/1e6;else if($<=0)$=Q/1e6;b(R+".range[0]",Math.log(Q)/Math.LN10);b(R+".range[1]",Math.log($)/Math.LN10)}else{b(R+".range[0]",Math.pow(10,Q));b(R+".range[1]",Math.pow(10,$))}}else if(Z){U.range=U.range[1]>U.range[0]?[1,2]:[2,1]}if(Array.isArray(n._subplots.polar)&&n._subplots.polar.length&&n[C.parts[0]]&&C.parts[1]==="radialaxis"){delete n[C.parts[0]]._subplot.viewInitial["radialaxis.range"]}u.getComponentMethod("annotations","convertCoords")(e,N,P,b);u.getComponentMethod("images","convertCoords")(e,N,P,b)}else{b(R+".autorange",true);b(R+".range",null)}o.nestedProperty(n,R+"._inputRange").set(null)}else if(D.match(A)){var K=o.nestedProperty(n,S).get(),ee=(P||{}).type;if(!ee||ee==="-")ee="linear";u.getComponentMethod("annotations","convertCoords")(e,K,ee,b);u.getComponentMethod("images","convertCoords")(e,K,ee,b)}var te=_.containerArrayMatch(S);if(te){s=te.array;f=te.index;var re=te.property;var ne=o.nestedProperty(r,s);var ae=(ne||[])[f]||{};var ie=ae;var oe=j||{editType:"calc"};var le=oe.editType.indexOf("calcIfAutorange")!==-1;if(f===""){if(le)y.calc=true;else M.update(y,oe);le=false}else if(re===""){ie=P;if(_.isAddVal(P)){x[S]=null}else if(_.isRemoveVal(P)){x[S]=ae;ie=ae}else o.warn("unrecognized full object value",t)}if(le&&(W(e,ie,"x")||W(e,ie,"y"))){y.calc=true}else{M.update(y,oe)}if(!l[s])l[s]={};var se=l[s][f];if(!se)se=l[s][f]={};se[re]=P;delete t[S]}else if(D==="reverse"){if(I.range)I.range.reverse();else{b(R+".autorange",true);I.range=[1,0]}if(N.autorange)y.calc=true;else y.plot=true}else{if(n._has("scatter-like")&&n._has("regl")&&(S==="dragmode"&&(P==="lasso"||P==="select")&&!(F==="lasso"||F==="select"))){y.plot=true}else if(j)M.update(y,j);else y.calc=true;C.set(P)}}for(s in l){var ue=_.applyContainerArrayChanges(e,o.nestedProperty(r,s),l[s],y);if(!ue)y.plot=true}var ce=n._axisConstraintGroups||[];for(T in k){for(f=0;f<ce.length;f++){var fe=ce[f];if(fe[T]){y.calc=true;for(var de in fe){if(!k[de]){p.getFromId(e,de)._constraintShrinkable=true}}}}}if(X(e)||t.height||t.width)y.plot=true;if(y.plot||y.calc){y.layoutReplot=true}return{flags:y,rangesAltered:k,undoit:x,redoit:m,eventData:o.extendDeep({},m)}}function X(e){var t=e._fullLayout;var r=t.width;var n=t.height;if(e.layout.autosize)f.plotAutoSize(e,e.layout,t);return t.width!==r||t.height!==n}function W(e,t,r){if(!o.isPlainObject(t))return false;var n=t[r+"ref"]||r,a=p.getFromId(e,n);if(!a&&n.charAt(0)===r){a=p.getFromId(e,r)}return(a||{}).autorange}r.update=function e(t,n,a,i){t=o.getGraphDiv(t);w.clearPromiseQueue(t);if(t.framework&&t.framework.isPolar){return Promise.resolve(t)}if(!o.isPlainObject(n))n={};if(!o.isPlainObject(a))a={};if(Object.keys(n).length)t.changed=true;if(Object.keys(a).length)t.changed=true;var l=w.coerceTraceIndices(t,i);var u=H(t,o.extendFlat({},n),l);var c=u.flags;var d=Z(t,o.extendFlat({},a));var p=d.flags;if(c.clearCalc||p.calc)t.calcdata=undefined;if(c.clearAxisTypes)w.clearAxisTypes(t,l,a);var v=[];if(c.fullReplot&&p.layoutReplot){var h=t.data,g=t.layout;t.data=undefined;t.layout=undefined;v.push(function(){return r.plot(t,h,g)})}else if(c.fullReplot){v.push(r.plot)}else if(p.layoutReplot){v.push(k.layoutReplot)}else{v.push(f.previousPromises);f.supplyDefaults(t);if(c.style)v.push(k.doTraceStyle);if(c.colorbars)v.push(k.doColorBars);if(p.legend)v.push(k.doLegend);if(p.layoutstyle)v.push(k.layoutStyles);if(p.axrange){U(v,d.rangesAltered)}if(p.ticks)v.push(k.doTicksRelayout);if(p.modebar)v.push(k.doModeBar);if(p.camera)v.push(k.doCamera);v.push(S)}v.push(f.rehover);s.add(t,e,[t,u.undoit,d.undoit,u.traces],e,[t,u.redoit,d.redoit,u.traces]);var y=o.syncOrAsync(v,t);if(!y||!y.then)y=Promise.resolve(t);return y.then(function(){t.emit("plotly_update",{data:u.eventData,layout:d.eventData});return t})};r.react=function(e,t,n,a){var i,l;function s(){return r.addFrames(e,i)}e=o.getGraphDiv(e);var c=e._fullData;var d=e._fullLayout;if(!o.isPlotDiv(e)||!c||!d){l=r.newPlot(e,t,n,a)}else{if(o.isPlainObject(t)){var p=t;t=p.data;n=p.layout;a=p.config;i=p.frames}var v=false;if(a){var h=o.extendDeep({},e._context);e._context=undefined;z(e,a);v=K(h,e._context)}e.data=t||[];w.cleanData(e.data);e.layout=n||{};w.cleanLayout(e.layout);f.supplyDefaults(e,{skipUpdateCalc:true});var g=e._fullData;var y=e._fullLayout;var m=y.datarevision===undefined;var x=J(e,c,g,m);var b=Q(e,d,y,m);if(X(e))b.layoutReplot=true;if(x.calc||b.calc)e.calcdata=undefined;else f.supplyDefaultsUpdateCalc(e.calcdata,g);var _=[];if(i){e._transitionData={};f.createTransitionData(e);_.push(s)}if(x.fullReplot||b.layoutReplot||v){e._fullLayout._skipDefaults=true;_.push(r.plot)}else{for(var M in b.arrays){var A=b.arrays[M];if(A.length){var T=u.getComponentMethod(M,"drawOne");if(T!==o.noop){for(var L=0;L<A.length;L++){T(e,A[L])}}else{var C=u.getComponentMethod(M,"draw");if(C===o.noop){throw new Error("cannot draw components: "+M)}C(e)}}}_.push(f.previousPromises);if(x.style)_.push(k.doTraceStyle);if(x.colorbars)_.push(k.doColorBars);if(b.legend)_.push(k.doLegend);if(b.layoutstyle)_.push(k.layoutStyles);if(b.axrange)U(_);if(b.ticks)_.push(k.doTicksRelayout);if(b.modebar)_.push(k.doModeBar);if(b.camera)_.push(k.doCamera);_.push(S)}_.push(f.rehover);l=o.syncOrAsync(_,e);if(!l||!l.then)l=Promise.resolve(e)}return l.then(function(){e.emit("plotly_react",{data:t,layout:n});return e})};function J(e,t,r,n){if(t.length!==r.length){return{fullReplot:true,calc:true}}var a=M.traceFlags();a.arrays={};var i,o;function l(e){return c.getTraceValObject(o,e)}var s={getValObject:l,flags:a,immutable:n,gd:e};var u={};for(i=0;i<t.length;i++){o=r[i]._fullInput;if(u[o.uid])continue;u[o.uid]=1;s.autoranged=o.xaxis?p.getFromId(e,o.xaxis).autorange||p.getFromId(e,o.yaxis).autorange:false;$(t[i]._fullInput,o,[],s)}if(a.calc||a.plot||a.calcIfAutorange){a.fullReplot=true}return a}function Q(e,t,r,n){var a=M.layoutFlags();a.arrays={};function i(e){return c.getLayoutValObject(r,e)}var o={getValObject:i,flags:a,immutable:n,gd:e};$(t,r,[],o);if(a.plot||a.calc){a.layoutReplot=true}return a}function $(e,t,r,n){var a,i;var l=n.getValObject;var s=n.flags;var u=n.immutable;var c=n.inArray;var f=n.arrayIndex;var d=n.gd;var p=n.autoranged;function v(){var e=a.editType;if(e.indexOf("calcIfAutorange")!==-1&&(p||p===undefined&&(W(d,t,"x")||W(d,t,"y")))){s.calc=true;return}if(c&&e.indexOf("arraydraw")!==-1){o.pushUnique(s.arrays[c],f);return}M.update(s,a)}function h(e){return e.valType==="data_array"||e.arrayOk}for(i in e){if(s.calc)return;var g=e[i];var y=t[i];if(i.charAt(0)==="_"||typeof g==="function"||g===y)continue;if(i==="tick0"||i==="dtick"){var m=t.tickmode;if(m==="auto"||m==="array"||!m)continue}if(i==="range"&&t.autorange)continue;if((i==="zmin"||i==="zmax")&&t.type==="contourcarpet")continue;var x=r.concat(i);a=l(x);if(!a)continue;if(a._compareAsJSON&&JSON.stringify(g)===JSON.stringify(y))continue;var b=a.valType;var _;var w=h(a);var k=Array.isArray(g);var A=Array.isArray(y);if(k&&A){var T="_input_"+i;var L=e[T];var S=t[T];if(Array.isArray(L)&&L===S)continue}if(y===undefined){if(w&&k)s.calc=true;else v()}else if(a._isLinkedToArray){var C=[];var P=false;if(!c)s.arrays[i]=C;var z=Math.min(g.length,y.length);var O=Math.max(g.length,y.length);if(z!==O){if(a.editType==="arraydraw"){P=true}else{v();continue}}for(_=0;_<z;_++){$(g[_],y[_],x.concat(_),o.extendFlat({inArray:i,arrayIndex:_},n))}if(P){for(_=z;_<O;_++){C.push(_)}}}else if(!b&&o.isPlainObject(g)){$(g,y,x,n)}else if(w){if(k&&A){if(u){s.calc=true}}else if(k!==A){s.calc=true}else v()}else if(k&&A){if(g.length!==y.length||String(g)!==String(y)){v()}}else{v()}}for(i in t){if(!(i in e||i.charAt(0)==="_"||typeof t[i]==="function")){a=l(r.concat(i));if(h(a)&&Array.isArray(t[i])){s.calc=true;return}else v()}}}function K(e,t){var r;for(r in e){var n=e[r];var a=t[r];if(n!==a){if(o.isPlainObject(n)&&o.isPlainObject(a)){if(K(n,a)){return true}}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length){return true}for(var i=0;i<n.length;i++){if(n[i]!==a[i]){if(o.isPlainObject(n[i])&&o.isPlainObject(a[i])){if(K(n[i],a[i])){return true}}else{return true}}}}else{return true}}}}r.animate=function(e,t,r){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before animating it. For more details, see "+"https://plot.ly/javascript/animations/")}var n=e._transitionData;if(!n._frameQueue){n._frameQueue=[]}r=f.supplyAnimationDefaults(r);var a=r.transition;var i=r.frame;if(n._frameWaitingCnt===undefined){n._frameWaitingCnt=0}function l(e){if(Array.isArray(a)){if(e>=a.length){return a[0]}else{return a[e]}}else{return a}}function s(e){if(Array.isArray(i)){if(e>=i.length){return i[0]}else{return i[e]}}else{return i}}function u(e,t){var r=0;return function(){if(e&&++r===t){return e()}}}return new Promise(function(i,c){function d(){if(n._frameQueue.length===0){return}while(n._frameQueue.length){var t=n._frameQueue.pop();if(t.onInterrupt){t.onInterrupt()}}e.emit("plotly_animationinterrupted",[])}function p(t){if(t.length===0)return;for(var a=0;a<t.length;a++){var o;if(t[a].type==="byname"){o=f.computeFrame(e,t[a].name)}else{o=t[a].data}var d=s(a);var p=l(a);p.duration=Math.min(p.duration,d.duration);var v={frame:o,name:t[a].name,frameOpts:d,transitionOpts:p};if(a===t.length-1){v.onComplete=u(i,2);v.onInterrupt=c}n._frameQueue.push(v)}if(r.mode==="immediate"){n._lastFrameAt=-Infinity}if(!n._animationRaf){g()}}function v(){e.emit("plotly_animated");window.cancelAnimationFrame(n._animationRaf);n._animationRaf=null}function h(){if(n._currentFrame&&n._currentFrame.onComplete){n._currentFrame.onComplete()}var t=n._currentFrame=n._frameQueue.shift();if(t){var r=t.name?t.name.toString():null;e._fullLayout._currentFrame=r;n._lastFrameAt=Date.now();n._timeToNext=t.frameOpts.duration;f.transition(e,t.frame.data,t.frame.layout,w.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){if(t.onComplete){t.onComplete()}});e.emit("plotly_animatingframe",{name:r,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else{v()}}function g(){e.emit("plotly_animating");n._lastFrameAt=-Infinity;n._timeToNext=0;n._runningTransitions=0;n._currentFrame=null;var t=function(){n._animationRaf=window.requestAnimationFrame(t);if(Date.now()-n._lastFrameAt>n._timeToNext){h()}};t()}var y=0;function m(e){if(Array.isArray(a)){if(y>=a.length){e.transitionOpts=a[y]}else{e.transitionOpts=a[0]}}else{e.transitionOpts=a}y++;return e}var x,b;var _=[];var k=t===undefined||t===null;var M=Array.isArray(t);var A=!k&&!M&&o.isPlainObject(t);if(A){_.push({type:"object",data:m(o.extendFlat({},t))})}else if(k||["string","number"].indexOf(typeof t)!==-1){for(x=0;x<n._frames.length;x++){b=n._frames[x];if(!b)continue;if(k||String(b.group)===String(t)){_.push({type:"byname",name:String(b.name),data:m({name:b.name})})}}}else if(M){for(x=0;x<t.length;x++){var T=t[x];if(["number","string"].indexOf(typeof T)!==-1){T=String(T);_.push({type:"byname",name:T,data:m({name:T})})}else if(o.isPlainObject(T)){_.push({type:"object",data:m(o.extendFlat({},T))})}}}for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&!n._frameHash[b.data.name]){o.warn('animate failure: frame not found: "'+b.data.name+'"');c();return}}if(["next","immediate"].indexOf(r.mode)!==-1){d()}if(r.direction==="reverse"){_.reverse()}var L=e._fullLayout._currentFrame;if(L&&r.fromcurrent){var S=-1;for(x=0;x<_.length;x++){b=_[x];if(b.type==="byname"&&b.name===L){S=x;break}}if(S>0&&S<_.length-1){var C=[];for(x=0;x<_.length;x++){b=_[x];if(_[x].type!=="byname"||x>S){C.push(b)}}_=C}}if(_.length>0){p(_)}else{e.emit("plotly_animated");i()}})};r.addFrames=function(e,t,r){e=o.getGraphDiv(e);if(t===null||t===undefined){return Promise.resolve()}if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed "+"to create a plot before adding frames. For more details, see "+"https://plot.ly/javascript/animations/")}var n,a,i,l;var u=e._transitionData._frames;var c=e._transitionData._frameHash;if(!Array.isArray(t)){throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t)}var d=u.length+t.length*2;var p=[];var v={};for(n=t.length-1;n>=0;n--){if(!o.isPlainObject(t[n]))continue;var h=t[n].name;var g=(c[h]||v[h]||{}).name;var y=t[n].name;var m=c[g]||v[g];if(g&&y&&typeof y==="number"&&m&&T<L){T++;o.warn('addFrames: overwriting frame "'+(c[g]||v[g]).name+'" with a frame whose name of type "number" also equates to "'+g+'". This is valid but may potentially lead to unexpected '+"behavior since all plotly.js frame names are stored internally "+"as strings.");if(T===L){o.warn("addFrames: This API call has yielded too many of these warnings. "+"For the rest of this call, further warnings about numeric frame "+"names will be suppressed.")}}v[h]={name:h};p.push({frame:f.supplyFrameDefaults(t[n]),index:r&&r[n]!==undefined&&r[n]!==null?r[n]:d+n})}p.sort(function(e,t){if(e.index>t.index)return-1;if(e.index<t.index)return 1;return 0});var x=[];var b=[];var _=u.length;for(n=p.length-1;n>=0;n--){a=p[n].frame;if(typeof a.name==="number"){o.warn("Warning: addFrames accepts frames with numeric names, but the numbers are"+"implicitly cast to strings")}if(!a.name){while(c[a.name="frame "+e._transitionData._counter++]);}if(c[a.name]){for(i=0;i<u.length;i++){if((u[i]||{}).name===a.name)break}x.push({type:"replace",index:i,value:a});b.unshift({type:"replace",index:i,value:u[i]})}else{l=Math.max(0,Math.min(p[n].index,_));x.push({type:"insert",index:l,value:a});b.unshift({type:"delete",index:l});_++}}var w=f.modifyFrames,k=f.modifyFrames,M=[e,b],A=[e,x];if(s)s.add(e,w,M,k,A);return f.modifyFrames(e,x)};r.deleteFrames=function(e,t){e=o.getGraphDiv(e);if(!o.isPlotDiv(e)){throw new Error("This element is not a Plotly plot: "+e)}var r,n;var a=e._transitionData._frames;var i=[];var l=[];if(!t){t=[];for(r=0;r<a.length;r++){t.push(r)}}t=t.slice(0);t.sort();for(r=t.length-1;r>=0;r--){n=t[r];i.push({type:"delete",index:n});l.unshift({type:"insert",index:n,value:a[n]})}var u=f.modifyFrames,c=f.modifyFrames,d=[e,l],p=[e,i];if(s)s.add(e,u,d,c,p);return f.modifyFrames(e,i)};r.purge=function e(t){t=o.getGraphDiv(t);var r=t._fullLayout||{};var n=t._fullData||[];var a=t.calcdata||[];f.cleanPlot([],{},n,r,a);f.purge(t);l.purge(t);if(r._container)r._container.remove();delete t._context;return t};function ee(e){var t=n.select(e);var r=e._fullLayout;r._container=t.selectAll(".plot-container").data([0]);r._container.enter().insert("div",":first-child").classed("plot-container",true).classed("plotly",true);r._paperdiv=r._container.selectAll(".svg-container").data([0]);r._paperdiv.enter().append("div").classed("svg-container",true).style("position","relative");r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]);r._glcontainer.enter().append("div").classed("gl-container",true);r._glcanvas=null;r._paperdiv.selectAll(".main-svg").remove();r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",true);r._toppaper=r._paperdiv.append("svg").classed("main-svg",true);if(!r._uid){var a={};n.selectAll("defs").each(function(){if(this.id)a[this.id.split("-")[1]]=1});r._uid=o.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(m.svgAttrs);r._defs=r._paper.append("defs").attr("id","defs-"+r._uid);r._clips=r._defs.append("g").classed("clips",true);r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid);r._topclips=r._topdefs.append("g").classed("clips",true);r._bgLayer=r._paper.append("g").classed("bglayer",true);r._draggers=r._paper.append("g").classed("draglayer",true);var i=r._paper.append("g").classed("layer-below",true);r._imageLowerLayer=i.append("g").classed("imagelayer",true);r._shapeLowerLayer=i.append("g").classed("shapelayer",true);r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",true);r._polarlayer=r._paper.append("g").classed("polarlayer",true);r._ternarylayer=r._paper.append("g").classed("ternarylayer",true);r._geolayer=r._paper.append("g").classed("geolayer",true);r._pielayer=r._paper.append("g").classed("pielayer",true);r._glimages=r._paper.append("g").classed("glimages",true);var l=r._toppaper.append("g").classed("layer-above",true);r._imageUpperLayer=l.append("g").classed("imagelayer",true);r._shapeUpperLayer=l.append("g").classed("shapelayer",true);r._infolayer=r._toppaper.append("g").classed("infolayer",true);r._menulayer=r._toppaper.append("g").classed("menulayer",true);r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",true);r._hoverlayer=r._toppaper.append("g").classed("hoverlayer",true);e.emit("plotly_framework")}},{"../components/color":44,"../components/colorbar/connect":46,"../components/drawing":69,"../constants/xmlns_namespaces":146,"../lib":164,"../lib/events":155,"../lib/queue":178,"../lib/svg_text_utils":185,"../plots/cartesian/axes":209,"../plots/cartesian/constants":214,"../plots/cartesian/graph_interact":218,"../plots/plots":249,"../plots/polar/legacy":252,"../registry":258,"./edit_types":192,"./helpers":193,"./manage_arrays":195,"./plot_config":197,"./plot_schema":198,"./subroutines":200,d3:8,"fast-isnumeric":11,"has-hover":13}],197:[function(e,t,r){"use strict";t.exports={staticPlot:false,plotlyServerURL:"https://plot.ly",editable:false,edits:{annotationPosition:false,annotationTail:false,annotationText:false,axisTitleText:false,colorbarPosition:false,colorbarTitleText:false,legendPosition:false,legendText:false,shapePosition:false,titleText:false},autosizable:false,queueLength:0,fillFrame:false,frameMargins:0,scrollZoom:false,doubleClick:"reset+autosize",showTips:true,showAxisDragHandles:true,showAxisRangeEntryBoxes:true,showLink:false,sendData:true,linkText:"Edit chart",showSources:false,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:false,toImageButtonOptions:{},displaylogo:true,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}}},{}],198:[function(e,t,r){"use strict";var n=e("../registry");var a=e("../lib");var i=e("../plots/attributes");var o=e("../plots/layout_attributes");var l=e("../plots/frame_attributes");var s=e("../plots/animation_attributes");var u=e("../plots/polar/legacy/area_attributes");var c=e("../plots/polar/legacy/axis_attributes");var f=e("./edit_types");var d=a.extendFlat;var p=a.extendDeepAll;var v=a.isPlainObject;var h="_isSubplotObj";var g="_isLinkedToArray";var y="_arrayAttrRegexps";var m="_deprecated";var x=[h,g,y,m];r.IS_SUBPLOT_OBJ=h;r.IS_LINKED_TO_ARRAY=g;r.DEPRECATED=m;r.UNDERSCORE_ATTRS=x;r.get=function(){var e={};n.allTypes.concat("area").forEach(function(t){e[t]=k(t)});var t={};Object.keys(n.transformsRegistry).forEach(function(e){t[e]=A(e)});return{defs:{valObjects:a.valObjectMeta,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:f.traces,layout:f.layout},impliedEdits:{}},traces:e,layout:M(),transforms:t,frames:T(),animation:L(s)}};r.crawl=function(e,t,n,a){var i=n||0;a=a||"";Object.keys(e).forEach(function(n){var o=e[n];if(x.indexOf(n)!==-1)return;var l=(a?a+".":"")+n;t(o,n,e,i,l);if(r.isValObject(o))return;if(v(o)&&n!=="impliedEdits"){r.crawl(o,t,i+1,l)}})};r.isValObject=function(e){return e&&e.valType!==undefined};r.findArrayAttributes=function(e){var t=[];var n=[];var o=[];var l,s;function u(e,t,r,a){n=n.slice(0,a).concat([t]);o=o.slice(0,a).concat([e&&e._isLinkedToArray]);var i=e&&(e.valType==="data_array"||e.arrayOk===true)&&!(n[a-1]==="colorbar"&&(t==="ticktext"||t==="tickvals"));if(!i)return;c(l,0,"")}function c(e,r,i){var l=e[n[r]];var u=i+n[r];if(r===n.length-1){if(a.isArrayOrTypedArray(l)){t.push(s+u)}}else{if(o[r]){if(Array.isArray(l)){for(var f=0;f<l.length;f++){if(a.isPlainObject(l[f])){c(l[f],r+1,u+"["+f+"].")}}}}else if(a.isPlainObject(l)){c(l,r+1,u+".")}}}l=e;s="";r.crawl(i,u);if(e._module&&e._module.attributes){r.crawl(e._module.attributes,u)}var f=e.transforms;if(f){for(var d=0;d<f.length;d++){var p=f[d];var v=p._module;if(v){s="transforms["+d+"].";l=p;r.crawl(v.attributes,u)}}}return t};r.getTraceValObject=function(e,t){var r=t[0];var a=1;var o,l;if(r==="transforms"){if(t.length===1){return i.transforms}var s=e.transforms;if(!Array.isArray(s)||!s.length)return false;var c=t[1];if(!w(c)||c>=s.length){return false}o=(n.transformsRegistry[s[c].type]||{}).attributes;l=o&&o[t[2]];a=3}else if(e.type==="area"){l=u[r]}else{var f=e._module;if(!f)f=(n.modules[e.type||i.type.dflt]||{})._module;if(!f)return false;o=f.attributes;l=o&&o[r];if(!l){var d=f.basePlotModule;if(d&&d.attributes){l=d.attributes[r]}}if(!l)l=i[r]}return _(l,t,a)};r.getLayoutValObject=function(e,t){var r=b(e,t[0]);return _(r,t,1)};function b(e,t){var r,a,i,l;var s=e._basePlotModules;if(s){var u;for(r=0;r<s.length;r++){i=s[r];if(i.attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;if(!u&&i.layoutAttributes)u=i.layoutAttributes}var f=i.baseLayoutAttrOverrides;if(f&&t in f)return f[t]}if(u)return u}var d=e._modules;if(d){for(r=0;r<d.length;r++){l=d[r].layoutAttributes;if(l&&t in l){return l[t]}}}for(a in n.componentsRegistry){i=n.componentsRegistry[a];if(!i.schema&&t===i.name){return i.layoutAttributes}}if(t in o)return o[t];if(t==="radialaxis"||t==="angularaxis"){return c[t]}return c.layout[t]||false}function _(e,t,r){if(!e)return false;if(e._isLinkedToArray){if(w(t[r]))r++;else if(r<t.length)return false}for(;r<t.length;r++){var n=e[t[r]];if(v(n))e=n;else break;if(r===t.length-1)break;if(e._isLinkedToArray){r++;if(!w(t[r]))return false}else if(e.valType==="info_array"){r++;var a=t[r];if(!w(a))return false;var i=e.items;if(Array.isArray(i)){if(a>=i.length)return false;if(e.dimensions===2){r++;if(t.length===r)return e;var o=t[r];if(!w(o))return false;e=i[a][o]}else e=i[a]}else{e=i}}}return e}function w(e){return e===Math.round(e)&&e>=0}function k(e){var t,r;if(e==="area"){t={attributes:u};r={}}else{t=n.modules[e]._module,r=t.basePlotModule}var a={};a.type=null;p(a,i);p(a,t.attributes);if(r.attributes){p(a,r.attributes)}a.type=e;var o={meta:t.meta||{},attributes:L(a)};if(t.layoutAttributes){var l={};p(l,t.layoutAttributes);o.layoutAttributes=L(l)}return o}function M(){var e={};var t,r;p(e,o);for(t in n.subplotsRegistry){r=n.subplotsRegistry[t];if(!r.layoutAttributes)continue;if(Array.isArray(r.attr)){for(var a=0;a<r.attr.length;a++){O(e,r,r.attr[a])}}else{var i=r.attr==="subplot"?r.name:r.attr;O(e,r,i)}}e=z(e);for(t in n.componentsRegistry){r=n.componentsRegistry[t];var l=r.schema;if(l&&(l.subplots||l.layout)){var s=l.subplots;if(s&&s.xaxis&&!s.yaxis){for(var u in s.xaxis)delete e.yaxis[u]}}else if(r.layoutAttributes){D(e,r.layoutAttributes,r.name)}}return{layoutAttributes:L(e)}}function A(e){var t=n.transformsRegistry[e];var r=p({},t.attributes);Object.keys(n.componentsRegistry).forEach(function(t){var a=n.componentsRegistry[t];if(a.schema&&a.schema.transforms&&a.schema.transforms[e]){Object.keys(a.schema.transforms[e]).forEach(function(t){D(r,a.schema.transforms[e][t],t)})}});return{attributes:L(r)}}function T(){var e={frames:a.extendDeepAll({},l)};L(e);return e.frames}function L(e){S(e);C(e);P(e);return e}function S(e){function t(e){return{valType:"string",editType:"none"}}function n(e,n,a){if(r.isValObject(e)){if(e.valType==="data_array"){e.role="data";a[n+"src"]=t(n)}else if(e.arrayOk===true){a[n+"src"]=t(n)}}else if(v(e)){e.role="object"}}r.crawl(e,n)}function C(e){function t(e,t,r){if(!e)return;var n=e[g];if(!n)return;delete e[g];r[t]={items:{}};r[t].items[n]=e;r[t].role="object"}r.crawl(e,t)}function P(e){function t(e){for(var r in e){if(v(e[r])){t(e[r])}else if(Array.isArray(e[r])){for(var n=0;n<e[r].length;n++){t(e[r][n])}}else{if(e[r]instanceof RegExp){e[r]=e[r].toString()}}}}t(e)}function z(e){d(e,{radialaxis:c.radialaxis,angularaxis:c.angularaxis});d(e,c.layout);return e}function O(e,t,r){var n=a.nestedProperty(e,r),i=p({},t.layoutAttributes);i[h]=true;n.set(i)}function D(e,t,r){var n=a.nestedProperty(e,r);n.set(p(n.get()||{},t))}},{"../lib":164,"../plots/animation_attributes":204,"../plots/attributes":206,"../plots/frame_attributes":236,"../plots/layout_attributes":247,"../plots/polar/legacy/area_attributes":250,"../plots/polar/legacy/axis_attributes":251,"../registry":258,"./edit_types":192}],199:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plots/attributes");var i="templateitemname";var o={name:{valType:"string",editType:"none"}};o[i]={valType:"string",editType:"calc"};r.templatedArray=function(e,t){t._isLinkedToArray=e;t.name=o.name;t[i]=o[i];return t};r.traceTemplater=function(e){var t={};var r,i;for(r in e){i=e[r];if(Array.isArray(i)&&i.length){t[r]=0}}function o(o){r=n.coerce(o,{},a,"type");var l={type:r,_template:null};if(r in t){i=e[r];var s=t[r]%i.length;t[r]++;l._template=i[s]}else{}return l}return{newTrace:o}};r.newContainer=function(e,t,r){var a=e._template;var i=a&&(a[t]||r&&a[r]);if(!n.isPlainObject(i))i=null;var o=e[t]={_template:i};return o};r.arrayTemplater=function(e,t,r){var n=e._template;var a=n&&n[s(t)];var o=n&&n[t];if(!Array.isArray(o)||!o.length){o=[]}var u={};function c(e){var t={name:e.name,_input:e};var n=t[i]=e[i];if(!l(n)){t._template=a;return t}for(var s=0;s<o.length;s++){var c=o[s];if(c.name===n){u[n]=1;t._template=c;return t}}t[r]=e[r]||false;t._template=false;return t}function f(){var e=[];for(var t=0;t<o.length;t++){var r=o[t];var n=r.name;if(l(n)&&!u[n]){var a={_template:r,name:n,_input:{_templateitemname:n}};a[i]=r[i];e.push(a);u[n]=1}}return e}return{newItem:c,defaultItems:f}};function l(e){return e&&typeof e==="string"}function s(e){var t=e.length-1;if(e.charAt(t)!=="s"){n.warn("bad argument to arrayDefaultKey: "+e)}return e.substr(0,e.length-1)+"defaults"}r.arrayDefaultKey=s;r.arrayEditor=function(e,t,r){var a=(n.nestedProperty(e,t).get()||[]).length;var o=r._index;var l=o>=a&&(r._input||{})._templateitemname;if(l)o=a;var s=t+"["+o+"]";var u;function c(){u={};if(l){u[s]={};u[s][i]=l}}c();function f(e,t){u[e]=t}function d(e,t){if(l){n.nestedProperty(u[s],e).set(t)}else{u[s+"."+e]=t}}function p(){var e=u;c();return e}function v(t,r){if(t)d(t,r);var a=p();for(var i in a){n.nestedProperty(e,i).set(a[i])}}return{modifyBase:f,modifyItem:d,getUpdateObj:p,applyUpdate:v}}},{"../lib":164,"../plots/attributes":206}],200:[function(e,t,r){"use strict";var n=e("d3");var a=e("../registry");var i=e("../plots/plots");var o=e("../lib");var l=e("../lib/clear_gl_canvases");var s=e("../components/color");var u=e("../components/drawing");var c=e("../components/titles");var f=e("../components/modebar");var d=e("../plots/cartesian/axes");var p=e("../constants/alignment");var v=e("../plots/cartesian/constraints");var h=v.enforce;var g=v.clean;var y=e("../plots/cartesian/autorange").doAutoRange;r.layoutStyles=function(e){return o.syncOrAsync([i.doAutoMargin,x],e)};function m(e,t,r){for(var n=0;n<r.length;n++){var a=r[n][0],i=r[n][1];if(a[0]>=e[1]||a[1]<=e[0]){continue}if(i[0]<t[1]&&i[1]>t[0]){return true}}return false}function x(e){var t=e._fullLayout;var a=t._size;var i=a.p;var l=d.list(e,"",true);var c=t._has("cartesian");var v;function h(e,t,r){var n=e._lw/2;if(e._id.charAt(0)==="x"){if(!t)return a.t+a.h*(1-(e.position||0))+n%1;else if(r==="top")return t._offset-i-n;return t._offset+t._length+i+n}if(!t)return a.l+a.w*(e.position||0)+n%1;else if(r==="right")return t._offset+t._length+i+n;return t._offset-i-n}for(v=0;v<l.length;v++){var g=l[v];g.setScale();var y=g._anchorAxis;g._linepositions={};g._lw=u.crispRound(e,g.linewidth,1);g._mainLinePosition=h(g,y,g.side);g._mainMirrorPosition=g.mirror&&y?h(g,y,p.OPPOSITE_SIDE[g.side]):null;g._mainSubplot=b(g,t)}t._paperdiv.style({width:t.width+"px",height:t.height+"px"}).selectAll(".main-svg").call(u.setSize,t.width,t.height);e._context.setBackground(e,t.paper_bgcolor);var x=t._paper.selectAll("g.subplot");var w=[];var M=[];x.each(function(e){var r=t._plots[e];if(r.mainplot){if(r.bg){r.bg.remove()}r.bg=undefined;return}var n=r.xaxis.domain;var a=r.yaxis.domain;var i=r.plotgroup;if(m(n,a,M)){var l=i.node();var s=r.bg=o.ensureSingle(i,"rect","bg");l.insertBefore(s.node(),l.childNodes[0])}else{i.select("rect.bg").remove();w.push(e);M.push([n,a])}});var A=t._bgLayer.selectAll(".bg").data(w);A.enter().append("rect").classed("bg",true);A.exit().remove();A.each(function(e){t._plots[e].bg=n.select(this)});x.each(function(e){var r=t._plots[e];var n=r.xaxis;var a=r.yaxis;if(r.bg&&c){r.bg.call(u.setRect,n._offset-i,a._offset-i,n._length+2*i,a._length+2*i).call(s.fill,t.plot_bgcolor).style("stroke-width",0)}var f=r.clipId="clip"+t._uid+e+"plot";var d=o.ensureSingleById(t._clips,"clipPath",f,function(e){e.classed("plotclip",true).append("rect")});r.clipRect=d.select("rect").attr({width:n._length,height:a._length});u.setTranslate(r.plot,n._offset,a._offset);var p;var v;if(r._hasClipOnAxisFalse){p=null;v=f}else{p=f;v=null}u.setClipUrl(r.plot,p);r.layerClipId=v;if(!c)return;var g,y,m,x,b,w;var M,A,T,L,S,C;var P;function z(e){return"M"+g+","+e+"H"+y}function O(e){return"M"+n._offset+","+e+"h"+n._length}function D(e){return"M"+e+","+A+"V"+M}function E(e){return"M"+e+","+a._offset+"v"+a._length}function R(t,r,n){if(!t.showline||e!==t._mainSubplot)return"";if(!t._anchorAxis)return n(t._mainLinePosition);var a=r(t._mainLinePosition);if(t.mirror)a+=r(t._mainMirrorPosition);return a}var I="M0,0";if(_(n,e)){b=k(n,"left",a,l);g=n._offset-(b?i+b:0);w=k(n,"right",a,l);y=n._offset+n._length+(w?i+w:0);m=h(n,a,"bottom");x=h(n,a,"top");P=!n._anchorAxis||e!==n._mainSubplot;if(P&&n.ticks&&n.mirror==="allticks"){n._linepositions[e]=[m,x]}I=R(n,z,O);if(P&&n.showline&&(n.mirror==="all"||n.mirror==="allticks")){I+=z(m)+z(x)}r.xlines.style("stroke-width",n._lw+"px").call(s.stroke,n.showline?n.linecolor:"rgba(0,0,0,0)")}r.xlines.attr("d",I);var N="M0,0";if(_(a,e)){S=k(a,"bottom",n,l);M=a._offset+a._length+(S?i:0);C=k(a,"top",n,l);A=a._offset-(C?i:0);T=h(a,n,"left");L=h(a,n,"right");P=!a._anchorAxis||e!==n._mainSubplot;if(P&&a.ticks&&a.mirror==="allticks"){a._linepositions[e]=[T,L]}N=R(a,D,E);if(P&&a.showline&&(a.mirror==="all"||a.mirror==="allticks")){N+=D(T)+D(L)}r.ylines.style("stroke-width",a._lw+"px").call(s.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")}r.ylines.attr("d",N)});d.makeClipPaths(e);r.drawMainTitle(e);f.manage(e);return e._promises.length&&Promise.all(e._promises)}function b(e,t){var r=t._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a={_fullLayout:t};var i=e._id.charAt(0)==="x";var o=e._mainAxis._anchorAxis;var l="";var s="";var u="";if(o){u=o._mainAxis._id;l=i?e._id+u:u+e._id}if(!l||!t._plots[l]){l="";for(var c=0;c<n.length;c++){var f=n[c];var p=f.indexOf("y");var v=i?f.substr(0,p):f.substr(p);var h=i?f.substr(p):f.substr(0,p);if(v===e._id){if(!s)s=f;var g=d.getFromId(a,h);if(u&&g.overlaying===u){l=f;break}}}}return l||s}function _(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function w(e,t,r){if(!r.showline||!r._lw)return false;if(r.mirror==="all"||r.mirror==="allticks")return true;var n=r._anchorAxis;if(!n)return false;var a=p.FROM_BL[t];if(r.side===t){return n.domain[a]===e.domain[a]}return r.mirror&&n.domain[1-a]===e.domain[1-a]}function k(e,t,r,n){if(w(e,t,r)){return r._lw}for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&w(e,t,i)){return i._lw}}return 0}r.drawMainTitle=function(e){var t=e._fullLayout;c.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})};r.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t],n=((r[0]||{}).trace||{})._module||{},o=n.arraysToCalcdata;if(o)o(r,r[0].trace)}i.style(e);a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var r=e.calcdata[t][0];if((r.t||{}).cb){var n=r.trace,o=r.t.cb;if(a.traceIs(n,"contour")){o.line({width:n.contours.showlines!==false?n.line.width:0,dash:n.line.dash,color:n.contours.coloring==="line"?o._opts.line.color:n.line.color})}var l=n._module.colorbar;var s=l.container;var u=(s?n[s]:n).colorbar;o.options(u)()}}return i.previousPromises(e)};r.layoutReplot=function(e){var t=e.layout;e.layout=undefined;return a.call("plot",e,"",t)};r.doLegend=function(e){a.getComponentMethod("legend","draw")(e);return i.previousPromises(e)};r.doTicksRelayout=function(e,t){if(t){d.doTicks(e,Object.keys(t),true)}else{d.doTicks(e,"redraw")}if(e._fullLayout._hasOnlyLargeSploms){l(e);a.subplotsRegistry.splom.plot(e)}r.drawMainTitle(e);return i.previousPromises(e)};r.doModeBar=function(e){var t=e._fullLayout;f.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var n=t._basePlotModules[r].updateFx;if(n)n(t)}return i.previousPromises(e)};r.doCamera=function(e){var t=e._fullLayout;var r=t._subplots.gl3d;for(var n=0;n<r.length;n++){var a=t[r[n]];var i=a._scene;i.setCamera(a.camera)}};r.drawData=function(e){var t=e._fullLayout;var r=e.calcdata;var n;for(n=0;n<r.length;n++){var o=r[n][0].trace;if(o.visible!==true||!o._module.colorbar){t._infolayer.select(".cb"+o.uid).remove()}}l(e);var s=t._basePlotModules;for(n=0;n<s.length;n++){s[n].plot(e)}i.style(e);a.getComponentMethod("shapes","draw")(e);a.getComponentMethod("annotations","draw")(e);t._replotting=false;return i.previousPromises(e)};r.doAutoRangeAndConstraints=function(e){var t=d.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];g(e,n);y(n)}h(e)};r.finalDraw=function(e){a.getComponentMethod("shapes","draw")(e);a.getComponentMethod("images","draw")(e);a.getComponentMethod("annotations","draw")(e);a.getComponentMethod("rangeslider","draw")(e);a.getComponentMethod("rangeselector","draw")(e)};r.drawMarginPushers=function(e){a.getComponentMethod("legend","draw")(e);a.getComponentMethod("rangeselector","draw")(e);a.getComponentMethod("sliders","draw")(e);a.getComponentMethod("updatemenus","draw")(e)}},{"../components/color":44,"../components/drawing":69,"../components/modebar":107,"../components/titles":135,"../constants/alignment":142,"../lib":164,"../lib/clear_gl_canvases":151,"../plots/cartesian/autorange":208,"../plots/cartesian/axes":209,"../plots/cartesian/constraints":216,"../plots/plots":249,"../registry":258,d3:8}],201:[function(e,t,r){"use strict";var n=e("../lib");var a=n.isPlainObject;var i=e("./plot_schema");var o=e("../plots/plots");var l=e("../plots/attributes");var s=e("./plot_template");var u=e("./plot_config");r.makeTemplate=function(e){e=n.extendDeep({_context:u},e);o.supplyDefaults(e);var t=e.data||[];var r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules;r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(e){var t={};d(e,t,v.bind(null,e));var r=n.coerce(e,{},l,"type");var a=i.data[r];if(!a)a=i.data[r]=[];a.push(t)});d(r,i.layout,p.bind(null,r));delete i.layout.template;var s=r.template;if(a(s)){var f=s.layout;var h,g,y,m,x,b;if(a(f)){c(f,i.layout)}var _=s.data;if(a(_)){for(g in i.data){y=_[g];if(Array.isArray(y)){x=i.data[g];b=x.length;m=y.length;for(h=0;h<b;h++){c(y[h%m],x[h])}for(h=b;h<m;h++){x.push(n.extendDeep({},y[h]))}}}for(g in _){if(!(g in i.data)){i.data[g]=n.extendDeep([],_[g])}}}}return i};function c(e,t){e=n.extendDeep({},e);var r=Object.keys(e).sort();var i,o;function l(t,r,n){if(a(r)&&a(t)){c(t,r)}else if(Array.isArray(r)&&Array.isArray(t)){var i=s.arrayTemplater({_template:e},n);for(o=0;o<r.length;o++){var l=r[o];var u=i.newItem(l)._template;if(u)c(u,l)}var f=i.defaultItems();for(o=0;o<f.length;o++)r.push(f[o]._template);for(o=0;o<r.length;o++)delete r[o].templateitemname}}for(i=0;i<r.length;i++){var u=r[i];var d=e[u];if(u in t){l(d,t[u],u)}else t[u]=d;if(f(u)===u){for(var p in t){var v=f(p);if(p!==v&&v===u&&!(p in e)){l(d,t[p],u)}}}}}function f(e){return e.replace(/[0-9]+$/,"")}function d(e,t,r,i,o){var l=o&&r(o);for(var u in e){var c=e[u];var p=h(e,u,i);var v=h(e,u,o);var g=r(v);if(!g){var y=f(u);if(y!==u){v=h(e,y,o);g=r(v)}}if(l&&l===g)continue;if(!g||g._noTemplating||g.valType==="data_array"||g.arrayOk&&Array.isArray(c)){continue}if(!g.valType&&a(c)){d(c,t,r,p,v)}else if(g._isLinkedToArray&&Array.isArray(c)){var m=false;var x=0;var b={};for(var _=0;_<c.length;_++){var w=c[_];if(a(w)){var k=w.name;if(k){if(!b[k]){d(w,t,r,h(c,x,p),h(c,x,v));x++;b[k]=1}}else if(!m){var M=s.arrayDefaultKey(u);var A=h(e,M,i);var T=h(c,x,p);d(w,t,r,T,h(c,x,v));var L=n.nestedProperty(t,T);var S=n.nestedProperty(t,A);S.set(L.get());L.set(null);m=true}}}}else{var C=n.nestedProperty(t,p);C.set(c)}}}function p(e,t){return i.getLayoutValObject(e,n.nestedProperty({},t).parts)}function v(e,t){return i.getTraceValObject(e,n.nestedProperty({},t).parts)}function h(e,t,r){var n;if(!r)n=t;else if(Array.isArray(e))n=r+"["+t+"]";else n=r+"."+t;return n}r.validateTemplate=function(e,t){var r=n.extendDeep({},{_context:u,data:e.data,layout:e.layout});var i=r.layout||{};if(!a(t))t=i.template||{};var l=t.layout;var s=t.data;var c=[];r.layout=i;r.layout.template=t;o.supplyDefaults(r);var d=r._fullLayout;var p=r._fullData;var v={};function m(e,t){for(var r in e){if(r.charAt(0)!=="_"&&a(e[r])){var n=f(r);var i=[];var o;for(o=0;o<t.length;o++){i.push(h(e,r,t[o]));if(n!==r)i.push(h(e,n,t[o]))}for(o=0;o<i.length;o++){v[i[o]]=1}m(e[r],i)}}}function x(e,t){for(var r in e){if(r.indexOf("defaults")===-1&&a(e[r])){var n=h(e,r,t);if(v[n]){x(e[r],n)}else{c.push({code:"unused",path:n})}}}}if(!a(l)){c.push({code:"layout"})}else{m(d,["layout"]);x(l,"layout")}if(!a(s)){c.push({code:"data"})}else{var b={};var _;for(var w=0;w<p.length;w++){var k=p[w];_=k.type;b[_]=(b[_]||0)+1;if(!k._fullInput._template){c.push({code:"missing",index:k._fullInput.index,traceType:_})}}for(_ in s){var M=s[_].length;var A=b[_]||0;if(M>A){c.push({code:"unused",traceType:_,templateCount:M,dataCount:A})}else if(A>M){c.push({code:"reused",traceType:_,templateCount:M,dataCount:A})}}}function T(e,t){for(var r in e){if(r.charAt(0)==="_")continue;var n=e[r];var i=h(e,r,t);if(a(n)){if(Array.isArray(e)&&n._template===false&&n.templateitemname){c.push({code:"missing",path:i,templateitemname:n.templateitemname})}T(n,i)}else if(Array.isArray(n)&&g(n)){T(n,i)}}}T({data:p,layout:d},"");if(c.length)return c.map(y)};function g(e){for(var t=0;t<e.length;t++){if(a(e[t]))return true}}function y(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":if(e.path){t="There are no templates for item "+e.path+" with name "+e.templateitemname}else{t="There are no templates for trace "+e.index+", of type "+e.traceType+"."}break;case"unused":if(e.path){t="The template item at "+e.path+" was not used in constructing the plot."}else if(e.dataCount){t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type."}else{t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data."}break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}e.msg=t;return e}},{"../lib":164,"../plots/attributes":206,"../plots/plots":249,"./plot_config":197,"./plot_schema":198,"./plot_template":199}],202:[function(e,t,r){"use strict";var n=e("./plot_api");var a=e("../lib");var i=e("../snapshot/helpers");var o=e("../snapshot/tosvg");var l=e("../snapshot/svgtoimg");var s={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:false},imageDataOnly:{valType:"boolean",dflt:false}};var u=/^data:image\/\w+;base64,/;function c(e,t){t=t||{};var r;var c;var f;if(a.isPlainObject(e)){r=e.data||[];c=e.layout||{};f=e.config||{}}else{e=a.getGraphDiv(e);r=a.extendDeep([],e.data);c=a.extendDeep({},e.layout);f=e._context}function d(e){return!(e in t)||a.validate(t[e],s[e])}if(!d("width")||!d("height")){throw new Error("Height and width should be pixel values.")}if(!d("format")){throw new Error("Image format is not jpeg, png, svg or webp.")}var p={};function v(e,r){return a.coerce(t,p,s,e,r)}var h=v("format");var g=v("width");var y=v("height");var m=v("scale");var x=v("setBackground");var b=v("imageDataOnly");var _=document.createElement("div");_.style.position="absolute";_.style.left="-5000px";document.body.appendChild(_);var w=a.extendFlat({},c);if(g)w.width=g;if(y)w.height=y;var k=a.extendFlat({},f,{staticPlot:true,setBackground:x});var M=i.getRedrawFunc(_);function A(){return new Promise(function(e){setTimeout(e,i.getDelay(_._fullLayout))})}function T(){return new Promise(function(e,t){var r=o(_,h,m);var i=_._fullLayout.width;var s=_._fullLayout.height;n.purge(_);document.body.removeChild(_);if(h==="svg"){if(b){return e(r)}else{return e("data:image/svg+xml,"+encodeURIComponent(r))}}var u=document.createElement("canvas");u.id=a.randstr();l({format:h,width:i,height:s,scale:m,canvas:u,svg:r,promise:true}).then(e).catch(t)})}function L(e){if(b){return e.replace(u,"")}else{return e}}return new Promise(function(e,t){n.plot(_,r,w,k).then(M).then(A).then(T).then(function(t){e(L(t))}).catch(function(e){t(e)})})}t.exports=c},{"../lib":164,"../snapshot/helpers":262,"../snapshot/svgtoimg":264,"../snapshot/tosvg":266,"./plot_api":196}],203:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plots/plots");var i=e("./plot_schema");var o=e("./plot_config");var l=n.isPlainObject;var s=Array.isArray;var u=n.isArrayOrTypedArray;t.exports=function e(t,r){var u=i.get();var d=[];var p={_context:n.extendFlat({},o)};var h,g;if(s(t)){p.data=n.extendDeep([],t);h=t}else{p.data=[];h=[];d.push(v("array","data"))}if(l(r)){p.layout=n.extendDeep({},r);g=r}else{p.layout={};g={};if(arguments.length>1){d.push(v("object","layout"))}}a.supplyDefaults(p);var y=p._fullData,m=h.length;for(var x=0;x<m;x++){var b=h[x],_=["data",x];if(!l(b)){d.push(v("object",_));continue}var w=y[x],k=w.type,M=u.traces[k].attributes;M.type={valType:"enumerated",values:[k]};if(w.visible===false&&b.visible!==false){d.push(v("invisible",_))}c(b,w,M,d,_);var A=b.transforms,T=w.transforms;if(A){if(!s(A)){d.push(v("array",_,["transforms"]))}_.push("transforms");for(var L=0;L<A.length;L++){var S=["transforms",L],C=A[L].type;if(!l(A[L])){d.push(v("object",_,S));continue}var P=u.transforms[C]?u.transforms[C].attributes:{};P.type={valType:"enumerated",values:Object.keys(u.transforms)};c(A[L],T[L],P,d,_,S)}}}var z=p._fullLayout,O=f(u,y);c(g,z,O,d,"layout");return d.length===0?void 0:d};function c(e,t,r,a,i,o){o=o||[];var f=Object.keys(e);for(var d=0;d<f.length;d++){var p=f[d];if(p==="transforms")continue;var y=o.slice();y.push(p);var m=e[p],x=t[p];var b=g(r,p);var _=(b||{}).valType==="info_array";var w=(b||{}).valType==="colorscale";var k=(b||{}).items;if(!h(r,p)){a.push(v("schema",i,y))}else if(l(m)&&l(x)){c(m,x,b,a,i,y)}else if(_&&s(m)){if(m.length>x.length){a.push(v("unused",i,y.concat(x.length)))}var M=x.length;var A=Array.isArray(k);if(A)M=Math.min(M,k.length);var T,L,S,C,P;if(b.dimensions===2){for(L=0;L<M;L++){if(s(m[L])){if(m[L].length>x[L].length){a.push(v("unused",i,y.concat(L,x[L].length)))}var z=x[L].length;for(T=0;T<(A?Math.min(z,k[L].length):z);T++){S=A?k[L][T]:k;C=m[L][T];P=x[L][T];if(!n.validate(C,S)){a.push(v("value",i,y.concat(L,T),C))}else if(P!==C&&P!==+C){a.push(v("dynamic",i,y.concat(L,T),C,P))}}}else{a.push(v("array",i,y.concat(L),m[L]))}}}else{for(L=0;L<M;L++){S=A?k[L]:k;C=m[L];P=x[L];if(!n.validate(C,S)){a.push(v("value",i,y.concat(L),C))}else if(P!==C&&P!==+C){a.push(v("dynamic",i,y.concat(L),C,P))}}}}else if(b.items&&!_&&s(m)){var O=k[Object.keys(k)[0]],D=[];var E,R;for(E=0;E<x.length;E++){var I=x[E]._index||E;R=y.slice();R.push(I);if(l(m[I])&&l(x[E])){D.push(I);var N=m[I];var F=x[E];if(l(N)&&N.visible!==false&&F.visible===false){a.push(v("invisible",i,R))}else c(N,F,O,a,i,R)}}for(E=0;E<m.length;E++){R=y.slice();R.push(E);if(!l(m[E])){a.push(v("object",i,R,m[E]))}else if(D.indexOf(E)===-1){a.push(v("unused",i,R))}}}else if(!l(m)&&l(x)){a.push(v("object",i,y,m))}else if(!u(m)&&u(x)&&!_&&!w){a.push(v("array",i,y,m))}else if(!(p in t)){a.push(v("unused",i,y,m))}else if(!n.validate(m,b)){a.push(v("value",i,y,m))}else if(b.valType==="enumerated"&&(b.coerceNumber&&m!==+x||m!==x)){a.push(v("dynamic",i,y,m,x))}}return a}function f(e,t){for(var r=0;r<t.length;r++){var a=t[r].type,i=e.traces[a].layoutAttributes;if(i){n.extendFlat(e.layout.layoutAttributes,i)}}return e.layout.layoutAttributes}var d={object:function(e,t){var r;if(e==="layout"&&t==="")r="The layout argument";else if(e[0]==="data"&&t===""){r="Trace "+e[1]+" in the data argument"}else r=p(e)+"key "+t;return r+" must be linked to an object container"},array:function(e,t){var r;if(e==="data")r="The data argument";else r=p(e)+"key "+t;return r+" must be linked to an array container"},schema:function(e,t){return p(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var n=l(r)?"container":"key";return p(e)+n+" "+t+" did not get coerced"},dynamic:function(e,t,r,n){return[p(e)+"key",t,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?p(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[p(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function p(e){if(s(e))return"In data trace "+e[1]+", ";return"In "+e+", "}function v(e,t,r,a,i){r=r||"";var o,l;if(s(t)){o=t[0];l=t[1]}else{o=t;l=null}var u=x(r);var c=d[e](t,u,a,i);n.log(c);return{code:e,container:o,trace:l,path:r,astr:u,msg:c}}function h(e,t){var r=m(t),n=r.keyMinusId,a=r.id;if(n in e&&e[n]._isSubplotObj&&a){return true}return t in e}function g(e,t){if(t in e)return e[t];var r=m(t);return e[r.keyMinusId]}var y=n.counterRegex("([a-z]+)");function m(e){var t=e.match(y);return{keyMinusId:t&&t[1],id:t&&t[2]}}function x(e){if(!s(e))return String(e);var t="";for(var r=0;r<e.length;r++){var n=e[r];if(typeof n==="number"){t=t.substr(0,t.length-1)+"["+n+"]"}else{t+=n}if(r<e.length-1)t+="."}return t}},{"../lib":164,"../plots/plots":249,"./plot_config":197,"./plot_schema":198}],204:[function(e,t,r){"use strict";t.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:false},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:true}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}}},{}],205:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plot_api/plot_template");t.exports=function e(t,r,i){var o=i.name;var l=i.inclusionAttr||"visible";var s=r[o];var u=n.isArrayOrTypedArray(t[o])?t[o]:[];var c=r[o]=[];var f=a.arrayTemplater(r,o,l);var d,p;for(d=0;d<u.length;d++){var v=u[d];if(!n.isPlainObject(v)){p=f.newItem({});p[l]=false}else{p=f.newItem(v)}p._index=d;if(p[l]!==false){i.handleItemDefaults(v,p,r,i)}c.push(p)}var h=f.defaultItems();for(d=0;d<h.length;d++){p=h[d];p._index=c.length;i.handleItemDefaults({},p,r,i,{});c.push(p)}if(n.isArrayOrTypedArray(s)){var g=Math.min(s.length,c.length);for(d=0;d<g;d++){n.relinkPrivateKeys(c[d],s[d])}}return c}},{"../lib":164,"../plot_api/plot_template":199}],206:[function(e,t,r){"use strict";var n=e("../components/fx/attributes");t.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:true},visible:{valType:"enumerated",values:[true,false,"legendonly"],dflt:true,editType:"calc"},showlegend:{valType:"boolean",dflt:true,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:true,dflt:"all",editType:"none"},hoverlabel:n.hoverlabel,stream:{token:{valType:"string",noBlank:true,strict:true,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"}}},{"../components/fx/attributes":78}],207:[function(e,t,r){"use strict";t.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],208:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").FP_SAFE;t.exports={getAutoRange:o,makePadFn:l,doAutoRange:s,expand:c};function o(e){var t=[];var r=e._min[0].val;var n=e._max[0].val;var i=0;var o=false;var s=l(e);var u,c,f,d,p,v,h,g;for(u=1;u<e._min.length;u++){if(r!==n)break;r=Math.min(r,e._min[u].val)}for(u=1;u<e._max.length;u++){if(r!==n)break;n=Math.max(n,e._max[u].val)}if(e.range){var y=a.simpleMap(e.range,e.r2l);o=y[1]<y[0]}if(e.autorange==="reversed"){o=true;e.autorange=true}for(u=0;u<e._min.length;u++){f=e._min[u];for(c=0;c<e._max.length;c++){d=e._max[c];g=d.val-f.val;h=e._length-s(f)-s(d);if(g>0&&h>0&&g/h>i){p=f;v=d;i=g/h}}}if(r===n){var m=r-1;var x=r+1;if(e.rangemode==="tozero"){t=r<0?[m,0]:[0,x]}else if(e.rangemode==="nonnegative"){t=[Math.max(0,m),Math.max(0,x)]}else{t=[m,x]}}else if(i){if(e.type==="linear"||e.type==="-"){if(e.rangemode==="tozero"){if(p.val>=0){p={val:0,pad:0}}if(v.val<=0){v={val:0,pad:0}}}else if(e.rangemode==="nonnegative"){if(p.val-i*s(p)<0){p={val:0,pad:0}}if(v.val<0){v={val:1,pad:0}}}i=(v.val-p.val)/(e._length-s(p)-s(v))}t=[p.val-i*s(p),v.val+i*s(v)]}if(t[0]===t[1]){if(e.rangemode==="tozero"){if(t[0]<0){t=[t[0],0]}else if(t[0]>0){t=[0,t[0]]}else{t=[0,1]}}else{t=[t[0]-1,t[0]+1];if(e.rangemode==="nonnegative"){t[0]=Math.max(0,t[0])}}}if(o)t.reverse();return a.simpleMap(t,e.l2r||Number)}function l(e){var t=e._length/20;if(e.constrain==="domain"&&e._inputDomain){t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])}return function e(r){return r.pad+(r.extrapad?t:0)}}function s(e){if(!e._length)e.setScale();var t=e._min&&e._max&&e._min.length&&e._max.length;var r;if(e.autorange&&t){e.range=o(e);e._r=e.range.slice();e._rl=a.simpleMap(e._r,e.r2l);r=e._input;r.range=e.range.slice();r.autorange=e.autorange}if(e._anchorAxis&&e._anchorAxis.rangeslider){var n=e._anchorAxis.rangeslider[e._name];if(n){if(n.rangemode==="auto"){if(t){n.range=o(e)}else{n.range=e._rangeInitial?e._rangeInitial.slice():e.range.slice()}}}r=e._anchorAxis._input;r.rangeslider[e._name]=a.extendFlat({},n)}}function u(e){return e.autorange||e._rangesliderAutorange}function c(e,t,r){if(!u(e)||!t)return;if(!e._min)e._min=[];if(!e._max)e._max=[];if(!r)r={};if(!e._m)e.setScale();var a=t.length;var o=r.padded||false;var l=r.tozero&&(e.type==="linear"||e.type==="-");var s=e.type==="log";var c,v,h,g,y,m,x,b,_,w,k,M;var A=false;function T(e){if(Array.isArray(e)){A=true;return function(t){return Math.max(Number(e[t]||0),0)}}else{var t=Math.max(Number(e||0),0);return function(){return t}}}var L=T((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0);var S=T((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0);var C=T(r.vpadplus||r.vpad);var P=T(r.vpadminus||r.vpad);if(!A){k=Infinity;M=-Infinity;if(s){for(c=0;c<a;c++){g=t[c];if(g<k&&g>0)k=g;if(g>M&&g<i)M=g}}else{for(c=0;c<a;c++){g=t[c];if(g<k&&g>-i)k=g;if(g>M&&g<i)M=g}}t=[k,M];a=2}function z(r){y=t[r];if(!n(y))return;b=L(r);_=S(r);k=y-P(r);M=y+C(r);if(s&&k<M/10)k=M/10;m=e.c2l(k);x=e.c2l(M);if(l){m=Math.min(0,m);x=Math.max(0,x)}for(h=0;h<2;h++){var a=h?x:m;if(f(a)){var i=h?e._max:e._min;var u=h?b:_;var c=h?p:d;w=true;for(v=0;v<i.length&&w;v++){g=i[v];if(c(g.val,a)&&g.pad>=u&&(g.extrapad||!o)){w=false;break}else if(c(a,g.val)&&g.pad<=u&&(o||!g.extrapad)){i.splice(v,1);v--}}if(w){var A=l&&a===0;i.push({val:a,pad:A?0:u,extrapad:A?false:o})}}}}var O=Math.min(6,a);for(c=0;c<O;c++)z(c);for(c=a-1;c>=O;c--)z(c)}function f(e){return n(e)&&Math.abs(e)<i}function d(e,t){return e<=t}function p(e,t){return e>=t}},{"../../constants/numerical":144,"../../lib":164,"fast-isnumeric":11}],209:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../plots/plots");var o=e("../../registry");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../../components/titles");var c=e("../../components/color");var f=e("../../components/drawing");var d=e("../../constants/numerical");var p=d.ONEAVGYEAR;var v=d.ONEAVGMONTH;var h=d.ONEDAY;var g=d.ONEHOUR;var y=d.ONEMIN;var m=d.ONESEC;var x=d.MINUS_SIGN;var b=d.BADNUM;var _=e("../../constants/alignment").MID_SHIFT;var w=e("../../constants/alignment").LINE_SPACING;var k=t.exports={};k.setConvert=e("./set_convert");var M=e("./axis_autotype");var A=e("./axis_ids");k.id2name=A.id2name;k.name2id=A.name2id;k.cleanId=A.cleanId;k.list=A.list;k.listIds=A.listIds;k.getFromId=A.getFromId;k.getFromTrace=A.getFromTrace;var T=e("./autorange");k.expand=T.expand;k.getAutoRange=T.getAutoRange;k.coerceRef=function(e,t,r,n,a,i){var o=n.charAt(n.length-1);var s=r._fullLayout._subplots[o+"axis"];var u=n+"ref";var c={};if(!a)a=s[0]||i;if(!i)i=a;c[u]={valType:"enumerated",values:s.concat(i?[i]:[]),dflt:a};return l.coerce(e,t,c,u)};k.coercePosition=function(e,t,r,n,a,i){var o,s;if(n==="paper"||n==="pixel"){o=l.ensureNumber;s=r(a,i)}else{var u=k.getFromId(t,n);i=u.fraction2r(i);s=r(a,i);o=u.cleanPos}e[a]=o(s)};k.cleanPosition=function(e,t,r){var n=r==="paper"||r==="pixel"?l.ensureNumber:k.getFromId(t,r).cleanPos;return n(e)};var L=k.getDataConversions=function(e,t,r,n){var a;var i=r==="x"||r==="y"||r==="z"?r:n;if(Array.isArray(i)){a={type:M(n),_categories:[]};k.setConvert(a);if(a.type==="category"){for(var o=0;o<n.length;o++){a.d2c(n[o])}}}else{a=k.getFromTrace(e,t,i)}if(a)return{d2c:a.d2c,c2d:a.c2d};if(i==="ids")return{d2c:C,c2d:C};return{d2c:S,c2d:S}};function S(e){return+e}function C(e){return String(e)}k.getDataToCoordFunc=function(e,t,r,n){return L(e,t,r,n).d2c};k.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};k.minDtick=function(e,t,r,n){if(["log","category"].indexOf(e.type)!==-1||!n){e._minDtick=0}else if(e._minDtick===undefined){e._minDtick=t;e._forceTick0=r}else if(e._minDtick){if((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6){e._minDtick=t;e._forceTick0=r}else if((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6){e._minDtick=0}}};k.saveRangeInitial=function(e,t){var r=k.list(e,"",true),n=false;for(var a=0;a<r.length;a++){var i=r[a];var o=i._rangeInitial===undefined;var l=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);if(o&&i.autorange===false||t&&l){i._rangeInitial=i.range.slice();n=true}}return n};k.saveShowSpikeInitial=function(e,t){var r=k.list(e,"",true),n=false,a="on";for(var i=0;i<r.length;i++){var o=r[i];var l=o._showSpikeInitial===undefined;var s=l||!(o.showspikes===o._showspikes);if(l||t&&s){o._showSpikeInitial=o.showspikes;n=true}if(a==="on"&&!o.showspikes){a="off"}}e._fullLayout._cartesianSpikesEnabled=a;return n};k.autoBin=function(e,t,r,n,i){var o=l.aggNums(Math.min,null,e),s=l.aggNums(Math.max,null,e);if(!i)i=t.calendar;if(t.type==="category"){return{start:o-.5,end:s+.5,size:1,_dataSpan:s-o}}var u;if(r)u=(s-o)/r;else{var c=l.distinctVals(e),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),d=f*l.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],true);u=Math.max(d,2*l.stdev(e)/Math.pow(e.length,n?.25:.4));if(!a(u))u=1}var p;if(t.type==="log"){p={type:"linear",range:[o,s]}}else{p={type:t.type,range:l.simpleMap([o,s],t.c2r,0,i),calendar:i}}k.setConvert(p);k.autoTicks(p,u);var v=k.tickIncrement(k.tickFirst(p),p.dtick,"reverse",i);var h,g;if(typeof p.dtick==="number"){v=P(v,e,p,o,s);g=1+Math.floor((s-v)/p.dtick);h=v+g*p.dtick}else{if(p.dtick.charAt(0)==="M"){v=z(v,e,p.dtick,o,i)}h=v;g=0;while(h<=s){h=k.tickIncrement(h,p.dtick,false,i);g++}}return{start:t.c2r(v,0,i),end:t.c2r(h,0,i),size:p.dtick,_dataSpan:s-o}};function P(e,t,r,n,i){var o=0,l=0,s=0,u=0;function c(t){return(1+(t-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++){if(t[f]%1===0)s++;else if(!a(t[f]))u++;if(c(t[f]))o++;if(c(t[f]+r.dtick/2))l++}var d=t.length-u;if(s===d&&r.type!=="date"){if(r.dtick<1){e=n-.5*r.dtick}else{e-=.5;if(e+r.dtick<n)e+=r.dtick}}else if(l<d*.1){if(o>d*.3||c(n)||c(i)){var p=r.dtick/2;e+=e+p<n?p:-p}}return e}function z(e,t,r,n,a){var i=l.findExactDates(t,a);var o=.8;if(i.exactDays>o){var s=Number(r.substr(1));if(i.exactYears>o&&s%12===0){e=k.tickIncrement(e,"M6","reverse")+h*1.5}else if(i.exactMonths>o){e=k.tickIncrement(e,"M1","reverse")+h*15.5}else{e-=h/2}var u=k.tickIncrement(e,r);if(u<=n)return u}return e}k.prepTicks=function(e){var t=l.simpleMap(e.range,e.r2l);if(e.tickmode==="auto"||!e.dtick){var r=e.nticks,n;if(!r){if(e.type==="category"){n=e.tickfont?(e.tickfont.size||12)*1.2:15;r=e._length/n}else{n=e._id.charAt(0)==="y"?40:80;r=l.constrain(e._length/n,4,9)+1}if(e._name==="radialaxis")r*=2}if(e.tickmode==="array")r*=100;k.autoTicks(e,Math.abs(t[1]-t[0])/r);if(e._minDtick>0&&e.dtick<e._minDtick*2){e.dtick=e._minDtick;e.tick0=e.l2r(e._forceTick0)}}if(!e.tick0){e.tick0=e.type==="date"?"2000-01-01":0}q(e)};k.calcTicks=function e(t){k.prepTicks(t);var r=l.simpleMap(t.range,t.r2l);if(t.tickmode==="array")return O(t);t._tmin=k.tickFirst(t);var n=r[0]*1.0001-r[1]*1e-4;var a=r[1]*1.0001-r[0]*1e-4;var i=r[1]<r[0];if(t._tmin<n!==i)return[];var o=[];if(t.type==="category"){a=i?Math.max(-.5,a):Math.min(t._categories.length-.5,a)}var s=null;var u=Math.max(1e3,t._length||0);for(var c=t._tmin;i?c>=a:c<=a;c=k.tickIncrement(c,t.dtick,i,t.calendar)){if(o.length>u||c===s)break;s=c;o.push(c)}if(t._id==="angular"&&Math.abs(r[1]-r[0])===360){o.pop()}t._tmax=o[o.length-1];t._prevDateHead="";t._inCalcTicks=true;var f=new Array(o.length);for(var d=0;d<o.length;d++)f[d]=k.tickText(t,o[d]);t._inCalcTicks=false;return f};function O(e){var t=e.tickvals,r=e.ticktext,n=new Array(t.length),a=l.simpleMap(e.range,e.r2l),i=a[0]*1.0001-a[1]*1e-4,o=a[1]*1.0001-a[0]*1e-4,s=Math.min(i,o),u=Math.max(i,o),c,f,d=0;if(!Array.isArray(r))r=[];var p=e.type==="category"?e.d2l_noadd:e.d2l;if(e.type==="log"&&String(e.dtick).charAt(0)!=="L"){e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)}for(f=0;f<t.length;f++){c=p(t[f]);if(c>s&&c<u){if(r[f]===undefined)n[d]=k.tickText(e,c);else n[d]=H(e,c,String(r[f]));d++}}if(d<t.length)n.splice(d,t.length-d);return n}var D=[2,5,10],E=[1,2,3,6,12],R=[1,2,5,10,15,30],I=[1,2,3,7,14],N=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],F=[-.301,0,.301,.699,1],j=[15,30,45,90,180];function B(e,t,r){return t*l.roundUp(e/t,r)}k.autoTicks=function(e,t){var r;function n(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=l.dateTick0(e.calendar);var i=2*t;if(i>p){t/=p;r=n(10);e.dtick="M"+12*B(t,r,D)}else if(i>v){t/=v;e.dtick="M"+B(t,1,E)}else if(i>h){e.dtick=B(t,h,I);e.tick0=l.dateTick0(e.calendar,true)}else if(i>g){e.dtick=B(t,g,E)}else if(i>y){e.dtick=B(t,y,R)}else if(i>m){e.dtick=B(t,m,R)}else{r=n(10);e.dtick=B(t,r,D)}}else if(e.type==="log"){e.tick0=0;var o=l.simpleMap(e.range,e.r2l);if(t>.7){e.dtick=Math.ceil(t)}else if(Math.abs(o[1]-o[0])<1){var s=1.5*Math.abs((o[1]-o[0])/t);t=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/s;r=n(10);e.dtick="L"+B(t,r,D)}else{e.dtick=t>.3?"D2":"D1"}}else if(e.type==="category"){e.tick0=0;e.dtick=Math.ceil(Math.max(t,1))}else if(e._id==="angular"){e.tick0=0;r=1;e.dtick=B(t,r,j)}else{e.tick0=0;r=n(10);e.dtick=B(t,r,D)}if(e.dtick===0)e.dtick=1;if(!a(e.dtick)&&typeof e.dtick!=="string"){var u=e.dtick;e.dtick=1;throw"ax.dtick error: "+String(u)}};function q(e){var t=e.dtick;e._tickexponent=0;if(!a(t)&&typeof t!=="string"){t=1}if(e.type==="category"){e._tickround=null}if(e.type==="date"){var r=e.r2l(e.tick0),n=e.l2r(r).replace(/(^-|i)/g,""),i=n.length;if(String(t).charAt(0)==="M"){if(i>10||n.substr(5)!=="01-01")e._tickround="d";else e._tickround=+t.substr(1)%12===0?"y":"m"}else if(t>=h&&i<=10||t>=h*15)e._tickround="d";else if(t>=y&&i<=16||t>=g)e._tickround="M";else if(t>=m&&i<=19||t>=y)e._tickround="S";else{var o=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(i,o)-20}}else if(a(t)||t.charAt(0)==="L"){var l=e.range.map(e.r2d||Number);if(!a(t))t=Number(t.substr(1));e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(l[0]),Math.abs(l[1]));var u=Math.floor(Math.log(s)/Math.LN10+.01);if(Math.abs(u)>3){if(J(e.exponentformat)&&!Q(u)){e._tickexponent=3*Math.round((u-1)/3)}else e._tickexponent=u}}else e._tickround=null}k.tickIncrement=function(e,t,r,i){var o=r?-1:1;if(a(t))return e+o*t;var s=t.charAt(0),u=o*Number(t.substr(1));if(s==="M")return l.incrementMonth(e,u,i);else if(s==="L")return Math.log(Math.pow(10,e)+u)/Math.LN10;else if(s==="D"){var c=t==="D2"?F:N,f=e+o*.01,d=l.roundUp(l.mod(f,1),c,r);return Math.floor(f)+Math.log(n.round(Math.pow(10,d),1))/Math.LN10}else throw"unrecognized dtick "+String(t)};k.tickFirst=function(e){var t=e.r2l||Number,r=l.simpleMap(e.range,t),i=r[1]<r[0],o=i?Math.floor:Math.ceil,s=r[0]*1.0001-r[1]*1e-4,u=e.dtick,c=t(e.tick0);if(a(u)){var f=o((s-c)/u)*u+c;if(e.type==="category"){f=l.constrain(f,0,e._categories.length-1)}return f}var d=u.charAt(0),p=Number(u.substr(1));if(d==="M"){var v=0,h=c,g,y,m;while(v<10){g=k.tickIncrement(h,u,i,e.calendar);if((g-s)*(h-s)<=0){if(i)return Math.min(h,g);return Math.max(h,g)}y=(s-(h+g)/2)/(g-h);m=d+(Math.abs(Math.round(y))||1)*p;h=k.tickIncrement(h,m,y<0?!i:i,e.calendar);v++}l.error("tickFirst did not converge",e);return h}else if(d==="L"){return Math.log(o((Math.pow(10,s)-c)/p)*p+c)/Math.LN10}else if(d==="D"){var x=u==="D2"?F:N,b=l.roundUp(l.mod(s,1),x,i);return Math.floor(s)+Math.log(n.round(Math.pow(10,b),1))/Math.LN10}else throw"unrecognized dtick "+String(u)};k.tickText=function(e,t,r){var n=H(e,t),a,i=e.tickmode==="array",o=r||i,s,u=e.type==="category"?e.d2l_noadd:e.d2l;if(i&&Array.isArray(e.ticktext)){var c=l.simpleMap(e.range,e.r2l),f=Math.abs(c[1]-c[0])/1e4;for(s=0;s<e.ticktext.length;s++){if(Math.abs(t-u(e.tickvals[s]))<f)break}if(s<e.ticktext.length){n.text=String(e.ticktext[s]);return n}}function d(n){var a;if(n===undefined)return true;if(r)return n==="none";a={first:e._tmin,last:e._tmax}[n];return n!=="all"&&t!==a}if(r){a="never"}else{a=e.exponentformat!=="none"&&d(e.showexponent)?"hide":""}if(e.type==="date")U(e,n,r,o);else if(e.type==="log")V(e,n,r,o,a);else if(e.type==="category")G(e,n);else if(e._id==="angular")Z(e,n,r,o,a);else Y(e,n,r,o,a);if(e.tickprefix&&!d(e.showtickprefix))n.text=e.tickprefix+n.text;if(e.ticksuffix&&!d(e.showticksuffix))n.text+=e.ticksuffix;return n};k.hoverLabelText=function(e,t,r){if(r!==b&&r!==t){return k.hoverLabelText(e,t)+" - "+k.hoverLabelText(e,r)}var n=e.type==="log"&&t<=0;var a=k.tickText(e,e.c2l(n?-t:t),"hover").text;if(n){return t===0?"0":x+a}return a};function H(e,t,r){var n=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}function U(e,t,r,n){var i=e._tickround,o=r&&e.hoverformat||k.getTickFormat(e);if(n){if(a(i))i=4;else i={y:"m",m:"d",d:"M",M:"S",S:4}[i]}var s=l.formatDate(t.x,o,i,e._dateFormat,e.calendar,e._extraFormat),u;var c=s.indexOf("\n");if(c!==-1){u=s.substr(c+1);s=s.substr(0,c)}if(n){if(s==="00:00:00"||s==="00:00"){s=u;u=""}else if(s.length===8){s=s.replace(/:00$/,"")}}if(u){if(r){if(i==="d")s+=", "+u;else s=u+(s?", "+s:"")}else if(!e._inCalcTicks||u!==e._prevDateHead){s+="<br>"+u;e._prevDateHead=u}}t.text=s}function V(e,t,r,n,i){var o=e.dtick,s=t.x,u=e.tickformat;if(i==="never"){i=""}if(n&&(typeof o!=="string"||o.charAt(0)!=="L"))o="L3";if(u||typeof o==="string"&&o.charAt(0)==="L"){t.text=$(Math.pow(10,s),e,i,n)}else if(a(o)||o.charAt(0)==="D"&&l.mod(s+.01,1)<.1){var c=Math.round(s);if(["e","E","power"].indexOf(e.exponentformat)!==-1||J(e.exponentformat)&&Q(c)){if(c===0)t.text=1;else if(c===1)t.text="10";else if(c>1)t.text="10<sup>"+c+"</sup>";else t.text="10<sup>"+x+-c+"</sup>";t.fontSize*=1.25}else{t.text=$(Math.pow(10,s),e,"","fakehover");if(o==="D1"&&e._id.charAt(0)==="y"){t.dy-=t.fontSize/6}}}else if(o.charAt(0)==="D"){t.text=String(Math.round(Math.pow(10,l.mod(s,1))));t.fontSize*=.75}else throw"unrecognized dtick "+String(o);if(e.dtick==="D1"){var f=String(t.text).charAt(0);if(f==="0"||f==="1"){if(e._id.charAt(0)==="y"){t.dx-=t.fontSize/4}else{t.dy+=t.fontSize/2;t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(s<0?.5:.25)}}}}function G(e,t){var r=e._categories[Math.round(t.x)];if(r===undefined)r="";t.text=String(r)}function Y(e,t,r,n,a){if(a==="never"){a=""}else if(e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6){a="hide"}t.text=$(t.x,e,a,n)}function Z(e,t,r,n,a){if(e.thetaunit==="radians"&&!r){var i=t.x/180;if(i===0){t.text="0"}else{var o=X(i);if(o[1]>=100){t.text=$(l.deg2rad(t.x),e,a,n)}else{var s=t.x<0;if(o[1]===1){if(o[0]===1)t.text="\u03c0";else t.text=o[0]+"\u03c0"}else{t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join("")}if(s)t.text=x+t.text}}}else{t.text=$(t.x,e,a,n)}}function X(e){function t(e,t){return Math.abs(e-t)<=1e-6}function r(e,n){return t(n,0)?e:r(n,e%n)}function n(e){var r=1;while(!t(Math.round(e*r)/r,e)){r*=10}return r}var a=n(e);var i=e*a;var o=Math.abs(r(i,a));return[Math.round(i/o),Math.round(a/o)]}var W=["f","p","n","\u03bc","m","","k","M","G","T"];function J(e){return e==="SI"||e==="B"}function Q(e){return e>14||e<-15}function $(e,t,r,n){var i=e<0,o=t._tickround,s=r||t.exponentformat||"B",u=t._tickexponent,c=k.getTickFormat(t),f=t.separatethousands;if(n){var d={exponentformat:s,dtick:t.showexponent==="none"?t.dtick:a(e)?Math.abs(e)||1:1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};q(d);o=(Number(d._tickround)||0)+4;u=d._tickexponent;if(t.hoverformat)c=t.hoverformat}if(c)return t._numFormat(c)(e).replace(/-/g,x);var p=Math.pow(10,-o)/2;if(s==="none")u=0;e=Math.abs(e);if(e<p){e="0";i=false}else{e+=p;if(u){e*=Math.pow(10,-u);o+=u}if(o===0)e=String(Math.floor(e));else if(o<0){e=String(Math.round(e));e=e.substr(0,e.length+o);for(var v=o;v<0;v++)e+="0"}else{e=String(e);var h=e.indexOf(".")+1;if(h)e=e.substr(0,h+o).replace(/\.?0+$/,"")}e=l.numSeparate(e,t._separators,f)}if(u&&s!=="hide"){if(J(s)&&Q(u))s="power";var g;if(u<0)g=x+-u;else if(s!=="power")g="+"+u;else g=String(u);if(s==="e"){e+="e"+g}else if(s==="E"){e+="E"+g}else if(s==="power"){e+="\xd710<sup>"+g+"</sup>"}else if(s==="B"&&u===9){e+="B"}else if(J(s)){e+=W[u/3+5]}}if(i)return x+e;return e}k.getTickFormat=function(e){var t;function r(e){return typeof e!=="string"?e:Number(e.replace("M",""))*v}function n(e,t){var r=["L","D"];if(typeof e===typeof t){if(typeof e==="number"){return e-t}else{var n=r.indexOf(e.charAt(0));var a=r.indexOf(t.charAt(0));if(n===a){return Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,""))}else{return n-a}}}else{return typeof e==="number"?1:-1}}function a(e,t,r){var n=r||function(e){return e};var a=t[0];var i=t[1];return(!a&&typeof a!=="number"||n(a)<=n(e))&&(!i&&typeof i!=="number"||n(i)>=n(e))}function i(e,t){var r=t[0]===null;var a=t[1]===null;var i=n(e,t[0])>=0;var o=n(e,t[1])<=0;return(r||i)&&(a||o)}var o,l;if(e.tickformatstops&&e.tickformatstops.length>0){switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++){l=e.tickformatstops[t];if(l.enabled&&a(e.dtick,l.dtickrange,r)){o=l;break}}break}case"log":{for(t=0;t<e.tickformatstops.length;t++){l=e.tickformatstops[t];if(l.enabled&&i(e.dtick,l.dtickrange)){o=l;break}}break}default:}}return o?o.value:e.tickformat};k.getSubplots=function(e,t){var r=e._fullLayout._subplots;var n=r.cartesian.concat(r.gl2d||[]);var a=t?k.findSubplotsWithAxis(n,t):n;a.sort(function(e,t){var r=e.substr(1).split("y");var n=t.substr(1).split("y");if(r[0]===n[0])return+r[1]-+n[1];return+r[0]-+n[0]});return a};k.findSubplotsWithAxis=function(e,t){var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$");var n=[];for(var a=0;a<e.length;a++){var i=e[a];if(r.test(i))n.push(i)}return n};k.makeClipPaths=function(e){var t=e._fullLayout;if(t._hasOnlyLargeSploms)return;var r={_offset:0,_length:t.width,_id:""};var a={_offset:0,_length:t.height,_id:""};var i=k.list(e,"x",true);var o=k.list(e,"y",true);var l=[];var s,u;for(s=0;s<i.length;s++){l.push({x:i[s],y:a});for(u=0;u<o.length;u++){if(s===0)l.push({x:r,y:o[u]});l.push({x:i[s],y:o[u]})}}var c=t._clips.selectAll(".axesclip").data(l,function(e){return e.x._id+e.y._id});c.enter().append("clipPath").classed("axesclip",true).attr("id",function(e){return"clip"+t._uid+e.x._id+e.y._id}).append("rect");c.exit().remove();c.each(function(e){n.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})};k.doTicks=function(e,t,r){var n=e._fullLayout;if(t==="redraw"){n._paper.selectAll("g.subplot").each(function(e){var t=n._plots[e];var r=t.xaxis;var a=t.yaxis;t.xaxislayer.selectAll("."+r._id+"tick").remove();t.yaxislayer.selectAll("."+a._id+"tick").remove();if(t.gridlayer)t.gridlayer.selectAll("path").remove();if(t.zerolinelayer)t.zerolinelayer.selectAll("path").remove();n._infolayer.select(".g-"+r._id+"title").remove();n._infolayer.select(".g-"+a._id+"title").remove()})}var a=!t||t==="redraw"?k.listIds(e):t;l.syncOrAsync(a.map(function(t){return function(){if(!t)return;var n=k.doTicksSingle(e,t,r);var a=k.getFromId(e,t);a._r=a.range.slice();a._rl=l.simpleMap(a._r,a.r2l);return n}}))};k.doTicksSingle=function(e,t,r){var d=e._fullLayout;var p=false;var v;if(l.isPlainObject(t)){v=t;p=true}else{v=k.getFromId(e,t)}v.setScale();var h=v._id;var g=h.charAt(0);var y=k.counterLetter(h);var m=v._vals=k.calcTicks(v);var x=function(e){return[e.text,e.x,v.mirror,e.font,e.fontSize,e.fontColor].join("_")};var b=h+"tick";var M=h+"grid";var T=h+"zl";var L=(v.linewidth||1)/2;var S=v.ticks==="outside"?v.ticklen:0;var C=0;var P=f.crispRound(e,v.gridwidth,1);var z=f.crispRound(e,v.zerolinewidth,P);var O=f.crispRound(e,v.tickwidth,1);var D,E,R,I;var N;var F;if(v._counterangle&&v.ticks==="outside"){var j=v._counterangle*Math.PI/180;S=v.ticklen*Math.cos(j)+1;C=v.ticklen*Math.sin(j)}if(v.showticklabels&&(v.ticks==="outside"||v.showline)){S+=.2*v.tickfont.size}if(g==="x"){D=["bottom","top"];E=v._transfn||function(e){return"translate("+(v._offset+v.l2p(e.x))+",0)"};R=function(e,t){if(v._counterangle){var r=v._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(r)*t+","+Math.cos(r)*t}else return"M0,"+e+"v"+t}}else if(g==="y"){D=["left","right"];E=v._transfn||function(e){return"translate(0,"+(v._offset+v.l2p(e.x))+")"};R=function(e,t){if(v._counterangle){var r=v._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(r)*t+","+-Math.sin(r)*t}else return"M"+e+",0h"+t}}else if(h==="angular"){D=["left","right"];E=v._transfn;R=function(e,t){return"M"+e+",0h"+t}}else{l.warn("Unrecognized doTicks axis:",h);return}var B=v.side||D[0];var q=[-1,1,B===D[1]?1:-1];if(v.ticks!=="inside"===(g==="x")){q=q.map(function(e){return-e})}if(!v.visible)return;if(v._tickFilter){m=m.filter(v._tickFilter)}function H(e){var t=v.l2p(e.x);return t>1&&t<v._length-1}var U=m.filter(H);if(v._id==="angular"){U=m}function V(e,t){var r=e.selectAll("path."+b).data(v.ticks==="inside"?U:m,x);if(t&&v.ticks){r.enter().append("path").classed(b,1).classed("ticks",1).classed("crisp",1).call(c.stroke,v.tickcolor).style("stroke-width",O+"px").attr("d",t);r.attr("transform",E);r.exit().remove()}else r.remove()}function G(t,r){N=t.selectAll("g."+b).data(m,x);if(!a(r)){N.remove();Y();return}if(!v.showticklabels){N.remove();Y();D();return}var o,u,c,p,y;if(g==="x"){y=B==="bottom"?1:-1;o=function(e){return e.dx+C*y};p=r+(S+L)*y;u=function(e){return e.dy+p+e.fontSize*(B==="bottom"?1:-.2)};c=function(e){if(!a(e)||e===0||e===180){return"middle"}return e*y<0?"end":"start"}}else if(g==="y"){y=B==="right"?1:-1;u=function(e){return e.dy+e.fontSize*_-C*y};o=function(e){return e.dx+r+(S+L+(Math.abs(v.tickangle)===90?e.fontSize/2:0))*y};c=function(e){if(a(e)&&Math.abs(e)===90){return"middle"}return B==="right"?"start":"end"}}else if(h==="angular"){v._labelShift=C;v._labelStandoff=S;v._pad=L;o=v._labelx;u=v._labely;c=v._labelanchor}var k=0,M=0,A=[];N.enter().append("g").classed(b,1).append("text").attr("text-anchor","middle").each(function(t){var r=n.select(this),a=e._promises.length;r.call(s.positionText,o(t),u(t)).call(f.font,t.font,t.fontSize,t.fontColor).text(t.text).call(s.convertToTspans,e);a=e._promises[a];if(a){A.push(e._promises.pop().then(function(){P(r,v.tickangle)}))}else{P(r,v.tickangle)}});N.exit().remove();N.each(function(e){k=Math.max(k,e.fontSize)});if(h==="angular"){N.each(function(e){n.select(this).select("text").call(s.positionText,o(e),u(e))})}function T(e,t,r){var n=(e-1)*t;if(g==="x"){if(r<-60||60<r){return-.5*n}else if(B==="top"){return-n}}else{r*=B==="left"?1:-1;if(r<-30){return-n}else if(r<30){return-.5*n}}return 0}function P(e,t){e.each(function(e){var r=c(t,e);var i=n.select(this),l=i.select(".text-math-group"),d=E.call(i.node(),e)+(a(t)&&+t!==0?" rotate("+t+","+o(e)+","+(u(e)-e.fontSize/2)+")":"");var p=T(s.lineCount(i),w*e.fontSize,a(t)?+t:0);if(p){d+=" translate(0, "+p+")"}if(l.empty()){i.select("text").attr({transform:d,"text-anchor":r})}else{var v=f.bBox(l.node()).width*{end:-.5,start:.5}[r];l.attr("transform",d+(v?"translate("+v+",0)":""))}})}P(N,v._lastangle||v.tickangle);function z(){return A.length&&Promise.all(A)}function O(){P(N,v.tickangle);if(g==="x"&&!a(v.tickangle)&&(v.type!=="log"||String(v.dtick).charAt(0)!=="D")){var e=[];N.each(function(t){var r=n.select(this),a=r.select(".text-math-group"),i=v.l2p(t.x);if(a.empty())a=r.select("text");var o=f.bBox(a.node());e.push({top:0,bottom:10,height:10,left:i-o.width/2,right:i+o.width/2+2,width:o.width+2})});for(F=0;F<e.length-1;F++){if(l.bBoxIntersect(e[F],e[F+1])){M=30;break}}if(M){var t=Math.abs((m[m.length-1].x-m[0].x)*v._m)/(m.length-1);if(t<k*2.5){M=90}P(N,M)}v._lastangle=M}Y();return h+" done"}function D(){if(v.showticklabels){var r=e.getBoundingClientRect();var n=t.node().getBoundingClientRect();v._boundingBox={width:n.width,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,bottom:n.bottom-r.top}}else{var a=d._size;var i;if(g==="x"){i=v.anchor==="free"?a.t+a.h*(1-v.position):a.t+a.h*(1-v._anchorAxis.domain[{bottom:0,top:1}[v.side]]);v._boundingBox={top:i,bottom:i,left:v._offset,right:v._offset+v._length,width:v._length,height:0}}else{i=v.anchor==="free"?a.l+a.w*v.position:a.l+a.w*v._anchorAxis.domain[{left:0,right:1}[v.side]];v._boundingBox={left:i,right:i,bottom:v._offset+v._length,top:v._offset,height:v._length,width:0}}}if(I){var o=v._counterSpan=[Infinity,-Infinity];for(F=0;F<I.length;F++){var l=d._plots[I[F]];var s=l[g==="x"?"yaxis":"xaxis"];u(o,[s._offset,s._offset+s._length])}if(v.anchor==="free"){u(o,g==="x"?[v._boundingBox.bottom,v._boundingBox.top]:[v._boundingBox.right,v._boundingBox.left])}}function u(e,t){e[0]=Math.min(e[0],t[0]);e[1]=Math.max(e[1],t[1])}}function R(){var t=v._name+".automargin";if(g!=="x"&&g!=="y"){return}if(!v.automargin){i.autoMargin(e,t);return}var r=v.side[0];var n={x:0,y:0,r:0,l:0,t:0,b:0};if(g==="x"){n.y=v.anchor==="free"?v.position:v._anchorAxis.domain[r==="t"?1:0];n[r]+=v._boundingBox.height}else{n.x=v.anchor==="free"?v.position:v._anchorAxis.domain[r==="r"?1:0];n[r]+=v._boundingBox.width}if(v.title!==d._dfltTitle[g]){n[r]+=v.titlefont.size}i.autoMargin(e,t,n)}var j=l.syncOrAsync([z,O,D,R]);if(j&&j.then)e._promises.push(j);return j}function Y(){if(r)return;if(v.rangeslider&&v.rangeslider.visible&&v._boundingBox&&v.side==="bottom")return;var t={selection:N,side:v.side};var n=h.charAt(0);var a=e._fullLayout._size;var i=1.5;var o=v.titlefont.size;var l,s,c,p;if(N.size()){var g=f.getTranslate(N.node().parentNode);t.offsetLeft=g.x;t.offsetTop=g.y}var y=10+o*i+(v.linewidth?v.linewidth-1:0);if(n==="x"){s=v.anchor==="free"?{_offset:a.t+(1-(v.position||0))*a.h,_length:0}:A.getFromId(e,v.anchor);c=v._offset+v._length/2;if(v.side==="top"){p=-y-o*(v.showticklabels?1:0)}else{p=s._length+y+o*(v.showticklabels?1.5:.5)}p+=s._offset;if(!t.side)t.side="bottom"}else{s=v.anchor==="free"?{_offset:a.l+(v.position||0)*a.w,_length:0}:A.getFromId(e,v.anchor);p=v._offset+v._length/2;if(v.side==="right"){c=s._length+y+o*(v.showticklabels?1:.5)}else{c=-y-o*(v.showticklabels?.5:0)}c+=s._offset;l={rotate:"-90",offset:0};if(!t.side)t.side="left"}u.draw(e,h+"title",{propContainer:v,propName:v._name+".title",placeholder:d._dfltTitle[n],avoid:t,transform:l,attributes:{x:c,y:p,"text-anchor":"middle"}})}function Z(e,t){if(e.visible!==true||e.xaxis+e.yaxis!==t)return false;if(o.traceIs(e,"bar")&&e.orientation==={x:"h",y:"v"}[g])return true;return e.fill&&e.fill.charAt(e.fill.length-1)===g}function X(t,r,a){if(d._hasOnlyLargeSploms)return;var i=t.gridlayer.selectAll("."+h);var o=t.zerolinelayer;var s=t["hidegrid"+g]?[]:U;var u=v._gridpath||(g==="x"?"M0,"+r._offset+"v":"M"+r._offset+",0h")+r._length;var f=i.selectAll("path."+M).data(v.showgrid===false?[]:s,x);f.enter().append("path").classed(M,1).classed("crisp",1).attr("d",u).each(function(e){if(v.zeroline&&(v.type==="linear"||v.type==="-")&&Math.abs(e.x)<v.dtick/100){n.select(this).remove()}});f.attr("transform",E).call(c.stroke,v.gridcolor||"#ddd").style("stroke-width",P+"px");if(typeof u==="function")f.attr("d",u);f.exit().remove();if(o){var p=false;for(var y=0;y<e._fullData.length;y++){if(Z(e._fullData[y],a)){p=true;break}}var m=l.simpleMap(v.range,v.r2l),b=m[0]*m[1]<=0&&v.zeroline&&(v.type==="linear"||v.type==="-")&&s.length&&(p||H({x:0})||!v.showline);var _=o.selectAll("path."+T).data(b?[{x:0,id:h}]:[]);_.enter().append("path").classed(T,1).classed("zl",1).classed("crisp",1).attr("d",u).each(function(){o.selectAll("path").sort(function(e,t){return A.idSort(e.id,t.id)})});_.attr("transform",E).call(c.stroke,v.zerolinecolor||c.defaultLine).style("stroke-width",z+"px");_.exit().remove()}}if(p){V(v._axislayer,R(v._pos+L*q[2],q[2]*v.ticklen));if(v._counteraxis){var W={gridlayer:v._gridlayer,zerolinelayer:v._zerolinelayer};X(W,v._counteraxis)}return G(v._axislayer,v._pos)}else if(d._has("cartesian")){I=k.getSubplots(e,v);var J={};I.map(function(e){var t=d._plots[e];var r=t[y+"axis"];var n=r._mainAxis._id;if(J[n])return;J[n]=1;X(t,r,e)});var Q=v._mainSubplot;var $=d._plots[Q];var K=[];if(v.ticks){var ee=q[2];var te=R(v._mainLinePosition+L*ee,ee*v.ticklen);if(v._anchorAxis&&v.mirror&&v.mirror!==true){te+=R(v._mainMirrorPosition-L*ee,-ee*v.ticklen)}V($[g+"axislayer"],te);K=Object.keys(v._linepositions||{})}K.map(function(e){var t=d._plots[e];var r=t[g+"axislayer"];var n=v._linepositions[e]||[];function a(e){var t=q[e];return R(n[e]+L*t,t*v.ticklen)}V(r,a(0)+a(1))});var re=$[g+"axislayer"];return G(re,v._mainLinePosition)}};k.allowAutoMargin=function(e){var t=k.list(e,"",true);for(var r=0;r<t.length;r++){var n=t[r];if(n.automargin){i.allowAutoMargin(e,n._name+".automargin")}if(n.rangeslider&&n.rangeslider.visible){i.allowAutoMargin(e,"rangeslider"+n._id)}}};k.swap=function(e,t){var r=K(e,t);for(var n=0;n<r.length;n++){te(e,r[n].x,r[n].y)}};function K(e,t){var r=[],n,a;for(n=0;n<t.length;n++){var i=[],o=e._fullData[t[n]].xaxis,l=e._fullData[t[n]].yaxis;if(!o||!l)continue;for(a=0;a<r.length;a++){if(r[a].x.indexOf(o)!==-1||r[a].y.indexOf(l)!==-1){i.push(a)}}if(!i.length){r.push({x:[o],y:[l]});continue}var s=r[i[0]],u;if(i.length>1){for(a=1;a<i.length;a++){u=r[i[a]];ee(s.x,u.x);ee(s.y,u.y)}}ee(s.x,[o]);ee(s.y,[l])}return r}function ee(e,t){for(var r=0;r<t.length;r++){if(e.indexOf(t[r])===-1)e.push(t[r])}}function te(e,t,r){var n,a,i=[],o=[],s=e.layout;for(n=0;n<t.length;n++)i.push(k.getFromId(e,t[n]));for(n=0;n<r.length;n++)o.push(k.getFromId(e,r[n]));var u=Object.keys(i[0]),c=["anchor","domain","overlaying","position","side","tickangle"],f=["linear","log"];for(n=0;n<u.length;n++){var d=u[n],p=i[0][d],v=o[0][d],h=true,g=false,y=false;if(d.charAt(0)==="_"||typeof p==="function"||c.indexOf(d)!==-1){continue}for(a=1;a<i.length&&h;a++){var m=i[a][d];if(d==="type"&&f.indexOf(p)!==-1&&f.indexOf(m)!==-1&&p!==m){g=true}else if(m!==p)h=false}for(a=1;a<o.length&&h;a++){var x=o[a][d];if(d==="type"&&f.indexOf(v)!==-1&&f.indexOf(x)!==-1&&v!==x){y=true}else if(o[a][d]!==v)h=false}if(h){if(g)s[i[0]._name].type="linear";if(y)s[o[0]._name].type="linear";re(s,d,i,o,e._fullLayout._dfltTitle)}}for(n=0;n<e._fullLayout.annotations.length;n++){var b=e._fullLayout.annotations[n];if(t.indexOf(b.xref)!==-1&&r.indexOf(b.yref)!==-1){l.swapAttrs(s.annotations[n],["?"])}}}function re(e,t,r,n,a){var i=l.nestedProperty,o=i(e[r[0]._name],t).get(),s=i(e[n[0]._name],t).get(),u;if(t==="title"){if(o===a.x){o=a.y}if(s===a.y){s=a.x}}for(u=0;u<r.length;u++){i(e,r[u]._name+"."+t).set(s)}for(u=0;u<n.length;u++){i(e,n[u]._name+"."+t).set(o)}}},{"../../components/color":44,"../../components/drawing":69,"../../components/titles":135,"../../constants/alignment":142,"../../constants/numerical":144,"../../lib":164,"../../lib/svg_text_utils":185,"../../plots/plots":249,"../../registry":258,"./autorange":208,"./axis_autotype":210,"./axis_ids":212,"./set_convert":227,d3:8,"fast-isnumeric":11}],210:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").BADNUM;t.exports=function e(t,r){if(l(t,r))return"date";if(s(t))return"category";if(o(t))return"linear";else return"-"};function o(e){if(!e)return false;for(var t=0;t<e.length;t++){if(n(e[t]))return true}return false}function l(e,t){var r=0,i=0,o=Math.max(1,(e.length-1)/1e3),l;for(var s=0;s<e.length;s+=o){l=e[Math.round(s)];if(a.isDateTime(l,t))r+=1;if(n(l))i+=1}return r>i*2}function s(e){var t=Math.max(1,(e.length-1)/1e3),r=0,n=0,o;for(var l=0;l<e.length;l+=t){o=e[Math.round(l)];if(a.cleanNumber(o)!==i)r++;else if(typeof o==="string"&&o!==""&&o!=="None")n++}return n>r*2}},{"../../constants/numerical":144,"../../lib":164,"fast-isnumeric":11}],211:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("./layout_attributes");var o=e("./tick_value_defaults");var l=e("./tick_mark_defaults");var s=e("./tick_label_defaults");var u=e("./category_order_defaults");var c=e("./line_grid_defaults");var f=e("./set_convert");t.exports=function e(t,r,d,p,v){var h=p.letter;var g=r._id;var y=p.font||{};var m=d("visible",!p.cheateronly);var x=r.type;if(x==="date"){var b=n.getComponentMethod("calendars","handleDefaults");b(t,r,"calendar",p.calendar)}f(r,v);var _=d("autorange",!r.isValidRange(t.range));r._rangesliderAutorange=false;if(_)d("rangemode");d("range");r.cleanRange();u(t,r,d,p);if(x!=="category"&&!p.noHover)d("hoverformat");if(!m)return r;var w=d("color");var k=w!==i.color.dflt?w:y.color;var M=((v._splomAxes||{})[h]||{})[g]||v._dfltTitle[h];d("title",M);a.coerceFont(d,"titlefont",{family:y.family,size:Math.round(y.size*1.2),color:k});o(t,r,d,x);s(t,r,d,x,p);l(t,r,d,p);c(t,r,d,{dfltColor:w,bgColor:p.bgColor,showGrid:p.showGrid,attributes:i});if(r.showline||r.ticks)d("mirror");if(p.automargin)d("automargin");return r}},{"../../lib":164,"../../registry":258,"./category_order_defaults":213,"./layout_attributes":221,"./line_grid_defaults":223,"./set_convert":227,"./tick_label_defaults":228,"./tick_mark_defaults":229,"./tick_value_defaults":230}],212:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./constants");r.id2name=function e(t){if(typeof t!=="string"||!t.match(a.AX_ID_PATTERN))return;var r=t.substr(1);if(r==="1")r="";return t.charAt(0)+"axis"+r};r.name2id=function e(t){if(!t.match(a.AX_NAME_PATTERN))return;var r=t.substr(5);if(r==="1")r="";return t.charAt(0)+r};r.cleanId=function e(t,r){if(!t.match(a.AX_ID_PATTERN))return;if(r&&t.charAt(0)!==r)return;var n=t.substr(1).replace(/^0+/,"");if(n==="1")n="";return t.charAt(0)+n};r.list=function(e,t,n){var a=e._fullLayout;if(!a)return[];var i=r.listIds(e,t);var o=new Array(i.length);var l;for(l=0;l<i.length;l++){var s=i[l];o[l]=a[s.charAt(0)+"axis"+s.substr(1)]}if(!n){var u=a._subplots.gl3d||[];for(l=0;l<u.length;l++){var c=a[u[l]];if(t)o.push(c[t+"axis"]);else o.push(c.xaxis,c.yaxis,c.zaxis)}}return o};r.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var n=r._subplots;if(t)return n[t+"axis"];return n.xaxis.concat(n.yaxis)};r.getFromId=function(e,t,n){var a=e._fullLayout;if(n==="x")t=t.replace(/y[0-9]*/,"");else if(n==="y")t=t.replace(/x[0-9]*/,"");return a[r.id2name(t)]};r.getFromTrace=function(e,t,a){var i=e._fullLayout;var o=null;if(n.traceIs(t,"gl3d")){var l=t.scene;if(l.substr(0,5)==="scene"){o=i[l][a+"axis"]}}else{o=r.getFromId(e,t[a+"axis"]||a)}return o};r.idSort=function(e,t){var r=e.charAt(0);var n=t.charAt(0);if(r!==n)return r>n?1:-1;return+(e.substr(1)||1)-+(t.substr(1)||1)}},{"../../registry":258,"./constants":214}],213:[function(e,t,r){"use strict";function n(e,t){var r=t.dataAttr||e._id.charAt(0);var n={};var a;var i,o;if(t.axData){a=t.axData}else{a=[];for(i=0;i<t.data.length;i++){var l=t.data[i];if(l[r+"axis"]===e._id){a.push(l)}}}for(i=0;i<a.length;i++){var s=a[i][r];for(o=0;o<s.length;o++){var u=s[o];if(u!==null&&u!==undefined){n[u]=1}}}return Object.keys(n)}t.exports=function e(t,r,a,i){if(r.type!=="category")return;var o=t.categoryarray;var l=Array.isArray(o)&&o.length>0;var s;if(l)s="array";var u=a("categoryorder",s);var c;if(u==="array"){c=a("categoryarray")}if(!l&&u==="array"){u=r.categoryorder="trace"}if(u==="trace"){r._initialCategories=[]}else if(u==="array"){r._initialCategories=c.slice()}else{c=n(r,i).sort();if(u==="category ascending"){r._initialCategories=c}else if(u==="category descending"){r._initialCategories=c.reverse()}}}},{}],214:[function(e,t,r){"use strict";var n=e("../../lib/regex").counter;t.exports={idRegex:{x:n("x"),y:n("y")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["heatmaplayer","contourcarpetlayer","contourlayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":179}],215:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./axis_ids").id2name;t.exports=function e(t,r,a,l,s){var u=s._axisConstraintGroups;var c=r._id;var f=c.charAt(0);if(r.fixedrange)return;a("constrain");n.coerce(t,r,{constraintoward:{valType:"enumerated",values:f==="x"?["left","center","right"]:["bottom","middle","top"],dflt:f==="x"?"center":"middle"}},"constraintoward");if(!t.scaleanchor)return;var d=i(u,c,l,s);var p=n.coerce(t,r,{scaleanchor:{valType:"enumerated",values:d.linkableAxes}},"scaleanchor");if(p){var v=a("scaleratio");if(!v)v=r.scaleratio=1;o(u,d.thisGroup,c,p,v)}else if(l.indexOf(t.scaleanchor)!==-1){n.warn("ignored "+r._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop '+"and possibly inconsistent scaleratios, or because the target"+"axis has fixed range.")}};function i(e,t,r,n){var i=n[a(t)].type;var o,l,s,u;var c=[];for(l=0;l<r.length;l++){s=r[l];if(s===t)continue;u=n[a(s)];if(u.type===i&&!u.fixedrange)c.push(s)}for(o=0;o<e.length;o++){if(e[o][t]){var f=e[o];var d=[];for(l=0;l<c.length;l++){s=c[l];if(!f[s])d.push(s)}return{linkableAxes:d,thisGroup:f}}}return{linkableAxes:c,thisGroup:null}}function o(e,t,r,n,a){var i,o,l,s,u;if(t===null){t={};t[r]=1;u=e.length;e.push(t)}else{u=e.indexOf(t)}var c=Object.keys(t);for(i=0;i<e.length;i++){l=e[i];if(i!==u&&l[n]){var f=l[n];for(o=0;o<c.length;o++){s=c[o];l[s]=f*a*t[s]}e.splice(u,1);return}}if(a!==1){for(o=0;o<c.length;o++){t[c[o]]*=a}}t[n]=1}},{"../../lib":164,"./axis_ids":212}],216:[function(e,t,r){"use strict";var n=e("./axis_ids").id2name;var a=e("./scale_zoom");var i=e("./autorange").makePadFn;var o=e("../../constants/numerical").ALMOST_EQUAL;var l=e("../../constants/alignment").FROM_BL;r.enforce=function e(t){var r=t._fullLayout;var l=r._axisConstraintGroups||[];var u,c,f,d,p,v,h;for(u=0;u<l.length;u++){var g=l[u];var y=Object.keys(g);var m=Infinity;var x=0;var b=Infinity;var _={};var w={};var k=false;for(c=0;c<y.length;c++){f=y[c];w[f]=d=r[n(f)];if(d._inputDomain)d.domain=d._inputDomain.slice();else d._inputDomain=d.domain.slice();if(!d._inputRange)d._inputRange=d.range.slice();d.setScale();_[f]=p=Math.abs(d._m)/g[f];m=Math.min(m,p);if(d.constrain==="domain"||!d._constraintShrinkable){b=Math.min(b,p)}delete d._constraintShrinkable;x=Math.max(x,p);if(d.constrain==="domain")k=true}if(m>o*x&&!k)continue;for(c=0;c<y.length;c++){f=y[c];p=_[f];d=w[f];v=d.constrain;if(p!==b||v==="domain"){h=p/b;if(v==="range"){a(d,h)}else{var M=d._inputDomain;var A=(d.domain[1]-d.domain[0])/(M[1]-M[0]);var T=(d.r2l(d.range[1])-d.r2l(d.range[0]))/(d.r2l(d._inputRange[1])-d.r2l(d._inputRange[0]));h/=A;if(h*T<1){d.domain=d._input.domain=M.slice();a(d,h);continue}if(T<1){d.range=d._input.range=d._inputRange.slice();h*=T}if(d.autorange&&d._min.length&&d._max.length){var L=d.r2l(d.range[0]);var S=d.r2l(d.range[1]);var C=(L+S)/2;var P=C;var z=C;var O=Math.abs(S-C);var D=C-O*h*1.0001;var E=C+O*h*1.0001;var R=i(d);s(d,h);d.setScale();var I=Math.abs(d._m);var N;var F;for(F=0;F<d._min.length;F++){N=d._min[F].val-R(d._min[F])/I;if(N>D&&N<P){P=N}}for(F=0;F<d._max.length;F++){N=d._max[F].val+R(d._max[F])/I;if(N<E&&N>z){z=N}}var j=(z-P)/(2*O);h/=j;P=d.l2r(P);z=d.l2r(z);d.range=d._input.range=L<S?[P,z]:[z,P]}s(d,h)}}}}};r.clean=function e(t,r){if(r._inputDomain){var n=false;var a=r._id;var i=t._fullLayout._axisConstraintGroups;for(var o=0;o<i.length;o++){if(i[o][a]){n=true;break}}if(!n||r.constrain!=="domain"){r._input.domain=r.domain=r._inputDomain;delete r._inputDomain}}};function s(e,t){var r=e._inputDomain;var n=l[e.constraintoward];var a=r[0]+(r[1]-r[0])*n;e.domain=e._input.domain=[a+(r[0]-a)/t,a+(r[1]-a)/t]}},{"../../constants/alignment":142,"../../constants/numerical":144,"./autorange":208,"./axis_ids":212,"./scale_zoom":225}],217:[function(e,t,r){"use strict";var n=e("d3");var a=e("tinycolor2");var i=e("has-passive-events");var o=e("../../registry");var l=e("../../lib");var s=e("../../lib/svg_text_utils");var u=e("../../lib/clear_gl_canvases");var c=e("../../components/color");var f=e("../../components/drawing");var d=e("../../components/fx");var p=e("../../lib/setcursor");var v=e("../../components/dragelement");var h=e("../../constants/alignment").FROM_TL;var g=e("../plots");var y=e("./axes").doTicksSingle;var m=e("./axis_ids").getFromId;var x=e("./select").prepSelect;var b=e("./select").clearSelect;var _=e("./scale_zoom");var w=e("./constants");var k=w.MINDRAG;var M=w.MINZOOM;var A=true;function T(e,t,r,i,c,p,A,T){var L=e._fullLayout._zoomlayer;var F=A+T==="nsew";var X=(A+T).length===1;var W,J;var Q,$;var K,ee;var te,re;var ne,ae;var ie;var oe,le;var se;var ue;var ce,fe;var de,pe,ve,he;function ge(){W=t.xaxis;J=t.yaxis;ne=W._length;ae=J._length;te=W._offset;re=J._offset;Q={};Q[W._id]=W;$={};$[J._id]=J;if(A&&T){var r=t.overlays;for(var n=0;n<r.length;n++){var a=r[n].xaxis;Q[a._id]=a;var i=r[n].yaxis;$[i._id]=i}}K=Z(Q);ee=Z($);oe=C(K,T);le=C(ee,A);se=!le&&!oe;ie=G(e,Q,$);ue=ie.isSubplotConstrained;ce=T||ue;fe=A||ue;var o=e._fullLayout;de=o._has("scattergl");pe=o._hasOnlyLargeSploms;ve=pe||o._has("splom");he=o._has("svg")}ge();var ye=E(le+oe,e._fullLayout.dragmode,F);var me=S(t,A+T+"drag",ye,r,i,c,p);if(se&&!F){me.onmousedown=null;me.style.pointerEvents="none";return me}var xe={element:me,gd:e,plotinfo:t};xe.prepFn=function(t,r,n){var a=e._fullLayout.dragmode;ge();if(!se){if(F){if(t.shiftKey){if(a==="pan")a="zoom";else if(!q(a))a="pan"}else if(t.ctrlKey){a="pan"}}else a="pan"}if(a==="lasso")xe.minDrag=1;else xe.minDrag=undefined;if(q(a)){xe.xaxes=K;xe.yaxes=ee;x(t,r,n,xe,a)}else{xe.clickFn=_e;be();if(!se){if(a==="zoom"){xe.moveFn=Ee;xe.doneFn=Re;xe.minDrag=1;De(t,r,n)}else if(a==="pan"){xe.moveFn=qe;xe.doneFn=Ve}}}};function be(){xe.plotinfo.selection=false;b(L)}function _e(r,a){j(e);if(r===2&&!X)Ue();if(F){d.click(e,a,t.id)}else if(r===1&&X){var i=A?J:W,l=A==="s"||T==="w"?0:1,u=i._name+".range["+l+"]",c=P(i,l),f="left",p="middle";if(i.fixedrange)return;if(A){p=A==="n"?"top":"bottom";if(i.side==="right")f="right"}else if(T==="e")f="right";if(e._context.showAxisRangeEntryBoxes){n.select(me).call(s.makeEditable,{gd:e,immediate:true,background:e._fullLayout.paper_bgcolor,text:String(c),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:f,verticalAlign:p}).on("edit",function(t){var r=i.d2r(t);if(r!==undefined){o.call("relayout",e,u,r)}})}}}v.init(xe);var we,ke,Me,Ae,Te,Le,Se,Ce,Pe;var ze;var Oe={};function De(t,r,n){var i=me.getBoundingClientRect();we=r-i.left;ke=n-i.top;Me={l:we,r:we,w:0,t:ke,b:ke,h:0};Ae=e._hmpixcount?e._hmlumcount/e._hmpixcount:a(e._fullLayout.plot_bgcolor).getLuminance();Te="M0,0H"+ne+"V"+ae+"H0V0";Le=false;Se="xy";ze=false;Ce=R(L,Ae,te,re,Te);Pe=I(L,te,re)}function Ee(t,r){if(e._transitioningWithDuration){return false}var n=Math.max(0,Math.min(ne,t+we)),a=Math.max(0,Math.min(ae,r+ke)),i=Math.abs(n-we),o=Math.abs(a-ke);Me.l=Math.min(we,n);Me.r=Math.max(we,n);Me.t=Math.min(ke,a);Me.b=Math.max(ke,a);function l(){Se="";Me.r=Me.l;Me.t=Me.b;Pe.attr("d","M0,0Z")}if(ue){if(i>M||o>M){Se="xy";if(i/ne>o/ae){o=i*ae/ne;if(ke>a)Me.t=ke-o;else Me.b=ke+o}else{i=o*ne/ae;if(we>n)Me.l=we-i;else Me.r=we+i}Pe.attr("d",V(Me))}else{l()}}else if(!le||o<Math.min(Math.max(i*.6,k),M)){if(i<k||!oe){l()}else{Me.t=0;Me.b=ae;Se="x";Pe.attr("d",H(Me,ke))}}else if(!oe||i<Math.min(o*.6,M)){Me.l=0;Me.r=ne;Se="y";Pe.attr("d",U(Me,we))}else{Se="xy";Pe.attr("d",V(Me))}Me.w=Me.r-Me.l;Me.h=Me.b-Me.t;if(Se)ze=true;e._dragged=ze;N(Ce,Pe,Me,Te,Le,Ae);Le=true}function Re(){if(Math.min(Me.h,Me.w)<k*2){return j(e)}if(Se==="xy"||Se==="x"){z(K,Me.l/ne,Me.r/ne,Oe,ie.xaxes)}if(Se==="xy"||Se==="y"){z(ee,(ae-Me.b)/ae,(ae-Me.t)/ae,Oe,ie.yaxes)}j(e);Ve();B(e)}var Ie=[0,0,ne,ae];var Ne=null;var Fe=w.REDRAWDELAY;var je=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function Be(t){if(!e._context.scrollZoom&&!e._fullLayout._enablescrollzoom){return}be();if(e._transitioningWithDuration){t.preventDefault();t.stopPropagation();return}var r=e.querySelector(".plotly");ge();if(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10){return}clearTimeout(Ne);var n=-t.deltaY;if(!isFinite(n))n=t.wheelDelta/10;if(!isFinite(n)){l.log("Did not find wheel motion attributes: ",t);return}var a=Math.exp(-Math.min(Math.max(n,-20),20)/200),i=je.draglayer.select(".nsewdrag").node().getBoundingClientRect(),o=(t.clientX-i.left)/i.width,s=(i.bottom-t.clientY)/i.height,u;function c(e,t,r){if(e.fixedrange)return;var n=l.simpleMap(e.range,e.r2l),a=n[0]+(n[1]-n[0])*t;function i(t){return e.l2r(a+(t-a)*r)}e.range=n.map(i)}if(ce){if(!T)o=.5;for(u=0;u<K.length;u++){c(K[u],o,a)}Ie[2]*=a;Ie[0]+=Ie[2]*o*(1/a-1)}if(fe){if(!A)s=.5;for(u=0;u<ee.length;u++){c(ee[u],s,a)}Ie[3]*=a;Ie[1]+=Ie[3]*(1-s)*(1/a-1)}Ze(Ie);He(A,T);Ne=setTimeout(function(){Ie=[0,0,ne,ae];Ve()},Fe);t.preventDefault();return}if(A.length*T.length!==1){Y(me,Be)}function qe(t,r){if(e._transitioningWithDuration){return}if(oe==="ew"||le==="ns"){if(oe)O(K,t);if(le)O(ee,r);Ze([oe?-t:0,le?-r:0,ne,ae]);He(le,oe);return}function n(e,t,r){var n=1-t,a,i;for(var o=0;o<e.length;o++){var l=e[o];if(l.fixedrange)continue;a=l;i=l._rl[n]+(l._rl[t]-l._rl[n])/D(r/l._length);var s=l.l2r(i);if(s!==false&&s!==undefined)l.range[t]=s}return a._length*(a._rl[t]-i)/(a._rl[t]-a._rl[n])}if(ue&&oe&&le){var a=oe==="w"===(le==="n")?1:-1;var i=(t/ne+a*r/ae)/2;t=i*ne;r=a*i*ae}if(oe==="w")t=n(K,0,t);else if(oe==="e")t=n(K,1,-t);else if(!oe)t=0;if(le==="n")r=n(ee,1,r);else if(le==="s")r=n(ee,0,-r);else if(!le)r=0;var o=oe==="w"?t:0;var l=le==="n"?r:0;if(ue){var s;if(!oe&&le.length===1){for(s=0;s<K.length;s++){K[s].range=K[s]._r.slice();_(K[s],1-r/ae)}t=r*ne/ae;o=t/2}if(!le&&oe.length===1){for(s=0;s<ee.length;s++){ee[s].range=ee[s]._r.slice();_(ee[s],1-t/ne)}r=t*ae/ne;l=r/2}}Ze([o,l,ne-t,ae-r]);He(le,oe)}function He(t,r){var n=[],a;function i(e){for(a=0;a<e.length;a++){if(!e[a].fixedrange)n.push(e[a]._id)}}if(ce){i(K);i(ie.xaxes)}if(fe){i(ee);i(ie.yaxes)}Oe={};for(a=0;a<n.length;a++){var l=n[a];y(e,l,true);var s=m(e,l);Oe[s._name+".range[0]"]=s.range[0];Oe[s._name+".range[1]"]=s.range[1]}function u(i,o,l){for(a=0;a<i.length;a++){var s=i[a];if(r&&n.indexOf(s.xref)!==-1||t&&n.indexOf(s.yref)!==-1){o(e,a);if(l)return}}}u(e._fullLayout.annotations||[],o.getComponentMethod("annotations","drawOne"));u(e._fullLayout.shapes||[],o.getComponentMethod("shapes","drawOne"));u(e._fullLayout.images||[],o.getComponentMethod("images","draw"),true)}function Ue(){if(e._transitioningWithDuration)return;var t=e._context.doubleClick,r=(oe?K:[]).concat(le?ee:[]),n={};var a,i,l;if(t==="reset+autosize"){t="autosize";for(i=0;i<r.length;i++){a=r[i];if(a._rangeInitial&&(a.range[0]!==a._rangeInitial[0]||a.range[1]!==a._rangeInitial[1])||!a._rangeInitial&&!a.autorange){t="reset";break}}}if(t==="autosize"){for(i=0;i<r.length;i++){a=r[i];if(!a.fixedrange)n[a._name+".autorange"]=true}}else if(t==="reset"){if(oe||ue)r=r.concat(ie.xaxes);if(le&&!ue)r=r.concat(ie.yaxes);if(ue){if(!oe)r=r.concat(K);else if(!le)r=r.concat(ee)}for(i=0;i<r.length;i++){a=r[i];if(!a._rangeInitial){n[a._name+".autorange"]=true}else{l=a._rangeInitial;n[a._name+".range[0]"]=l[0];n[a._name+".range[1]"]=l[1]}}}e.emit("plotly_doubleclick",null);o.call("relayout",e,n)}function Ve(){Ze([0,0,ne,ae]);l.syncOrAsync([g.previousPromises,function(){o.call("relayout",e,Oe)}],e)}var Ge,Ye;function Ze(t){var r=e._fullLayout;var n=r._plots;var a=r._subplots.cartesian;var i,s,c,d;if(ve||de){u(e)}if(ve){o.subplotsRegistry.splom.drag(e);if(pe)return}if(de){for(i=0;i<a.length;i++){s=n[a[i]];c=s.xaxis;d=s.yaxis;var p=s._scene;if(p){var v=l.simpleMap(c.range,c.r2l);var h=l.simpleMap(d.range,d.r2l);p.update({range:[v[0],h[0],v[1],h[1]]})}}}if(he){var g=t[2]/W._length;var y=t[3]/J._length;for(i=0;i<a.length;i++){s=n[a[i]];c=s.xaxis;d=s.yaxis;var m=ce&&!c.fixedrange&&Q[c._id];var x=fe&&!d.fixedrange&&$[d._id];var b,_;var w,k;if(m){b=g;w=T?t[0]:Je(c,b)}else{b=Xe(c,g,y);w=We(c,b)}if(x){_=y;k=A?t[1]:Je(d,_)}else{_=Xe(d,g,y);k=We(d,_)}if(!b&&!_){continue}if(!b)b=1;if(!_)_=1;var M=c._offset-w/b;var L=d._offset-k/_;s.clipRect.call(f.setTranslate,w,k).call(f.setScale,b,_);s.plot.call(f.setTranslate,M,L).call(f.setScale,1/b,1/_);if(b!==Ge||_!==Ye){f.setPointGroupScale(s.zoomScalePts,b,_);f.setTextPointsScale(s.zoomScaleTxt,b,_)}f.hideOutsideRangePoints(s.clipOnAxisFalseTraces,s);Ge=b;Ye=_}}}function Xe(e,t,r){if(e.fixedrange)return 0;if(ce&&ie.xaHash[e._id]){return t}if(fe&&(ue?ie.xaHash:ie.yaHash)[e._id]){return r}return 0}function We(e,t){if(t){e.range=e._r.slice();_(e,t);return Je(e,t)}return 0}function Je(e,t){return e._length*(1-t)*h[e.constraintoward||"middle"]}return me}function L(e,t,r,n){var a=l.ensureSingle(e.draglayer,t,r,function(t){t.classed("drag",true).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});a.call(p,n);return a.node()}function S(e,t,r,a,i,o,l){var s=L(e,"rect",t,r);n.select(s).call(f.setRect,a,i,o,l);return s}function C(e,t){for(var r=0;r<e.length;r++){if(!e[r].fixedrange)return t}return""}function P(e,t){var r=e.range[t],a=Math.abs(r-e.range[1-t]),i;if(e.type==="date"){return r}else if(e.type==="log"){i=Math.ceil(Math.max(0,-Math.log(a)/Math.LN10))+3;return n.format("."+i+"g")(Math.pow(10,r))}else{i=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(a)/Math.LN10)+4;return n.format("."+String(i)+"g")(r)}}function z(e,t,r,n,a){var i,o,l,s;for(i=0;i<e.length;i++){o=e[i];if(o.fixedrange)continue;l=o._rl[0];s=o._rl[1]-l;o.range=[o.l2r(l+s*t),o.l2r(l+s*r)];n[o._name+".range[0]"]=o.range[0];n[o._name+".range[1]"]=o.range[1]}if(a&&a.length){var u=(t+(1-r))/2;z(a,u,1-u,n)}}function O(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n.fixedrange){n.range=[n.l2r(n._rl[0]-t/n._m),n.l2r(n._rl[1]-t/n._m)]}}}function D(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function E(e,t,r){if(!e)return"pointer";if(e==="nsew"){if(r)return"";if(t==="pan")return"move";return"crosshair"}return e.toLowerCase()+"-resize"}function R(e,t,r,n,a){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",a+"Z")}function I(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+r+")").attr("d","M0,0Z")}function N(e,t,r,n,a,i){e.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z");F(e,t,a,i)}function F(e,t,r,n){if(!r){e.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200);t.transition().style("opacity",1).duration(200)}}function j(e){n.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function B(e){if(A&&e.data&&e._context.showTips){l.notifier(l._(e,"Double-click to zoom back out"),"long");A=false}}function q(e){return e==="lasso"||e==="select"}function H(e,t){return"M"+(e.l-.5)+","+(t-M-.5)+"h-3v"+(2*M+1)+"h3ZM"+(e.r+.5)+","+(t-M-.5)+"h3v"+(2*M+1)+"h-3Z"}function U(e,t){return"M"+(t-M-.5)+","+(e.t-.5)+"v-3h"+(2*M+1)+"v3ZM"+(t-M-.5)+","+(e.b+.5)+"v3h"+(2*M+1)+"v-3Z"}function V(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,M)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function G(e,t,r){var n=e._fullLayout._axisConstraintGroups;var a=false;var i={};var o={};var s,u,c,f;for(var d=0;d<n.length;d++){var p=n[d];for(s in t){if(p[s]){for(c in p){if(!(c.charAt(0)==="x"?t:r)[c]){i[c]=1}}for(u in r){if(p[u])a=true}}}for(u in r){if(p[u]){for(f in p){if(!(f.charAt(0)==="x"?t:r)[f]){o[f]=1}}}}}if(a){l.extendFlat(i,o);o={}}var v={};var h=[];for(c in i){var g=m(e,c);h.push(g);v[g._id]=g}var y={};var x=[];for(f in o){var b=m(e,f);x.push(b);y[b._id]=b}return{xaHash:v,yaHash:y,xaxes:h,yaxes:x,isSubplotConstrained:a}}function Y(e,t){if(!i){if(e.onwheel!==undefined)e.onwheel=t;else if(e.onmousewheel!==undefined)e.onmousewheel=t}else{var r=e.onwheel!==undefined?"wheel":"mousewheel";if(e._onwheel){e.removeEventListener(r,e._onwheel)}e._onwheel=t;e.addEventListener(r,t,{passive:false})}}function Z(e){var t=[];for(var r in e)t.push(e[r]);return t}t.exports={makeDragBox:T,makeDragger:L,makeRectDragger:S,makeZoombox:R,makeCorners:I,updateZoombox:N,xyCorners:V,transitionZoombox:F,removeZoombox:j,showDoubleClickNotifier:B,attachWheelEventHandler:Y}},{"../../components/color":44,"../../components/dragelement":66,"../../components/drawing":69,"../../components/fx":86,"../../constants/alignment":142,"../../lib":164,"../../lib/clear_gl_canvases":151,"../../lib/setcursor":183,"../../lib/svg_text_utils":185,"../../registry":258,"../plots":249,"./axes":209,"./axis_ids":212,"./constants":214,"./scale_zoom":225,"./select":226,d3:8,"has-passive-events":14,tinycolor2:26}],218:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/fx");var i=e("../../components/dragelement");var o=e("../../lib/setcursor");var l=e("./dragbox").makeDragBox;var s=e("./constants").DRAGGERSIZE;r.initInteractions=function e(t){var o=t._fullLayout;if(t._context.staticPlot){n.select(t).selectAll(".drag").remove();return}if(!o._has("cartesian")&&!o._has("gl2d")&&!o._has("splom"))return;var u=Object.keys(o._plots||{}).sort(function(e,t){if((o._plots[e].mainplot&&true)===(o._plots[t].mainplot&&true)){var r=e.split("y"),n=t.split("y");return r[0]===n[0]?Number(r[1]||1)-Number(n[1]||1):Number(r[0]||1)-Number(n[0]||1)}return o._plots[e].mainplot?1:-1});u.forEach(function(e){var r=o._plots[e];var n=r.xaxis;var u=r.yaxis;if(!r.mainplot){var c=l(t,r,n._offset,u._offset,n._length,u._length,"ns","ew");c.onmousemove=function(r){t._fullLayout._rehover=function(){if(t._fullLayout._hoversubplot===e){a.hover(t,r,e)}};a.hover(t,r,e);t._fullLayout._lasthover=c;t._fullLayout._hoversubplot=e};c.onmouseout=function(e){if(t._dragging)return;t._fullLayout._hoversubplot=null;i.unhover(t,e)};if(t._context.showAxisDragHandles){l(t,r,n._offset-s,u._offset-s,s,s,"n","w");l(t,r,n._offset+n._length,u._offset-s,s,s,"n","e");l(t,r,n._offset-s,u._offset+u._length,s,s,"s","w");l(t,r,n._offset+n._length,u._offset+u._length,s,s,"s","e")}}if(t._context.showAxisDragHandles){if(e===n._mainSubplot){var f=n._mainLinePosition;if(n.side==="top")f-=s;l(t,r,n._offset+n._length*.1,f,n._length*.8,s,"","ew");l(t,r,n._offset,f,n._length*.1,s,"","w");l(t,r,n._offset+n._length*.9,f,n._length*.1,s,"","e")}if(e===u._mainSubplot){var d=u._mainLinePosition;if(u.side!=="right")d-=s;l(t,r,d,u._offset+u._length*.1,s,u._length*.8,"ns","");l(t,r,d,u._offset+u._length*.9,s,u._length*.1,"s","");l(t,r,d,u._offset,s,u._length*.1,"n","")}}});var c=o._hoverlayer.node();c.onmousemove=function(e){e.target=t._fullLayout._lasthover;a.hover(t,e,o._hoversubplot)};c.onclick=function(e){e.target=t._fullLayout._lasthover;a.click(t,e)};c.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)};r.updateFx(o)};r.updateFx=function(e){var t=e.dragmode==="pan"?"move":"crosshair";o(e._draggers,t)}},{"../../components/dragelement":66,"../../components/fx":86,"../../lib/setcursor":183,"./constants":214,"./dragbox":217,d3:8}],219:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");t.exports=function e(t){return function e(r,i){var o=r[t];if(!Array.isArray(o))return;var l=n.subplotsRegistry.cartesian;var s=l.idRegex;var u=i._subplots;var c=u.xaxis;var f=u.yaxis;var d=u.cartesian;var p=i._has("cartesian")||i._has("gl2d");for(var v=0;v<o.length;v++){var h=o[v];if(!a.isPlainObject(h))continue;var g=h.xref;var y=h.yref;var m=s.x.test(g);var x=s.y.test(y);if(m||x){if(!p)a.pushUnique(i._basePlotModules,l);var b=false;if(m&&c.indexOf(g)===-1){c.push(g);b=true}if(x&&f.indexOf(y)===-1){f.push(y);b=true}if(b&&m&&x){d.push(g+y)}}}}}},{"../../lib":164,"../../registry":258}],220:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../plots");var l=e("../../components/drawing");var s=e("../get_data").getModuleCalcData;var u=e("./axis_ids");var c=e("./constants");var f=e("../../constants/xmlns_namespaces");var d=i.ensureSingle;function p(e,t,r){return i.ensureSingle(e,t,r,function(e){e.datum(r)})}r.name="cartesian";r.attr=["xaxis","yaxis"];r.idRoot=["x","y"];r.idRegex=c.idRegex;r.attrRegex=c.attrRegex;r.attributes=e("./attributes");r.layoutAttributes=e("./layout_attributes");r.supplyLayoutDefaults=e("./layout_defaults");r.transitionAxes=e("./transition_axes");r.finalizeSubplots=function(e,t){var r=t._subplots;var n=r.xaxis;var a=r.yaxis;var o=r.cartesian;var l=o.concat(r.gl2d||[]);var s={};var f={};var d,p,v;for(d=0;d<l.length;d++){var h=l[d].split("y");s[h[0]]=1;f["y"+h[1]]=1}for(d=0;d<n.length;d++){p=n[d];if(!s[p]){v=(e[u.id2name(p)]||{}).anchor;if(!c.idRegex.y.test(v))v="y";o.push(p+v);l.push(p+v);if(!f[v]){f[v]=1;i.pushUnique(a,v)}}}for(d=0;d<a.length;d++){v=a[d];if(!f[v]){p=(e[u.id2name(v)]||{}).anchor;if(!c.idRegex.x.test(p))p="x";o.push(p+v);l.push(p+v);if(!s[p]){s[p]=1;i.pushUnique(n,p)}}}if(!l.length){p="";v="";for(var g in e){if(c.attrRegex.test(g)){var y=g.charAt(0);if(y==="x"){if(!p||+g.substr(5)<+p.substr(5)){p=g}}else if(!v||+g.substr(5)<+v.substr(5)){v=g}}}p=p?u.name2id(p):"x";v=v?u.name2id(v):"y";n.push(p);a.push(v);o.push(p+v)}};r.plot=function(e,t,r,n){var a=e._fullLayout;var i=a._subplots.cartesian;var o=e.calcdata;var l;if(!Array.isArray(t)){t=[];for(l=0;l<o.length;l++)t.push(l)}for(l=0;l<i.length;l++){var s=i[l];var u=a._plots[s];var c=[];var f;for(var d=0;d<o.length;d++){var p=o[d];var h=p[0].trace;if(h.xaxis+h.yaxis===s){if(t.indexOf(h.index)!==-1||h.carpet){if(f&&f[0].trace.xaxis+f[0].trace.yaxis===s&&["tonextx","tonexty","tonext"].indexOf(h.fill)!==-1&&c.indexOf(f)===-1){c.push(f)}c.push(p)}f=p}}v(e,u,c,r,n)}};function v(e,t,r,i,o){var u=c.traceLayerClasses;var f=e._fullLayout;var d=f._modules;var p,v,h;var g=[];var y=[];for(var m=0;m<d.length;m++){p=d[m];var x=p.name;var b=a.modules[x].categories;if(b.svg){var _=p.layerName||x+"layer";var w=p.plot;v=s(r,w);h=v[0];r=v[1];if(h.length){g.push({i:u.indexOf(_),className:_,plotMethod:w,cdModule:h})}if(b.zoomScale){y.push("."+_)}}}g.sort(function(e,t){return e.i-t.i});var k=t.plot.selectAll("g.mlayer").data(g,function(e){return e.className});k.enter().append("g").attr("class",function(e){return e.className}).classed("mlayer",true);k.exit().remove();k.order();k.each(function(r){var a=n.select(this);var s=r.className;r.plotMethod(e,t,r.cdModule,a,i,o);if(s!=="scatterlayer"&&s!=="barlayer"){l.setClipUrl(a,t.layerClipId)}});if(f._has("scattergl")){p=a.getModule("scattergl");h=s(r,p)[0];p.plot(e,t,h)}if(!e._context.staticPlot){if(t._hasClipOnAxisFalse){t.clipOnAxisFalseTraces=t.plot.selectAll(".scatterlayer, .barlayer").selectAll(".trace")}if(y.length){var M=t.plot.selectAll(y.join(",")).selectAll(".trace");t.zoomScalePts=M.selectAll("path.point");t.zoomScaleTxt=M.selectAll(".textpoint")}}}r.clean=function(e,t,r,n){var a=n._plots||{};var i=t._plots||{};var o=n._subplots||{};var l;var s,c;if(n._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms){for(c in a){l=a[c];if(l.plotgroup)l.plotgroup.remove()}}var f=n._has&&n._has("gl");var d=t._has&&t._has("gl");if(f&&!d){for(c in a){l=a[c];if(l._scene)l._scene.destroy()}}if(o.xaxis&&o.yaxis){var p=u.listIds({_fullLayout:n});for(s=0;s<p.length;s++){var v=p[s];if(!t[u.id2name(v)]){n._infolayer.selectAll(".g-"+v+"title").remove()}}}var h=n._has&&n._has("cartesian");var g=t._has&&t._has("cartesian");if(h&&!g){y(n._cartesianlayer.selectAll(".subplot"),n);n._defs.selectAll(".axesclip").remove();delete n._axisConstraintGroups}else if(o.cartesian){for(s=0;s<o.cartesian.length;s++){var x=o.cartesian[s];if(!i[x]){var b="."+x+",."+x+"-x,."+x+"-y";n._cartesianlayer.selectAll(b).remove();m(x,n)}}}};r.drawFramework=function(e){var t=e._fullLayout;var r=h(e);var a=t._cartesianlayer.selectAll(".subplot").data(r,i.identity);a.enter().append("g").attr("class",function(e){return"subplot "+e});a.order();a.exit().call(y,t);a.each(function(r){var a=t._plots[r];a.plotgroup=n.select(this);a.overlays=[];g(e,a);if(a.mainplot){var i=t._plots[a.mainplot];i.overlays.push(a)}a.draglayer=d(t._draggers,"g",r)})};r.rangePlot=function(e,t,r){g(e,t);v(e,t,r);o.style(e)};function h(e){var t=e._fullLayout;var r=[];var n=[];for(var a in t._plots){var i=t._plots[a];var o=i.xaxis._mainAxis;var l=i.yaxis._mainAxis;var s=o._id+l._id;if(s!==a&&t._plots[s]){i.mainplot=s;i.mainplotinfo=t._plots[s];n.push(a)}else{r.push(a);i.mainplot=undefined}}r=r.concat(n);return r}function g(e,t){var r=t.plotgroup;var n=t.id;var a=c.layerValue2layerClass[t.xaxis.layer];var i=c.layerValue2layerClass[t.yaxis.layer];var o=e._fullLayout._hasOnlyLargeSploms;if(!t.mainplot){if(o){t.plot=d(r,"g","plot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.xaxislayer=d(r,"g","xaxislayer-above");t.yaxislayer=d(r,"g","yaxislayer-above")}else{var l=d(r,"g","layer-subplot");t.shapelayer=d(l,"g","shapelayer");t.imagelayer=d(l,"g","imagelayer");t.gridlayer=d(r,"g","gridlayer");t.zerolinelayer=d(r,"g","zerolinelayer");d(r,"path","xlines-below");d(r,"path","ylines-below");t.overlinesBelow=d(r,"g","overlines-below");d(r,"g","xaxislayer-below");d(r,"g","yaxislayer-below");t.overaxesBelow=d(r,"g","overaxes-below");t.plot=d(r,"g","plot");t.overplot=d(r,"g","overplot");t.xlines=d(r,"path","xlines-above");t.ylines=d(r,"path","ylines-above");t.overlinesAbove=d(r,"g","overlines-above");d(r,"g","xaxislayer-above");d(r,"g","yaxislayer-above");t.overaxesAbove=d(r,"g","overaxes-above");t.xlines=r.select(".xlines-"+a);t.ylines=r.select(".ylines-"+i);t.xaxislayer=r.select(".xaxislayer-"+a);t.yaxislayer=r.select(".yaxislayer-"+i)}}else{var s=t.mainplotinfo;var f=s.plotgroup;var v=n+"-x";var h=n+"-y";t.gridlayer=s.gridlayer;t.zerolinelayer=s.zerolinelayer;d(s.overlinesBelow,"path",v);d(s.overlinesBelow,"path",h);d(s.overaxesBelow,"g",v);d(s.overaxesBelow,"g",h);t.plot=d(s.overplot,"g",n);d(s.overlinesAbove,"path",v);d(s.overlinesAbove,"path",h);d(s.overaxesAbove,"g",v);d(s.overaxesAbove,"g",h);t.xlines=f.select(".overlines-"+a).select("."+v);t.ylines=f.select(".overlines-"+i).select("."+h);t.xaxislayer=f.select(".overaxes-"+a).select("."+v);t.yaxislayer=f.select(".overaxes-"+i).select("."+h)}if(!o){p(t.gridlayer,"g",t.xaxis._id);p(t.gridlayer,"g",t.yaxis._id);t.gridlayer.selectAll("g").sort(u.idSort)}t.xlines.style("fill","none").classed("crisp",true);t.ylines.style("fill","none").classed("crisp",true)}function y(e,t){if(!e)return;var r={};e.each(function(e){var a=n.select(this);a.remove();m(e,t);r[e]=true});for(var a in t._plots){var i=t._plots[a];var o=i.overlays||[];for(var l=0;l<o.length;l++){var s=o[l];if(r[s.id]){s.plot.selectAll(".trace").remove()}}}}function m(e,t){t._draggers.selectAll("g."+e).remove();t._defs.select("#clip"+t._uid+e+"plot").remove()}r.toSVG=function(e){var t=e._fullLayout._glimages;var r=n.select(e).selectAll(".svg-container");var a=r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function i(){var e=this;var r=e.toDataURL("image/png");var n=t.append("svg:image");n.attr({xmlns:f.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}a.each(i)};r.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":69,"../../constants/xmlns_namespaces":146,"../../lib":164,"../../registry":258,"../get_data":245,"../plots":249,"./attributes":207,"./axis_ids":212,"./constants":214,"./graph_interact":218,"./layout_attributes":221,"./layout_defaults":222,"./transition_axes":231,d3:8}],221:[function(e,t,r){"use strict";var n=e("../font_attributes");var a=e("../../components/color/attributes");var i=e("../../components/drawing/attributes").dash;var o=e("../../lib/extend").extendFlat;var l=e("../../plot_api/plot_template").templatedArray;var s=e("./constants");t.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:a.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc",_noTemplating:true},autorange:{valType:"enumerated",values:[true,false,"reversed"],dflt:true,editType:"calc",impliedEdits:{"range[0]":undefined,"range[1]":undefined}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":false}}],editType:"axrange",impliedEdits:{autorange:false}},fixedrange:{valType:"boolean",dflt:false,editType:"calc"},scaleanchor:{valType:"enumerated",values:[s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:undefined,dtick:undefined}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},mirror:{valType:"enumerated",values:[true,"ticks",false,"all","allticks"],dflt:false,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:true,editType:"ticks"},automargin:{valType:"boolean",dflt:false,editType:"ticks"},showspikes:{valType:"boolean",dflt:false,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:o({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:false,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:l("tickformatstop",{enabled:{valType:"boolean",dflt:true,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:false,editType:"layoutstyle"},linecolor:{valType:"color",dflt:a.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:a.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:a.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",s.idRegex.x.toString(),s.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"}}}},{"../../components/color/attributes":43,"../../components/drawing/attributes":68,"../../lib/extend":156,"../../plot_api/plot_template":199,"../font_attributes":235,"./constants":214}],222:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("../../lib");var i=e("../../components/color");var o=e("../../plot_api/plot_template");var l=e("../layout_attributes");var s=e("./layout_attributes");var u=e("./type_defaults");var c=e("./axis_defaults");var f=e("./constraint_defaults");var d=e("./position_defaults");var p=e("./axis_ids");t.exports=function e(t,r,v){var h={};var g={};var y={};var m={};var x;for(x=0;x<v.length;x++){var b=v[x];if(!n.traceIs(b,"cartesian")&&!n.traceIs(b,"gl2d")){continue}var _=p.id2name(b.xaxis);var w=p.id2name(b.yaxis);if(!n.traceIs(b,"carpet")||b.type==="carpet"&&!b._cheater){if(_)g[_]=1}if(b.type==="carpet"&&b._cheater){if(_)h[_]=1}if(n.traceIs(b,"2dMap")){y[_]=true;y[w]=true}if(n.traceIs(b,"oriented")){var k=b.orientation==="h"?w:_;m[k]=true}}var M=r._subplots;var A=M.xaxis;var T=M.yaxis;var L=a.simpleMap(A,p.id2name);var S=a.simpleMap(T,p.id2name);var C=L.concat(S);var P=i.background;if(A.length&&T.length){P=a.coerce(t,r,l,"plot_bgcolor")}var z=i.combine(P,r.paper_bgcolor);var O,D,E,R;function I(e,t){return a.coerce(E,R,s,e,t)}function N(e,t){return a.coerce2(E,R,s,e,t)}function F(e){return e==="x"?T:A}var j={x:F("x"),y:F("y")};function B(e,r){var n=e==="x"?L:S;var a=[];for(var i=0;i<n.length;i++){var o=n[i];if(o!==r&&!(t[o]||{}).overlaying){a.push(p.name2id(o))}}return a}for(x=0;x<C.length;x++){O=C[x];D=O.charAt(0);if(!a.isPlainObject(t[O])){t[O]={}}E=t[O];R=o.newContainer(r,O,D+"axis");u(E,R,I,v,O);var q=B(D,O);var H={letter:D,font:r.font,outerTicks:y[O],showGrid:!m[O],data:v,bgColor:z,calendar:r.calendar,automargin:true,cheateronly:D==="x"&&h[O]&&!g[O]};c(E,R,I,H,r);var U=N("spikecolor"),V=N("spikethickness"),G=N("spikedash"),Y=N("spikemode"),Z=N("spikesnap"),X=I("showspikes",!!U||!!V||!!G||!!Y||!!Z);if(!X){delete R.spikecolor;delete R.spikethickness;delete R.spikedash;delete R.spikemode;delete R.spikesnap}var W={letter:D,counterAxes:j[D],overlayableAxes:q,grid:r.grid};d(E,R,I,W);R._input=E}var J=n.getComponentMethod("rangeslider","handleDefaults");var Q=n.getComponentMethod("rangeselector","handleDefaults");for(x=0;x<L.length;x++){O=L[x];E=t[O];R=r[O];J(t,r,O);if(R.type==="date"){Q(E,R,r,S,R.calendar)}I("fixedrange")}for(x=0;x<S.length;x++){O=S[x];E=t[O];R=r[O];var $=r[p.id2name(R.anchor)];var K=$&&$.rangeslider&&$.rangeslider.visible;I("fixedrange",K)}r._axisConstraintGroups=[];var ee=j.x.concat(j.y);for(x=0;x<C.length;x++){O=C[x];D=O.charAt(0);E=t[O];R=r[O];f(E,R,I,ee,r)}}},{"../../components/color":44,"../../lib":164,"../../plot_api/plot_template":199,"../../registry":258,"../layout_attributes":247,"./axis_defaults":211,"./axis_ids":212,"./constraint_defaults":215,"./layout_attributes":221,"./position_defaults":224,"./type_defaults":232}],223:[function(e,t,r){"use strict";var n=e("tinycolor2").mix;var a=e("../../components/color/attributes").lightFraction;var i=e("../../lib");t.exports=function e(t,r,o,l){l=l||{};var s=l.dfltColor;function u(e,n){return i.coerce2(t,r,l.attributes,e,n)}var c=u("linecolor",s);var f=u("linewidth");var d=o("showline",l.showLine||!!c||!!f);if(!d){delete r.linecolor;delete r.linewidth}var p=n(s,l.bgColor,l.blend||a).toRgbString();var v=u("gridcolor",p);var h=u("gridwidth");var g=o("showgrid",l.showGrid||!!v||!!h);if(!g){delete r.gridcolor;delete r.gridwidth}if(!l.noZeroLine){var y=u("zerolinecolor",s);var m=u("zerolinewidth");var x=o("zeroline",l.showGrid||!!y||!!m);if(!x){delete r.zerolinecolor;delete r.zerolinewidth}}}},{"../../components/color/attributes":43,"../../lib":164,tinycolor2:26}],224:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");t.exports=function e(t,r,i,o){var l=o.counterAxes||[];var s=o.overlayableAxes||[];var u=o.letter;var c=o.grid;var f,d,p,v;if(c){d=c._domains[u][c._axisMap[r._id]];f=c._anchors[r._id];if(d){p=c[u+"side"].split(" ")[0];v=c.domain[u][p==="right"||p==="top"?1:0]}}d=d||[0,1];f=f||(n(t.position)?"free":l[0]||"free");p=p||(u==="x"?"bottom":"left");v=v||0;var h=a.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:f}},"anchor");if(h==="free")i("position",v);a.coerce(t,r,{side:{valType:"enumerated",values:u==="x"?["bottom","top"]:["left","right"],dflt:p}},"side");var g=false;if(s.length){g=a.coerce(t,r,{overlaying:{valType:"enumerated",values:[false].concat(s),dflt:false}},"overlaying")}if(!g){var y=i("domain",d);if(y[0]>y[1]-.01)r.domain=d;a.noneOrAll(t.domain,r.domain,d)}i("layer");return r}},{"../../lib":164,"fast-isnumeric":11}],225:[function(e,t,r){"use strict";var n=e("../../constants/alignment").FROM_BL;t.exports=function e(t,r,a){if(a===undefined){a=n[t.constraintoward||"center"]}var i=[t.r2l(t.range[0]),t.r2l(t.range[1])];var o=i[0]+(i[1]-i[0])*a;t.range=t._input.range=[t.l2r(o+(i[0]-o)*r),t.l2r(o+(i[1]-o)*r)]}},{"../../constants/alignment":142}],226:[function(e,t,r){"use strict";var n=e("polybooljs");var a=e("../../registry");var i=e("../../components/color");var o=e("../../components/fx");var l=e("../../lib/polygon");var s=e("../../lib/throttle");var u=e("../../components/fx/helpers").makeEventData;var c=e("./axis_ids").getFromId;var f=e("../sort_modules").sortModules;var d=e("./constants");var p=d.MINSELECT;var v=l.filter;var h=l.tester;var g=l.multitester;function y(e){return e._id}function m(e,t,r,n,a){var l=n.gd;var u=l._fullLayout;var f=u._zoomlayer;var m=n.element.getBoundingClientRect();var k=n.plotinfo;var M=k.xaxis._offset;var A=k.yaxis._offset;var T=t-m.left;var L=r-m.top;var S=T;var C=L;var P="M"+T+","+L;var z=n.xaxes[0]._length;var O=n.yaxes[0]._length;var D=n.xaxes.map(y);var E=n.yaxes.map(y);var R=n.xaxes.concat(n.yaxes);var I=e.altKey;var N,F,j,B;var q,H,U,V,G;var Y=u._lastSelectedSubplot&&u._lastSelectedSubplot===k.id;if(Y&&(e.shiftKey||e.altKey)&&(k.selection&&k.selection.polygons)&&!n.polygons){n.polygons=k.selection.polygons;n.mergedPolygons=k.selection.mergedPolygons}else if(!e.shiftKey&&!e.altKey||(e.shiftKey||e.altKey)&&!k.selection){k.selection={};k.selection.polygons=n.polygons=[];k.selection.mergedPolygons=n.mergedPolygons=[]}if(!Y){w(f);u._lastSelectedSubplot=k.id}if(a==="lasso"){N=v([[T,L]],d.BENDPX)}var Z=f.selectAll("path.select-outline-"+k.id).data([1,2]);Z.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+k.id}).attr("transform","translate("+M+", "+A+")").attr("d",P+"Z");var X=f.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1}).attr("transform","translate("+M+", "+A+")").attr("d","M0,0Z");var W=[];var J=u._uid+d.SELECTID;var Q=[];for(q=0;q<l.calcdata.length;q++){H=l.calcdata[q];U=H[0].trace;if(U.visible!==true||!U._module||!U._module.selectPoints)continue;if(n.subplot){if(U.subplot===n.subplot||U.geo===n.subplot){W.push({_module:U._module,cd:H,xaxis:n.xaxes[0],yaxis:n.yaxes[0]})}}else if(U.type==="splom"&&U._xaxes[D[0]]&&U._yaxes[E[0]]){W.push({_module:U._module,cd:H,xaxis:n.xaxes[0],yaxis:n.yaxes[0]})}else{if(D.indexOf(U.xaxis)===-1)continue;if(E.indexOf(U.yaxis)===-1)continue;W.push({_module:U._module,cd:H,xaxis:c(l,U.xaxis),yaxis:c(l,U.yaxis)})}}function $(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return e.p2d(r[t])}}function K(e,t){return e-t}var ee;if(k.fillRangeItems){ee=k.fillRangeItems}else{if(a==="select"){ee=function(e,t){var r=e.range={};for(q=0;q<R.length;q++){var n=R[q];var a=n._id.charAt(0);r[n._id]=[n.p2d(t[a+"min"]),n.p2d(t[a+"max"])].sort(K)}}}else{ee=function(e,t,r){var n=e.lassoPoints={};for(q=0;q<R.length;q++){var a=R[q];n[a._id]=r.filtered.map($(a))}}}}n.moveFn=function(e,t){S=Math.max(0,Math.min(z,e+T));C=Math.max(0,Math.min(O,t+L));var r=Math.abs(S-T),i=Math.abs(C-L);if(a==="select"){var o=u.selectdirection;if(u.selectdirection==="any"){if(i<Math.min(r*.6,p))o="h";else if(r<Math.min(i*.6,p))o="v";else o="d"}else{o=u.selectdirection}if(o==="h"){B=[[T,0],[T,O],[S,O],[S,0]];B.xmin=Math.min(T,S);B.xmax=Math.max(T,S);B.ymin=Math.min(0,O);B.ymax=Math.max(0,O);X.attr("d","M"+B.xmin+","+(L-p)+"h-4v"+2*p+"h4Z"+"M"+(B.xmax-1)+","+(L-p)+"h4v"+2*p+"h-4Z")}else if(o==="v"){B=[[0,L],[0,C],[z,C],[z,L]];B.xmin=Math.min(0,z);B.xmax=Math.max(0,z);B.ymin=Math.min(L,C);B.ymax=Math.max(L,C);X.attr("d","M"+(T-p)+","+B.ymin+"v-4h"+2*p+"v4Z"+"M"+(T-p)+","+(B.ymax-1)+"v4h"+2*p+"v-4Z")}else if(o==="d"){B=[[T,L],[T,C],[S,C],[S,L]];B.xmin=Math.min(T,S);B.xmax=Math.max(T,S);B.ymin=Math.min(L,C);B.ymax=Math.max(L,C);X.attr("d","M0,0Z")}}else if(a==="lasso"){N.addPt([S,C]);B=N.filtered}if(n.polygons&&n.polygons.length){j=b(n.mergedPolygons,B,I);B.subtract=I;F=g(n.polygons.concat([B]))}else{j=[B];F=h(B)}var c=[];for(q=0;q<j.length;q++){var f=j[q];c.push(f.join("L")+"L"+f[0])}Z.attr("d","M"+c.join("M")+"Z");s.throttle(J,d.SELECTDELAY,function(){Q=[];var e,t=[],r;for(q=0;q<W.length;q++){V=W[q];r=V._module.selectPoints(V,F);t.push(r);e=_(r,V);if(Q.length){for(var a=0;a<e.length;a++){Q.push(e[a])}}else Q=e}G={points:Q};x(l,W,G);ee(G,B,N);n.gd.emit("plotly_selecting",G)})};n.clickFn=function(e,t){X.remove();s.done(J).then(function(){s.clear(J);if(e===2){Z.remove();for(q=0;q<W.length;q++){V=W[q];V._module.selectPoints(V,false)}x(l,W);l.emit("plotly_deselect",null)}else{l.emit("plotly_selected",undefined)}o.click(l,t)})};n.doneFn=function(){X.remove();s.done(J).then(function(){s.clear(J);n.gd.emit("plotly_selected",G);if(B&&n.polygons){B.subtract=I;n.polygons.push(B);n.mergedPolygons.length=0;[].push.apply(n.mergedPolygons,j)}})}}function x(e,t,r){var n,i,o,l;if(r){var s=r.points||[];for(n=0;n<t.length;n++){l=t[n].cd[0].trace;l.selectedpoints=[];l._input.selectedpoints=[]}for(n=0;n<s.length;n++){var u=s[n];var c=u.data;var d=u.fullData;if(u.pointIndices){[].push.apply(c.selectedpoints,u.pointIndices);[].push.apply(d.selectedpoints,u.pointIndices)}else{c.selectedpoints.push(u.pointIndex);d.selectedpoints.push(u.pointIndex)}}}else{for(n=0;n<t.length;n++){l=t[n].cd[0].trace;delete l.selectedpoints;delete l._input.selectedpoints}}var p={};for(n=0;n<t.length;n++){o=t[n];var v=o._module.name;if(p[v]){p[v].push(o)}else{p[v]=[o]}}var h=Object.keys(p).sort(f);for(n=0;n<h.length;n++){var g=p[h[n]];var y=g.length;var m=g[0];var x=m.cd[0].trace;var b=m._module;var _=b.styleOnSelect||b.style;if(a.traceIs(x,"regl")){var w=new Array(y);for(i=0;i<y;i++){w[i]=g[i].cd}_(e,w)}else{for(i=0;i<y;i++){_(e,g[i].cd)}}}}function b(e,t,r){var a;if(r){a=n.difference({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}a=n.union({regions:e,inverted:false},{regions:[t],inverted:false});return a.regions}function _(e,t){if(Array.isArray(e)){var r=t.cd;var n=t.cd[0].trace;for(var a=0;a<e.length;a++){e[a]=u(e[a],n,r)}}return e}function w(e){e.selectAll(".select-outline").remove()}t.exports={prepSelect:m,clearSelect:w}},{"../../components/color":44,"../../components/fx":86,"../../components/fx/helpers":83,"../../lib/polygon":176,"../../lib/throttle":186,"../../registry":258,"../sort_modules":256,"./axis_ids":212,"./constants":214,polybooljs:17}],227:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../../lib");var o=i.cleanNumber;var l=i.ms2DateTime;var s=i.dateTime2ms;var u=i.ensureNumber;var c=e("../../constants/numerical");var f=c.FP_SAFE;var d=c.BADNUM;var p=e("./constants");var v=e("./axis_ids");function h(e){return Math.pow(10,e)}t.exports=function e(t,r){r=r||{};var c=(t._id||"x").charAt(0);var g=10;function y(e,r){if(e>0)return Math.log(e)/Math.LN10;else if(e<=0&&r&&t.range&&t.range.length===2){var n=t.range[0],a=t.range[1];return.5*(n+a-3*g*Math.abs(n-a))}else return d}function m(e,r,n){var i=s(e,n||t.calendar);if(i===d){if(a(e))i=s(new Date(+e));else return d}return i}function x(e,r,n){return l(e,r,n||t.calendar)}function b(e){return t._categories[Math.round(e)]}function _(e){if(e!==null&&e!==undefined){if(t._categoriesMap===undefined){t._categoriesMap={}}if(t._categoriesMap[e]!==undefined){return t._categoriesMap[e]}else{t._categories.push(e);var r=t._categories.length-1;t._categoriesMap[e]=r;return r}}return d}function w(e){if(t._categoriesMap){var r=t._categoriesMap[e];if(r!==undefined)return r}if(a(e))return+e}function k(e){if(!a(e))return d;return n.round(t._b+t._m*e,2)}function M(e){return(e-t._b)/t._m}t.c2l=t.type==="log"?y:u;t.l2c=t.type==="log"?h:u;t.l2p=k;t.p2l=M;t.c2p=t.type==="log"?function(e,t){return k(y(e,t))}:k;t.p2c=t.type==="log"?function(e){return h(M(e))}:M;if(["linear","-"].indexOf(t.type)!==-1){t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=o;t.c2d=t.c2r=t.l2d=t.l2r=u;t.d2p=t.r2p=function(e){return t.l2p(o(e))};t.p2d=t.p2r=M;t.cleanPos=u}else if(t.type==="log"){t.d2r=t.d2l=function(e,t){return y(o(e),t)};t.r2d=t.r2c=function(e){return h(o(e))};t.d2c=t.r2l=o;t.c2d=t.l2r=u;t.c2r=y;t.l2d=h;t.d2p=function(e,r){return t.l2p(t.d2r(e,r))};t.p2d=function(e){return h(M(e))};t.r2p=function(e){return t.l2p(o(e))};t.p2r=M;t.cleanPos=u}else if(t.type==="date"){t.d2r=t.r2d=i.identity;t.d2c=t.r2c=t.d2l=t.r2l=m;t.c2d=t.c2r=t.l2d=t.l2r=x;t.d2p=t.r2p=function(e,r,n){return t.l2p(m(e,0,n))};t.p2d=t.p2r=function(e,t,r){return x(M(e),t,r)};t.cleanPos=function(e){return i.cleanDate(e,d,t.calendar)}}else if(t.type==="category"){t.d2c=t.d2l=_;t.r2d=t.c2d=t.l2d=b;t.d2r=t.d2l_noadd=w;t.r2c=function(e){var r=w(e);return r!==undefined?r:t.fraction2r(.5)};t.l2r=t.c2r=u;t.r2l=w;t.d2p=function(e){return t.l2p(t.r2c(e))};t.p2d=function(e){return b(M(e))};t.r2p=t.d2p;t.p2r=M;t.cleanPos=function(e){if(typeof e==="string"&&e!=="")return e;return u(e)}}t.fraction2r=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))};t.r2fraction=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)};t.cleanRange=function(e,r){if(!r)r={};if(!e)e="range";var n=i.nestedProperty(t,e).get();var o,l;if(t.type==="date")l=i.dfltRange(t.calendar);else if(c==="y")l=p.DFLTRANGEY;else l=r.dfltRange||p.DFLTRANGEX;l=l.slice();if(!n||n.length!==2){i.nestedProperty(t,e).set(l);return}if(t.type==="date"){n[0]=i.cleanDate(n[0],d,t.calendar);n[1]=i.cleanDate(n[1],d,t.calendar)}for(o=0;o<2;o++){if(t.type==="date"){if(!i.isDateTime(n[o],t.calendar)){t[e]=l;break}if(t.r2l(n[0])===t.r2l(n[1])){var s=i.constrain(t.r2l(n[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);n[0]=t.l2r(s-1e3);n[1]=t.l2r(s+1e3);break}}else{if(!a(n[o])){if(a(n[1-o])){n[o]=n[1-o]*(o?10:.1)}else{t[e]=l;break}}if(n[o]<-f)n[o]=-f;else if(n[o]>f)n[o]=f;if(n[0]===n[1]){var u=Math.max(1,Math.abs(n[0]*1e-6));n[0]-=u;n[1]+=u}}}};t.setScale=function(e){var n=r._size;if(!t._categories)t._categories=[];if(!t._categoriesMap)t._categoriesMap={};if(t.overlaying){var a=v.getFromId({_fullLayout:r},t.overlaying);t.domain=a.domain}var i=e&&t._r?"_r":"range",o=t.calendar;t.cleanRange(i);var l=t.r2l(t[i][0],o),s=t.r2l(t[i][1],o);if(c==="y"){t._offset=n.t+(1-t.domain[1])*n.h;t._length=n.h*(t.domain[1]-t.domain[0]);t._m=t._length/(l-s);t._b=-t._m*s}else{t._offset=n.l+t.domain[0]*n.w;t._length=n.w*(t.domain[1]-t.domain[0]);t._m=t._length/(s-l);t._b=-t._m*l}if(!isFinite(t._m)||!isFinite(t._b)){r._replotting=false;throw new Error("Something went wrong with axis scaling")}};t.makeCalcdata=function(e,r){var n,a,o,l;var s=t.type;var u=s==="date"&&e[r+"calendar"];if(r in e){n=e[r];l=e._length||n.length;if(i.isTypedArray(n)&&(s==="linear"||s==="log")){if(l===n.length){return n}else if(n.subarray){return n.subarray(0,l)}}a=new Array(l);for(o=0;o<l;o++){a[o]=t.d2c(n[o],0,u)}}else{var c=r+"0"in e?t.d2c(e[r+"0"],0,u):0;var f=e["d"+r]?Number(e["d"+r]):1;n=e[{x:"y",y:"x"}[r]];l=e._length||n.length;a=new Array(l);for(o=0;o<l;o++){a[o]=c+o*f}}return a};t.isValidRange=function(e){return Array.isArray(e)&&e.length===2&&a(t.r2l(e[0]))&&a(t.r2l(e[1]))};t.isPtWithinRange=function(e,r){var n=t.c2l(e[c],null,r);var a=t.r2l(t.range[0]);var i=t.r2l(t.range[1]);if(a<i){return a<=n&&n<=i}else{return i<=n&&n<=a}};t.clearCalc=function(){t._min=[];t._max=[];t._categories=(t._initialCategories||[]).slice();t._categoriesMap={};for(var e=0;e<t._categories.length;e++){t._categoriesMap[t._categories[e]]=e}};var A=r._d3locale;if(t.type==="date"){t._dateFormat=A?A.timeFormat.utc:n.time.format.utc;t._extraFormat=r._extraFormat}t._separators=r.separators;t._numFormat=A?A.numberFormat:n.format;delete t._minDtick;delete t._forceTick0}},{"../../constants/numerical":144,"../../lib":164,"./axis_ids":212,"./constants":214,d3:8,"fast-isnumeric":11}],228:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");var i=e("../array_container_defaults");t.exports=function e(t,r,s,u,c){var f=o(t);var d=s("tickprefix");if(d)s("showtickprefix",f);var p=s("ticksuffix",c.tickSuffixDflt);if(p)s("showticksuffix",f);var v=s("showticklabels");if(v){var h=c.font||{};var g=r.color!==a.color.dflt?r.color:h.color;n.coerceFont(s,"tickfont",{family:h.family,size:h.size,color:g});s("tickangle");if(u!=="category"){var y=s("tickformat");var m=t.tickformatstops;if(Array.isArray(m)&&m.length){i(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:l})}if(!y&&u!=="date"){s("showexponent",f);s("exponentformat");s("separatethousands")}}}};function o(e){var t=["showexponent","showtickprefix","showticksuffix"],r=t.filter(function(t){return e[t]!==undefined}),n=function(t){return e[t]===e[r[0]]};if(r.every(n)||r.length===1){return e[r[0]]}}function l(e,t){function r(r,i){return n.coerce(e,t,a.tickformatstops,r,i)}var i=r("enabled");if(i){r("dtickrange");r("value")}}},{"../../lib":164,"../array_container_defaults":205,"./layout_attributes":221}],229:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("./layout_attributes");t.exports=function e(t,r,i,o){var l=n.coerce2(t,r,a,"ticklen"),s=n.coerce2(t,r,a,"tickwidth"),u=n.coerce2(t,r,a,"tickcolor",r.color),c=i("ticks",o.outerTicks||l||s||u?"outside":"");if(!c){delete r.ticklen;delete r.tickwidth;delete r.tickcolor}}},{"../../lib":164,"./layout_attributes":221}],230:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib");var i=e("../../constants/numerical").ONEDAY;t.exports=function e(t,r,o,l){var s;if(t.tickmode==="array"&&(l==="log"||l==="date")){s=r.tickmode="auto"}else{var u=Array.isArray(t.tickvals)?"array":t.dtick?"linear":"auto";s=o("tickmode",u)}if(s==="auto")o("nticks");else if(s==="linear"){var c=l==="date"?i:1;var f=o("dtick",c);if(n(f)){r.dtick=f>0?Number(f):c}else if(typeof f!=="string"){r.dtick=c}else{var d=f.charAt(0),p=f.substr(1);p=n(p)?Number(p):0;if(p<=0||!(l==="date"&&d==="M"&&p===Math.round(p)||l==="log"&&d==="L"||l==="log"&&d==="D"&&(p===1||p===2))){r.dtick=c}}var v=l==="date"?a.dateTick0(r.calendar):0;var h=o("tick0",v);if(l==="date"){r.tick0=a.cleanDate(h,v)}else if(n(h)&&f!=="D1"&&f!=="D2"){r.tick0=Number(h)}else{r.tick0=v}}else{var g=o("tickvals");if(g===undefined)r.tickmode="auto";else o("ticktext")}}},{"../../constants/numerical":144,"../../lib":164,"fast-isnumeric":11}],231:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../components/drawing");var o=e("./axes");var l=e("./constants").attrRegex;t.exports=function e(t,r,s,u){var c=t._fullLayout;var f=[];function d(e){var t,r,n,a,i;var o={};for(t in e){r=t.split(".");n=r[0].match(l);if(n){var s=t.charAt(0);var u=r[0];a=c[u];i={};if(Array.isArray(e[t])){i.to=e[t].slice(0)}else{if(Array.isArray(e[t].range)){i.to=e[t].range.slice(0)}}if(!i.to)continue;i.axisName=u;i.length=a._length;f.push(s);o[s]=i}}return o}function p(e,t,r){var n;var a=e._plots;var i=[];var o,l;for(n in a){var s=a[n];if(i.indexOf(s)!==-1)continue;var u=s.xaxis._id;var c=s.yaxis._id;var f=s.xaxis.range;var d=s.yaxis.range;s.xaxis._r=s.xaxis.range.slice();s.yaxis._r=s.yaxis.range.slice();if(r[u]){o=r[u].to}else{o=f}if(r[c]){l=r[c].to}else{l=d}if(f[0]===o[0]&&f[1]===o[1]&&d[0]===l[0]&&d[1]===l[1])continue;if(t.indexOf(u)!==-1||t.indexOf(c)!==-1){i.push(s)}}return i}var v=d(r);var h=Object.keys(v);var g=p(c,h,v);function y(){function e(e,r,n){for(var a=0;a<e.length;a++){r(t,a);if(n)return}}e(c.annotations||[],a.getComponentMethod("annotations","drawOne"));e(c.shapes||[],a.getComponentMethod("shapes","drawOne"));e(c.images||[],a.getComponentMethod("images","draw"),true)}if(!g.length){y();return false}function m(e,r){var n=[],i;n=[e._id,r._id];for(i=0;i<n.length;i++){o.doTicksSingle(t,n[i],true)}function l(e,r,a){for(i=0;i<e.length;i++){var o=e[i];if(n.indexOf(o.xref)!==-1||n.indexOf(o.yref)!==-1){r(t,i)}if(a)return}}l(c.annotations||[],a.getComponentMethod("annotations","drawOne"));l(c.shapes||[],a.getComponentMethod("shapes","drawOne"));l(c.images||[],a.getComponentMethod("images","draw"),true)}function x(e){var t=e.xaxis;var r=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(i.setTranslate,0,0).call(i.setScale,1,1);e.plot.call(i.setTranslate,t._offset,r._offset).call(i.setScale,1,1);var n=e.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(i.setPointGroupScale,1,1);n.selectAll(".textpoint").call(i.setTextPointsScale,1,1);n.call(i.hideOutsideRangePoints,e)}function b(e,r){var n,a,o;var l=v[e.xaxis._id];var s=v[e.yaxis._id];var u=[];if(l){n=t._fullLayout[l.axisName];a=n._r;o=l.to;u[0]=(a[0]*(1-r)+r*o[0]-a[0])/(a[1]-a[0])*e.xaxis._length;var c=a[1]-a[0];var f=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0];n.range[1]=a[1]*(1-r)+r*o[1];u[2]=e.xaxis._length*(1-r+r*f/c)}else{u[0]=0;u[2]=e.xaxis._length}if(s){n=t._fullLayout[s.axisName];a=n._r;o=s.to;u[1]=(a[1]*(1-r)+r*o[1]-a[1])/(a[0]-a[1])*e.yaxis._length;var d=a[1]-a[0];var p=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0];n.range[1]=a[1]*(1-r)+r*o[1];u[3]=e.yaxis._length*(1-r+r*p/d)}else{u[1]=0;u[3]=e.yaxis._length}m(e.xaxis,e.yaxis);var h=e.xaxis;var g=e.yaxis;var y=!!l;var x=!!s;var b=y?h._length/u[2]:1,_=x?g._length/u[3]:1;var w=y?u[0]:0,k=x?u[1]:0;var M=y?u[0]/u[2]*h._length:0,A=x?u[1]/u[3]*g._length:0;var T=h._offset-M,L=g._offset-A;e.clipRect.call(i.setTranslate,w,k).call(i.setScale,1/b,1/_);e.plot.call(i.setTranslate,T,L).call(i.setScale,b,_);i.setPointGroupScale(e.zoomScalePts,1/b,1/_);i.setTextPointsScale(e.zoomScaleTxt,1/b,1/_)}var _;if(u){_=u()}function w(){var e={};for(var r=0;r<h.length;r++){var n=t._fullLayout[v[h[r]].axisName];var i=v[h[r]].to;e[n._name+".range[0]"]=i[0];e[n._name+".range[1]"]=i[1];n.range=i.slice()}_&&_();return a.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){x(g[e])}})}function k(){var e={};for(var r=0;r<h.length;r++){var n=t._fullLayout[h[r]+"axis"];e[n._name+".range[0]"]=n.range[0];e[n._name+".range[1]"]=n.range[1];n.range=n._r.slice()}return a.call("relayout",t,e).then(function(){for(var e=0;e<g.length;e++){x(g[e])}})}var M,A,T;var L=n.ease(s.easing);t._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(T);T=null;return k()});function S(){A=Date.now();var e=Math.min(1,(A-M)/s.duration);var t=L(e);for(var r=0;r<g.length;r++){b(g[r],t)}if(A-M>s.duration){w();T=window.cancelAnimationFrame(S)}else{T=window.requestAnimationFrame(S)}}M=Date.now();T=window.requestAnimationFrame(S);return Promise.resolve()}},{"../../components/drawing":69,"../../registry":258,"./axes":209,"./constants":214,d3:8}],232:[function(e,t,r){"use strict";var n=e("../../registry");var a=e("./axis_autotype");var i=e("./axis_ids").name2id;t.exports=function e(t,r,n,a,l){if(l){r._name=l;r._id=i(l)}var s=n("type");if(s==="-"){o(r,a);if(r.type==="-"){r.type="linear"}else{t.type=r.type}}};function o(e,t){if(e.type!=="-")return;var r=e._id;var i=r.charAt(0);if(r.indexOf("scene")!==-1)r=i;var o=l(t,r,i);if(!o)return;if(o.type==="histogram"&&i==={v:"y",h:"x"}[o.orientation||"v"]){e.type="linear";return}var c=i+"calendar";var f=o[c];var d;if(u(o,i)){var p=s(o);var v=[];for(d=0;d<t.length;d++){var h=t[d];if(!n.traceIs(h,"box-violin")||(h[i+"axis"]||i)!==r)continue;if(h[p]!==undefined)v.push(h[p][0]);else if(h.name!==undefined)v.push(h.name);else v.push("text");if(h[c]!==f)f=undefined}e.type=a(v,f)}else if(o.type==="splom"){var g=o.dimensions;for(d=0;d<g.length;d++){var y=g[d];if(y.visible){e.type=a(y.values,f);break}}}else{e.type=a(o[i]||[o[i+"0"]],f)}}function l(e,t,r){for(var n=0;n<e.length;n++){var a=e[n];if(a.type==="splom"&&a._length>0&&a["_"+r+"axes"][t]){return a}if((a[r+"axis"]||r)===t){if(u(a,r)){return a}else if((a[r]||[]).length||a[r+"0"]){return a}}}}function s(e){return{v:"x",h:"y"}[e.orientation||"v"]}function u(e,t){var r=s(e),a=n.traceIs(e,"box-violin"),i=n.traceIs(e._fullInput||{},"candlestick");return a&&!i&&t===r&&e[r]===undefined&&e[r+"0"]===undefined}},{"../../registry":258,"./axis_autotype":210,"./axis_ids":212}],233:[function(e,t,r){"use strict";var n=e("../registry");var a=e("../lib");r.manageCommandObserver=function(e,t,n,o){var l={};var s=true;if(t&&t._commandObserver){l=t._commandObserver}if(!l.cache){l.cache={}}l.lookupTable={};var u=r.hasSimpleAPICommandBindings(e,n,l.lookupTable);if(t&&t._commandObserver){if(!u){if(t._commandObserver.remove){t._commandObserver.remove();t._commandObserver=null;return l}}else{return l}}if(u){i(e,u,l.cache);l.check=function t(){if(!s)return;var r=i(e,u,l.cache);if(r.changed&&o){if(l.lookupTable[r.value]!==undefined){l.disable();Promise.resolve(o({value:r.value,type:u.type,prop:u.prop,traces:u.traces,index:l.lookupTable[r.value]})).then(l.enable,l.enable)}}return r.changed};var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"];for(var f=0;f<c.length;f++){e._internalOn(c[f],l.check)}l.remove=function(){for(var t=0;t<c.length;t++){e._removeInternalListener(c[t],l.check)}}}else{a.log("Unable to automatically bind plot updates to API command");l.lookupTable={};l.remove=function(){}}l.disable=function e(){s=false};l.enable=function e(){s=true};if(t){t._commandObserver=l}return l};r.hasSimpleAPICommandBindings=function(e,t,n){var a;var i=t.length;var o;for(a=0;a<i;a++){var l;var s=t[a];var u=s.method;var c=s.args;if(!Array.isArray(c))c=[];if(!u){return false}var f=r.computeAPICommandBindings(e,u,c);if(f.length!==1){return false}if(!o){o=f[0];if(Array.isArray(o.traces)){o.traces.sort()}}else{l=f[0];if(l.type!==o.type){return false}if(l.prop!==o.prop){return false}if(Array.isArray(o.traces)){if(Array.isArray(l.traces)){l.traces.sort();for(var d=0;d<o.traces.length;d++){if(o.traces[d]!==l.traces[d]){return false}}}else{return false}}else{if(l.prop!==o.prop){return false}}}l=f[0];var p=l.value;if(Array.isArray(p)){if(p.length===1){p=p[0]}else{return false}}if(n){n[p]=a}}return o};function i(e,t,r){var n,i,o;var l=false;if(t.type==="data"){n=e._fullData[t.traces!==null?t.traces[0]:0]}else if(t.type==="layout"){n=e._fullLayout}else{return false}i=a.nestedProperty(n,t.prop).get();o=r[t.type]=r[t.type]||{};if(o.hasOwnProperty(t.prop)){if(o[t.prop]!==i){l=true}}o[t.prop]=i;return{changed:l,value:i}}r.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=n.apiMethodRegistry[t];var o=[e];if(!Array.isArray(r))r=[];for(var l=0;l<r.length;l++){o.push(r[l])}return i.apply(null,o).catch(function(e){a.warn("API call to Plotly."+t+" rejected.",e);return Promise.reject(e)})};r.computeAPICommandBindings=function(e,t,r){var n;if(!Array.isArray(r))r=[];switch(t){case"restyle":n=s(e,r);break;case"relayout":n=l(e,r);break;case"update":n=s(e,[r[0],r[2]]).concat(l(e,[r[1]]));break;case"animate":n=o(e,r);break;default:n=[]}return n};function o(e,t){if(Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1){return[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]}else{return[]}}function l(e,t){var r=[];var n=t[0];var i={};if(typeof n==="string"){i[n]=t[1]}else if(a.isPlainObject(n)){i=n}else{return r}u(i,function(e,t,n){r.push({type:"layout",prop:e,value:n})},"",0);return r}function s(e,t){var r,n,i,o;var l=[];n=t[0];i=t[1];r=t[2];o={};if(typeof n==="string"){o[n]=i}else if(a.isPlainObject(n)){o=n;if(r===undefined){r=i}}else{return l}if(r===undefined){r=null}u(o,function(t,n,a){var i;if(Array.isArray(a)){var o=Math.min(a.length,e.data.length);if(r){o=Math.min(o,r.length)}i=[];for(var s=0;s<o;s++){i[s]=r?r[s]:s}}else{i=r?r.slice(0):null}if(i===null){if(Array.isArray(a)){a=a[0]}}else if(Array.isArray(i)){if(!Array.isArray(a)){var u=a;a=[];for(var c=0;c<i.length;c++){a[c]=u}}a.length=Math.min(i.length,a.length)}l.push({type:"data",prop:t,traces:i,value:a})},"",0);return l}function u(e,t,r,n){Object.keys(e).forEach(function(i){var o=e[i];if(i[0]==="_")return;var l=r+(n>0?".":"")+i;if(a.isPlainObject(o)){u(o,t,l,n+1)}else{t(l,i,o)}})}},{"../lib":164,"../registry":258}],234:[function(e,t,r){"use strict";var n=e("../lib/extend").extendFlat;r.attributes=function(e,t){e=e||{};t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]};var a=e.name?e.name+" ":"";var i=e.trace?"trace ":"subplot ";var o=t.description?" "+t.description:"";var l={x:n({},r,{}),y:n({},r,{}),editType:e.editType};if(!e.noGridCell){l.row={valType:"integer",min:0,dflt:0,editType:e.editType};l.column={valType:"integer",min:0,dflt:0,editType:e.editType}}return l};r.defaults=function(e,t,r,n){var a=n&&n.x||[0,1];var i=n&&n.y||[0,1];var o=t.grid;if(o){var l=r("domain.column");if(l!==undefined){if(l<o.columns)a=o._domains.x[l];else delete e.domain.column}var s=r("domain.row");if(s!==undefined){if(s<o.rows)i=o._domains.y[s];else delete e.domain.row}}r("domain.x",a);r("domain.y",i)}},{"../lib/extend":156}],235:[function(e,t,r){"use strict";t.exports=function(e){var t=e.editType;var r=e.colorEditType;if(r===undefined)r=t;var n={family:{valType:"string",noBlank:true,strict:true,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};if(e.arrayOk){n.family.arrayOk=true;n.size.arrayOk=true;n.color.arrayOk=true}return n}},{}],236:[function(e,t,r){"use strict";t.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],237:[function(e,t,r){"use strict";r.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};r.axesNames=["lonaxis","lataxis"];r.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};r.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};r.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};r.clipPad=.001;r.precision=.1;r.landColor="#F0DC82";r.waterColor="#3399FF";r.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};r.sphereSVG={type:"Sphere"};r.fillLayers={ocean:1,land:1,lakes:1};r.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};r.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];r.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];r.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],238:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../../components/color");var l=e("../../components/drawing");var s=e("../../components/fx");var u=e("../plots");var c=e("../cartesian/axes");var f=e("../../components/dragelement");var d=e("../cartesian/select").prepSelect;var p=e("./zoom");var v=e("./constants");var h=e("../../lib/topojson_utils");var g=e("topojson-client").feature;e("./projections")(n);function y(e){this.id=e.id;this.graphDiv=e.graphDiv;this.container=e.container;this.topojsonURL=e.topojsonURL;this.isStatic=e.staticPlot;this.topojsonName=null;this.topojson=null;this.projection=null;this.viewInitial=null;this.fitScale=null;this.bounds=null;this.midPt=null;this.hasChoropleth=false;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.clipDef=null;this.clipRect=null;this.bgRect=null;this.makeFramework()}var m=y.prototype;t.exports=function e(t){return new y(t)};m.plot=function(e,t,r){var n=this;var a=t[this.id];var i=h.getTopojsonName(a);if(n.topojson===null||i!==n.topojsonName){n.topojsonName=i;if(PlotlyGeoAssets.topojson[n.topojsonName]===undefined){r.push(n.fetchTopojson().then(function(r){PlotlyGeoAssets.topojson[n.topojsonName]=r;n.topojson=r;n.update(e,t)}))}else{n.topojson=PlotlyGeoAssets.topojson[n.topojsonName];n.update(e,t)}}else{n.update(e,t)}};m.fetchTopojson=function(){var e=h.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(t,r){n.json(e,function(n,a){if(n){if(n.status===404){return r(new Error(["plotly.js could not find topojson file at",e,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")))}else{return r(new Error(["unexpected error while fetching topojson file at",e].join(" ")))}}t(a)})})};m.update=function(e,t){var r=t[this.id];var n=this.updateProjection(t,r);if(n)return;this.hasChoropleth=false;for(var a=0;a<e.length;a++){if(e[a][0].trace.type==="choropleth"){this.hasChoropleth=true;break}}if(!this.viewInitial){this.saveViewInitial(r)}this.updateBaseLayers(t,r);this.updateDims(t,r);this.updateFx(t,r);u.generalUpdatePerTraceModule(this.graphDiv,this,e,r);var i=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=i.selectAll(".point");this.dataPoints.text=i.selectAll("text");this.dataPaths.line=i.selectAll(".js-line");var o=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=o.selectAll("path");this.render()};m.updateProjection=function(e,t){var r=e._size;var n=t.domain;var o=t.projection;var l=o.rotation||{};var s=t.center||{};var u=this.projection=x(t);u.center([s.lon-l.lon,s.lat-l.lat]).rotate([-l.lon,-l.lat,l.roll]).parallels(o.parallels);var c=[[r.l+r.w*n.x[0],r.t+r.h*(1-n.y[1])],[r.l+r.w*n.x[1],r.t+r.h*(1-n.y[0])]];var f=t.lonaxis;var d=t.lataxis;var p=_(f.range,d.range);u.fitExtent(c,p);var v=this.bounds=u.getBounds(p);var h=this.fitScale=u.scale();var g=u.translate();if(!isFinite(v[0][0])||!isFinite(v[0][1])||!isFinite(v[1][0])||!isFinite(v[1][1])||isNaN(g[0])||isNaN(g[0])){var y=this.graphDiv;var m=["projection.rotation","center","lonaxis.range","lataxis.range"];var b="Invalid geo settings, relayout'ing to default view.";var w={};for(var k=0;k<m.length;k++){w[this.id+"."+m[k]]=null}this.viewInitial=null;i.warn(b);y._promises.push(a.call("relayout",y,w));return b}var M=this.midPt=[(v[0][0]+v[1][0])/2,(v[0][1]+v[1][1])/2];u.scale(o.scale*h).translate([g[0]+(M[0]-g[0]),g[1]+(M[1]-g[1])]).clipExtent(v);if(t._isAlbersUsa){var A=u([s.lon,s.lat]);var T=u.translate();u.translate([T[0]-(A[0]-T[0]),T[1]-(A[1]-T[1])])}};m.updateBaseLayers=function(e,t){var r=this;var a=r.topojson;var i=r.layers;var s=r.basePaths;function u(e){return e==="lonaxis"||e==="lataxis"}function c(e){return Boolean(v.lineLayers[e])}function f(e){return Boolean(v.fillLayers[e])}var d=this.hasChoropleth?v.layersForChoropleth:v.layers;var p=d.filter(function(e){return c(e)||f(e)?t["show"+e]:u(e)?t[e].showgrid:true});var h=r.framework.selectAll(".layer").data(p,String);h.exit().each(function(e){delete i[e];delete s[e];n.select(this).remove()});h.enter().append("g").attr("class",function(e){return"layer "+e}).each(function(e){var t=i[e]=n.select(this);if(e==="bg"){r.bgRect=t.append("rect").style("pointer-events","all")}else if(u(e)){s[e]=t.append("path").style("fill","none")}else if(e==="backplot"){t.append("g").classed("choroplethlayer",true)}else if(e==="frontplot"){t.append("g").classed("scatterlayer",true)}else if(c(e)){s[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2)}else if(f(e)){s[e]=t.append("path").style("stroke","none")}});h.order();h.each(function(e){var r=s[e];var n=v.layerNameToAdjective[e];if(e==="frame"){r.datum(v.sphereSVG)}else if(c(e)||f(e)){r.datum(g(a,a.objects[e]))}else if(u(e)){r.datum(b(e,t)).call(o.stroke,t[e].gridcolor).call(l.dashLine,"",t[e].gridwidth)}if(c(e)){r.call(o.stroke,t[n+"color"]).call(l.dashLine,"",t[n+"width"])}else if(f(e)){r.call(o.fill,t[n+"color"])}})};m.updateDims=function(e,t){var r=this.bounds;var n=(t.framewidth||0)/2;var a=r[0][0]-n;var i=r[0][1]-n;var s=r[1][0]-a+n;var u=r[1][1]-i+n;l.setRect(this.clipRect,a,i,s,u);this.bgRect.call(l.setRect,a,i,s,u).call(o.fill,t.bgcolor);this.xaxis._offset=a;this.xaxis._length=s;this.yaxis._offset=i;this.yaxis._length=u};m.updateFx=function(e,t){var r=this;var i=r.graphDiv;var o=r.bgRect;var l=e.dragmode;if(r.isStatic)return;function u(){var e=r.viewInitial;var t={};for(var n in e){t[r.id+"."+n]=e[n]}a.call("relayout",i,t);i.emit("plotly_doubleclick",null)}function c(e){return r.projection.invert([e[0]+r.xaxis._offset,e[1]+r.yaxis._offset])}if(l==="pan"){o.node().onmousedown=null;o.call(p(r,t));o.on("dblclick.zoom",u)}else if(l==="select"||l==="lasso"){o.on(".zoom",null);var v;if(l==="select"){v=function(e,t){var n=e.range={};n[r.id]=[c([t.xmin,t.ymin]),c([t.xmax,t.ymax])]}}else if(l==="lasso"){v=function(e,t,n){var a=e.lassoPoints={};a[r.id]=n.filtered.map(c)}}var h={element:r.bgRect.node(),gd:i,plotinfo:{xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:v},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(t){if(t===2){e._zoomlayer.selectAll(".select-outline").remove()}}};h.prepFn=function(e,t,r){d(e,t,r,h,l)};f.init(h)}o.on("mousemove",function(){var e=r.projection.invert(n.mouse(this));if(!e||isNaN(e[0])||isNaN(e[1])){return f.unhover(i,n.event)}r.xaxis.p2c=function(){return e[0]};r.yaxis.p2c=function(){return e[1]};s.hover(i,n.event,r.id)});o.on("mouseout",function(){f.unhover(i,n.event)});o.on("click",function(){s.click(i,n.event)})};m.makeFramework=function(){var e=this;var t=e.graphDiv._fullLayout;var r="clip"+t._uid+e.id;e.clipDef=t._clips.append("clipPath").attr("id",r);e.clipRect=e.clipDef.append("rect");e.framework=n.select(e.container).append("g").attr("class","geo "+e.id).call(l.setClipUrl,r);e.project=function(t){var r=e.projection(t);return r?[r[0]-e.xaxis._offset,r[1]-e.yaxis._offset]:[null,null]};e.xaxis={_id:"x",c2p:function(t){return e.project(t)[0]}};e.yaxis={_id:"y",c2p:function(t){return e.project(t)[1]}};e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(e.mockAxis,t)};m.saveViewInitial=function(e){var t=e.center||{};var r=e.projection;var n=r.rotation||{};if(e._isScoped){this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":r.scale}}else if(e._isClipped){this.viewInitial={"projection.scale":r.scale,"projection.rotation.lon":n.lon,"projection.rotation.lat":n.lat}}else{this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":r.scale,"projection.rotation.lon":n.lon}}};m.render=function(){var e=this.projection;var t=e.getPath();var r;function n(t){var r=e(t.lonlat);return r?"translate("+r[0]+","+r[1]+")":null}function a(t){return e.isLonLatOverEdges(t.lonlat)?"none":null}for(r in this.basePaths){this.basePaths[r].attr("d",t)}for(r in this.dataPaths){this.dataPaths[r].attr("d",function(e){return t(e.geojson)})}for(r in this.dataPoints){this.dataPoints[r].attr("display",a).attr("transform",n)}};function x(e){var t=e.projection;var r=t.type;var a=n.geo[v.projNames[r]]();var i=e._isClipped?v.lonaxisSpan[r]/2:null;var o=["center","rotate","parallels","clipExtent"];var l=function(e){return e?a:[]};for(var s=0;s<o.length;s++){var u=o[s];if(typeof a[u]!=="function"){a[u]=l}}a.isLonLatOverEdges=function(e){if(a(e)===null){return true}if(i){var t=a.rotate();var r=n.geo.distance(e,[-t[0],-t[1]]);var o=i*Math.PI/180;return r>o}else{return false}};a.getPath=function(){return n.geo.path().projection(a)};a.getBounds=function(e){return a.getPath().bounds(e)};a.fitExtent=function(e,t){var r=e[1][0]-e[0][0];var n=e[1][1]-e[0][1];var i=a.clipExtent&&a.clipExtent();a.scale(150).translate([0,0]);if(i)a.clipExtent(null);var o=a.getBounds(t);var l=Math.min(r/(o[1][0]-o[0][0]),n/(o[1][1]-o[0][1]));var s=+e[0][0]+(r-l*(o[1][0]+o[0][0]))/2;var u=+e[0][1]+(n-l*(o[1][1]+o[0][1]))/2;if(i)a.clipExtent(i);return a.scale(l*150).translate([s,u])};a.precision(v.precision);if(i){a.clipAngle(i-v.clipPad)}return a}function b(e,t){var r=t[e];var a=r.dtick;var i=v.scopeDefaults[t.scope];var o=i.lonaxisRange;var l=i.lataxisRange;var s=e==="lonaxis"?[a]:[0,a];return n.geo.graticule().extent([[o[0],l[0]],[o[1],l[1]]]).step(s)}function _(e,t){var r=v.clipPad;var n=e[0]+r;var a=e[1]-r;var i=t[0]+r;var o=t[1]-r;if(n>0&&a<0)a+=360;var l=(a-n)/4;return{type:"Polygon",coordinates:[[[n,i],[n,o],[n+l,o],[n+2*l,o],[n+3*l,o],[a,o],[a,i],[a-l,i],[a-2*l,i],[a-3*l,i],[n,i]]]}}},{"../../components/color":44,"../../components/dragelement":66,"../../components/drawing":69,"../../components/fx":86,"../../lib":164,"../../lib/topojson_utils":188,"../../registry":258,"../cartesian/axes":209,"../cartesian/select":226,"../plots":249,"./constants":237,"./projections":243,"./zoom":244,d3:8,"topojson-client":27}],239:[function(e,t,r){"use strict";var n=e("./geo");var a=e("../../plots/get_data").getSubplotCalcData;var i=e("../../lib").counterRegex;var o="geo";r.name=o;r.attr=o;r.idRoot=o;r.idRegex=r.attrRegex=i(o);r.attributes=e("./layout/attributes");r.layoutAttributes=e("./layout/layout_attributes");r.supplyLayoutDefaults=e("./layout/defaults");r.plot=function e(t){var r=t._fullLayout;var i=t.calcdata;var l=r._subplots[o];if(window.PlotlyGeoAssets===undefined){window.PlotlyGeoAssets={topojson:{}}}for(var s=0;s<l.length;s++){var u=l[s];var c=a(i,o,u);var f=r[u];var d=f._subplot;if(!d){d=n({id:u,graphDiv:t,container:r._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot});r[u]._subplot=d}d.plot(c,r,t._promises)}};r.clean=function(e,t,r,n){var a=n._subplots[o]||[];for(var i=0;i<a.length;i++){var l=a[i];var s=n[l]._subplot;if(!t[l]&&!!s){s.framework.remove();s.clipDef.remove()}}};r.updateFx=function(e){var t=e._subplots[o];for(var r=0;r<t.length;r++){var n=e[t[r]];var a=n._subplot;a.updateFx(e,n)}}},{"../../lib":164,"../../plots/get_data":245,"./geo":238,"./layout/attributes":240,"./layout/defaults":241,"./layout/layout_attributes":242}],240:[function(e,t,r){"use strict";t.exports={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}}},{}],241:[function(e,t,r){"use strict";var n=e("../../subplot_defaults");var a=e("../constants");var i=e("./layout_attributes");var o=a.axesNames;t.exports=function e(t,r,a){n(t,r,a,{type:"geo",attributes:i,handleDefaults:l,partition:"y"})};function l(e,t,r){var n;var i=r("resolution");var l=r("scope");var s=a.scopeDefaults[l];var u=r("projection.type",s.projType);var c=t._isAlbersUsa=u==="albers usa";if(c)l=t.scope="usa";var f=t._isScoped=l!=="world";var d=t._isConic=u.indexOf("conic")!==-1;t._isClipped=!!a.lonaxisSpan[u];for(var p=0;p<o.length;p++){var v=o[p];var h=[30,10][p];var g;if(f){g=s[v+"Range"]}else{var y=a[v+"Span"];var m=(y[u]||y["*"])/2;var x=r("projection.rotation."+v.substr(0,3),s.projRotate[p]);g=[x-m,x+m]}var b=r(v+".range",g);r(v+".tick0",b[0]);r(v+".dtick",h);n=r(v+".showgrid");if(n){r(v+".gridcolor");r(v+".gridwidth")}}var _=t.lonaxis.range;var w=t.lataxis.range;var k=_[0];var M=_[1];if(k>0&&M<0)M+=360;var A=(k+M)/2;var T;if(!c){var L=f?s.projRotate:[A,0,0];T=r("projection.rotation.lon",L[0]);r("projection.rotation.lat",L[1]);r("projection.rotation.roll",L[2]);n=r("showcoastlines",!f);if(n){r("coastlinecolor");r("coastlinewidth")}n=r("showocean");if(n)r("oceancolor")}var S;var C;if(c){S=-96.6;C=38.7}else{S=f?A:T;C=(w[0]+w[1])/2}r("center.lon",S);r("center.lat",C);if(d){var P=s.projParallels||[0,60];r("projection.parallels",P)}r("projection.scale");n=r("showland");if(n)r("landcolor");n=r("showlakes");if(n)r("lakecolor");n=r("showrivers");if(n){r("rivercolor");r("riverwidth")}n=r("showcountries",f&&l!=="usa");if(n){r("countrycolor");r("countrywidth")}if(l==="usa"||l==="north america"&&i===50){r("showsubunits",true);r("subunitcolor");r("subunitwidth")}if(!f){n=r("showframe",true);if(n){r("framecolor");r("framewidth")}}r("bgcolor")}},{"../../subplot_defaults":257,"../constants":237,"./layout_attributes":242}],242:[function(e,t,r){"use strict";var n=e("../../../components/color/attributes");var a=e("../../domain").attributes;var i=e("../constants");var o=e("../../../plot_api/edit_types").overrideAll;var l={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:false},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:n.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};t.exports=o({domain:a({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:true},scope:{valType:"enumerated",values:Object.keys(i.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(i.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:n.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:false},landcolor:{valType:"color",dflt:i.landColor},showocean:{valType:"boolean",dflt:false},oceancolor:{valType:"color",dflt:i.waterColor},showlakes:{valType:"boolean",dflt:false},lakecolor:{valType:"color",dflt:i.waterColor},showrivers:{valType:"boolean",dflt:false},rivercolor:{valType:"color",dflt:i.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:n.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:n.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:n.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:n.background},lonaxis:l,lataxis:l},"plot","from-root")},{"../../../components/color/attributes":43,"../../../plot_api/edit_types":192,"../../domain":234,"../constants":237}],243:[function(e,t,r){"use strict";function n(e){e.geo.project=function(e,t){var a=t.stream;if(!a)throw new Error("not yet supported");return(e&&n.hasOwnProperty(e.type)?n[e.type]:r)(e,a)};function t(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:r(e.geometry,t)}}function r(t,n){if(!t)return null;if(t.type==="GeometryCollection")return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return r(e,n)})};if(!u.hasOwnProperty(t.type))return null;var a=u[t.type];e.geo.stream(t,n(a));return a.result()}var n={Feature:t,FeatureCollection:function(e,r){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,r)})}}};var a=[],i=[];var o={point:function(e,t){a.push([e,t])},result:function(){var e=!a.length?null:a.length<2?{type:"Point",coordinates:a[0]}:{type:"MultiPoint",coordinates:a};a=[];return e}};var l={lineStart:c,point:function(e,t){a.push([e,t])},lineEnd:function(){if(a.length)i.push(a),a=[]},result:function(){var e=!i.length?null:i.length<2?{type:"LineString",coordinates:i[0]}:{type:"MultiLineString",coordinates:i};i=[];return e}};var s={polygonStart:c,lineStart:c,point:function(e,t){a.push([e,t])},lineEnd:function(){var e=a.length;if(e){do{a.push(a[0].slice())}while(++e<4);i.push(a),a=[]}},polygonEnd:c,result:function(){if(!i.length)return null;var e=[],t=[];i.forEach(function(r){if(f(r))e.push([r]);else t.push(r)});t.forEach(function(t){var r=t[0];e.some(function(e){if(d(e[0],r)){e.push(t);return true}})||e.push([t])});i=[];return!e.length?null:e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}}};var u={Point:o,MultiPoint:o,LineString:l,MultiLineString:l,Polygon:s,MultiPolygon:s,Sphere:s};function c(){}function f(e){if((r=e.length)<4)return false;var t=0,r,n=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];while(++t<r)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n<=0}function d(e,t){var r=t[0],n=t[1],a=false;for(var i=0,o=e.length,l=o-1;i<o;l=i++){var s=e[i],u=s[0],c=s[1],f=e[l],d=f[0],p=f[1];if(c>n^p>n&&r<(d-u)*(n-c)/(p-c)+u)a=!a}return a}var p=1e-6,v=p*p,h=Math.PI,g=h/2,y=Math.sqrt(h),m=h/180,x=180/h;function b(e){return e?e/Math.sin(e):1}function _(e){return e>0?1:e<0?-1:0}function w(e){return e>1?g:e<-1?-g:Math.asin(e)}function k(e){return e>1?0:e<-1?h:Math.acos(e)}function M(e){return e>0?Math.sqrt(e):0}var A=e.geo.projection,T=e.geo.projectionMutator;e.geo.interrupt=function(t){var r=[[[[-h,0],[0,g],[h,0]]],[[[-h,0],[0,-g],[h,0]]]];var n;function a(e,n){var a=n<0?-1:+1,i=r[+(n<0)];for(var o=0,l=i.length-1;o<l&&e>i[o][2][0];++o);var s=t(e-i[o][1][0],n);s[0]+=t(i[o][1][0],a*n>a*i[o][0][1]?i[o][0][1]:n)[0];return s}function i(){n=r.map(function(e){return e.map(function(e){var r=t(e[0][0],e[0][1])[0],n=t(e[2][0],e[2][1])[0],a=t(e[1][0],e[0][1])[1],i=t(e[1][0],e[1][1])[1],o;if(a>i)o=a,a=i,i=o;return[[r,a],[n,i]]})})}if(t.invert)a.invert=function(e,i){var o=n[+(i<0)],l=r[+(i<0)];for(var s=0,u=o.length;s<u;++s){var f=o[s];if(f[0][0]<=e&&e<f[1][0]&&f[0][1]<=i&&i<f[1][1]){var d=t.invert(e-t(l[s][1][0],0)[0],i);d[0]+=l[s][1][0];return c(a(d[0],d[1]),[e,i])?d:null}}};var o=e.geo.projection(a),l=o.stream;o.stream=function(t){var r=o.rotate(),n=l(t),a=(o.rotate([0,0]),l(t));o.rotate(r);n.sphere=function(){e.geo.stream(s(),a)};return n};o.lobes=function(e){if(!arguments.length)return r.map(function(e){return e.map(function(e){return[[e[0][0]*180/h,e[0][1]*180/h],[e[1][0]*180/h,e[1][1]*180/h],[e[2][0]*180/h,e[2][1]*180/h]]})});r=e.map(function(e){return e.map(function(e){return[[e[0][0]*h/180,e[0][1]*h/180],[e[1][0]*h/180,e[1][1]*h/180],[e[2][0]*h/180,e[2][1]*h/180]]})});i();return o};function s(){var t=1e-6,n=[];for(var a=0,i=r[0].length;a<i;++a){var o=r[0][a],l=o[0][0]*180/h,s=o[0][1]*180/h,c=o[1][1]*180/h,f=o[2][0]*180/h,d=o[2][1]*180/h;n.push(u([[l+t,s+t],[l+t,c-t],[f-t,c-t],[f-t,d+t]],30))}for(var a=r[1].length-1;a>=0;--a){var o=r[1][a],l=o[0][0]*180/h,s=o[0][1]*180/h,c=o[1][1]*180/h,f=o[2][0]*180/h,d=o[2][1]*180/h;n.push(u([[f-t,d-t],[f-t,c+t],[l+t,c+t],[l+t,s-t]],30))}return{type:"Polygon",coordinates:[e.merge(n)]}}function u(e,t){var r=-1,n=e.length,a=e[0],i,o,l,s=[];while(++r<n){i=e[r];o=(i[0]-a[0])/t;l=(i[1]-a[1])/t;for(var u=0;u<t;++u)s.push([a[0]+u*o,a[1]+u*l]);a=i}s.push(i);return s}function c(e,t){return Math.abs(e[0]-t[0])<p&&Math.abs(e[1]-t[1])<p}return o};function L(e,t){var r=(2+g)*Math.sin(t);t/=2;for(var n=0,a=Infinity;n<10&&Math.abs(a)>p;n++){var i=Math.cos(t);t-=a=(t+Math.sin(t)*(i+2)-r)/(2*i*(1+i))}return[2/Math.sqrt(h*(4+h))*e*(1+Math.cos(t)),2*Math.sqrt(h/(4+h))*Math.sin(t)]}L.invert=function(e,t){var r=.5*t*Math.sqrt((4+h)/h),n=w(r),a=Math.cos(n);return[e/(2/Math.sqrt(h*(4+h))*(1+a)),w((n+r*(a+2))/(2+g))]};(e.geo.eckert4=function(){return A(L)}).raw=L;var S=e.geo.azimuthalEqualArea.raw;function C(e,t){if(arguments.length<2)t=e;if(t===1)return S;if(t===Infinity)return z;function r(r,n){var a=S(r/t,n);a[0]*=e;return a}r.invert=function(r,n){var a=S.invert(r/e,n);a[0]*=t;return a};return r}function P(){var e=2,t=T(C),r=t(e);r.coefficient=function(r){if(!arguments.length)return e;return t(e=+r)};return r}function z(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}z.invert=function(e,t){var r=2*w(t/2);return[e*Math.cos(r/2)/Math.cos(r),r]};(e.geo.hammer=P).raw=C;function O(e,t){return[3*e/(2*h)*Math.sqrt(h*h/3-t*t),t]}O.invert=function(e,t){return[2/3*h*e/Math.sqrt(h*h/3-t*t),t]};(e.geo.kavrayskiy7=function(){return A(O)}).raw=O;function D(e,t){return[e,1.25*Math.log(Math.tan(h/4+.4*t))]}D.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*h]};(e.geo.miller=function(){return A(D)}).raw=D;function E(e){return function(t){var r=e*Math.sin(t),n=30,a;do{t-=a=(t+Math.sin(t)-r)/(1+Math.cos(t))}while(Math.abs(a)>p&&--n>0);return t/2}}function R(e,t,r){var n=E(r);function a(r,a){return[e*r*Math.cos(a=n(a)),t*Math.sin(a)]}a.invert=function(n,a){var i=w(a/t);return[n/(e*Math.cos(i)),w((2*i+Math.sin(2*i))/r)]};return a}var I=E(h),N=R(Math.SQRT2/g,Math.SQRT2,h);(e.geo.mollweide=function(){return A(N)}).raw=N;function F(e,t){var r=t*t,n=r*r;return[e*(.8707-.131979*r+n*(-.013791+n*(.003971*r-.001529*n))),t*(1.007226+r*(.015085+n*(-.044475+.028874*r-.005916*n)))]}F.invert=function(e,t){var r=t,n=25,a;do{var i=r*r,o=i*i;r-=a=(r*(1.007226+i*(.015085+o*(-.044475+.028874*i-.005916*o)))-t)/(1.007226+i*(.015085*3+o*(-.044475*7+.028874*9*i-.005916*11*o)))}while(Math.abs(a)>p&&--n>0);return[e/(.8707+(i=r*r)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),r]};(e.geo.naturalEarth=function(){return A(F)}).raw=F;var j=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j.forEach(function(e){e[1]*=1.0144});function B(e,t){var r=Math.min(18,Math.abs(t)*36/h),n=Math.floor(r),a=r-n,i=(f=j[n])[0],o=f[1],l=(f=j[++n])[0],s=f[1],u=(f=j[Math.min(19,++n)])[0],c=f[1],f;return[e*(l+a*(u-i)/2+a*a*(u-2*l+i)/2),(t>0?g:-g)*(s+a*(c-o)/2+a*a*(c-2*s+o)/2)]}B.invert=function(e,t){var r=t/g,n=r*90,a=Math.min(18,Math.abs(n/5)),i=Math.max(0,Math.floor(a));do{var o=j[i][1],l=j[i+1][1],s=j[Math.min(19,i+2)][1],u=s-o,c=s-2*l+o,f=2*(Math.abs(r)-l)/u,d=c/u,p=f*(1-d*f*(1-2*d*f));if(p>=0||i===1){n=(t>=0?5:-5)*(p+a);var h=50,y;do{a=Math.min(18,Math.abs(n)/5);i=Math.floor(a);p=a-i;o=j[i][1];l=j[i+1][1];s=j[Math.min(19,i+2)][1];n-=(y=(t>=0?g:-g)*(l+p*(s-o)/2+p*p*(s-2*l+o)/2)-t)*x}while(Math.abs(y)>v&&--h>0);break}}while(--i>=0);var b=j[i][0],_=j[i+1][0],w=j[Math.min(19,i+2)][0];return[e/(_+p*(w-b)/2+p*p*(w-2*_+b)/2),n*m]};(e.geo.robinson=function(){return A(B)}).raw=B;function q(e,t){return[e*Math.cos(t),t]}q.invert=function(e,t){return[e/Math.cos(t),t]};(e.geo.sinusoidal=function(){return A(q)}).raw=q;function H(e,t){var r=Math.cos(t),n=b(k(r*Math.cos(e/=2)));return[2*r*Math.sin(e)*n,Math.sin(t)*n]}H.invert=function(e,t){if(e*e+4*t*t>h*h+p)return;var r=e,n=t,a=25;do{var i=Math.sin(r),o=Math.sin(r/2),l=Math.cos(r/2),s=Math.sin(n),u=Math.cos(n),c=Math.sin(2*n),f=s*s,d=u*u,v=o*o,g=1-d*l*l,y=g?k(u*l)*Math.sqrt(m=1/g):m=0,m,x=2*y*u*o-e,b=y*s-t,_=m*(d*v+y*u*l*f),w=m*(.5*i*c-y*2*s*o),M=m*.25*(c*o-y*s*d*i),A=m*(f*l+y*v*u),T=w*M-A*_;if(!T)break;var L=(b*w-x*A)/T,S=(x*M-b*_)/T;r-=L,n-=S}while((Math.abs(L)>p||Math.abs(S)>p)&&--a>0);return[r,n]};(e.geo.aitoff=function(){return A(H)}).raw=H;function U(e,t){var r=H(e,t);return[(r[0]+e/g)/2,(r[1]+t)/2]}U.invert=function(e,t){var r=e,n=t,a=25;do{var i=Math.cos(n),o=Math.sin(n),l=Math.sin(2*n),s=o*o,u=i*i,c=Math.sin(r),f=Math.cos(r/2),d=Math.sin(r/2),v=d*d,h=1-u*f*f,y=h?k(i*f)*Math.sqrt(m=1/h):m=0,m,x=.5*(2*y*i*d+r/g)-e,b=.5*(y*o+n)-t,_=.5*m*(u*v+y*i*f*s)+.5/g,w=m*(c*l/4-y*o*d),M=.125*m*(l*d-y*o*u*c),A=.5*m*(s*f+y*v*i)+.5,T=w*M-A*_,L=(b*w-x*A)/T,S=(x*M-b*_)/T;r-=L,n-=S}while((Math.abs(L)>p||Math.abs(S)>p)&&--a>0);return[r,n]};(e.geo.winkel3=function(){return A(U)}).raw=U}t.exports=n},{}],244:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=Math.PI/180;var o=180/Math.PI;var l={cursor:"pointer"};var s={cursor:"auto"};function u(e,t){var r=e.projection;var n;if(t._isScoped){n=d}else if(t._isClipped){n=v}else{n=p}return n(e,r)}t.exports=u;function c(e,t){return n.behavior.zoom().translate(t.translate()).scale(t.scale())}function f(e,t,r){var n=e.id;var i=e.graphDiv;var o=i.layout[n];var l=i._fullLayout[n];var s={};function u(e,t){var r=a.nestedProperty(l,e);if(r.get()!==t){r.set(t);a.nestedProperty(o,e).set(t);s[n+"."+e]=t}}r(u);u("projection.scale",t.scale()/e.fitScale);i.emit("plotly_relayout",s)}function d(e,t){var r=c(e,t);function a(){n.select(this).style(l)}function i(){t.scale(n.event.scale).translate(n.event.translate);e.render()}function o(r){var n=t.invert(e.midPt);r("center.lon",n[0]);r("center.lat",n[1])}function u(){n.select(this).style(s);f(e,t,o)}r.on("zoomstart",a).on("zoom",i).on("zoomend",u);return r}function p(e,t){var r=c(e,t);var a=2;var i,o,u,d,p,v,h,g;function y(e){return t.invert(e)}function m(e){var r=t(y(e));return Math.abs(r[0]-e[0])>a||Math.abs(r[1]-e[1])>a}function x(){n.select(this).style(l);i=n.mouse(this);o=t.rotate();u=t.translate();d=o;p=y(i)}function b(){v=n.mouse(this);if(m(i)){r.scale(t.scale());r.translate(t.translate());return}t.scale(n.event.scale);t.translate([u[0],n.event.translate[1]]);if(!p){i=v;p=y(i)}else if(y(v)){g=y(v);h=[d[0]+(g[0]-p[0]),o[1],o[2]];t.rotate(h);d=h}e.render()}function _(){n.select(this).style(s);f(e,t,w)}function w(r){var n=t.rotate();var a=t.invert(e.midPt);r("projection.rotation.lon",-n[0]);r("center.lon",a[0]);r("center.lat",a[1])}r.on("zoomstart",x).on("zoom",b).on("zoomend",_);return r}function v(e,t){var r={r:t.rotate(),k:t.scale()},a=c(e,t),i=L(a,"zoomstart","zoom","zoomend"),o=0,u=a.on;var d;a.on("zoomstart",function(){n.select(this).style(l);var e=n.mouse(this),o=t.rotate(),s=o,c=t.translate(),f=g(o);d=h(t,e);u.call(a,"zoom",function(){var a=n.mouse(this);t.scale(r.k=n.event.scale);if(!d){e=a;d=h(t,e)}else if(h(t,a)){t.rotate(o).translate(c);var l=h(t,a),u=m(d,l),p=k(y(f,u)),g=r.r=x(p,d,s);if(!isFinite(g[0])||!isFinite(g[1])||!isFinite(g[2])){g=s}t.rotate(g);s=g}v(i.of(this,arguments))});p(i.of(this,arguments))}).on("zoomend",function(){n.select(this).style(s);u.call(a,"zoom",null);b(i.of(this,arguments));f(e,t,_)}).on("zoom.redraw",function(){e.render()});function p(e){if(!o++)e({type:"zoomstart"})}function v(e){e({type:"zoom"})}function b(e){if(!--o)e({type:"zoomend"})}function _(e){var r=t.rotate();e("projection.rotation.lon",-r[0]);e("projection.rotation.lat",-r[1])}return n.rebind(a,i,"on")}function h(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&M(r)}function g(e){var t=.5*e[0]*i,r=.5*e[1]*i,n=.5*e[2]*i,a=Math.sin(t),o=Math.cos(t),l=Math.sin(r),s=Math.cos(r),u=Math.sin(n),c=Math.cos(n);return[o*s*c+a*l*u,a*s*c-o*l*u,o*l*c+a*s*u,o*s*u-a*l*c]}function y(e,t){var r=e[0],n=e[1],a=e[2],i=e[3],o=t[0],l=t[1],s=t[2],u=t[3];return[r*o-n*l-a*s-i*u,r*l+n*o+a*u-i*s,r*s-n*u+a*o+i*l,r*u+n*s-a*l+i*o]}function m(e,t){if(!e||!t)return;var r=T(e,t),n=Math.sqrt(A(r,r)),a=.5*Math.acos(Math.max(-1,Math.min(1,A(e,t)))),i=Math.sin(a)/n;return n&&[Math.cos(a),r[2]*i,-r[1]*i,r[0]*i]}function x(e,t,r){var n=w(t,2,e[0]);n=w(n,1,e[1]);n=w(n,0,e[2]-r[2]);var a=t[0],i=t[1],l=t[2],s=n[0],u=n[1],c=n[2],f=Math.atan2(i,a)*o,d=Math.sqrt(a*a+i*i),p,v;if(Math.abs(u)>d){v=(u>0?90:-90)-f;p=0}else{v=Math.asin(u/d)*o-f;p=Math.sqrt(d*d-u*u)}var h=180-v-2*f,g=(Math.atan2(c,s)-Math.atan2(l,p))*o,y=(Math.atan2(c,s)-Math.atan2(l,-p))*o;var m=b(r[0],r[1],v,g),x=b(r[0],r[1],h,y);if(m<=x)return[v,g,r[2]];else return[h,y,r[2]]}function b(e,t,r,n){var a=_(r-e),i=_(n-t);return Math.sqrt(a*a+i*i)}function _(e){return(e%360+540)%360-180}function w(e,t,r){var n=r*i,a=e.slice(),o=t===0?1:0,l=t===2?1:2,s=Math.cos(n),u=Math.sin(n);a[o]=e[o]*s-e[l]*u;a[l]=e[l]*s+e[o]*u;return a}function k(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*o,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*o,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*o]}function M(e){var t=e[0]*i,r=e[1]*i,n=Math.cos(r);return[n*Math.cos(t),n*Math.sin(t),Math.sin(r)]}function A(e,t){var r=0;for(var n=0,a=e.length;n<a;++n)r+=e[n]*t[n];return r}function T(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function L(e){var t=0,r=arguments.length,a=[];while(++t<r)a.push(arguments[t]);var i=n.dispatch.apply(null,a);i.of=function(t,r){return function(a){var o;try{o=a.sourceEvent=n.event;a.target=e;n.event=a;i[a.type].apply(t,r)}finally{n.event=o}}};return i}},{"../../lib":164,d3:8}],245:[function(e,t,r){"use strict";var n=e("../registry");var a=e("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(e,t,r){var a=n.subplotsRegistry[t];if(!a)return[];var i=a.attr;var o=[];for(var l=0;l<e.length;l++){var s=e[l];var u=s[0].trace;if(u[i]===r)o.push(s)}return o};r.getModuleCalcData=function(e,t){var r=[];var a=[];var i;if(typeof t==="string"){i=n.getModule(t).plot}else if(typeof t==="function"){i=t}else{i=t.plot}if(!i){return[r,e]}for(var o=0;o<e.length;o++){var l=e[o];var s=l[0].trace;if(s.visible!==true)continue;if(s._module.plot===i){r.push(l)}else{a.push(l)}}return[r,a]};r.getSubplotData=function e(t,r,i){if(!n.subplotsRegistry[r])return[];var o=n.subplotsRegistry[r].attr;var l=[];var s,u,c;if(r==="gl2d"){var f=i.match(a);u="x"+f[1];c="y"+f[2]}for(var d=0;d<t.length;d++){s=t[d];if(r==="gl2d"&&n.traceIs(s,"gl2d")){if(s[o[0]]===u&&s[o[1]]===c){l.push(s)}}else{if(s[o]===i)l.push(s)}}return l};r.getUidsFromCalcData=function(e){var t={};for(var r=0;r<e.length;r++){var n=e[r][0].trace;t[n.uid]=1}return t}},{"../registry":258,"./cartesian/constants":214}],246:[function(e,t,r){"use strict";function n(e,t){var r=[0,0,0,0];var n,a;for(n=0;n<4;++n){for(a=0;a<4;++a){r[a]+=e[4*n+a]*t[n]}}return r}function a(e,t){var r=n(e.projection,n(e.view,n(e.model,[t[0],t[1],t[2],1])));return r}t.exports=a},{}],247:[function(e,t,r){"use strict";var n=e("./font_attributes");var a=e("../components/color/attributes");var i=n({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif';i.size.dflt=12;i.color.dflt=a.defaultLine;t.exports={font:i,title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:false,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:a.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:a.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:false,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:a.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},template:{valType:"any",editType:"calc"}}},{"../components/color/attributes":43,"./font_attributes":235}],248:[function(e,t,r){"use strict";t.exports={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"}},{}],249:[function(e,t,r){"use strict";var n=e("d3");var a=e("fast-isnumeric");var i=e("../registry");var o=e("../plot_api/plot_schema");var l=e("../plot_api/plot_template");var s=e("../lib");var u=e("../components/color");var c=e("../constants/numerical").BADNUM;var f=e("../plots/cartesian/axis_ids");var d=e("./sort_modules").sortBasePlotModules;var p=e("./animation_attributes");var v=e("./frame_attributes");var h=s.relinkPrivateKeys;var g=s._;var y=t.exports={};s.extendFlat(y,i);y.attributes=e("./attributes");y.attributes.type.values=y.allTypes;y.fontAttrs=e("./font_attributes");y.layoutAttributes=e("./layout_attributes");y.fontWeight="normal";var m=y.transformsRegistry;var x=e("./command");y.executeAPICommand=x.executeAPICommand;y.computeAPICommandBindings=x.computeAPICommandBindings;y.manageCommandObserver=x.manageCommandObserver;y.hasSimpleAPICommandBindings=x.hasSimpleAPICommandBindings;y.redrawText=function(e){e=s.getGraphDiv(e);if(e.data&&e.data[0]&&e.data[0].r)return;return new Promise(function(t){setTimeout(function(){i.getComponentMethod("annotations","draw")(e);i.getComponentMethod("legend","draw")(e);(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()});t(y.previousPromises(e))},300)})};y.resize=function(e){e=s.getGraphDiv(e);return new Promise(function(t,r){function n(e){var t=window.getComputedStyle(e).display;return!t||t==="none"}if(!e||n(e)){r(new Error("Resize must be passed a displayed plot div element."))}if(e._redrawTimer)clearTimeout(e._redrawTimer);e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||n(e)){t(e);return}delete e.layout.width;delete e.layout.height;var r=e.changed;e.autoplay=true;i.call("relayout",e,{autosize:true}).then(function(){e.changed=r;t(e)})},100)})};y.previousPromises=function(e){if((e._promises||[]).length){return Promise.all(e._promises).then(function(){e._promises=[]})}};y.addLinks=function(e){if(!e._context.showLink&&!e._context.showSources)return;var t=e._fullLayout;var r=s.ensureSingle(t._paper,"text","js-plot-link-container",function(e){e.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:u.defaultLine,"pointer-events":"all"}).each(function(){var e=n.select(this);e.append("tspan").classed("js-link-to-tool",true);e.append("tspan").classed("js-link-spacer",true);e.append("tspan").classed("js-sourcelinks",true)})});var a=r.node();var i={y:t._paper.attr("height")-9};if(document.body.contains(a)&&a.getComputedTextLength()>=t.width-20){i["text-anchor"]="start";i.x=5}else{i["text-anchor"]="end";i.x=t._paper.attr("width")-7}r.attr(i);var o=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),c=r.select(".js-sourcelinks");if(e._context.showSources)e._context.showSources(e);if(e._context.showLink)b(e,o);l.text(o.text()&&c.text()?" - ":"")};function b(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData){r.on("click",function(){y.sendDataToCloud(e)})}else{var n=window.location.pathname.split("/");var a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}y.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;var r=n.select(e).append("div").attr("id","hiddenform").style("display","none");var a=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"});var i=a.append("input").attr({type:"text",name:"data"});i.node().value=y.graphJson(e,false,"keepdata");a.node().submit();r.remove();e.emit("plotly_afterexport");return false};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"];var w=["year","month","dayMonth","dayMonthYear"];y.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc;var n=e._fullLayout||{};if(n._skipDefaults){delete n._skipDefaults;return}var a=e._fullLayout={};var o=e.layout||{};var l=e._fullData||[];var u=e._fullData=[];var c=e.data||[];var p=e.calcdata||[];var v=e._context||{};var m;if(!e._transitionData)y.createTransitionData(e);a._dfltTitle={plot:g(e,"Click to enter Plot title"),x:g(e,"Click to enter X axis title"),y:g(e,"Click to enter Y axis title"),colorbar:g(e,"Click to enter Colorscale title"),annotation:g(e,"new text")};a._traceWord=g(e,"trace");var x=T(e,_);a._mapboxAccessToken=v.mapboxAccessToken;if(n._initialAutoSizeIsDone){var b=n.width,M=n.height;y.supplyLayoutGlobalDefaults(o,a,x);if(!o.width)a.width=b;if(!o.height)a.height=M;y.sanitizeMargins(a)}else{y.supplyLayoutGlobalDefaults(o,a,x);var S=!o.width||!o.height,C=a.autosize,P=v.autosizable,z=S&&(C||P);if(z)y.plotAutoSize(e,o,a);else if(S)y.sanitizeMargins(a);if(!C&&S){o.width=a.width;o.height=a.height}}a._d3locale=L(x,a.separators);a._extraFormat=T(e,w);a._initialAutoSizeIsDone=true;a._dataLength=c.length;a._modules=[];a._basePlotModules=[];var O=a._subplots=A();var D=a._splomAxes={x:{},y:{}};var E=a._splomSubplots={};a._splomGridDflt={};a._requestRangeslider={};a._traceUids=k(l,c);a._globalTransforms=(e._context||{}).globalTransforms;y.supplyDataDefaults(c,u,o,a);var R=Object.keys(D.x);var I=Object.keys(D.y);if(R.length>1&&I.length>1){i.getComponentMethod("grid","sizeDefaults")(o,a);for(m=0;m<R.length;m++){s.pushUnique(O.xaxis,R[m])}for(m=0;m<I.length;m++){s.pushUnique(O.yaxis,I[m])}for(var N in E){s.pushUnique(O.cartesian,N)}}a._has=y._hasPlotType.bind(a);var F=a._modules;for(m=0;m<F.length;m++){var j=F[m];if(j.cleanData)j.cleanData(u)}if(l.length===u.length){for(m=0;m<u.length;m++){h(u[m],l[m])}}y.supplyLayoutModuleDefaults(o,a,u,e._transitionData);a._hasOnlyLargeSploms=a._basePlotModules.length===1&&a._basePlotModules[0].name==="splom"&&R.length>15&&I.length>15&&a.shapes.length===0&&a.images.length===0;a._hasCartesian=a._has("cartesian");a._hasGeo=a._has("geo");a._hasGL3D=a._has("gl3d");a._hasGL2D=a._has("gl2d");a._hasTernary=a._has("ternary");a._hasPie=a._has("pie");y.linkSubplots(u,a,l,n);y.cleanPlot(u,a,l,n,p);h(a,n);y.doAutoMargin(e);var B=f.list(e);for(m=0;m<B.length;m++){var q=B[m];q.setScale()}if(!r&&p.length===u.length){y.supplyDefaultsUpdateCalc(p,u)}a._basePlotModules.sort(d)};y.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];var a=e[r][0];if(a&&a.trace){var i=a.trace;if(i._hasCalcTransform){var o=i._arrayAttrs;var l,u,c;for(l=0;l<o.length;l++){u=o[l];c=s.nestedProperty(i,u).get().slice();s.nestedProperty(n,u).set(c)}}a.trace=n}}};function k(e,t){var r=t.length;var n=[];var a,i;for(a=0;a<e.length;a++){var o=e[a]._fullInput;if(o!==i)n.push(o);i=o}var l=n.length;var u=new Array(r);var c={};function f(e,t){u[t]=e;c[e]=1}function d(e,t){if(e&&typeof e==="string"&&!c[e]){f(e,t);return true}}for(a=0;a<r;a++){if(d(t[a].uid,a))continue;if(a<l&&d(n[a].uid,a))continue;f(s.randstr(c),a)}return u}var M;function A(){var e={};var t,r;if(!M){M=[];var n=i.subplotsRegistry;for(var a in n){var o=n[a];var l=o.attr;if(l){M.push(a);if(Array.isArray(l)){for(r=0;r<l.length;r++){s.pushUnique(M,l[r])}}}}}for(t=0;t<M.length;t++){e[M[t]]=[]}return e}function T(e,t){var r=e._context.locale;if(!r)r==="en-US";var n=false;var a={};function o(e){var r=true;for(var i=0;i<t.length;i++){var o=t[i];if(!a[o]){if(e[o]){a[o]=e[o]}else r=false}}if(r)n=true}for(var l=0;l<2;l++){var s=e._context.locales;for(var u=0;u<2;u++){var c=(s[r]||{}).format;if(c){o(c);if(n)break}s=i.localeRegistry}var f=r.split("-")[0];if(n||f===r)break;r=f}if(!n)o(i.localeRegistry.en.format);return a}function L(e,t){e.decimal=t.charAt(0);e.thousands=t.charAt(1);return n.locale(e)}y.createTransitionData=function(e){if(!e._transitionData){e._transitionData={}}if(!e._transitionData._frames){e._transitionData._frames=[]}if(!e._transitionData._frameHash){e._transitionData._frameHash={}}if(!e._transitionData._counter){e._transitionData._counter=0}if(!e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks=[]}};y._hasPlotType=function(e){var t;var r=this._basePlotModules||[];for(t=0;t<r.length;t++){if(r[t].name===e)return true}var n=this._modules||[];for(t=0;t<n.length;t++){var a=n[t].name;if(a===e)return true;var o=i.modules[a];if(o&&o.categories[e])return true}return false};y.cleanPlot=function(e,t,r,n,a){var i,o;var l=n._basePlotModules||[];for(i=0;i<l.length;i++){var s=l[i];if(s.clean){s.clean(e,t,r,n,a)}}var u=n._has&&n._has("gl");var c=t._has&&t._has("gl");if(u&&!c){if(n._glcontainer!==undefined){n._glcontainer.selectAll(".gl-canvas").remove();n._glcontainer.selectAll(".no-webgl").remove();n._glcanvas=null}}var f=!!n._infolayer;e:for(i=0;i<r.length;i++){var d=r[i],p=d.uid;for(o=0;o<e.length;o++){var v=e[o];if(p===v.uid)continue e}if(f){n._infolayer.select(".cb"+p).remove()}}if(n._zoomlayer){n._zoomlayer.selectAll(".select-outline").remove()}};y.linkSubplots=function(e,t,r,n){var a=n._plots||{};var i=t._plots={};var o=t._subplots;var l={_fullData:e,_fullLayout:t};var s=o.cartesian.concat(o.gl2d||[]);var u,c,d,p;for(u=0;u<s.length;u++){d=s[u];var v=a[d];var h=f.getFromId(l,d,"x");var g=f.getFromId(l,d,"y");var y;if(v){y=i[d]=v;if(y.xaxis.layer!==h.layer){y.xlines.attr("d",null);y.xaxislayer.selectAll("*").remove()}if(y.yaxis.layer!==g.layer){y.ylines.attr("d",null);y.yaxislayer.selectAll("*").remove()}}else{y=i[d]={};y.id=d}y.xaxis=h;y.yaxis=g;y._hasClipOnAxisFalse=false;for(c=0;c<e.length;c++){var m=e[c];if(m.xaxis===y.xaxis._id&&m.yaxis===y.yaxis._id&&m.cliponaxis===false){y._hasClipOnAxisFalse=true;break}}}var x=f.list(l,null,true);for(u=0;u<x.length;u++){p=x[u];var b=null;if(p.overlaying){b=f.getFromId(l,p.overlaying);if(b&&b.overlaying){p.overlaying=false;b=null}}p._mainAxis=b||p;if(b)p.domain=b.domain.slice();p._anchorAxis=p.anchor==="free"?null:f.getFromId(l,p.anchor)}};y.clearExpandedTraceDefaultColors=function(e){var t,r,n;function a(e,n,a,i){r[i]=n;r.length=i+1;if(e.valType==="color"&&e.dflt===undefined){t.push(r.join("."))}}r=[];t=e._module._colorAttrs;if(!t){e._module._colorAttrs=t=[];o.crawl(e._module.attributes,a)}for(n=0;n<t.length;n++){var i=s.nestedProperty(e,"_input."+t[n]);if(!i.get()){s.nestedProperty(e,t[n]).set(null)}}};y.supplyDataDefaults=function(e,t,r,n){var a=n._modules;var o=n._basePlotModules;var u=0;var c=0;var f,d,p;n._transformModules=[];function v(e){t.push(e);var r=e._module;if(!r)return;if(e.visible===true)s.pushUnique(a,r);s.pushUnique(o,e._module.basePlotModule);u++;if(e._input.visible!==false)c++}var g={};var m=[];var x=(r.template||{}).data||{};var b=l.traceTemplater(x);for(f=0;f<e.length;f++){p=e[f];d=b.newTrace(p);d.uid=n._traceUids[f];y.supplyTraceDefaults(p,d,c,n,f);d.uid=n._traceUids[f];d.index=f;d._input=p;d._expandedIndex=u;if(d.transforms&&d.transforms.length){var _=C(d,t,r,n);for(var w=0;w<_.length;w++){var k=_[w];var M={_template:d._template,type:d.type,uid:d.uid+w};y.supplyTraceDefaults(k,M,u,n,f);h(M,k);M.index=f;M._input=p;M._fullInput=d;M._expandedIndex=u;M._expandedInput=k;v(M)}}else{d._fullInput=d;d._expandedInput=d;v(d)}if(i.traceIs(d,"carpetAxis")){g[d.carpet]=d}if(i.traceIs(d,"carpetDependent")){m.push(f)}}for(f=0;f<m.length;f++){d=t[m[f]];if(!d.visible)continue;var A=g[d.carpet];d._carpet=A;if(!A||!A.visible){d.visible=false;continue}d.xaxis=A.xaxis;d.yaxis=A.yaxis}};y.supplyAnimationDefaults=function(e){e=e||{};var t;var r={};function n(t,n){return s.coerce(e||{},r,p,t,n)}n("mode");n("direction");n("fromcurrent");if(Array.isArray(e.frame)){r.frame=[];for(t=0;t<e.frame.length;t++){r.frame[t]=y.supplyAnimationFrameDefaults(e.frame[t]||{})}}else{r.frame=y.supplyAnimationFrameDefaults(e.frame||{})}if(Array.isArray(e.transition)){r.transition=[];for(t=0;t<e.transition.length;t++){r.transition[t]=y.supplyAnimationTransitionDefaults(e.transition[t]||{})}}else{r.transition=y.supplyAnimationTransitionDefaults(e.transition||{})}return r};y.supplyAnimationFrameDefaults=function(e){var t={};function r(r,n){return s.coerce(e||{},t,p.frame,r,n)}r("duration");r("redraw");return t};y.supplyAnimationTransitionDefaults=function(e){var t={};function r(r,n){return s.coerce(e||{},t,p.transition,r,n)}r("duration");r("easing");return t};y.supplyFrameDefaults=function(e){var t={};function r(r,n){return s.coerce(e,t,v,r,n)}r("group");r("name");r("traces");r("baseframe");r("data");r("layout");return t};y.supplyTraceDefaults=function(e,t,r,n,a){var o=n.colorway||u.defaults;var l=o[r%o.length];var c;function f(r,n){return s.coerce(e,t,y.attributes,r,n)}var d=f("visible");f("type");f("name",n._traceWord+" "+a);var p=y.getModule(t);t._module=p;if(p){var v=p.basePlotModule;var h=v.attr;var g=v.attributes;if(h&&g){var m=n._subplots;var x="";if(v.name!=="gl2d"||d){if(Array.isArray(h)){for(c=0;c<h.length;c++){var b=h[c];var _=s.coerce(e,t,g,b);if(m[b])s.pushUnique(m[b],_);x+=_}}else{x=s.coerce(e,t,g,h)}if(m[v.name]){s.pushUnique(m[v.name],x)}}}}if(d){f("customdata");f("ids");if(i.traceIs(t,"showLegend")){f("showlegend");f("legendgroup")}i.getComponentMethod("fx","supplyDefaults")(e,t,l,n);if(p){p.supplyDefaults(e,t,l,n);s.coerceHoverinfo(e,t,n)}if(!i.traceIs(t,"noOpacity"))f("opacity");if(i.traceIs(t,"notLegendIsolatable")){t.visible=!!t.visible}if(p&&p.selectPoints){f("selectedpoints")}y.supplyTransformDefaults(e,t,n)}return t};function S(e){var t=e.transforms;if(Array.isArray(t)&&t.length){for(var r=0;r<t.length;r++){var n=m[t[r].type];if(n&&n.makesData)return true}}return false}y.supplyTransformDefaults=function(e,t,r){if(!(t._length||S(e)))return;var n=r._globalTransforms||[];var a=r._transformModules||[];if(!Array.isArray(e.transforms)&&n.length===0)return;var i=e.transforms||[],o=n.concat(i),l=t.transforms=[];for(var u=0;u<o.length;u++){var c=o[u],f=c.type,d=m[f],p;var v=!(c._module&&c._module===d),h=d&&typeof d.transform==="function";if(!d)s.warn("Unrecognized transform type "+f+".");if(d&&d.supplyDefaults&&(v||h)){p=d.supplyDefaults(c,t,r,e);p.type=f;p._module=d;s.pushUnique(a,d)}else{p=s.extendFlat({},c)}l.push(p)}};function C(e,t,r,n){var a=e.transforms,i=[e];for(var o=0;o<a.length;o++){var l=a[o],s=m[l.type];if(s&&s.transform){i=s.transform(i,{transform:l,fullTrace:e,fullData:t,layout:r,fullLayout:n,transformIndex:o})}}return i}y.supplyLayoutGlobalDefaults=function(e,t,r){function n(r,n){return s.coerce(e,t,y.layoutAttributes,r,n)}var a=e.template;if(s.isPlainObject(a)){t.template=a;t._template=a.layout;t._dataTemplate=a.data}var o=s.coerceFont(n,"font");n("title",t._dfltTitle.plot);s.coerceFont(n,"titlefont",{family:o.family,size:Math.round(o.size*1.4),color:o.color});n("autosize",!(e.width&&e.height));n("width");n("height");n("margin.l");n("margin.r");n("margin.t");n("margin.b");n("margin.pad");n("margin.autoexpand");if(e.width&&e.height)y.sanitizeMargins(t);i.getComponentMethod("grid","sizeDefaults")(e,t);n("paper_bgcolor");n("separators",r.decimal+r.thousands);n("hidesources");n("colorway");n("datarevision");i.getComponentMethod("calendars","handleDefaults")(e,t,"calendar");i.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,n)};y.plotAutoSize=function e(t,r,n){var i=t._context||{},o=i.frameMargins,l,u;var c=s.isPlotDiv(t);if(c)t.emit("plotly_autosize");if(i.fillFrame){l=window.innerWidth;u=window.innerHeight;document.body.style.overflow="hidden"}else if(a(o)&&o>0){var f=P(t._boundingBoxMargins),d=f.left+f.right,p=f.bottom+f.top,v=1-2*o;var h=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};l=Math.round(v*(h.width-d));u=Math.round(v*(h.height-p))}else{var g=c?window.getComputedStyle(t):{};l=parseFloat(g.width)||n.width;u=parseFloat(g.height)||n.height}var m=y.layoutAttributes.width.min,x=y.layoutAttributes.height.min;if(l<m)l=m;if(u<x)u=x;var b=!r.width&&Math.abs(n.width-l)>1,_=!r.height&&Math.abs(n.height-u)>1;if(_||b){if(b)n.width=l;if(_)n.height=u}if(!t._initialAutoSize){t._initialAutoSize={width:l,height:u}}y.sanitizeMargins(n)};function P(e){var t={left:0,right:0,bottom:0,top:0},r;if(e){for(r in e){if(e.hasOwnProperty(r)){t.left+=e[r].left||0;t.right+=e[r].right||0;t.bottom+=e[r].bottom||0;t.top+=e[r].top||0}}}return t}y.supplyLayoutModuleDefaults=function(e,t,r,n){var a=i.componentsRegistry;var o=t._basePlotModules;var l,u,c;var f=i.subplotsRegistry.cartesian;for(l in a){c=a[l];if(c.includeBasePlot){c.includeBasePlot(e,t)}}if(!o.length){o.push(f)}if(t._has("cartesian")){i.getComponentMethod("grid","contentDefaults")(e,t);f.finalizeSubplots(e,t)}for(var d in t._subplots){t._subplots[d].sort(s.subplotSort)}for(u=0;u<o.length;u++){c=o[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}var p=t._modules;for(u=0;u<p.length;u++){c=p[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}var v=t._transformModules;for(u=0;u<v.length;u++){c=v[u];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r,n)}}for(l in a){c=a[l];if(c.supplyLayoutDefaults){c.supplyLayoutDefaults(e,t,r)}}};y.purge=function(e){var t=e._fullLayout||{};if(t._glcontainer!==undefined){t._glcontainer.selectAll(".gl-canvas").remove();t._glcontainer.remove();t._glcanvas=null}if(t._geocontainer!==undefined)t._geocontainer.remove();if(t._modeBar)t._modeBar.destroy();if(e._transitionData){if(e._transitionData._interruptCallbacks){e._transitionData._interruptCallbacks.length=0}if(e._transitionData._animationRaf){window.cancelAnimationFrame(e._transitionData._animationRaf)}}s.clearThrottle();delete e.data;delete e.layout;delete e._fullData;delete e._fullLayout;delete e.calcdata;delete e.framework;delete e.empty;delete e.fid;delete e.undoqueue;delete e.undonum;delete e.autoplay;delete e.changed;delete e._promises;delete e._redrawTimer;delete e.firstscatter;delete e._hmlumcount;delete e._hmpixcount;delete e._transitionData;delete e._transitioning;delete e._initialAutoSize;delete e._transitioningWithDuration;delete e._dragging;delete e._dragged;delete e._hoverdata;delete e._snapshotInProgress;delete e._editing;delete e._replotPending;delete e._mouseDownTime;delete e._legendMouseDownTime;if(e.removeAllListeners)e.removeAllListeners()};y.style=function(e){var t=e._fullLayout._modules;var r=[];var n;for(n=0;n<t.length;n++){var a=t[n];if(a.style){s.pushUnique(r,a.style)}}for(n=0;n<r.length;n++){r[n](e)}};y.sanitizeMargins=function(e){if(!e||!e.margin)return;var t=e.width,r=e.height,n=e.margin,a=t-(n.l+n.r),i=r-(n.t+n.b),o;if(a<0){o=(t-1)/(n.l+n.r);n.l=Math.floor(o*n.l);n.r=Math.floor(o*n.r)}if(i<0){o=(r-1)/(n.t+n.b);n.t=Math.floor(o*n.t);n.b=Math.floor(o*n.b)}};y.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};y.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function z(e){if(!e._pushmargin)e._pushmargin={};if(!e._pushmarginIds)e._pushmarginIds={}}y.autoMargin=function(e,t,r){var n=e._fullLayout;z(n);var a=n._pushmargin;var i=n._pushmarginIds;if(n.margin.autoexpand!==false){if(!r){delete a[t];delete i[t]}else{var o=r.pad;if(o===undefined){var l=n.margin;o=Math.min(12,l.l,l.r,l.t,l.b)}if(r.l+r.r>n.width*.5)r.l=r.r=0;if(r.b+r.t>n.height*.5)r.b=r.t=0;var s=r.xl!==undefined?r.xl:r.x;var u=r.xr!==undefined?r.xr:r.x;var c=r.yt!==undefined?r.yt:r.y;var f=r.yb!==undefined?r.yb:r.y;a[t]={l:{val:s,size:r.l+o},r:{val:u,size:r.r+o},b:{val:f,size:r.b+o},t:{val:c,size:r.t+o}};i[t]=1}if(!n._replotting)y.doAutoMargin(e)}};y.doAutoMargin=function(e){var t=e._fullLayout;if(!t._size)t._size={};z(t);var r=t._size,n=JSON.stringify(r);var o=Math.max(t.margin.l||0,0);var l=Math.max(t.margin.r||0,0);var s=Math.max(t.margin.t||0,0);var u=Math.max(t.margin.b||0,0);var c=t._pushmargin;var f=t._pushmarginIds;if(t.margin.autoexpand!==false){for(var d in c){if(!f[d])delete c[d]}c.base={l:{val:0,size:o},r:{val:1,size:l},t:{val:1,size:s},b:{val:0,size:u}};for(var p in c){var v=c[p].l||{},h=c[p].b||{},g=v.val,y=v.size,m=h.val,x=h.size;for(var b in c){if(a(y)&&c[b].r){var _=c[b].r.val,w=c[b].r.size;if(_>g){var k=(y*_+(w-t.width)*g)/(_-g),M=(w*(1-g)+(y-t.width)*(1-_))/(_-g);if(k>=0&&M>=0&&k+M>o+l){o=k;l=M}}}if(a(x)&&c[b].t){var A=c[b].t.val,T=c[b].t.size;if(A>m){var L=(x*A+(T-t.height)*m)/(A-m),S=(T*(1-m)+(x-t.height)*(1-A))/(A-m);if(L>=0&&S>=0&&L+S>u+s){u=L;s=S}}}}}}r.l=Math.round(o);r.r=Math.round(l);r.t=Math.round(s);r.b=Math.round(u);r.p=Math.round(t.margin.pad);r.w=Math.round(t.width)-r.l-r.r;r.h=Math.round(t.height)-r.t-r.b;if(!t._replotting&&n!=="{}"&&n!==JSON.stringify(t._size)){if("_redrawFromAutoMarginCount"in t){t._redrawFromAutoMarginCount++}else{t._redrawFromAutoMarginCount=1}return i.call("plot",e)}};y.graphJson=function(e,t,r,n,a){if(a&&t&&!e._fullData||a&&!t&&!e._fullLayout){y.supplyDefaults(e)}var i=a?e._fullData:e.data,o=a?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(e){if(typeof e==="function"){return null}if(s.isPlainObject(e)){var t={},n,a;for(n in e){if(typeof e[n]==="function"||["_","["].indexOf(n.charAt(0))!==-1){continue}if(r==="keepdata"){if(n.substr(n.length-3)==="src"){continue}}else if(r==="keepstream"){a=e[n+"src"];if(typeof a==="string"&&a.indexOf(":")>0){if(!s.isPlainObject(e.stream)){continue}}}else if(r!=="keepall"){a=e[n+"src"];if(typeof a==="string"&&a.indexOf(":")>0){continue}}t[n]=u(e[n])}return t}if(Array.isArray(e)){return e.map(u)}if(s.isJSDate(e))return s.ms2DateTimeLocal(+e);return e}var c={data:(i||[]).map(function(e){var r=u(e);if(t){delete r.fit}return r})};if(!t){c.layout=u(o)}if(e.framework&&e.framework.isPolar)c=e.framework.getConfig();if(l)c.frames=u(l);return n==="object"?c:JSON.stringify(c)};y.modifyFrames=function(e,t){var r,n,a;var i=e._transitionData._frames;var o=e._transitionData._frameHash;for(r=0;r<t.length;r++){n=t[r];switch(n.type){case"replace":a=n.value;var l=(i[n.index]||{}).name;var s=a.name;i[n.index]=o[s]=a;if(s!==l){delete o[l];o[s]=a}break;case"insert":a=n.value;o[a.name]=a;i.splice(n.index,0,a);break;case"delete":a=i[n.index];delete o[a.name];i.splice(n.index,1);break}}return Promise.resolve()};y.computeFrame=function(e,t){var r=e._transitionData._frameHash;var n,a,i,o;if(!t){throw new Error("computeFrame must be given a string frame name")}var l=r[t.toString()];if(!l){return false}var s=[l];var u=[l.name];while(l.baseframe&&(l=r[l.baseframe.toString()])){if(u.indexOf(l.name)!==-1)break;s.push(l);u.push(l.name)}var c={};while(l=s.pop()){if(l.layout){c.layout=y.extendLayout(c.layout,l.layout)}if(l.data){if(!c.data){c.data=[]}a=l.traces;if(!a){a=[];for(n=0;n<l.data.length;n++){a[n]=n}}if(!c.traces){c.traces=[]}for(n=0;n<l.data.length;n++){i=a[n];if(i===undefined||i===null){continue}o=c.traces.indexOf(i);if(o===-1){o=c.data.length;c.traces[o]=i}c.data[o]=y.extendTrace(c.data[o],l.data[n])}}}return c};y.recomputeFrameHash=function(e){var t=e._transitionData._frameHash={};var r=e._transitionData._frames;for(var n=0;n<r.length;n++){var a=r[n];if(a&&a.name){t[a.name]=a}}};y.extendObjectWithContainers=function(e,t,r){var n,a,i,o,l,u,c,f;var d=s.extendDeepNoArrays({},t||{});var p=s.expandObjectPaths(d);var v={};if(r&&r.length){for(i=0;i<r.length;i++){n=s.nestedProperty(p,r[i]);a=n.get();if(a===undefined){s.nestedProperty(v,r[i]).set(null)}else{n.set(null);s.nestedProperty(v,r[i]).set(a)}}}e=s.extendDeepNoArrays(e||{},p);if(r&&r.length){for(i=0;i<r.length;i++){l=s.nestedProperty(v,r[i]);c=l.get();if(!c)continue;u=s.nestedProperty(e,r[i]);f=u.get();if(!Array.isArray(f)){f=[];u.set(f)}for(o=0;o<c.length;o++){var h=c[o];if(h===null)f[o]=null;else{f[o]=y.extendObjectWithContainers(f[o],h)}}u.set(f)}}return e};y.dataArrayContainers=["transforms","dimensions"];y.layoutArrayContainers=i.layoutArrayContainers;y.extendTrace=function(e,t){return y.extendObjectWithContainers(e,t,y.dataArrayContainers)};y.extendLayout=function(e,t){return y.extendObjectWithContainers(e,t,y.layoutArrayContainers)};y.transition=function(e,t,r,n,a,o){var l,u;var c=Array.isArray(t)?t.length:0;var f=n.slice(0,c);var d=[];function p(){var n;for(n=0;n<f.length;n++){var a=f[n];var o=e._fullData[a];var l=o._module;if(!l)continue;if(l.animatable){d.push(a)}e.data[f[n]]=y.extendTrace(e.data[f[n]],t[n])}var u=s.expandObjectPaths(s.extendDeepNoArrays({},r));var c=/^[xy]axis[0-9]*$/;for(var p in u){if(!c.test(p))continue;delete u[p].range}y.extendLayout(e.layout,u);delete e.calcdata;y.supplyDefaults(e);y.doCalcdata(e);i.getComponentMethod("errorbars","calc")(e);return Promise.resolve()}function v(e){var t=Promise.resolve();if(!e)return t;while(e.length){t=t.then(e.shift())}return t}function h(e){if(!e)return;while(e.length){e.shift()}}var g=false;function m(){e.emit("plotly_transitioning",[]);return new Promise(function(t){e._transitioning=true;if(o.duration>0){e._transitioningWithDuration=true}e._transitionData._interruptCallbacks.push(function(){g=true});if(a.redraw){e._transitionData._interruptCallbacks.push(function(){return i.call("redraw",e)})}e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var n=0;var l=0;function u(){n++;return function(){l++;if(!g&&l===n){x(t)}}}var c;var f;var p=e._fullLayout._basePlotModules;var v=false;if(r){for(f=0;f<p.length;f++){if(p[f].transitionAxes){var h=s.expandObjectPaths(r);v=p[f].transitionAxes(e,h,o,u)||v}}}if(v){c=s.extendFlat({},o);c.duration=0}else{c=o}for(f=0;f<p.length;f++){p[f].plot(e,d,c,u)}setTimeout(u())})}function x(t){if(!e._transitionData)return;h(e._transitionData._interruptCallbacks);return Promise.resolve().then(function(){if(a.redraw){return i.call("redraw",e)}}).then(function(){e._transitioning=false;e._transitioningWithDuration=false;e.emit("plotly_transitioned",[])}).then(t)}function b(){if(!e._transitionData)return;e._transitioning=false;return v(e._transitionData._interruptCallbacks)}for(l=0;l<f.length;l++){u=f[l];var _=e._fullData[u];var w=_._module;if(!w)continue}var k=[y.previousPromises,b,p,y.rehover,m];var M=s.syncOrAsync(k,e);if(!M||!M.then){M=Promise.resolve()}return M.then(function(){return e})};y.doCalcdata=function(e,t){var r=f.list(e),n=e._fullData,a=e._fullLayout;var l,s,u,d;var p=new Array(n.length);var v=(e.calcdata||[]).slice(0);e.calcdata=p;e.firstscatter=true;a._numBoxes=0;a._numViolins=0;a._violinScaleGroupStats={};e._hmpixcount=0;e._hmlumcount=0;a._piecolormap={};a._piecolorway=null;a._piedefaultcolorcount=0;for(u=0;u<n.length;u++){if(Array.isArray(t)&&t.indexOf(u)===-1){p[u]=v[u];continue}}for(u=0;u<n.length;u++){l=n[u];l._arrayAttrs=o.findArrayAttributes(l)}var h=a._subplots.polar||[];for(u=0;u<h.length;u++){r.push(a[h[u]].radialaxis,a[h[u]].angularaxis)}O(r);var g=false;for(u=0;u<n.length;u++){l=n[u];if(l.visible===true&&l.transforms){s=l._module;if(s&&s.calc){var y=s.calc(e,l);if(y[0]&&y[0].t&&y[0].t._scene){delete y[0].t._scene.dirty}}for(d=0;d<l.transforms.length;d++){var x=l.transforms[d];s=m[x.type];if(s&&s.calcTransform){l._hasCalcTransform=true;g=true;s.calcTransform(e,l,x)}}}}if(g)O(r);function b(t,r){l=n[t];s=l._module;if(!!s.isContainer!==r)return;var a=[];if(l.visible===true){var i=l.transforms||[];for(d=i.length-1;d>=0;d--){if(i[d].enabled){l._indexToPoints=i[d]._indexToPoints;break}}if(s&&s.calc){a=s.calc(e,l)}}if(!Array.isArray(a)||!a[0]){a=[{x:c,y:c}]}if(!a[0].t)a[0].t={};a[0].trace=l;p[t]=a}for(u=0;u<n.length;u++)b(u,true);for(u=0;u<n.length;u++)b(u,false);i.getComponentMethod("fx","calc")(e)};function O(e){for(var t=0;t<e.length;t++){e[t].clearCalc()}}y.rehover=function(e){if(e._fullLayout._rehover){e._fullLayout._rehover()}};y.generalUpdatePerTraceModule=function(e,t,r,n){var a=t.traceHash;var i={};var o;for(o=0;o<r.length;o++){var l=r[o],u=l[0].trace;if(u.visible){i[u.type]=i[u.type]||[];i[u.type].push(l)}}for(var c in a){if(!i[c]){var f=a[c][0],d=f[0].trace;d.visible=false;i[c]=[f]}}for(var p in i){var v=i[p];var h=v[0][0].trace._module;h.plot(e,t,s.filterVisible(v),n)}t.traceHash=i}},{"../components/color":44,"../constants/numerical":144,"../lib":164,"../plot_api/plot_schema":198,"../plot_api/plot_template":199,"../plots/cartesian/axis_ids":212,"../registry":258,"./animation_attributes":204,"./attributes":206,"./command":233,"./font_attributes":235,"./frame_attributes":236,"./layout_attributes":247,"./sort_modules":256,d3:8,"fast-isnumeric":11}],250:[function(e,t,r){"use strict";var n=e("../../../traces/scatter/attributes");var a=n.marker;t.exports={r:n.r,t:n.t,marker:{color:a.color,size:a.size,symbol:a.symbol,opacity:a.opacity,editType:"calc"}}},{"../../../traces/scatter/attributes":280}],251:[function(e,t,r){"use strict";var n=e("../../cartesian/layout_attributes");var a=e("../../../lib/extend").extendFlat;var i=e("../../../plot_api/edit_types").overrideAll;var o=a({},n.domain,{});function l(e,t){var r={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return a({},t,r)}t.exports=i({radialaxis:l("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:o,orientation:{valType:"number"}}),angularaxis:l("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:o}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":156,"../../../plot_api/edit_types":192,"../../cartesian/layout_attributes":221}],252:[function(e,t,r){"use strict";var n=t.exports=e("./micropolar");n.manager=e("./micropolar_manager")},{"./micropolar":253,"./micropolar_manager":254}],253:[function(e,t,r){var n=e("d3");var a=e("../../../lib");var i=a.extendDeepAll;var o=e("../../../constants/alignment").MID_SHIFT;var l=t.exports={version:"0.2.2"};l.Axis=function e(){var t={data:[],layout:{}},r={},a={};var s,u,c=n.dispatch("hover"),f,d;var p={};function v(e){u=e||u;var r=t.data;var c=t.layout;if(typeof u=="string"||u.nodeName)u=n.select(u);u.datum(r).each(function(e,t){var r=e.slice();a={data:l.util.cloneJson(r),layout:l.util.cloneJson(c)};var u=0;r.forEach(function(e,t){if(!e.color){e.color=c.defaultColorRange[u];u=(u+1)%c.defaultColorRange.length}if(!e.strokeColor){e.strokeColor=e.geometry==="LinePlot"?e.color:n.rgb(e.color).darker().toString()}a.data[t].color=e.color;a.data[t].strokeColor=e.strokeColor;a.data[t].strokeDash=e.strokeDash;a.data[t].strokeSize=e.strokeSize});var p=r.filter(function(e,t){var r=e.visible;return typeof r==="undefined"||r===true});var v=false;var h=p.map(function(e,t){v=v||typeof e.groupId!=="undefined";return e});if(v){var g=n.nest().key(function(e,t){return typeof e.groupId!="undefined"?e.groupId:"unstacked"}).entries(h);var y=[];var m=g.map(function(e,t){if(e.key==="unstacked")return e.values;else{var r=e.values[0].r.map(function(e,t){return 0});e.values.forEach(function(e,t,n){e.yStack=[r];y.push(r);r=l.util.sumArrays(e.r,r)});return e.values}});p=n.merge(m)}p.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t];e.r=Array.isArray(e.r[0])?e.r:[e.r]});var x=Math.min(c.width-c.margin.left-c.margin.right,c.height-c.margin.top-c.margin.bottom)/2;x=Math.max(10,x);var b=[c.margin.left+x,c.margin.top+x];var _;if(v){var w=n.max(l.util.sumArrays(l.util.arrayLast(p).r[0],l.util.arrayLast(y)));_=[0,w]}else _=n.extent(l.util.flattenArray(p.map(function(e,t){return e.r})));if(c.radialAxis.domain!=l.DATAEXTENT)_[0]=0;f=n.scale.linear().domain(c.radialAxis.domain!=l.DATAEXTENT&&c.radialAxis.domain?c.radialAxis.domain:_).range([0,x]);a.layout.radialAxis.domain=f.domain();var k=l.util.flattenArray(p.map(function(e,t){return e.t}));var M=typeof k[0]==="string";var A;if(M){k=l.util.deduplicate(k);A=k.slice();k=n.range(k.length);p=p.map(function(e,t){var r=e;e.t=[k];if(v)r.yStack=e.yStack;return r})}var T=p.filter(function(e,t){return e.geometry==="LinePlot"||e.geometry==="DotPlot"}).length===p.length;var L=c.needsEndSpacing===null?M||!T:c.needsEndSpacing;var S=c.angularAxis.domain&&c.angularAxis.domain!=l.DATAEXTENT&&!M&&c.angularAxis.domain[0]>=0;var C=S?c.angularAxis.domain:n.extent(k);var P=Math.abs(k[1]-k[0]);if(T&&!M)P=0;var z=C.slice();if(L&&M)z[1]+=P;var O=c.angularAxis.ticksCount||4;if(O>8)O=O/(O/8)+O%8;if(c.angularAxis.ticksStep){O=(z[1]-z[0])/O}var D=c.angularAxis.ticksStep||(z[1]-z[0])/(O*(c.minorTicks+1));if(A)D=Math.max(Math.round(D),1);if(!z[2])z[2]=D;var E=n.range.apply(this,z);E=E.map(function(e,t){return parseFloat(e.toPrecision(12))});d=n.scale.linear().domain(z.slice(0,2)).range(c.direction==="clockwise"?[0,360]:[360,0]);a.layout.angularAxis.domain=d.domain();a.layout.angularAxis.endPadding=L?P:0;s=n.select(this).select("svg.chart-root");if(typeof s==="undefined"||s.empty()){var R="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>";var I=(new DOMParser).parseFromString(R,"application/xml");var N=this.appendChild(this.ownerDocument.importNode(I.documentElement,true));s=n.select(N)}s.select(".guides-group").style({"pointer-events":"none"});s.select(".angular.axis-group").style({"pointer-events":"none"});s.select(".radial.axis-group").style({"pointer-events":"none"});var F=s.select(".chart-group");var j={fill:"none",stroke:c.tickColor};var B={"font-size":c.font.size,"font-family":c.font.family,fill:c.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+c.font.outlineColor}).join(",")};var q;if(c.showLegend){q=s.select(".legend-group").attr({transform:"translate("+[x,c.margin.top]+")"}).style({display:"block"});var H=p.map(function(e,t){var r=l.util.cloneJson(e);r.symbol=e.geometry==="DotPlot"?e.dotType||"circle":e.geometry!="LinePlot"?"square":"line";r.visibleInLegend=typeof e.visibleInLegend==="undefined"||e.visibleInLegend;r.color=e.geometry==="LinePlot"?e.strokeColor:e.color;return r});l.Legend().config({data:p.map(function(e,t){return e.name||"Element"+t}),legendConfig:i({},l.Legend.defaultConfig().legendConfig,{container:q,elements:H,reverseOrder:c.legend.reverseOrder})})();var U=q.node().getBBox();x=Math.min(c.width-U.width-c.margin.left-c.margin.right,c.height-c.margin.top-c.margin.bottom)/2;x=Math.max(10,x);b=[c.margin.left+x,c.margin.top+x];f.range([0,x]);a.layout.radialAxis.domain=f.domain();q.attr("transform","translate("+[b[0]+x,b[1]-x]+")")}else{q=s.select(".legend-group").style({display:"none"})}s.attr({width:c.width,height:c.height}).style({opacity:c.opacity});F.attr("transform","translate("+b+")").style({cursor:"crosshair"});var V=[(c.width-(c.margin.left+c.margin.right+x*2+(U?U.width:0)))/2,(c.height-(c.margin.top+c.margin.bottom+x*2))/2];V[0]=Math.max(0,V[0]);V[1]=Math.max(0,V[1]);s.select(".outer-group").attr("transform","translate("+V+")");if(c.title){var G=s.select("g.title-group text").style(B).text(c.title);var Y=G.node().getBBox();G.attr({x:b[0]-Y.width/2,y:b[1]-x-20})}var Z=s.select(".radial.axis-group");if(c.radialAxis.gridLinesVisible){var X=Z.selectAll("circle.grid-circle").data(f.ticks(5));X.enter().append("circle").attr({class:"grid-circle"}).style(j);X.attr("r",f);X.exit().remove()}Z.select("circle.outside-circle").attr({r:x}).style(j);var W=s.select("circle.background-circle").attr({r:x}).style({fill:c.backgroundColor,stroke:c.stroke});function J(e,t){return d(e)%360+c.orientation}if(c.radialAxis.visible){var Q=n.svg.axis().scale(f).ticks(5).tickSize(5);Z.call(Q).attr({transform:"rotate("+c.radialAxis.orientation+")"});Z.selectAll(".domain").style(j);Z.selectAll("g>text").text(function(e,t){return this.textContent+c.radialAxis.ticksSuffix}).style(B).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){if(c.radialAxis.tickOrientation==="horizontal"){return"rotate("+-c.radialAxis.orientation+") translate("+[0,B["font-size"]]+")"}else return"translate("+[0,B["font-size"]]+")"}});Z.selectAll("g>line").style({stroke:"black"})}var $=s.select(".angular.axis-group").selectAll("g.angular-tick").data(E);var K=$.enter().append("g").classed("angular-tick",true);$.attr({transform:function(e,t){return"rotate("+J(e,t)+")"}}).style({display:c.angularAxis.visible?"block":"none"});$.exit().remove();K.append("line").classed("grid-line",true).classed("major",function(e,t){return t%(c.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(c.minorTicks+1)==0)}).style(j);K.selectAll(".minor").style({stroke:c.minorTickColor});$.select("line.grid-line").attr({x1:c.tickLength?x-c.tickLength:0,x2:x}).style({display:c.angularAxis.gridLinesVisible?"block":"none"});K.append("text").classed("axis-text",true).style(B);var ee=$.select("text.axis-text").attr({x:x+c.labelOffset,dy:o+"em",transform:function(e,t){var r=J(e,t);var n=x+c.labelOffset;var a=c.angularAxis.tickOrientation;if(a=="horizontal")return"rotate("+-r+" "+n+" 0)";else if(a=="radial")return r<270&&r>90?"rotate(180 "+n+" 0)":null;else return"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:c.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){if(t%(c.minorTicks+1)!=0)return"";if(A){return A[e]+c.angularAxis.ticksSuffix}else return e+c.angularAxis.ticksSuffix}).style(B);if(c.angularAxis.rewriteTicks)ee.text(function(e,t){if(t%(c.minorTicks+1)!=0)return"";return c.angularAxis.rewriteTicks(this.textContent,t)});var te=n.max(F.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));q.attr({transform:"translate("+[x+te,c.margin.top]+")"});var re=s.select("g.geometry-group").selectAll("g").size()>0;var ne=s.select("g.geometry-group").selectAll("g.geometry").data(p);ne.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}});ne.exit().remove();if(p[0]||re){var ae=[];p.forEach(function(e,t){var r={};r.radialScale=f;r.angularScale=d;r.container=ne.filter(function(e,r){return r==t});r.geometry=e.geometry;r.orientation=c.orientation;r.direction=c.direction;r.index=t;ae.push({data:e,geometryConfig:r})});var ie=n.nest().key(function(e,t){return typeof e.data.groupId!="undefined"||"unstacked"}).entries(ae);var oe=[];ie.forEach(function(e,t){if(e.key==="unstacked")oe=oe.concat(e.values.map(function(e,t){return[e]}));else oe.push(e.values)});oe.forEach(function(e,t){var r;if(Array.isArray(e))r=e[0].geometryConfig.geometry;else r=e.geometryConfig.geometry;var n=e.map(function(e,t){return i(l[r].defaultConfig(),e)});l[r]().config(n)()})}var le=s.select(".guides-group");var se=s.select(".tooltips-group");var ue=l.tooltipPanel().config({container:se,fontSize:8})();var ce=l.tooltipPanel().config({container:se,fontSize:8})();var fe=l.tooltipPanel().config({container:se,hasTick:true})();var de,pe;if(!M){var ve=le.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});F.on("mousemove.angular-guide",function(e,t){var r=l.util.getMousePos(W).angle;ve.attr({x2:-x,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-c.orientation)%360;de=d.invert(n);var a=l.util.convertToCartesian(x+12,r+180);ue.text(l.util.round(de)).move([a[0]+b[0],a[1]+b[1]])}).on("mouseout.angular-guide",function(e,t){le.select("line").style({opacity:0})})}var he=le.select("circle").style({stroke:"grey",fill:"none"});F.on("mousemove.radial-guide",function(e,t){var r=l.util.getMousePos(W).radius;he.attr({r:r}).style({opacity:.5});pe=f.invert(l.util.getMousePos(W).radius);var n=l.util.convertToCartesian(r,c.radialAxis.orientation);ce.text(l.util.round(pe)).move([n[0]+b[0],n[1]+b[1]])}).on("mouseout.radial-guide",function(e,t){he.style({opacity:0});fe.hide();ue.hide();ce.hide()});s.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,t){var r=n.select(this);var a=this.style.fill;var i="black";var o=this.style.opacity||1;r.attr({"data-opacity":o});if(a&&a!=="none"){r.attr({"data-fill":a});i=n.hsl(a).darker().toString();r.style({fill:i,opacity:1});var u={t:l.util.round(e[0]),r:l.util.round(e[1])};if(M)u.t=A[e[0]];var c="t: "+u.t+", r: "+u.r;var f=this.getBoundingClientRect();var d=s.node().getBoundingClientRect();var p=[f.left+f.width/2-V[0]-d.left,f.top+f.height/2-V[1]-d.top];fe.config({color:i}).text(c);fe.move(p)}else{a=this.style.stroke||"black";r.attr({"data-stroke":a});i=n.hsl(a).darker().toString();r.style({stroke:i,opacity:1})}}).on("mousemove.tooltip",function(e,t){if(n.event.which!=0)return false;if(n.select(this).attr("data-fill"))fe.show()}).on("mouseout.tooltip",function(e,t){fe.hide();var r=n.select(this);var a=r.attr("data-fill");if(a)r.style({fill:a,opacity:r.attr("data-opacity")});else r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})})});return p}p.render=function(e){v(e);return this};p.config=function(e){if(!arguments.length)return t;var r=l.util.cloneJson(e);r.data.forEach(function(e,r){if(!t.data[r])t.data[r]={};i(t.data[r],l.Axis.defaultConfig().data[0]);i(t.data[r],e)});i(t.layout,l.Axis.defaultConfig().layout);i(t.layout,r.layout);return this};p.getLiveConfig=function(){return a};p.getinputConfig=function(){return r};p.radialScale=function(e){return f};p.angularScale=function(e){return d};p.svg=function(){return s};n.rebind(p,c,"on");return p};l.Axis.defaultConfig=function(e,t){var r={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:true,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:true,gridLinesVisible:true,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:true,gridLinesVisible:true,labelsVisible:true,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:true,legend:{reverseOrder:false},opacity:1}};return r};l.util={};l.DATAEXTENT="dataExtent";l.AREA="AreaChart";l.LINE="LinePlot";l.DOT="DotPlot";l.BAR="BarChart";l.util._override=function(e,t){for(var r in e)if(r in t)t[r]=e[r]};l.util._extend=function(e,t){for(var r in e)t[r]=e[r]};l.util._rndSnd=function(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)};l.util.dataFromEquation2=function(e,t){var r=t||6;var a=n.range(0,360+r,r).map(function(t,r){var n=t*Math.PI/180;var a=e(n);return[t,a]});return a};l.util.dataFromEquation=function(e,t,r){var a=t||6;var i=[],o=[];n.range(0,360+a,a).forEach(function(t,r){var n=t*Math.PI/180;var a=e(n);i.push(t);o.push(a)});var l={t:i,r:o};if(r)l.name=r;return l};l.util.ensureArray=function(e,t){if(typeof e==="undefined")return null;var r=[].concat(e);return n.range(t).map(function(e,t){return r[t]||r[0]})};l.util.fillArrays=function(e,t,r){t.forEach(function(t,n){e[t]=l.util.ensureArray(e[t],r)});return e};l.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))};l.util.validateKeys=function(e,t){if(typeof t==="string")t=t.split(".");var r=t.shift();return e[r]&&(!t.length||objHasKeys(e[r],t))};l.util.sumArrays=function(e,t){return n.zip(e,t).map(function(e,t){return n.sum(e)})};l.util.arrayLast=function(e){return e[e.length-1]};l.util.arrayEqual=function(e,t){var r=Math.max(e.length,t.length,1);while(r-- >=0&&e[r]===t[r]);return r===-2};l.util.flattenArray=function(e){var t=[];while(!l.util.arrayEqual(t,e)){t=e;e=[].concat.apply([],e)}return e};l.util.deduplicate=function(e){return e.filter(function(e,t,r){return r.indexOf(e)==t})};l.util.convertToCartesian=function(e,t){var r=t*Math.PI/180;var n=e*Math.cos(r);var a=e*Math.sin(r);return[n,a]};l.util.round=function(e,t){var r=t||2;var n=Math.pow(10,r);return Math.round(e*n)/n};l.util.getMousePos=function(e){var t=n.mouse(e.node());var r=t[0];var a=t[1];var i={};i.x=r;i.y=a;i.pos=t;i.angle=(Math.atan2(a,r)+Math.PI)*180/Math.PI;i.radius=Math.sqrt(r*r+a*a);return i};l.util.duplicatesCount=function(e){var t={},r;var n={};for(var a=0,i=e.length;a<i;a++){r=e[a];if(r in t){t[r]++;n[r]=t[r]}else{t[r]=1}}return n};l.util.duplicates=function(e){return Object.keys(l.util.duplicatesCount(e))};l.util.translator=function(e,t,r,n){if(n){var a=r.slice();r=t;t=a}var i=t.reduce(function(e,t){if(typeof e!="undefined")return e[t]},e);if(typeof i==="undefined")return;t.reduce(function(e,r,n){if(typeof e=="undefined")return;if(n===t.length-1)delete e[r];return e[r]},e);r.reduce(function(e,t,n){if(typeof e[t]==="undefined")e[t]={};if(n===r.length-1)e[t]=i;return e[t]},e)};l.PolyChart=function e(){var t=[l.PolyChart.defaultConfig()];var r=n.dispatch("hover");var a={solid:"none",dash:[5,2],dot:[2,5]};var o;function s(){var e=t[0].geometryConfig;var r=e.container;if(typeof r=="string")r=n.select(r);r.datum(t).each(function(t,r){var i=!!t[0].data.yStack;var o=t.map(function(e,t){if(i)return n.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]);else return n.zip(e.data.t[0],e.data.r[0])});var l=e.angularScale;var s=e.radialScale.domain()[0];var u={};u.bar=function(r,a,i){var o=t[i].data;var s=e.radialScale(r[1])-e.radialScale(0);var u=e.radialScale(r[2]||0);var c=o.barWidth;n.select(this).attr({class:"mark bar",d:"M"+[[s+u,-c/2],[s+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+l(t[0]))+")"}})};u.dot=function(e,r,a){var i=e[2]?[e[0],e[1]+e[2]]:e;var o=n.svg.symbol().size(t[a].data.dotSize).type(t[a].data.dotType)(e,r);n.select(this).attr({class:"mark dot",d:o,transform:function(e,t){var r=m(y(i));return"translate("+[r.x,r.y]+")"}})};var c=n.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});u.line=function(r,a,i){var l=r[2]?o[i].map(function(e,t){return[e[0],e[1]+e[2]]}):o[i];n.select(this).each(u["dot"]).style({opacity:function(e,r){return+t[i].data.dotVisible},fill:v.stroke(r,a,i)}).attr({class:"mark dot"});if(a>0)return;var s=n.select(this.parentNode).selectAll("path.line").data([0]);s.enter().insert("path");s.attr({class:"line",d:c(l),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return v.fill(r,a,i)},"fill-opacity":0,stroke:function(e,t){return v.stroke(r,a,i)},"stroke-width":function(e,t){return v["stroke-width"](r,a,i)},"stroke-dasharray":function(e,t){return v["stroke-dasharray"](r,a,i)},opacity:function(e,t){return v.opacity(r,a,i)},display:function(e,t){return v.display(r,a,i)}})};var f=e.angularScale.range();var d=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180;var p=n.svg.arc().startAngle(function(e){return-d/2}).endAngle(function(e){return d/2}).innerRadius(function(t){return e.radialScale(s+(t[2]||0))}).outerRadius(function(t){return e.radialScale(s+(t[2]||0))+e.radialScale(t[1])});u.arc=function(t,r,a){n.select(this).attr({class:"mark arc",d:p,transform:function(t,r){return"rotate("+(e.orientation+l(t[0])+90)+")"}})};var v={fill:function(e,r,n){return t[n].data.color},stroke:function(e,r,n){return t[n].data.strokeColor},"stroke-width":function(e,r,n){return t[n].data.strokeSize+"px"},"stroke-dasharray":function(e,r,n){return a[t[n].data.strokeDash]},opacity:function(e,r,n){return t[n].data.opacity},display:function(e,r,n){return typeof t[n].data.visible==="undefined"||t[n].data.visible?"block":"none"}};var h=n.select(this).selectAll("g.layer").data(o);h.enter().append("g").attr({class:"layer"});var g=h.selectAll("path.mark").data(function(e,t){return e});g.enter().append("path").attr({class:"mark"});g.style(v).each(u[e.geometryType]);g.exit().remove();h.exit().remove();function y(t,r){var n=e.radialScale(t[1]);var a=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:n,t:a}}function m(e){var t=e.r*Math.cos(e.t);var r=e.r*Math.sin(e.t);return{x:t,y:r}}})}s.config=function(e){if(!arguments.length)return t;e.forEach(function(e,r){if(!t[r])t[r]={};i(t[r],l.PolyChart.defaultConfig());i(t[r],e)});return this};s.getColorScale=function(){return o};n.rebind(s,r,"on");return s};l.PolyChart.defaultConfig=function(){var e={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:false,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:true,visibleInLegend:true},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}};return e};l.BarChart=function e(){return l.PolyChart()};l.BarChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"bar"}};return e};l.AreaChart=function e(){return l.PolyChart()};l.AreaChart.defaultConfig=function(){var e={geometryConfig:{geometryType:"arc"}};return e};l.DotPlot=function e(){return l.PolyChart()};l.DotPlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"dot",dotType:"circle"}};return e};l.LinePlot=function e(){return l.PolyChart()};l.LinePlot.defaultConfig=function(){var e={geometryConfig:{geometryType:"line"}};return e};l.Legend=function e(){var t=l.Legend.defaultConfig();var r=n.dispatch("hover");function a(){var e=t.legendConfig;var r=t.data.map(function(t,r){return[].concat(t).map(function(t,n){var a=i({},e.elements[r]);a.name=t;a.color=[].concat(e.elements[r].color)[n];return a})});var o=n.merge(r);o=o.filter(function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||typeof e.elements[r].visibleInLegend==="undefined")});if(e.reverseOrder)o=o.reverse();var l=e.container;if(typeof l=="string"||l.nodeName)l=n.select(l);var s=o.map(function(e,t){return e.color});var u=e.fontSize;var c=e.isContinuous==null?typeof o[0]==="number":e.isContinuous;var f=c?e.height:u*o.length;var d=l.classed("legend-group",true);var p=d.selectAll("svg").data([0]);var v=p.enter().append("svg").attr({width:300,height:f+u,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});v.append("g").classed("legend-axis",true);v.append("g").classed("legend-marks",true);var h=n.range(o.length);var g=n.scale[c?"linear":"ordinal"]().domain(h).range(s);var y=n.scale[c?"linear":"ordinal"]().domain(h)[c?"range":"rangePoints"]([0,f]);var m=function(e,t){var r=t*3;if(e==="line"){return"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z"}else if(n.svg.symbolTypes.indexOf(e)!=-1)return n.svg.symbol().type(e).size(r)();else return n.svg.symbol().type("square").size(r)()};if(c){var x=p.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(s);x.enter().append("stop");x.attr({offset:function(e,t){return t/(s.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}});p.append("rect").classed("legend-mark",true).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var b=p.select(".legend-marks").selectAll("path.legend-mark").data(o);b.enter().append("path").classed("legend-mark",true);b.attr({transform:function(e,t){return"translate("+[u/2,y(t)+u/2]+")"},d:function(e,t){var r=e.symbol;return m(r,u)},fill:function(e,t){return g(t)}});b.exit().remove()}var _=n.svg.axis().scale(y).orient("right");var w=p.select("g.legend-axis").attr({transform:"translate("+[c?e.colorBandWidth:u,u/2]+")"}).call(_);w.selectAll(".domain").style({fill:"none",stroke:"none"});w.selectAll("line").style({fill:"none",stroke:c?e.textColor:"none"});w.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(e,t){return o[t].name});return a}a.config=function(e){if(!arguments.length)return t;i(t,e);return this};n.rebind(a,r,"on");return a};l.Legend.defaultConfig=function(e,t){var r={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:false}};return r};l.tooltipPanel=function(){var e,t,r;var a={container:null,hasTick:false,fontSize:12,color:"white",padding:5};var o="tooltip-"+l.tooltipPanel.uid++;var s=10;var u=function(){e=a.container.selectAll("g."+o).data([0]);var n=e.enter().append("g").classed(o,true).style({"pointer-events":"none",display:"none"});r=n.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});t=n.append("text").attr({dx:a.padding+s,dy:+a.fontSize*.3});return u};u.text=function(i){var o=n.hsl(a.color).l;var l=o>=.5?"#aaa":"white";var c=o>=.5?"black":"white";var f=i||"";t.style({fill:c,"font-size":a.fontSize+"px"}).text(f);var d=a.padding;var p=t.node().getBBox();var v={fill:a.color,stroke:l,"stroke-width":"2px"};var h=p.width+d*2+s;var g=p.height+d*2;r.attr({d:"M"+[[s,-g/2],[s,-g/4],[a.hasTick?0:s,0],[s,g/4],[s,g/2],[h,g/2],[h,-g/2]].join("L")+"Z"}).style(v);e.attr({transform:"translate("+[s,-g/2+d*2]+")"});e.style({display:"block"});return u};u.move=function(t){if(!e)return;e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"});return u};u.hide=function(){if(!e)return;e.style({display:"none"});return u};u.show=function(){if(!e)return;e.style({display:"block"});return u};u.config=function(e){i(a,e);return u};return u};l.tooltipPanel.uid=1;l.adapter={};l.adapter.plotly=function e(){var t={};t.convert=function(e,t){var r={};if(e.data){r.data=e.data.map(function(e,r){var n=i({},e);var a=[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]];a.forEach(function(e,r){l.util.translator.apply(null,e.concat(t))});if(!t)delete n.marker;if(t)delete n.groupId;if(!t){if(n.type==="scatter"){if(n.mode==="lines")n.geometry="LinePlot";else if(n.mode==="markers")n.geometry="DotPlot";else if(n.mode==="lines+markers"){n.geometry="LinePlot";n.dotVisible=true}}else if(n.type==="area")n.geometry="AreaChart";else if(n.type==="bar")n.geometry="BarChart";delete n.mode;delete n.type}else{if(n.geometry==="LinePlot"){n.type="scatter";if(n.dotVisible===true){delete n.dotVisible;n.mode="lines+markers"}else n.mode="lines"}else if(n.geometry==="DotPlot"){n.type="scatter";n.mode="markers"}else if(n.geometry==="AreaChart")n.type="area";else if(n.geometry==="BarChart")n.type="bar";delete n.geometry}return n});if(!t&&e.layout&&e.layout.barmode==="stack"){var a=l.util.duplicates(r.data.map(function(e,t){return e.geometry}));r.data.forEach(function(e,t){var n=a.indexOf(e.geometry);if(n!=-1)r.data[t].groupId=n})}}if(e.layout){var o=i({},e.layout);var s=[[o,["plot_bgcolor"],["backgroundColor"]],[o,["showlegend"],["showLegend"]],[o,["radialaxis"],["radialAxis"]],[o,["angularaxis"],["angularAxis"]],[o.angularaxis,["showline"],["gridLinesVisible"]],[o.angularaxis,["showticklabels"],["labelsVisible"]],[o.angularaxis,["nticks"],["ticksCount"]],[o.angularaxis,["tickorientation"],["tickOrientation"]],[o.angularaxis,["ticksuffix"],["ticksSuffix"]],[o.angularaxis,["range"],["domain"]],[o.angularaxis,["endpadding"],["endPadding"]],[o.radialaxis,["showline"],["gridLinesVisible"]],[o.radialaxis,["tickorientation"],["tickOrientation"]],[o.radialaxis,["ticksuffix"],["ticksSuffix"]],[o.radialaxis,["range"],["domain"]],[o.angularAxis,["showline"],["gridLinesVisible"]],[o.angularAxis,["showticklabels"],["labelsVisible"]],[o.angularAxis,["nticks"],["ticksCount"]],[o.angularAxis,["tickorientation"],["tickOrientation"]],[o.angularAxis,["ticksuffix"],["ticksSuffix"]],[o.angularAxis,["range"],["domain"]],[o.angularAxis,["endpadding"],["endPadding"]],[o.radialAxis,["showline"],["gridLinesVisible"]],[o.radialAxis,["tickorientation"],["tickOrientation"]],[o.radialAxis,["ticksuffix"],["ticksSuffix"]],[o.radialAxis,["range"],["domain"]],[o.font,["outlinecolor"],["outlineColor"]],[o.legend,["traceorder"],["reverseOrder"]],[o,["labeloffset"],["labelOffset"]],[o,["defaultcolorrange"],["defaultColorRange"]]];s.forEach(function(e,r){l.util.translator.apply(null,e.concat(t))});if(!t){if(o.angularAxis&&typeof o.angularAxis.ticklen!=="undefined")o.tickLength=o.angularAxis.ticklen;if(o.angularAxis&&typeof o.angularAxis.tickcolor!=="undefined")o.tickColor=o.angularAxis.tickcolor}else{if(typeof o.tickLength!=="undefined"){o.angularaxis.ticklen=o.tickLength;delete o.tickLength}if(o.tickColor){o.angularaxis.tickcolor=o.tickColor;delete o.tickColor}}if(o.legend&&typeof o.legend.reverseOrder!="boolean"){o.legend.reverseOrder=o.legend.reverseOrder!="normal"}if(o.legend&&typeof o.legend.traceorder=="boolean"){o.legend.traceorder=o.legend.traceorder?"reversed":"normal";delete o.legend.reverseOrder}if(o.margin&&typeof o.margin.t!="undefined"){var u=["t","r","b","l","pad"];var c=["top","right","bottom","left","pad"];var f={};n.entries(o.margin).forEach(function(e,t){f[c[u.indexOf(e.key)]]=e.value});o.margin=f}if(t){delete o.needsEndSpacing;delete o.minorTickColor;delete o.minorTicks;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksCount;delete o.angularaxis.ticksStep;delete o.angularaxis.rewriteTicks;delete o.angularaxis.nticks;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksCount;delete o.radialaxis.ticksStep;delete o.radialaxis.rewriteTicks;delete o.radialaxis.nticks}r.layout=o}return r};return t}},{"../../../constants/alignment":142,"../../../lib":164,d3:8}],254:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../../lib");var i=e("../../../components/color");var o=e("./micropolar");var l=e("./undo_manager");var s=a.extendDeepAll;var u=t.exports={};u.framework=function(e){var t,r,a,i,c;var f=new l;function d(r,l){if(l)c=l;n.select(n.select(c).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove();t=!t?r:s(t,r);if(!a)a=o.Axis();i=o.adapter.plotly().convert(t);a.config(i).render(c);e.data=t.data;e.layout=t.layout;u.fillLayout(e);return t}d.isPolar=true;d.svg=function(){return a.svg()};d.getConfig=function(){return t};d.getLiveConfig=function(){return o.adapter.plotly().convert(a.getLiveConfig(),true)};d.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}};d.setUndoPoint=function(){var e=this;var n=o.util.cloneJson(t);(function(t,r){f.add({undo:function(){if(r)e(r)},redo:function(){e(t)}})})(n,r);r=o.util.cloneJson(n)};d.undo=function(){f.undo()};d.redo=function(){f.redo()};return d};u.fillLayout=function(e){var t=n.select(e).selectAll(".plot-container"),r=t.selectAll(".svg-container"),a=e.framework&&e.framework.svg&&e.framework.svg(),o={width:800,height:600,paper_bgcolor:i.background,_container:t,_paperdiv:r,_paper:a};e._fullLayout=s(o,e.layout)}},{"../../../components/color":44,"../../../lib":164,"./micropolar":253,"./undo_manager":255,d3:8}],255:[function(e,t,r){"use strict";t.exports=function e(){var t=[],r=-1,n=false,a;function i(e,t){if(!e)return this;n=true;e[t]();n=false;return this}return{add:function(e){if(n)return this;t.splice(r+1,t.length-r);t.push(e);r=t.length-1;return this},setCallback:function(e){a=e},undo:function(){var e=t[r];if(!e)return this;i(e,"undo");r-=1;if(a)a(e.undo);return this},redo:function(){var e=t[r+1];if(!e)return this;i(e,"redo");r+=1;if(a)a(e.redo);return this},clear:function(){t=[];r=-1},hasUndo:function(){return r!==-1},hasRedo:function(){return r<t.length-1},getCommands:function(){return t},getPreviousCommand:function(){return t[r-1]},getIndex:function(){return r}}}},{}],256:[function(e,t,r){"use strict";function n(e,t){if(e==="splom")return-1;if(t==="splom")return 1;return 0}function a(e,t){return n(e.name,t.name)}t.exports={sortBasePlotModules:a,sortModules:n}},{}],257:[function(e,t,r){"use strict";var n=e("../lib");var a=e("../plot_api/plot_template");var i=e("./domain").defaults;t.exports=function e(t,r,o,l){var s=l.type;var u=l.attributes;var c=l.handleDefaults;var f=l.partition||"x";var d=r._subplots[s];var p=d.length;var v=p&&d[0].replace(/\d+$/,"");var h,g;function y(e,t){return n.coerce(h,g,u,e,t)}for(var m=0;m<p;m++){var x=d[m];if(t[x])h=t[x];else h=t[x]={};g=a.newContainer(r,x,v);var b={};b[f]=[m/p,(m+1)/p];i(g,r,y,b);l.id=x;c(h,g,y,l)}}},{"../lib":164,"../plot_api/plot_template":199,"./domain":234}],258:[function(e,t,r){"use strict";var n=e("./lib/loggers");var a=e("./lib/noop");var i=e("./lib/push_unique");var o=e("./lib/is_plain_object");var l=e("./lib/extend");var s=e("./plots/attributes");var u=e("./plots/layout_attributes");var c=l.extendFlat;var f=l.extendDeepAll;r.modules={};r.allCategories={};r.allTypes=[];r.subplotsRegistry={};r.transformsRegistry={};r.componentsRegistry={};r.layoutArrayContainers=[];r.layoutArrayRegexes=[];r.traceLayoutAttributes={};r.localeRegistry={};r.apiMethodRegistry={};r.register=function e(t){if(!t){throw new Error("No argument passed to Plotly.register.")}else if(t&&!Array.isArray(t)){t=[t]}for(var n=0;n<t.length;n++){var a=t[n];if(!a){throw new Error("Invalid module was attempted to be registered!")}switch(a.moduleType){case"trace":d(a);break;case"transform":h(a);break;case"component":v(a);break;case"locale":g(a);break;case"apiMethod":var i=a.name;r.apiMethodRegistry[i]=a.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};r.getModule=function(e){var t=r.modules[_(e)];if(!t)return false;return t._module};r.traceIs=function(e,t){e=_(e);if(e==="various")return false;var a=r.modules[e];if(!a){if(e&&e!=="area"){n.log("Unrecognized trace type "+e+".")}a=r.modules[s.type.dflt]}return!!a.categories[t]};r.getTransformIndices=function(e,t){var r=[];var n=e.transforms||[];for(var a=0;a<n.length;a++){if(n[a].type===t){r.push(a)}}return r};r.hasTransform=function(e,t){var r=e.transforms||[];for(var n=0;n<r.length;n++){if(r[n].type===t){return true}}return false};r.getComponentMethod=function(e,t){var n=r.componentsRegistry[e];if(!n)return a;return n[t]||a};r.call=function(){var e=arguments[0];var t=[].slice.call(arguments,1);return r.apiMethodRegistry[e].apply(null,t)};function d(e){var t=e.name;var a=e.categories;var i=e.meta;if(r.modules[t]){n.log("Type "+t+" already registered");return}if(!r.subplotsRegistry[e.basePlotModule.name]){p(e.basePlotModule)}var o={};for(var l=0;l<a.length;l++){o[a[l]]=true;r.allCategories[a[l]]=true}r.modules[t]={_module:e,categories:o};if(i&&Object.keys(i).length){r.modules[t].meta=i}r.allTypes.push(t);for(var s in r.componentsRegistry){m(s,t)}if(e.layoutAttributes){c(r.traceLayoutAttributes,e.layoutAttributes)}}function p(e){var t=e.name;if(r.subplotsRegistry[t]){n.log("Plot type "+t+" already registered.");return}y(e);r.subplotsRegistry[t]=e;for(var a in r.componentsRegistry){b(a,e.name)}}function v(e){if(typeof e.name!=="string"){throw new Error("Component module *name* must be a string.")}var t=e.name;r.componentsRegistry[t]=e;if(e.layoutAttributes){if(e.layoutAttributes._isLinkedToArray){i(r.layoutArrayContainers,t)}y(e)}for(var n in r.modules){m(t,n)}for(var a in r.subplotsRegistry){b(t,a)}for(var o in r.transformsRegistry){x(t,o)}if(e.schema&&e.schema.layout){f(u,e.schema.layout)}}function h(e){if(typeof e.name!=="string"){throw new Error("Transform module *name* must be a string.")}var t="Transform module "+e.name;var a=typeof e.transform==="function";var i=typeof e.calcTransform==="function";if(!a&&!i){throw new Error(t+" is missing a *transform* or *calcTransform* method.")}if(a&&i){n.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" "))}if(!o(e.attributes)){n.log(t+" registered without an *attributes* object.")}if(typeof e.supplyDefaults!=="function"){n.log(t+" registered without a *supplyDefaults* method.")}r.transformsRegistry[e.name]=e;for(var l in r.componentsRegistry){x(l,e.name)}}function g(e){var t=e.name;var n=t.split("-")[0];var a=e.dictionary;var i=e.format;var o=a&&Object.keys(a).length;var l=i&&Object.keys(i).length;var s=r.localeRegistry;var u=s[t];if(!u)s[t]=u={};if(n!==t){var c=s[n];if(!c)s[n]=c={};if(o&&c.dictionary===u.dictionary){c.dictionary=a}if(l&&c.format===u.format){c.format=i}}if(o)u.dictionary=a;if(l)u.format=i}function y(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t){for(var n=0;n<t.length;n++){i(r.layoutArrayRegexes,t[n])}}}}function m(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.traces)return;var a=n.traces[t];if(a){f(r.modules[t]._module.attributes,a)}}function x(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.transforms)return;var a=n.transforms[t];if(a){f(r.transformsRegistry[t].attributes,a)}}function b(e,t){var n=r.componentsRegistry[e].schema;if(!n||!n.subplots)return;var a=r.subplotsRegistry[t];var i=a.layoutAttributes;var o=a.attr==="subplot"?a.name:a.attr;if(Array.isArray(o))o=o[0];var l=n.subplots[o];if(i&&l){f(i,l)}}function _(e){if(typeof e==="object")e=e.type;return e}},{"./lib/extend":156,"./lib/is_plain_object":166,"./lib/loggers":169,"./lib/noop":173,"./lib/push_unique":177,"./plots/attributes":206,"./plots/layout_attributes":247}],259:[function(e,t,r){"use strict";var n=e("../lib");var a=n.extendFlat;var i=n.extendDeep;function o(e){var t;switch(e){case"themes__thumb":t={autosize:true,width:150,height:150,title:"",showlegend:false,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:true,showlegend:false,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function l(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}t.exports=function e(t,r){if(t.framework&&t.framework.isPolar){t=t.framework.getConfig()}var n;var s=t.data;var u=t.layout;var c=i([],s);var f=i({},u,o(r.tileClass));var d=t._context||{};if(r.width)f.width=r.width;if(r.height)f.height=r.height;if(r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){f.annotations=[];var p=Object.keys(f);for(n=0;n<p.length;n++){if(l(p[n])){f[p[n]].title=""}}for(n=0;n<c.length;n++){var v=c[n];v.showscale=false;if(v.marker)v.marker.showscale=false;if(v.type==="pie")v.textposition="none"}}if(Array.isArray(r.annotations)){for(n=0;n<r.annotations.length;n++){f.annotations.push(r.annotations[n])}}var h=Object.keys(f).filter(function(e){return e.match(/^scene\d*$/)});if(h.length){var g={};if(r.tileClass==="thumbnail"){g={title:"",showaxeslabels:false,showticklabels:false,linetickenable:false}}for(n=0;n<h.length;n++){var y=f[h[n]];if(!y.xaxis){y.xaxis={}}if(!y.yaxis){y.yaxis={}}if(!y.zaxis){y.zaxis={}}a(y.xaxis,g);a(y.yaxis,g);a(y.zaxis,g);y._scene=null}}var m=document.createElement("div");if(r.tileClass)m.className=r.tileClass;var x={gd:m,td:m,layout:f,data:c,config:{staticPlot:r.staticPlot===undefined?true:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===undefined?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||false,showLink:r.showLink||false,showTips:r.showTips||false,mapboxAccessToken:d.mapboxAccessToken}};if(r.setBackground!=="transparent"){x.config.setBackground=r.setBackground||"opaque"}x.gd.defaultLayout=o(r.tileClass);return x}},{"../lib":164}],260:[function(e,t,r){"use strict";var n=e("../plot_api/to_image");var a=e("../lib");var i=e("./filesaver");function o(e,t){t=t||{};t.format=t.format||"png";return new Promise(function(r,o){if(e._snapshotInProgress){o(new Error("Snapshotting already in progress."))}if(a.isIE()&&t.format!=="svg"){o(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."))}e._snapshotInProgress=true;var l=n(e,t);var s=t.filename||e.fn||"newplot";s+="."+t.format;l.then(function(t){e._snapshotInProgress=false;return i(t,s)}).then(function(e){r(e)}).catch(function(t){e._snapshotInProgress=false;o(t)})})}t.exports=o},{"../lib":164,"../plot_api/to_image":202,"./filesaver":261}],261:[function(e,t,r){"use strict";var n=function(e,t){var r=document.createElement("a");var n="download"in r;var a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);var i=new Promise(function(i,o){if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){o(new Error("IE < 10 unsupported"))}if(a){document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/));i(t)}if(!t){t="download"}if(n){r.href=e;r.download=t;document.body.appendChild(r);r.click();document.body.removeChild(r);i(t)}if(typeof navigator!=="undefined"&&navigator.msSaveBlob){var l=e.split(/^data:image\/svg\+xml,/)[1];var s=decodeURIComponent(l);navigator.msSaveBlob(new Blob([s]),t);i(t)}o(new Error("download error"))});return i};t.exports=n},{}],262:[function(e,t,r){"use strict";r.getDelay=function(e){if(!e._has)return 0;return e._has("gl3d")||e._has("gl2d")||e._has("mapbox")?500:0};r.getRedrawFunc=function(e){var t=e._fullLayout||{};var r=t._has&&t._has("polar");var n=!r&&e.data&&e.data[0]&&e.data[0].r;if(n)return;return function(){(e.calcdata||[]).forEach(function(e){if(e[0]&&e[0].t&&e[0].t.cb)e[0].t.cb()})}}},{}],263:[function(e,t,r){"use strict";var n=e("./helpers");var a={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};t.exports=a},{"./cloneplot":259,"./download":260,"./helpers":262,"./svgtoimg":264,"./toimage":265,"./tosvg":266}],264:[function(e,t,r){"use strict";var n=e("../lib");var a=e("events").EventEmitter;function i(e){var t=e.emitter||new a;var r=new Promise(function(a,i){var o=window.Image;var l=e.svg;var s=e.format||"png";if(n.isIE()&&s!=="svg"){var u=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");i(u);if(!e.promise){return t.emit("error",u)}else{return r}}var c=e.canvas;var f=e.scale||1;var d=e.width||300;var p=e.height||150;var v=f*d;var h=f*p;var g=c.getContext("2d");var y=new o;var m="data:image/svg+xml,"+encodeURIComponent(l);c.width=v;c.height=h;y.onload=function(){var r;if(s!=="svg"){g.drawImage(y,0,0,v,h)}switch(s){case"jpeg":r=c.toDataURL("image/jpeg");break;case"png":r=c.toDataURL("image/png");break;case"webp":r=c.toDataURL("image/webp");break;case"svg":r=m;break;default:var n="Image format is not jpeg, png, svg or webp.";i(new Error(n));if(!e.promise){return t.emit("error",n)}}a(r);if(!e.promise){t.emit("success",r)}};y.onerror=function(r){i(r);if(!e.promise){return t.emit("error",r)}};y.src=m});if(e.promise){return r}return t}t.exports=i},{"../lib":164,events:10}],265:[function(e,t,r){"use strict";var n=e("events").EventEmitter;var a=e("../registry");var i=e("../lib");var o=e("./helpers");var l=e("./cloneplot");var s=e("./tosvg");var u=e("./svgtoimg");function c(e,t){var r=new n;var c=l(e,{format:"png"});var f=c.gd;f.style.position="absolute";f.style.left="-5000px";document.body.appendChild(f);function d(){var e=o.getDelay(f._fullLayout);setTimeout(function(){var e=s(f);var n=document.createElement("canvas");n.id=i.randstr();r=u({format:t.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:n,emitter:r,svg:e});r.clean=function(){if(f)document.body.removeChild(f)}},e)}var p=o.getRedrawFunc(f);a.call("plot",f,c.data,c.layout,c.config).then(p).then(d).catch(function(e){r.emit("error",e)});return r}t.exports=c},{"../lib":164,"../registry":258,"./cloneplot":259,"./helpers":262,"./svgtoimg":264,"./tosvg":266,events:10}],266:[function(e,t,r){"use strict";var n=e("d3");var a=e("../lib");var i=e("../components/drawing");var o=e("../components/color");var l=e("../constants/xmlns_namespaces");var s=/"/g;var u="TOBESTRIPPED";var c=new RegExp('("'+u+")|("+u+'")',"g");function f(e){var t=n.select("body").append("div").style({display:"none"}).html("");var r=e.replace(/(&[^;]*;)/gi,function(e){if(e==="&lt;"){return"&#60;"}if(e==="&rt;"){return"&#62;"}if(e.indexOf("<")!==-1||e.indexOf(">")!==-1){return""}return t.html(e).text()});t.remove();return r}function d(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}t.exports=function e(t,r,p){var v=t._fullLayout;var h=v._paper;var g=v._toppaper;var y=v.width;var m=v.height;var x;h.insert("rect",":first-child").call(i.setRect,0,0,y,m).call(o.fill,v.paper_bgcolor);var b=v._basePlotModules||[];for(x=0;x<b.length;x++){var _=b[x];if(_.toSVG)_.toSVG(t)}if(g){var w=g.node().childNodes;var k=Array.prototype.slice.call(w);for(x=0;x<k.length;x++){var M=k[x];if(M.childNodes.length)h.node().appendChild(M)}}if(v._draggers){v._draggers.remove()}h.node().style.background="";h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=n.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){e.remove();return}else{e.style({visibility:null,display:null})}var t=this.style.fontFamily;if(t&&t.indexOf('"')!==-1){e.style("font-family",t.replace(s,u))}});h.selectAll(".point,.scatterpts").each(function(){var e=n.select(this);var t=this.style.fill;if(t&&t.indexOf("url(")!==-1){e.style("fill",t.replace(s,u))}});if(r==="pdf"||r==="eps"){h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0)}h.node().setAttributeNS(l.xmlns,"xmlns",l.svg);h.node().setAttributeNS(l.xmlns,"xmlns:xlink",l.xlink);if(r==="svg"&&p){h.attr("width",p*y);h.attr("height",p*m);h.attr("viewBox","0 0 "+y+" "+m)}var A=(new window.XMLSerializer).serializeToString(h.node());A=f(A);A=d(A);A=A.replace(c,"'");if(a.isIE()){A=A.replace(/"/gi,"'");A=A.replace(/(\('#)([^']*)('\))/gi,'("#$2")');A=A.replace(/(\\')/gi,'"')}return A}},{"../components/color":44,"../components/drawing":69,"../constants/xmlns_namespaces":146,"../lib":164,d3:8}],267:[function(e,t,r){"use strict";var n=e("../scattergeo/attributes");var a=e("../../components/colorscale/attributes");var i=e("../../components/colorbar/attributes");var o=e("../../plots/attributes");var l=e("../../lib/extend").extendFlat;var s=n.marker.line;t.exports=l({locations:{valType:"data_array",editType:"calc"},locationmode:n.locationmode,z:{valType:"data_array",editType:"calc"},text:l({},n.text,{}),marker:{line:{color:s.color,width:l({},s.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:true,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:n.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:l({},o.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},a("",{cLetter:"z",editTypeOverride:"calc"}),{colorbar:i})},{"../../components/colorbar/attributes":45,"../../components/colorscale/attributes":51,"../../lib/extend":156,"../../plots/attributes":206,"../scattergeo/attributes":305}],268:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../constants/numerical").BADNUM;var i=e("../../components/colorscale/calc");var o=e("../scatter/arrays_to_calcdata");var l=e("../scatter/calc_selection");t.exports=function e(t,r){var s=r._length;var u=new Array(s);for(var c=0;c<s;c++){var f=u[c]={};var d=r.locations[c];var p=r.z[c];f.loc=typeof d==="string"?d:null;f.z=n(p)?p:a}o(u,r);i(r,r.z,"","z");l(u,r);return u}},{"../../components/colorscale/calc":52,"../../constants/numerical":144,"../scatter/arrays_to_calcdata":279,"../scatter/calc_selection":282,"fast-isnumeric":11}],269:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../components/colorscale/defaults");var i=e("./attributes");t.exports=function e(t,r,o,l){function s(e,a){return n.coerce(t,r,i,e,a)}var u=s("locations");var c=s("z");if(!(u&&u.length&&n.isArrayOrTypedArray(c)&&c.length)){r.visible=false;return}r._length=Math.min(u.length,c.length);s("locationmode");s("text");s("marker.line.color");s("marker.line.width");s("marker.opacity");a(t,r,l,s,{prefix:"",cLetter:"z"});n.coerceSelectionMarkerOpacity(r,s)}},{"../../components/colorscale/defaults":54,"../../lib":164,"./attributes":267}],270:[function(e,t,r){"use strict";t.exports=function e(t,r){t.location=r.location;t.z=r.z;return t}},{}],271:[function(e,t,r){"use strict";var n=e("../../plots/cartesian/axes");var a=e("./attributes");var i=e("../scatter/fill_hover_text");t.exports=function e(t,r,n){var a=t.cd;var i=a[0].trace;var l=t.subplot;var s,u,c,f;for(u=0;u<a.length;u++){s=a[u];f=false;if(s._polygons){for(c=0;c<s._polygons.length;c++){if(s._polygons[c].contains([r,n])){f=!f}if(s._polygons[c].contains([r+360,n])){f=!f}}if(f)break}}if(!f||!s)return;t.x0=t.x1=t.xa.c2p(s.ct);t.y0=t.y1=t.ya.c2p(s.ct);t.index=s.index;t.location=s.loc;t.z=s.z;o(t,i,s,l.mockAxis);return[t]};function o(e,t,r,o){var l=r.hi||t.hoverinfo;var s=l==="all"?a.hoverinfo.flags:l.split("+");var u=s.indexOf("name")!==-1;var c=s.indexOf("location")!==-1;var f=s.indexOf("z")!==-1;var d=s.indexOf("text")!==-1;var p=!u&&c;var v=[];function h(e){return n.tickText(o,o.c2l(e),"hover").text}if(p){e.nameOverride=r.loc}else{if(u)e.nameOverride=t.name;if(c)v.push(r.loc)}if(f)v.push(h(r.z));if(d){i(r,t,v)}e.extraText=v.join("<br>")}},{"../../plots/cartesian/axes":209,"../scatter/fill_hover_text":287,"./attributes":267}],272:[function(e,t,r){"use strict";var n={};n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.colorbar=e("../heatmap/colorbar");n.calc=e("./calc");n.plot=e("./plot");n.style=e("./style").style;n.styleOnSelect=e("./style").styleOnSelect;n.hoverPoints=e("./hover");n.eventData=e("./event_data");n.selectPoints=e("./select");n.moduleType="trace";n.name="choropleth";n.basePlotModule=e("../../plots/geo");n.categories=["geo","noOpacity"];n.meta={};t.exports=n},{"../../plots/geo":239,"../heatmap/colorbar":276,"./attributes":267,"./calc":268,"./defaults":269,"./event_data":270,"./hover":271,"./plot":273,"./select":274,"./style":275}],273:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../../lib/polygon");var o=e("../../lib/topojson_utils").getTopojsonFeatures;var l=e("../../lib/geo_location_utils").locationToFeature;var s=e("./style").style;t.exports=function e(t,r,i){for(var o=0;o<i.length;o++){u(i[o],r.topojson)}function l(e){return e[0].trace.uid}var c=r.layers.backplot.select(".choroplethlayer").selectAll("g.trace.choropleth").data(i,l);c.enter().append("g").attr("class","trace choropleth");c.exit().remove();c.each(function(e){var r=e[0].node3=n.select(this);var i=r.selectAll("path.choroplethlocation").data(a.identity);i.enter().append("path").classed("choroplethlocation",true);i.exit().remove();s(t,e)})};function u(e,t){var r=e[0].trace;var n=e.length;var a=o(r,t);for(var i=0;i<n;i++){var s=e[i];var u=l(r.locationmode,s.loc,a);if(!u){s.geojson=null;continue}s.geojson=u;s.ct=u.properties.ct;s.index=i;s._polygons=c(u)}}function c(e){var t=e.geometry;var r=t.coordinates;var n=e.id;var a=[];var o,l,s,u;function c(e){for(var t=0;t<e.length-1;t++){if(e[t][0]>0&&e[t+1][0]<0)return t}return null}if(n==="RUS"||n==="FJI"){o=function(e){var t;if(c(e)===null){t=e}else{t=new Array(e.length);for(u=0;u<e.length;u++){t[u]=[e[u][0]<0?e[u][0]+360:e[u][0],e[u][1]]}}a.push(i.tester(t))}}else if(n==="ATA"){o=function(e){var t=c(e);if(t===null){return a.push(i.tester(e))}var r=new Array(e.length+1);var n=0;for(u=0;u<e.length;u++){if(u>t){r[n++]=[e[u][0]+360,e[u][1]]}else if(u===t){r[n++]=e[u];r[n++]=[e[u][0],-90]}else{r[n++]=e[u]}}var o=i.tester(r);o.pts.pop();a.push(o)}}else{o=function(e){a.push(i.tester(e))}}switch(t.type){case"MultiPolygon":for(l=0;l<r.length;l++){for(s=0;s<r[l].length;s++){o(r[l][s])}}break;case"Polygon":for(l=0;l<r.length;l++){o(r[l])}break}return a}},{"../../lib":164,"../../lib/geo_location_utils":159,"../../lib/polygon":176,"../../lib/topojson_utils":188,"./style":275,d3:8}],274:[function(e,t,r){"use strict";t.exports=function e(t,r){var n=t.cd;var a=t.xaxis;var i=t.yaxis;var o=[];var l,s,u,c,f;if(r===false){for(l=0;l<n.length;l++){n[l].selected=0}}else{for(l=0;l<n.length;l++){s=n[l];u=s.ct;if(!u)continue;c=a.c2p(u);f=i.c2p(u);if(r.contains([c,f])){o.push({pointNumber:l,lon:u[0],lat:u[1]});s.selected=1}else{s.selected=0}}}return o}},{}],275:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/color");var i=e("../../components/drawing");var o=e("../../components/colorscale");function l(e,t){if(t)s(e,t)}function s(e,t){var r=t[0].trace;var l=t[0].node3;var s=l.selectAll(".choroplethlocation");var u=r.marker||{};var c=u.line||{};var f=o.makeColorScaleFunc(o.extractScale(r.colorscale,r.zmin,r.zmax));s.each(function(e){n.select(this).attr("fill",f(e.z)).call(a.stroke,e.mlc||c.color).call(i.dashLine,"",e.mlw||c.width||0).style("opacity",u.opacity)});i.selectedPointStyle(s,r,e)}function u(e,t){var r=t[0].node3;var n=t[0].trace;if(n.selectedpoints){i.selectedPointStyle(r.selectAll(".choroplethlocation"),n,e)}else{s(e,t)}}t.exports={style:l,styleOnSelect:u}},{"../../components/color":44,"../../components/colorscale":59,"../../components/drawing":69,d3:8}],276:[function(e,t,r){"use strict";t.exports={min:"zmin",max:"zmax"}},{}],277:[function(e,t,r){"use strict";var n=e("../../lib");r.formatPiePercent=function e(t,r){var a=(t*100).toPrecision(3);if(a.lastIndexOf(".")!==-1){a=a.replace(/[.]?0+$/,"")}return n.numSeparate(a,r)+"%"};r.formatPieValue=function e(t,r){var a=t.toPrecision(10);if(a.lastIndexOf(".")!==-1){a=a.replace(/[.]?0+$/,"")}return n.numSeparate(a,r)};r.getFirstFilled=function e(t,r){if(!Array.isArray(t))return;for(var n=0;n<r.length;n++){var a=t[r[n]];if(a||a===0)return a}};r.castOption=function e(t,n){if(Array.isArray(t))return r.getFirstFilled(t,n);else if(t)return t}},{"../../lib":164}],278:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("./helpers").castOption;t.exports=function e(t,r,i){var o=i.marker.line;var l=a(o.color,r.pts)||n.defaultLine;var s=a(o.width,r.pts)||0;t.style({"stroke-width":s}).call(n.fill,r.color).call(n.stroke,l)}},{"../../components/color":44,"./helpers":277}],279:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){for(var a=0;a<t.length;a++)t[a].i=a;n.mergeArray(r.text,t,"tx");n.mergeArray(r.hovertext,t,"htx");n.mergeArray(r.customdata,t,"data");n.mergeArray(r.textposition,t,"tp");if(r.textfont){n.mergeArray(r.textfont.size,t,"ts");n.mergeArray(r.textfont.color,t,"tc");n.mergeArray(r.textfont.family,t,"tf")}var i=r.marker;if(i){n.mergeArray(i.size,t,"ms");n.mergeArray(i.opacity,t,"mo");n.mergeArray(i.symbol,t,"mx");n.mergeArray(i.color,t,"mc");var o=i.line;if(i.line){n.mergeArray(o.color,t,"mlc");n.mergeArray(o.width,t,"mlw")}var l=i.gradient;if(l&&l.type!=="none"){n.mergeArray(l.type,t,"mgt");n.mergeArray(l.color,t,"mgc")}}}},{"../../lib":164}],280:[function(e,t,r){"use strict";var n=e("../../components/colorscale/attributes");var a=e("../../components/colorbar/attributes");var i=e("../../plots/font_attributes");var o=e("../../components/drawing/attributes").dash;var l=e("../../components/drawing");var s=e("./constants");var u=e("../../lib/extend").extendFlat;t.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:true,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:true,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:u({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:true,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:false,editType:"calc"},cliponaxis:{valType:"boolean",dflt:true,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:u({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:true,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:true,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:true,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},colorbar:a,line:u({width:{valType:"number",min:0,arrayOk:true,editType:"style"},editType:"calc"},n("marker.line")),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:true,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:true,editType:"calc"},editType:"calc"},editType:"calc"},n("marker")),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:true,editType:"calc"},textfont:i({editType:"calc",colorEditType:"style",arrayOk:true}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorbar/attributes":45,"../../components/colorscale/attributes":51,"../../components/drawing":69,"../../components/drawing/attributes":68,"../../lib/extend":156,"../../plots/font_attributes":235,"./constants":285}],281:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../lib").isArrayOrTypedArray;var i=e("../../plots/cartesian/axes");var o=e("../../constants/numerical").BADNUM;var l=e("./subtypes");var s=e("./colorscale_calc");var u=e("./arrays_to_calcdata");var c=e("./calc_selection");function f(e,t){var r=i.getFromId(e,t.xaxis||"x");var a=i.getFromId(e,t.yaxis||"y");var l=r.makeCalcdata(t,"x");var f=a.makeCalcdata(t,"y");var v=t._length;var h=new Array(v);var g=p(t,v);d(e,t,r,a,l,f,g);for(var y=0;y<v;y++){h[y]=n(l[y])&&n(f[y])?{x:l[y],y:f[y]}:{x:o,y:o};if(t.ids){h[y].id=String(t.ids[y])}}u(h,t);s(t);c(h,t);e.firstscatter=false;return h}function d(e,t,r,n,a,o,s){var u=t._length;r._minDtick=0;n._minDtick=0;var c={padded:true};var f={padded:true};if(s){c.ppad=f.ppad=s}if((t.fill==="tozerox"||t.fill==="tonextx"&&e.firstscatter)&&(a[0]!==a[u-1]||o[0]!==o[u-1])){c.tozero=true}else if(!(t.error_y||{}).visible&&(["tonexty","tozeroy"].indexOf(t.fill)!==-1||!l.hasMarkers(t)&&!l.hasText(t))){c.padded=false;c.ppad=0}if((t.fill==="tozeroy"||t.fill==="tonexty"&&e.firstscatter)&&(a[0]!==a[u-1]||o[0]!==o[u-1])){f.tozero=true}else if(["tonextx","tozerox"].indexOf(t.fill)!==-1){f.padded=false}i.expand(r,a,c);i.expand(n,o,f)}function p(e,t){if(!l.hasMarkers(e))return;var r=e.marker;var n=1.6*(e.marker.sizeref||1);var o;if(e.marker.sizemode==="area"){o=function(e){return Math.max(Math.sqrt((e||0)/n),3)}}else{o=function(e){return Math.max((e||0)/n,3)}}if(a(r.size)){var s={type:"linear"};i.setConvert(s);var u=s.makeCalcdata(e.marker,"size");var c=new Array(t);for(var f=0;f<t;f++){c[f]=o(u[f])}return c}else{return o(r.size)}}t.exports={calc:f,calcMarkerSize:p,calcAxisExpansion:d}},{"../../constants/numerical":144,"../../lib":164,"../../plots/cartesian/axes":209,"./arrays_to_calcdata":279,"./calc_selection":282,"./colorscale_calc":284,"./subtypes":302,"fast-isnumeric":11}],282:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r){if(n.isArrayOrTypedArray(r.selectedpoints)){n.tagSelected(t,r)}}},{"../../lib":164}],283:[function(e,t,r){"use strict";t.exports=function e(t){for(var r=0;r<t.length;r++){var n=t[r];if(n.type!=="scatter")continue;var a=n.fill;if(a==="none"||a==="toself")continue;n.opacity=undefined;if(a==="tonexty"||a==="tonextx"){for(var i=r-1;i>=0;i--){var o=t[i];if(o.type==="scatter"&&o.xaxis===n.xaxis&&o.yaxis===n.yaxis){o.opacity=undefined;break}}}}}},{}],284:[function(e,t,r){"use strict";var n=e("../../components/colorscale/has_colorscale");var a=e("../../components/colorscale/calc");var i=e("./subtypes");t.exports=function e(t){if(i.hasLines(t)&&n(t,"line")){a(t,t.line.color,"line","c")}if(i.hasMarkers(t)){if(n(t,"marker")){a(t,t.marker.color,"marker","c")}if(n(t,"marker.line")){a(t,t.marker.line.color,"marker.line","c")}}}},{"../../components/colorscale/calc":52,"../../components/colorscale/has_colorscale":58,"./subtypes":302}],285:[function(e,t,r){"use strict";t.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20}},{}],286:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../registry");var i=e("./attributes");var o=e("./constants");var l=e("./subtypes");var s=e("./xy_defaults");var u=e("./marker_defaults");var c=e("./line_defaults");var f=e("./line_shape_defaults");var d=e("./text_defaults");var p=e("./fillcolor_defaults");t.exports=function e(t,r,v,h){function g(e,a){return n.coerce(t,r,i,e,a)}var y=s(t,r,h,g),m=y<o.PTS_LINESONLY?"lines+markers":"lines";if(!y){r.visible=false;return}g("text");g("hovertext");g("mode",m);if(l.hasLines(r)){c(t,r,v,h,g);f(t,r,g);g("connectgaps");g("line.simplify")}if(l.hasMarkers(r)){u(t,r,v,h,g,{gradient:true})}if(l.hasText(r)){d(t,r,h,g)}var x=[];if(l.hasMarkers(r)||l.hasText(r)){g("cliponaxis");g("marker.maxdisplayed");x.push("points")}g("fill");if(r.fill!=="none"){p(t,r,v,g);if(!l.hasLines(r))f(t,r,g)}if(r.fill==="tonext"||r.fill==="toself"){x.push("fills")}g("hoveron",x.join("+")||"points");var b=a.getComponentMethod("errorbars","supplyDefaults");b(t,r,v,{axis:"y"});b(t,r,v,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(r,g)}},{"../../lib":164,"../../registry":258,"./attributes":280,"./constants":285,"./fillcolor_defaults":288,"./line_defaults":292,"./line_shape_defaults":294,"./marker_defaults":298,"./subtypes":302,"./text_defaults":303,"./xy_defaults":304}],287:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function e(t,r,i){var o=Array.isArray(i)?function(e){i.push(e)}:function(e){i.text=e};var l=n.extractOption(t,r,"htx","hovertext");if(a(l))return o(l);var s=n.extractOption(t,r,"tx","text");if(a(s))return o(s)};function a(e){return e||e===0}},{"../../lib":164}],288:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("../../lib").isArrayOrTypedArray;t.exports=function e(t,r,i,o){var l=false;if(r.marker){var s=r.marker.color,u=(r.marker.line||{}).color;if(s&&!a(s)){l=s}else if(u&&!a(u)){l=u}}o("fillcolor",n.addOpacity((r.line||{}).color||l||i,.5))}},{"../../components/color":44,"../../lib":164}],289:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("./subtypes");t.exports=function e(t,r){var i,o;if(t.mode==="lines"){i=t.line.color;return i&&n.opacity(i)?i:t.fillcolor}else if(t.mode==="none"){return t.fill?t.fillcolor:""}else{var l=r.mcc||(t.marker||{}).color,s=r.mlcc||((t.marker||{}).line||{}).color;o=l&&n.opacity(l)?l:s&&n.opacity(s)&&(r.mlw||((t.marker||{}).line||{}).width)?s:"";if(o){if(n.opacity(o)<.3){return n.addOpacity(o,.3)}else return o}else{i=(t.line||{}).color;return i&&n.opacity(i)&&a.hasLines(t)&&t.line.width?i:t.fillcolor}}}},{"../../components/color":44,"./subtypes":302}],290:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../../components/fx");var i=e("../../registry");var o=e("./get_trace_color");var l=e("../../components/color");var s=e("./fill_hover_text");t.exports=function e(t,r,u,c){var f=t.cd;var d=f[0].trace;var p=t.xa;var v=t.ya;var h=p.c2p(r);var g=v.c2p(u);var y=[h,g];var m=d.hoveron||"";var x=d.mode.indexOf("markers")!==-1?3:.5;if(m.indexOf("points")!==-1){var b=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(p.c2p(e.x)-h);var a=n<t?r*n/t:n-t+r;return a};var _=function(e){var t=Math.max(3,e.mrc||0);var r=1-1/t;var n=Math.abs(v.c2p(e.y)-g);return n<t?r*n/t:n-t+r};var w=function(e){var t=Math.max(x,e.mrc||0);var r=p.c2p(e.x)-h;var n=v.c2p(e.y)-g;return Math.max(Math.sqrt(r*r+n*n)-t,1-x/t)};var k=a.getDistanceFunction(c,b,_,w);a.getClosest(f,k,t);if(t.index!==false){var M=f[t.index];var A=p.c2p(M.x,true);var T=v.c2p(M.y,true);var L=M.mrc||1;n.extendFlat(t,{color:o(d,M),x0:A-L,x1:A+L,xLabelVal:M.x,y0:T-L,y1:T+L,yLabelVal:M.y,spikeDistance:w(M)});s(M,d,t);i.getComponentMethod("errorbars","hoverInfo")(M,d,t);return[t]}}if(m.indexOf("fills")!==-1&&d._polygons){var S=d._polygons;var C=[];var P=false;var z=Infinity;var O=-Infinity;var D=Infinity;var E=-Infinity;var R,I,N,F,j,B,q,H,U;for(R=0;R<S.length;R++){N=S[R];if(N.contains(y)){P=!P;C.push(N);D=Math.min(D,N.ymin);E=Math.max(E,N.ymax)}}if(P){D=Math.max(D,0);E=Math.min(E,v._length);var V=(D+E)/2;for(R=0;R<C.length;R++){F=C[R].pts;for(I=1;I<F.length;I++){H=F[I-1][1];U=F[I][1];if(H>V!==U>=V){B=F[I-1][0];q=F[I][0];if(U-H){j=B+(q-B)*(V-H)/(U-H);z=Math.min(z,j);O=Math.max(O,j)}}}}z=Math.max(z,0);O=Math.min(O,p._length);var G=l.defaultLine;if(l.opacity(d.fillcolor))G=d.fillcolor;else if(l.opacity((d.line||{}).color)){G=d.line.color}n.extendFlat(t,{distance:t.maxHoverDistance,x0:z,x1:O,y0:V,y1:V,color:G});delete t.index;if(d.text&&!Array.isArray(d.text)){t.text=String(d.text)}else t.text=d.name;return[t]}}}},{"../../components/color":44,"../../components/fx":86,"../../lib":164,"../../registry":258,"./fill_hover_text":287,"./get_trace_color":289}],291:[function(e,t,r){"use strict";var n={};var a=e("./subtypes");n.hasLines=a.hasLines;n.hasMarkers=a.hasMarkers;n.hasText=a.hasText;n.isBubble=a.isBubble;n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.cleanData=e("./clean_data");n.calc=e("./calc").calc;n.arraysToCalcdata=e("./arrays_to_calcdata");n.plot=e("./plot");n.colorbar=e("./marker_colorbar");n.style=e("./style").style;n.styleOnSelect=e("./style").styleOnSelect;n.hoverPoints=e("./hover");n.selectPoints=e("./select");n.animatable=true;n.moduleType="trace";n.name="scatter";n.basePlotModule=e("../../plots/cartesian");n.categories=["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"];n.meta={};t.exports=n},{"../../plots/cartesian":220,"./arrays_to_calcdata":279,"./attributes":280,"./calc":281,"./clean_data":283,"./defaults":286,"./hover":290,"./marker_colorbar":297,"./plot":299,"./select":300,"./style":301,"./subtypes":302}],292:[function(e,t,r){"use strict";var n=e("../../lib").isArrayOrTypedArray;var a=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");t.exports=function e(t,r,o,l,s,u){var c=(t.marker||{}).color;s("line.color",o);if(a(t,"line")){i(t,r,l,s,{prefix:"line.",cLetter:"c"})}else{var f=(n(c)?false:c)||o;s("line.color",f)}s("line.width");if(!(u||{}).noDash)s("line.dash")}},{"../../components/colorscale/defaults":54,"../../components/colorscale/has_colorscale":58,"../../lib":164}],293:[function(e,t,r){"use strict";var n=e("../../constants/numerical").BADNUM;var a=e("../../lib");var i=a.segmentsIntersect;var o=a.constrain;var l=e("./constants");t.exports=function e(t,r){var s=r.xaxis;var u=r.yaxis;var c=r.simplify;var f=r.connectGaps;var d=r.baseTolerance;var p=r.shape;var v=p==="linear";var h=[];var g=l.minTolerance;var y=new Array(t.length);var m=0;var x;var b,_,w,k;var M;var A;var T;var L;var S,C,P,z;var O,D,E;if(!c){d=g=-1}function R(e){var r=t[e];if(!r)return false;var a=s.c2p(r.x);var i=u.c2p(r.y);if(a===n||i===n)return r.intoCenter||false;return[a,i]}function I(e,t,r,n){var a=r-e;var i=n-t;var o=.5-e;var l=.5-t;var s=a*a+i*i;var u=a*o+i*l;if(u>0&&u<s){var c=o*i-l*a;if(c*c<s)return true}}var N,F;function j(e,t){var r=e[0]/s._length;var n=e[1]/u._length;var a=Math.max(0,-r,r-1,-n,n-1);if(a&&N!==undefined&&I(r,n,N,F)){a=0}if(a&&t&&I(r,n,t[0]/s._length,t[1]/u._length)){a=0}return(1+l.toleranceGrowth*a)*d}function B(e,t){var r=e[0]-t[0];var n=e[1]-t[1];return Math.sqrt(r*r+n*n)}var q=l.maxScreensAway;var H=-s._length*q;var U=s._length*(1+q);var V=-u._length*q;var G=u._length*(1+q);var Y=[[H,V,U,V],[U,V,U,G],[U,G,H,G],[H,G,H,V]];var Z,X,W,J,Q,$;function K(e,t){var r=[];var n=0;for(var a=0;a<4;a++){var o=Y[a];var l=i(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);if(l&&(!n||Math.abs(l.x-r[0][0])>1||Math.abs(l.y-r[0][1])>1)){l=[l.x,l.y];if(n&&B(l,e)<B(r[0],e))r.unshift(l);else r.push(l);n++}}return r}function ee(e){if(e[0]<H||e[0]>U||e[1]<V||e[1]>G){return[o(e[0],H,U),o(e[1],V,G)]}}function te(e,t){if(e[0]===t[0]&&(e[0]===H||e[0]===U))return true;if(e[1]===t[1]&&(e[1]===V||e[1]===G))return true}function re(e,t){var r=[];var n=ee(e);var a=ee(t);if(n&&a&&te(n,a))return r;if(n)r.push(n);if(a)r.push(a);return r}function ne(e,t,r){return function(n,i){var o=ee(n);var l=ee(i);var s=[];if(o&&l&&te(o,l))return s;if(o)s.push(o);if(l)s.push(l);var u=2*a.constrain((n[e]+i[e])/2,t,r)-((o||n)[e]+(l||i)[e]);if(u){var c;if(o&&l){c=u>0===o[e]>l[e]?o:l}else c=o||l;c[e]+=u}return s}}var ae;if(p==="linear"||p==="spline"){ae=K}else if(p==="hv"||p==="vh"){ae=re}else if(p==="hvh")ae=ne(0,H,U);else if(p==="vhv")ae=ne(1,V,G);function ie(e,t){var r=t[0]-e[0];var n=(t[1]-e[1])/r;var a=(e[1]*t[0]-t[1]*e[0])/r;if(a>0)return[n>0?H:U,G];else return[n>0?U:H,V]}function oe(e){var t=e[0];var r=e[1];var n=t===y[m-1][0];var a=r===y[m-1][1];if(n&&a)return;if(m>1){var i=t===y[m-2][0];var o=r===y[m-2][1];if(n&&(t===H||t===U)&&i){if(o)m--;else y[m-1]=e}else if(a&&(r===V||r===G)&&o){if(i)m--;else y[m-1]=e}else y[m++]=e}else y[m++]=e}function le(e){if(y[m-1][0]!==e[0]&&y[m-1][1]!==e[1]){oe([W,J])}oe(e);Q=null;W=J=0}function se(e){N=e[0]/s._length;F=e[1]/u._length;Z=e[0]<H?H:e[0]>U?U:0;X=e[1]<V?V:e[1]>G?G:0;if(Z||X){if(!m){y[m++]=[Z||e[0],X||e[1]]}else if(Q){var t=ae(Q,e);if(t.length>1){le(t[0]);y[m++]=t[1]}}else{$=ae(y[m-1],e)[0];y[m++]=$}var r=y[m-1];if(Z&&X&&(r[0]!==Z||r[1]!==X)){if(Q){if(W!==Z&&J!==X){if(W&&J){oe(ie(Q,e))}else{oe([W||Z,J||X])}}else if(W&&J){oe([W,J])}}oe([Z,X])}else if(W-Z&&J-X){oe([Z||W,X||J])}Q=e;W=Z;J=X}else{if(Q){le(ae(Q,e)[0])}y[m++]=e}}for(x=0;x<t.length;x++){b=R(x);if(!b)continue;m=0;Q=null;se(b);for(x++;x<t.length;x++){w=R(x);if(!w){if(f)continue;else break}if(!v){se(w);continue}var ue=R(x+1);S=B(w,b);if(S<j(w,ue)*g)continue;T=[(w[0]-b[0])/S,(w[1]-b[1])/S];k=b;C=S;P=O=D=0;A=false;_=w;for(x++;x<t.length;x++){M=ue;ue=R(x+1);if(!M){if(f)continue;else break}L=[M[0]-b[0],M[1]-b[1]];E=L[0]*T[1]-L[1]*T[0];O=Math.min(O,E);D=Math.max(D,E);if(D-O>j(M,ue))break;_=M;z=L[0]*T[0]+L[1]*T[1];if(z>C){C=z;w=M;A=false}else if(z<P){P=z;k=M;A=true}}if(A){se(w);if(_!==k)se(k)}else{if(k!==b)se(k);if(_!==w)se(w)}se(_);if(x>=t.length||!M)break;se(M);b=M}if(Q)oe([W||Q[0],J||Q[1]]);h.push(y.slice(0,m))}return h}},{"../../constants/numerical":144,"../../lib":164,"./constants":285}],294:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a=n("line.shape");if(a==="spline")n("line.smoothing")}},{}],295:[function(e,t,r){"use strict";t.exports=function e(t,r,n){var a,i;var o=null;for(i=0;i<n.length;++i){a=n[i][0].trace;if(a.visible===true){a._nexttrace=null;if(["tonextx","tonexty","tonext"].indexOf(a.fill)!==-1){a._prevtrace=o;if(o){o._nexttrace=a}}o=a}else{a._prevtrace=a._nexttrace=null}}}},{}],296:[function(e,t,r){"use strict";var n=e("fast-isnumeric");t.exports=function e(t){var r=t.marker,a=r.sizeref||1,i=r.sizemin||0;var o=r.sizemode==="area"?function(e){return Math.sqrt(e/a)}:function(e){return e/a};return function(e){var t=o(e/2);return n(t)&&t>0?Math.max(t,i):0}}},{"fast-isnumeric":11}],297:[function(e,t,r){"use strict";t.exports={container:"marker",min:"cmin",max:"cmax"}},{}],298:[function(e,t,r){"use strict";var n=e("../../components/color");var a=e("../../components/colorscale/has_colorscale");var i=e("../../components/colorscale/defaults");var o=e("./subtypes");t.exports=function e(t,r,l,s,u,c){var f=o.isBubble(t),d=(t.line||{}).color,p;c=c||{};if(d)l=d;u("marker.symbol");u("marker.opacity",f?.7:1);u("marker.size");u("marker.color",l);if(a(t,"marker")){i(t,r,s,u,{prefix:"marker.",cLetter:"c"})}if(!c.noSelect){u("selected.marker.color");u("unselected.marker.color");u("selected.marker.size");u("unselected.marker.size")}if(!c.noLine){if(d&&!Array.isArray(d)&&r.marker.color!==d){p=d}else if(f)p=n.background;else p=n.defaultLine;u("marker.line.color",p);if(a(t,"marker.line")){i(t,r,s,u,{prefix:"marker.line.",cLetter:"c"})}u("marker.line.width",f?1:0)}if(f){u("marker.sizeref");u("marker.sizemin");u("marker.sizemode")}if(c.gradient){var v=u("marker.gradient.type");if(v!=="none"){u("marker.gradient.color")}}}},{"../../components/color":44,"../../components/colorscale/defaults":54,"../../components/colorscale/has_colorscale":58,"./subtypes":302}],299:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../registry");var i=e("../../lib");var o=e("../../components/drawing");var l=e("./subtypes");var s=e("./line_points");var u=e("./link_traces");var c=e("../../lib/polygon").tester;t.exports=function e(t,r,a,i,o,l){var s,c,p,v;var h=!o;var g=!!o&&o.duration>0;p=i.selectAll("g.trace").data(a,function(e){return e[0].trace.uid});p.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2);u(t,r,a);f(t,i,r);for(s=0,c={};s<a.length;s++){c[a[s][0].trace.uid]=s}i.selectAll("g.trace").sort(function(e,t){var r=c[e[0].trace.uid];var n=c[t[0].trace.uid];return r>n?1:-1});if(g){if(l){v=l()}var y=n.transition().duration(o.duration).ease(o.easing).each("end",function(){v&&v()}).each("interrupt",function(){v&&v()});y.each(function(){i.selectAll("g.trace").each(function(e,n){d(t,n,r,e,a,this,o)})})}else{i.selectAll("g.trace").each(function(e,n){d(t,n,r,e,a,this,o)})}if(h){p.exit().remove()}i.selectAll("path:not([d])").remove()};function f(e,t,r){var a;t.selectAll("g.trace").each(function(e){var t=n.select(this);a=e[0].trace;if(a._nexttrace){a._nextFill=t.select(".js-fill.js-tonext");if(!a._nextFill.size()){var i=":first-child";if(t.select(".js-fill.js-tozero").size()){i+=" + *"}a._nextFill=t.insert("path",i).attr("class","js-fill js-tonext")}}else{t.selectAll(".js-fill.js-tonext").remove();a._nextFill=null}if(a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace)){a._ownFill=t.select(".js-fill.js-tozero");if(!a._ownFill.size()){a._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero")}}else{t.selectAll(".js-fill.js-tozero").remove();a._ownFill=null}t.selectAll(".js-fill").call(o.setClipUrl,r.layerClipId)})}function d(e,t,r,u,f,d,v){var h,g;p(e,t,r,u,f);var y=!!v&&v.duration>0;function m(e){return y?e.transition():e}var x=r.xaxis,b=r.yaxis;var _=u[0].trace,w=_.line,k=n.select(d);a.getComponentMethod("errorbars","plot")(k,r,v);if(_.visible!==true)return;m(k).style("opacity",_.opacity);var M,A;var T=_.fill.charAt(_.fill.length-1);if(T!=="x"&&T!=="y")T="";if(!r.isRangePlot)u[0].node3=k;var L="";var S=[];var C=_._prevtrace;if(C){L=C._prevRevpath||"";A=C._nextFill;S=C._polygons}var P,z,O="",D="",E,R,I,N,F,j,B;var q=[],H=i.noop;M=_._ownFill;if(l.hasLines(_)||_.fill!=="none"){if(A){A.datum(u)}if(["hv","vh","hvh","vhv"].indexOf(w.shape)!==-1){E=o.steps(w.shape);R=o.steps(w.shape.split("").reverse().join(""))}else if(w.shape==="spline"){E=R=function(e){var t=e[e.length-1];if(e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]){return o.smoothclosed(e.slice(1),w.smoothing)}else{return o.smoothopen(e,w.smoothing)}}}else{E=R=function(e){return"M"+e.join("L")}}I=function(e){return R(e.reverse())};q=s(u,{xaxis:x,yaxis:b,connectGaps:_.connectgaps,baseTolerance:Math.max(w.width||1,3)/4,shape:w.shape,simplify:w.simplify});B=_._polygons=new Array(q.length);for(g=0;g<q.length;g++){_._polygons[g]=c(q[g])}if(q.length){N=q[0][0];F=q[q.length-1];j=F[F.length-1]}H=function(e){return function(t){P=E(t);z=I(t);if(!O){O=P;D=z}else if(T){O+="L"+P.substr(1);D=z+("L"+D.substr(1))}else{O+="Z"+P;D=z+"Z"+D}if(l.hasLines(_)&&t.length>1){var r=n.select(this);r.datum(u);if(e){m(r.style("opacity",0).attr("d",P).call(o.lineGroupStyle)).style("opacity",1)}else{var a=m(r);a.attr("d",P);o.singleLineStyle(u,a)}}}}}var U=k.selectAll(".js-line").data(q);m(U.exit()).style("opacity",0).remove();U.each(H(false));U.enter().append("path").classed("js-line",true).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(H(true));o.setClipUrl(U,r.layerClipId);function V(e){m(e).attr("d","M0,0Z")}if(q.length){if(M){if(N&&j){if(T){if(T==="y"){N[1]=j[1]=b.c2p(0,true)}else if(T==="x"){N[0]=j[0]=x.c2p(0,true)}m(M).attr("d","M"+j+"L"+N+"L"+O.substr(1)).call(o.singleFillStyle)}else{m(M).attr("d",O+"Z").call(o.singleFillStyle)}}}else if(A){if(_.fill.substr(0,6)==="tonext"&&O&&L){if(_.fill==="tonext"){m(A).attr("d",O+"Z"+L+"Z").call(o.singleFillStyle)}else{m(A).attr("d",O+"L"+L.substr(1)+"Z").call(o.singleFillStyle)}_._polygons=_._polygons.concat(S)}else{V(A);_._polygons=null}}_._prevRevpath=D;_._prevPolygons=B}else{if(M)V(M);else if(A)V(A);_._polygons=_._prevRevpath=_._prevPolygons=null}function G(e){return e.filter(function(e){return e.vis})}function Y(e){return e.id}function Z(e){if(e.ids){return Y}}function X(){return false}function W(t){var a,s,u;var c=t[0].trace;var f=n.select(this);var d=l.hasMarkers(c);var p=l.hasText(c);var v=Z(c);var h=X;var g=X;if(d){h=c.marker.maxdisplayed||c._needsCull?G:i.identity}if(p){g=c.marker.maxdisplayed||c._needsCull?G:i.identity}s=f.selectAll("path.point");a=s.data(h,v);var _=a.enter().append("path").classed("point",true);if(y){_.call(o.pointStyle,c,e).call(o.translatePoints,x,b).style("opacity",0).transition().style("opacity",1)}a.order();var w;if(d){w=o.makePointStyleFns(c)}a.each(function(t){var a=n.select(this);var i=m(a);u=o.translatePoint(t,i,x,b);if(u){o.singlePointStyle(t,i,c,w,e);if(r.layerClipId){o.hideOutsideRangePoint(t,i,x,b,c.xcalendar,c.ycalendar)}if(c.customdata){a.classed("plotly-customdata",t.data!==null&&t.data!==undefined)}}else{i.remove()}});if(y){a.exit().transition().style("opacity",0).remove()}else{a.exit().remove()}s=f.selectAll("g");a=s.data(g,v);a.enter().append("g").classed("textpoint",true).append("text");a.order();a.each(function(e){var t=n.select(this);var a=m(t.select("text"));u=o.translatePoint(e,a,x,b);if(u){if(r.layerClipId){o.hideOutsideRangePoint(e,t,x,b,c.xcalendar,c.ycalendar)}}else{t.remove()}});a.selectAll("text").call(o.textPointStyle,c,e).each(function(e){var t=x.c2p(e.x);var r=b.c2p(e.y);n.select(this).selectAll("tspan.line").each(function(){m(n.select(this)).attr({x:t,y:r})})});a.exit().remove()}var J=k.selectAll(".points");h=J.data([u]);J.each(W);h.enter().append("g").classed("points",true).each(W);h.exit().remove();h.each(function(e){var t=e[0].trace.cliponaxis===false;o.setClipUrl(n.select(this),t?null:r.layerClipId)})}function p(e,t,r,a,o){var s=r.xaxis,u=r.yaxis,c=n.extent(i.simpleMap(s.range,s.r2c)),f=n.extent(i.simpleMap(u.range,u.r2c));var d=a[0].trace;if(!l.hasMarkers(d))return;var p=d.marker.maxdisplayed;if(p===0)return;var v=a.filter(function(e){return e.x>=c[0]&&e.x<=c[1]&&e.y>=f[0]&&e.y<=f[1]}),h=Math.ceil(v.length/p),g=0;o.forEach(function(e,r){var n=e[0].trace;if(l.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<t){g++}});var y=Math.round(g*h/3+Math.floor(g/3)*h/7.1);a.forEach(function(e){delete e.vis});v.forEach(function(e,t){if(Math.round((t+y)%h)===0)e.vis=true})}},{"../../components/drawing":69,"../../lib":164,"../../lib/polygon":176,"../../registry":258,"./line_points":293,"./link_traces":295,"./subtypes":302,d3:8}],300:[function(e,t,r){"use strict";var n=e("./subtypes");t.exports=function e(t,r){var a=t.cd,i=t.xaxis,o=t.yaxis,l=[],s=a[0].trace,u,c,f,d;var p=!n.hasMarkers(s)&&!n.hasText(s);if(p)return[];if(r===false){for(u=0;u<a.length;u++){a[u].selected=0}}else{for(u=0;u<a.length;u++){c=a[u];f=i.c2p(c.x);d=o.c2p(c.y);if(r.contains([f,d])){l.push({pointNumber:u,x:i.c2d(c.x),y:o.c2d(c.y)});c.selected=1}else{c.selected=0}}}return l}},{"./subtypes":302}],301:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/drawing");var i=e("../../registry");function o(e,t){var r=t?t[0].node3:n.select(e).selectAll("g.trace.scatter");r.style("opacity",function(e){return e[0].trace.opacity});r.selectAll("g.points").each(function(t){var r=n.select(this);var a=t.trace||t[0].trace;l(r,a,e)});r.selectAll("g.trace path.js-line").call(a.lineGroupStyle);r.selectAll("g.trace path.js-fill").call(a.fillGroupStyle);i.getComponentMethod("errorbars","style")(r)}function l(e,t,r){a.pointStyle(e.selectAll("path.point"),t,r);a.textPointStyle(e.selectAll("text"),t,r)}function s(e,t){var r=t[0].node3;var n=t[0].trace;if(n.selectedpoints){a.selectedPointStyle(r.selectAll("path.point"),n);a.selectedTextStyle(r.selectAll("text"),n)}else{l(r,n,e)}}t.exports={style:o,stylePoints:l,styleOnSelect:s}},{"../../components/drawing":69,"../../registry":258,d3:8}],302:[function(e,t,r){"use strict";var n=e("../../lib");t.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){return n.isPlainObject(e.marker)&&n.isArrayOrTypedArray(e.marker.size)}}},{"../../lib":164}],303:[function(e,t,r){"use strict";var n=e("../../lib");t.exports=function(e,t,r,a,i){i=i||{};a("textposition");n.coerceFont(a,"textfont",r.font);if(!i.noSelect){a("selected.textfont.color");a("unselected.textfont.color")}}},{"../../lib":164}],304:[function(e,t,r){"use strict";var n=e("../../registry");t.exports=function e(t,r,a,i){var o,l=i("x"),s=i("y");var u=n.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],a);if(l){if(s){o=Math.min(l.length,s.length)}else{o=l.length;i("y0");i("dy")}}else{if(!s)return 0;o=r.y.length;i("x0");i("dx")}r._length=o;return o}},{"../../registry":258}],305:[function(e,t,r){"use strict";var n=e("../scatter/attributes");var a=e("../../plots/attributes");var i=e("../../components/colorscale/attributes");var o=e("../../components/drawing/attributes").dash;var l=e("../../lib/extend").extendFlat;var s=e("../../plot_api/edit_types").overrideAll;var u=n.marker,c=n.line,f=u.line;t.exports=s({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:l({},n.mode,{dflt:"markers"}),text:l({},n.text,{}),hovertext:l({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:c.color,width:c.width,dash:o},connectgaps:n.connectgaps,marker:l({symbol:u.symbol,opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,colorbar:u.colorbar,line:l({width:f.width},i("marker.line")),gradient:u.gradient},i("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:l({},a.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested")},{"../../components/colorscale/attributes":51,"../../components/drawing/attributes":68,"../../lib/extend":156,"../../plot_api/edit_types":192,"../../plots/attributes":206,"../scatter/attributes":280}],306:[function(e,t,r){"use strict";var n=e("fast-isnumeric");var a=e("../../constants/numerical").BADNUM;var i=e("../scatter/colorscale_calc");var o=e("../scatter/arrays_to_calcdata");var l=e("../scatter/calc_selection");var s=e("../../lib")._;t.exports=function e(t,r){var u=Array.isArray(r.locations);var c=u?r.locations.length:r._length;var f=new Array(c);for(var d=0;d<c;d++){var p=f[d]={};if(u){var v=r.locations[d];p.loc=typeof v==="string"?v:null}else{var h=r.lon[d];var g=r.lat[d];if(n(h)&&n(g))p.lonlat=[+h,+g];else p.lonlat=[a,a]}}o(f,r);i(r);l(f,r);if(c){f[0].t={labels:{lat:s(t,"lat:")+" ",lon:s(t,"lon:")+" "}}}return f}},{"../../constants/numerical":144,"../../lib":164,"../scatter/arrays_to_calcdata":279,"../scatter/calc_selection":282,"../scatter/colorscale_calc":284,"fast-isnumeric":11}],307:[function(e,t,r){"use strict";var n=e("../../lib");var a=e("../scatter/subtypes");var i=e("../scatter/marker_defaults");var o=e("../scatter/line_defaults");var l=e("../scatter/text_defaults");var s=e("../scatter/fillcolor_defaults");var u=e("./attributes");t.exports=function e(t,r,f,d){function p(e,a){return n.coerce(t,r,u,e,a)}var v=c(t,r,p);if(!v){r.visible=false;return}p("text");p("hovertext");p("mode");if(a.hasLines(r)){o(t,r,f,d,p);p("connectgaps")}if(a.hasMarkers(r)){i(t,r,f,d,p,{gradient:true})}if(a.hasText(r)){l(t,r,d,p)}p("fill");if(r.fill!=="none"){s(t,r,f,p)}};function c(e,t,r){var n=0,a=r("locations");var i,o;if(a){r("locationmode");n=a.length;return n}i=r("lon")||[];o=r("lat")||[];n=Math.min(i.length,o.length);t._length=n;return n}},{"../../lib":164,"../scatter/fillcolor_defaults":288,"../scatter/line_defaults":292,"../scatter/marker_defaults":298,"../scatter/subtypes":302,"../scatter/text_defaults":303,"./attributes":305}],308:[function(e,t,r){"use strict";t.exports=function e(t,r){t.lon=r.lon;t.lat=r.lat;t.location=r.loc?r.loc:null;return t}},{}],309:[function(e,t,r){"use strict";var n=e("../../components/fx");var a=e("../../plots/cartesian/axes");var i=e("../../constants/numerical").BADNUM;var o=e("../scatter/get_trace_color");var l=e("../scatter/fill_hover_text");var s=e("./attributes");t.exports=function e(t,r,a){var l=t.cd;var s=l[0].trace;var c=t.xa;var f=t.ya;var d=t.subplot;var p=d.projection.isLonLatOverEdges;var v=d.project;function h(e){var t=e.lonlat;if(t[0]===i)return Infinity;if(p(t))return Infinity;var n=v(t);var o=v([r,a]);var l=Math.abs(n[0]-o[0]);var s=Math.abs(n[1]-o[1]);var u=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(l*l+s*s)-u,1-3/u)}n.getClosest(l,h,t);if(t.index===false)return;var g=l[t.index];var y=g.lonlat;var m=[c.c2p(y),f.c2p(y)];var x=g.mrc||1;t.x0=m[0]-x;t.x1=m[0]+x;t.y0=m[1]-x;t.y1=m[1]+x;t.loc=g.loc;t.lon=y[0];t.lat=y[1];t.color=o(s,g);t.extraText=u(s,g,d.mockAxis,l[0].t.labels);return[t]};function u(e,t,r,n){var i=t.hi||e.hoverinfo;var o=i==="all"?s.hoverinfo.flags:i.split("+");var u=o.indexOf("location")!==-1&&Array.isArray(e.locations);var c=o.indexOf("lon")!==-1;var f=o.indexOf("lat")!==-1;var d=o.indexOf("text")!==-1;var p=[];function v(e){return a.tickText(r,r.c2l(e),"hover").text+"\xb0"}if(u){p.push(t.loc)}else if(c&&f){p.push("("+v(t.lonlat[0])+", "+v(t.lonlat[1])+")")}else if(c){p.push(n.lon+v(t.lonlat[0]))}else if(f){p.push(n.lat+v(t.lonlat[1]))}if(d){l(t,e,p)}return p.join("<br>")}},{"../../components/fx":86,"../../constants/numerical":144,"../../plots/cartesian/axes":209,"../scatter/fill_hover_text":287,"../scatter/get_trace_color":289,"./attributes":305}],310:[function(e,t,r){"use strict";var n={};n.attributes=e("./attributes");n.supplyDefaults=e("./defaults");n.colorbar=e("../scatter/marker_colorbar");n.calc=e("./calc");n.plot=e("./plot");n.style=e("./style");n.styleOnSelect=e("../scatter/style").styleOnSelect;n.hoverPoints=e("./hover");n.eventData=e("./event_data");n.selectPoints=e("./select");n.moduleType="trace";n.name="scattergeo";n.basePlotModule=e("../../plots/geo");n.categories=["geo","symbols","showLegend","scatter-like"];n.meta={};t.exports=n},{"../../plots/geo":239,"../scatter/marker_colorbar":297,"../scatter/style":301,"./attributes":305,"./calc":306,"./defaults":307,"./event_data":308,"./hover":309,"./plot":311,"./select":312,"./style":313}],311:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../lib");var i=e("../../constants/numerical").BADNUM;var o=e("../../lib/topojson_utils").getTopojsonFeatures;var l=e("../../lib/geo_location_utils").locationToFeature;var s=e("../../lib/geojson_utils");var u=e("../scatter/subtypes");var c=e("./style");t.exports=function e(t,r,o){for(var l=0;l<o.length;l++){f(o[l],r.topojson)}function d(e){return e[0].trace.uid}function p(e,t){if(e.lonlat[0]===i){n.select(t).remove()}}var v=r.layers.frontplot.select(".scatterlayer").selectAll("g.trace.scattergeo").data(o,d);v.enter().append("g").attr("class","trace scattergeo");v.exit().remove();v.selectAll("*").remove();v.each(function(e){var r=e[0].node3=n.select(this);var i=e[0].trace;if(u.hasLines(i)||i.fill!=="none"){var o=s.calcTraceToLineCoords(e);var l=i.fill!=="none"?s.makePolygon(o):s.makeLine(o);r.selectAll("path.js-line").data([{geojson:l,trace:i}]).enter().append("path").classed("js-line",true).style("stroke-miterlimit",2)}if(u.hasMarkers(i)){r.selectAll("path.point").data(a.identity).enter().append("path").classed("point",true).each(function(e){p(e,this)})}if(u.hasText(i)){r.selectAll("g").data(a.identity).enter().append("g").append("text").each(function(e){p(e,this)})}c(t,e)})};function f(e,t){var r=e[0].trace;if(!Array.isArray(r.locations))return;var n=o(r,t);var a=r.locationmode;for(var s=0;s<e.length;s++){var u=e[s];var c=l(a,u.loc,n);u.lonlat=c?c.properties.ct:[i,i]}}},{"../../constants/numerical":144,"../../lib":164,"../../lib/geo_location_utils":159,"../../lib/geojson_utils":160,"../../lib/topojson_utils":188,"../scatter/subtypes":302,"./style":313,d3:8}],312:[function(e,t,r){"use strict";var n=e("../scatter/subtypes");t.exports=function e(t,r){var a=t.cd;var i=t.xaxis;var o=t.yaxis;var l=[];var s=a[0].trace;var u,c,f,d,p;var v=!n.hasMarkers(s)&&!n.hasText(s);if(v)return[];if(r===false){for(p=0;p<a.length;p++){a[p].selected=0}}else{for(p=0;p<a.length;p++){u=a[p];c=u.lonlat;f=i.c2p(c);d=o.c2p(c);if(r.contains([f,d])){l.push({pointNumber:p,lon:c[0],lat:c[1]});u.selected=1}else{u.selected=0}}}return l}},{"../scatter/subtypes":302}],313:[function(e,t,r){"use strict";var n=e("d3");var a=e("../../components/drawing");var i=e("../../components/color");var o=e("../scatter/style").stylePoints;t.exports=function e(t,r){if(r)l(t,r)};function l(e,t){var r=t[0].trace;var l=t[0].node3;l.style("opacity",t[0].trace.opacity);o(l,r,e);l.selectAll("path.js-line").style("fill","none").each(function(e){var t=n.select(this);var r=e.trace;var o=r.line||{};t.call(i.stroke,o.color).call(a.dashLine,o.dash||"",o.width||0);if(r.fill!=="none"){t.call(i.fill,r.fillcolor)}})}},{"../../components/color":44,"../../components/drawing":69,"../scatter/style":301,d3:8}]},{},[5])(5)});